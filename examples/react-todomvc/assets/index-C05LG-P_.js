var ob=Object.defineProperty;var lb=(n,t,e)=>t in n?ob(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var l=(n,t,e)=>lb(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();function _y(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Wy={exports:{}},fc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ub=Symbol.for("react.transitional.element"),cb=Symbol.for("react.fragment");function tp(n,t,e){var r=null;if(e!==void 0&&(r=""+e),t.key!==void 0&&(r=""+t.key),"key"in t){e={};for(var i in t)i!=="key"&&(e[i]=t[i])}else e=t;return t=e.ref,{$$typeof:ub,type:n,key:r,ref:t!==void 0?t:null,props:e}}fc.Fragment=cb;fc.jsx=tp;fc.jsxs=tp;Wy.exports=fc;var W=Wy.exports,ep={exports:{}},hc={},np={exports:{}},rp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(z,$){var j=z.length;z.push($);t:for(;0<j;){var At=j-1>>>1,Mt=z[At];if(0<i(Mt,$))z[At]=$,z[j]=Mt,j=At;else break t}}function e(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var $=z[0],j=z.pop();if(j!==$){z[0]=j;t:for(var At=0,Mt=z.length,vl=Mt>>>1;At<vl;){var Sl=2*(At+1)-1,Jc=z[Sl],ea=Sl+1,bl=z[ea];if(0>i(Jc,j))ea<Mt&&0>i(bl,Jc)?(z[At]=bl,z[ea]=j,At=ea):(z[At]=Jc,z[Sl]=j,At=Sl);else if(ea<Mt&&0>i(bl,j))z[At]=bl,z[ea]=j,At=ea;else break t}}return $}function i(z,$){var j=z.sortIndex-$.sortIndex;return j!==0?j:z.id-$.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var u=[],c=[],h=1,m=null,d=3,g=!1,T=!1,A=!1,x=!1,p=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;function w(z){for(var $=e(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=z)r(c),$.sortIndex=$.expirationTime,t(u,$);else break;$=e(c)}}function k(z){if(A=!1,w(z),!T)if(e(u)!==null)T=!0,I||(I=!0,fe());else{var $=e(c);$!==null&&Lc(k,$.startTime-z)}}var I=!1,C=-1,R=5,P=-1;function J(){return x?!0:!(n.unstable_now()-P<R)}function Vt(){if(x=!1,I){var z=n.unstable_now();P=z;var $=!0;try{t:{T=!1,A&&(A=!1,y(C),C=-1),g=!0;var j=d;try{e:{for(w(z),m=e(u);m!==null&&!(m.expirationTime>z&&J());){var At=m.callback;if(typeof At=="function"){m.callback=null,d=m.priorityLevel;var Mt=At(m.expirationTime<=z);if(z=n.unstable_now(),typeof Mt=="function"){m.callback=Mt,w(z),$=!0;break e}m===e(u)&&r(u),w(z)}else r(u);m=e(u)}if(m!==null)$=!0;else{var vl=e(c);vl!==null&&Lc(k,vl.startTime-z),$=!1}}break t}finally{m=null,d=j,g=!1}$=void 0}}finally{$?fe():I=!1}}}var fe;if(typeof v=="function")fe=function(){v(Vt)};else if(typeof MessageChannel<"u"){var ta=new MessageChannel,sb=ta.port2;ta.port1.onmessage=Vt,fe=function(){sb.postMessage(null)}}else fe=function(){p(Vt,0)};function Lc(z,$){C=p(function(){z(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_next=function(z){switch(d){case 1:case 2:case 3:var $=3;break;default:$=d}var j=d;d=$;try{return z()}finally{d=j}},n.unstable_requestPaint=function(){x=!0},n.unstable_runWithPriority=function(z,$){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var j=d;d=z;try{return $()}finally{d=j}},n.unstable_scheduleCallback=function(z,$,j){var At=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?At+j:At):j=At,z){case 1:var Mt=-1;break;case 2:Mt=250;break;case 5:Mt=1073741823;break;case 4:Mt=1e4;break;default:Mt=5e3}return Mt=j+Mt,z={id:h++,callback:$,priorityLevel:z,startTime:j,expirationTime:Mt,sortIndex:-1},j>At?(z.sortIndex=j,t(c,z),e(u)===null&&z===e(c)&&(A?(y(C),C=-1):A=!0,Lc(k,j-At))):(z.sortIndex=Mt,t(u,z),T||g||(T=!0,I||(I=!0,fe()))),z},n.unstable_shouldYield=J,n.unstable_wrapCallback=function(z){var $=d;return function(){var j=d;d=$;try{return z.apply(this,arguments)}finally{d=j}}}})(rp);np.exports=rp;var fb=np.exports,ip={exports:{}},H={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cd=Symbol.for("react.transitional.element"),hb=Symbol.for("react.portal"),db=Symbol.for("react.fragment"),gb=Symbol.for("react.strict_mode"),mb=Symbol.for("react.profiler"),yb=Symbol.for("react.consumer"),pb=Symbol.for("react.context"),vb=Symbol.for("react.forward_ref"),Sb=Symbol.for("react.suspense"),bb=Symbol.for("react.memo"),ap=Symbol.for("react.lazy"),kg=Symbol.iterator;function Tb(n){return n===null||typeof n!="object"?null:(n=kg&&n[kg]||n["@@iterator"],typeof n=="function"?n:null)}var sp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},op=Object.assign,lp={};function Ms(n,t,e){this.props=n,this.context=t,this.refs=lp,this.updater=e||sp}Ms.prototype.isReactComponent={};Ms.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};Ms.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function up(){}up.prototype=Ms.prototype;function fd(n,t,e){this.props=n,this.context=t,this.refs=lp,this.updater=e||sp}var hd=fd.prototype=new up;hd.constructor=fd;op(hd,Ms.prototype);hd.isPureReactComponent=!0;var Cg=Array.isArray,mt={H:null,A:null,T:null,S:null,V:null},cp=Object.prototype.hasOwnProperty;function dd(n,t,e,r,i,a){return e=a.ref,{$$typeof:cd,type:n,key:t,ref:e!==void 0?e:null,props:a}}function wb(n,t){return dd(n.type,t,void 0,void 0,void 0,n.props)}function gd(n){return typeof n=="object"&&n!==null&&n.$$typeof===cd}function Ab(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var Ig=/\/+/g;function qc(n,t){return typeof n=="object"&&n!==null&&n.key!=null?Ab(""+n.key):t.toString(36)}function Rg(){}function Eb(n){switch(n.status){case"fulfilled":return n.value;case"rejected":throw n.reason;default:switch(typeof n.status=="string"?n.then(Rg,Rg):(n.status="pending",n.then(function(t){n.status==="pending"&&(n.status="fulfilled",n.value=t)},function(t){n.status==="pending"&&(n.status="rejected",n.reason=t)})),n.status){case"fulfilled":return n.value;case"rejected":throw n.reason}}throw n}function Ma(n,t,e,r,i){var a=typeof n;(a==="undefined"||a==="boolean")&&(n=null);var s=!1;if(n===null)s=!0;else switch(a){case"bigint":case"string":case"number":s=!0;break;case"object":switch(n.$$typeof){case cd:case hb:s=!0;break;case ap:return s=n._init,Ma(s(n._payload),t,e,r,i)}}if(s)return i=i(n),s=r===""?"."+qc(n,0):r,Cg(i)?(e="",s!=null&&(e=s.replace(Ig,"$&/")+"/"),Ma(i,t,e,"",function(c){return c})):i!=null&&(gd(i)&&(i=wb(i,e+(i.key==null||n&&n.key===i.key?"":(""+i.key).replace(Ig,"$&/")+"/")+s)),t.push(i)),1;s=0;var o=r===""?".":r+":";if(Cg(n))for(var u=0;u<n.length;u++)r=n[u],a=o+qc(r,u),s+=Ma(r,t,e,a,i);else if(u=Tb(n),typeof u=="function")for(n=u.call(n),u=0;!(r=n.next()).done;)r=r.value,a=o+qc(r,u++),s+=Ma(r,t,e,a,i);else if(a==="object"){if(typeof n.then=="function")return Ma(Eb(n),t,e,r,i);throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return s}function Tl(n,t,e){if(n==null)return n;var r=[],i=0;return Ma(n,r,"","",function(a){return t.call(e,a,i++)}),r}function Nb(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var Bg=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function xb(){}H.Children={map:Tl,forEach:function(n,t,e){Tl(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return Tl(n,function(){t++}),t},toArray:function(n){return Tl(n,function(t){return t})||[]},only:function(n){if(!gd(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};H.Component=Ms;H.Fragment=db;H.Profiler=mb;H.PureComponent=fd;H.StrictMode=gb;H.Suspense=Sb;H.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=mt;H.__COMPILER_RUNTIME={__proto__:null,c:function(n){return mt.H.useMemoCache(n)}};H.cache=function(n){return function(){return n.apply(null,arguments)}};H.cloneElement=function(n,t,e){if(n==null)throw Error("The argument must be a React element, but you passed "+n+".");var r=op({},n.props),i=n.key,a=void 0;if(t!=null)for(s in t.ref!==void 0&&(a=void 0),t.key!==void 0&&(i=""+t.key),t)!cp.call(t,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&t.ref===void 0||(r[s]=t[s]);var s=arguments.length-2;if(s===1)r.children=e;else if(1<s){for(var o=Array(s),u=0;u<s;u++)o[u]=arguments[u+2];r.children=o}return dd(n.type,i,void 0,void 0,a,r)};H.createContext=function(n){return n={$$typeof:pb,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null},n.Provider=n,n.Consumer={$$typeof:yb,_context:n},n};H.createElement=function(n,t,e){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=""+t.key),t)cp.call(t,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=e;else if(1<s){for(var o=Array(s),u=0;u<s;u++)o[u]=arguments[u+2];i.children=o}if(n&&n.defaultProps)for(r in s=n.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return dd(n,a,void 0,void 0,null,i)};H.createRef=function(){return{current:null}};H.forwardRef=function(n){return{$$typeof:vb,render:n}};H.isValidElement=gd;H.lazy=function(n){return{$$typeof:ap,_payload:{_status:-1,_result:n},_init:Nb}};H.memo=function(n,t){return{$$typeof:bb,type:n,compare:t===void 0?null:t}};H.startTransition=function(n){var t=mt.T,e={};mt.T=e;try{var r=n(),i=mt.S;i!==null&&i(e,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(xb,Bg)}catch(a){Bg(a)}finally{mt.T=t}};H.unstable_useCacheRefresh=function(){return mt.H.useCacheRefresh()};H.use=function(n){return mt.H.use(n)};H.useActionState=function(n,t,e){return mt.H.useActionState(n,t,e)};H.useCallback=function(n,t){return mt.H.useCallback(n,t)};H.useContext=function(n){return mt.H.useContext(n)};H.useDebugValue=function(){};H.useDeferredValue=function(n,t){return mt.H.useDeferredValue(n,t)};H.useEffect=function(n,t,e){var r=mt.H;if(typeof e=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(n,t)};H.useId=function(){return mt.H.useId()};H.useImperativeHandle=function(n,t,e){return mt.H.useImperativeHandle(n,t,e)};H.useInsertionEffect=function(n,t){return mt.H.useInsertionEffect(n,t)};H.useLayoutEffect=function(n,t){return mt.H.useLayoutEffect(n,t)};H.useMemo=function(n,t){return mt.H.useMemo(n,t)};H.useOptimistic=function(n,t){return mt.H.useOptimistic(n,t)};H.useReducer=function(n,t,e){return mt.H.useReducer(n,t,e)};H.useRef=function(n){return mt.H.useRef(n)};H.useState=function(n){return mt.H.useState(n)};H.useSyncExternalStore=function(n,t,e){return mt.H.useSyncExternalStore(n,t,e)};H.useTransition=function(){return mt.H.useTransition()};H.version="19.1.0";ip.exports=H;var ut=ip.exports,fp={exports:{}},ee={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db=ut;function hp(n){var t="https://react.dev/errors/"+n;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var e=2;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e])}return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function vi(){}var te={d:{f:vi,r:function(){throw Error(hp(522))},D:vi,C:vi,L:vi,m:vi,X:vi,S:vi,M:vi},p:0,findDOMNode:null},Ob=Symbol.for("react.portal");function kb(n,t,e){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ob,key:r==null?null:""+r,children:n,containerInfo:t,implementation:e}}var so=Db.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function dc(n,t){if(n==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}ee.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te;ee.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(hp(299));return kb(n,t,null,e)};ee.flushSync=function(n){var t=so.T,e=te.p;try{if(so.T=null,te.p=2,n)return n()}finally{so.T=t,te.p=e,te.d.f()}};ee.preconnect=function(n,t){typeof n=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,te.d.C(n,t))};ee.prefetchDNS=function(n){typeof n=="string"&&te.d.D(n)};ee.preinit=function(n,t){if(typeof n=="string"&&t&&typeof t.as=="string"){var e=t.as,r=dc(e,t.crossOrigin),i=typeof t.integrity=="string"?t.integrity:void 0,a=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;e==="style"?te.d.S(n,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:a}):e==="script"&&te.d.X(n,{crossOrigin:r,integrity:i,fetchPriority:a,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};ee.preinitModule=function(n,t){if(typeof n=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var e=dc(t.as,t.crossOrigin);te.d.M(n,{crossOrigin:e,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&te.d.M(n)};ee.preload=function(n,t){if(typeof n=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var e=t.as,r=dc(e,t.crossOrigin);te.d.L(n,e,{crossOrigin:r,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};ee.preloadModule=function(n,t){if(typeof n=="string")if(t){var e=dc(t.as,t.crossOrigin);te.d.m(n,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:e,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else te.d.m(n)};ee.requestFormReset=function(n){te.d.r(n)};ee.unstable_batchedUpdates=function(n,t){return n(t)};ee.useFormState=function(n,t,e){return so.H.useFormState(n,t,e)};ee.useFormStatus=function(){return so.H.useHostTransitionStatus()};ee.version="19.1.0";function dp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dp)}catch(n){console.error(n)}}dp(),fp.exports=ee;var Cb=fp.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zt=fb,gp=ut,Ib=Cb;function N(n){var t="https://react.dev/errors/"+n;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var e=2;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e])}return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function mp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function _o(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function yp(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function zg(n){if(_o(n)!==n)throw Error(N(188))}function Rb(n){var t=n.alternate;if(!t){if(t=_o(n),t===null)throw Error(N(188));return t!==n?null:n}for(var e=n,r=t;;){var i=e.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){e=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===e)return zg(i),n;if(a===r)return zg(i),t;a=a.sibling}throw Error(N(188))}if(e.return!==r.return)e=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===e){s=!0,e=i,r=a;break}if(o===r){s=!0,r=i,e=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===e){s=!0,e=a,r=i;break}if(o===r){s=!0,r=a,e=i;break}o=o.sibling}if(!s)throw Error(N(189))}}if(e.alternate!==r)throw Error(N(190))}if(e.tag!==3)throw Error(N(188));return e.stateNode.current===e?n:t}function pp(n){var t=n.tag;if(t===5||t===26||t===27||t===6)return n;for(n=n.child;n!==null;){if(t=pp(n),t!==null)return t;n=n.sibling}return null}var ht=Object.assign,Bb=Symbol.for("react.element"),wl=Symbol.for("react.transitional.element"),Ws=Symbol.for("react.portal"),Va=Symbol.for("react.fragment"),vp=Symbol.for("react.strict_mode"),Of=Symbol.for("react.profiler"),zb=Symbol.for("react.provider"),Sp=Symbol.for("react.consumer"),_r=Symbol.for("react.context"),md=Symbol.for("react.forward_ref"),kf=Symbol.for("react.suspense"),Cf=Symbol.for("react.suspense_list"),yd=Symbol.for("react.memo"),Ei=Symbol.for("react.lazy"),If=Symbol.for("react.activity"),Mb=Symbol.for("react.memo_cache_sentinel"),Mg=Symbol.iterator;function Hs(n){return n===null||typeof n!="object"?null:(n=Mg&&n[Mg]||n["@@iterator"],typeof n=="function"?n:null)}var Ub=Symbol.for("react.client.reference");function Rf(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Ub?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Va:return"Fragment";case Of:return"Profiler";case vp:return"StrictMode";case kf:return"Suspense";case Cf:return"SuspenseList";case If:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case Ws:return"Portal";case _r:return(n.displayName||"Context")+".Provider";case Sp:return(n._context.displayName||"Context")+".Consumer";case md:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case yd:return t=n.displayName||null,t!==null?t:Rf(n.type)||"Memo";case Ei:t=n._payload,n=n._init;try{return Rf(n(t))}catch{}}return null}var to=Array.isArray,q=gp.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et=Ib.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ca={pending:!1,data:null,method:null,action:null},Bf=[],Ha=-1;function On(n){return{current:n}}function Pt(n){0>Ha||(n.current=Bf[Ha],Bf[Ha]=null,Ha--)}function yt(n,t){Ha++,Bf[Ha]=n.current,n.current=t}var Sn=On(null),ko=On(null),Ui=On(null),lu=On(null);function uu(n,t){switch(yt(Ui,t),yt(ko,n),yt(Sn,null),t.nodeType){case 9:case 11:n=(n=t.documentElement)&&(n=n.namespaceURI)?Pm(n):0;break;default:if(n=t.tagName,t=t.namespaceURI)t=Pm(t),n=U0(t,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Pt(Sn),yt(Sn,n)}function fs(){Pt(Sn),Pt(ko),Pt(Ui)}function zf(n){n.memoizedState!==null&&yt(lu,n);var t=Sn.current,e=U0(t,n.type);t!==e&&(yt(ko,n),yt(Sn,e))}function cu(n){ko.current===n&&(Pt(Sn),Pt(ko)),lu.current===n&&(Pt(lu),qo._currentValue=ca)}var Mf=Object.prototype.hasOwnProperty,pd=zt.unstable_scheduleCallback,Pc=zt.unstable_cancelCallback,Lb=zt.unstable_shouldYield,Jb=zt.unstable_requestPaint,bn=zt.unstable_now,qb=zt.unstable_getCurrentPriorityLevel,bp=zt.unstable_ImmediatePriority,Tp=zt.unstable_UserBlockingPriority,fu=zt.unstable_NormalPriority,Pb=zt.unstable_LowPriority,wp=zt.unstable_IdlePriority,Vb=zt.log,Hb=zt.unstable_setDisableYieldValue,Wo=null,ve=null;function Ii(n){if(typeof Vb=="function"&&Hb(n),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(Wo,n)}catch{}}var Se=Math.clz32?Math.clz32:$b,Kb=Math.log,jb=Math.LN2;function $b(n){return n>>>=0,n===0?32:31-(Kb(n)/jb|0)|0}var Al=256,El=4194304;function ra(n){var t=n&42;if(t!==0)return t;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function gc(n,t,e){var r=n.pendingLanes;if(r===0)return 0;var i=0,a=n.suspendedLanes,s=n.pingedLanes;n=n.warmLanes;var o=r&134217727;return o!==0?(r=o&~a,r!==0?i=ra(r):(s&=o,s!==0?i=ra(s):e||(e=o&~n,e!==0&&(i=ra(e))))):(o=r&~a,o!==0?i=ra(o):s!==0?i=ra(s):e||(e=r&~n,e!==0&&(i=ra(e)))),i===0?0:t!==0&&t!==i&&!(t&a)&&(a=i&-i,e=t&-t,a>=e||a===32&&(e&4194048)!==0)?t:i}function tl(n,t){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&t)===0}function Gb(n,t){switch(n){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ap(){var n=Al;return Al<<=1,!(Al&4194048)&&(Al=256),n}function Ep(){var n=El;return El<<=1,!(El&62914560)&&(El=4194304),n}function Vc(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function el(n,t){n.pendingLanes|=t,t!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Yb(n,t,e,r,i,a){var s=n.pendingLanes;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=e,n.entangledLanes&=e,n.errorRecoveryDisabledLanes&=e,n.shellSuspendCounter=0;var o=n.entanglements,u=n.expirationTimes,c=n.hiddenUpdates;for(e=s&~e;0<e;){var h=31-Se(e),m=1<<h;o[h]=0,u[h]=-1;var d=c[h];if(d!==null)for(c[h]=null,h=0;h<d.length;h++){var g=d[h];g!==null&&(g.lane&=-536870913)}e&=~m}r!==0&&Np(n,r,0),a!==0&&i===0&&n.tag!==0&&(n.suspendedLanes|=a&~(s&~t))}function Np(n,t,e){n.pendingLanes|=t,n.suspendedLanes&=~t;var r=31-Se(t);n.entangledLanes|=t,n.entanglements[r]=n.entanglements[r]|1073741824|e&4194090}function xp(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var r=31-Se(e),i=1<<r;i&t|n[r]&t&&(n[r]|=t),e&=~i}}function vd(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Sd(n){return n&=-n,2<n?8<n?n&134217727?32:268435456:8:2}function Dp(){var n=et.p;return n!==0?n:(n=window.event,n===void 0?32:G0(n.type))}function Xb(n,t){var e=et.p;try{return et.p=n,t()}finally{et.p=e}}var Qi=Math.random().toString(36).slice(2),Xt="__reactFiber$"+Qi,le="__reactProps$"+Qi,Us="__reactContainer$"+Qi,Uf="__reactEvents$"+Qi,Fb="__reactListeners$"+Qi,Zb="__reactHandles$"+Qi,Ug="__reactResources$"+Qi,nl="__reactMarker$"+Qi;function bd(n){delete n[Xt],delete n[le],delete n[Uf],delete n[Fb],delete n[Zb]}function Ka(n){var t=n[Xt];if(t)return t;for(var e=n.parentNode;e;){if(t=e[Us]||e[Xt]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=Km(n);n!==null;){if(e=n[Xt])return e;n=Km(n)}return t}n=e,e=n.parentNode}return null}function Ls(n){if(n=n[Xt]||n[Us]){var t=n.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return n}return null}function eo(n){var t=n.tag;if(t===5||t===26||t===27||t===6)return n.stateNode;throw Error(N(33))}function es(n){var t=n[Ug];return t||(t=n[Ug]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Jt(n){n[nl]=!0}var Op=new Set,kp={};function Na(n,t){hs(n,t),hs(n+"Capture",t)}function hs(n,t){for(kp[n]=t,n=0;n<t.length;n++)Op.add(t[n])}var Qb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lg={},Jg={};function _b(n){return Mf.call(Jg,n)?!0:Mf.call(Lg,n)?!1:Qb.test(n)?Jg[n]=!0:(Lg[n]=!0,!1)}function Kl(n,t,e){if(_b(t))if(e===null)n.removeAttribute(t);else{switch(typeof e){case"undefined":case"function":case"symbol":n.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){n.removeAttribute(t);return}}n.setAttribute(t,""+e)}}function Nl(n,t,e){if(e===null)n.removeAttribute(t);else{switch(typeof e){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(t);return}n.setAttribute(t,""+e)}}function Cn(n,t,e,r){if(r===null)n.removeAttribute(e);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(e);return}n.setAttributeNS(t,e,""+r)}}var Hc,qg;function Ua(n){if(Hc===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Hc=t&&t[1]||"",qg=-1<e.stack.indexOf(`
    at`)?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hc+n+qg}var Kc=!1;function jc(n,t){if(!n||Kc)return"";Kc=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(g){var d=g}Reflect.construct(n,[],m)}else{try{m.call()}catch(g){d=g}n.call(m.prototype)}}else{try{throw Error()}catch(g){d=g}(m=n())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(g){if(g&&d&&typeof g.stack=="string")return[g.stack,d.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var u=s.split(`
`),c=o.split(`
`);for(i=r=0;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===u.length||i===c.length)for(r=u.length-1,i=c.length-1;1<=r&&0<=i&&u[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(u[r]!==c[i]){if(r!==1||i!==1)do if(r--,i--,0>i||u[r]!==c[i]){var h=`
`+u[r].replace(" at new "," at ");return n.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",n.displayName)),h}while(1<=r&&0<=i);break}}}finally{Kc=!1,Error.prepareStackTrace=e}return(e=n?n.displayName||n.name:"")?Ua(e):""}function Wb(n){switch(n.tag){case 26:case 27:case 5:return Ua(n.type);case 16:return Ua("Lazy");case 13:return Ua("Suspense");case 19:return Ua("SuspenseList");case 0:case 15:return jc(n.type,!1);case 11:return jc(n.type.render,!1);case 1:return jc(n.type,!0);case 31:return Ua("Activity");default:return""}}function Pg(n){try{var t="";do t+=Wb(n),n=n.return;while(n);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}function xe(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Cp(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tT(n){var t=Cp(n)?"checked":"value",e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),r=""+n[t];if(!n.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var i=e.get,a=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function hu(n){n._valueTracker||(n._valueTracker=tT(n))}function Ip(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),r="";return n&&(r=Cp(n)?n.checked?"true":"false":n.value),n=r,n!==e?(t.setValue(n),!0):!1}function du(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var eT=/[\n"\\]/g;function Je(n){return n.replace(eT,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Lf(n,t,e,r,i,a,s,o){n.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?n.type=s:n.removeAttribute("type"),t!=null?s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+xe(t)):n.value!==""+xe(t)&&(n.value=""+xe(t)):s!=="submit"&&s!=="reset"||n.removeAttribute("value"),t!=null?Jf(n,s,xe(t)):e!=null?Jf(n,s,xe(e)):r!=null&&n.removeAttribute("value"),i==null&&a!=null&&(n.defaultChecked=!!a),i!=null&&(n.checked=i&&typeof i!="function"&&typeof i!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?n.name=""+xe(o):n.removeAttribute("name")}function Rp(n,t,e,r,i,a,s,o){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(n.type=a),t!=null||e!=null){if(!(a!=="submit"&&a!=="reset"||t!=null))return;e=e!=null?""+xe(e):"",t=t!=null?""+xe(t):e,o||t===n.value||(n.value=t),n.defaultValue=t}r=r??i,r=typeof r!="function"&&typeof r!="symbol"&&!!r,n.checked=o?n.checked:!!r,n.defaultChecked=!!r,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(n.name=s)}function Jf(n,t,e){t==="number"&&du(n.ownerDocument)===n||n.defaultValue===""+e||(n.defaultValue=""+e)}function ns(n,t,e,r){if(n=n.options,t){t={};for(var i=0;i<e.length;i++)t["$"+e[i]]=!0;for(e=0;e<n.length;e++)i=t.hasOwnProperty("$"+n[e].value),n[e].selected!==i&&(n[e].selected=i),i&&r&&(n[e].defaultSelected=!0)}else{for(e=""+xe(e),t=null,i=0;i<n.length;i++){if(n[i].value===e){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}t!==null||n[i].disabled||(t=n[i])}t!==null&&(t.selected=!0)}}function Bp(n,t,e){if(t!=null&&(t=""+xe(t),t!==n.value&&(n.value=t),e==null)){n.defaultValue!==t&&(n.defaultValue=t);return}n.defaultValue=e!=null?""+xe(e):""}function zp(n,t,e,r){if(t==null){if(r!=null){if(e!=null)throw Error(N(92));if(to(r)){if(1<r.length)throw Error(N(93));r=r[0]}e=r}e==null&&(e=""),t=e}e=xe(t),n.defaultValue=e,r=n.textContent,r===e&&r!==""&&r!==null&&(n.value=r)}function ds(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var nT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vg(n,t,e){var r=t.indexOf("--")===0;e==null||typeof e=="boolean"||e===""?r?n.setProperty(t,""):t==="float"?n.cssFloat="":n[t]="":r?n.setProperty(t,e):typeof e!="number"||e===0||nT.has(t)?t==="float"?n.cssFloat=e:n[t]=(""+e).trim():n[t]=e+"px"}function Mp(n,t,e){if(t!=null&&typeof t!="object")throw Error(N(62));if(n=n.style,e!=null){for(var r in e)!e.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&e[i]!==r&&Vg(n,i,r)}else for(var a in t)t.hasOwnProperty(a)&&Vg(n,a,t[a])}function Td(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),iT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jl(n){return iT.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var qf=null;function wd(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ja=null,rs=null;function Hg(n){var t=Ls(n);if(t&&(n=t.stateNode)){var e=n[le]||null;t:switch(n=t.stateNode,t.type){case"input":if(Lf(n,e.value,e.defaultValue,e.defaultValue,e.checked,e.defaultChecked,e.type,e.name),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll('input[name="'+Je(""+t)+'"][type="radio"]'),t=0;t<e.length;t++){var r=e[t];if(r!==n&&r.form===n.form){var i=r[le]||null;if(!i)throw Error(N(90));Lf(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<e.length;t++)r=e[t],r.form===n.form&&Ip(r)}break t;case"textarea":Bp(n,e.value,e.defaultValue);break t;case"select":t=e.value,t!=null&&ns(n,!!e.multiple,t,!1)}}}var $c=!1;function Up(n,t,e){if($c)return n(t,e);$c=!0;try{var r=n(t);return r}finally{if($c=!1,(ja!==null||rs!==null)&&(Ec(),ja&&(t=ja,n=rs,rs=ja=null,Hg(t),n)))for(t=0;t<n.length;t++)Hg(n[t])}}function Co(n,t){var e=n.stateNode;if(e===null)return null;var r=e[le]||null;if(r===null)return null;e=r[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(N(231,t,typeof e));return e}var ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pf=!1;if(ci)try{var Ks={};Object.defineProperty(Ks,"passive",{get:function(){Pf=!0}}),window.addEventListener("test",Ks,Ks),window.removeEventListener("test",Ks,Ks)}catch{Pf=!1}var Ri=null,Ad=null,$l=null;function Lp(){if($l)return $l;var n,t=Ad,e=t.length,r,i="value"in Ri?Ri.value:Ri.textContent,a=i.length;for(n=0;n<e&&t[n]===i[n];n++);var s=e-n;for(r=1;r<=s&&t[e-r]===i[a-r];r++);return $l=i.slice(n,1<r?1-r:void 0)}function Gl(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function xl(){return!0}function Kg(){return!1}function ce(n){function t(e,r,i,a,s){this._reactName=e,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(e=n[o],this[o]=e?e(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?xl:Kg,this.isPropagationStopped=Kg,this}return ht(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=xl)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=xl)},persist:function(){},isPersistent:xl}),t}var xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mc=ce(xa),rl=ht({},xa,{view:0,detail:0}),aT=ce(rl),Gc,Yc,js,yc=ht({},rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ed,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==js&&(js&&n.type==="mousemove"?(Gc=n.screenX-js.screenX,Yc=n.screenY-js.screenY):Yc=Gc=0,js=n),Gc)},movementY:function(n){return"movementY"in n?n.movementY:Yc}}),jg=ce(yc),sT=ht({},yc,{dataTransfer:0}),oT=ce(sT),lT=ht({},rl,{relatedTarget:0}),Xc=ce(lT),uT=ht({},xa,{animationName:0,elapsedTime:0,pseudoElement:0}),cT=ce(uT),fT=ht({},xa,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),hT=ce(fT),dT=ht({},xa,{data:0}),$g=ce(dT),gT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pT(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=yT[n])?!!t[n]:!1}function Ed(){return pT}var vT=ht({},rl,{key:function(n){if(n.key){var t=gT[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=Gl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?mT[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ed,charCode:function(n){return n.type==="keypress"?Gl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Gl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ST=ce(vT),bT=ht({},yc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gg=ce(bT),TT=ht({},rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ed}),wT=ce(TT),AT=ht({},xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),ET=ce(AT),NT=ht({},yc,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),xT=ce(NT),DT=ht({},xa,{newState:0,oldState:0}),OT=ce(DT),kT=[9,13,27,32],Nd=ci&&"CompositionEvent"in window,oo=null;ci&&"documentMode"in document&&(oo=document.documentMode);var CT=ci&&"TextEvent"in window&&!oo,Jp=ci&&(!Nd||oo&&8<oo&&11>=oo),Yg=" ",Xg=!1;function qp(n,t){switch(n){case"keyup":return kT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var $a=!1;function IT(n,t){switch(n){case"compositionend":return Pp(t);case"keypress":return t.which!==32?null:(Xg=!0,Yg);case"textInput":return n=t.data,n===Yg&&Xg?null:n;default:return null}}function RT(n,t){if($a)return n==="compositionend"||!Nd&&qp(n,t)?(n=Lp(),$l=Ad=Ri=null,$a=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Jp&&t.locale!=="ko"?null:t.data;default:return null}}var BT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fg(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!BT[n.type]:t==="textarea"}function Vp(n,t,e,r){ja?rs?rs.push(r):rs=[r]:ja=r,t=Iu(t,"onChange"),0<t.length&&(e=new mc("onChange","change",null,e,r),n.push({event:e,listeners:t}))}var lo=null,Io=null;function zT(n){B0(n,0)}function pc(n){var t=eo(n);if(Ip(t))return n}function Zg(n,t){if(n==="change")return t}var Hp=!1;if(ci){var Fc;if(ci){var Zc="oninput"in document;if(!Zc){var Qg=document.createElement("div");Qg.setAttribute("oninput","return;"),Zc=typeof Qg.oninput=="function"}Fc=Zc}else Fc=!1;Hp=Fc&&(!document.documentMode||9<document.documentMode)}function _g(){lo&&(lo.detachEvent("onpropertychange",Kp),Io=lo=null)}function Kp(n){if(n.propertyName==="value"&&pc(Io)){var t=[];Vp(t,Io,n,wd(n)),Up(zT,t)}}function MT(n,t,e){n==="focusin"?(_g(),lo=t,Io=e,lo.attachEvent("onpropertychange",Kp)):n==="focusout"&&_g()}function UT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return pc(Io)}function LT(n,t){if(n==="click")return pc(t)}function JT(n,t){if(n==="input"||n==="change")return pc(t)}function qT(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var we=typeof Object.is=="function"?Object.is:qT;function Ro(n,t){if(we(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),r=Object.keys(t);if(e.length!==r.length)return!1;for(r=0;r<e.length;r++){var i=e[r];if(!Mf.call(t,i)||!we(n[i],t[i]))return!1}return!0}function Wg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function tm(n,t){var e=Wg(n);n=0;for(var r;e;){if(e.nodeType===3){if(r=n+e.textContent.length,n<=t&&r>=t)return{node:e,offset:t-n};n=r}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=Wg(e)}}function jp(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?jp(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function $p(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var t=du(n.document);t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=du(n.document)}return t}function xd(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}var PT=ci&&"documentMode"in document&&11>=document.documentMode,Ga=null,Vf=null,uo=null,Hf=!1;function em(n,t,e){var r=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Hf||Ga==null||Ga!==du(r)||(r=Ga,"selectionStart"in r&&xd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),uo&&Ro(uo,r)||(uo=r,r=Iu(Vf,"onSelect"),0<r.length&&(t=new mc("onSelect","select",null,t,e),n.push({event:t,listeners:r}),t.target=Ga)))}function na(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var Ya={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionrun:na("Transition","TransitionRun"),transitionstart:na("Transition","TransitionStart"),transitioncancel:na("Transition","TransitionCancel"),transitionend:na("Transition","TransitionEnd")},Qc={},Gp={};ci&&(Gp=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function Da(n){if(Qc[n])return Qc[n];if(!Ya[n])return n;var t=Ya[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in Gp)return Qc[n]=t[e];return n}var Yp=Da("animationend"),Xp=Da("animationiteration"),Fp=Da("animationstart"),VT=Da("transitionrun"),HT=Da("transitionstart"),KT=Da("transitioncancel"),Zp=Da("transitionend"),Qp=new Map,Kf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kf.push("scrollEnd");function sn(n,t){Qp.set(n,t),Na(t,[n])}var nm=new WeakMap;function qe(n,t){if(typeof n=="object"&&n!==null){var e=nm.get(n);return e!==void 0?e:(t={value:n,source:t,stack:Pg(t)},nm.set(n,t),t)}return{value:n,source:t,stack:Pg(t)}}var Ne=[],Xa=0,Dd=0;function vc(){for(var n=Xa,t=Dd=Xa=0;t<n;){var e=Ne[t];Ne[t++]=null;var r=Ne[t];Ne[t++]=null;var i=Ne[t];Ne[t++]=null;var a=Ne[t];if(Ne[t++]=null,r!==null&&i!==null){var s=r.pending;s===null?i.next=i:(i.next=s.next,s.next=i),r.pending=i}a!==0&&_p(e,i,a)}}function Sc(n,t,e,r){Ne[Xa++]=n,Ne[Xa++]=t,Ne[Xa++]=e,Ne[Xa++]=r,Dd|=r,n.lanes|=r,n=n.alternate,n!==null&&(n.lanes|=r)}function Od(n,t,e,r){return Sc(n,t,e,r),gu(n)}function Js(n,t){return Sc(n,null,null,t),gu(n)}function _p(n,t,e){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e);for(var i=!1,a=n.return;a!==null;)a.childLanes|=e,r=a.alternate,r!==null&&(r.childLanes|=e),a.tag===22&&(n=a.stateNode,n===null||n._visibility&1||(i=!0)),n=a,a=a.return;return n.tag===3?(a=n.stateNode,i&&t!==null&&(i=31-Se(e),n=a.hiddenUpdates,r=n[i],r===null?n[i]=[t]:r.push(t),t.lane=e|536870912),a):null}function gu(n){if(50<bo)throw bo=0,ch=null,Error(N(185));for(var t=n.return;t!==null;)n=t,t=n.return;return n.tag===3?n.stateNode:null}var Fa={};function jT(n,t,e,r){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function me(n,t,e,r){return new jT(n,t,e,r)}function kd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function si(n,t){var e=n.alternate;return e===null?(e=me(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&65011712,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e.refCleanup=n.refCleanup,e}function Wp(n,t){n.flags&=65011714;var e=n.alternate;return e===null?(n.childLanes=0,n.lanes=t,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.type=e.type,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n}function Yl(n,t,e,r,i,a){var s=0;if(r=n,typeof n=="function")kd(n)&&(s=1);else if(typeof n=="string")s=Gw(n,e,Sn.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case If:return n=me(31,e,t,i),n.elementType=If,n.lanes=a,n;case Va:return fa(e.children,i,a,t);case vp:s=8,i|=24;break;case Of:return n=me(12,e,t,i|2),n.elementType=Of,n.lanes=a,n;case kf:return n=me(13,e,t,i),n.elementType=kf,n.lanes=a,n;case Cf:return n=me(19,e,t,i),n.elementType=Cf,n.lanes=a,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case zb:case _r:s=10;break t;case Sp:s=9;break t;case md:s=11;break t;case yd:s=14;break t;case Ei:s=16,r=null;break t}s=29,e=Error(N(130,n===null?"null":typeof n,"")),r=null}return t=me(s,e,t,i),t.elementType=n,t.type=r,t.lanes=a,t}function fa(n,t,e,r){return n=me(7,n,r,t),n.lanes=e,n}function _c(n,t,e){return n=me(6,n,null,t),n.lanes=e,n}function Wc(n,t,e){return t=me(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}var Za=[],Qa=0,mu=null,yu=0,De=[],Oe=0,ha=null,Wr=1,ti="";function ia(n,t){Za[Qa++]=yu,Za[Qa++]=mu,mu=n,yu=t}function tv(n,t,e){De[Oe++]=Wr,De[Oe++]=ti,De[Oe++]=ha,ha=n;var r=Wr;n=ti;var i=32-Se(r)-1;r&=~(1<<i),e+=1;var a=32-Se(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Wr=1<<32-Se(t)+i|e<<i|r,ti=a+n}else Wr=1<<a|e<<i|r,ti=n}function Cd(n){n.return!==null&&(ia(n,1),tv(n,1,0))}function Id(n){for(;n===mu;)mu=Za[--Qa],Za[Qa]=null,yu=Za[--Qa],Za[Qa]=null;for(;n===ha;)ha=De[--Oe],De[Oe]=null,ti=De[--Oe],De[Oe]=null,Wr=De[--Oe],De[Oe]=null}var Wt=null,bt=null,tt=!1,da=null,fn=!1,jf=Error(N(519));function pa(n){var t=Error(N(418,""));throw Bo(qe(t,n)),jf}function rm(n){var t=n.stateNode,e=n.type,r=n.memoizedProps;switch(t[Xt]=n,t[le]=r,e){case"dialog":G("cancel",t),G("close",t);break;case"iframe":case"object":case"embed":G("load",t);break;case"video":case"audio":for(e=0;e<Uo.length;e++)G(Uo[e],t);break;case"source":G("error",t);break;case"img":case"image":case"link":G("error",t),G("load",t);break;case"details":G("toggle",t);break;case"input":G("invalid",t),Rp(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),hu(t);break;case"select":G("invalid",t);break;case"textarea":G("invalid",t),zp(t,r.value,r.defaultValue,r.children),hu(t)}e=r.children,typeof e!="string"&&typeof e!="number"&&typeof e!="bigint"||t.textContent===""+e||r.suppressHydrationWarning===!0||M0(t.textContent,e)?(r.popover!=null&&(G("beforetoggle",t),G("toggle",t)),r.onScroll!=null&&G("scroll",t),r.onScrollEnd!=null&&G("scrollend",t),r.onClick!=null&&(t.onclick=Dc),t=!0):t=!1,t||pa(n)}function im(n){for(Wt=n.return;Wt;)switch(Wt.tag){case 5:case 13:fn=!1;return;case 27:case 3:fn=!0;return;default:Wt=Wt.return}}function $s(n){if(n!==Wt)return!1;if(!tt)return im(n),tt=!0,!1;var t=n.tag,e;if((e=t!==3&&t!==27)&&((e=t===5)&&(e=n.type,e=!(e!=="form"&&e!=="button")||yh(n.type,n.memoizedProps)),e=!e),e&&bt&&pa(n),im(n),t===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(N(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8)if(e=n.data,e==="/$"){if(t===0){bt=rn(n.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++;n=n.nextSibling}bt=null}}else t===27?(t=bt,_i(n.type)?(n=Sh,Sh=null,bt=n):bt=t):bt=Wt?rn(n.stateNode.nextSibling):null;return!0}function il(){bt=Wt=null,tt=!1}function am(){var n=da;return n!==null&&(ie===null?ie=n:ie.push.apply(ie,n),da=null),n}function Bo(n){da===null?da=[n]:da.push(n)}var $f=On(null),Oa=null,ei=null;function xi(n,t,e){yt($f,t._currentValue),t._currentValue=e}function oi(n){n._currentValue=$f.current,Pt($f)}function Gf(n,t,e){for(;n!==null;){var r=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),n===e)break;n=n.return}}function Yf(n,t,e,r){var i=n.child;for(i!==null&&(i.return=n);i!==null;){var a=i.dependencies;if(a!==null){var s=i.child;a=a.firstContext;t:for(;a!==null;){var o=a;a=i;for(var u=0;u<t.length;u++)if(o.context===t[u]){a.lanes|=e,o=a.alternate,o!==null&&(o.lanes|=e),Gf(a.return,e,n),r||(s=null);break t}a=o.next}}else if(i.tag===18){if(s=i.return,s===null)throw Error(N(341));s.lanes|=e,a=s.alternate,a!==null&&(a.lanes|=e),Gf(s,e,n),s=null}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===n){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}}function al(n,t,e,r){n=null;for(var i=t,a=!1;i!==null;){if(!a){if(i.flags&524288)a=!0;else if(i.flags&262144)break}if(i.tag===10){var s=i.alternate;if(s===null)throw Error(N(387));if(s=s.memoizedProps,s!==null){var o=i.type;we(i.pendingProps.value,s.value)||(n!==null?n.push(o):n=[o])}}else if(i===lu.current){if(s=i.alternate,s===null)throw Error(N(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(n!==null?n.push(qo):n=[qo])}i=i.return}n!==null&&Yf(t,n,e,r),t.flags|=262144}function pu(n){for(n=n.firstContext;n!==null;){if(!we(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function va(n){Oa=n,ei=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ft(n){return ev(Oa,n)}function Dl(n,t){return Oa===null&&va(n),ev(n,t)}function ev(n,t){var e=t._currentValue;if(t={context:t,memoizedValue:e,next:null},ei===null){if(n===null)throw Error(N(308));ei=t,n.dependencies={lanes:0,firstContext:t},n.flags|=524288}else ei=ei.next=t;return e}var $T=typeof AbortController<"u"?AbortController:function(){var n=[],t=this.signal={aborted:!1,addEventListener:function(e,r){n.push(r)}};this.abort=function(){t.aborted=!0,n.forEach(function(e){return e()})}},GT=zt.unstable_scheduleCallback,YT=zt.unstable_NormalPriority,Rt={$$typeof:_r,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rd(){return{controller:new $T,data:new Map,refCount:0}}function sl(n){n.refCount--,n.refCount===0&&GT(YT,function(){n.controller.abort()})}var co=null,Xf=0,gs=0,is=null;function XT(n,t){if(co===null){var e=co=[];Xf=0,gs=eg(),is={status:"pending",value:void 0,then:function(r){e.push(r)}}}return Xf++,t.then(sm,sm),t}function sm(){if(--Xf===0&&co!==null){is!==null&&(is.status="fulfilled");var n=co;co=null,gs=0,is=null;for(var t=0;t<n.length;t++)(0,n[t])()}}function FT(n,t){var e=[],r={status:"pending",value:null,reason:null,then:function(i){e.push(i)}};return n.then(function(){r.status="fulfilled",r.value=t;for(var i=0;i<e.length;i++)(0,e[i])(t)},function(i){for(r.status="rejected",r.reason=i,i=0;i<e.length;i++)(0,e[i])(void 0)}),r}var om=q.S;q.S=function(n,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&XT(n,t),om!==null&&om(n,t)};var ga=On(null);function Bd(){var n=ga.current;return n!==null?n:ft.pooledCache}function Xl(n,t){t===null?yt(ga,ga.current):yt(ga,t.pool)}function nv(){var n=Bd();return n===null?null:{parent:Rt._currentValue,pool:n}}var ol=Error(N(460)),rv=Error(N(474)),bc=Error(N(542)),Ff={then:function(){}};function lm(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ol(){}function iv(n,t,e){switch(e=n[e],e===void 0?n.push(t):e!==t&&(t.then(Ol,Ol),t=e),t.status){case"fulfilled":return t.value;case"rejected":throw n=t.reason,cm(n),n;default:if(typeof t.status=="string")t.then(Ol,Ol);else{if(n=ft,n!==null&&100<n.shellSuspendCounter)throw Error(N(482));n=t,n.status="pending",n.then(function(r){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=r}},function(r){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw n=t.reason,cm(n),n}throw fo=t,ol}}var fo=null;function um(){if(fo===null)throw Error(N(459));var n=fo;return fo=null,n}function cm(n){if(n===ol||n===bc)throw Error(N(483))}var Ni=!1;function zd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zf(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Li(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ji(n,t,e){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,it&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=gu(n),_p(n,null,e),t}return Sc(n,r,t,e),gu(n)}function ho(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194048)!==0)){var r=t.lanes;r&=n.pendingLanes,e|=r,t.lanes=e,xp(n,e)}}function tf(n,t){var e=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,e===r)){var i=null,a=null;if(e=e.firstBaseUpdate,e!==null){do{var s={lane:e.lane,tag:e.tag,payload:e.payload,callback:null,next:null};a===null?i=a=s:a=a.next=s,e=e.next}while(e!==null);a===null?i=a=t:a=a.next=t}else i=a=t;e={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}var Qf=!1;function go(){if(Qf){var n=is;if(n!==null)throw n}}function mo(n,t,e,r){Qf=!1;var i=n.updateQueue;Ni=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var u=o,c=u.next;u.next=null,s===null?a=c:s.next=c,s=u;var h=n.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==s&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=u))}if(a!==null){var m=i.baseState;s=0,h=c=u=null,o=a;do{var d=o.lane&-536870913,g=d!==o.lane;if(g?(Q&d)===d:(r&d)===d){d!==0&&d===gs&&(Qf=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});t:{var T=n,A=o;d=t;var x=e;switch(A.tag){case 1:if(T=A.payload,typeof T=="function"){m=T.call(x,m,d);break t}m=T;break t;case 3:T.flags=T.flags&-65537|128;case 0:if(T=A.payload,d=typeof T=="function"?T.call(x,m,d):T,d==null)break t;m=ht({},m,d);break t;case 2:Ni=!0}}d=o.callback,d!==null&&(n.flags|=64,g&&(n.flags|=8192),g=i.callbacks,g===null?i.callbacks=[d]:g.push(d))}else g={lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=g,u=m):h=h.next=g,s|=d;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;g=o,o=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);h===null&&(u=m),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,a===null&&(i.shared.lanes=0),Fi|=s,n.lanes=s,n.memoizedState=m}}function av(n,t){if(typeof n!="function")throw Error(N(191,n));n.call(t)}function sv(n,t){var e=n.callbacks;if(e!==null)for(n.callbacks=null,n=0;n<e.length;n++)av(e[n],t)}var ms=On(null),vu=On(0);function fm(n,t){n=di,yt(vu,n),yt(ms,t),di=n|t.baseLanes}function _f(){yt(vu,di),yt(ms,ms.current)}function Md(){di=vu.current,Pt(ms),Pt(vu)}var Yi=0,K=null,st=null,kt=null,Su=!1,as=!1,Sa=!1,bu=0,zo=0,ss=null,ZT=0;function Et(){throw Error(N(321))}function Ud(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!we(n[e],t[e]))return!1;return!0}function Ld(n,t,e,r,i,a){return Yi=a,K=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,q.H=n===null||n.memoizedState===null?Lv:Jv,Sa=!1,a=e(r,i),Sa=!1,as&&(a=lv(t,e,r,i)),ov(n),a}function ov(n){q.H=Tu;var t=st!==null&&st.next!==null;if(Yi=0,kt=st=K=null,Su=!1,zo=0,ss=null,t)throw Error(N(300));n===null||qt||(n=n.dependencies,n!==null&&pu(n)&&(qt=!0))}function lv(n,t,e,r){K=n;var i=0;do{if(as&&(ss=null),zo=0,as=!1,25<=i)throw Error(N(301));if(i+=1,kt=st=null,n.updateQueue!=null){var a=n.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}q.H=rw,a=t(e,r)}while(as);return a}function QT(){var n=q.H,t=n.useState()[0];return t=typeof t.then=="function"?ll(t):t,n=n.useState()[0],(st!==null?st.memoizedState:null)!==n&&(K.flags|=1024),t}function Jd(){var n=bu!==0;return bu=0,n}function qd(n,t,e){t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~e}function Pd(n){if(Su){for(n=n.memoizedState;n!==null;){var t=n.queue;t!==null&&(t.pending=null),n=n.next}Su=!1}Yi=0,kt=st=K=null,as=!1,zo=bu=0,ss=null}function ne(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?K.memoizedState=kt=n:kt=kt.next=n,kt}function Ct(){if(st===null){var n=K.alternate;n=n!==null?n.memoizedState:null}else n=st.next;var t=kt===null?K.memoizedState:kt.next;if(t!==null)kt=t,st=n;else{if(n===null)throw K.alternate===null?Error(N(467)):Error(N(310));st=n,n={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},kt===null?K.memoizedState=kt=n:kt=kt.next=n}return kt}function Vd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ll(n){var t=zo;return zo+=1,ss===null&&(ss=[]),n=iv(ss,n,t),t=K,(kt===null?t.memoizedState:kt.next)===null&&(t=t.alternate,q.H=t===null||t.memoizedState===null?Lv:Jv),n}function Tc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ll(n);if(n.$$typeof===_r)return Ft(n)}throw Error(N(438,String(n)))}function Hd(n){var t=null,e=K.updateQueue;if(e!==null&&(t=e.memoCache),t==null){var r=K.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),e===null&&(e=Vd(),K.updateQueue=e),e.memoCache=t,e=t.data[t.index],e===void 0)for(e=t.data[t.index]=Array(n),r=0;r<n;r++)e[r]=Mb;return t.index++,e}function fi(n,t){return typeof t=="function"?t(n):t}function Fl(n){var t=Ct();return Kd(t,st,n)}function Kd(n,t,e){var r=n.queue;if(r===null)throw Error(N(311));r.lastRenderedReducer=e;var i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}t.baseQueue=i=a,r.pending=null}if(a=n.baseState,i===null)n.memoizedState=a;else{t=i.next;var o=s=null,u=null,c=t,h=!1;do{var m=c.lane&-536870913;if(m!==c.lane?(Q&m)===m:(Yi&m)===m){var d=c.revertLane;if(d===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),m===gs&&(h=!0);else if((Yi&d)===d){c=c.next,d===gs&&(h=!0);continue}else m={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(o=u=m,s=a):u=u.next=m,K.lanes|=d,Fi|=d;m=c.action,Sa&&e(a,m),a=c.hasEagerState?c.eagerState:e(a,m)}else d={lane:m,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(o=u=d,s=a):u=u.next=d,K.lanes|=m,Fi|=m;c=c.next}while(c!==null&&c!==t);if(u===null?s=a:u.next=o,!we(a,n.memoizedState)&&(qt=!0,h&&(e=is,e!==null)))throw e;n.memoizedState=a,n.baseState=s,n.baseQueue=u,r.lastRenderedState=a}return i===null&&(r.lanes=0),[n.memoizedState,r.dispatch]}function ef(n){var t=Ct(),e=t.queue;if(e===null)throw Error(N(311));e.lastRenderedReducer=n;var r=e.dispatch,i=e.pending,a=t.memoizedState;if(i!==null){e.pending=null;var s=i=i.next;do a=n(a,s.action),s=s.next;while(s!==i);we(a,t.memoizedState)||(qt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),e.lastRenderedState=a}return[a,r]}function uv(n,t,e){var r=K,i=Ct(),a=tt;if(a){if(e===void 0)throw Error(N(407));e=e()}else e=t();var s=!we((st||i).memoizedState,e);s&&(i.memoizedState=e,qt=!0),i=i.queue;var o=hv.bind(null,r,i,n);if(ul(2048,8,o,[n]),i.getSnapshot!==t||s||kt!==null&&kt.memoizedState.tag&1){if(r.flags|=2048,ys(9,wc(),fv.bind(null,r,i,e,t),null),ft===null)throw Error(N(349));a||Yi&124||cv(r,t,e)}return e}function cv(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=K.updateQueue,t===null?(t=Vd(),K.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function fv(n,t,e,r){t.value=e,t.getSnapshot=r,dv(t)&&gv(n)}function hv(n,t,e){return e(function(){dv(t)&&gv(n)})}function dv(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!we(n,e)}catch{return!0}}function gv(n){var t=Js(n,2);t!==null&&Te(t,n,2)}function Wf(n){var t=ne();if(typeof n=="function"){var e=n;if(n=e(),Sa){Ii(!0);try{e()}finally{Ii(!1)}}}return t.memoizedState=t.baseState=n,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:n},t}function mv(n,t,e,r){return n.baseState=e,Kd(n,st,typeof r=="function"?r:fi)}function _T(n,t,e,r,i){if(Ac(n))throw Error(N(485));if(n=t.action,n!==null){var a={payload:i,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){a.listeners.push(s)}};q.T!==null?e(!0):a.isTransition=!1,r(a),e=t.pending,e===null?(a.next=t.pending=a,yv(t,a)):(a.next=e.next,t.pending=e.next=a)}}function yv(n,t){var e=t.action,r=t.payload,i=n.state;if(t.isTransition){var a=q.T,s={};q.T=s;try{var o=e(i,r),u=q.S;u!==null&&u(s,o),hm(n,t,o)}catch(c){th(n,t,c)}finally{q.T=a}}else try{a=e(i,r),hm(n,t,a)}catch(c){th(n,t,c)}}function hm(n,t,e){e!==null&&typeof e=="object"&&typeof e.then=="function"?e.then(function(r){dm(n,t,r)},function(r){return th(n,t,r)}):dm(n,t,e)}function dm(n,t,e){t.status="fulfilled",t.value=e,pv(t),n.state=e,t=n.pending,t!==null&&(e=t.next,e===t?n.pending=null:(e=e.next,t.next=e,yv(n,e)))}function th(n,t,e){var r=n.pending;if(n.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=e,pv(t),t=t.next;while(t!==r)}n.action=null}function pv(n){n=n.listeners;for(var t=0;t<n.length;t++)(0,n[t])()}function vv(n,t){return t}function gm(n,t){if(tt){var e=ft.formState;if(e!==null){t:{var r=K;if(tt){if(bt){e:{for(var i=bt,a=fn;i.nodeType!==8;){if(!a){i=null;break e}if(i=rn(i.nextSibling),i===null){i=null;break e}}a=i.data,i=a==="F!"||a==="F"?i:null}if(i){bt=rn(i.nextSibling),r=i.data==="F!";break t}}pa(r)}r=!1}r&&(t=e[0])}}return e=ne(),e.memoizedState=e.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vv,lastRenderedState:t},e.queue=r,e=zv.bind(null,K,r),r.dispatch=e,r=Wf(!1),a=Yd.bind(null,K,!1,r.queue),r=ne(),i={state:t,dispatch:null,action:n,pending:null},r.queue=i,e=_T.bind(null,K,i,a,e),i.dispatch=e,r.memoizedState=n,[t,e,!1]}function mm(n){var t=Ct();return Sv(t,st,n)}function Sv(n,t,e){if(t=Kd(n,t,vv)[0],n=Fl(fi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=ll(t)}catch(s){throw s===ol?bc:s}else r=t;t=Ct();var i=t.queue,a=i.dispatch;return e!==t.memoizedState&&(K.flags|=2048,ys(9,wc(),WT.bind(null,i,e),null)),[r,a,n]}function WT(n,t){n.action=t}function ym(n){var t=Ct(),e=st;if(e!==null)return Sv(t,e,n);Ct(),t=t.memoizedState,e=Ct();var r=e.queue.dispatch;return e.memoizedState=n,[t,r,!1]}function ys(n,t,e,r){return n={tag:n,create:e,deps:r,inst:t,next:null},t=K.updateQueue,t===null&&(t=Vd(),K.updateQueue=t),e=t.lastEffect,e===null?t.lastEffect=n.next=n:(r=e.next,e.next=n,n.next=r,t.lastEffect=n),n}function wc(){return{destroy:void 0,resource:void 0}}function bv(){return Ct().memoizedState}function Zl(n,t,e,r){var i=ne();r=r===void 0?null:r,K.flags|=n,i.memoizedState=ys(1|t,wc(),e,r)}function ul(n,t,e,r){var i=Ct();r=r===void 0?null:r;var a=i.memoizedState.inst;st!==null&&r!==null&&Ud(r,st.memoizedState.deps)?i.memoizedState=ys(t,a,e,r):(K.flags|=n,i.memoizedState=ys(1|t,a,e,r))}function pm(n,t){Zl(8390656,8,n,t)}function Tv(n,t){ul(2048,8,n,t)}function wv(n,t){return ul(4,2,n,t)}function Av(n,t){return ul(4,4,n,t)}function Ev(n,t){if(typeof t=="function"){n=n();var e=t(n);return function(){typeof e=="function"?e():t(null)}}if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function Nv(n,t,e){e=e!=null?e.concat([n]):null,ul(4,4,Ev.bind(null,t,n),e)}function jd(){}function xv(n,t){var e=Ct();t=t===void 0?null:t;var r=e.memoizedState;return t!==null&&Ud(t,r[1])?r[0]:(e.memoizedState=[n,t],n)}function Dv(n,t){var e=Ct();t=t===void 0?null:t;var r=e.memoizedState;if(t!==null&&Ud(t,r[1]))return r[0];if(r=n(),Sa){Ii(!0);try{n()}finally{Ii(!1)}}return e.memoizedState=[r,t],r}function $d(n,t,e){return e===void 0||Yi&1073741824?n.memoizedState=t:(n.memoizedState=e,n=p0(),K.lanes|=n,Fi|=n,e)}function Ov(n,t,e,r){return we(e,t)?e:ms.current!==null?(n=$d(n,e,r),we(n,t)||(qt=!0),n):Yi&42?(n=p0(),K.lanes|=n,Fi|=n,t):(qt=!0,n.memoizedState=e)}function kv(n,t,e,r,i){var a=et.p;et.p=a!==0&&8>a?a:8;var s=q.T,o={};q.T=o,Yd(n,!1,t,e);try{var u=i(),c=q.S;if(c!==null&&c(o,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=FT(u,r);yo(n,t,h,be(n))}else yo(n,t,r,be(n))}catch(m){yo(n,t,{then:function(){},status:"rejected",reason:m},be())}finally{et.p=a,q.T=s}}function tw(){}function eh(n,t,e,r){if(n.tag!==5)throw Error(N(476));var i=Cv(n).queue;kv(n,i,t,ca,e===null?tw:function(){return Iv(n),e(r)})}function Cv(n){var t=n.memoizedState;if(t!==null)return t;t={memoizedState:ca,baseState:ca,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:ca},next:null};var e={};return t.next={memoizedState:e,baseState:e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:e},next:null},n.memoizedState=t,n=n.alternate,n!==null&&(n.memoizedState=t),t}function Iv(n){var t=Cv(n).next.queue;yo(n,t,{},be())}function Gd(){return Ft(qo)}function Rv(){return Ct().memoizedState}function Bv(){return Ct().memoizedState}function ew(n){for(var t=n.return;t!==null;){switch(t.tag){case 24:case 3:var e=be();n=Li(e);var r=Ji(t,n,e);r!==null&&(Te(r,t,e),ho(r,t,e)),t={cache:Rd()},n.payload=t;return}t=t.return}}function nw(n,t,e){var r=be();e={lane:r,revertLane:0,action:e,hasEagerState:!1,eagerState:null,next:null},Ac(n)?Mv(t,e):(e=Od(n,t,e,r),e!==null&&(Te(e,n,r),Uv(e,t,r)))}function zv(n,t,e){var r=be();yo(n,t,e,r)}function yo(n,t,e,r){var i={lane:r,revertLane:0,action:e,hasEagerState:!1,eagerState:null,next:null};if(Ac(n))Mv(t,i);else{var a=n.alternate;if(n.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,e);if(i.hasEagerState=!0,i.eagerState=o,we(o,s))return Sc(n,t,i,0),ft===null&&vc(),!1}catch{}finally{}if(e=Od(n,t,i,r),e!==null)return Te(e,n,r),Uv(e,t,r),!0}return!1}function Yd(n,t,e,r){if(r={lane:2,revertLane:eg(),action:r,hasEagerState:!1,eagerState:null,next:null},Ac(n)){if(t)throw Error(N(479))}else t=Od(n,e,r,2),t!==null&&Te(t,n,2)}function Ac(n){var t=n.alternate;return n===K||t!==null&&t===K}function Mv(n,t){as=Su=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function Uv(n,t,e){if(e&4194048){var r=t.lanes;r&=n.pendingLanes,e|=r,t.lanes=e,xp(n,e)}}var Tu={readContext:Ft,use:Tc,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et},Lv={readContext:Ft,use:Tc,useCallback:function(n,t){return ne().memoizedState=[n,t===void 0?null:t],n},useContext:Ft,useEffect:pm,useImperativeHandle:function(n,t,e){e=e!=null?e.concat([n]):null,Zl(4194308,4,Ev.bind(null,t,n),e)},useLayoutEffect:function(n,t){return Zl(4194308,4,n,t)},useInsertionEffect:function(n,t){Zl(4,2,n,t)},useMemo:function(n,t){var e=ne();t=t===void 0?null:t;var r=n();if(Sa){Ii(!0);try{n()}finally{Ii(!1)}}return e.memoizedState=[r,t],r},useReducer:function(n,t,e){var r=ne();if(e!==void 0){var i=e(t);if(Sa){Ii(!0);try{e(t)}finally{Ii(!1)}}}else i=t;return r.memoizedState=r.baseState=i,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},r.queue=n,n=n.dispatch=nw.bind(null,K,n),[r.memoizedState,n]},useRef:function(n){var t=ne();return n={current:n},t.memoizedState=n},useState:function(n){n=Wf(n);var t=n.queue,e=zv.bind(null,K,t);return t.dispatch=e,[n.memoizedState,e]},useDebugValue:jd,useDeferredValue:function(n,t){var e=ne();return $d(e,n,t)},useTransition:function(){var n=Wf(!1);return n=kv.bind(null,K,n.queue,!0,!1),ne().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,t,e){var r=K,i=ne();if(tt){if(e===void 0)throw Error(N(407));e=e()}else{if(e=t(),ft===null)throw Error(N(349));Q&124||cv(r,t,e)}i.memoizedState=e;var a={value:e,getSnapshot:t};return i.queue=a,pm(hv.bind(null,r,a,n),[n]),r.flags|=2048,ys(9,wc(),fv.bind(null,r,a,e,t),null),e},useId:function(){var n=ne(),t=ft.identifierPrefix;if(tt){var e=ti,r=Wr;e=(r&~(1<<32-Se(r)-1)).toString(32)+e,t=""+t+"R"+e,e=bu++,0<e&&(t+="H"+e.toString(32)),t+=""}else e=ZT++,t=""+t+"r"+e.toString(32)+"";return n.memoizedState=t},useHostTransitionStatus:Gd,useFormState:gm,useActionState:gm,useOptimistic:function(n){var t=ne();t.memoizedState=t.baseState=n;var e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=e,t=Yd.bind(null,K,!0,e),e.dispatch=t,[n,t]},useMemoCache:Hd,useCacheRefresh:function(){return ne().memoizedState=ew.bind(null,K)}},Jv={readContext:Ft,use:Tc,useCallback:xv,useContext:Ft,useEffect:Tv,useImperativeHandle:Nv,useInsertionEffect:wv,useLayoutEffect:Av,useMemo:Dv,useReducer:Fl,useRef:bv,useState:function(){return Fl(fi)},useDebugValue:jd,useDeferredValue:function(n,t){var e=Ct();return Ov(e,st.memoizedState,n,t)},useTransition:function(){var n=Fl(fi)[0],t=Ct().memoizedState;return[typeof n=="boolean"?n:ll(n),t]},useSyncExternalStore:uv,useId:Rv,useHostTransitionStatus:Gd,useFormState:mm,useActionState:mm,useOptimistic:function(n,t){var e=Ct();return mv(e,st,n,t)},useMemoCache:Hd,useCacheRefresh:Bv},rw={readContext:Ft,use:Tc,useCallback:xv,useContext:Ft,useEffect:Tv,useImperativeHandle:Nv,useInsertionEffect:wv,useLayoutEffect:Av,useMemo:Dv,useReducer:ef,useRef:bv,useState:function(){return ef(fi)},useDebugValue:jd,useDeferredValue:function(n,t){var e=Ct();return st===null?$d(e,n,t):Ov(e,st.memoizedState,n,t)},useTransition:function(){var n=ef(fi)[0],t=Ct().memoizedState;return[typeof n=="boolean"?n:ll(n),t]},useSyncExternalStore:uv,useId:Rv,useHostTransitionStatus:Gd,useFormState:ym,useActionState:ym,useOptimistic:function(n,t){var e=Ct();return st!==null?mv(e,st,n,t):(e.baseState=n,[n,e.queue.dispatch])},useMemoCache:Hd,useCacheRefresh:Bv},os=null,Mo=0;function kl(n){var t=Mo;return Mo+=1,os===null&&(os=[]),iv(os,n,t)}function Gs(n,t){t=t.props.ref,n.ref=t!==void 0?t:null}function Cl(n,t){throw t.$$typeof===Bb?Error(N(525)):(n=Object.prototype.toString.call(t),Error(N(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)))}function vm(n){var t=n._init;return t(n._payload)}function qv(n){function t(p,y){if(n){var v=p.deletions;v===null?(p.deletions=[y],p.flags|=16):v.push(y)}}function e(p,y){if(!n)return null;for(;y!==null;)t(p,y),y=y.sibling;return null}function r(p){for(var y=new Map;p!==null;)p.key!==null?y.set(p.key,p):y.set(p.index,p),p=p.sibling;return y}function i(p,y){return p=si(p,y),p.index=0,p.sibling=null,p}function a(p,y,v){return p.index=v,n?(v=p.alternate,v!==null?(v=v.index,v<y?(p.flags|=67108866,y):v):(p.flags|=67108866,y)):(p.flags|=1048576,y)}function s(p){return n&&p.alternate===null&&(p.flags|=67108866),p}function o(p,y,v,w){return y===null||y.tag!==6?(y=_c(v,p.mode,w),y.return=p,y):(y=i(y,v),y.return=p,y)}function u(p,y,v,w){var k=v.type;return k===Va?h(p,y,v.props.children,w,v.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ei&&vm(k)===y.type)?(y=i(y,v.props),Gs(y,v),y.return=p,y):(y=Yl(v.type,v.key,v.props,null,p.mode,w),Gs(y,v),y.return=p,y)}function c(p,y,v,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Wc(v,p.mode,w),y.return=p,y):(y=i(y,v.children||[]),y.return=p,y)}function h(p,y,v,w,k){return y===null||y.tag!==7?(y=fa(v,p.mode,w,k),y.return=p,y):(y=i(y,v),y.return=p,y)}function m(p,y,v){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=_c(""+y,p.mode,v),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case wl:return v=Yl(y.type,y.key,y.props,null,p.mode,v),Gs(v,y),v.return=p,v;case Ws:return y=Wc(y,p.mode,v),y.return=p,y;case Ei:var w=y._init;return y=w(y._payload),m(p,y,v)}if(to(y)||Hs(y))return y=fa(y,p.mode,v,null),y.return=p,y;if(typeof y.then=="function")return m(p,kl(y),v);if(y.$$typeof===_r)return m(p,Dl(p,y),v);Cl(p,y)}return null}function d(p,y,v,w){var k=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return k!==null?null:o(p,y,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case wl:return v.key===k?u(p,y,v,w):null;case Ws:return v.key===k?c(p,y,v,w):null;case Ei:return k=v._init,v=k(v._payload),d(p,y,v,w)}if(to(v)||Hs(v))return k!==null?null:h(p,y,v,w,null);if(typeof v.then=="function")return d(p,y,kl(v),w);if(v.$$typeof===_r)return d(p,y,Dl(p,v),w);Cl(p,v)}return null}function g(p,y,v,w,k){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return p=p.get(v)||null,o(y,p,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case wl:return p=p.get(w.key===null?v:w.key)||null,u(y,p,w,k);case Ws:return p=p.get(w.key===null?v:w.key)||null,c(y,p,w,k);case Ei:var I=w._init;return w=I(w._payload),g(p,y,v,w,k)}if(to(w)||Hs(w))return p=p.get(v)||null,h(y,p,w,k,null);if(typeof w.then=="function")return g(p,y,v,kl(w),k);if(w.$$typeof===_r)return g(p,y,v,Dl(y,w),k);Cl(y,w)}return null}function T(p,y,v,w){for(var k=null,I=null,C=y,R=y=0,P=null;C!==null&&R<v.length;R++){C.index>R?(P=C,C=null):P=C.sibling;var J=d(p,C,v[R],w);if(J===null){C===null&&(C=P);break}n&&C&&J.alternate===null&&t(p,C),y=a(J,y,R),I===null?k=J:I.sibling=J,I=J,C=P}if(R===v.length)return e(p,C),tt&&ia(p,R),k;if(C===null){for(;R<v.length;R++)C=m(p,v[R],w),C!==null&&(y=a(C,y,R),I===null?k=C:I.sibling=C,I=C);return tt&&ia(p,R),k}for(C=r(C);R<v.length;R++)P=g(C,p,R,v[R],w),P!==null&&(n&&P.alternate!==null&&C.delete(P.key===null?R:P.key),y=a(P,y,R),I===null?k=P:I.sibling=P,I=P);return n&&C.forEach(function(Vt){return t(p,Vt)}),tt&&ia(p,R),k}function A(p,y,v,w){if(v==null)throw Error(N(151));for(var k=null,I=null,C=y,R=y=0,P=null,J=v.next();C!==null&&!J.done;R++,J=v.next()){C.index>R?(P=C,C=null):P=C.sibling;var Vt=d(p,C,J.value,w);if(Vt===null){C===null&&(C=P);break}n&&C&&Vt.alternate===null&&t(p,C),y=a(Vt,y,R),I===null?k=Vt:I.sibling=Vt,I=Vt,C=P}if(J.done)return e(p,C),tt&&ia(p,R),k;if(C===null){for(;!J.done;R++,J=v.next())J=m(p,J.value,w),J!==null&&(y=a(J,y,R),I===null?k=J:I.sibling=J,I=J);return tt&&ia(p,R),k}for(C=r(C);!J.done;R++,J=v.next())J=g(C,p,R,J.value,w),J!==null&&(n&&J.alternate!==null&&C.delete(J.key===null?R:J.key),y=a(J,y,R),I===null?k=J:I.sibling=J,I=J);return n&&C.forEach(function(fe){return t(p,fe)}),tt&&ia(p,R),k}function x(p,y,v,w){if(typeof v=="object"&&v!==null&&v.type===Va&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case wl:t:{for(var k=v.key;y!==null;){if(y.key===k){if(k=v.type,k===Va){if(y.tag===7){e(p,y.sibling),w=i(y,v.props.children),w.return=p,p=w;break t}}else if(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ei&&vm(k)===y.type){e(p,y.sibling),w=i(y,v.props),Gs(w,v),w.return=p,p=w;break t}e(p,y);break}else t(p,y);y=y.sibling}v.type===Va?(w=fa(v.props.children,p.mode,w,v.key),w.return=p,p=w):(w=Yl(v.type,v.key,v.props,null,p.mode,w),Gs(w,v),w.return=p,p=w)}return s(p);case Ws:t:{for(k=v.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){e(p,y.sibling),w=i(y,v.children||[]),w.return=p,p=w;break t}else{e(p,y);break}else t(p,y);y=y.sibling}w=Wc(v,p.mode,w),w.return=p,p=w}return s(p);case Ei:return k=v._init,v=k(v._payload),x(p,y,v,w)}if(to(v))return T(p,y,v,w);if(Hs(v)){if(k=Hs(v),typeof k!="function")throw Error(N(150));return v=k.call(v),A(p,y,v,w)}if(typeof v.then=="function")return x(p,y,kl(v),w);if(v.$$typeof===_r)return x(p,y,Dl(p,v),w);Cl(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint"?(v=""+v,y!==null&&y.tag===6?(e(p,y.sibling),w=i(y,v),w.return=p,p=w):(e(p,y),w=_c(v,p.mode,w),w.return=p,p=w),s(p)):e(p,y)}return function(p,y,v,w){try{Mo=0;var k=x(p,y,v,w);return os=null,k}catch(C){if(C===ol||C===bc)throw C;var I=me(29,C,null,p.mode);return I.lanes=w,I.return=p,I}finally{}}}var ps=qv(!0),Pv=qv(!1),Ge=On(null),Tn=null;function Di(n){var t=n.alternate;yt(Bt,Bt.current&1),yt(Ge,n),Tn===null&&(t===null||ms.current!==null||t.memoizedState!==null)&&(Tn=n)}function Vv(n){if(n.tag===22){if(yt(Bt,Bt.current),yt(Ge,n),Tn===null){var t=n.alternate;t!==null&&t.memoizedState!==null&&(Tn=n)}}else Oi()}function Oi(){yt(Bt,Bt.current),yt(Ge,Ge.current)}function ni(n){Pt(Ge),Tn===n&&(Tn=null),Pt(Bt)}var Bt=On(0);function wu(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||vh(e)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function nf(n,t,e,r){t=n.memoizedState,e=e(r,t),e=e==null?t:ht({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var nh={enqueueSetState:function(n,t,e){n=n._reactInternals;var r=be(),i=Li(r);i.payload=t,e!=null&&(i.callback=e),t=Ji(n,i,r),t!==null&&(Te(t,n,r),ho(t,n,r))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var r=be(),i=Li(r);i.tag=1,i.payload=t,e!=null&&(i.callback=e),t=Ji(n,i,r),t!==null&&(Te(t,n,r),ho(t,n,r))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=be(),r=Li(e);r.tag=2,t!=null&&(r.callback=t),t=Ji(n,r,e),t!==null&&(Te(t,n,e),ho(t,n,e))}};function Sm(n,t,e,r,i,a,s){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,a,s):t.prototype&&t.prototype.isPureReactComponent?!Ro(e,r)||!Ro(i,a):!0}function bm(n,t,e,r){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,r),t.state!==n&&nh.enqueueReplaceState(t,t.state,null)}function ba(n,t){var e=t;if("ref"in t){e={};for(var r in t)r!=="ref"&&(e[r]=t[r])}if(n=n.defaultProps){e===t&&(e=ht({},e));for(var i in n)e[i]===void 0&&(e[i]=n[i])}return e}var Au=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Hv(n){Au(n)}function Kv(n){console.error(n)}function jv(n){Au(n)}function Eu(n,t){try{var e=n.onUncaughtError;e(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function Tm(n,t,e){try{var r=n.onCaughtError;r(e.value,{componentStack:e.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function rh(n,t,e){return e=Li(e),e.tag=3,e.payload={element:null},e.callback=function(){Eu(n,t)},e}function $v(n){return n=Li(n),n.tag=3,n}function Gv(n,t,e,r){var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=r.value;n.payload=function(){return i(a)},n.callback=function(){Tm(t,e,r)}}var s=e.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Tm(t,e,r),typeof i!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var o=r.stack;this.componentDidCatch(r.value,{componentStack:o!==null?o:""})})}function iw(n,t,e,r,i){if(e.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=e.alternate,t!==null&&al(t,e,i,!0),e=Ge.current,e!==null){switch(e.tag){case 13:return Tn===null?fh():e.alternate===null&&Tt===0&&(Tt=3),e.flags&=-257,e.flags|=65536,e.lanes=i,r===Ff?e.flags|=16384:(t=e.updateQueue,t===null?e.updateQueue=new Set([r]):t.add(r),gf(n,r,i)),!1;case 22:return e.flags|=65536,r===Ff?e.flags|=16384:(t=e.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},e.updateQueue=t):(e=t.retryQueue,e===null?t.retryQueue=new Set([r]):e.add(r)),gf(n,r,i)),!1}throw Error(N(435,e.tag))}return gf(n,r,i),fh(),!1}if(tt)return t=Ge.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==jf&&(n=Error(N(422),{cause:r}),Bo(qe(n,e)))):(r!==jf&&(t=Error(N(423),{cause:r}),Bo(qe(t,e))),n=n.current.alternate,n.flags|=65536,i&=-i,n.lanes|=i,r=qe(r,e),i=rh(n.stateNode,r,i),tf(n,i),Tt!==4&&(Tt=2)),!1;var a=Error(N(520),{cause:r});if(a=qe(a,e),So===null?So=[a]:So.push(a),Tt!==4&&(Tt=2),t===null)return!0;r=qe(r,e),e=t;do{switch(e.tag){case 3:return e.flags|=65536,n=i&-i,e.lanes|=n,n=rh(e.stateNode,r,n),tf(e,n),!1;case 1:if(t=e.type,a=e.stateNode,(e.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(qi===null||!qi.has(a))))return e.flags|=65536,i&=-i,e.lanes|=i,i=$v(i),Gv(i,n,e,r),tf(e,i),!1}e=e.return}while(e!==null);return!1}var Yv=Error(N(461)),qt=!1;function Ht(n,t,e,r){t.child=n===null?Pv(t,null,e,r):ps(t,n.child,e,r)}function wm(n,t,e,r,i){e=e.render;var a=t.ref;if("ref"in r){var s={};for(var o in r)o!=="ref"&&(s[o]=r[o])}else s=r;return va(t),r=Ld(n,t,e,s,a,i),o=Jd(),n!==null&&!qt?(qd(n,t,i),hi(n,t,i)):(tt&&o&&Cd(t),t.flags|=1,Ht(n,t,r,i),t.child)}function Am(n,t,e,r,i){if(n===null){var a=e.type;return typeof a=="function"&&!kd(a)&&a.defaultProps===void 0&&e.compare===null?(t.tag=15,t.type=a,Xv(n,t,a,r,i)):(n=Yl(e.type,null,r,t,t.mode,i),n.ref=t.ref,n.return=t,t.child=n)}if(a=n.child,!Xd(n,i)){var s=a.memoizedProps;if(e=e.compare,e=e!==null?e:Ro,e(s,r)&&n.ref===t.ref)return hi(n,t,i)}return t.flags|=1,n=si(a,r),n.ref=t.ref,n.return=t,t.child=n}function Xv(n,t,e,r,i){if(n!==null){var a=n.memoizedProps;if(Ro(a,r)&&n.ref===t.ref)if(qt=!1,t.pendingProps=r=a,Xd(n,i))n.flags&131072&&(qt=!0);else return t.lanes=n.lanes,hi(n,t,i)}return ih(n,t,e,r,i)}function Fv(n,t,e){var r=t.pendingProps,i=r.children,a=n!==null?n.memoizedState:null;if(r.mode==="hidden"){if(t.flags&128){if(r=a!==null?a.baseLanes|e:e,n!==null){for(i=t.child=n.child,a=0;i!==null;)a=a|i.lanes|i.childLanes,i=i.sibling;t.childLanes=a&~r}else t.childLanes=0,t.child=null;return Em(n,t,r,e)}if(e&536870912)t.memoizedState={baseLanes:0,cachePool:null},n!==null&&Xl(t,a!==null?a.cachePool:null),a!==null?fm(t,a):_f(),Vv(t);else return t.lanes=t.childLanes=536870912,Em(n,t,a!==null?a.baseLanes|e:e,e)}else a!==null?(Xl(t,a.cachePool),fm(t,a),Oi(),t.memoizedState=null):(n!==null&&Xl(t,null),_f(),Oi());return Ht(n,t,i,e),t.child}function Em(n,t,e,r){var i=Bd();return i=i===null?null:{parent:Rt._currentValue,pool:i},t.memoizedState={baseLanes:e,cachePool:i},n!==null&&Xl(t,null),_f(),Vv(t),n!==null&&al(n,t,r,!0),null}function Ql(n,t){var e=t.ref;if(e===null)n!==null&&n.ref!==null&&(t.flags|=4194816);else{if(typeof e!="function"&&typeof e!="object")throw Error(N(284));(n===null||n.ref!==e)&&(t.flags|=4194816)}}function ih(n,t,e,r,i){return va(t),e=Ld(n,t,e,r,void 0,i),r=Jd(),n!==null&&!qt?(qd(n,t,i),hi(n,t,i)):(tt&&r&&Cd(t),t.flags|=1,Ht(n,t,e,i),t.child)}function Nm(n,t,e,r,i,a){return va(t),t.updateQueue=null,e=lv(t,r,e,i),ov(n),r=Jd(),n!==null&&!qt?(qd(n,t,a),hi(n,t,a)):(tt&&r&&Cd(t),t.flags|=1,Ht(n,t,e,a),t.child)}function xm(n,t,e,r,i){if(va(t),t.stateNode===null){var a=Fa,s=e.contextType;typeof s=="object"&&s!==null&&(a=Ft(s)),a=new e(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=nh,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},zd(t),s=e.contextType,a.context=typeof s=="object"&&s!==null?Ft(s):Fa,a.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(nf(t,e,s,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&nh.enqueueReplaceState(a,a.state,null),mo(t,r,a,i),go(),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(n===null){a=t.stateNode;var o=t.memoizedProps,u=ba(e,o);a.props=u;var c=a.context,h=e.contextType;s=Fa,typeof h=="object"&&h!==null&&(s=Ft(h));var m=e.getDerivedStateFromProps;h=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function",o=t.pendingProps!==o,h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o||c!==s)&&bm(t,a,r,s),Ni=!1;var d=t.memoizedState;a.state=d,mo(t,r,a,i),go(),c=t.memoizedState,o||d!==c||Ni?(typeof m=="function"&&(nf(t,e,m,r),c=t.memoizedState),(u=Ni||Sm(t,e,u,r,d,c,s))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=s,r=u):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Zf(n,t),s=t.memoizedProps,h=ba(e,s),a.props=h,m=t.pendingProps,d=a.context,c=e.contextType,u=Fa,typeof c=="object"&&c!==null&&(u=Ft(c)),o=e.getDerivedStateFromProps,(c=typeof o=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==m||d!==u)&&bm(t,a,r,u),Ni=!1,d=t.memoizedState,a.state=d,mo(t,r,a,i),go();var g=t.memoizedState;s!==m||d!==g||Ni||n!==null&&n.dependencies!==null&&pu(n.dependencies)?(typeof o=="function"&&(nf(t,e,o,r),g=t.memoizedState),(h=Ni||Sm(t,e,h,r,d,g,u)||n!==null&&n.dependencies!==null&&pu(n.dependencies))?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(t.flags|=1024),r=!1)}return a=r,Ql(n,t),r=(t.flags&128)!==0,a||r?(a=t.stateNode,e=r&&typeof e.getDerivedStateFromError!="function"?null:a.render(),t.flags|=1,n!==null&&r?(t.child=ps(t,n.child,null,i),t.child=ps(t,null,e,i)):Ht(n,t,e,i),t.memoizedState=a.state,n=t.child):n=hi(n,t,i),n}function Dm(n,t,e,r){return il(),t.flags|=256,Ht(n,t,e,r),t.child}var rf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function af(n){return{baseLanes:n,cachePool:nv()}}function sf(n,t,e){return n=n!==null?n.childLanes&~e:0,t&&(n|=Pe),n}function Zv(n,t,e){var r=t.pendingProps,i=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=n!==null&&n.memoizedState===null?!1:(Bt.current&2)!==0),s&&(i=!0,t.flags&=-129),s=(t.flags&32)!==0,t.flags&=-33,n===null){if(tt){if(i?Di(t):Oi(),tt){var o=bt,u;if(u=o){t:{for(u=o,o=fn;u.nodeType!==8;){if(!o){o=null;break t}if(u=rn(u.nextSibling),u===null){o=null;break t}}o=u}o!==null?(t.memoizedState={dehydrated:o,treeContext:ha!==null?{id:Wr,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},u=me(18,null,null,0),u.stateNode=o,u.return=t,t.child=u,Wt=t,bt=null,u=!0):u=!1}u||pa(t)}if(o=t.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return vh(o)?t.lanes=32:t.lanes=536870912,null;ni(t)}return o=r.children,r=r.fallback,i?(Oi(),i=t.mode,o=Nu({mode:"hidden",children:o},i),r=fa(r,i,e,null),o.return=t,r.return=t,o.sibling=r,t.child=o,i=t.child,i.memoizedState=af(e),i.childLanes=sf(n,s,e),t.memoizedState=rf,r):(Di(t),ah(t,o))}if(u=n.memoizedState,u!==null&&(o=u.dehydrated,o!==null)){if(a)t.flags&256?(Di(t),t.flags&=-257,t=of(n,t,e)):t.memoizedState!==null?(Oi(),t.child=n.child,t.flags|=128,t=null):(Oi(),i=r.fallback,o=t.mode,r=Nu({mode:"visible",children:r.children},o),i=fa(i,o,e,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,ps(t,n.child,null,e),r=t.child,r.memoizedState=af(e),r.childLanes=sf(n,s,e),t.memoizedState=rf,t=i);else if(Di(t),vh(o)){if(s=o.nextSibling&&o.nextSibling.dataset,s)var c=s.dgst;s=c,r=Error(N(419)),r.stack="",r.digest=s,Bo({value:r,source:null,stack:null}),t=of(n,t,e)}else if(qt||al(n,t,e,!1),s=(e&n.childLanes)!==0,qt||s){if(s=ft,s!==null&&(r=e&-e,r=r&42?1:vd(r),r=r&(s.suspendedLanes|e)?0:r,r!==0&&r!==u.retryLane))throw u.retryLane=r,Js(n,r),Te(s,n,r),Yv;o.data==="$?"||fh(),t=of(n,t,e)}else o.data==="$?"?(t.flags|=192,t.child=n.child,t=null):(n=u.treeContext,bt=rn(o.nextSibling),Wt=t,tt=!0,da=null,fn=!1,n!==null&&(De[Oe++]=Wr,De[Oe++]=ti,De[Oe++]=ha,Wr=n.id,ti=n.overflow,ha=t),t=ah(t,r.children),t.flags|=4096);return t}return i?(Oi(),i=r.fallback,o=t.mode,u=n.child,c=u.sibling,r=si(u,{mode:"hidden",children:r.children}),r.subtreeFlags=u.subtreeFlags&65011712,c!==null?i=si(c,i):(i=fa(i,o,e,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=n.child.memoizedState,o===null?o=af(e):(u=o.cachePool,u!==null?(c=Rt._currentValue,u=u.parent!==c?{parent:c,pool:c}:u):u=nv(),o={baseLanes:o.baseLanes|e,cachePool:u}),i.memoizedState=o,i.childLanes=sf(n,s,e),t.memoizedState=rf,r):(Di(t),e=n.child,n=e.sibling,e=si(e,{mode:"visible",children:r.children}),e.return=t,e.sibling=null,n!==null&&(s=t.deletions,s===null?(t.deletions=[n],t.flags|=16):s.push(n)),t.child=e,t.memoizedState=null,e)}function ah(n,t){return t=Nu({mode:"visible",children:t},n.mode),t.return=n,n.child=t}function Nu(n,t){return n=me(22,n,null,t),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function of(n,t,e){return ps(t,n.child,null,e),n=ah(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function Om(n,t,e){n.lanes|=t;var r=n.alternate;r!==null&&(r.lanes|=t),Gf(n.return,t,e)}function lf(n,t,e,r,i){var a=n.memoizedState;a===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:e,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=e,a.tailMode=i)}function Qv(n,t,e){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Ht(n,t,r.children,e),r=Bt.current,r&2)r=r&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Om(n,e,t);else if(n.tag===19)Om(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}switch(yt(Bt,r),i){case"forwards":for(e=t.child,i=null;e!==null;)n=e.alternate,n!==null&&wu(n)===null&&(i=e),e=e.sibling;e=i,e===null?(i=t.child,t.child=null):(i=e.sibling,e.sibling=null),lf(t,!1,i,e,a);break;case"backwards":for(e=null,i=t.child,t.child=null;i!==null;){if(n=i.alternate,n!==null&&wu(n)===null){t.child=i;break}n=i.sibling,i.sibling=e,e=i,i=n}lf(t,!0,e,null,a);break;case"together":lf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function hi(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),Fi|=t.lanes,!(e&t.childLanes))if(n!==null){if(al(n,t,e,!1),(e&t.childLanes)===0)return null}else return null;if(n!==null&&t.child!==n.child)throw Error(N(153));if(t.child!==null){for(n=t.child,e=si(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=si(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function Xd(n,t){return n.lanes&t?!0:(n=n.dependencies,!!(n!==null&&pu(n)))}function aw(n,t,e){switch(t.tag){case 3:uu(t,t.stateNode.containerInfo),xi(t,Rt,n.memoizedState.cache),il();break;case 27:case 5:zf(t);break;case 4:uu(t,t.stateNode.containerInfo);break;case 10:xi(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Di(t),t.flags|=128,null):e&t.child.childLanes?Zv(n,t,e):(Di(t),n=hi(n,t,e),n!==null?n.sibling:null);Di(t);break;case 19:var i=(n.flags&128)!==0;if(r=(e&t.childLanes)!==0,r||(al(n,t,e,!1),r=(e&t.childLanes)!==0),i){if(r)return Qv(n,t,e);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),yt(Bt,Bt.current),r)break;return null;case 22:case 23:return t.lanes=0,Fv(n,t,e);case 24:xi(t,Rt,n.memoizedState.cache)}return hi(n,t,e)}function _v(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps)qt=!0;else{if(!Xd(n,e)&&!(t.flags&128))return qt=!1,aw(n,t,e);qt=!!(n.flags&131072)}else qt=!1,tt&&t.flags&1048576&&tv(t,yu,t.index);switch(t.lanes=0,t.tag){case 16:t:{n=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,typeof r=="function")kd(r)?(n=ba(r,n),t.tag=1,t=xm(null,t,r,n,e)):(t.tag=0,t=ih(null,t,r,n,e));else{if(r!=null){if(i=r.$$typeof,i===md){t.tag=11,t=wm(null,t,r,n,e);break t}else if(i===yd){t.tag=14,t=Am(null,t,r,n,e);break t}}throw t=Rf(r)||r,Error(N(306,t,""))}}return t;case 0:return ih(n,t,t.type,t.pendingProps,e);case 1:return r=t.type,i=ba(r,t.pendingProps),xm(n,t,r,i,e);case 3:t:{if(uu(t,t.stateNode.containerInfo),n===null)throw Error(N(387));r=t.pendingProps;var a=t.memoizedState;i=a.element,Zf(n,t),mo(t,r,null,e);var s=t.memoizedState;if(r=s.cache,xi(t,Rt,r),r!==a.cache&&Yf(t,[Rt],e,!0),go(),r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=Dm(n,t,r,e);break t}else if(r!==i){i=qe(Error(N(424)),t),Bo(i),t=Dm(n,t,r,e);break t}else{switch(n=t.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(bt=rn(n.firstChild),Wt=t,tt=!0,da=null,fn=!0,e=Pv(t,null,r,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling}else{if(il(),r===i){t=hi(n,t,e);break t}Ht(n,t,r,e)}t=t.child}return t;case 26:return Ql(n,t),n===null?(e=$m(t.type,null,t.pendingProps,null))?t.memoizedState=e:tt||(e=t.type,n=t.pendingProps,r=Ru(Ui.current).createElement(e),r[Xt]=t,r[le]=n,Gt(r,e,n),Jt(r),t.stateNode=r):t.memoizedState=$m(t.type,n.memoizedProps,t.pendingProps,n.memoizedState),null;case 27:return zf(t),n===null&&tt&&(r=t.stateNode=J0(t.type,t.pendingProps,Ui.current),Wt=t,fn=!0,i=bt,_i(t.type)?(Sh=i,bt=rn(r.firstChild)):bt=i),Ht(n,t,t.pendingProps.children,e),Ql(n,t),n===null&&(t.flags|=4194304),t.child;case 5:return n===null&&tt&&((i=r=bt)&&(r=Bw(r,t.type,t.pendingProps,fn),r!==null?(t.stateNode=r,Wt=t,bt=rn(r.firstChild),fn=!1,i=!0):i=!1),i||pa(t)),zf(t),i=t.type,a=t.pendingProps,s=n!==null?n.memoizedProps:null,r=a.children,yh(i,a)?r=null:s!==null&&yh(i,s)&&(t.flags|=32),t.memoizedState!==null&&(i=Ld(n,t,QT,null,null,e),qo._currentValue=i),Ql(n,t),Ht(n,t,r,e),t.child;case 6:return n===null&&tt&&((n=e=bt)&&(e=zw(e,t.pendingProps,fn),e!==null?(t.stateNode=e,Wt=t,bt=null,n=!0):n=!1),n||pa(t)),null;case 13:return Zv(n,t,e);case 4:return uu(t,t.stateNode.containerInfo),r=t.pendingProps,n===null?t.child=ps(t,null,r,e):Ht(n,t,r,e),t.child;case 11:return wm(n,t,t.type,t.pendingProps,e);case 7:return Ht(n,t,t.pendingProps,e),t.child;case 8:return Ht(n,t,t.pendingProps.children,e),t.child;case 12:return Ht(n,t,t.pendingProps.children,e),t.child;case 10:return r=t.pendingProps,xi(t,t.type,r.value),Ht(n,t,r.children,e),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,va(t),i=Ft(i),r=r(i),t.flags|=1,Ht(n,t,r,e),t.child;case 14:return Am(n,t,t.type,t.pendingProps,e);case 15:return Xv(n,t,t.type,t.pendingProps,e);case 19:return Qv(n,t,e);case 31:return r=t.pendingProps,e=t.mode,r={mode:r.mode,children:r.children},n===null?(e=Nu(r,e),e.ref=t.ref,t.child=e,e.return=t,t=e):(e=si(n.child,r),e.ref=t.ref,t.child=e,e.return=t,t=e),t;case 22:return Fv(n,t,e);case 24:return va(t),r=Ft(Rt),n===null?(i=Bd(),i===null&&(i=ft,a=Rd(),i.pooledCache=a,a.refCount++,a!==null&&(i.pooledCacheLanes|=e),i=a),t.memoizedState={parent:r,cache:i},zd(t),xi(t,Rt,i)):(n.lanes&e&&(Zf(n,t),mo(t,null,null,e),go()),i=n.memoizedState,a=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),xi(t,Rt,r)):(r=a.cache,xi(t,Rt,r),r!==i.cache&&Yf(t,[Rt],e,!0))),Ht(n,t,t.pendingProps.children,e),t.child;case 29:throw t.pendingProps}throw Error(N(156,t.tag))}function In(n){n.flags|=4}function km(n,t){if(t.type!=="stylesheet"||t.state.loading&4)n.flags&=-16777217;else if(n.flags|=16777216,!V0(t)){if(t=Ge.current,t!==null&&((Q&4194048)===Q?Tn!==null:(Q&62914560)!==Q&&!(Q&536870912)||t!==Tn))throw fo=Ff,rv;n.flags|=8192}}function Il(n,t){t!==null&&(n.flags|=4),n.flags&16384&&(t=n.tag!==22?Ep():536870912,n.lanes|=t,vs|=t)}function Ys(n,t){if(!tt)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function pt(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,r=0;if(t)for(var i=n.child;i!==null;)e|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)e|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=e,t}function sw(n,t,e){var r=t.pendingProps;switch(Id(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(t),null;case 1:return pt(t),null;case 3:return e=t.stateNode,r=null,n!==null&&(r=n.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),oi(Rt),fs(),e.pendingContext&&(e.context=e.pendingContext,e.pendingContext=null),(n===null||n.child===null)&&($s(t)?In(t):n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,am())),pt(t),null;case 26:return e=t.memoizedState,n===null?(In(t),e!==null?(pt(t),km(t,e)):(pt(t),t.flags&=-16777217)):e?e!==n.memoizedState?(In(t),pt(t),km(t,e)):(pt(t),t.flags&=-16777217):(n.memoizedProps!==r&&In(t),pt(t),t.flags&=-16777217),null;case 27:cu(t),e=Ui.current;var i=t.type;if(n!==null&&t.stateNode!=null)n.memoizedProps!==r&&In(t);else{if(!r){if(t.stateNode===null)throw Error(N(166));return pt(t),null}n=Sn.current,$s(t)?rm(t):(n=J0(i,r,e),t.stateNode=n,In(t))}return pt(t),null;case 5:if(cu(t),e=t.type,n!==null&&t.stateNode!=null)n.memoizedProps!==r&&In(t);else{if(!r){if(t.stateNode===null)throw Error(N(166));return pt(t),null}if(n=Sn.current,$s(t))rm(t);else{switch(i=Ru(Ui.current),n){case 1:n=i.createElementNS("http://www.w3.org/2000/svg",e);break;case 2:n=i.createElementNS("http://www.w3.org/1998/Math/MathML",e);break;default:switch(e){case"svg":n=i.createElementNS("http://www.w3.org/2000/svg",e);break;case"math":n=i.createElementNS("http://www.w3.org/1998/Math/MathML",e);break;case"script":n=i.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof r.is=="string"?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?n.multiple=!0:r.size&&(n.size=r.size);break;default:n=typeof r.is=="string"?i.createElement(e,{is:r.is}):i.createElement(e)}}n[Xt]=t,n[le]=r;t:for(i=t.child;i!==null;){if(i.tag===5||i.tag===6)n.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break t;for(;i.sibling===null;){if(i.return===null||i.return===t)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=n;t:switch(Gt(n,e,r),e){case"button":case"input":case"select":case"textarea":n=!!r.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&In(t)}}return pt(t),t.flags&=-16777217,null;case 6:if(n&&t.stateNode!=null)n.memoizedProps!==r&&In(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(N(166));if(n=Ui.current,$s(t)){if(n=t.stateNode,e=t.memoizedProps,r=null,i=Wt,i!==null)switch(i.tag){case 27:case 5:r=i.memoizedProps}n[Xt]=t,n=!!(n.nodeValue===e||r!==null&&r.suppressHydrationWarning===!0||M0(n.nodeValue,e)),n||pa(t)}else n=Ru(n).createTextNode(r),n[Xt]=t,t.stateNode=n}return pt(t),null;case 13:if(r=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(i=$s(t),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(N(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(N(317));i[Xt]=t}else il(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pt(t),i=!1}else i=am(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(ni(t),t):(ni(t),null)}if(ni(t),t.flags&128)return t.lanes=e,t;if(e=r!==null,n=n!==null&&n.memoizedState!==null,e){r=t.child,i=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(i=r.alternate.memoizedState.cachePool.pool);var a=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)}return e!==n&&e&&(t.child.flags|=8192),Il(t,t.updateQueue),pt(t),null;case 4:return fs(),n===null&&ng(t.stateNode.containerInfo),pt(t),null;case 10:return oi(t.type),pt(t),null;case 19:if(Pt(Bt),i=t.memoizedState,i===null)return pt(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)Ys(i,!1);else{if(Tt!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(a=wu(n),a!==null){for(t.flags|=128,Ys(i,!1),n=a.updateQueue,t.updateQueue=n,Il(t,n),t.subtreeFlags=0,n=e,e=t.child;e!==null;)Wp(e,n),e=e.sibling;return yt(Bt,Bt.current&1|2),t.child}n=n.sibling}i.tail!==null&&bn()>Du&&(t.flags|=128,r=!0,Ys(i,!1),t.lanes=4194304)}else{if(!r)if(n=wu(a),n!==null){if(t.flags|=128,r=!0,n=n.updateQueue,t.updateQueue=n,Il(t,n),Ys(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!tt)return pt(t),null}else 2*bn()-i.renderingStartTime>Du&&e!==536870912&&(t.flags|=128,r=!0,Ys(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=bn(),t.sibling=null,n=Bt.current,yt(Bt,r?n&1|2:n&1),t):(pt(t),null);case 22:case 23:return ni(t),Md(),r=t.memoizedState!==null,n!==null?n.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?e&536870912&&!(t.flags&128)&&(pt(t),t.subtreeFlags&6&&(t.flags|=8192)):pt(t),e=t.updateQueue,e!==null&&Il(t,e.retryQueue),e=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==e&&(t.flags|=2048),n!==null&&Pt(ga),null;case 24:return e=null,n!==null&&(e=n.memoizedState.cache),t.memoizedState.cache!==e&&(t.flags|=2048),oi(Rt),pt(t),null;case 25:return null;case 30:return null}throw Error(N(156,t.tag))}function ow(n,t){switch(Id(t),t.tag){case 1:return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return oi(Rt),fs(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 26:case 27:case 5:return cu(t),null;case 13:if(ni(t),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(N(340));il()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return Pt(Bt),null;case 4:return fs(),null;case 10:return oi(t.type),null;case 22:case 23:return ni(t),Md(),n!==null&&Pt(ga),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 24:return oi(Rt),null;case 25:return null;default:return null}}function Wv(n,t){switch(Id(t),t.tag){case 3:oi(Rt),fs();break;case 26:case 27:case 5:cu(t);break;case 4:fs();break;case 13:ni(t);break;case 19:Pt(Bt);break;case 10:oi(t.type);break;case 22:case 23:ni(t),Md(),n!==null&&Pt(ga);break;case 24:oi(Rt)}}function cl(n,t){try{var e=t.updateQueue,r=e!==null?e.lastEffect:null;if(r!==null){var i=r.next;e=i;do{if((e.tag&n)===n){r=void 0;var a=e.create,s=e.inst;r=a(),s.destroy=r}e=e.next}while(e!==i)}}catch(o){ct(t,t.return,o)}}function Xi(n,t,e){try{var r=t.updateQueue,i=r!==null?r.lastEffect:null;if(i!==null){var a=i.next;r=a;do{if((r.tag&n)===n){var s=r.inst,o=s.destroy;if(o!==void 0){s.destroy=void 0,i=t;var u=e,c=o;try{c()}catch(h){ct(i,u,h)}}}r=r.next}while(r!==a)}}catch(h){ct(t,t.return,h)}}function t0(n){var t=n.updateQueue;if(t!==null){var e=n.stateNode;try{sv(t,e)}catch(r){ct(n,n.return,r)}}}function e0(n,t,e){e.props=ba(n.type,n.memoizedProps),e.state=n.memoizedState;try{e.componentWillUnmount()}catch(r){ct(n,t,r)}}function po(n,t){try{var e=n.ref;if(e!==null){switch(n.tag){case 26:case 27:case 5:var r=n.stateNode;break;case 30:r=n.stateNode;break;default:r=n.stateNode}typeof e=="function"?n.refCleanup=e(r):e.current=r}}catch(i){ct(n,t,i)}}function dn(n,t){var e=n.ref,r=n.refCleanup;if(e!==null)if(typeof r=="function")try{r()}catch(i){ct(n,t,i)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof e=="function")try{e(null)}catch(i){ct(n,t,i)}else e.current=null}function n0(n){var t=n.type,e=n.memoizedProps,r=n.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":e.autoFocus&&r.focus();break t;case"img":e.src?r.src=e.src:e.srcSet&&(r.srcset=e.srcSet)}}catch(i){ct(n,n.return,i)}}function uf(n,t,e){try{var r=n.stateNode;Ow(r,n.type,e,t),r[le]=t}catch(i){ct(n,n.return,i)}}function r0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&_i(n.type)||n.tag===4}function cf(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||r0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&_i(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function sh(n,t,e){var r=n.tag;if(r===5||r===6)n=n.stateNode,t?(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e).insertBefore(n,t):(t=e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,t.appendChild(n),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=Dc));else if(r!==4&&(r===27&&_i(n.type)&&(e=n.stateNode,t=null),n=n.child,n!==null))for(sh(n,t,e),n=n.sibling;n!==null;)sh(n,t,e),n=n.sibling}function xu(n,t,e){var r=n.tag;if(r===5||r===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(r!==4&&(r===27&&_i(n.type)&&(e=n.stateNode),n=n.child,n!==null))for(xu(n,t,e),n=n.sibling;n!==null;)xu(n,t,e),n=n.sibling}function i0(n){var t=n.stateNode,e=n.memoizedProps;try{for(var r=n.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Gt(t,r,e),t[Xt]=n,t[le]=e}catch(a){ct(n,n.return,a)}}var Fr=!1,xt=!1,ff=!1,Cm=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function lw(n,t){if(n=n.containerInfo,gh=Uu,n=$p(n),xd(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var r=e.getSelection&&e.getSelection();if(r&&r.rangeCount!==0){e=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{e.nodeType,a.nodeType}catch{e=null;break t}var s=0,o=-1,u=-1,c=0,h=0,m=n,d=null;e:for(;;){for(var g;m!==e||i!==0&&m.nodeType!==3||(o=s+i),m!==a||r!==0&&m.nodeType!==3||(u=s+r),m.nodeType===3&&(s+=m.nodeValue.length),(g=m.firstChild)!==null;)d=m,m=g;for(;;){if(m===n)break e;if(d===e&&++c===i&&(o=s),d===a&&++h===r&&(u=s),(g=m.nextSibling)!==null)break;m=d,d=m.parentNode}m=g}e=o===-1||u===-1?null:{start:o,end:u}}else e=null}e=e||{start:0,end:0}}else e=null;for(mh={focusedElem:n,selectionRange:e},Uu=!1,Lt=t;Lt!==null;)if(t=Lt,n=t.child,(t.subtreeFlags&1024)!==0&&n!==null)n.return=t,Lt=n;else for(;Lt!==null;){switch(t=Lt,a=t.alternate,n=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(n&1024&&a!==null){n=void 0,e=t,i=a.memoizedProps,a=a.memoizedState,r=e.stateNode;try{var T=ba(e.type,i,e.elementType===e.type);n=r.getSnapshotBeforeUpdate(T,a),r.__reactInternalSnapshotBeforeUpdate=n}catch(A){ct(e,e.return,A)}}break;case 3:if(n&1024){if(n=t.stateNode.containerInfo,e=n.nodeType,e===9)ph(n);else if(e===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ph(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(n&1024)throw Error(N(163))}if(n=t.sibling,n!==null){n.return=t.return,Lt=n;break}Lt=t.return}}function a0(n,t,e){var r=e.flags;switch(e.tag){case 0:case 11:case 15:Si(n,e),r&4&&cl(5,e);break;case 1:if(Si(n,e),r&4)if(n=e.stateNode,t===null)try{n.componentDidMount()}catch(s){ct(e,e.return,s)}else{var i=ba(e.type,t.memoizedProps);t=t.memoizedState;try{n.componentDidUpdate(i,t,n.__reactInternalSnapshotBeforeUpdate)}catch(s){ct(e,e.return,s)}}r&64&&t0(e),r&512&&po(e,e.return);break;case 3:if(Si(n,e),r&64&&(n=e.updateQueue,n!==null)){if(t=null,e.child!==null)switch(e.child.tag){case 27:case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}try{sv(n,t)}catch(s){ct(e,e.return,s)}}break;case 27:t===null&&r&4&&i0(e);case 26:case 5:Si(n,e),t===null&&r&4&&n0(e),r&512&&po(e,e.return);break;case 12:Si(n,e);break;case 13:Si(n,e),r&4&&l0(n,e),r&64&&(n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(e=pw.bind(null,e),Mw(n,e))));break;case 22:if(r=e.memoizedState!==null||Fr,!r){t=t!==null&&t.memoizedState!==null||xt,i=Fr;var a=xt;Fr=r,(xt=t)&&!a?Ti(n,e,(e.subtreeFlags&8772)!==0):Si(n,e),Fr=i,xt=a}break;case 30:break;default:Si(n,e)}}function s0(n){var t=n.alternate;t!==null&&(n.alternate=null,s0(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&bd(t)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var dt=null,re=!1;function Rn(n,t,e){for(e=e.child;e!==null;)o0(n,t,e),e=e.sibling}function o0(n,t,e){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(Wo,e)}catch{}switch(e.tag){case 26:xt||dn(e,t),Rn(n,t,e),e.memoizedState?e.memoizedState.count--:e.stateNode&&(e=e.stateNode,e.parentNode.removeChild(e));break;case 27:xt||dn(e,t);var r=dt,i=re;_i(e.type)&&(dt=e.stateNode,re=!1),Rn(n,t,e),To(e.stateNode),dt=r,re=i;break;case 5:xt||dn(e,t);case 6:if(r=dt,i=re,dt=null,Rn(n,t,e),dt=r,re=i,dt!==null)if(re)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(e.stateNode)}catch(a){ct(e,t,a)}else try{dt.removeChild(e.stateNode)}catch(a){ct(e,t,a)}break;case 18:dt!==null&&(re?(n=dt,Hm(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.stateNode),Ho(n)):Hm(dt,e.stateNode));break;case 4:r=dt,i=re,dt=e.stateNode.containerInfo,re=!0,Rn(n,t,e),dt=r,re=i;break;case 0:case 11:case 14:case 15:xt||Xi(2,e,t),xt||Xi(4,e,t),Rn(n,t,e);break;case 1:xt||(dn(e,t),r=e.stateNode,typeof r.componentWillUnmount=="function"&&e0(e,t,r)),Rn(n,t,e);break;case 21:Rn(n,t,e);break;case 22:xt=(r=xt)||e.memoizedState!==null,Rn(n,t,e),xt=r;break;default:Rn(n,t,e)}}function l0(n,t){if(t.memoizedState===null&&(n=t.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ho(n)}catch(e){ct(t,t.return,e)}}function uw(n){switch(n.tag){case 13:case 19:var t=n.stateNode;return t===null&&(t=n.stateNode=new Cm),t;case 22:return n=n.stateNode,t=n._retryCache,t===null&&(t=n._retryCache=new Cm),t;default:throw Error(N(435,n.tag))}}function hf(n,t){var e=uw(n);t.forEach(function(r){var i=vw.bind(null,n,r);e.has(r)||(e.add(r),r.then(i,i))})}function he(n,t){var e=t.deletions;if(e!==null)for(var r=0;r<e.length;r++){var i=e[r],a=n,s=t,o=s;t:for(;o!==null;){switch(o.tag){case 27:if(_i(o.type)){dt=o.stateNode,re=!1;break t}break;case 5:dt=o.stateNode,re=!1;break t;case 3:case 4:dt=o.stateNode.containerInfo,re=!0;break t}o=o.return}if(dt===null)throw Error(N(160));o0(a,s,i),dt=null,re=!1,a=i.alternate,a!==null&&(a.return=null),i.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)u0(t,n),t=t.sibling}var _e=null;function u0(n,t){var e=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:he(t,n),de(n),r&4&&(Xi(3,n,n.return),cl(3,n),Xi(5,n,n.return));break;case 1:he(t,n),de(n),r&512&&(xt||e===null||dn(e,e.return)),r&64&&Fr&&(n=n.updateQueue,n!==null&&(r=n.callbacks,r!==null&&(e=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=e===null?r:e.concat(r))));break;case 26:var i=_e;if(he(t,n),de(n),r&512&&(xt||e===null||dn(e,e.return)),r&4){var a=e!==null?e.memoizedState:null;if(r=n.memoizedState,e===null)if(r===null)if(n.stateNode===null){t:{r=n.type,e=n.memoizedProps,i=i.ownerDocument||i;e:switch(r){case"title":a=i.getElementsByTagName("title")[0],(!a||a[nl]||a[Xt]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=i.createElement(r),i.head.insertBefore(a,i.querySelector("head > title"))),Gt(a,r,e),a[Xt]=n,Jt(a),r=a;break t;case"link":var s=Ym("link","href",i).get(r+(e.href||""));if(s){for(var o=0;o<s.length;o++)if(a=s[o],a.getAttribute("href")===(e.href==null||e.href===""?null:e.href)&&a.getAttribute("rel")===(e.rel==null?null:e.rel)&&a.getAttribute("title")===(e.title==null?null:e.title)&&a.getAttribute("crossorigin")===(e.crossOrigin==null?null:e.crossOrigin)){s.splice(o,1);break e}}a=i.createElement(r),Gt(a,r,e),i.head.appendChild(a);break;case"meta":if(s=Ym("meta","content",i).get(r+(e.content||""))){for(o=0;o<s.length;o++)if(a=s[o],a.getAttribute("content")===(e.content==null?null:""+e.content)&&a.getAttribute("name")===(e.name==null?null:e.name)&&a.getAttribute("property")===(e.property==null?null:e.property)&&a.getAttribute("http-equiv")===(e.httpEquiv==null?null:e.httpEquiv)&&a.getAttribute("charset")===(e.charSet==null?null:e.charSet)){s.splice(o,1);break e}}a=i.createElement(r),Gt(a,r,e),i.head.appendChild(a);break;default:throw Error(N(468,r))}a[Xt]=n,Jt(a),r=a}n.stateNode=r}else Xm(i,n.type,n.stateNode);else n.stateNode=Gm(i,r,n.memoizedProps);else a!==r?(a===null?e.stateNode!==null&&(e=e.stateNode,e.parentNode.removeChild(e)):a.count--,r===null?Xm(i,n.type,n.stateNode):Gm(i,r,n.memoizedProps)):r===null&&n.stateNode!==null&&uf(n,n.memoizedProps,e.memoizedProps)}break;case 27:he(t,n),de(n),r&512&&(xt||e===null||dn(e,e.return)),e!==null&&r&4&&uf(n,n.memoizedProps,e.memoizedProps);break;case 5:if(he(t,n),de(n),r&512&&(xt||e===null||dn(e,e.return)),n.flags&32){i=n.stateNode;try{ds(i,"")}catch(g){ct(n,n.return,g)}}r&4&&n.stateNode!=null&&(i=n.memoizedProps,uf(n,i,e!==null?e.memoizedProps:i)),r&1024&&(ff=!0);break;case 6:if(he(t,n),de(n),r&4){if(n.stateNode===null)throw Error(N(162));r=n.memoizedProps,e=n.stateNode;try{e.nodeValue=r}catch(g){ct(n,n.return,g)}}break;case 3:if(tu=null,i=_e,_e=Bu(t.containerInfo),he(t,n),_e=i,de(n),r&4&&e!==null&&e.memoizedState.isDehydrated)try{Ho(t.containerInfo)}catch(g){ct(n,n.return,g)}ff&&(ff=!1,c0(n));break;case 4:r=_e,_e=Bu(n.stateNode.containerInfo),he(t,n),de(n),_e=r;break;case 12:he(t,n),de(n);break;case 13:he(t,n),de(n),n.child.flags&8192&&n.memoizedState!==null!=(e!==null&&e.memoizedState!==null)&&(Wd=bn()),r&4&&(r=n.updateQueue,r!==null&&(n.updateQueue=null,hf(n,r)));break;case 22:i=n.memoizedState!==null;var u=e!==null&&e.memoizedState!==null,c=Fr,h=xt;if(Fr=c||i,xt=h||u,he(t,n),xt=h,Fr=c,de(n),r&8192)t:for(t=n.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(e===null||u||Fr||xt||aa(n)),e=null,t=n;;){if(t.tag===5||t.tag===26){if(e===null){u=e=t;try{if(a=u.stateNode,i)s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=u.stateNode;var m=u.memoizedProps.style,d=m!=null&&m.hasOwnProperty("display")?m.display:null;o.style.display=d==null||typeof d=="boolean"?"":(""+d).trim()}}catch(g){ct(u,u.return,g)}}}else if(t.tag===6){if(e===null){u=t;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(g){ct(u,u.return,g)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===n)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;e===t&&(e=null),t=t.return}e===t&&(e=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=n.updateQueue,r!==null&&(e=r.retryQueue,e!==null&&(r.retryQueue=null,hf(n,e))));break;case 19:he(t,n),de(n),r&4&&(r=n.updateQueue,r!==null&&(n.updateQueue=null,hf(n,r)));break;case 30:break;case 21:break;default:he(t,n),de(n)}}function de(n){var t=n.flags;if(t&2){try{for(var e,r=n.return;r!==null;){if(r0(r)){e=r;break}r=r.return}if(e==null)throw Error(N(160));switch(e.tag){case 27:var i=e.stateNode,a=cf(n);xu(n,a,i);break;case 5:var s=e.stateNode;e.flags&32&&(ds(s,""),e.flags&=-33);var o=cf(n);xu(n,o,s);break;case 3:case 4:var u=e.stateNode.containerInfo,c=cf(n);sh(n,c,u);break;default:throw Error(N(161))}}catch(h){ct(n,n.return,h)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function c0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var t=n;c0(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),n=n.sibling}}function Si(n,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)a0(n,t.alternate,t),t=t.sibling}function aa(n){for(n=n.child;n!==null;){var t=n;switch(t.tag){case 0:case 11:case 14:case 15:Xi(4,t,t.return),aa(t);break;case 1:dn(t,t.return);var e=t.stateNode;typeof e.componentWillUnmount=="function"&&e0(t,t.return,e),aa(t);break;case 27:To(t.stateNode);case 26:case 5:dn(t,t.return),aa(t);break;case 22:t.memoizedState===null&&aa(t);break;case 30:aa(t);break;default:aa(t)}n=n.sibling}}function Ti(n,t,e){for(e=e&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,i=n,a=t,s=a.flags;switch(a.tag){case 0:case 11:case 15:Ti(i,a,e),cl(4,a);break;case 1:if(Ti(i,a,e),r=a,i=r.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(c){ct(r,r.return,c)}if(r=a,i=r.updateQueue,i!==null){var o=r.stateNode;try{var u=i.shared.hiddenCallbacks;if(u!==null)for(i.shared.hiddenCallbacks=null,i=0;i<u.length;i++)av(u[i],o)}catch(c){ct(r,r.return,c)}}e&&s&64&&t0(a),po(a,a.return);break;case 27:i0(a);case 26:case 5:Ti(i,a,e),e&&r===null&&s&4&&n0(a),po(a,a.return);break;case 12:Ti(i,a,e);break;case 13:Ti(i,a,e),e&&s&4&&l0(i,a);break;case 22:a.memoizedState===null&&Ti(i,a,e),po(a,a.return);break;case 30:break;default:Ti(i,a,e)}t=t.sibling}}function Fd(n,t){var e=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==e&&(n!=null&&n.refCount++,e!=null&&sl(e))}function Zd(n,t){n=null,t.alternate!==null&&(n=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==n&&(t.refCount++,n!=null&&sl(n))}function ln(n,t,e,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)f0(n,t,e,r),t=t.sibling}function f0(n,t,e,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ln(n,t,e,r),i&2048&&cl(9,t);break;case 1:ln(n,t,e,r);break;case 3:ln(n,t,e,r),i&2048&&(n=null,t.alternate!==null&&(n=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==n&&(t.refCount++,n!=null&&sl(n)));break;case 12:if(i&2048){ln(n,t,e,r),n=t.stateNode;try{var a=t.memoizedProps,s=a.id,o=a.onPostCommit;typeof o=="function"&&o(s,t.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(u){ct(t,t.return,u)}}else ln(n,t,e,r);break;case 13:ln(n,t,e,r);break;case 23:break;case 22:a=t.stateNode,s=t.alternate,t.memoizedState!==null?a._visibility&2?ln(n,t,e,r):vo(n,t):a._visibility&2?ln(n,t,e,r):(a._visibility|=2,La(n,t,e,r,(t.subtreeFlags&10256)!==0)),i&2048&&Fd(s,t);break;case 24:ln(n,t,e,r),i&2048&&Zd(t.alternate,t);break;default:ln(n,t,e,r)}}function La(n,t,e,r,i){for(i=i&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var a=n,s=t,o=e,u=r,c=s.flags;switch(s.tag){case 0:case 11:case 15:La(a,s,o,u,i),cl(8,s);break;case 23:break;case 22:var h=s.stateNode;s.memoizedState!==null?h._visibility&2?La(a,s,o,u,i):vo(a,s):(h._visibility|=2,La(a,s,o,u,i)),i&&c&2048&&Fd(s.alternate,s);break;case 24:La(a,s,o,u,i),i&&c&2048&&Zd(s.alternate,s);break;default:La(a,s,o,u,i)}t=t.sibling}}function vo(n,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var e=n,r=t,i=r.flags;switch(r.tag){case 22:vo(e,r),i&2048&&Fd(r.alternate,r);break;case 24:vo(e,r),i&2048&&Zd(r.alternate,r);break;default:vo(e,r)}t=t.sibling}}var no=8192;function Ca(n){if(n.subtreeFlags&no)for(n=n.child;n!==null;)h0(n),n=n.sibling}function h0(n){switch(n.tag){case 26:Ca(n),n.flags&no&&n.memoizedState!==null&&Xw(_e,n.memoizedState,n.memoizedProps);break;case 5:Ca(n);break;case 3:case 4:var t=_e;_e=Bu(n.stateNode.containerInfo),Ca(n),_e=t;break;case 22:n.memoizedState===null&&(t=n.alternate,t!==null&&t.memoizedState!==null?(t=no,no=16777216,Ca(n),no=t):Ca(n));break;default:Ca(n)}}function d0(n){var t=n.alternate;if(t!==null&&(n=t.child,n!==null)){t.child=null;do t=n.sibling,n.sibling=null,n=t;while(n!==null)}}function Xs(n){var t=n.deletions;if(n.flags&16){if(t!==null)for(var e=0;e<t.length;e++){var r=t[e];Lt=r,m0(r,n)}d0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)g0(n),n=n.sibling}function g0(n){switch(n.tag){case 0:case 11:case 15:Xs(n),n.flags&2048&&Xi(9,n,n.return);break;case 3:Xs(n);break;case 12:Xs(n);break;case 22:var t=n.stateNode;n.memoizedState!==null&&t._visibility&2&&(n.return===null||n.return.tag!==13)?(t._visibility&=-3,_l(n)):Xs(n);break;default:Xs(n)}}function _l(n){var t=n.deletions;if(n.flags&16){if(t!==null)for(var e=0;e<t.length;e++){var r=t[e];Lt=r,m0(r,n)}d0(n)}for(n=n.child;n!==null;){switch(t=n,t.tag){case 0:case 11:case 15:Xi(8,t,t.return),_l(t);break;case 22:e=t.stateNode,e._visibility&2&&(e._visibility&=-3,_l(t));break;default:_l(t)}n=n.sibling}}function m0(n,t){for(;Lt!==null;){var e=Lt;switch(e.tag){case 0:case 11:case 15:Xi(8,e,t);break;case 23:case 22:if(e.memoizedState!==null&&e.memoizedState.cachePool!==null){var r=e.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:sl(e.memoizedState.cache)}if(r=e.child,r!==null)r.return=e,Lt=r;else t:for(e=n;Lt!==null;){r=Lt;var i=r.sibling,a=r.return;if(s0(r),r===e){Lt=null;break t}if(i!==null){i.return=a,Lt=i;break t}Lt=a}}}var cw={getCacheForType:function(n){var t=Ft(Rt),e=t.data.get(n);return e===void 0&&(e=n(),t.data.set(n,e)),e}},fw=typeof WeakMap=="function"?WeakMap:Map,it=0,ft=null,Y=null,Q=0,rt=0,ge=null,Bi=!1,qs=!1,Qd=!1,di=0,Tt=0,Fi=0,ma=0,_d=0,Pe=0,vs=0,So=null,ie=null,oh=!1,Wd=0,Du=1/0,Ou=null,qi=null,jt=0,Pi=null,Ss=null,ls=0,lh=0,uh=null,y0=null,bo=0,ch=null;function be(){if(it&2&&Q!==0)return Q&-Q;if(q.T!==null){var n=gs;return n!==0?n:eg()}return Dp()}function p0(){Pe===0&&(Pe=!(Q&536870912)||tt?Ap():536870912);var n=Ge.current;return n!==null&&(n.flags|=32),Pe}function Te(n,t,e){(n===ft&&(rt===2||rt===9)||n.cancelPendingCommit!==null)&&(bs(n,0),zi(n,Q,Pe,!1)),el(n,e),(!(it&2)||n!==ft)&&(n===ft&&(!(it&2)&&(ma|=e),Tt===4&&zi(n,Q,Pe,!1)),kn(n))}function v0(n,t,e){if(it&6)throw Error(N(327));var r=!e&&(t&124)===0&&(t&n.expiredLanes)===0||tl(n,t),i=r?gw(n,t):df(n,t,!0),a=r;do{if(i===0){qs&&!r&&zi(n,t,0,!1);break}else{if(e=n.current.alternate,a&&!hw(e)){i=df(n,t,!1),a=!1;continue}if(i===2){if(a=t,n.errorRecoveryDisabledLanes&a)var s=0;else s=n.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){t=s;t:{var o=n;i=So;var u=o.current.memoizedState.isDehydrated;if(u&&(bs(o,s).flags|=256),s=df(o,s,!1),s!==2){if(Qd&&!u){o.errorRecoveryDisabledLanes|=a,ma|=a,i=4;break t}a=ie,ie=i,a!==null&&(ie===null?ie=a:ie.push.apply(ie,a))}i=s}if(a=!1,i!==2)continue}}if(i===1){bs(n,0),zi(n,t,0,!0);break}t:{switch(r=n,a=i,a){case 0:case 1:throw Error(N(345));case 4:if((t&4194048)!==t)break;case 6:zi(r,t,Pe,!Bi);break t;case 2:ie=null;break;case 3:case 5:break;default:throw Error(N(329))}if((t&62914560)===t&&(i=Wd+300-bn(),10<i)){if(zi(r,t,Pe,!Bi),gc(r,0,!0)!==0)break t;r.timeoutHandle=L0(Im.bind(null,r,e,ie,Ou,oh,t,Pe,ma,vs,Bi,a,2,-0,0),i);break t}Im(r,e,ie,Ou,oh,t,Pe,ma,vs,Bi,a,0,-0,0)}}break}while(!0);kn(n)}function Im(n,t,e,r,i,a,s,o,u,c,h,m,d,g){if(n.timeoutHandle=-1,m=t.subtreeFlags,(m&8192||(m&16785408)===16785408)&&(Jo={stylesheets:null,count:0,unsuspend:Yw},h0(t),m=Fw(),m!==null)){n.cancelPendingCommit=m(Bm.bind(null,n,t,a,e,r,i,s,o,u,h,1,d,g)),zi(n,a,s,!c);return}Bm(n,t,a,e,r,i,s,o,u)}function hw(n){for(var t=n;;){var e=t.tag;if((e===0||e===11||e===15)&&t.flags&16384&&(e=t.updateQueue,e!==null&&(e=e.stores,e!==null)))for(var r=0;r<e.length;r++){var i=e[r],a=i.getSnapshot;i=i.value;try{if(!we(a(),i))return!1}catch{return!1}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zi(n,t,e,r){t&=~_d,t&=~ma,n.suspendedLanes|=t,n.pingedLanes&=~t,r&&(n.warmLanes|=t),r=n.expirationTimes;for(var i=t;0<i;){var a=31-Se(i),s=1<<a;r[a]=-1,i&=~s}e!==0&&Np(n,e,t)}function Ec(){return it&6?!0:(fl(0),!1)}function tg(){if(Y!==null){if(rt===0)var n=Y.return;else n=Y,ei=Oa=null,Pd(n),os=null,Mo=0,n=Y;for(;n!==null;)Wv(n.alternate,n),n=n.return;Y=null}}function bs(n,t){var e=n.timeoutHandle;e!==-1&&(n.timeoutHandle=-1,Cw(e)),e=n.cancelPendingCommit,e!==null&&(n.cancelPendingCommit=null,e()),tg(),ft=n,Y=e=si(n.current,null),Q=t,rt=0,ge=null,Bi=!1,qs=tl(n,t),Qd=!1,vs=Pe=_d=ma=Fi=Tt=0,ie=So=null,oh=!1,t&8&&(t|=t&32);var r=n.entangledLanes;if(r!==0)for(n=n.entanglements,r&=t;0<r;){var i=31-Se(r),a=1<<i;t|=n[i],r&=~a}return di=t,vc(),e}function S0(n,t){K=null,q.H=Tu,t===ol||t===bc?(t=um(),rt=3):t===rv?(t=um(),rt=4):rt=t===Yv?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ge=t,Y===null&&(Tt=1,Eu(n,qe(t,n.current)))}function b0(){var n=q.H;return q.H=Tu,n===null?Tu:n}function T0(){var n=q.A;return q.A=cw,n}function fh(){Tt=4,Bi||(Q&4194048)!==Q&&Ge.current!==null||(qs=!0),!(Fi&134217727)&&!(ma&134217727)||ft===null||zi(ft,Q,Pe,!1)}function df(n,t,e){var r=it;it|=2;var i=b0(),a=T0();(ft!==n||Q!==t)&&(Ou=null,bs(n,t)),t=!1;var s=Tt;t:do try{if(rt!==0&&Y!==null){var o=Y,u=ge;switch(rt){case 8:tg(),s=6;break t;case 3:case 2:case 9:case 6:Ge.current===null&&(t=!0);var c=rt;if(rt=0,ge=null,_a(n,o,u,c),e&&qs){s=0;break t}break;default:c=rt,rt=0,ge=null,_a(n,o,u,c)}}dw(),s=Tt;break}catch(h){S0(n,h)}while(!0);return t&&n.shellSuspendCounter++,ei=Oa=null,it=r,q.H=i,q.A=a,Y===null&&(ft=null,Q=0,vc()),s}function dw(){for(;Y!==null;)w0(Y)}function gw(n,t){var e=it;it|=2;var r=b0(),i=T0();ft!==n||Q!==t?(Ou=null,Du=bn()+500,bs(n,t)):qs=tl(n,t);t:do try{if(rt!==0&&Y!==null){t=Y;var a=ge;e:switch(rt){case 1:rt=0,ge=null,_a(n,t,a,1);break;case 2:case 9:if(lm(a)){rt=0,ge=null,Rm(t);break}t=function(){rt!==2&&rt!==9||ft!==n||(rt=7),kn(n)},a.then(t,t);break t;case 3:rt=7;break t;case 4:rt=5;break t;case 7:lm(a)?(rt=0,ge=null,Rm(t)):(rt=0,ge=null,_a(n,t,a,7));break;case 5:var s=null;switch(Y.tag){case 26:s=Y.memoizedState;case 5:case 27:var o=Y;if(!s||V0(s)){rt=0,ge=null;var u=o.sibling;if(u!==null)Y=u;else{var c=o.return;c!==null?(Y=c,Nc(c)):Y=null}break e}}rt=0,ge=null,_a(n,t,a,5);break;case 6:rt=0,ge=null,_a(n,t,a,6);break;case 8:tg(),Tt=6;break t;default:throw Error(N(462))}}mw();break}catch(h){S0(n,h)}while(!0);return ei=Oa=null,q.H=r,q.A=i,it=e,Y!==null?0:(ft=null,Q=0,vc(),Tt)}function mw(){for(;Y!==null&&!Lb();)w0(Y)}function w0(n){var t=_v(n.alternate,n,di);n.memoizedProps=n.pendingProps,t===null?Nc(n):Y=t}function Rm(n){var t=n,e=t.alternate;switch(t.tag){case 15:case 0:t=Nm(e,t,t.pendingProps,t.type,void 0,Q);break;case 11:t=Nm(e,t,t.pendingProps,t.type.render,t.ref,Q);break;case 5:Pd(t);default:Wv(e,t),t=Y=Wp(t,di),t=_v(e,t,di)}n.memoizedProps=n.pendingProps,t===null?Nc(n):Y=t}function _a(n,t,e,r){ei=Oa=null,Pd(t),os=null,Mo=0;var i=t.return;try{if(iw(n,i,t,e,Q)){Tt=1,Eu(n,qe(e,n.current)),Y=null;return}}catch(a){if(i!==null)throw Y=i,a;Tt=1,Eu(n,qe(e,n.current)),Y=null;return}t.flags&32768?(tt||r===1?n=!0:qs||Q&536870912?n=!1:(Bi=n=!0,(r===2||r===9||r===3||r===6)&&(r=Ge.current,r!==null&&r.tag===13&&(r.flags|=16384))),A0(t,n)):Nc(t)}function Nc(n){var t=n;do{if(t.flags&32768){A0(t,Bi);return}n=t.return;var e=sw(t.alternate,t,di);if(e!==null){Y=e;return}if(t=t.sibling,t!==null){Y=t;return}Y=t=n}while(t!==null);Tt===0&&(Tt=5)}function A0(n,t){do{var e=ow(n.alternate,n);if(e!==null){e.flags&=32767,Y=e;return}if(e=n.return,e!==null&&(e.flags|=32768,e.subtreeFlags=0,e.deletions=null),!t&&(n=n.sibling,n!==null)){Y=n;return}Y=n=e}while(n!==null);Tt=6,Y=null}function Bm(n,t,e,r,i,a,s,o,u){n.cancelPendingCommit=null;do xc();while(jt!==0);if(it&6)throw Error(N(327));if(t!==null){if(t===n.current)throw Error(N(177));if(a=t.lanes|t.childLanes,a|=Dd,Yb(n,e,a,s,o,u),n===ft&&(Y=ft=null,Q=0),Ss=t,Pi=n,ls=e,lh=a,uh=i,y0=r,t.subtreeFlags&10256||t.flags&10256?(n.callbackNode=null,n.callbackPriority=0,Sw(fu,function(){return O0(),null})):(n.callbackNode=null,n.callbackPriority=0),r=(t.flags&13878)!==0,t.subtreeFlags&13878||r){r=q.T,q.T=null,i=et.p,et.p=2,s=it,it|=4;try{lw(n,t,e)}finally{it=s,et.p=i,q.T=r}}jt=1,E0(),N0(),x0()}}function E0(){if(jt===1){jt=0;var n=Pi,t=Ss,e=(t.flags&13878)!==0;if(t.subtreeFlags&13878||e){e=q.T,q.T=null;var r=et.p;et.p=2;var i=it;it|=4;try{u0(t,n);var a=mh,s=$p(n.containerInfo),o=a.focusedElem,u=a.selectionRange;if(s!==o&&o&&o.ownerDocument&&jp(o.ownerDocument.documentElement,o)){if(u!==null&&xd(o)){var c=u.start,h=u.end;if(h===void 0&&(h=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(h,o.value.length);else{var m=o.ownerDocument||document,d=m&&m.defaultView||window;if(d.getSelection){var g=d.getSelection(),T=o.textContent.length,A=Math.min(u.start,T),x=u.end===void 0?A:Math.min(u.end,T);!g.extend&&A>x&&(s=x,x=A,A=s);var p=tm(o,A),y=tm(o,x);if(p&&y&&(g.rangeCount!==1||g.anchorNode!==p.node||g.anchorOffset!==p.offset||g.focusNode!==y.node||g.focusOffset!==y.offset)){var v=m.createRange();v.setStart(p.node,p.offset),g.removeAllRanges(),A>x?(g.addRange(v),g.extend(y.node,y.offset)):(v.setEnd(y.node,y.offset),g.addRange(v))}}}}for(m=[],g=o;g=g.parentNode;)g.nodeType===1&&m.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<m.length;o++){var w=m[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}Uu=!!gh,mh=gh=null}finally{it=i,et.p=r,q.T=e}}n.current=t,jt=2}}function N0(){if(jt===2){jt=0;var n=Pi,t=Ss,e=(t.flags&8772)!==0;if(t.subtreeFlags&8772||e){e=q.T,q.T=null;var r=et.p;et.p=2;var i=it;it|=4;try{a0(n,t.alternate,t)}finally{it=i,et.p=r,q.T=e}}jt=3}}function x0(){if(jt===4||jt===3){jt=0,Jb();var n=Pi,t=Ss,e=ls,r=y0;t.subtreeFlags&10256||t.flags&10256?jt=5:(jt=0,Ss=Pi=null,D0(n,n.pendingLanes));var i=n.pendingLanes;if(i===0&&(qi=null),Sd(e),t=t.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(Wo,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=q.T,i=et.p,et.p=2,q.T=null;try{for(var a=n.onRecoverableError,s=0;s<r.length;s++){var o=r[s];a(o.value,{componentStack:o.stack})}}finally{q.T=t,et.p=i}}ls&3&&xc(),kn(n),i=n.pendingLanes,e&4194090&&i&42?n===ch?bo++:(bo=0,ch=n):bo=0,fl(0)}}function D0(n,t){(n.pooledCacheLanes&=t)===0&&(t=n.pooledCache,t!=null&&(n.pooledCache=null,sl(t)))}function xc(n){return E0(),N0(),x0(),O0()}function O0(){if(jt!==5)return!1;var n=Pi,t=lh;lh=0;var e=Sd(ls),r=q.T,i=et.p;try{et.p=32>e?32:e,q.T=null,e=uh,uh=null;var a=Pi,s=ls;if(jt=0,Ss=Pi=null,ls=0,it&6)throw Error(N(331));var o=it;if(it|=4,g0(a.current),f0(a,a.current,s,e),it=o,fl(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(Wo,a)}catch{}return!0}finally{et.p=i,q.T=r,D0(n,t)}}function zm(n,t,e){t=qe(e,t),t=rh(n.stateNode,t,2),n=Ji(n,t,2),n!==null&&(el(n,2),kn(n))}function ct(n,t,e){if(n.tag===3)zm(n,n,e);else for(;t!==null;){if(t.tag===3){zm(t,n,e);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qi===null||!qi.has(r))){n=qe(e,n),e=$v(2),r=Ji(t,e,2),r!==null&&(Gv(e,r,t,n),el(r,2),kn(r));break}}t=t.return}}function gf(n,t,e){var r=n.pingCache;if(r===null){r=n.pingCache=new fw;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(e)||(Qd=!0,i.add(e),n=yw.bind(null,n,t,e),t.then(n,n))}function yw(n,t,e){var r=n.pingCache;r!==null&&r.delete(t),n.pingedLanes|=n.suspendedLanes&e,n.warmLanes&=~e,ft===n&&(Q&e)===e&&(Tt===4||Tt===3&&(Q&62914560)===Q&&300>bn()-Wd?!(it&2)&&bs(n,0):_d|=e,vs===Q&&(vs=0)),kn(n)}function k0(n,t){t===0&&(t=Ep()),n=Js(n,t),n!==null&&(el(n,t),kn(n))}function pw(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),k0(n,e)}function vw(n,t){var e=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(e=i.retryLane);break;case 19:r=n.stateNode;break;case 22:r=n.stateNode._retryCache;break;default:throw Error(N(314))}r!==null&&r.delete(t),k0(n,e)}function Sw(n,t){return pd(n,t)}var ku=null,Ja=null,hh=!1,Cu=!1,mf=!1,ya=0;function kn(n){n!==Ja&&n.next===null&&(Ja===null?ku=Ja=n:Ja=Ja.next=n),Cu=!0,hh||(hh=!0,Tw())}function fl(n,t){if(!mf&&Cu){mf=!0;do for(var e=!1,r=ku;r!==null;){if(n!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var s=r.suspendedLanes,o=r.pingedLanes;a=(1<<31-Se(42|n)+1)-1,a&=i&~(s&~o),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(e=!0,Mm(r,a))}else a=Q,a=gc(r,r===ft?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||tl(r,a)||(e=!0,Mm(r,a));r=r.next}while(e);mf=!1}}function bw(){C0()}function C0(){Cu=hh=!1;var n=0;ya!==0&&(kw()&&(n=ya),ya=0);for(var t=bn(),e=null,r=ku;r!==null;){var i=r.next,a=I0(r,t);a===0?(r.next=null,e===null?ku=i:e.next=i,i===null&&(Ja=e)):(e=r,(n!==0||a&3)&&(Cu=!0)),r=i}fl(n)}function I0(n,t){for(var e=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,a=n.pendingLanes&-62914561;0<a;){var s=31-Se(a),o=1<<s,u=i[s];u===-1?(!(o&e)||o&r)&&(i[s]=Gb(o,t)):u<=t&&(n.expiredLanes|=o),a&=~o}if(t=ft,e=Q,e=gc(n,n===t?e:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),r=n.callbackNode,e===0||n===t&&(rt===2||rt===9)||n.cancelPendingCommit!==null)return r!==null&&r!==null&&Pc(r),n.callbackNode=null,n.callbackPriority=0;if(!(e&3)||tl(n,e)){if(t=e&-e,t===n.callbackPriority)return t;switch(r!==null&&Pc(r),Sd(e)){case 2:case 8:e=Tp;break;case 32:e=fu;break;case 268435456:e=wp;break;default:e=fu}return r=R0.bind(null,n),e=pd(e,r),n.callbackPriority=t,n.callbackNode=e,t}return r!==null&&r!==null&&Pc(r),n.callbackPriority=2,n.callbackNode=null,2}function R0(n,t){if(jt!==0&&jt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var e=n.callbackNode;if(xc()&&n.callbackNode!==e)return null;var r=Q;return r=gc(n,n===ft?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),r===0?null:(v0(n,r,t),I0(n,bn()),n.callbackNode!=null&&n.callbackNode===e?R0.bind(null,n):null)}function Mm(n,t){if(xc())return null;v0(n,t,!0)}function Tw(){Iw(function(){it&6?pd(bp,bw):C0()})}function eg(){return ya===0&&(ya=Ap()),ya}function Um(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:jl(""+n)}function Lm(n,t){var e=t.ownerDocument.createElement("input");return e.name=t.name,e.value=t.value,n.id&&e.setAttribute("form",n.id),t.parentNode.insertBefore(e,t),n=new FormData(n),e.parentNode.removeChild(e),n}function ww(n,t,e,r,i){if(t==="submit"&&e&&e.stateNode===i){var a=Um((i[le]||null).action),s=r.submitter;s&&(t=(t=s[le]||null)?Um(t.formAction):s.getAttribute("formAction"),t!==null&&(a=t,s=null));var o=new mc("action","action",null,r,i);n.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(ya!==0){var u=s?Lm(i,s):new FormData(i);eh(e,{pending:!0,data:u,method:i.method,action:a},null,u)}}else typeof a=="function"&&(o.preventDefault(),u=s?Lm(i,s):new FormData(i),eh(e,{pending:!0,data:u,method:i.method,action:a},a,u))},currentTarget:i}]})}}for(var yf=0;yf<Kf.length;yf++){var pf=Kf[yf],Aw=pf.toLowerCase(),Ew=pf[0].toUpperCase()+pf.slice(1);sn(Aw,"on"+Ew)}sn(Yp,"onAnimationEnd");sn(Xp,"onAnimationIteration");sn(Fp,"onAnimationStart");sn("dblclick","onDoubleClick");sn("focusin","onFocus");sn("focusout","onBlur");sn(VT,"onTransitionRun");sn(HT,"onTransitionStart");sn(KT,"onTransitionCancel");sn(Zp,"onTransitionEnd");hs("onMouseEnter",["mouseout","mouseover"]);hs("onMouseLeave",["mouseout","mouseover"]);hs("onPointerEnter",["pointerout","pointerover"]);hs("onPointerLeave",["pointerout","pointerover"]);Na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Na("onBeforeInput",["compositionend","keypress","textInput","paste"]);Na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uo));function B0(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var r=n[e],i=r.event;r=r.listeners;t:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],u=o.instance,c=o.currentTarget;if(o=o.listener,u!==a&&i.isPropagationStopped())break t;a=o,i.currentTarget=c;try{a(i)}catch(h){Au(h)}i.currentTarget=null,a=u}else for(s=0;s<r.length;s++){if(o=r[s],u=o.instance,c=o.currentTarget,o=o.listener,u!==a&&i.isPropagationStopped())break t;a=o,i.currentTarget=c;try{a(i)}catch(h){Au(h)}i.currentTarget=null,a=u}}}}function G(n,t){var e=t[Uf];e===void 0&&(e=t[Uf]=new Set);var r=n+"__bubble";e.has(r)||(z0(t,n,2,!1),e.add(r))}function vf(n,t,e){var r=0;t&&(r|=4),z0(e,n,r,t)}var Rl="_reactListening"+Math.random().toString(36).slice(2);function ng(n){if(!n[Rl]){n[Rl]=!0,Op.forEach(function(e){e!=="selectionchange"&&(Nw.has(e)||vf(e,!1,n),vf(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[Rl]||(t[Rl]=!0,vf("selectionchange",!1,t))}}function z0(n,t,e,r){switch(G0(t)){case 2:var i=_w;break;case 8:i=Ww;break;default:i=sg}e=i.bind(null,t,e,n),i=void 0,!Pf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(t,e,{capture:!0,passive:i}):n.addEventListener(t,e,!0):i!==void 0?n.addEventListener(t,e,{passive:i}):n.addEventListener(t,e,!1)}function Sf(n,t,e,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)t:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;o!==null;){if(s=Ka(o),s===null)return;if(u=s.tag,u===5||u===6||u===26||u===27){r=a=s;continue t}o=o.parentNode}}r=r.return}Up(function(){var c=a,h=wd(e),m=[];t:{var d=Qp.get(n);if(d!==void 0){var g=mc,T=n;switch(n){case"keypress":if(Gl(e)===0)break t;case"keydown":case"keyup":g=ST;break;case"focusin":T="focus",g=Xc;break;case"focusout":T="blur",g=Xc;break;case"beforeblur":case"afterblur":g=Xc;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=jg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=oT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=wT;break;case Yp:case Xp:case Fp:g=cT;break;case Zp:g=ET;break;case"scroll":case"scrollend":g=aT;break;case"wheel":g=xT;break;case"copy":case"cut":case"paste":g=hT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Gg;break;case"toggle":case"beforetoggle":g=OT}var A=(t&4)!==0,x=!A&&(n==="scroll"||n==="scrollend"),p=A?d!==null?d+"Capture":null:d;A=[];for(var y=c,v;y!==null;){var w=y;if(v=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||v===null||p===null||(w=Co(y,p),w!=null&&A.push(Lo(y,w,v))),x)break;y=y.return}0<A.length&&(d=new g(d,T,null,e,h),m.push({event:d,listeners:A}))}}if(!(t&7)){t:{if(d=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",d&&e!==qf&&(T=e.relatedTarget||e.fromElement)&&(Ka(T)||T[Us]))break t;if((g||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,g?(T=e.relatedTarget||e.toElement,g=c,T=T?Ka(T):null,T!==null&&(x=_o(T),A=T.tag,T!==x||A!==5&&A!==27&&A!==6)&&(T=null)):(g=null,T=c),g!==T)){if(A=jg,w="onMouseLeave",p="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(A=Gg,w="onPointerLeave",p="onPointerEnter",y="pointer"),x=g==null?d:eo(g),v=T==null?d:eo(T),d=new A(w,y+"leave",g,e,h),d.target=x,d.relatedTarget=v,w=null,Ka(h)===c&&(A=new A(p,y+"enter",T,e,h),A.target=v,A.relatedTarget=x,w=A),x=w,g&&T)e:{for(A=g,p=T,y=0,v=A;v;v=Ia(v))y++;for(v=0,w=p;w;w=Ia(w))v++;for(;0<y-v;)A=Ia(A),y--;for(;0<v-y;)p=Ia(p),v--;for(;y--;){if(A===p||p!==null&&A===p.alternate)break e;A=Ia(A),p=Ia(p)}A=null}else A=null;g!==null&&Jm(m,d,g,A,!1),T!==null&&x!==null&&Jm(m,x,T,A,!0)}}t:{if(d=c?eo(c):window,g=d.nodeName&&d.nodeName.toLowerCase(),g==="select"||g==="input"&&d.type==="file")var k=Zg;else if(Fg(d))if(Hp)k=JT;else{k=UT;var I=MT}else g=d.nodeName,!g||g.toLowerCase()!=="input"||d.type!=="checkbox"&&d.type!=="radio"?c&&Td(c.elementType)&&(k=Zg):k=LT;if(k&&(k=k(n,c))){Vp(m,k,e,h);break t}I&&I(n,d,c),n==="focusout"&&c&&d.type==="number"&&c.memoizedProps.value!=null&&Jf(d,"number",d.value)}switch(I=c?eo(c):window,n){case"focusin":(Fg(I)||I.contentEditable==="true")&&(Ga=I,Vf=c,uo=null);break;case"focusout":uo=Vf=Ga=null;break;case"mousedown":Hf=!0;break;case"contextmenu":case"mouseup":case"dragend":Hf=!1,em(m,e,h);break;case"selectionchange":if(PT)break;case"keydown":case"keyup":em(m,e,h)}var C;if(Nd)t:{switch(n){case"compositionstart":var R="onCompositionStart";break t;case"compositionend":R="onCompositionEnd";break t;case"compositionupdate":R="onCompositionUpdate";break t}R=void 0}else $a?qp(n,e)&&(R="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(R="onCompositionStart");R&&(Jp&&e.locale!=="ko"&&($a||R!=="onCompositionStart"?R==="onCompositionEnd"&&$a&&(C=Lp()):(Ri=h,Ad="value"in Ri?Ri.value:Ri.textContent,$a=!0)),I=Iu(c,R),0<I.length&&(R=new $g(R,n,null,e,h),m.push({event:R,listeners:I}),C?R.data=C:(C=Pp(e),C!==null&&(R.data=C)))),(C=CT?IT(n,e):RT(n,e))&&(R=Iu(c,"onBeforeInput"),0<R.length&&(I=new $g("onBeforeInput","beforeinput",null,e,h),m.push({event:I,listeners:R}),I.data=C)),ww(m,n,c,e,h)}B0(m,t)})}function Lo(n,t,e){return{instance:n,listener:t,currentTarget:e}}function Iu(n,t){for(var e=t+"Capture",r=[];n!==null;){var i=n,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=Co(n,e),i!=null&&r.unshift(Lo(n,i,a)),i=Co(n,t),i!=null&&r.push(Lo(n,i,a))),n.tag===3)return r;n=n.return}return[]}function Ia(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Jm(n,t,e,r,i){for(var a=t._reactName,s=[];e!==null&&e!==r;){var o=e,u=o.alternate,c=o.stateNode;if(o=o.tag,u!==null&&u===r)break;o!==5&&o!==26&&o!==27||c===null||(u=c,i?(c=Co(e,a),c!=null&&s.unshift(Lo(e,c,u))):i||(c=Co(e,a),c!=null&&s.push(Lo(e,c,u)))),e=e.return}s.length!==0&&n.push({event:t,listeners:s})}var xw=/\r\n?/g,Dw=/\u0000|\uFFFD/g;function qm(n){return(typeof n=="string"?n:""+n).replace(xw,`
`).replace(Dw,"")}function M0(n,t){return t=qm(t),qm(n)===t}function Dc(){}function at(n,t,e,r,i,a){switch(e){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||ds(n,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&ds(n,""+r);break;case"className":Nl(n,"class",r);break;case"tabIndex":Nl(n,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Nl(n,e,r);break;case"style":Mp(n,r,a);break;case"data":if(t!=="object"){Nl(n,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||e!=="href")){n.removeAttribute(e);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){n.removeAttribute(e);break}r=jl(""+r),n.setAttribute(e,r);break;case"action":case"formAction":if(typeof r=="function"){n.setAttribute(e,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(e==="formAction"?(t!=="input"&&at(n,t,"name",i.name,i,null),at(n,t,"formEncType",i.formEncType,i,null),at(n,t,"formMethod",i.formMethod,i,null),at(n,t,"formTarget",i.formTarget,i,null)):(at(n,t,"encType",i.encType,i,null),at(n,t,"method",i.method,i,null),at(n,t,"target",i.target,i,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){n.removeAttribute(e);break}r=jl(""+r),n.setAttribute(e,r);break;case"onClick":r!=null&&(n.onclick=Dc);break;case"onScroll":r!=null&&G("scroll",n);break;case"onScrollEnd":r!=null&&G("scrollend",n);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(N(61));if(e=r.__html,e!=null){if(i.children!=null)throw Error(N(60));n.innerHTML=e}}break;case"multiple":n.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":n.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){n.removeAttribute("xlink:href");break}e=jl(""+r),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?n.setAttribute(e,""+r):n.removeAttribute(e);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?n.setAttribute(e,""):n.removeAttribute(e);break;case"capture":case"download":r===!0?n.setAttribute(e,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?n.setAttribute(e,r):n.removeAttribute(e);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?n.setAttribute(e,r):n.removeAttribute(e);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?n.removeAttribute(e):n.setAttribute(e,r);break;case"popover":G("beforetoggle",n),G("toggle",n),Kl(n,"popover",r);break;case"xlinkActuate":Cn(n,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Cn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Cn(n,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Cn(n,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Cn(n,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Cn(n,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Cn(n,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Cn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Cn(n,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Kl(n,"is",r);break;case"innerText":case"textContent":break;default:(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(e=rT.get(e)||e,Kl(n,e,r))}}function dh(n,t,e,r,i,a){switch(e){case"style":Mp(n,r,a);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(N(61));if(e=r.__html,e!=null){if(i.children!=null)throw Error(N(60));n.innerHTML=e}}break;case"children":typeof r=="string"?ds(n,r):(typeof r=="number"||typeof r=="bigint")&&ds(n,""+r);break;case"onScroll":r!=null&&G("scroll",n);break;case"onScrollEnd":r!=null&&G("scrollend",n);break;case"onClick":r!=null&&(n.onclick=Dc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!kp.hasOwnProperty(e))t:{if(e[0]==="o"&&e[1]==="n"&&(i=e.endsWith("Capture"),t=e.slice(2,i?e.length-7:void 0),a=n[le]||null,a=a!=null?a[e]:null,typeof a=="function"&&n.removeEventListener(t,a,i),typeof r=="function")){typeof a!="function"&&a!==null&&(e in n?n[e]=null:n.hasAttribute(e)&&n.removeAttribute(e)),n.addEventListener(t,r,i);break t}e in n?n[e]=r:r===!0?n.setAttribute(e,""):Kl(n,e,r)}}}function Gt(n,t,e){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":G("error",n),G("load",n);var r=!1,i=!1,a;for(a in e)if(e.hasOwnProperty(a)){var s=e[a];if(s!=null)switch(a){case"src":r=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(N(137,t));default:at(n,t,a,s,e,null)}}i&&at(n,t,"srcSet",e.srcSet,e,null),r&&at(n,t,"src",e.src,e,null);return;case"input":G("invalid",n);var o=a=s=i=null,u=null,c=null;for(r in e)if(e.hasOwnProperty(r)){var h=e[r];if(h!=null)switch(r){case"name":i=h;break;case"type":s=h;break;case"checked":u=h;break;case"defaultChecked":c=h;break;case"value":a=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(N(137,t));break;default:at(n,t,r,h,e,null)}}Rp(n,a,o,u,c,s,i,!1),hu(n);return;case"select":G("invalid",n),r=s=a=null;for(i in e)if(e.hasOwnProperty(i)&&(o=e[i],o!=null))switch(i){case"value":a=o;break;case"defaultValue":s=o;break;case"multiple":r=o;default:at(n,t,i,o,e,null)}t=a,e=s,n.multiple=!!r,t!=null?ns(n,!!r,t,!1):e!=null&&ns(n,!!r,e,!0);return;case"textarea":G("invalid",n),a=i=r=null;for(s in e)if(e.hasOwnProperty(s)&&(o=e[s],o!=null))switch(s){case"value":r=o;break;case"defaultValue":i=o;break;case"children":a=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(N(91));break;default:at(n,t,s,o,e,null)}zp(n,r,i,a),hu(n);return;case"option":for(u in e)if(e.hasOwnProperty(u)&&(r=e[u],r!=null))switch(u){case"selected":n.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:at(n,t,u,r,e,null)}return;case"dialog":G("beforetoggle",n),G("toggle",n),G("cancel",n),G("close",n);break;case"iframe":case"object":G("load",n);break;case"video":case"audio":for(r=0;r<Uo.length;r++)G(Uo[r],n);break;case"image":G("error",n),G("load",n);break;case"details":G("toggle",n);break;case"embed":case"source":case"link":G("error",n),G("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in e)if(e.hasOwnProperty(c)&&(r=e[c],r!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(N(137,t));default:at(n,t,c,r,e,null)}return;default:if(Td(t)){for(h in e)e.hasOwnProperty(h)&&(r=e[h],r!==void 0&&dh(n,t,h,r,e,void 0));return}}for(o in e)e.hasOwnProperty(o)&&(r=e[o],r!=null&&at(n,t,o,r,e,null))}function Ow(n,t,e,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,s=null,o=null,u=null,c=null,h=null;for(g in e){var m=e[g];if(e.hasOwnProperty(g)&&m!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":u=m;default:r.hasOwnProperty(g)||at(n,t,g,null,r,m)}}for(var d in r){var g=r[d];if(m=e[d],r.hasOwnProperty(d)&&(g!=null||m!=null))switch(d){case"type":a=g;break;case"name":i=g;break;case"checked":c=g;break;case"defaultChecked":h=g;break;case"value":s=g;break;case"defaultValue":o=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(N(137,t));break;default:g!==m&&at(n,t,d,g,r,m)}}Lf(n,s,o,u,c,h,a,i);return;case"select":g=s=o=d=null;for(a in e)if(u=e[a],e.hasOwnProperty(a)&&u!=null)switch(a){case"value":break;case"multiple":g=u;default:r.hasOwnProperty(a)||at(n,t,a,null,r,u)}for(i in r)if(a=r[i],u=e[i],r.hasOwnProperty(i)&&(a!=null||u!=null))switch(i){case"value":d=a;break;case"defaultValue":o=a;break;case"multiple":s=a;default:a!==u&&at(n,t,i,a,r,u)}t=o,e=s,r=g,d!=null?ns(n,!!e,d,!1):!!r!=!!e&&(t!=null?ns(n,!!e,t,!0):ns(n,!!e,e?[]:"",!1));return;case"textarea":g=d=null;for(o in e)if(i=e[o],e.hasOwnProperty(o)&&i!=null&&!r.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:at(n,t,o,null,r,i)}for(s in r)if(i=r[s],a=e[s],r.hasOwnProperty(s)&&(i!=null||a!=null))switch(s){case"value":d=i;break;case"defaultValue":g=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(N(91));break;default:i!==a&&at(n,t,s,i,r,a)}Bp(n,d,g);return;case"option":for(var T in e)if(d=e[T],e.hasOwnProperty(T)&&d!=null&&!r.hasOwnProperty(T))switch(T){case"selected":n.selected=!1;break;default:at(n,t,T,null,r,d)}for(u in r)if(d=r[u],g=e[u],r.hasOwnProperty(u)&&d!==g&&(d!=null||g!=null))switch(u){case"selected":n.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:at(n,t,u,d,r,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var A in e)d=e[A],e.hasOwnProperty(A)&&d!=null&&!r.hasOwnProperty(A)&&at(n,t,A,null,r,d);for(c in r)if(d=r[c],g=e[c],r.hasOwnProperty(c)&&d!==g&&(d!=null||g!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(N(137,t));break;default:at(n,t,c,d,r,g)}return;default:if(Td(t)){for(var x in e)d=e[x],e.hasOwnProperty(x)&&d!==void 0&&!r.hasOwnProperty(x)&&dh(n,t,x,void 0,r,d);for(h in r)d=r[h],g=e[h],!r.hasOwnProperty(h)||d===g||d===void 0&&g===void 0||dh(n,t,h,d,r,g);return}}for(var p in e)d=e[p],e.hasOwnProperty(p)&&d!=null&&!r.hasOwnProperty(p)&&at(n,t,p,null,r,d);for(m in r)d=r[m],g=e[m],!r.hasOwnProperty(m)||d===g||d==null&&g==null||at(n,t,m,d,r,g)}var gh=null,mh=null;function Ru(n){return n.nodeType===9?n:n.ownerDocument}function Pm(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function U0(n,t){if(n===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&t==="foreignObject"?0:n}function yh(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bf=null;function kw(){var n=window.event;return n&&n.type==="popstate"?n===bf?!1:(bf=n,!0):(bf=null,!1)}var L0=typeof setTimeout=="function"?setTimeout:void 0,Cw=typeof clearTimeout=="function"?clearTimeout:void 0,Vm=typeof Promise=="function"?Promise:void 0,Iw=typeof queueMicrotask=="function"?queueMicrotask:typeof Vm<"u"?function(n){return Vm.resolve(null).then(n).catch(Rw)}:L0;function Rw(n){setTimeout(function(){throw n})}function _i(n){return n==="head"}function Hm(n,t){var e=t,r=0,i=0;do{var a=e.nextSibling;if(n.removeChild(e),a&&a.nodeType===8)if(e=a.data,e==="/$"){if(0<r&&8>r){e=r;var s=n.ownerDocument;if(e&1&&To(s.documentElement),e&2&&To(s.body),e&4)for(e=s.head,To(e),s=e.firstChild;s;){var o=s.nextSibling,u=s.nodeName;s[nl]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&s.rel.toLowerCase()==="stylesheet"||e.removeChild(s),s=o}}if(i===0){n.removeChild(a),Ho(t);return}i--}else e==="$"||e==="$?"||e==="$!"?i++:r=e.charCodeAt(0)-48;else r=0;e=a}while(e);Ho(t)}function ph(n){var t=n.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var e=t;switch(t=t.nextSibling,e.nodeName){case"HTML":case"HEAD":case"BODY":ph(e),bd(e);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(e.rel.toLowerCase()==="stylesheet")continue}n.removeChild(e)}}function Bw(n,t,e,r){for(;n.nodeType===1;){var i=e;if(n.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(r){if(!n[nl])switch(t){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(a=n.getAttribute("rel"),a==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(a!==i.rel||n.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||n.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||n.getAttribute("title")!==(i.title==null?null:i.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(a=n.getAttribute("src"),(a!==(i.src==null?null:i.src)||n.getAttribute("type")!==(i.type==null?null:i.type)||n.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(t==="input"&&n.type==="hidden"){var a=i.name==null?null:""+i.name;if(i.type==="hidden"&&n.getAttribute("name")===a)return n}else return n;if(n=rn(n.nextSibling),n===null)break}return null}function zw(n,t,e){if(t==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!e||(n=rn(n.nextSibling),n===null))return null;return n}function vh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function Mw(n,t){var e=n.ownerDocument;if(n.data!=="$?"||e.readyState==="complete")t();else{var r=function(){t(),e.removeEventListener("DOMContentLoaded",r)};e.addEventListener("DOMContentLoaded",r),n._reactRetry=r}}function rn(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return n}var Sh=null;function Km(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return n;t--}else e==="/$"&&t++}n=n.previousSibling}return null}function J0(n,t,e){switch(t=Ru(e),n){case"html":if(n=t.documentElement,!n)throw Error(N(452));return n;case"head":if(n=t.head,!n)throw Error(N(453));return n;case"body":if(n=t.body,!n)throw Error(N(454));return n;default:throw Error(N(451))}}function To(n){for(var t=n.attributes;t.length;)n.removeAttributeNode(t[0]);bd(n)}var Ye=new Map,jm=new Set;function Bu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var yi=et.d;et.d={f:Uw,r:Lw,D:Jw,C:qw,L:Pw,m:Vw,X:Kw,S:Hw,M:jw};function Uw(){var n=yi.f(),t=Ec();return n||t}function Lw(n){var t=Ls(n);t!==null&&t.tag===5&&t.type==="form"?Iv(t):yi.r(n)}var Ps=typeof document>"u"?null:document;function q0(n,t,e){var r=Ps;if(r&&typeof t=="string"&&t){var i=Je(t);i='link[rel="'+n+'"][href="'+i+'"]',typeof e=="string"&&(i+='[crossorigin="'+e+'"]'),jm.has(i)||(jm.add(i),n={rel:n,crossOrigin:e,href:t},r.querySelector(i)===null&&(t=r.createElement("link"),Gt(t,"link",n),Jt(t),r.head.appendChild(t)))}}function Jw(n){yi.D(n),q0("dns-prefetch",n,null)}function qw(n,t){yi.C(n,t),q0("preconnect",n,t)}function Pw(n,t,e){yi.L(n,t,e);var r=Ps;if(r&&n&&t){var i='link[rel="preload"][as="'+Je(t)+'"]';t==="image"&&e&&e.imageSrcSet?(i+='[imagesrcset="'+Je(e.imageSrcSet)+'"]',typeof e.imageSizes=="string"&&(i+='[imagesizes="'+Je(e.imageSizes)+'"]')):i+='[href="'+Je(n)+'"]';var a=i;switch(t){case"style":a=Ts(n);break;case"script":a=Vs(n)}Ye.has(a)||(n=ht({rel:"preload",href:t==="image"&&e&&e.imageSrcSet?void 0:n,as:t},e),Ye.set(a,n),r.querySelector(i)!==null||t==="style"&&r.querySelector(hl(a))||t==="script"&&r.querySelector(dl(a))||(t=r.createElement("link"),Gt(t,"link",n),Jt(t),r.head.appendChild(t)))}}function Vw(n,t){yi.m(n,t);var e=Ps;if(e&&n){var r=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+Je(r)+'"][href="'+Je(n)+'"]',a=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Vs(n)}if(!Ye.has(a)&&(n=ht({rel:"modulepreload",href:n},t),Ye.set(a,n),e.querySelector(i)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(e.querySelector(dl(a)))return}r=e.createElement("link"),Gt(r,"link",n),Jt(r),e.head.appendChild(r)}}}function Hw(n,t,e){yi.S(n,t,e);var r=Ps;if(r&&n){var i=es(r).hoistableStyles,a=Ts(n);t=t||"default";var s=i.get(a);if(!s){var o={loading:0,preload:null};if(s=r.querySelector(hl(a)))o.loading=5;else{n=ht({rel:"stylesheet",href:n,"data-precedence":t},e),(e=Ye.get(a))&&rg(n,e);var u=s=r.createElement("link");Jt(u),Gt(u,"link",n),u._p=new Promise(function(c,h){u.onload=c,u.onerror=h}),u.addEventListener("load",function(){o.loading|=1}),u.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Wl(s,t,r)}s={type:"stylesheet",instance:s,count:1,state:o},i.set(a,s)}}}function Kw(n,t){yi.X(n,t);var e=Ps;if(e&&n){var r=es(e).hoistableScripts,i=Vs(n),a=r.get(i);a||(a=e.querySelector(dl(i)),a||(n=ht({src:n,async:!0},t),(t=Ye.get(i))&&ig(n,t),a=e.createElement("script"),Jt(a),Gt(a,"link",n),e.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}function jw(n,t){yi.M(n,t);var e=Ps;if(e&&n){var r=es(e).hoistableScripts,i=Vs(n),a=r.get(i);a||(a=e.querySelector(dl(i)),a||(n=ht({src:n,async:!0,type:"module"},t),(t=Ye.get(i))&&ig(n,t),a=e.createElement("script"),Jt(a),Gt(a,"link",n),e.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}function $m(n,t,e,r){var i=(i=Ui.current)?Bu(i):null;if(!i)throw Error(N(446));switch(n){case"meta":case"title":return null;case"style":return typeof e.precedence=="string"&&typeof e.href=="string"?(t=Ts(e.href),e=es(i).hoistableStyles,r=e.get(t),r||(r={type:"style",instance:null,count:0,state:null},e.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(e.rel==="stylesheet"&&typeof e.href=="string"&&typeof e.precedence=="string"){n=Ts(e.href);var a=es(i).hoistableStyles,s=a.get(n);if(s||(i=i.ownerDocument||i,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(n,s),(a=i.querySelector(hl(n)))&&!a._p&&(s.instance=a,s.state.loading=5),Ye.has(n)||(e={rel:"preload",as:"style",href:e.href,crossOrigin:e.crossOrigin,integrity:e.integrity,media:e.media,hrefLang:e.hrefLang,referrerPolicy:e.referrerPolicy},Ye.set(n,e),a||$w(i,n,e,s.state))),t&&r===null)throw Error(N(528,""));return s}if(t&&r!==null)throw Error(N(529,""));return null;case"script":return t=e.async,e=e.src,typeof e=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Vs(e),e=es(i).hoistableScripts,r=e.get(t),r||(r={type:"script",instance:null,count:0,state:null},e.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(N(444,n))}}function Ts(n){return'href="'+Je(n)+'"'}function hl(n){return'link[rel="stylesheet"]['+n+"]"}function P0(n){return ht({},n,{"data-precedence":n.precedence,precedence:null})}function $w(n,t,e,r){n.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=n.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),Gt(t,"link",e),Jt(t),n.head.appendChild(t))}function Vs(n){return'[src="'+Je(n)+'"]'}function dl(n){return"script[async]"+n}function Gm(n,t,e){if(t.count++,t.instance===null)switch(t.type){case"style":var r=n.querySelector('style[data-href~="'+Je(e.href)+'"]');if(r)return t.instance=r,Jt(r),r;var i=ht({},e,{"data-href":e.href,"data-precedence":e.precedence,href:null,precedence:null});return r=(n.ownerDocument||n).createElement("style"),Jt(r),Gt(r,"style",i),Wl(r,e.precedence,n),t.instance=r;case"stylesheet":i=Ts(e.href);var a=n.querySelector(hl(i));if(a)return t.state.loading|=4,t.instance=a,Jt(a),a;r=P0(e),(i=Ye.get(i))&&rg(r,i),a=(n.ownerDocument||n).createElement("link"),Jt(a);var s=a;return s._p=new Promise(function(o,u){s.onload=o,s.onerror=u}),Gt(a,"link",r),t.state.loading|=4,Wl(a,e.precedence,n),t.instance=a;case"script":return a=Vs(e.src),(i=n.querySelector(dl(a)))?(t.instance=i,Jt(i),i):(r=e,(i=Ye.get(a))&&(r=ht({},e),ig(r,i)),n=n.ownerDocument||n,i=n.createElement("script"),Jt(i),Gt(i,"link",r),n.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(N(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,Wl(r,e.precedence,n));return t.instance}function Wl(n,t,e){for(var r=e.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,a=i,s=0;s<r.length;s++){var o=r[s];if(o.dataset.precedence===t)a=o;else if(a!==i)break}a?a.parentNode.insertBefore(n,a.nextSibling):(t=e.nodeType===9?e.head:e,t.insertBefore(n,t.firstChild))}function rg(n,t){n.crossOrigin==null&&(n.crossOrigin=t.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=t.referrerPolicy),n.title==null&&(n.title=t.title)}function ig(n,t){n.crossOrigin==null&&(n.crossOrigin=t.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=t.referrerPolicy),n.integrity==null&&(n.integrity=t.integrity)}var tu=null;function Ym(n,t,e){if(tu===null){var r=new Map,i=tu=new Map;i.set(e,r)}else i=tu,r=i.get(e),r||(r=new Map,i.set(e,r));if(r.has(n))return r;for(r.set(n,null),e=e.getElementsByTagName(n),i=0;i<e.length;i++){var a=e[i];if(!(a[nl]||a[Xt]||n==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var s=a.getAttribute(t)||"";s=n+s;var o=r.get(s);o?o.push(a):r.set(s,[a])}}return r}function Xm(n,t,e){n=n.ownerDocument||n,n.head.insertBefore(e,t==="title"?n.querySelector("head > title"):null)}function Gw(n,t,e){if(e===1||t.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return n=t.disabled,typeof t.precedence=="string"&&n==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function V0(n){return!(n.type==="stylesheet"&&!(n.state.loading&3))}var Jo=null;function Yw(){}function Xw(n,t,e){if(Jo===null)throw Error(N(475));var r=Jo;if(t.type==="stylesheet"&&(typeof e.media!="string"||matchMedia(e.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var i=Ts(e.href),a=n.querySelector(hl(i));if(a){n=a._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(r.count++,r=zu.bind(r),n.then(r,r)),t.state.loading|=4,t.instance=a,Jt(a);return}a=n.ownerDocument||n,e=P0(e),(i=Ye.get(i))&&rg(e,i),a=a.createElement("link"),Jt(a);var s=a;s._p=new Promise(function(o,u){s.onload=o,s.onerror=u}),Gt(a,"link",e),t.instance=a}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(t,n),(n=t.state.preload)&&!(t.state.loading&3)&&(r.count++,t=zu.bind(r),n.addEventListener("load",t),n.addEventListener("error",t))}}function Fw(){if(Jo===null)throw Error(N(475));var n=Jo;return n.stylesheets&&n.count===0&&bh(n,n.stylesheets),0<n.count?function(t){var e=setTimeout(function(){if(n.stylesheets&&bh(n,n.stylesheets),n.unsuspend){var r=n.unsuspend;n.unsuspend=null,r()}},6e4);return n.unsuspend=t,function(){n.unsuspend=null,clearTimeout(e)}}:null}function zu(){if(this.count--,this.count===0){if(this.stylesheets)bh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Mu=null;function bh(n,t){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Mu=new Map,t.forEach(Zw,n),Mu=null,zu.call(n))}function Zw(n,t){if(!(t.state.loading&4)){var e=Mu.get(n);if(e)var r=e.get(null);else{e=new Map,Mu.set(n,e);for(var i=n.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var s=i[a];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(e.set(s.dataset.precedence,s),r=s)}r&&e.set(null,r)}i=t.instance,s=i.getAttribute("data-precedence"),a=e.get(s)||r,a===r&&e.set(null,i),e.set(s,i),this.count++,r=zu.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),a?a.parentNode.insertBefore(i,a.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(i,n.firstChild)),t.state.loading|=4}}var qo={$$typeof:_r,Provider:null,Consumer:null,_currentValue:ca,_currentValue2:ca,_threadCount:0};function Qw(n,t,e,r,i,a,s,o){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vc(0),this.hiddenUpdates=Vc(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function H0(n,t,e,r,i,a,s,o,u,c,h,m){return n=new Qw(n,t,e,s,o,u,c,m),t=1,a===!0&&(t|=24),a=me(3,null,null,t),n.current=a,a.stateNode=n,t=Rd(),t.refCount++,n.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:e,cache:t},zd(a),n}function K0(n){return n?(n=Fa,n):Fa}function j0(n,t,e,r,i,a){i=K0(i),r.context===null?r.context=i:r.pendingContext=i,r=Li(t),r.payload={element:e},a=a===void 0?null:a,a!==null&&(r.callback=a),e=Ji(n,r,t),e!==null&&(Te(e,n,t),ho(e,n,t))}function Fm(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function ag(n,t){Fm(n,t),(n=n.alternate)&&Fm(n,t)}function $0(n){if(n.tag===13){var t=Js(n,67108864);t!==null&&Te(t,n,67108864),ag(n,67108864)}}var Uu=!0;function _w(n,t,e,r){var i=q.T;q.T=null;var a=et.p;try{et.p=2,sg(n,t,e,r)}finally{et.p=a,q.T=i}}function Ww(n,t,e,r){var i=q.T;q.T=null;var a=et.p;try{et.p=8,sg(n,t,e,r)}finally{et.p=a,q.T=i}}function sg(n,t,e,r){if(Uu){var i=Th(r);if(i===null)Sf(n,t,r,Lu,e),Zm(n,r);else if(eA(i,n,t,e,r))r.stopPropagation();else if(Zm(n,r),t&4&&-1<tA.indexOf(n)){for(;i!==null;){var a=Ls(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var s=ra(a.pendingLanes);if(s!==0){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var u=1<<31-Se(s);o.entanglements[1]|=u,s&=~u}kn(a),!(it&6)&&(Du=bn()+500,fl(0))}}break;case 13:o=Js(a,2),o!==null&&Te(o,a,2),Ec(),ag(a,2)}if(a=Th(r),a===null&&Sf(n,t,r,Lu,e),a===i)break;i=a}i!==null&&r.stopPropagation()}else Sf(n,t,r,null,e)}}function Th(n){return n=wd(n),og(n)}var Lu=null;function og(n){if(Lu=null,n=Ka(n),n!==null){var t=_o(n);if(t===null)n=null;else{var e=t.tag;if(e===13){if(n=yp(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null)}}return Lu=n,null}function G0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qb()){case bp:return 2;case Tp:return 8;case fu:case Pb:return 32;case wp:return 268435456;default:return 32}default:return 32}}var wh=!1,Vi=null,Hi=null,Ki=null,Po=new Map,Vo=new Map,ki=[],tA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zm(n,t){switch(n){case"focusin":case"focusout":Vi=null;break;case"dragenter":case"dragleave":Hi=null;break;case"mouseover":case"mouseout":Ki=null;break;case"pointerover":case"pointerout":Po.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vo.delete(t.pointerId)}}function Fs(n,t,e,r,i,a){return n===null||n.nativeEvent!==a?(n={blockedOn:t,domEventName:e,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Ls(t),t!==null&&$0(t)),n):(n.eventSystemFlags|=r,t=n.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),n)}function eA(n,t,e,r,i){switch(t){case"focusin":return Vi=Fs(Vi,n,t,e,r,i),!0;case"dragenter":return Hi=Fs(Hi,n,t,e,r,i),!0;case"mouseover":return Ki=Fs(Ki,n,t,e,r,i),!0;case"pointerover":var a=i.pointerId;return Po.set(a,Fs(Po.get(a)||null,n,t,e,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Vo.set(a,Fs(Vo.get(a)||null,n,t,e,r,i)),!0}return!1}function Y0(n){var t=Ka(n.target);if(t!==null){var e=_o(t);if(e!==null){if(t=e.tag,t===13){if(t=yp(e),t!==null){n.blockedOn=t,Xb(n.priority,function(){if(e.tag===13){var r=be();r=vd(r);var i=Js(e,r);i!==null&&Te(i,e,r),ag(e,r)}});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function eu(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=Th(n.nativeEvent);if(e===null){e=n.nativeEvent;var r=new e.constructor(e.type,e);qf=r,e.target.dispatchEvent(r),qf=null}else return t=Ls(e),t!==null&&$0(t),n.blockedOn=e,!1;t.shift()}return!0}function Qm(n,t,e){eu(n)&&e.delete(t)}function nA(){wh=!1,Vi!==null&&eu(Vi)&&(Vi=null),Hi!==null&&eu(Hi)&&(Hi=null),Ki!==null&&eu(Ki)&&(Ki=null),Po.forEach(Qm),Vo.forEach(Qm)}function Bl(n,t){n.blockedOn===t&&(n.blockedOn=null,wh||(wh=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,nA)))}var zl=null;function _m(n){zl!==n&&(zl=n,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,function(){zl===n&&(zl=null);for(var t=0;t<n.length;t+=3){var e=n[t],r=n[t+1],i=n[t+2];if(typeof r!="function"){if(og(r||e)===null)continue;break}var a=Ls(e);a!==null&&(n.splice(t,3),t-=3,eh(a,{pending:!0,data:i,method:e.method,action:r},r,i))}}))}function Ho(n){function t(u){return Bl(u,n)}Vi!==null&&Bl(Vi,n),Hi!==null&&Bl(Hi,n),Ki!==null&&Bl(Ki,n),Po.forEach(t),Vo.forEach(t);for(var e=0;e<ki.length;e++){var r=ki[e];r.blockedOn===n&&(r.blockedOn=null)}for(;0<ki.length&&(e=ki[0],e.blockedOn===null);)Y0(e),e.blockedOn===null&&ki.shift();if(e=(n.ownerDocument||n).$$reactFormReplay,e!=null)for(r=0;r<e.length;r+=3){var i=e[r],a=e[r+1],s=i[le]||null;if(typeof a=="function")s||_m(e);else if(s){var o=null;if(a&&a.hasAttribute("formAction")){if(i=a,s=a[le]||null)o=s.formAction;else if(og(i)!==null)continue}else o=s.action;typeof o=="function"?e[r+1]=o:(e.splice(r,3),r-=3),_m(e)}}}function lg(n){this._internalRoot=n}Oc.prototype.render=lg.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(N(409));var e=t.current,r=be();j0(e,r,n,t,null,null)};Oc.prototype.unmount=lg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;j0(n.current,2,null,n,null,null),Ec(),t[Us]=null}};function Oc(n){this._internalRoot=n}Oc.prototype.unstable_scheduleHydration=function(n){if(n){var t=Dp();n={blockedOn:null,target:n,priority:t};for(var e=0;e<ki.length&&t!==0&&t<ki[e].priority;e++);ki.splice(e,0,n),e===0&&Y0(n)}};var Wm=gp.version;if(Wm!=="19.1.0")throw Error(N(527,Wm,"19.1.0"));et.findDOMNode=function(n){var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(N(188)):(n=Object.keys(n).join(","),Error(N(268,n)));return n=Rb(t),n=n!==null?pp(n):null,n=n===null?null:n.stateNode,n};var rA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ml.isDisabled&&Ml.supportsFiber)try{Wo=Ml.inject(rA),ve=Ml}catch{}}hc.createRoot=function(n,t){if(!mp(n))throw Error(N(299));var e=!1,r="",i=Hv,a=Kv,s=jv,o=null;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(s=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(o=t.unstable_transitionCallbacks)),t=H0(n,1,!1,null,null,e,r,i,a,s,o,null),n[Us]=t.current,ng(n),new lg(t)};hc.hydrateRoot=function(n,t,e){if(!mp(n))throw Error(N(299));var r=!1,i="",a=Hv,s=Kv,o=jv,u=null,c=null;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(a=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(u=e.unstable_transitionCallbacks),e.formState!==void 0&&(c=e.formState)),t=H0(n,1,!0,t,e??null,r,i,a,s,o,u,c),t.context=K0(null),e=t.current,r=be(),r=vd(r),i=Li(r),i.callback=null,Ji(e,i,r),e=r,t.current.lanes=e,el(t,e),kn(t),n[Us]=t.current,ng(n),new Oc(t)};hc.version="19.1.0";function X0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(X0)}catch(n){console.error(n)}}X0(),ep.exports=hc;var iA=ep.exports;const aA=_y(iA),sA=n=>{const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},e=/[&<>"'/]/gi;return n.replace(e,r=>t[r])};function F0({onSave:n,placeholder:t}){const[e,r]=ut.useState("");return W.jsx("input",{className:"new-todo",type:"text",placeholder:t,value:e,onChange:i=>{r(i.target.value)},onKeyDown:i=>{i.key==="Enter"&&(n(sA(e.trim())),r(""))}})}function oA({dispatch:n}){const t=e=>{n({type:"ADDED_TODO",payload:{text:e}})};return W.jsxs("header",{className:"header",children:[W.jsx("h1",{children:"todos"}),W.jsx(F0,{onSave:e=>{e.length!==0&&t(e)},placeholder:"What needs to be done?"})]})}var Z0={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var t={}.hasOwnProperty;function e(){for(var a="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(a=i(a,r(o)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return e.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var s="";for(var o in a)t.call(a,o)&&a[o]&&(s=i(s,o));return s}function i(a,s){return s?a?a+" "+s:a+s:a}n.exports?(e.default=e,n.exports=e):window.classNames=e})()})(Z0);var lA=Z0.exports;const Q0=_y(lA),ty={SHOW_ALL:"All",SHOW_ACTIVE:"Active",SHOW_COMPLETED:"Completed"};function uA({completedCount:n,activeCount:t,filter:e,onClearCompleted:r,onShow:i}){return W.jsxs("footer",{className:"footer",children:[W.jsxs("span",{className:"todo-count",children:[W.jsx("strong",{children:t||"No"}),"",t===1?"item":"items"," left"]}),W.jsx("ul",{className:"filters",children:Object.keys(ty).map(a=>W.jsx("li",{children:W.jsx("button",{type:"button",className:Q0({selected:a===e}),style:{cursor:"pointer"},onClick:()=>i(a),children:ty[a]})},a))}),!!n&&W.jsx("button",{type:"button",className:"clear-completed",onClick:r,children:"Clear completed"})]})}function cA({todo:n,dispatch:t}){const[e,r]=ut.useState(!1),i=o=>{t({type:"DELETED_TODO",payload:{id:o}})},a=(o,u)=>{t({type:"EDITED_TODO",payload:{id:o,text:u}})},s=o=>{t({type:"COMPLETED_TODO",payload:{id:o}})};return W.jsx("li",{className:Q0({completed:n.completed,editing:e}),children:e?W.jsx(F0,{editing:e,onSave:o=>{o.length===0?i(n.id):a(n.id,o),r(!1)}}):W.jsxs("div",{className:"view",children:[W.jsx("input",{id:`item-input-${n.id}`,className:"toggle",type:"checkbox",checked:n.completed,onChange:()=>s(n.id)}),W.jsx("label",{htmlFor:`item-input-${n.id}`,onDoubleClick:()=>r(!0),children:n.text}),W.jsx("button",{type:"button","aria-label":"Delete",className:"destroy",onClick:()=>i(n.id)})]})})}const fA={SHOW_ALL:()=>!0,SHOW_ACTIVE:n=>!n.completed,SHOW_COMPLETED:n=>n.completed};function hA({todos:n,dispatch:t}){const[e,r]=ut.useState("SHOW_ALL"),i=n.filter(fA[e]),a=n.filter(c=>c.completed).length,s=n.length-a,o=()=>t({type:"CLEARED_COMPLETED"}),u=()=>t({type:"TOGGLED_ALL"});return n.length===0?null:W.jsxs("section",{className:"main",children:[i.length>0?W.jsxs("div",{className:"toggle-all-container",children:[W.jsx("input",{className:"toggle-all",type:"checkbox",id:"toggle-all",checked:a===n.length,onChange:u}),W.jsx("label",{className:"toggle-all-label",htmlFor:"toggle-all",children:"Mark all as complete"})]}):null,W.jsx("ul",{className:"todo-list",children:i.map(c=>W.jsx(cA,{todo:c,dispatch:t},c.id))}),W.jsx(uA,{completedCount:a,activeCount:s,filter:e,onClearCompleted:o,onShow:r})]})}function dA(n,t){switch(t.type){case"ADDED_TODO":{const{text:e}=t.payload;n.todos.push({id:crypto.randomUUID(),completed:!1,text:e});break}case"DELETED_TODO":{const{id:e}=t.payload;n.todos=n.todos.filter(r=>r.id!==e);break}case"EDITED_TODO":{const{id:e,text:r}=t.payload;n.todos.forEach(i=>{i.id===e&&(i.text=r)});break}case"COMPLETED_TODO":{const{id:e}=t.payload;n.todos.forEach(r=>{r.id===e&&(r.completed=!r.completed)});break}case"CLEARED_COMPLETED":{n.todos=n.todos.filter(e=>!e.completed);break}case"TOGGLED_ALL":{const e=n.todos.every(r=>r.completed);n.todos.forEach(r=>{r.completed=!e});break}}}var X;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(X||(X={}));function ey(n){const t=X[n];return typeof t!="string"?n.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,e=>"_"+e.toLowerCase())}class ot extends Error{constructor(t,e=X.Unknown,r,i,a){super(gA(t,e)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=t,this.code=e,this.metadata=new Headers(r??{}),this.details=i??[],this.cause=a}static from(t,e=X.Unknown){return t instanceof ot?t:t instanceof Error?t.name=="AbortError"?new ot(t.message,X.Canceled):new ot(t.message,e,void 0,void 0,t):new ot(String(t),e,void 0,void 0,t)}static[Symbol.hasInstance](t){return t instanceof Error?Object.getPrototypeOf(t)===ot.prototype?!0:t.name==="ConnectError"&&"code"in t&&typeof t.code=="number"&&"metadata"in t&&"details"in t&&Array.isArray(t.details)&&"rawMessage"in t&&typeof t.rawMessage=="string"&&"cause"in t:!1}findDetails(t){const e="typeName"in t?{findMessage:i=>i===t.typeName?t:void 0}:t,r=[];for(const i of this.details){if("getType"in i){e.findMessage(i.getType().typeName)&&r.push(i);continue}const a=e.findMessage(i.type);if(a)try{r.push(a.fromBinary(i.value))}catch{}}return r}}function gA(n,t){return n.length?`[${ey(t)}] ${n}`:`[${ey(t)}]`}function wt(n,t){if(!n)throw new Error(t)}const mA=34028234663852886e22,yA=-34028234663852886e22,pA=4294967295,vA=2147483647,SA=-2147483648;function nu(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>vA||n<SA)throw new Error("invalid int 32: "+n)}function Ah(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>pA||n<0)throw new Error("invalid uint 32: "+n)}function _0(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>mA||n<yA))throw new Error("invalid float 32: "+n)}const W0=Symbol("@bufbuild/protobuf/enum-type");function bA(n){const t=n[W0];return wt(t,"missing enum type on enum object"),t}function tS(n,t,e,r){n[W0]=eS(t,e.map(i=>({no:i.no,name:i.name,localName:n[i.no]})))}function eS(n,t,e){const r=Object.create(null),i=Object.create(null),a=[];for(const s of t){const o=nS(s);a.push(o),r[s.name]=o,i[s.no]=o}return{typeName:n,values:a,findName(s){return r[s]},findNumber(s){return i[s]}}}function TA(n,t,e){const r={};for(const i of t){const a=nS(i);r[a.localName]=a.no,r[a.no]=a.localName}return tS(r,n,t),r}function nS(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class O{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,e){const r=this.getType(),i=r.runtime.bin,a=i.makeReadOptions(e);return i.readMessage(this,a.readerFactory(t),t.byteLength,a),this}fromJson(t,e){const r=this.getType(),i=r.runtime.json,a=i.makeReadOptions(e);return i.readMessage(r,t,a,this),this}fromJsonString(t,e){let r;try{r=JSON.parse(t)}catch(i){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${i instanceof Error?i.message:String(i)}`)}return this.fromJson(r,e)}toBinary(t){const e=this.getType(),r=e.runtime.bin,i=r.makeWriteOptions(t),a=i.writerFactory();return r.writeMessage(this,a,i),a.finish()}toJson(t){const e=this.getType(),r=e.runtime.json,i=r.makeWriteOptions(t);return r.writeMessage(this,i)}toJsonString(t){var e;const r=this.toJson(t);return JSON.stringify(r,null,(e=t==null?void 0:t.prettySpaces)!==null&&e!==void 0?e:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function wA(n,t,e,r){var i;const a=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:t.substring(t.lastIndexOf(".")+1),s={[a]:function(o){n.util.initFields(this),n.util.initPartial(o,this)}}[a];return Object.setPrototypeOf(s.prototype,new O),Object.assign(s,{runtime:n,typeName:t,fields:n.util.newFieldList(e),fromBinary(o,u){return new s().fromBinary(o,u)},fromJson(o,u){return new s().fromJson(o,u)},fromJsonString(o,u){return new s().fromJsonString(o,u)},equals(o,u){return n.util.equals(s,o,u)}}),s}function AA(){let n=0,t=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(n|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,t]}let e=this.buf[this.pos++];if(n|=(e&15)<<28,t=(e&112)>>4,!(e&128))return this.assertBounds(),[n,t];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,t]}throw new Error("invalid varint")}function Tf(n,t,e){for(let a=0;a<28;a=a+7){const s=n>>>a,o=!(!(s>>>7)&&t==0),u=(o?s|128:s)&255;if(e.push(u),!o)return}const r=n>>>28&15|(t&7)<<4,i=!!(t>>3);if(e.push((i?r|128:r)&255),!!i){for(let a=3;a<31;a=a+7){const s=t>>>a,o=!!(s>>>7),u=(o?s|128:s)&255;if(e.push(u),!o)return}e.push(t>>>31&1)}}const ru=4294967296;function ny(n){const t=n[0]==="-";t&&(n=n.slice(1));const e=1e6;let r=0,i=0;function a(s,o){const u=Number(n.slice(s,o));i*=e,r=r*e+u,r>=ru&&(i=i+(r/ru|0),r=r%ru)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),t?iS(r,i):ug(r,i)}function EA(n,t){let e=ug(n,t);const r=e.hi&2147483648;r&&(e=iS(e.lo,e.hi));const i=rS(e.lo,e.hi);return r?"-"+i:i}function rS(n,t){if({lo:n,hi:t}=NA(n,t),t<=2097151)return String(ru*t+n);const e=n&16777215,r=(n>>>24|t<<8)&16777215,i=t>>16&65535;let a=e+r*6777216+i*6710656,s=r+i*8147497,o=i*2;const u=1e7;return a>=u&&(s+=Math.floor(a/u),a%=u),s>=u&&(o+=Math.floor(s/u),s%=u),o.toString()+ry(s)+ry(a)}function NA(n,t){return{lo:n>>>0,hi:t>>>0}}function ug(n,t){return{lo:n|0,hi:t|0}}function iS(n,t){return t=~t,n?n=~n+1:t+=1,ug(n,t)}const ry=n=>{const t=String(n);return"0000000".slice(t.length)+t};function iy(n,t){if(n>=0){for(;n>127;)t.push(n&127|128),n=n>>>7;t.push(n)}else{for(let e=0;e<9;e++)t.push(n&127|128),n=n>>7;t.push(1)}}function xA(){let n=this.buf[this.pos++],t=n&127;if(!(n&128))return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<7,!(n&128))return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<14,!(n&128))return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<21,!(n&128))return this.assertBounds(),t;n=this.buf[this.pos++],t|=(n&15)<<28;for(let e=5;n&128&&e<10;e++)n=this.buf[this.pos++];if(n&128)throw new Error("invalid varint");return this.assertBounds(),t>>>0}var ay={};function DA(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof ay!="object"||ay.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),a=BigInt("9223372036854775807"),s=BigInt("0"),o=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(u){const c=typeof u=="bigint"?u:BigInt(u);if(c>a||c<i)throw new Error(`int64 invalid: ${u}`);return c},uParse(u){const c=typeof u=="bigint"?u:BigInt(u);if(c>o||c<s)throw new Error(`uint64 invalid: ${u}`);return c},enc(u){return n.setBigInt64(0,this.parse(u),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(u){return n.setBigInt64(0,this.uParse(u),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(u,c){return n.setInt32(0,u,!0),n.setInt32(4,c,!0),n.getBigInt64(0,!0)},uDec(u,c){return n.setInt32(0,u,!0),n.setInt32(4,c,!0),n.getBigUint64(0,!0)}}}const e=i=>wt(/^-?[0-9]+$/.test(i),`int64 invalid: ${i}`),r=i=>wt(/^[0-9]+$/.test(i),`uint64 invalid: ${i}`);return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),e(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),e(i),ny(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),ny(i)},dec(i,a){return EA(i,a)},uDec(i,a){return rS(i,a)}}}const Z=DA();var E;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(E||(E={}));var Zi;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(Zi||(Zi={}));function bi(n,t,e){if(t===e)return!0;if(n==E.BYTES){if(!(t instanceof Uint8Array)||!(e instanceof Uint8Array)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}switch(n){case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return t==e}return!1}function ws(n,t){switch(n){case E.BOOL:return!1;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return t==0?Z.zero:"0";case E.DOUBLE:case E.FLOAT:return 0;case E.BYTES:return new Uint8Array(0);case E.STRING:return"";default:return 0}}function aS(n,t){switch(n){case E.BOOL:return t===!1;case E.STRING:return t==="";case E.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}var Dt;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(Dt||(Dt={}));class OA{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let i=0;i<this.chunks.length;i++)t+=this.chunks[i].length;let e=new Uint8Array(t),r=0;for(let i=0;i<this.chunks.length;i++)e.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],e}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),e=this.stack.pop();if(!e)throw new Error("invalid state, fork stack empty");return this.chunks=e.chunks,this.buf=e.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,e){return this.uint32((t<<3|e)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(Ah(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return nu(t),iy(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let e=this.textEncoder.encode(t);return this.uint32(e.byteLength),this.raw(e)}float(t){_0(t);let e=new Uint8Array(4);return new DataView(e.buffer).setFloat32(0,t,!0),this.raw(e)}double(t){let e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,t,!0),this.raw(e)}fixed32(t){Ah(t);let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t,!0),this.raw(e)}sfixed32(t){nu(t);let e=new Uint8Array(4);return new DataView(e.buffer).setInt32(0,t,!0),this.raw(e)}sint32(t){return nu(t),t=(t<<1^t>>31)>>>0,iy(t,this.buf),this}sfixed64(t){let e=new Uint8Array(8),r=new DataView(e.buffer),i=Z.enc(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(e)}fixed64(t){let e=new Uint8Array(8),r=new DataView(e.buffer),i=Z.uEnc(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(e)}int64(t){let e=Z.enc(t);return Tf(e.lo,e.hi,this.buf),this}sint64(t){let e=Z.enc(t),r=e.hi>>31,i=e.lo<<1^r,a=(e.hi<<1|e.lo>>>31)^r;return Tf(i,a,this.buf),this}uint64(t){let e=Z.uEnc(t);return Tf(e.lo,e.hi,this.buf),this}}class kA{constructor(t,e){this.varint64=AA,this.uint32=xA,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=e??new TextDecoder}tag(){let t=this.uint32(),e=t>>>3,r=t&7;if(e<=0||r<0||r>5)throw new Error("illegal tag: field no "+e+" wire type "+r);return[e,r]}skip(t,e){let r=this.pos;switch(t){case Dt.Varint:for(;this.buf[this.pos++]&128;);break;case Dt.Bit64:this.pos+=4;case Dt.Bit32:this.pos+=4;break;case Dt.LengthDelimited:let i=this.uint32();this.pos+=i;break;case Dt.StartGroup:for(;;){const[a,s]=this.tag();if(s===Dt.EndGroup){if(e!==void 0&&a!==e)throw new Error("invalid end group tag");break}this.skip(s,a)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return Z.dec(...this.varint64())}uint64(){return Z.uDec(...this.varint64())}sint64(){let[t,e]=this.varint64(),r=-(t&1);return t=(t>>>1|(e&1)<<31)^r,e=e>>>1^r,Z.dec(t,e)}bool(){let[t,e]=this.varint64();return t!==0||e!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Z.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Z.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),e=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(e,e+t)}string(){return this.textDecoder.decode(this.bytes())}}function CA(n,t,e,r){let i;return{typeName:t,extendee:e,get field(){if(!i){const a=typeof r=="function"?r():r;a.name=t.split(".").pop(),a.jsonName=`[${t}]`,i=n.util.newFieldList([a]).list()[0]}return i},runtime:n}}function sS(n){const t=n.field.localName,e=Object.create(null);return e[t]=IA(n),[e,()=>e[t]]}function IA(n){const t=n.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return ws(t.T,t.L);case"message":const e=t.T,r=new e;return e.fieldWrapper?e.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function RA(n,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let e=n.length-1;e>=0;--e)if(n[e].no==t.no)return[n[e]];return[]}return n.filter(e=>e.no===t.no)}let Zr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),kc=[];for(let n=0;n<Zr.length;n++)kc[Zr[n].charCodeAt(0)]=n;kc[45]=Zr.indexOf("+");kc[95]=Zr.indexOf("/");const cg={dec(n){let t=n.length*3/4;n[n.length-2]=="="?t-=2:n[n.length-1]=="="&&(t-=1);let e=new Uint8Array(t),r=0,i=0,a,s=0;for(let o=0;o<n.length;o++){if(a=kc[n.charCodeAt(o)],a===void 0)switch(n[o]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:s=a,i=1;break;case 1:e[r++]=s<<2|(a&48)>>4,s=a,i=2;break;case 2:e[r++]=(s&15)<<4|(a&60)>>2,s=a,i=3;break;case 3:e[r++]=(s&3)<<6|a,i=0;break}}if(i==1)throw Error("invalid base64 string.");return e.subarray(0,r)},enc(n){let t="",e=0,r,i=0;for(let a=0;a<n.length;a++)switch(r=n[a],e){case 0:t+=Zr[r>>2],i=(r&3)<<4,e=1;break;case 1:t+=Zr[i|r>>4],i=(r&15)<<2,e=2;break;case 2:t+=Zr[i|r>>6],t+=Zr[r&63],e=0;break}return e&&(t+=Zr[i],t+="=",e==1&&(t+="=")),t}};function BA(n,t,e){lS(t,n);const r=t.runtime.bin.makeReadOptions(e),i=RA(n.getType().runtime.bin.listUnknownFields(n),t.field),[a,s]=sS(t);for(const o of i)t.runtime.bin.readField(a,r.readerFactory(o.data),t.field,o.wireType,r);return s()}function zA(n,t,e,r){lS(t,n);const i=t.runtime.bin.makeReadOptions(r),a=t.runtime.bin.makeWriteOptions(r);if(oS(n,t)){const c=n.getType().runtime.bin.listUnknownFields(n).filter(h=>h.no!=t.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const h of c)n.getType().runtime.bin.onUnknownField(n,h.no,h.wireType,h.data)}const s=a.writerFactory();let o=t.field;!o.opt&&!o.repeated&&(o.kind=="enum"||o.kind=="scalar")&&(o=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(o,e,s,a);const u=i.readerFactory(s.finish());for(;u.pos<u.len;){const[c,h]=u.tag(),m=u.skip(h,c);n.getType().runtime.bin.onUnknownField(n,c,h,m)}}function oS(n,t){const e=n.getType();return t.extendee.typeName===e.typeName&&!!e.runtime.bin.listUnknownFields(n).find(r=>r.no==t.field.no)}function lS(n,t){wt(n.extendee.typeName==t.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function uS(n,t){const e=n.localName;if(n.repeated)return t[e].length>0;if(n.oneof)return t[n.oneof.localName].case===e;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?t[e]!==void 0:n.kind=="enum"?t[e]!==n.T.values[0].no:!aS(n.T,t[e]);case"message":return t[e]!==void 0;case"map":return Object.keys(t[e]).length>0}}function sy(n,t){const e=n.localName,r=!n.opt&&!n.req;if(n.repeated)t[e]=[];else if(n.oneof)t[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":t[e]={};break;case"enum":t[e]=r?n.T.values[0].no:void 0;break;case"scalar":t[e]=r?ws(n.T,n.L):void 0;break;case"message":t[e]=void 0;break}}function Qr(n,t){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(O.prototype).every(r=>r in n&&typeof n[r]=="function"))return!1;const e=n.getType();return e===null||typeof e!="function"||!("typeName"in e)||typeof e.typeName!="string"?!1:t===void 0?!0:e.typeName==t.typeName}function cS(n,t){return Qr(t)||!n.fieldWrapper?t:n.fieldWrapper.wrapField(t)}E.DOUBLE,E.FLOAT,E.INT64,E.UINT64,E.INT32,E.UINT32,E.BOOL,E.STRING,E.BYTES;const oy={ignoreUnknownFields:!1},ly={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function MA(n){return n?Object.assign(Object.assign({},oy),n):oy}function UA(n){return n?Object.assign(Object.assign({},ly),n):ly}const Ju=Symbol(),iu=Symbol();function LA(){return{makeReadOptions:MA,makeWriteOptions:UA,readMessage(n,t,e,r){if(t==null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${cn(t)}`);r=r??new n;const i=new Map,a=e.typeRegistry;for(const[s,o]of Object.entries(t)){const u=n.fields.findJsonName(s);if(u){if(u.oneof){if(o===null&&u.kind=="scalar")continue;const c=i.get(u.oneof);if(c!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${u.oneof.name}" present: "${c}", "${s}"`);i.set(u.oneof,s)}uy(r,o,u,e,n)}else{let c=!1;if(a!=null&&a.findExtension&&s.startsWith("[")&&s.endsWith("]")){const h=a.findExtension(s.substring(1,s.length-1));if(h&&h.extendee.typeName==n.typeName){c=!0;const[m,d]=sS(h);uy(m,o,h.field,e,h),zA(r,h,d(),e)}}if(!c&&!e.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${s}" is unknown`)}}return r},writeMessage(n,t){const e=n.getType(),r={};let i;try{for(i of e.fields.byNumber()){if(!uS(i,n)){if(i.req)throw"required field not set";if(!t.emitDefaultValues||!qA(i))continue}const s=i.oneof?n[i.oneof.localName].value:n[i.localName],o=cy(i,s,t);o!==void 0&&(r[t.useProtoFieldName?i.name:i.jsonName]=o)}const a=t.typeRegistry;if(a!=null&&a.findExtensionFor)for(const s of e.runtime.bin.listUnknownFields(n)){const o=a.findExtensionFor(e.typeName,s.no);if(o&&oS(n,o)){const u=BA(n,o,t),c=cy(o.field,u,t);c!==void 0&&(r[o.field.jsonName]=c)}}}catch(a){const s=i?`cannot encode field ${e.typeName}.${i.name} to JSON`:`cannot encode message ${e.typeName} to JSON`,o=a instanceof Error?a.message:String(a);throw new Error(s+(o.length>0?`: ${o}`:""))}return r},readScalar(n,t,e){return wo(n,t,e??Zi.BIGINT,!0)},writeScalar(n,t,e){if(t!==void 0&&(e||aS(n,t)))return au(n,t)},debug:cn}}function cn(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function uy(n,t,e,r,i){let a=e.localName;if(e.repeated){if(wt(e.kind!="map"),t===null)return;if(!Array.isArray(t))throw new Error(`cannot decode field ${i.typeName}.${e.name} from JSON: ${cn(t)}`);const s=n[a];for(const o of t){if(o===null)throw new Error(`cannot decode field ${i.typeName}.${e.name} from JSON: ${cn(o)}`);switch(e.kind){case"message":s.push(e.T.fromJson(o,r));break;case"enum":const u=wf(e.T,o,r.ignoreUnknownFields,!0);u!==iu&&s.push(u);break;case"scalar":try{s.push(wo(e.T,o,e.L,!0))}catch(c){let h=`cannot decode field ${i.typeName}.${e.name} from JSON: ${cn(o)}`;throw c instanceof Error&&c.message.length>0&&(h+=`: ${c.message}`),new Error(h)}break}}}else if(e.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error(`cannot decode field ${i.typeName}.${e.name} from JSON: ${cn(t)}`);const s=n[a];for(const[o,u]of Object.entries(t)){if(u===null)throw new Error(`cannot decode field ${i.typeName}.${e.name} from JSON: map value null`);let c;try{c=JA(e.K,o)}catch(h){let m=`cannot decode map key for field ${i.typeName}.${e.name} from JSON: ${cn(t)}`;throw h instanceof Error&&h.message.length>0&&(m+=`: ${h.message}`),new Error(m)}switch(e.V.kind){case"message":s[c]=e.V.T.fromJson(u,r);break;case"enum":const h=wf(e.V.T,u,r.ignoreUnknownFields,!0);h!==iu&&(s[c]=h);break;case"scalar":try{s[c]=wo(e.V.T,u,Zi.BIGINT,!0)}catch(m){let d=`cannot decode map value for field ${i.typeName}.${e.name} from JSON: ${cn(t)}`;throw m instanceof Error&&m.message.length>0&&(d+=`: ${m.message}`),new Error(d)}break}}}else switch(e.oneof&&(n=n[e.oneof.localName]={case:a},a="value"),e.kind){case"message":const s=e.T;if(t===null&&s.typeName!="google.protobuf.Value")return;let o=n[a];Qr(o)?o.fromJson(t,r):(n[a]=o=s.fromJson(t,r),s.fieldWrapper&&!e.oneof&&(n[a]=s.fieldWrapper.unwrapField(o)));break;case"enum":const u=wf(e.T,t,r.ignoreUnknownFields,!1);switch(u){case Ju:sy(e,n);break;case iu:break;default:n[a]=u;break}break;case"scalar":try{const c=wo(e.T,t,e.L,!1);switch(c){case Ju:sy(e,n);break;default:n[a]=c;break}}catch(c){let h=`cannot decode field ${i.typeName}.${e.name} from JSON: ${cn(t)}`;throw c instanceof Error&&c.message.length>0&&(h+=`: ${c.message}`),new Error(h)}break}}function JA(n,t){if(n===E.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1;break}return wo(n,t,Zi.BIGINT,!0).toString()}function wo(n,t,e,r){if(t===null)return r?ws(n,e):Ju;switch(n){case E.DOUBLE:case E.FLOAT:if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const i=Number(t);if(Number.isNaN(i)||!Number.isFinite(i))break;return n==E.FLOAT&&_0(i),i;case E.INT32:case E.FIXED32:case E.SFIXED32:case E.SINT32:case E.UINT32:let a;if(typeof t=="number"?a=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(a=Number(t)),a===void 0)break;return n==E.UINT32||n==E.FIXED32?Ah(a):nu(a),a;case E.INT64:case E.SFIXED64:case E.SINT64:if(typeof t!="number"&&typeof t!="string")break;const s=Z.parse(t);return e?s.toString():s;case E.FIXED64:case E.UINT64:if(typeof t!="number"&&typeof t!="string")break;const o=Z.uParse(t);return e?o.toString():o;case E.BOOL:if(typeof t!="boolean")break;return t;case E.STRING:if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case E.BYTES:if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return cg.dec(t)}throw new Error}function wf(n,t,e,r){if(t===null)return n.typeName=="google.protobuf.NullValue"?0:r?n.values[0].no:Ju;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const i=n.findName(t);if(i!==void 0)return i.no;if(e)return iu;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${cn(t)}`)}function qA(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function cy(n,t,e){if(n.kind=="map"){wt(typeof t=="object"&&t!=null);const r={},i=Object.entries(t);switch(n.V.kind){case"scalar":for(const[s,o]of i)r[s.toString()]=au(n.V.T,o);break;case"message":for(const[s,o]of i)r[s.toString()]=o.toJson(e);break;case"enum":const a=n.V.T;for(const[s,o]of i)r[s.toString()]=Af(a,o,e.enumAsInteger);break}return e.emitDefaultValues||i.length>0?r:void 0}if(n.repeated){wt(Array.isArray(t));const r=[];switch(n.kind){case"scalar":for(let i=0;i<t.length;i++)r.push(au(n.T,t[i]));break;case"enum":for(let i=0;i<t.length;i++)r.push(Af(n.T,t[i],e.enumAsInteger));break;case"message":for(let i=0;i<t.length;i++)r.push(t[i].toJson(e));break}return e.emitDefaultValues||r.length>0?r:void 0}switch(n.kind){case"scalar":return au(n.T,t);case"enum":return Af(n.T,t,e.enumAsInteger);case"message":return cS(n.T,t).toJson(e)}}function Af(n,t,e){var r;if(wt(typeof t=="number"),n.typeName=="google.protobuf.NullValue")return null;if(e)return t;const i=n.findNumber(t);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:t}function au(n,t){switch(n){case E.INT32:case E.SFIXED32:case E.SINT32:case E.FIXED32:case E.UINT32:return wt(typeof t=="number"),t;case E.FLOAT:case E.DOUBLE:return wt(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case E.STRING:return wt(typeof t=="string"),t;case E.BOOL:return wt(typeof t=="boolean"),t;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return wt(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),t.toString();case E.BYTES:return wt(t instanceof Uint8Array),cg.enc(t)}}const Ra=Symbol("@bufbuild/protobuf/unknown-fields"),fy={readUnknownFields:!0,readerFactory:n=>new kA(n)},hy={writeUnknownFields:!0,writerFactory:()=>new OA};function PA(n){return n?Object.assign(Object.assign({},fy),n):fy}function VA(n){return n?Object.assign(Object.assign({},hy),n):hy}function HA(){return{makeReadOptions:PA,makeWriteOptions:VA,listUnknownFields(n){var t;return(t=n[Ra])!==null&&t!==void 0?t:[]},discardUnknownFields(n){delete n[Ra]},writeUnknownFields(n,t){const r=n[Ra];if(r)for(const i of r)t.tag(i.no,i.wireType).raw(i.data)},onUnknownField(n,t,e,r){const i=n;Array.isArray(i[Ra])||(i[Ra]=[]),i[Ra].push({no:t,wireType:e,data:r})},readMessage(n,t,e,r,i){const a=n.getType(),s=i?t.len:t.pos+e;let o,u;for(;t.pos<s&&([o,u]=t.tag(),!(i===!0&&u==Dt.EndGroup));){const c=a.fields.find(o);if(!c){const h=t.skip(u,o);r.readUnknownFields&&this.onUnknownField(n,o,u,h);continue}dy(n,t,c,u,r)}if(i&&(u!=Dt.EndGroup||o!==e))throw new Error("invalid end group tag")},readField:dy,writeMessage(n,t,e){const r=n.getType();for(const i of r.fields.byNumber()){if(!uS(i,n)){if(i.req)throw new Error(`cannot encode field ${r.typeName}.${i.name} to binary: required field not set`);continue}const a=i.oneof?n[i.oneof.localName].value:n[i.localName];gy(i,a,t,e)}return e.writeUnknownFields&&this.writeUnknownFields(n,t),t},writeField(n,t,e,r){t!==void 0&&gy(n,t,e,r)}}}function dy(n,t,e,r,i){let{repeated:a,localName:s}=e;switch(e.oneof&&(n=n[e.oneof.localName],n.case!=s&&delete n.value,n.case=s,s="value"),e.kind){case"scalar":case"enum":const o=e.kind=="enum"?E.INT32:e.T;let u=qu;if(e.kind=="scalar"&&e.L>0&&(u=jA),a){let d=n[s];if(r==Dt.LengthDelimited&&o!=E.STRING&&o!=E.BYTES){let T=t.uint32()+t.pos;for(;t.pos<T;)d.push(u(t,o))}else d.push(u(t,o))}else n[s]=u(t,o);break;case"message":const c=e.T;a?n[s].push(su(t,new c,i,e)):Qr(n[s])?su(t,n[s],i,e):(n[s]=su(t,new c,i,e),c.fieldWrapper&&!e.oneof&&!e.repeated&&(n[s]=c.fieldWrapper.unwrapField(n[s])));break;case"map":let[h,m]=KA(e,t,i);n[s][h]=m;break}}function su(n,t,e,r){const i=t.getType().runtime.bin,a=r==null?void 0:r.delimited;return i.readMessage(t,n,a?r.no:n.uint32(),e,a),t}function KA(n,t,e){const r=t.uint32(),i=t.pos+r;let a,s;for(;t.pos<i;){const[o]=t.tag();switch(o){case 1:a=qu(t,n.K);break;case 2:switch(n.V.kind){case"scalar":s=qu(t,n.V.T);break;case"enum":s=t.int32();break;case"message":s=su(t,new n.V.T,e,void 0);break}break}}if(a===void 0&&(a=ws(n.K,Zi.BIGINT)),typeof a!="string"&&typeof a!="number"&&(a=a.toString()),s===void 0)switch(n.V.kind){case"scalar":s=ws(n.V.T,Zi.BIGINT);break;case"enum":s=n.V.T.values[0].no;break;case"message":s=new n.V.T;break}return[a,s]}function jA(n,t){const e=qu(n,t);return typeof e=="bigint"?e.toString():e}function qu(n,t){switch(t){case E.STRING:return n.string();case E.BOOL:return n.bool();case E.DOUBLE:return n.double();case E.FLOAT:return n.float();case E.INT32:return n.int32();case E.INT64:return n.int64();case E.UINT64:return n.uint64();case E.FIXED64:return n.fixed64();case E.BYTES:return n.bytes();case E.FIXED32:return n.fixed32();case E.SFIXED32:return n.sfixed32();case E.SFIXED64:return n.sfixed64();case E.SINT64:return n.sint64();case E.UINT32:return n.uint32();case E.SINT32:return n.sint32()}}function gy(n,t,e,r){wt(t!==void 0);const i=n.repeated;switch(n.kind){case"scalar":case"enum":let a=n.kind=="enum"?E.INT32:n.T;if(i)if(wt(Array.isArray(t)),n.packed)GA(e,a,n.no,t);else for(const s of t)Ao(e,a,n.no,s);else Ao(e,a,n.no,t);break;case"message":if(i){wt(Array.isArray(t));for(const s of t)my(e,r,n,s)}else my(e,r,n,t);break;case"map":wt(typeof t=="object"&&t!=null);for(const[s,o]of Object.entries(t))$A(e,r,n,s,o);break}}function $A(n,t,e,r,i){n.tag(e.no,Dt.LengthDelimited),n.fork();let a=r;switch(e.K){case E.INT32:case E.FIXED32:case E.UINT32:case E.SFIXED32:case E.SINT32:a=Number.parseInt(r);break;case E.BOOL:wt(r=="true"||r=="false"),a=r=="true";break}switch(Ao(n,e.K,1,a),e.V.kind){case"scalar":Ao(n,e.V.T,2,i);break;case"enum":Ao(n,E.INT32,2,i);break;case"message":wt(i!==void 0),n.tag(2,Dt.LengthDelimited).bytes(i.toBinary(t));break}n.join()}function my(n,t,e,r){const i=cS(e.T,r);e.delimited?n.tag(e.no,Dt.StartGroup).raw(i.toBinary(t)).tag(e.no,Dt.EndGroup):n.tag(e.no,Dt.LengthDelimited).bytes(i.toBinary(t))}function Ao(n,t,e,r){wt(r!==void 0);let[i,a]=fS(t);n.tag(e,i)[a](r)}function GA(n,t,e,r){if(!r.length)return;n.tag(e,Dt.LengthDelimited).fork();let[,i]=fS(t);for(let a=0;a<r.length;a++)n[i](r[a]);n.join()}function fS(n){let t=Dt.Varint;switch(n){case E.BYTES:case E.STRING:t=Dt.LengthDelimited;break;case E.DOUBLE:case E.FIXED64:case E.SFIXED64:t=Dt.Bit64;break;case E.FIXED32:case E.SFIXED32:case E.FLOAT:t=Dt.Bit32;break}const e=E[n].toLowerCase();return[t,e]}function YA(){return{setEnumType:tS,initPartial(n,t){if(n===void 0)return;const e=t.getType();for(const r of e.fields.byMember()){const i=r.localName,a=t,s=n;if(s[i]!=null)switch(r.kind){case"oneof":const o=s[i].case;if(o===void 0)continue;const u=r.findField(o);let c=s[i].value;u&&u.kind=="message"&&!Qr(c,u.T)?c=new u.T(c):u&&u.kind==="scalar"&&u.T===E.BYTES&&(c=Zs(c)),a[i]={case:o,value:c};break;case"scalar":case"enum":let h=s[i];r.T===E.BYTES&&(h=r.repeated?h.map(Zs):Zs(h)),a[i]=h;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===E.BYTES)for(const[g,T]of Object.entries(s[i]))a[i][g]=Zs(T);else Object.assign(a[i],s[i]);break;case"message":const d=r.V.T;for(const g of Object.keys(s[i])){let T=s[i][g];d.fieldWrapper||(T=new d(T)),a[i][g]=T}break}break;case"message":const m=r.T;if(r.repeated)a[i]=s[i].map(d=>Qr(d,m)?d:new m(d));else{const d=s[i];m.fieldWrapper?m.typeName==="google.protobuf.BytesValue"?a[i]=Zs(d):a[i]=d:a[i]=Qr(d,m)?d:new m(d)}break}}},equals(n,t,e){return t===e?!0:!t||!e?!1:n.fields.byMember().every(r=>{const i=t[r.localName],a=e[r.localName];if(r.repeated){if(i.length!==a.length)return!1;switch(r.kind){case"message":return i.every((s,o)=>r.T.equals(s,a[o]));case"scalar":return i.every((s,o)=>bi(r.T,s,a[o]));case"enum":return i.every((s,o)=>bi(E.INT32,s,a[o]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":let s=i,o=a;return r.T.fieldWrapper&&(s!==void 0&&!Qr(s)&&(s=r.T.fieldWrapper.wrapField(s)),o!==void 0&&!Qr(o)&&(o=r.T.fieldWrapper.wrapField(o))),r.T.equals(s,o);case"enum":return bi(E.INT32,i,a);case"scalar":return bi(r.T,i,a);case"oneof":if(i.case!==a.case)return!1;const u=r.findField(i.case);if(u===void 0)return!0;switch(u.kind){case"message":return u.T.equals(i.value,a.value);case"enum":return bi(E.INT32,i.value,a.value);case"scalar":return bi(u.T,i.value,a.value)}throw new Error(`oneof cannot contain ${u.kind}`);case"map":const c=Object.keys(i).concat(Object.keys(a));switch(r.V.kind){case"message":const h=r.V.T;return c.every(d=>h.equals(i[d],a[d]));case"enum":return c.every(d=>bi(E.INT32,i[d],a[d]));case"scalar":const m=r.V.T;return c.every(d=>bi(m,i[d],a[d]))}break}})},clone(n){const t=n.getType(),e=new t,r=e;for(const i of t.fields.byMember()){const a=n[i.localName];let s;if(i.repeated)s=a.map(Ul);else if(i.kind=="map"){s=r[i.localName];for(const[o,u]of Object.entries(a))s[o]=Ul(u)}else i.kind=="oneof"?s=i.findField(a.case)?{case:a.case,value:Ul(a.value)}:{case:void 0}:s=Ul(a);r[i.localName]=s}for(const i of t.runtime.bin.listUnknownFields(n))t.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return e}}}function Ul(n){if(n===void 0)return n;if(Qr(n))return n.clone();if(n instanceof Uint8Array){const t=new Uint8Array(n.byteLength);return t.set(n),t}return n}function Zs(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function XA(n,t,e){return{syntax:n,json:LA(),bin:HA(),util:Object.assign(Object.assign({},YA()),{newFieldList:t,initFields:e}),makeMessageType(r,i,a){return wA(this,r,i,a)},makeEnum:TA,makeEnumType:eS,getEnumType:bA,makeExtension(r,i,a){return CA(this,r,i,a)}}}class FA{constructor(t,e){this._fields=t,this._normalizer=e}findJsonName(t){if(!this.jsonNames){const e={};for(const r of this.list())e[r.jsonName]=e[r.name]=r;this.jsonNames=e}return this.jsonNames[t]}find(t){if(!this.numbers){const e={};for(const r of this.list())e[r.no]=r;this.numbers=e}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,e)=>t.no-e.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let e;for(const r of this.list())r.oneof?r.oneof!==e&&(e=r.oneof,t.push(e)):t.push(r)}return this.members}}function hS(n,t){const e=dS(n);return t?e:e1(t1(e))}function ZA(n){return hS(n,!1)}const QA=dS;function dS(n){let t=!1;const e=[];for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.push(i),t=!1;break;default:t&&(t=!1,i=i.toUpperCase()),e.push(i);break}}return e.join("")}const _A=new Set(["constructor","toString","toJSON","valueOf"]),WA=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),gS=n=>`${n}$`,t1=n=>WA.has(n)?gS(n):n,e1=n=>_A.has(n)?gS(n):n;class n1{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=ZA(t)}addField(t){wt(t.oneof===this,`field ${t.name} not one of ${this.name}`),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[t]}}function r1(n,t){var e,r,i,a,s,o;const u=[];let c;for(const h of typeof n=="function"?n():n){const m=h;if(m.localName=hS(h.name,h.oneof!==void 0),m.jsonName=(e=h.jsonName)!==null&&e!==void 0?e:QA(h.name),m.repeated=(r=h.repeated)!==null&&r!==void 0?r:!1,h.kind=="scalar"&&(m.L=(i=h.L)!==null&&i!==void 0?i:Zi.BIGINT),m.delimited=(a=h.delimited)!==null&&a!==void 0?a:!1,m.req=(s=h.req)!==null&&s!==void 0?s:!1,m.opt=(o=h.opt)!==null&&o!==void 0?o:!1,h.packed===void 0&&(m.packed=h.kind=="enum"||h.kind=="scalar"&&h.T!=E.BYTES&&h.T!=E.STRING),h.oneof!==void 0){const d=typeof h.oneof=="string"?h.oneof:h.oneof.name;(!c||c.name!=d)&&(c=new n1(d)),m.oneof=c,c.addField(m)}u.push(m)}return u}const f=XA("proto3",n=>new FA(n,t=>r1(t)),n=>{for(const t of n.getType().fields.byMember()){if(t.opt)continue;const e=t.localName,r=n;if(t.repeated){r[e]=[];continue}switch(t.kind){case"oneof":r[e]={case:void 0};break;case"enum":r[e]=0;break;case"map":r[e]={};break;case"scalar":r[e]=ws(t.T,t.L);break}}});var It;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(It||(It={}));var yy;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(yy||(yy={}));class Kt extends O{constructor(t){super(),this.seconds=Z.zero,this.nanos=0,f.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${f.json.debug(t)}`);const r=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Z.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(t){const e=Number(this.seconds)*1e3;if(e<Date.parse("0001-01-01T00:00:00Z")||e>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(e).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Kt.fromDate(new Date)}static fromDate(t){const e=t.getTime();return new Kt({seconds:Z.parse(Math.floor(e/1e3)),nanos:e%1e3*1e6})}static fromBinary(t,e){return new Kt().fromBinary(t,e)}static fromJson(t,e){return new Kt().fromJson(t,e)}static fromJsonString(t,e){return new Kt().fromJsonString(t,e)}static equals(t,e){return f.util.equals(Kt,t,e)}}Kt.runtime=f;Kt.typeName="google.protobuf.Timestamp";Kt.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class ri extends O{constructor(t){super(),this.seconds=Z.zero,this.nanos=0,f.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(t)}`);const r=t.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(t)}`);const i=Number(r[1]);if(i>315576e6||i<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(t)}`);if(this.seconds=Z.parse(i),typeof r[2]=="string"){const a=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(a),(i<0||Object.is(i,-0))&&(this.nanos=-this.nanos)}return this}toJson(t){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let e=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),e+="."+r,this.nanos<0&&Number(this.seconds)==0&&(e="-"+e)}return e+"s"}static fromBinary(t,e){return new ri().fromBinary(t,e)}static fromJson(t,e){return new ri().fromJson(t,e)}static fromJsonString(t,e){return new ri().fromJsonString(t,e)}static equals(t,e){return f.util.equals(ri,t,e)}}ri.runtime=f;ri.typeName="google.protobuf.Duration";ri.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class hn extends O{constructor(t){super(),this.typeUrl="",this.value=new Uint8Array(0),f.util.initPartial(t,this)}toJson(t){var e;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),i=(e=t==null?void 0:t.typeRegistry)===null||e===void 0?void 0:e.findMessage(r);if(!i)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let s=i.fromBinary(this.value).toJson(t);return(r.startsWith("google.protobuf.")||s===null||Array.isArray(s)||typeof s!="object")&&(s={value:s}),s["@type"]=this.typeUrl,s}fromJson(t,e){var r;if(t===null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${t===null?"null":Array.isArray(t)?"array":typeof t}`);if(Object.keys(t).length==0)return this;const i=t["@type"];if(typeof i!="string"||i=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const a=this.typeUrlToName(i),s=(r=e==null?void 0:e.typeRegistry)===null||r===void 0?void 0:r.findMessage(a);if(!s)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${i} is not in the type registry`);let o;if(a.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(t,"value"))o=s.fromJson(t.value,e);else{const u=Object.assign({},t);delete u["@type"],o=s.fromJson(u,e)}return this.packFrom(o),this}packFrom(t){this.value=t.toBinary(),this.typeUrl=this.typeNameToUrl(t.getType().typeName)}unpackTo(t){return this.is(t.getType())?(t.fromBinary(this.value),!0):!1}unpack(t){if(this.typeUrl==="")return;const e=t.findMessage(this.typeUrlToName(this.typeUrl));if(e)return e.fromBinary(this.value)}is(t){if(this.typeUrl==="")return!1;const e=this.typeUrlToName(this.typeUrl);let r="";return typeof t=="string"?r=t:r=t.typeName,e===r}typeNameToUrl(t){return`type.googleapis.com/${t}`}typeUrlToName(t){if(!t.length)throw new Error(`invalid type url: ${t}`);const e=t.lastIndexOf("/"),r=e>=0?t.substring(e+1):t;if(!r.length)throw new Error(`invalid type url: ${t}`);return r}static pack(t){const e=new hn;return e.packFrom(t),e}static fromBinary(t,e){return new hn().fromBinary(t,e)}static fromJson(t,e){return new hn().fromJson(t,e)}static fromJsonString(t,e){return new hn().fromJsonString(t,e)}static equals(t,e){return f.util.equals(hn,t,e)}}hn.runtime=f;hn.typeName="google.protobuf.Any";hn.fields=f.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class gn extends O{constructor(t){super(),this.value=0,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.DOUBLE,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.DOUBLE,t)}catch(r){let i='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(t,e){return new gn().fromBinary(t,e)}static fromJson(t,e){return new gn().fromJson(t,e)}static fromJsonString(t,e){return new gn().fromJsonString(t,e)}static equals(t,e){return f.util.equals(gn,t,e)}}gn.runtime=f;gn.typeName="google.protobuf.DoubleValue";gn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);gn.fieldWrapper={wrapField(n){return new gn({value:n})},unwrapField(n){return n.value}};class mn extends O{constructor(t){super(),this.value=0,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.FLOAT,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.FLOAT,t)}catch(r){let i='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(t,e){return new mn().fromBinary(t,e)}static fromJson(t,e){return new mn().fromJson(t,e)}static fromJsonString(t,e){return new mn().fromJsonString(t,e)}static equals(t,e){return f.util.equals(mn,t,e)}}mn.runtime=f;mn.typeName="google.protobuf.FloatValue";mn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);mn.fieldWrapper={wrapField(n){return new mn({value:n})},unwrapField(n){return n.value}};class Ve extends O{constructor(t){super(),this.value=Z.zero,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.INT64,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.INT64,t)}catch(r){let i='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(t,e){return new Ve().fromBinary(t,e)}static fromJson(t,e){return new Ve().fromJson(t,e)}static fromJsonString(t,e){return new Ve().fromJsonString(t,e)}static equals(t,e){return f.util.equals(Ve,t,e)}}Ve.runtime=f;Ve.typeName="google.protobuf.Int64Value";Ve.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);Ve.fieldWrapper={wrapField(n){return new Ve({value:n})},unwrapField(n){return n.value}};class He extends O{constructor(t){super(),this.value=Z.zero,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.UINT64,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.UINT64,t)}catch(r){let i='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(t,e){return new He().fromBinary(t,e)}static fromJson(t,e){return new He().fromJson(t,e)}static fromJsonString(t,e){return new He().fromJsonString(t,e)}static equals(t,e){return f.util.equals(He,t,e)}}He.runtime=f;He.typeName="google.protobuf.UInt64Value";He.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);He.fieldWrapper={wrapField(n){return new He({value:n})},unwrapField(n){return n.value}};class ye extends O{constructor(t){super(),this.value=0,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.INT32,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.INT32,t)}catch(r){let i='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(t,e){return new ye().fromBinary(t,e)}static fromJson(t,e){return new ye().fromJson(t,e)}static fromJsonString(t,e){return new ye().fromJsonString(t,e)}static equals(t,e){return f.util.equals(ye,t,e)}}ye.runtime=f;ye.typeName="google.protobuf.Int32Value";ye.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);ye.fieldWrapper={wrapField(n){return new ye({value:n})},unwrapField(n){return n.value}};class yn extends O{constructor(t){super(),this.value=0,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.UINT32,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.UINT32,t)}catch(r){let i='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(t,e){return new yn().fromBinary(t,e)}static fromJson(t,e){return new yn().fromJson(t,e)}static fromJsonString(t,e){return new yn().fromJsonString(t,e)}static equals(t,e){return f.util.equals(yn,t,e)}}yn.runtime=f;yn.typeName="google.protobuf.UInt32Value";yn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);yn.fieldWrapper={wrapField(n){return new yn({value:n})},unwrapField(n){return n.value}};class We extends O{constructor(t){super(),this.value=!1,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.BOOL,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.BOOL,t)}catch(r){let i='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(t,e){return new We().fromBinary(t,e)}static fromJson(t,e){return new We().fromJson(t,e)}static fromJsonString(t,e){return new We().fromJsonString(t,e)}static equals(t,e){return f.util.equals(We,t,e)}}We.runtime=f;We.typeName="google.protobuf.BoolValue";We.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);We.fieldWrapper={wrapField(n){return new We({value:n})},unwrapField(n){return n.value}};class Ot extends O{constructor(t){super(),this.value="",f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.STRING,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.STRING,t)}catch(r){let i='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(t,e){return new Ot().fromBinary(t,e)}static fromJson(t,e){return new Ot().fromJson(t,e)}static fromJsonString(t,e){return new Ot().fromJsonString(t,e)}static equals(t,e){return f.util.equals(Ot,t,e)}}Ot.runtime=f;Ot.typeName="google.protobuf.StringValue";Ot.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);Ot.fieldWrapper={wrapField(n){return new Ot({value:n})},unwrapField(n){return n.value}};class pn extends O{constructor(t){super(),this.value=new Uint8Array(0),f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.BYTES,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.BYTES,t)}catch(r){let i='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(t,e){return new pn().fromBinary(t,e)}static fromJson(t,e){return new pn().fromJson(t,e)}static fromJsonString(t,e){return new pn().fromJsonString(t,e)}static equals(t,e){return f.util.equals(pn,t,e)}}pn.runtime=f;pn.typeName="google.protobuf.BytesValue";pn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);pn.fieldWrapper={wrapField(n){return new pn({value:n})},unwrapField(n){return n.value}};function i1(n,t,e){try{const r=cg.dec(n);return t?t.fromBinary(r,e):r}catch(r){throw ot.from(r,X.DataLoss)}}function a1(n,t){const e={};for(const[r,i]of Object.entries(n.methods)){const a=t(Object.assign(Object.assign({},i),{localName:r,service:n}));a!=null&&(e[r]=a)}return e}const py=1;function vy(n){let t,e=new Uint8Array(0);function r(i){const a=new Uint8Array(e.length+i.length);a.set(e),a.set(i,e.length),e=a}return new ReadableStream({start(){t=n.getReader()},async pull(i){let a;for(;;){if(a===void 0&&e.byteLength>=5){let u=0;for(let c=1;c<5;c++)u=(u<<8)+e[c];a={flags:e[0],length:u}}if(a!==void 0&&e.byteLength>=a.length+5)break;const o=await t.read();if(o.done)break;r(o.value)}if(a===void 0){if(e.byteLength==0){i.close();return}i.error(new ot("premature end of stream",X.DataLoss));return}const s=e.subarray(5,5+a.length);e=e.subarray(5+a.length),i.enqueue({flags:a.flags,data:s})}})}function Sy(n,t){const e=new Uint8Array(t.length+5);e.set(t,5);const r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.setUint8(0,n),r.setUint32(1,t.length),e}var s1=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(a){e[a]=n[a]&&function(s){return new Promise(function(o,u){s=n[a](s),i(o,u,s.done,s.value)})}}function i(a,s,o,u){Promise.resolve(u).then(function(c){a({value:c,done:o})},s)}},Ko=function(n){return this instanceof Ko?(this.v=n,this):new Ko(n)},o1=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,a=[];return i={},o("next"),o("throw"),o("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(T){return Promise.resolve(T).then(g,m)}}function o(g,T){r[g]&&(i[g]=function(A){return new Promise(function(x,p){a.push([g,A,x,p])>1||u(g,A)})},T&&(i[g]=T(i[g])))}function u(g,T){try{c(r[g](T))}catch(A){d(a[0][3],A)}}function c(g){g.value instanceof Ko?Promise.resolve(g.value.v).then(h,m):d(a[0][2],g)}function h(g){u("next",g)}function m(g){u("throw",g)}function d(g,T){g(T),a.shift(),a.length&&u(a[0][0],a[0][1])}},l1=function(n){var t,e;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,a){t[i]=n[i]?function(s){return(e=!e)?{value:Ko(n[i](s)),done:!1}:a?a(s):s}:a}};function u1(n){return o1(this,arguments,function*(){yield Ko(yield*l1(s1(n)))})}var mS=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(a){e[a]=n[a]&&function(s){return new Promise(function(o,u){s=n[a](s),i(o,u,s.done,s.value)})}}function i(a,s,o,u){Promise.resolve(u).then(function(c){a({value:c,done:o})},s)}},As=function(n){return this instanceof As?(this.v=n,this):new As(n)},c1=function(n){var t,e;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,a){t[i]=n[i]?function(s){return(e=!e)?{value:As(n[i](s)),done:!1}:a?a(s):s}:a}},f1=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,a=[];return i={},o("next"),o("throw"),o("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(T){return Promise.resolve(T).then(g,m)}}function o(g,T){r[g]&&(i[g]=function(A){return new Promise(function(x,p){a.push([g,A,x,p])>1||u(g,A)})},T&&(i[g]=T(i[g])))}function u(g,T){try{c(r[g](T))}catch(A){d(a[0][3],A)}}function c(g){g.value instanceof As?Promise.resolve(g.value.v).then(h,m):d(a[0][2],g)}function h(g){u("next",g)}function m(g){u("throw",g)}function d(g,T){g(T),a.shift(),a.length&&u(a[0][0],a[0][1])}};function h1(n,t){return a1(n,e=>{switch(e.kind){case It.Unary:return d1(t,n,e);case It.ServerStreaming:return g1(t,n,e);case It.ClientStreaming:return m1(t,n,e);case It.BiDiStreaming:return y1(t,n,e);default:return null}})}function d1(n,t,e){return async function(r,i){var a,s;const o=await n.unary(t,e,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);return(a=i==null?void 0:i.onHeader)===null||a===void 0||a.call(i,o.header),(s=i==null?void 0:i.onTrailer)===null||s===void 0||s.call(i,o.trailer),o.message}}function g1(n,t,e){return function(r,i){return yS(n.stream(t,e,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,u1([r]),i==null?void 0:i.contextValues),i)}}function m1(n,t,e){return async function(r,i){var a,s,o,u,c,h;const m=await n.stream(t,e,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);(c=i==null?void 0:i.onHeader)===null||c===void 0||c.call(i,m.header);let d,g=0;try{for(var T=!0,A=mS(m.message),x;x=await A.next(),a=x.done,!a;T=!0)u=x.value,T=!1,d=u,g++}catch(p){s={error:p}}finally{try{!T&&!a&&(o=A.return)&&await o.call(A)}finally{if(s)throw s.error}}if(!d)throw new ot("protocol error: missing response message",X.Unimplemented);if(g>1)throw new ot("protocol error: received extra messages for client streaming method",X.Unimplemented);return(h=i==null?void 0:i.onTrailer)===null||h===void 0||h.call(i,m.trailer),d}}function y1(n,t,e){return function(r,i){return yS(n.stream(t,e,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues),i)}}function yS(n,t){const e=function(){return f1(this,arguments,function*(){var r,i;const a=yield As(n);(r=t==null?void 0:t.onHeader)===null||r===void 0||r.call(t,a.header),yield As(yield*c1(mS(a.message))),(i=t==null?void 0:t.onTrailer)===null||i===void 0||i.call(t,a.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>e.next()})}}function p1(...n){const t=new AbortController,e=n.filter(i=>i!==void 0).concat(t.signal);for(const i of e){if(i.aborted){r.apply(i);break}i.addEventListener("abort",r)}function r(){t.signal.aborted||t.abort(pS(this));for(const i of e)i.removeEventListener("abort",r)}return t}function v1(n){const t=new AbortController,e=()=>{t.abort(new ot("the operation timed out",X.DeadlineExceeded))};let r;return n!==void 0&&(n<=0?e():r=setTimeout(e,n)),{signal:t.signal,cleanup:()=>clearTimeout(r)}}function pS(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const t=new Error("This operation was aborted");return t.name="AbortError",t}function by(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,t){return this[n.id]=t,this},delete(n){return delete this[n.id],this}}}const Ef=128;function Ty(n){const t=new Headers,e=new TextDecoder().decode(n).split(`\r
`);for(const r of e){if(r==="")continue;const i=r.indexOf(":");if(i>0){const a=r.substring(0,i).trim(),s=r.substring(i+1).trim();t.append(a,s)}}return t}const S1="Content-Type",b1="Grpc-Timeout",Es="Grpc-Status",vS="Grpc-Message",T1="Grpc-Status-Details-Bin",w1="X-User-Agent",A1="X-Grpc-Web",E1="application/grpc-web+proto",N1="application/grpc-web+json";class ii extends O{constructor(t){super(),this.code=0,this.message="",this.details=[],f.util.initPartial(t,this)}static fromBinary(t,e){return new ii().fromBinary(t,e)}static fromJson(t,e){return new ii().fromJson(t,e)}static fromJsonString(t,e){return new ii().fromJsonString(t,e)}static equals(t,e){return f.util.equals(ii,t,e)}}ii.runtime=f;ii.typeName="google.rpc.Status";ii.fields=f.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:hn,repeated:!0}]);const x1="0";function SS(n){var t;const e=n.get(T1);if(e!=null){const i=i1(e,ii);if(i.code==0)return;const a=new ot(i.message,i.code,n);return a.details=i.details.map(s=>({type:s.typeUrl.substring(s.typeUrl.lastIndexOf("/")+1),value:s.value})),a}const r=n.get(Es);if(r!=null){if(r===x1)return;const i=parseInt(r,10);return i in X?new ot(decodeURIComponent((t=n.get(vS))!==null&&t!==void 0?t:""),i,n):new ot(`invalid grpc-status: ${r}`,X.Internal,n)}}function wy(n,t,e){const r=typeof t=="string"?t:t.typeName,i=typeof e=="string"?e:e.name;return n.toString().replace(/\/?$/,`/${r}/${i}`)}function bS(n,t){return t instanceof n?t:new n(t)}function D1(n,t){function e(r){return r.done===!0?r:{done:r.done,value:bS(n,r.value)}}return{[Symbol.asyncIterator](){const r=t[Symbol.asyncIterator](),i={next:()=>r.next().then(e)};return r.throw!==void 0&&(i.throw=a=>r.throw(a).then(e)),r.return!==void 0&&(i.return=a=>r.return(a).then(e)),i}}}function TS(n,t){var e;return(e=t==null?void 0:t.concat().reverse().reduce((r,i)=>i(r),n))!==null&&e!==void 0?e:n}function O1(n){var t;const e=Object.assign({},n);return(t=e.ignoreUnknownFields)!==null&&t!==void 0||(e.ignoreUnknownFields=!0),e}function Ay(n,t,e,r){const i=t?Ey(n.I,r):Ny(n.I,e);return{parse:(t?Ey(n.O,r):Ny(n.O,e)).parse,serialize:i.serialize}}function Ey(n,t){return{parse(e){try{return n.fromBinary(e,t)}catch(r){const i=r instanceof Error?r.message:String(r);throw new ot(`parse binary: ${i}`,X.Internal)}},serialize(e){try{return e.toBinary(t)}catch(r){const i=r instanceof Error?r.message:String(r);throw new ot(`serialize binary: ${i}`,X.Internal)}}}}function Ny(n,t){var e,r;const i=(e=t==null?void 0:t.textEncoder)!==null&&e!==void 0?e:new TextEncoder,a=(r=t==null?void 0:t.textDecoder)!==null&&r!==void 0?r:new TextDecoder,s=O1(t);return{parse(o){try{const u=a.decode(o);return n.fromJsonString(u,s)}catch(u){throw ot.from(u,X.InvalidArgument)}},serialize(o){try{const u=o.toJsonString(s);return i.encode(u)}catch(u){throw ot.from(u,X.Internal)}}}}function k1(n){const t=TS(n.next,n.interceptors),[e,r,i]=wS(n),a=Object.assign(Object.assign({},n.req),{message:bS(n.req.method.I,n.req.message),signal:e});return t(a).then(s=>(i(),s),r)}function C1(n){const t=TS(n.next,n.interceptors),[e,r,i]=wS(n),a=Object.assign(Object.assign({},n.req),{message:D1(n.req.method.I,n.req.message),signal:e});let s=!1;return e.addEventListener("abort",function(){var o,u;const c=n.req.message[Symbol.asyncIterator]();s||(o=c.throw)===null||o===void 0||o.call(c,this.reason).catch(()=>{}),(u=c.return)===null||u===void 0||u.call(c).catch(()=>{})}),t(a).then(o=>Object.assign(Object.assign({},o),{message:{[Symbol.asyncIterator](){const u=o.message[Symbol.asyncIterator]();return{next(){return u.next().then(c=>(c.done==!0&&(s=!0,i()),c),r)}}}}}),r)}function wS(n){const{signal:t,cleanup:e}=v1(n.timeoutMs),r=p1(n.signal,t);return[r.signal,function(a){const s=ot.from(t.aborted?pS(t):a);return r.abort(s),e(),Promise.reject(s)},function(){e(),r.abort()}]}function I1(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function xy(n,t){const e=SS(n);if(e)throw t.forEach((r,i)=>{e.metadata.append(i,r)}),e;if(!t.has(Es)&&!n.has(Es))throw new ot("protocol error: missing status",X.Internal)}function Dy(n,t,e,r){const i=new Headers(e??{});return i.set(S1,n?E1:N1),i.set(A1,"1"),i.set(w1,"connect-es/1.6.1"),t!==void 0&&i.set(b1,`${t}m`),i}function R1(n){switch(n){case 400:return X.Internal;case 401:return X.Unauthenticated;case 403:return X.PermissionDenied;case 404:return X.Unimplemented;case 429:return X.Unavailable;case 502:return X.Unavailable;case 503:return X.Unavailable;case 504:return X.Unavailable;default:return X.Unknown}}function Oy(n,t){var e;if(n>=200&&n<300)return{foundStatus:t.has(Es),headerError:SS(t)};throw new ot(decodeURIComponent((e=t.get(vS))!==null&&e!==void 0?e:`HTTP ${n}`),R1(n),t)}var la=function(n){return this instanceof la?(this.v=n,this):new la(n)},B1=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,a=[];return i={},o("next"),o("throw"),o("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(T){return Promise.resolve(T).then(g,m)}}function o(g,T){r[g]&&(i[g]=function(A){return new Promise(function(x,p){a.push([g,A,x,p])>1||u(g,A)})},T&&(i[g]=T(i[g])))}function u(g,T){try{c(r[g](T))}catch(A){d(a[0][3],A)}}function c(g){g.value instanceof la?Promise.resolve(g.value.v).then(h,m):d(a[0][2],g)}function h(g){u("next",g)}function m(g){u("throw",g)}function d(g,T){g(T),a.shift(),a.length&&u(a[0][0],a[0][1])}};function z1(n){var t;I1();const e=(t=n.useBinaryFormat)!==null&&t!==void 0?t:!0;return{async unary(r,i,a,s,o,u,c){var h;const{serialize:m,parse:d}=Ay(i,e,n.jsonOptions,n.binaryOptions);return s=s===void 0?n.defaultTimeoutMs:s<=0?void 0:s,await k1({interceptors:n.interceptors,signal:a,timeoutMs:s,req:{stream:!1,service:r,method:i,url:wy(n.baseUrl,r,i),init:{method:"POST",credentials:(h=n.credentials)!==null&&h!==void 0?h:"same-origin",redirect:"error",mode:"cors"},header:Dy(e,s,o),contextValues:c??by(),message:u},next:async g=>{var T;const x=await((T=n.fetch)!==null&&T!==void 0?T:globalThis.fetch)(g.url,Object.assign(Object.assign({},g.init),{headers:g.header,signal:g.signal,body:Sy(0,m(g.message))})),{headerError:p}=Oy(x.status,x.headers);if(!x.body)throw p!==void 0?p:"missing response body";const y=vy(x.body).getReader();let v,w;for(;;){const k=await y.read();if(k.done)break;const{flags:I,data:C}=k.value;if((I&py)===py)throw new ot("protocol error: received unsupported compressed output",X.Internal);if(I===Ef){if(v!==void 0)throw"extra trailer";v=Ty(C);continue}if(w!==void 0)throw new ot("extra message",X.Unimplemented);w=d(C)}if(v===void 0)throw p!==void 0?p:new ot("missing trailer",x.headers.has(Es)?X.Unimplemented:X.Unknown);if(xy(v,x.headers),w===void 0)throw new ot("missing message",v.has(Es)?X.Unimplemented:X.Unknown);return{stream:!1,service:r,method:i,header:x.headers,message:w,trailer:v}}})},async stream(r,i,a,s,o,u,c){var h;const{serialize:m,parse:d}=Ay(i,e,n.jsonOptions,n.binaryOptions);function g(A,x,p,y,v){return B1(this,arguments,function*(){const k=vy(A).getReader();if(x){if(!(yield la(k.read())).done)throw"extra data for trailers-only";return yield la(void 0)}let I=!1;for(;;){const C=yield la(k.read());if(C.done)break;const{flags:R,data:P}=C.value;if((R&Ef)===Ef){if(I)throw"extra trailer";I=!0;const J=Ty(P);xy(J,y),J.forEach((Vt,fe)=>p.set(fe,Vt));continue}if(I)throw"extra message";yield yield la(d(P))}if("throwIfAborted"in v&&v.throwIfAborted(),!I)throw"missing trailer"})}async function T(A){if(i.kind!=It.ServerStreaming)throw"The fetch API does not support streaming request bodies";const x=await A[Symbol.asyncIterator]().next();if(x.done==!0)throw"missing request message";return Sy(0,m(x.value))}return s=s===void 0?n.defaultTimeoutMs:s<=0?void 0:s,C1({interceptors:n.interceptors,signal:a,timeoutMs:s,req:{stream:!0,service:r,method:i,url:wy(n.baseUrl,r,i),init:{method:"POST",credentials:(h=n.credentials)!==null&&h!==void 0?h:"same-origin",redirect:"error",mode:"cors"},header:Dy(e,s,o),contextValues:c??by(),message:u},next:async A=>{var x;const y=await((x=n.fetch)!==null&&x!==void 0?x:globalThis.fetch)(A.url,Object.assign(Object.assign({},A.init),{headers:A.header,signal:A.signal,body:await T(A.message)})),{foundStatus:v,headerError:w}=Oy(y.status,y.headers);if(w!=null)throw w;if(!y.body)throw"missing response body";const k=new Headers;return Object.assign(Object.assign({},A),{header:y.headers,trailer:k,message:g(y.body,v,k,y.headers,A.signal)})}})}}}var V=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))(V||{});f.util.setEnumType(V,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var Ns=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(Ns||{});f.util.setEnumType(Ns,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const Bn=class Bn extends O{constructor(e){super();l(this,"root");l(this,"presences",{});f.util.initPartial(e,this)}static fromBinary(e,r){return new Bn().fromBinary(e,r)}static fromJson(e,r){return new Bn().fromJson(e,r)}static fromJsonString(e,r){return new Bn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Bn,e,r)}};l(Bn,"runtime",f),l(Bn,"typeName","yorkie.v1.Snapshot"),l(Bn,"fields",f.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:ue},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:Ds}}]));let Eh=Bn;var Ce;let pi=(Ce=class extends O{constructor(e){super();l(this,"documentKey","");l(this,"checkpoint");l(this,"snapshot",new Uint8Array(0));l(this,"changes",[]);l(this,"minSyncedTicket");l(this,"isRemoved",!1);l(this,"versionVector");f.util.initPartial(e,this)}static fromBinary(e,r){return new Ce().fromBinary(e,r)}static fromJson(e,r){return new Ce().fromJson(e,r)}static fromJsonString(e,r){return new Ce().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Ce,e,r)}},l(Ce,"runtime",f),l(Ce,"typeName","yorkie.v1.ChangePack"),l(Ce,"fields",f.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:NS},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:AS,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:M},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:Ic}])),Ce);var Ie;let AS=(Ie=class extends O{constructor(e){super();l(this,"id");l(this,"message","");l(this,"operations",[]);l(this,"presenceChange");f.util.initPartial(e,this)}static fromBinary(e,r){return new Ie().fromBinary(e,r)}static fromJson(e,r){return new Ie().fromJson(e,r)}static fromJsonString(e,r){return new Ie().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Ie,e,r)}},l(Ie,"runtime",f),l(Ie,"typeName","yorkie.v1.Change"),l(Ie,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Cc},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:fg,repeated:!0},{no:4,name:"presence_change",kind:"message",T:Go}])),Ie);var Re;let Cc=(Re=class extends O{constructor(e){super();l(this,"clientSeq",0);l(this,"serverSeq",Z.zero);l(this,"lamport",Z.zero);l(this,"actorId",new Uint8Array(0));l(this,"versionVector");f.util.initPartial(e,this)}static fromBinary(e,r){return new Re().fromBinary(e,r)}static fromJson(e,r){return new Re().fromJson(e,r)}static fromJsonString(e,r){return new Re().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Re,e,r)}},l(Re,"runtime",f),l(Re,"typeName","yorkie.v1.ChangeID"),l(Re,"fields",f.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:Ic}])),Re);var Be;let Ic=(Be=class extends O{constructor(e){super();l(this,"vector",{});f.util.initPartial(e,this)}static fromBinary(e,r){return new Be().fromBinary(e,r)}static fromJson(e,r){return new Be().fromJson(e,r)}static fromJsonString(e,r){return new Be().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Be,e,r)}},l(Be,"runtime",f),l(Be,"typeName","yorkie.v1.VersionVector"),l(Be,"fields",f.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),Be);var ze;let fg=(ze=class extends O{constructor(e){super();l(this,"body",{case:void 0});f.util.initPartial(e,this)}static fromBinary(e,r){return new ze().fromBinary(e,r)}static fromJson(e,r){return new ze().fromJson(e,r)}static fromJsonString(e,r){return new ze().fromJsonString(e,r)}static equals(e,r){return f.util.equals(ze,e,r)}},l(ze,"runtime",f),l(ze,"typeName","yorkie.v1.Operation"),l(ze,"fields",f.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:Pu,oneof:"body"},{no:2,name:"add",kind:"message",T:Vu,oneof:"body"},{no:3,name:"move",kind:"message",T:Hu,oneof:"body"},{no:4,name:"remove",kind:"message",T:Ku,oneof:"body"},{no:5,name:"edit",kind:"message",T:ju,oneof:"body"},{no:7,name:"style",kind:"message",T:$u,oneof:"body"},{no:8,name:"increase",kind:"message",T:Gu,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:Yu,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:Xu,oneof:"body"},{no:11,name:"array_set",kind:"message",T:Fu,oneof:"body"}])),ze);const zn=class zn extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"key","");l(this,"value");l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new zn().fromBinary(e,r)}static fromJson(e,r){return new zn().fromJson(e,r)}static fromJsonString(e,r){return new zn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(zn,e,r)}};l(zn,"runtime",f),l(zn,"typeName","yorkie.v1.Operation.Set"),l(zn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:ke},{no:4,name:"executed_at",kind:"message",T:M}]));let Pu=zn;const Mn=class Mn extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"prevCreatedAt");l(this,"value");l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Mn().fromBinary(e,r)}static fromJson(e,r){return new Mn().fromJson(e,r)}static fromJsonString(e,r){return new Mn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Mn,e,r)}};l(Mn,"runtime",f),l(Mn,"typeName","yorkie.v1.Operation.Add"),l(Mn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"prev_created_at",kind:"message",T:M},{no:3,name:"value",kind:"message",T:ke},{no:4,name:"executed_at",kind:"message",T:M}]));let Vu=Mn;const Un=class Un extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"prevCreatedAt");l(this,"createdAt");l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Un().fromBinary(e,r)}static fromJson(e,r){return new Un().fromJson(e,r)}static fromJsonString(e,r){return new Un().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Un,e,r)}};l(Un,"runtime",f),l(Un,"typeName","yorkie.v1.Operation.Move"),l(Un,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"prev_created_at",kind:"message",T:M},{no:3,name:"created_at",kind:"message",T:M},{no:4,name:"executed_at",kind:"message",T:M}]));let Hu=Un;const Ln=class Ln extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"createdAt");l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Ln().fromBinary(e,r)}static fromJson(e,r){return new Ln().fromJson(e,r)}static fromJsonString(e,r){return new Ln().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Ln,e,r)}};l(Ln,"runtime",f),l(Ln,"typeName","yorkie.v1.Operation.Remove"),l(Ln,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"executed_at",kind:"message",T:M}]));let Ku=Ln;const Jn=class Jn extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"createdAtMapByActor",{});l(this,"content","");l(this,"executedAt");l(this,"attributes",{});f.util.initPartial(e,this)}static fromBinary(e,r){return new Jn().fromBinary(e,r)}static fromJson(e,r){return new Jn().fromJson(e,r)}static fromJsonString(e,r){return new Jn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Jn,e,r)}};l(Jn,"runtime",f),l(Jn,"typeName","yorkie.v1.Operation.Edit"),l(Jn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:Aa},{no:3,name:"to",kind:"message",T:Aa},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:M},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let ju=Jn;const qn=class qn extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"attributes",{});l(this,"executedAt");l(this,"createdAtMapByActor",{});f.util.initPartial(e,this)}static fromBinary(e,r){return new qn().fromBinary(e,r)}static fromJson(e,r){return new qn().fromJson(e,r)}static fromJsonString(e,r){return new qn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(qn,e,r)}};l(qn,"runtime",f),l(qn,"typeName","yorkie.v1.Operation.Style"),l(qn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:Aa},{no:3,name:"to",kind:"message",T:Aa},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:M},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}}]));let $u=qn;const Pn=class Pn extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"value");l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Pn().fromBinary(e,r)}static fromJson(e,r){return new Pn().fromJson(e,r)}static fromJsonString(e,r){return new Pn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Pn,e,r)}};l(Pn,"runtime",f),l(Pn,"typeName","yorkie.v1.Operation.Increase"),l(Pn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"value",kind:"message",T:ke},{no:3,name:"executed_at",kind:"message",T:M}]));let Gu=Pn;const Vn=class Vn extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"createdAtMapByActor",{});l(this,"contents",[]);l(this,"splitLevel",0);l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Vn().fromBinary(e,r)}static fromJson(e,r){return new Vn().fromJson(e,r)}static fromJsonString(e,r){return new Vn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Vn,e,r)}};l(Vn,"runtime",f),l(Vn,"typeName","yorkie.v1.Operation.TreeEdit"),l(Vn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:Ta},{no:3,name:"to",kind:"message",T:Ta},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}},{no:5,name:"contents",kind:"message",T:ic,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:M}]));let Yu=Vn;const Hn=class Hn extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"attributes",{});l(this,"executedAt");l(this,"attributesToRemove",[]);l(this,"createdAtMapByActor",{});f.util.initPartial(e,this)}static fromBinary(e,r){return new Hn().fromBinary(e,r)}static fromJson(e,r){return new Hn().fromJson(e,r)}static fromJsonString(e,r){return new Hn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Hn,e,r)}};l(Hn,"runtime",f),l(Hn,"typeName","yorkie.v1.Operation.TreeStyle"),l(Hn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:Ta},{no:3,name:"to",kind:"message",T:Ta},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:M},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}}]));let Xu=Hn;const Kn=class Kn extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"createdAt");l(this,"value");l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Kn().fromBinary(e,r)}static fromJson(e,r){return new Kn().fromJson(e,r)}static fromJsonString(e,r){return new Kn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Kn,e,r)}};l(Kn,"runtime",f),l(Kn,"typeName","yorkie.v1.Operation.ArraySet"),l(Kn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"value",kind:"message",T:ke},{no:4,name:"executed_at",kind:"message",T:M}]));let Fu=Kn;const jn=class jn extends O{constructor(e){super();l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");l(this,"type",0);l(this,"value",new Uint8Array(0));f.util.initPartial(e,this)}static fromBinary(e,r){return new jn().fromBinary(e,r)}static fromJson(e,r){return new jn().fromJson(e,r)}static fromJsonString(e,r){return new jn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(jn,e,r)}};l(jn,"runtime",f),l(jn,"typeName","yorkie.v1.JSONElementSimple"),l(jn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"moved_at",kind:"message",T:M},{no:3,name:"removed_at",kind:"message",T:M},{no:4,name:"type",kind:"enum",T:f.getEnumType(V)},{no:5,name:"value",kind:"scalar",T:12}]));let ke=jn;const $n=class $n extends O{constructor(e){super();l(this,"body",{case:void 0});f.util.initPartial(e,this)}static fromBinary(e,r){return new $n().fromBinary(e,r)}static fromJson(e,r){return new $n().fromJson(e,r)}static fromJsonString(e,r){return new $n().fromJsonString(e,r)}static equals(e,r){return f.util.equals($n,e,r)}};l($n,"runtime",f),l($n,"typeName","yorkie.v1.JSONElement"),l($n,"fields",f.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:Zu,oneof:"body"},{no:2,name:"json_array",kind:"message",T:Qu,oneof:"body"},{no:3,name:"primitive",kind:"message",T:_u,oneof:"body"},{no:5,name:"text",kind:"message",T:Wu,oneof:"body"},{no:6,name:"counter",kind:"message",T:tc,oneof:"body"},{no:7,name:"tree",kind:"message",T:ec,oneof:"body"}]));let ue=$n;const Gn=class Gn extends O{constructor(e){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Gn().fromBinary(e,r)}static fromJson(e,r){return new Gn().fromJson(e,r)}static fromJsonString(e,r){return new Gn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Gn,e,r)}};l(Gn,"runtime",f),l(Gn,"typeName","yorkie.v1.JSONElement.JSONObject"),l(Gn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:ES,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}]));let Zu=Gn;const Yn=class Yn extends O{constructor(e){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Yn().fromBinary(e,r)}static fromJson(e,r){return new Yn().fromJson(e,r)}static fromJsonString(e,r){return new Yn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Yn,e,r)}};l(Yn,"runtime",f),l(Yn,"typeName","yorkie.v1.JSONElement.JSONArray"),l(Yn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:nc,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}]));let Qu=Yn;const Xn=class Xn extends O{constructor(e){super();l(this,"type",0);l(this,"value",new Uint8Array(0));l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Xn().fromBinary(e,r)}static fromJson(e,r){return new Xn().fromJson(e,r)}static fromJsonString(e,r){return new Xn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Xn,e,r)}};l(Xn,"runtime",f),l(Xn,"typeName","yorkie.v1.JSONElement.Primitive"),l(Xn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(V)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:M},{no:4,name:"moved_at",kind:"message",T:M},{no:5,name:"removed_at",kind:"message",T:M}]));let _u=Xn;const Fn=class Fn extends O{constructor(e){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Fn().fromBinary(e,r)}static fromJson(e,r){return new Fn().fromJson(e,r)}static fromJsonString(e,r){return new Fn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Fn,e,r)}};l(Fn,"runtime",f),l(Fn,"typeName","yorkie.v1.JSONElement.Text"),l(Fn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:rc,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}]));let Wu=Fn;const Zn=class Zn extends O{constructor(e){super();l(this,"type",0);l(this,"value",new Uint8Array(0));l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Zn().fromBinary(e,r)}static fromJson(e,r){return new Zn().fromJson(e,r)}static fromJsonString(e,r){return new Zn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Zn,e,r)}};l(Zn,"runtime",f),l(Zn,"typeName","yorkie.v1.JSONElement.Counter"),l(Zn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(V)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:M},{no:4,name:"moved_at",kind:"message",T:M},{no:5,name:"removed_at",kind:"message",T:M}]));let tc=Zn;const Qn=class Qn extends O{constructor(e){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Qn().fromBinary(e,r)}static fromJson(e,r){return new Qn().fromJson(e,r)}static fromJsonString(e,r){return new Qn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Qn,e,r)}};l(Qn,"runtime",f),l(Qn,"typeName","yorkie.v1.JSONElement.Tree"),l(Qn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:$o,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}]));let ec=Qn;var Me;let ES=(Me=class extends O{constructor(e){super();l(this,"key","");l(this,"element");f.util.initPartial(e,this)}static fromBinary(e,r){return new Me().fromBinary(e,r)}static fromJson(e,r){return new Me().fromJson(e,r)}static fromJsonString(e,r){return new Me().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Me,e,r)}},l(Me,"runtime",f),l(Me,"typeName","yorkie.v1.RHTNode"),l(Me,"fields",f.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:ue}])),Me);const un=class un extends O{constructor(e){super();l(this,"next");l(this,"element");f.util.initPartial(e,this)}static fromBinary(e,r){return new un().fromBinary(e,r)}static fromJson(e,r){return new un().fromJson(e,r)}static fromJsonString(e,r){return new un().fromJsonString(e,r)}static equals(e,r){return f.util.equals(un,e,r)}};l(un,"runtime",f),l(un,"typeName","yorkie.v1.RGANode"),l(un,"fields",f.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:un},{no:2,name:"element",kind:"message",T:ue}]));let nc=un;const _n=class _n extends O{constructor(e){super();l(this,"value","");l(this,"updatedAt");l(this,"isRemoved",!1);f.util.initPartial(e,this)}static fromBinary(e,r){return new _n().fromBinary(e,r)}static fromJson(e,r){return new _n().fromJson(e,r)}static fromJsonString(e,r){return new _n().fromJsonString(e,r)}static equals(e,r){return f.util.equals(_n,e,r)}};l(_n,"runtime",f),l(_n,"typeName","yorkie.v1.NodeAttr"),l(_n,"fields",f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:M},{no:3,name:"is_removed",kind:"scalar",T:8}]));let xs=_n;const Wn=class Wn extends O{constructor(e){super();l(this,"id");l(this,"value","");l(this,"removedAt");l(this,"insPrevId");l(this,"attributes",{});f.util.initPartial(e,this)}static fromBinary(e,r){return new Wn().fromBinary(e,r)}static fromJson(e,r){return new Wn().fromJson(e,r)}static fromJsonString(e,r){return new Wn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Wn,e,r)}};l(Wn,"runtime",f),l(Wn,"typeName","yorkie.v1.TextNode"),l(Wn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:jo},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:M},{no:4,name:"ins_prev_id",kind:"message",T:jo},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:xs}}]));let rc=Wn;const tr=class tr extends O{constructor(e){super();l(this,"createdAt");l(this,"offset",0);f.util.initPartial(e,this)}static fromBinary(e,r){return new tr().fromBinary(e,r)}static fromJson(e,r){return new tr().fromJson(e,r)}static fromJsonString(e,r){return new tr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(tr,e,r)}};l(tr,"runtime",f),l(tr,"typeName","yorkie.v1.TextNodeID"),l(tr,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"offset",kind:"scalar",T:5}]));let jo=tr;const er=class er extends O{constructor(e){super();l(this,"id");l(this,"type","");l(this,"value","");l(this,"removedAt");l(this,"insPrevId");l(this,"insNextId");l(this,"depth",0);l(this,"attributes",{});f.util.initPartial(e,this)}static fromBinary(e,r){return new er().fromBinary(e,r)}static fromJson(e,r){return new er().fromJson(e,r)}static fromJsonString(e,r){return new er().fromJsonString(e,r)}static equals(e,r){return f.util.equals(er,e,r)}};l(er,"runtime",f),l(er,"typeName","yorkie.v1.TreeNode"),l(er,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:ji},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:M},{no:5,name:"ins_prev_id",kind:"message",T:ji},{no:6,name:"ins_next_id",kind:"message",T:ji},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:xs}}]));let $o=er;const nr=class nr extends O{constructor(e){super();l(this,"content",[]);f.util.initPartial(e,this)}static fromBinary(e,r){return new nr().fromBinary(e,r)}static fromJson(e,r){return new nr().fromJson(e,r)}static fromJsonString(e,r){return new nr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(nr,e,r)}};l(nr,"runtime",f),l(nr,"typeName","yorkie.v1.TreeNodes"),l(nr,"fields",f.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:$o,repeated:!0}]));let ic=nr;const rr=class rr extends O{constructor(e){super();l(this,"createdAt");l(this,"offset",0);f.util.initPartial(e,this)}static fromBinary(e,r){return new rr().fromBinary(e,r)}static fromJson(e,r){return new rr().fromJson(e,r)}static fromJsonString(e,r){return new rr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(rr,e,r)}};l(rr,"runtime",f),l(rr,"typeName","yorkie.v1.TreeNodeID"),l(rr,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"offset",kind:"scalar",T:5}]));let ji=rr;const ir=class ir extends O{constructor(e){super();l(this,"parentId");l(this,"leftSiblingId");f.util.initPartial(e,this)}static fromBinary(e,r){return new ir().fromBinary(e,r)}static fromJson(e,r){return new ir().fromJson(e,r)}static fromJsonString(e,r){return new ir().fromJsonString(e,r)}static equals(e,r){return f.util.equals(ir,e,r)}};l(ir,"runtime",f),l(ir,"typeName","yorkie.v1.TreePos"),l(ir,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:ji},{no:2,name:"left_sibling_id",kind:"message",T:ji}]));let Ta=ir;const ar=class ar extends O{constructor(e){super();l(this,"id","");l(this,"authProvider","");l(this,"username","");l(this,"createdAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new ar().fromBinary(e,r)}static fromJson(e,r){return new ar().fromJson(e,r)}static fromJsonString(e,r){return new ar().fromJsonString(e,r)}static equals(e,r){return f.util.equals(ar,e,r)}};l(ar,"runtime",f),l(ar,"typeName","yorkie.v1.User"),l(ar,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"auth_provider",kind:"scalar",T:9},{no:3,name:"username",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Kt}]));let ky=ar;const sr=class sr extends O{constructor(e){super();l(this,"id","");l(this,"name","");l(this,"publicKey","");l(this,"secretKey","");l(this,"authWebhookUrl","");l(this,"authWebhookMethods",[]);l(this,"authWebhookMaxRetries",Z.zero);l(this,"authWebhookMinWaitInterval","");l(this,"authWebhookMaxWaitInterval","");l(this,"authWebhookRequestTimeout","");l(this,"eventWebhookUrl","");l(this,"eventWebhookEvents",[]);l(this,"eventWebhookMaxRetries",Z.zero);l(this,"eventWebhookMinWaitInterval","");l(this,"eventWebhookMaxWaitInterval","");l(this,"eventWebhookRequestTimeout","");l(this,"clientDeactivateThreshold","");l(this,"snapshotThreshold",Z.zero);l(this,"snapshotInterval",Z.zero);l(this,"maxSubscribersPerDocument",0);l(this,"maxAttachmentsPerDocument",0);l(this,"maxSizePerDocument",0);l(this,"removeOnDetach",!1);l(this,"allowedOrigins",[]);l(this,"createdAt");l(this,"updatedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new sr().fromBinary(e,r)}static fromJson(e,r){return new sr().fromJson(e,r)}static fromJsonString(e,r){return new sr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(sr,e,r)}};l(sr,"runtime",f),l(sr,"typeName","yorkie.v1.Project"),l(sr,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:17,name:"auth_webhook_max_retries",kind:"scalar",T:4},{no:18,name:"auth_webhook_min_wait_interval",kind:"scalar",T:9},{no:19,name:"auth_webhook_max_wait_interval",kind:"scalar",T:9},{no:20,name:"auth_webhook_request_timeout",kind:"scalar",T:9},{no:7,name:"event_webhook_url",kind:"scalar",T:9},{no:8,name:"event_webhook_events",kind:"scalar",T:9,repeated:!0},{no:21,name:"event_webhook_max_retries",kind:"scalar",T:4},{no:22,name:"event_webhook_min_wait_interval",kind:"scalar",T:9},{no:23,name:"event_webhook_max_wait_interval",kind:"scalar",T:9},{no:24,name:"event_webhook_request_timeout",kind:"scalar",T:9},{no:9,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:25,name:"snapshot_threshold",kind:"scalar",T:3},{no:26,name:"snapshot_interval",kind:"scalar",T:3},{no:10,name:"max_subscribers_per_document",kind:"scalar",T:5},{no:11,name:"max_attachments_per_document",kind:"scalar",T:5},{no:15,name:"max_size_per_document",kind:"scalar",T:5},{no:16,name:"remove_on_detach",kind:"scalar",T:8},{no:14,name:"allowed_origins",kind:"scalar",T:9,repeated:!0},{no:12,name:"created_at",kind:"message",T:Kt},{no:13,name:"updated_at",kind:"message",T:Kt}]));let Cy=sr;const or=class or extends O{constructor(e){super();l(this,"timestamp",Z.zero);l(this,"value",0);f.util.initPartial(e,this)}static fromBinary(e,r){return new or().fromBinary(e,r)}static fromJson(e,r){return new or().fromJson(e,r)}static fromJsonString(e,r){return new or().fromJsonString(e,r)}static equals(e,r){return f.util.equals(or,e,r)}};l(or,"runtime",f),l(or,"typeName","yorkie.v1.MetricPoint"),l(or,"fields",f.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"value",kind:"scalar",T:5}]));let Iy=or;const lr=class lr extends O{constructor(e){super();l(this,"name");l(this,"authWebhookUrl");l(this,"authWebhookMethods");l(this,"authWebhookMaxRetries");l(this,"authWebhookMinWaitInterval");l(this,"authWebhookMaxWaitInterval");l(this,"authWebhookRequestTimeout");l(this,"eventWebhookUrl");l(this,"eventWebhookEvents");l(this,"eventWebhookMaxRetries");l(this,"eventWebhookMinWaitInterval");l(this,"eventWebhookMaxWaitInterval");l(this,"eventWebhookRequestTimeout");l(this,"snapshotThreshold");l(this,"snapshotInterval");l(this,"clientDeactivateThreshold");l(this,"maxSubscribersPerDocument");l(this,"maxAttachmentsPerDocument");l(this,"maxSizePerDocument");l(this,"removeOnDetach");l(this,"allowedOrigins");f.util.initPartial(e,this)}static fromBinary(e,r){return new lr().fromBinary(e,r)}static fromJson(e,r){return new lr().fromJson(e,r)}static fromJsonString(e,r){return new lr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(lr,e,r)}};l(lr,"runtime",f),l(lr,"typeName","yorkie.v1.UpdatableProjectFields"),l(lr,"fields",f.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:Ot},{no:2,name:"auth_webhook_url",kind:"message",T:Ot},{no:3,name:"auth_webhook_methods",kind:"message",T:Nh},{no:12,name:"auth_webhook_max_retries",kind:"message",T:He},{no:13,name:"auth_webhook_min_wait_interval",kind:"message",T:Ot},{no:14,name:"auth_webhook_max_wait_interval",kind:"message",T:Ot},{no:15,name:"auth_webhook_request_timeout",kind:"message",T:Ot},{no:4,name:"event_webhook_url",kind:"message",T:Ot},{no:5,name:"event_webhook_events",kind:"message",T:xh},{no:16,name:"event_webhook_max_retries",kind:"message",T:He},{no:17,name:"event_webhook_min_wait_interval",kind:"message",T:Ot},{no:18,name:"event_webhook_max_wait_interval",kind:"message",T:Ot},{no:19,name:"event_webhook_request_timeout",kind:"message",T:Ot},{no:20,name:"snapshot_threshold",kind:"message",T:Ve},{no:21,name:"snapshot_interval",kind:"message",T:Ve},{no:6,name:"client_deactivate_threshold",kind:"message",T:Ot},{no:7,name:"max_subscribers_per_document",kind:"message",T:ye},{no:8,name:"max_attachments_per_document",kind:"message",T:ye},{no:10,name:"max_size_per_document",kind:"message",T:ye},{no:11,name:"remove_on_detach",kind:"message",T:We},{no:9,name:"allowed_origins",kind:"message",T:Dh}]));let Ry=lr;const ur=class ur extends O{constructor(e){super();l(this,"methods",[]);f.util.initPartial(e,this)}static fromBinary(e,r){return new ur().fromBinary(e,r)}static fromJson(e,r){return new ur().fromJson(e,r)}static fromJsonString(e,r){return new ur().fromJsonString(e,r)}static equals(e,r){return f.util.equals(ur,e,r)}};l(ur,"runtime",f),l(ur,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),l(ur,"fields",f.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let Nh=ur;const cr=class cr extends O{constructor(e){super();l(this,"events",[]);f.util.initPartial(e,this)}static fromBinary(e,r){return new cr().fromBinary(e,r)}static fromJson(e,r){return new cr().fromJson(e,r)}static fromJsonString(e,r){return new cr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(cr,e,r)}};l(cr,"runtime",f),l(cr,"typeName","yorkie.v1.UpdatableProjectFields.EventWebhookEvents"),l(cr,"fields",f.util.newFieldList(()=>[{no:1,name:"events",kind:"scalar",T:9,repeated:!0}]));let xh=cr;const fr=class fr extends O{constructor(e){super();l(this,"origins",[]);f.util.initPartial(e,this)}static fromBinary(e,r){return new fr().fromBinary(e,r)}static fromJson(e,r){return new fr().fromJson(e,r)}static fromJsonString(e,r){return new fr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(fr,e,r)}};l(fr,"runtime",f),l(fr,"typeName","yorkie.v1.UpdatableProjectFields.AllowedOrigins"),l(fr,"fields",f.util.newFieldList(()=>[{no:1,name:"origins",kind:"scalar",T:9,repeated:!0}]));let Dh=fr;const hr=class hr extends O{constructor(e){super();l(this,"id","");l(this,"key","");l(this,"root","");l(this,"attachedClients",0);l(this,"documentSize");l(this,"schemaKey","");l(this,"presences",{});l(this,"createdAt");l(this,"accessedAt");l(this,"updatedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new hr().fromBinary(e,r)}static fromJson(e,r){return new hr().fromJson(e,r)}static fromJsonString(e,r){return new hr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(hr,e,r)}};l(hr,"runtime",f),l(hr,"typeName","yorkie.v1.DocumentSummary"),l(hr,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"root",kind:"scalar",T:9},{no:7,name:"attached_clients",kind:"scalar",T:5},{no:8,name:"document_size",kind:"message",T:Ih},{no:9,name:"schema_key",kind:"scalar",T:9},{no:10,name:"presences",kind:"map",K:9,V:{kind:"message",T:Ds}},{no:4,name:"created_at",kind:"message",T:Kt},{no:5,name:"accessed_at",kind:"message",T:Kt},{no:6,name:"updated_at",kind:"message",T:Kt}]));let By=hr;const dr=class dr extends O{constructor(e){super();l(this,"type",0);l(this,"presence");f.util.initPartial(e,this)}static fromBinary(e,r){return new dr().fromBinary(e,r)}static fromJson(e,r){return new dr().fromJson(e,r)}static fromJsonString(e,r){return new dr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(dr,e,r)}};l(dr,"runtime",f),l(dr,"typeName","yorkie.v1.PresenceChange"),l(dr,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(wa)},{no:2,name:"presence",kind:"message",T:Ds}]));let Go=dr;var wa=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(wa||{});f.util.setEnumType(wa,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);const gr=class gr extends O{constructor(e){super();l(this,"data",{});f.util.initPartial(e,this)}static fromBinary(e,r){return new gr().fromBinary(e,r)}static fromJson(e,r){return new gr().fromJson(e,r)}static fromJsonString(e,r){return new gr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(gr,e,r)}};l(gr,"runtime",f),l(gr,"typeName","yorkie.v1.Presence"),l(gr,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Ds=gr;var Ue;let NS=(Ue=class extends O{constructor(e){super();l(this,"serverSeq",Z.zero);l(this,"clientSeq",0);f.util.initPartial(e,this)}static fromBinary(e,r){return new Ue().fromBinary(e,r)}static fromJson(e,r){return new Ue().fromJson(e,r)}static fromJsonString(e,r){return new Ue().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Ue,e,r)}},l(Ue,"runtime",f),l(Ue,"typeName","yorkie.v1.Checkpoint"),l(Ue,"fields",f.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),Ue);const mr=class mr extends O{constructor(e){super();l(this,"createdAt");l(this,"offset",0);l(this,"relativeOffset",0);f.util.initPartial(e,this)}static fromBinary(e,r){return new mr().fromBinary(e,r)}static fromJson(e,r){return new mr().fromJson(e,r)}static fromJsonString(e,r){return new mr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(mr,e,r)}};l(mr,"runtime",f),l(mr,"typeName","yorkie.v1.TextNodePos"),l(mr,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let Aa=mr;var Le;let M=(Le=class extends O{constructor(e){super();l(this,"lamport",Z.zero);l(this,"delimiter",0);l(this,"actorId",new Uint8Array(0));f.util.initPartial(e,this)}static fromBinary(e,r){return new Le().fromBinary(e,r)}static fromJson(e,r){return new Le().fromJson(e,r)}static fromJsonString(e,r){return new Le().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Le,e,r)}},l(Le,"runtime",f),l(Le,"typeName","yorkie.v1.TimeTicket"),l(Le,"fields",f.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),Le);const yr=class yr extends O{constructor(e){super();l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(e,this)}static fromBinary(e,r){return new yr().fromBinary(e,r)}static fromJson(e,r){return new yr().fromJson(e,r)}static fromJsonString(e,r){return new yr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(yr,e,r)}};l(yr,"runtime",f),l(yr,"typeName","yorkie.v1.DocEventBody"),l(yr,"fields",f.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let Oh=yr;const pr=class pr extends O{constructor(e){super();l(this,"type",0);l(this,"publisher","");l(this,"body");f.util.initPartial(e,this)}static fromBinary(e,r){return new pr().fromBinary(e,r)}static fromJson(e,r){return new pr().fromJson(e,r)}static fromJsonString(e,r){return new pr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(pr,e,r)}};l(pr,"runtime",f),l(pr,"typeName","yorkie.v1.DocEvent"),l(pr,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Ns)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Oh}]));let kh=pr;const vr=class vr extends O{constructor(e){super();l(this,"type",0);l(this,"publisher","");l(this,"count",Z.zero);l(this,"seq",Z.zero);l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(e,this)}static fromBinary(e,r){return new vr().fromBinary(e,r)}static fromJson(e,r){return new vr().fromJson(e,r)}static fromJsonString(e,r){return new vr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(vr,e,r)}};l(vr,"runtime",f),l(vr,"typeName","yorkie.v1.ChannelEvent"),l(vr,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Rc)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"count",kind:"scalar",T:3},{no:4,name:"seq",kind:"scalar",T:3},{no:5,name:"topic",kind:"scalar",T:9},{no:6,name:"payload",kind:"scalar",T:12}]));let Ch=vr;var Rc=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PRESENCE=1]="PRESENCE",n[n.BROADCAST=2]="BROADCAST",n))(Rc||{});f.util.setEnumType(Rc,"yorkie.v1.ChannelEvent.Type",[{no:0,name:"TYPE_UNSPECIFIED"},{no:1,name:"TYPE_PRESENCE"},{no:2,name:"TYPE_BROADCAST"}]);const Sr=class Sr extends O{constructor(e){super();l(this,"data",0);l(this,"meta",0);f.util.initPartial(e,this)}static fromBinary(e,r){return new Sr().fromBinary(e,r)}static fromJson(e,r){return new Sr().fromJson(e,r)}static fromJsonString(e,r){return new Sr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Sr,e,r)}};l(Sr,"runtime",f),l(Sr,"typeName","yorkie.v1.DataSize"),l(Sr,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"scalar",T:5},{no:2,name:"meta",kind:"scalar",T:5}]));let ac=Sr;const br=class br extends O{constructor(e){super();l(this,"live");l(this,"gc");f.util.initPartial(e,this)}static fromBinary(e,r){return new br().fromBinary(e,r)}static fromJson(e,r){return new br().fromJson(e,r)}static fromJsonString(e,r){return new br().fromJsonString(e,r)}static equals(e,r){return f.util.equals(br,e,r)}};l(br,"runtime",f),l(br,"typeName","yorkie.v1.DocSize"),l(br,"fields",f.util.newFieldList(()=>[{no:1,name:"live",kind:"message",T:ac},{no:2,name:"gc",kind:"message",T:ac}]));let Ih=br;const Tr=class Tr extends O{constructor(e){super();l(this,"id","");l(this,"name","");l(this,"version",0);l(this,"body","");l(this,"rules",[]);l(this,"createdAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Tr().fromBinary(e,r)}static fromJson(e,r){return new Tr().fromJson(e,r)}static fromJsonString(e,r){return new Tr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Tr,e,r)}};l(Tr,"runtime",f),l(Tr,"typeName","yorkie.v1.Schema"),l(Tr,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"version",kind:"scalar",T:5},{no:4,name:"body",kind:"scalar",T:9},{no:5,name:"rules",kind:"message",T:sc,repeated:!0},{no:6,name:"created_at",kind:"message",T:Kt}]));let zy=Tr;const wr=class wr extends O{constructor(e){super();l(this,"path","");l(this,"type","");f.util.initPartial(e,this)}static fromBinary(e,r){return new wr().fromBinary(e,r)}static fromJson(e,r){return new wr().fromJson(e,r)}static fromJsonString(e,r){return new wr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(wr,e,r)}};l(wr,"runtime",f),l(wr,"typeName","yorkie.v1.Rule"),l(wr,"fields",f.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:9},{no:2,name:"type",kind:"scalar",T:9}]));let sc=wr;const Ar=class Ar extends O{constructor(e){super();l(this,"clientKey","");l(this,"metadata",{});f.util.initPartial(e,this)}static fromBinary(e,r){return new Ar().fromBinary(e,r)}static fromJson(e,r){return new Ar().fromJson(e,r)}static fromJsonString(e,r){return new Ar().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Ar,e,r)}};l(Ar,"runtime",f),l(Ar,"typeName","yorkie.v1.ActivateClientRequest"),l(Ar,"fields",f.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Rh=Ar;const Er=class Er extends O{constructor(e){super();l(this,"clientId","");f.util.initPartial(e,this)}static fromBinary(e,r){return new Er().fromBinary(e,r)}static fromJson(e,r){return new Er().fromJson(e,r)}static fromJsonString(e,r){return new Er().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Er,e,r)}};l(Er,"runtime",f),l(Er,"typeName","yorkie.v1.ActivateClientResponse"),l(Er,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Bh=Er;const Nr=class Nr extends O{constructor(e){super();l(this,"clientId","");l(this,"synchronous",!1);f.util.initPartial(e,this)}static fromBinary(e,r){return new Nr().fromBinary(e,r)}static fromJson(e,r){return new Nr().fromJson(e,r)}static fromJsonString(e,r){return new Nr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Nr,e,r)}};l(Nr,"runtime",f),l(Nr,"typeName","yorkie.v1.DeactivateClientRequest"),l(Nr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"synchronous",kind:"scalar",T:8}]));let zh=Nr;const xr=class xr extends O{constructor(t){super(),f.util.initPartial(t,this)}static fromBinary(t,e){return new xr().fromBinary(t,e)}static fromJson(t,e){return new xr().fromJson(t,e)}static fromJsonString(t,e){return new xr().fromJsonString(t,e)}static equals(t,e){return f.util.equals(xr,t,e)}};l(xr,"runtime",f),l(xr,"typeName","yorkie.v1.DeactivateClientResponse"),l(xr,"fields",f.util.newFieldList(()=>[]));let Mh=xr;const Dr=class Dr extends O{constructor(e){super();l(this,"clientId","");l(this,"changePack");l(this,"schemaKey","");f.util.initPartial(e,this)}static fromBinary(e,r){return new Dr().fromBinary(e,r)}static fromJson(e,r){return new Dr().fromJson(e,r)}static fromJsonString(e,r){return new Dr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Dr,e,r)}};l(Dr,"runtime",f),l(Dr,"typeName","yorkie.v1.AttachDocumentRequest"),l(Dr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:pi},{no:3,name:"schema_key",kind:"scalar",T:9}]));let Uh=Dr;const Or=class Or extends O{constructor(e){super();l(this,"documentId","");l(this,"changePack");l(this,"maxSizePerDocument",0);l(this,"schemaRules",[]);f.util.initPartial(e,this)}static fromBinary(e,r){return new Or().fromBinary(e,r)}static fromJson(e,r){return new Or().fromJson(e,r)}static fromJsonString(e,r){return new Or().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Or,e,r)}};l(Or,"runtime",f),l(Or,"typeName","yorkie.v1.AttachDocumentResponse"),l(Or,"fields",f.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:pi},{no:3,name:"max_size_per_document",kind:"scalar",T:5},{no:4,name:"schema_rules",kind:"message",T:sc,repeated:!0}]));let Lh=Or;const kr=class kr extends O{constructor(e){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");l(this,"removeIfNotAttached",!1);f.util.initPartial(e,this)}static fromBinary(e,r){return new kr().fromBinary(e,r)}static fromJson(e,r){return new kr().fromJson(e,r)}static fromJsonString(e,r){return new kr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(kr,e,r)}};l(kr,"runtime",f),l(kr,"typeName","yorkie.v1.DetachDocumentRequest"),l(kr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:pi},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let Jh=kr;const Cr=class Cr extends O{constructor(e){super();l(this,"changePack");f.util.initPartial(e,this)}static fromBinary(e,r){return new Cr().fromBinary(e,r)}static fromJson(e,r){return new Cr().fromJson(e,r)}static fromJsonString(e,r){return new Cr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Cr,e,r)}};l(Cr,"runtime",f),l(Cr,"typeName","yorkie.v1.DetachDocumentResponse"),l(Cr,"fields",f.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:pi}]));let qh=Cr;const Ir=class Ir extends O{constructor(e){super();l(this,"clientId","");l(this,"documentId","");f.util.initPartial(e,this)}static fromBinary(e,r){return new Ir().fromBinary(e,r)}static fromJson(e,r){return new Ir().fromJson(e,r)}static fromJsonString(e,r){return new Ir().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Ir,e,r)}};l(Ir,"runtime",f),l(Ir,"typeName","yorkie.v1.WatchDocumentRequest"),l(Ir,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let Ph=Ir;const Rr=class Rr extends O{constructor(e){super();l(this,"body",{case:void 0});f.util.initPartial(e,this)}static fromBinary(e,r){return new Rr().fromBinary(e,r)}static fromJson(e,r){return new Rr().fromJson(e,r)}static fromJsonString(e,r){return new Rr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Rr,e,r)}};l(Rr,"runtime",f),l(Rr,"typeName","yorkie.v1.WatchDocumentResponse"),l(Rr,"fields",f.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:Hh,oneof:"body"},{no:2,name:"event",kind:"message",T:kh,oneof:"body"}]));let Vh=Rr;const Br=class Br extends O{constructor(e){super();l(this,"clientIds",[]);f.util.initPartial(e,this)}static fromBinary(e,r){return new Br().fromBinary(e,r)}static fromJson(e,r){return new Br().fromJson(e,r)}static fromJsonString(e,r){return new Br().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Br,e,r)}};l(Br,"runtime",f),l(Br,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),l(Br,"fields",f.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let Hh=Br;const zr=class zr extends O{constructor(e){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");f.util.initPartial(e,this)}static fromBinary(e,r){return new zr().fromBinary(e,r)}static fromJson(e,r){return new zr().fromJson(e,r)}static fromJsonString(e,r){return new zr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(zr,e,r)}};l(zr,"runtime",f),l(zr,"typeName","yorkie.v1.RemoveDocumentRequest"),l(zr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:pi}]));let Kh=zr;const Mr=class Mr extends O{constructor(e){super();l(this,"changePack");f.util.initPartial(e,this)}static fromBinary(e,r){return new Mr().fromBinary(e,r)}static fromJson(e,r){return new Mr().fromJson(e,r)}static fromJsonString(e,r){return new Mr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Mr,e,r)}};l(Mr,"runtime",f),l(Mr,"typeName","yorkie.v1.RemoveDocumentResponse"),l(Mr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:pi}]));let jh=Mr;const Ur=class Ur extends O{constructor(e){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");l(this,"pushOnly",!1);f.util.initPartial(e,this)}static fromBinary(e,r){return new Ur().fromBinary(e,r)}static fromJson(e,r){return new Ur().fromJson(e,r)}static fromJsonString(e,r){return new Ur().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Ur,e,r)}};l(Ur,"runtime",f),l(Ur,"typeName","yorkie.v1.PushPullChangesRequest"),l(Ur,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:pi},{no:4,name:"push_only",kind:"scalar",T:8}]));let $h=Ur;const Lr=class Lr extends O{constructor(e){super();l(this,"changePack");f.util.initPartial(e,this)}static fromBinary(e,r){return new Lr().fromBinary(e,r)}static fromJson(e,r){return new Lr().fromJson(e,r)}static fromJsonString(e,r){return new Lr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Lr,e,r)}};l(Lr,"runtime",f),l(Lr,"typeName","yorkie.v1.PushPullChangesResponse"),l(Lr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:pi}]));let Gh=Lr;const Jr=class Jr extends O{constructor(e){super();l(this,"clientId","");l(this,"channelKey","");f.util.initPartial(e,this)}static fromBinary(e,r){return new Jr().fromBinary(e,r)}static fromJson(e,r){return new Jr().fromJson(e,r)}static fromJsonString(e,r){return new Jr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Jr,e,r)}};l(Jr,"runtime",f),l(Jr,"typeName","yorkie.v1.AttachChannelRequest"),l(Jr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9}]));let Yh=Jr;const qr=class qr extends O{constructor(e){super();l(this,"sessionId","");l(this,"count",Z.zero);f.util.initPartial(e,this)}static fromBinary(e,r){return new qr().fromBinary(e,r)}static fromJson(e,r){return new qr().fromJson(e,r)}static fromJsonString(e,r){return new qr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(qr,e,r)}};l(qr,"runtime",f),l(qr,"typeName","yorkie.v1.AttachChannelResponse"),l(qr,"fields",f.util.newFieldList(()=>[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"count",kind:"scalar",T:3}]));let Xh=qr;const Pr=class Pr extends O{constructor(e){super();l(this,"clientId","");l(this,"channelKey","");l(this,"sessionId","");f.util.initPartial(e,this)}static fromBinary(e,r){return new Pr().fromBinary(e,r)}static fromJson(e,r){return new Pr().fromJson(e,r)}static fromJsonString(e,r){return new Pr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Pr,e,r)}};l(Pr,"runtime",f),l(Pr,"typeName","yorkie.v1.DetachChannelRequest"),l(Pr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}]));let Fh=Pr;const Vr=class Vr extends O{constructor(e){super();l(this,"count",Z.zero);f.util.initPartial(e,this)}static fromBinary(e,r){return new Vr().fromBinary(e,r)}static fromJson(e,r){return new Vr().fromJson(e,r)}static fromJsonString(e,r){return new Vr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Vr,e,r)}};l(Vr,"runtime",f),l(Vr,"typeName","yorkie.v1.DetachChannelResponse"),l(Vr,"fields",f.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3}]));let Zh=Vr;const Hr=class Hr extends O{constructor(e){super();l(this,"clientId","");l(this,"channelKey","");l(this,"sessionId","");f.util.initPartial(e,this)}static fromBinary(e,r){return new Hr().fromBinary(e,r)}static fromJson(e,r){return new Hr().fromJson(e,r)}static fromJsonString(e,r){return new Hr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Hr,e,r)}};l(Hr,"runtime",f),l(Hr,"typeName","yorkie.v1.RefreshChannelRequest"),l(Hr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}]));let Qh=Hr;const Kr=class Kr extends O{constructor(e){super();l(this,"count",Z.zero);f.util.initPartial(e,this)}static fromBinary(e,r){return new Kr().fromBinary(e,r)}static fromJson(e,r){return new Kr().fromJson(e,r)}static fromJsonString(e,r){return new Kr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Kr,e,r)}};l(Kr,"runtime",f),l(Kr,"typeName","yorkie.v1.RefreshChannelResponse"),l(Kr,"fields",f.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3}]));let _h=Kr;const jr=class jr extends O{constructor(e){super();l(this,"clientId","");l(this,"channelKey","");f.util.initPartial(e,this)}static fromBinary(e,r){return new jr().fromBinary(e,r)}static fromJson(e,r){return new jr().fromJson(e,r)}static fromJsonString(e,r){return new jr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(jr,e,r)}};l(jr,"runtime",f),l(jr,"typeName","yorkie.v1.WatchChannelRequest"),l(jr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9}]));let Wh=jr;const $r=class $r extends O{constructor(e){super();l(this,"body",{case:void 0});f.util.initPartial(e,this)}static fromBinary(e,r){return new $r().fromBinary(e,r)}static fromJson(e,r){return new $r().fromJson(e,r)}static fromJsonString(e,r){return new $r().fromJsonString(e,r)}static equals(e,r){return f.util.equals($r,e,r)}};l($r,"runtime",f),l($r,"typeName","yorkie.v1.WatchChannelResponse"),l($r,"fields",f.util.newFieldList(()=>[{no:1,name:"initialized",kind:"message",T:ed,oneof:"body"},{no:2,name:"event",kind:"message",T:Ch,oneof:"body"}]));let td=$r;const Gr=class Gr extends O{constructor(e){super();l(this,"count",Z.zero);l(this,"seq",Z.zero);f.util.initPartial(e,this)}static fromBinary(e,r){return new Gr().fromBinary(e,r)}static fromJson(e,r){return new Gr().fromJson(e,r)}static fromJsonString(e,r){return new Gr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Gr,e,r)}};l(Gr,"runtime",f),l(Gr,"typeName","yorkie.v1.WatchChannelInitialized"),l(Gr,"fields",f.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3},{no:2,name:"seq",kind:"scalar",T:3}]));let ed=Gr;const Yr=class Yr extends O{constructor(e){super();l(this,"clientId","");l(this,"channelKey","");l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(e,this)}static fromBinary(e,r){return new Yr().fromBinary(e,r)}static fromJson(e,r){return new Yr().fromJson(e,r)}static fromJsonString(e,r){return new Yr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Yr,e,r)}};l(Yr,"runtime",f),l(Yr,"typeName","yorkie.v1.BroadcastRequest"),l(Yr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let nd=Yr;const Xr=class Xr extends O{constructor(t){super(),f.util.initPartial(t,this)}static fromBinary(t,e){return new Xr().fromBinary(t,e)}static fromJson(t,e){return new Xr().fromJson(t,e)}static fromJsonString(t,e){return new Xr().fromJsonString(t,e)}static equals(t,e){return f.util.equals(Xr,t,e)}};l(Xr,"runtime",f),l(Xr,"typeName","yorkie.v1.BroadcastResponse"),l(Xr,"fields",f.util.newFieldList(()=>[]));let rd=Xr;const M1={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Rh,O:Bh,kind:It.Unary},deactivateClient:{name:"DeactivateClient",I:zh,O:Mh,kind:It.Unary},attachDocument:{name:"AttachDocument",I:Uh,O:Lh,kind:It.Unary},detachDocument:{name:"DetachDocument",I:Jh,O:qh,kind:It.Unary},removeDocument:{name:"RemoveDocument",I:Kh,O:jh,kind:It.Unary},pushPullChanges:{name:"PushPullChanges",I:$h,O:Gh,kind:It.Unary},watchDocument:{name:"WatchDocument",I:Ph,O:Vh,kind:It.ServerStreaming},attachChannel:{name:"AttachChannel",I:Yh,O:Xh,kind:It.Unary},detachChannel:{name:"DetachChannel",I:Fh,O:Zh,kind:It.Unary},refreshChannel:{name:"RefreshChannel",I:Qh,O:_h,kind:It.Unary},watchChannel:{name:"WatchChannel",I:Wh,O:td,kind:It.ServerStreaming},broadcast:{name:"Broadcast",I:nd,O:rd,kind:It.Unary}}},U1=f.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);f.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:ri}]);f.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:L1,repeated:!0}]);const L1=f.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"api_service",kind:"scalar",T:9},{no:4,name:"quota_metric",kind:"scalar",T:9},{no:5,name:"quota_id",kind:"scalar",T:9},{no:6,name:"quota_dimensions",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:7,name:"quota_value",kind:"scalar",T:3},{no:8,name:"future_quota_value",kind:"scalar",T:3,opt:!0}],{localName:"QuotaFailure_Violation"});f.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:J1,repeated:!0}]);const J1=f.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});f.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:q1,repeated:!0}]);const q1=f.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9},{no:4,name:"localized_message",kind:"message",T:V1}],{localName:"BadRequest_FieldViolation"});f.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:P1,repeated:!0}]);const P1=f.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"}),V1=f.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var S=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrNotAttached="ErrNotAttached",n.ErrNotDetached="ErrNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrDocumentSizeExceedsLimit="ErrDocumentSizeExceedsLimit",n.ErrDocumentSchemaValidationFailed="ErrDocumentSchemaValidationFailed",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n.ErrTooManySubscribers="ErrTooManySubscribers",n.ErrTooManyAttachments="ErrTooManyAttachments",n))(S||{});class b extends Error{constructor(e,r){super(r);l(this,"name","YorkieError");l(this,"stack");this.code=e,this.message=r,this.toString=()=>`[code=${this.code}]: ${this.message}`}}var Nn=(n=>(n.Put="put",n.Clear="clear",n))(Nn||{});const hg="000000000000000000000000",wn=24;class $e{constructor(t,e,r){l(this,"lamport");l(this,"delimiter");l(this,"actorID");this.lamport=t,this.delimiter=e,this.actorID=r}static of(t,e,r){return new $e(t,e,r)}static fromStruct(t){return $e.of(BigInt(t.lamport),t.delimiter,t.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(t){return new $e(this.lamport,this.delimiter,t)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(t){return this.compare(t)>0}equals(t){return this.compare(t)===0}compare(t){if(this.lamport>t.lamport)return 1;if(t.lamport>this.lamport)return-1;const e=this.actorID.localeCompare(t.actorID);return e!==0?e:this.delimiter>t.delimiter?1:t.delimiter>this.delimiter?-1:0}}const id=0n,xS=0,ad=9223372036854775807n,Os=new $e(id,xS,hg);function vn(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(t){switch(t){case'"':case"\\":return"\\"+t;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return t}})}class gl{constructor(t){l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");this.createdAt=t}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setCreatedAt(t){this.createdAt=t}setMovedAt(t){return!this.movedAt||t&&t.after(this.movedAt)?(this.movedAt=t,!0):!1}setRemovedAt(t){this.removedAt=t}remove(t){return t&&t.after(this.createdAt)&&(!this.removedAt||t.after(this.removedAt))?(this.removedAt=t,!0):!1}isRemoved(){return!!this.removedAt}getMetaUsage(){let t=0;return this.getCreatedAt()&&(t+=wn),this.getMovedAt()&&(t+=wn),this.getRemovedAt()&&(t+=wn),t}}class $i extends gl{constructor(t){super(t)}}class oc{constructor(t,e){l(this,"strKey");l(this,"value");this.strKey=t,this.value=e}static of(t,e){return new oc(t,e)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(t){return this.value.remove(t)}}class ks{constructor(){l(this,"nodeMapByKey");l(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new ks}set(t,e,r){let i;const a=this.nodeMapByKey.get(t);a&&!a.isRemoved()&&a.remove(r)&&(i=a.getValue());const s=oc.of(t,e);return this.nodeMapByCreatedAt.set(e.getCreatedAt().toIDString(),s),(!a||r.after(a.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(t,s),e.setMovedAt(r)),i}delete(t,e){if(!this.nodeMapByCreatedAt.has(t.toIDString()))throw new b(S.ErrInvalidArgument,`fail to find ${t.toIDString()}`);const r=this.nodeMapByCreatedAt.get(t.toIDString());return r.remove(e),r.getValue()}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return e.getStrKey()}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new b(S.ErrInvalidArgument,`fail to find ${t.getCreatedAt().toIDString()}`);const r=this.nodeMapByKey.get(e.getStrKey());e===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}deleteByKey(t,e){const r=this.nodeMapByKey.get(t);if(r&&r.remove(e))return r.getValue()}has(t){const e=this.nodeMapByKey.get(t);return e?!e.isRemoved():!1}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}get(t){const e=this.nodeMapByKey.get(t);if(!(!e||e.isRemoved()))return e}deepcopy(){const t=ks.create();for(const[,e]of this.nodeMapByCreatedAt)t.nodeMapByCreatedAt.set(e.getValue().getCreatedAt().toIDString(),oc.of(e.getStrKey(),e.getValue().deepcopy()));for(const[e,r]of this.nodeMapByKey)t.nodeMapByKey.set(e,t.nodeMapByCreatedAt.get(r.getValue().getCreatedAt().toIDString()));return t}*[Symbol.iterator](){for(const[,t]of this.nodeMapByCreatedAt)yield t}}class Zt extends $i{constructor(e,r){super(e);l(this,"memberNodes");this.memberNodes=r}static create(e,r){if(!r)return new Zt(e,ks.create());const i=ks.create();for(const[a,s]of Object.entries(r))i.set(a,s.deepcopy(),s.getCreatedAt());return new Zt(e,i)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,r,i){return this.memberNodes.set(e,r,i)}delete(e,r){return this.memberNodes.delete(e,r)}deleteByKey(e,r){return this.memberNodes.deleteByKey(e,r)}get(e){const r=this.memberNodes.get(e);return r==null?void 0:r.getValue()}getByID(e){const r=this.memberNodes.getByID(e);return r==null?void 0:r.getValue()}has(e){return this.memberNodes.has(e)}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const[r,i]of this)e.push(`"${vn(r)}":${i.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[r,i]of this){const{createdAt:a,value:s,type:o}=i.toJSForTest();e[r]={key:r,createdAt:a,value:s,type:o}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[r]of this)e.push(r);return e}toSortedJSON(){var i;const e=new Set;for(const[a]of this)e.add(a);const r=[];for(const a of Array.from(e).sort()){const s=(i=this.memberNodes.get(a))==null?void 0:i.getValue();r.push(`"${vn(a)}":${s.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=Zt.create(this.getCreatedAt());return e.memberNodes=this.memberNodes.deepcopy(),e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}getDescendants(e){for(const r of this.memberNodes){const i=r.getValue();if(e(i,this))return;i instanceof $i&&i.getDescendants(e)}}*[Symbol.iterator](){for(const e of this.memberNodes)e.isRemoved()||(yield[e.getStrKey(),e.getValue()])}}var gt=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(gt||{});class on{constructor(t,e){l(this,"parentCreatedAt");l(this,"executedAt");this.parentCreatedAt=t,this.executedAt=e}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new b(S.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(t){this.executedAt&&(this.executedAt=this.executedAt.setActor(t))}setExecutedAt(t){this.executedAt=t}}class DS{constructor(t){l(this,"value");l(this,"left");l(this,"right");l(this,"parent");l(this,"weight");this.value=t,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(t){this.left=t}setRight(t){this.right=t}setParent(t){this.parent=t}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(t){this.weight+=t}initWeight(){this.weight=this.getLength()}}class Yo{constructor(t){l(this,"root");this.root=t}get length(){return this.root?this.root.getWeight():0}find(t){if(!this.root||t<0)return[void 0,0];let e=this.root;for(;;)if(e.hasLeft()&&t<=e.getLeftWeight())e=e.getLeft();else if(e.hasRight()&&e.getLeftWeight()+e.getLength()<t)t-=e.getLeftWeight()+e.getLength(),e=e.getRight();else{t-=e.getLeftWeight();break}if(t>e.getLength())throw new b(S.ErrInvalidArgument,`out of index range: pos: ${t} > node.length: ${e.getLength()}`);return this.splayNode(e),[e,t]}indexOf(t){return!t||t!==this.root&&!t.hasLinks()?-1:(this.splayNode(t),this.root.getLeftWeight())}getRoot(){return this.root}insert(t){return this.insertAfter(this.root,t)}insertAfter(t,e){return t?(this.splayNode(t),this.root=e,e.setRight(t.getRight()),t.hasRight()&&t.getRight().setParent(e),e.setLeft(t),t.setParent(e),t.setRight(),this.updateWeight(t),this.updateWeight(e),e):(this.root=e,e)}updateWeight(t){t.initWeight(),t.hasLeft()&&t.increaseWeight(t.getLeftWeight()),t.hasRight()&&t.increaseWeight(t.getRightWeight())}updateTreeWeight(t){for(;t;)this.updateWeight(t),t=t.getParent()}splayNode(t){if(t)for(;;)if(this.isLeftChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t),this.rotateLeft(t);else if(this.isLeftChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t.getParent()),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t.getParent()),this.rotateLeft(t);else{this.isLeftChild(t)?this.rotateRight(t):this.isRightChild(t)&&this.rotateLeft(t),this.updateWeight(t);return}}delete(t){this.splayNode(t);const e=new Yo(t.getLeft());e.root&&e.root.setParent();const r=new Yo(t.getRight());if(r.root&&r.root.setParent(),e.root){const i=e.getRightmost();e.splayNode(i),e.root.setRight(r.root),r.root&&r.root.setParent(e.root),this.root=e.root}else this.root=r.root;t.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(t,e){if(!e){this.splayNode(t),this.cutOffRight(t);return}this.splayNode(t),this.splayNode(e),e.getLeft()!=t&&this.rotateRight(t),this.cutOffRight(t)}cutOffRight(t){const e=[];this.traversePostorder(t.getRight(),e);for(const r of e)r.initWeight();this.updateTreeWeight(t)}toTestString(){const t=[];return this.traverseInorder(this.root,t),t.map(e=>`[${e.getWeight()},${e.getLength()}]${e.getValue()||""}`).join("")}checkWeight(){const t=[];this.traverseInorder(this.root,t);for(const e of t)if(e.getWeight()!=e.getLength()+e.getLeftWeight()+e.getRightWeight())return!1;return!0}getRightmost(){let t=this.root;for(;t.hasRight();)t=t.getRight();return t}traverseInorder(t,e){t&&(this.traverseInorder(t.getLeft(),e),e.push(t),this.traverseInorder(t.getRight(),e))}traversePostorder(t,e){t&&(this.traversePostorder(t.getLeft(),e),this.traversePostorder(t.getRight(),e),e.push(t))}rotateLeft(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setRight(t.getLeft()),e.hasRight()&&e.getRight().setParent(e),t.setLeft(e),t.getLeft().setParent(t),this.updateWeight(e),this.updateWeight(t)}rotateRight(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setLeft(t.getRight()),e.hasLeft()&&e.getLeft().setParent(e),t.setRight(e),t.getRight().setParent(t),this.updateWeight(e),this.updateWeight(t)}isLeftChild(t){return t&&t.hasParent()?t.getParent().getLeft()===t:!1}isRightChild(t){return t&&t.hasParent()?t.getParent().getRight()===t:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Ke=null;try{Ke=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function F(n,t,e){this.low=n|0,this.high=t|0,this.unsigned=!!e}F.prototype.__isLong__;Object.defineProperty(F.prototype,"__isLong__",{value:!0});function _t(n){return(n&&n.__isLong__)===!0}function My(n){var t=Math.clz32(n&-n);return n?31-t:t}F.isLong=_t;var Uy={},Ly={};function ka(n,t){var e,r,i;return t?(n>>>=0,(i=0<=n&&n<256)&&(r=Ly[n],r)?r:(e=_(n,0,!0),i&&(Ly[n]=e),e)):(n|=0,(i=-128<=n&&n<128)&&(r=Uy[n],r)?r:(e=_(n,n<0?-1:0,!1),i&&(Uy[n]=e),e))}F.fromInt=ka;function je(n,t){if(isNaN(n))return t?ai:tn;if(t){if(n<0)return ai;if(n>=OS)return IS}else{if(n<=-qy)return se;if(n+1>=qy)return CS}return n<0?je(-n,t).neg():_(n%Cs|0,n/Cs|0,t)}F.fromNumber=je;function _(n,t,e){return new F(n,t,e)}F.fromBits=_;var lc=Math.pow;function dg(n,t,e){if(n.length===0)throw Error("empty string");if(typeof t=="number"?(e=t,t=!1):t=!!t,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return t?ai:tn;if(e=e||10,e<2||36<e)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return dg(n.substring(1),t,e).neg();for(var i=je(lc(e,8)),a=tn,s=0;s<n.length;s+=8){var o=Math.min(8,n.length-s),u=parseInt(n.substring(s,s+o),e);if(o<8){var c=je(lc(e,o));a=a.mul(c).add(je(u))}else a=a.mul(i),a=a.add(je(u))}return a.unsigned=t,a}F.fromString=dg;function Xe(n,t){return typeof n=="number"?je(n,t):typeof n=="string"?dg(n,t):_(n.low,n.high,typeof t=="boolean"?t:n.unsigned)}F.fromValue=Xe;var Jy=65536,H1=1<<24,Cs=Jy*Jy,OS=Cs*Cs,qy=OS/2,Py=ka(H1),tn=ka(0);F.ZERO=tn;var ai=ka(0,!0);F.UZERO=ai;var Wa=ka(1);F.ONE=Wa;var kS=ka(1,!0);F.UONE=kS;var sd=ka(-1);F.NEG_ONE=sd;var CS=_(-1,2147483647,!1);F.MAX_VALUE=CS;var IS=_(-1,-1,!0);F.MAX_UNSIGNED_VALUE=IS;var se=_(0,-2147483648,!1);F.MIN_VALUE=se;var D=F.prototype;D.toInt=function(){return this.unsigned?this.low>>>0:this.low};D.toNumber=function(){return this.unsigned?(this.high>>>0)*Cs+(this.low>>>0):this.high*Cs+(this.low>>>0)};D.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(se)){var e=je(t),r=this.div(e),i=r.mul(e).sub(this);return r.toString(t)+i.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var a=je(lc(t,6),this.unsigned),s=this,o="";;){var u=s.div(a),c=s.sub(u.mul(a)).toInt()>>>0,h=c.toString(t);if(s=u,s.isZero())return h+o;for(;h.length<6;)h="0"+h;o=""+h+o}};D.getHighBits=function(){return this.high};D.getHighBitsUnsigned=function(){return this.high>>>0};D.getLowBits=function(){return this.low};D.getLowBitsUnsigned=function(){return this.low>>>0};D.getNumBitsAbs=function(){if(this.isNegative())return this.eq(se)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1};D.isSafeInteger=function(){var t=this.high>>21;return t?this.unsigned?!1:t===-1&&!(this.low===0&&this.high===-2097152):!0};D.isZero=function(){return this.high===0&&this.low===0};D.eqz=D.isZero;D.isNegative=function(){return!this.unsigned&&this.high<0};D.isPositive=function(){return this.unsigned||this.high>=0};D.isOdd=function(){return(this.low&1)===1};D.isEven=function(){return(this.low&1)===0};D.equals=function(t){return _t(t)||(t=Xe(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};D.eq=D.equals;D.notEquals=function(t){return!this.eq(t)};D.neq=D.notEquals;D.ne=D.notEquals;D.lessThan=function(t){return this.comp(t)<0};D.lt=D.lessThan;D.lessThanOrEqual=function(t){return this.comp(t)<=0};D.lte=D.lessThanOrEqual;D.le=D.lessThanOrEqual;D.greaterThan=function(t){return this.comp(t)>0};D.gt=D.greaterThan;D.greaterThanOrEqual=function(t){return this.comp(t)>=0};D.gte=D.greaterThanOrEqual;D.ge=D.greaterThanOrEqual;D.compare=function(t){if(_t(t)||(t=Xe(t)),this.eq(t))return 0;var e=this.isNegative(),r=t.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};D.comp=D.compare;D.negate=function(){return!this.unsigned&&this.eq(se)?se:this.not().add(Wa)};D.neg=D.negate;D.add=function(t){_t(t)||(t=Xe(t));var e=this.high>>>16,r=this.high&65535,i=this.low>>>16,a=this.low&65535,s=t.high>>>16,o=t.high&65535,u=t.low>>>16,c=t.low&65535,h=0,m=0,d=0,g=0;return g+=a+c,d+=g>>>16,g&=65535,d+=i+u,m+=d>>>16,d&=65535,m+=r+o,h+=m>>>16,m&=65535,h+=e+s,h&=65535,_(d<<16|g,h<<16|m,this.unsigned)};D.subtract=function(t){return _t(t)||(t=Xe(t)),this.add(t.neg())};D.sub=D.subtract;D.multiply=function(t){if(this.isZero())return this;if(_t(t)||(t=Xe(t)),Ke){var e=Ke.mul(this.low,this.high,t.low,t.high);return _(e,Ke.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?ai:tn;if(this.eq(se))return t.isOdd()?se:tn;if(t.eq(se))return this.isOdd()?se:tn;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Py)&&t.lt(Py))return je(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,a=this.low>>>16,s=this.low&65535,o=t.high>>>16,u=t.high&65535,c=t.low>>>16,h=t.low&65535,m=0,d=0,g=0,T=0;return T+=s*h,g+=T>>>16,T&=65535,g+=a*h,d+=g>>>16,g&=65535,g+=s*c,d+=g>>>16,g&=65535,d+=i*h,m+=d>>>16,d&=65535,d+=a*c,m+=d>>>16,d&=65535,d+=s*u,m+=d>>>16,d&=65535,m+=r*h+i*c+a*u+s*o,m&=65535,_(g<<16|T,m<<16|d,this.unsigned)};D.mul=D.multiply;D.divide=function(t){if(_t(t)||(t=Xe(t)),t.isZero())throw Error("division by zero");if(Ke){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?Ke.div_u:Ke.div_s)(this.low,this.high,t.low,t.high);return _(e,Ke.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?ai:tn;var r,i,a;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return ai;if(t.gt(this.shru(1)))return kS;a=ai}else{if(this.eq(se)){if(t.eq(Wa)||t.eq(sd))return se;if(t.eq(se))return Wa;var s=this.shr(1);return r=s.div(t).shl(1),r.eq(tn)?t.isNegative()?Wa:sd:(i=this.sub(t.mul(r)),a=r.add(i.div(t)),a)}else if(t.eq(se))return this.unsigned?ai:tn;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();a=tn}for(i=this;i.gte(t);){r=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(r)/Math.LN2),u=o<=48?1:lc(2,o-48),c=je(r),h=c.mul(t);h.isNegative()||h.gt(i);)r-=u,c=je(r,this.unsigned),h=c.mul(t);c.isZero()&&(c=Wa),a=a.add(c),i=i.sub(h)}return a};D.div=D.divide;D.modulo=function(t){if(_t(t)||(t=Xe(t)),Ke){var e=(this.unsigned?Ke.rem_u:Ke.rem_s)(this.low,this.high,t.low,t.high);return _(e,Ke.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};D.mod=D.modulo;D.rem=D.modulo;D.not=function(){return _(~this.low,~this.high,this.unsigned)};D.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};D.clz=D.countLeadingZeros;D.countTrailingZeros=function(){return this.low?My(this.low):My(this.high)+32};D.ctz=D.countTrailingZeros;D.and=function(t){return _t(t)||(t=Xe(t)),_(this.low&t.low,this.high&t.high,this.unsigned)};D.or=function(t){return _t(t)||(t=Xe(t)),_(this.low|t.low,this.high|t.high,this.unsigned)};D.xor=function(t){return _t(t)||(t=Xe(t)),_(this.low^t.low,this.high^t.high,this.unsigned)};D.shiftLeft=function(t){return _t(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?_(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):_(0,this.low<<t-32,this.unsigned)};D.shl=D.shiftLeft;D.shiftRight=function(t){return _t(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?_(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):_(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};D.shr=D.shiftRight;D.shiftRightUnsigned=function(t){return _t(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?_(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?_(this.high,0,this.unsigned):_(this.high>>>t-32,0,this.unsigned)};D.shru=D.shiftRightUnsigned;D.shr_u=D.shiftRightUnsigned;D.rotateLeft=function(t){var e;return _t(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?_(this.high,this.low,this.unsigned):t<32?(e=32-t,_(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,_(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))};D.rotl=D.rotateLeft;D.rotateRight=function(t){var e;return _t(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?_(this.high,this.low,this.unsigned):t<32?(e=32-t,_(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,_(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))};D.rotr=D.rotateRight;D.toSigned=function(){return this.unsigned?_(this.low,this.high,!1):this};D.toUnsigned=function(){return this.unsigned?this:_(this.low,this.high,!0)};D.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};D.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};D.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};F.fromBytes=function(t,e,r){return r?F.fromBytesLE(t,e):F.fromBytesBE(t,e)};F.fromBytesLE=function(t,e){return new F(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)};F.fromBytesBE=function(t,e){return new F(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};typeof BigInt=="function"&&(F.fromBigInt=function(t,e){var r=Number(BigInt.asIntN(32,t)),i=Number(BigInt.asIntN(32,t>>BigInt(32)));return _(r,i,e)},F.fromValue=function(t,e){return typeof t=="bigint"?F.fromBigInt(t,e):Xe(t,e)},D.toBigInt=function(){var t=BigInt(this.low>>>0),e=BigInt(this.unsigned?this.high>>>0:this.high);return e<<BigInt(32)|t});var lt=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(lt||{});class vt extends gl{constructor(e,r){super(r);l(this,"valueType");l(this,"value");this.valueType=vt.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,r){return new vt(e,r)}static valueFromBytes(e,r){switch(e){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const i=new DataView(r.buffer);return r.forEach(function(a,s){i.setUint8(s,a)}),i.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return F.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(F.fromBytesLE(Array.from(r),!0).toNumber());default:throw new b(S.ErrUnimplemented,`unimplemented type: ${e}`)}}getValueSize(){switch(this.valueType){case 0:return 8;case 1:return 4;case 2:return 4;case 3:return 8;case 4:return 8;case 5:return this.value.length*2;case 6:return this.value.length;case 7:return 8;default:throw new b(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}getDataSize(){return{data:this.getValueSize(),meta:this.getMetaUsage()}}toJSON(){return this.valueType===5?`"${vn(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=vt.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof F)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return vt.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const e=this.value,r=F.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new b(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class uc extends DS{constructor(e){super(e);l(this,"prev");l(this,"next");l(this,"movedFrom");this.value=e}static createAfter(e,r){const i=new uc(r),a=e.next;return e.next=i,i.prev=e,i.next=a,a&&(a.prev=i),i}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getMovedFrom(){return this.movedFrom}setMovedFrom(e){this.movedFrom=e}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Xo{constructor(){l(this,"dummyHead");l(this,"last");l(this,"nodeMapByIndex");l(this,"nodeMapByCreatedAt");const t=vt.of(0,Os);t.setRemovedAt(Os),this.dummyHead=new uc(t),this.last=this.dummyHead,this.nodeMapByIndex=new Yo,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Xo}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(t,e){let r=this.nodeMapByCreatedAt.get(t.toIDString());if(!r)throw new b(S.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);for(;r.getValue().getMovedAt()&&r.getValue().getMovedAt().after(e)&&r.getMovedFrom();)r=r.getMovedFrom();for(;r.getNext()&&r.getNext().getPositionedAt().after(e);)r=r.getNext();return r}release(t){this.last===t&&(this.last=t.getPrev()),t.release(),this.nodeMapByIndex.delete(t),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}insertAfter(t,e,r=e.getCreatedAt()){const i=this.findNextBeforeExecutedAt(t,r),a=uc.createAfter(i,e);return i===this.last&&(this.last=a),this.nodeMapByIndex.insertAfter(i,a),this.nodeMapByCreatedAt.set(a.getCreatedAt().toIDString(),a),a}moveAfter(t,e,r){let i=this.nodeMapByCreatedAt.get(t.toIDString());if(!i)throw new b(S.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);let a=this.nodeMapByCreatedAt.get(e.toIDString());if(!a)throw new b(S.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);if(i!==a&&r.after(a.getPositionedAt())){const s=a.getPrev();let o=a.getNext();for(this.release(a),a=this.insertAfter(i.getCreatedAt(),a.getValue(),r),a.getValue().setMovedAt(r),a.setMovedFrom(s);o&&o.getPositionedAt().after(r);)i=a,a=o,o=a.getNext(),this.release(a),a=this.insertAfter(i.getCreatedAt(),a.getValue(),r),a.getValue().setMovedAt(r),a.setMovedFrom(s)}}insert(t){this.insertAfter(this.last.getCreatedAt(),t)}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return String(this.nodeMapByIndex.indexOf(e))}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new b(S.ErrInvalidArgument,`fail to find the given createdAt: ${t.getCreatedAt().toIDString()}`);this.release(e)}getByIndex(t){if(t>=this.length)return;const[e,r]=this.nodeMapByIndex.find(t);let i=e;if(t===0&&e===this.dummyHead||r>0)do i&&(i=i.getNext());while(i&&i.isRemoved());return i}getPrevCreatedAt(t){let e=this.nodeMapByCreatedAt.get(t.toIDString());do e=e.getPrev();while(this.dummyHead!==e&&e.isRemoved());return e.getValue().getCreatedAt()}delete(t,e){const r=this.nodeMapByCreatedAt.get(t.toIDString()),i=r.isRemoved();return r.remove(e)&&!i&&this.nodeMapByIndex.splayNode(r),r.getValue()}set(t,e,r){const i=this.nodeMapByCreatedAt.get(t.toIDString());if(!i)throw new b(S.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);return this.insertAfter(i.getCreatedAt(),e,r),this.delete(t,r)}deleteByIndex(t,e){const r=this.getByIndex(t);if(r)return r.remove(e)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const t=[];for(const e of this){const r=`${e.getCreatedAt().toIDString()}:${e.getValue().toJSON()}`;e.isRemoved()?t.push(`{${r}}`):t.push(`[${r}]`)}return t.join("")}*[Symbol.iterator](){let t=this.dummyHead.getNext();for(;t;)yield t,t=t.getNext()}}class Qt extends $i{constructor(e,r){super(e);l(this,"elements");this.elements=r}static create(e,r){if(!r)return new Qt(e,Xo.create());const i=Xo.create();for(const a of r)i.insertAfter(i.getLastCreatedAt(),a.deepcopy());return new Qt(e,i)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,r,i){this.elements.insertAfter(e,r,i)}moveAfter(e,r,i){this.elements.moveAfter(e,r,i)}get(e){const r=this.elements.getByIndex(e);return r==null?void 0:r.getValue()}getByID(e){const r=this.elements.getByID(e);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,r){return this.elements.delete(e,r)}deleteByIndex(e,r){return this.elements.deleteByIndex(e,r)}set(e,r,i){return this.elements.set(e,r,i)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const r of this.elements){const i=r.getValue();if(e(i,this))return;i instanceof $i&&i.getDescendants(e)}}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const r of this)e.push(r.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let r=0;r<this.length;r++){const{createdAt:i,value:a,type:s}=this.get(r).toJSForTest();e[r]={key:String(r),createdAt:i,value:a,type:s}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=Qt.create(this.getCreatedAt());for(const r of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),r.getValue().deepcopy());return e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}}class Wi extends on{constructor(e,r,i,a){super(e,a);l(this,"prevCreatedAt");l(this,"value");this.prevCreatedAt=r,this.value=i}static create(e,r,i,a){return new Wi(e,r,i,a)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Qt))throw new b(S.ErrInvalidArgument,"fail to execute, only array can execute add");const i=r,a=this.value.deepcopy();return i.insertAfter(this.prevCreatedAt,a,this.getExecutedAt()),e.registerElement(a,i),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(i.subPathOf(this.getEffectedCreatedAt()))}],reverseOp:this.toReverseOperation()}}toReverseOperation(){return xn.create(this.getParentCreatedAt(),this.value.getCreatedAt())}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}setPrevCreatedAt(e){this.prevCreatedAt=e}}class xn extends on{constructor(e,r,i){super(e,i);l(this,"createdAt");this.createdAt=r}static create(e,r,i){return new xn(e,r,i)}execute(e,r){var c;const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof $i))throw new b(S.ErrInvalidArgument,`only object and array can execute remove: ${i}`);if(r===gt.UndoRedo){let h=i.getByID(this.createdAt);for(;h;){if(h.getRemovedAt())return;h=(c=e.findElementPairByCreatedAt(h.getCreatedAt()))==null?void 0:c.parent}}const a=i.subPathOf(this.createdAt),s=this.toReverseOperation(i),o=i.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(o),{opInfos:i instanceof Qt?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(a)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:a}],reverseOp:s}}toReverseOperation(e){if(e instanceof Qt){const r=e.getByID(this.createdAt);if(r!==void 0){const i=e.getPrevCreatedAt(this.createdAt);return Wi.create(this.getParentCreatedAt(),i,r.deepcopy())}}if(e instanceof Zt){const r=e.subPathOf(this.createdAt);if(r!==void 0){const i=e.get(r);if(i!==void 0)return Ea.create(r,i.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}setCreatedAt(e){this.createdAt=e}}class Ea extends on{constructor(e,r,i,a){super(i,a);l(this,"key");l(this,"value");this.key=e,this.value=r}static create(e,r,i,a){return new Ea(e,r,i,a)}execute(e,r){var c;const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof Zt))throw new b(S.ErrInvalidArgument,"fail to execute, only object can execute set");if(r===gt.UndoRedo){let h=i;for(;h;){if(h.getRemovedAt())return;h=(c=e.findElementPairByCreatedAt(h.getCreatedAt()))==null?void 0:c.parent}}const a=i.get(this.key),s=this.toReverseOperation(a),o=this.value.deepcopy(),u=i.set(this.key,o,this.getExecutedAt());return r===gt.UndoRedo&&e.findByCreatedAt(o.getCreatedAt())&&e.deregisterElement(o),e.registerElement(o,i),u&&e.registerRemovedElement(u),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:s}}toReverseOperation(e){let r=xn.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(r=Ea.create(this.key,e.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class en extends on{constructor(e,r,i,a){super(e,a);l(this,"prevCreatedAt");l(this,"createdAt");this.prevCreatedAt=r,this.createdAt=i}static create(e,r,i,a){return new en(e,r,i,a)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Qt))throw new b(S.ErrInvalidArgument,"fail to execute, only array can execute move");const i=r,a=this.toReverseOperation(i),s=Number(i.subPathOf(this.createdAt));i.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const o=Number(i.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:o,previousIndex:s}],reverseOp:a}}toReverseOperation(e){const r=e.getPrevCreatedAt(this.createdAt);return en.create(this.getParentCreatedAt(),r,this.createdAt)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}setPrevCreatedAt(e){this.prevCreatedAt=e}setCreatedAt(e){this.createdAt=e}}class Mi{constructor(t,e,r,i){l(this,"key");l(this,"value");l(this,"updatedAt");l(this,"_isRemoved");this.key=t,this.value=e,this.updatedAt=r,this._isRemoved=i}static of(t,e,r,i){return new Mi(t,e,r,i)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}getDataSize(){return{data:(this.key.length+this.value.length)*2,meta:wn}}}class gi{constructor(){l(this,"nodeMapByKey");l(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new gi}getNodeMapByKey(){return this.nodeMapByKey}set(t,e,r){const i=this.nodeMapByKey.get(t);if(i&&i.isRemoved()&&r.after(i.getUpdatedAt())&&(this.numberOfRemovedElement-=1),i===void 0||r.after(i.getUpdatedAt())){const a=Mi.of(t,e,r,!1);return this.nodeMapByKey.set(t,a),i!==void 0&&i.isRemoved()?[i,a]:[void 0,a]}return i.isRemoved()?[i,void 0]:[void 0,void 0]}setInternal(t,e,r,i){const a=Mi.of(t,e,r,i);this.nodeMapByKey.set(t,a),i&&this.numberOfRemovedElement++}remove(t,e){const r=this.nodeMapByKey.get(t),i=[];if(r===void 0||e.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const o=Mi.of(t,"",e,!0);return this.nodeMapByKey.set(t,o),i.push(o),i}const a=r.isRemoved();a||(this.numberOfRemovedElement+=1),a&&i.push(r);const s=Mi.of(t,r.getValue(),e,!0);return this.nodeMapByKey.set(t,s),i.push(s),i}return i}has(t){if(this.nodeMapByKey.has(t)){const e=this.nodeMapByKey.get(t);return e!==void 0&&!e.isRemoved()}return!1}get(t){if(this.nodeMapByKey.has(t))return this.nodeMapByKey.get(t).getValue()}deepcopy(){const t=new gi;for(const[,e]of this.nodeMapByKey)t.setInternal(e.getKey(),e.getValue(),e.getUpdatedAt(),e.isRemoved());return t}toJSON(){if(!this.size())return"{}";const t=[];for(const[e,r]of this.nodeMapByKey)r.isRemoved()||t.push(`"${vn(e)}":"${vn(r.getValue())}"`);return`{${t.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const t={};for(const[e,r]of this.nodeMapByKey)r.isRemoved()||(t[e]=r.getValue());return t}*[Symbol.iterator](){for(const[,t]of this.nodeMapByKey)yield t}purge(t){const e=this.nodeMapByKey.get(t.getKey());e==null||e.toIDString()!=t.toIDString()||(this.nodeMapByKey.delete(t.getKey()),this.numberOfRemovedElement--)}}function Ze(n){if(n instanceof Map){const t=Array.from(n);return new Map(JSON.parse(JSON.stringify(t)))}return JSON.parse(JSON.stringify(n))}const RS=n=>n?Object.entries(n).length===0:!0,Is=n=>{const t={};for(const[e,r]of Object.entries(n))t[e]=JSON.stringify(r);return t},li=n=>{const t={};for(const[e,r]of Object.entries(n))t[e]=JSON.parse(r);return t};function K1(n){return n?Vy(n.live)+Vy(n.gc):0}function Vy(n){return n.data+n.meta}function $t(n,...t){for(const e of t)n.data+=e.data,n.meta+=e.meta}function ua(n,t){n.data-=t.data,n.meta-=t.meta}class Fo{constructor(t){l(this,"attributes");l(this,"content");this.attributes=gi.create(),this.content=t}static create(t){return new Fo(t)}get length(){return this.content.length}substring(t,e){const r=new Fo(this.content.substring(t,e));return r.attributes=this.attributes.deepcopy(),r}setAttr(t,e,r){return this.attributes.set(t,e,r)}getAttrs(){return this.attributes}toString(){return this.content}getDataSize(){const t={data:0,meta:0};t.data+=this.content.length*2;for(const e of this.attributes){const r=e.getDataSize();t.meta+=r.meta,t.data+=r.data}return t}toJSON(){const t=vn(this.content),e=this.attributes.toObject(),r=[];for(const[i,a]of Object.entries(e)){const s=JSON.parse(a),o=typeof s=="string"?`"${vn(i)}":"${vn(s)}"`:`"${vn(i)}":${String(s)}`;r.push(o)}return r.sort(),r.length===0?`{"val":"${t}"}`:`{"attrs":{${r.join(",")}},"val":"${t}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(t){this.attributes&&t instanceof Mi&&this.attributes.purge(t)}getGCPairs(){const t=[];for(const e of this.attributes)e.getRemovedAt()&&t.push({parent:this,child:e});return t}}class Ae extends gl{constructor(e,r){super(r);l(this,"rgaTreeSplit");this.rgaTreeSplit=e}static create(e,r){return new Ae(e,r)}edit(e,r,i,a,s){const o=r?Fo.create(r):void 0;if(o&&a)for(const[g,T]of Object.entries(a))o.setAttr(g,T,i);const[u,c,h,m]=this.rgaTreeSplit.edit(e,i,o,s);return[m.map(g=>({...g,value:g.value?{attributes:li(g.value.getAttributes()),content:g.value.getContent()}:{attributes:void 0,content:""},type:"content"})),c,h,[u,u]]}setStyle(e,r,i,a){const s={data:0,meta:0},[,o,u]=this.rgaTreeSplit.findNodeWithSplit(e[1],i),[,c,h]=this.rgaTreeSplit.findNodeWithSplit(e[0],i);$t(s,o,c);const m=[],d=this.rgaTreeSplit.findBetween(h,u),g=[];for(const A of d){const x=A.getCreatedAt().getActorID();let p=ad;a!=null&&(p=a.get(x)?a.get(x):0n),A.canStyle(i,p)&&g.push(A)}const T=[];for(const A of g){if(A.isRemoved())continue;const[x,p]=this.rgaTreeSplit.findIndexesFromRange(A.createPosRange());m.push({type:"style",actor:i.getActorID(),from:x,to:p,value:{attributes:li(r)}});for(const[y,v]of Object.entries(r)){const[w]=A.getValue().setAttr(y,v,i);w!==void 0&&T.push({parent:A.getValue(),child:w});const k=A.getValue().getAttrs().getNodeMapByKey().get(y);k!==void 0&&$t(s,k.getDataSize())}}return[T,s,m]}indexRangeToPosRange(e,r){const i=this.rgaTreeSplit.indexToPos(e);return e===r?[i,i]:[i,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}getDataSize(){const e={data:0,meta:0};for(const r of this.rgaTreeSplit){if(r.isRemoved())continue;const i=r.getDataSize();e.data+=i.data,e.meta+=i.meta}return{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){const e=[];for(const r of this.rgaTreeSplit)r.isRemoved()||e.push(r.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const i=r.getValue();e.push({attributes:li(i.getAttributes()),content:i.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new Ae(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:r});for(const i of r.getValue().getGCPairs())e.push(i)}return e}}class ml extends on{constructor(e,r,i,a,s,o){super(e,o);l(this,"fromPos");l(this,"toPos");l(this,"content");l(this,"attributes");this.fromPos=r,this.toPos=i,this.content=a,this.attributes=s}static create(e,r,i,a,s,o){return new ml(e,r,i,a,s,o)}execute(e,r,i){const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Ae))throw new b(S.ErrInvalidArgument,"fail to execute, only Text can execute edit");const s=a,[o,u,c]=s.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),i);e.acc(c);for(const h of u)e.registerGCPair(h);return{opInfos:o.map(({from:h,to:m,value:d})=>({type:"edit",from:h,to:m,value:d,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),a=this.content;return`${e}.EDIT(${r},${i},${a})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}}class yl extends on{constructor(e,r,i,a,s){super(e,s);l(this,"fromPos");l(this,"toPos");l(this,"attributes");this.fromPos=r,this.toPos=i,this.attributes=a}static create(e,r,i,a,s){return new yl(e,r,i,a,s)}execute(e,r,i){const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Ae))throw new b(S.ErrInvalidArgument,"fail to execute, only Text can execute edit");const s=a,[o,u,c]=s.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),i);e.acc(u);for(const h of o)e.registerGCPair(h);return{opInfos:c.map(({from:h,to:m,value:d})=>({type:"style",from:h,to:m,value:d,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),a=this.attributes;return`${e}.STYL(${r},${i},${JSON.stringify(a)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}const j1=2,$1="root",An="text";function Qs(n,t,e=!1){let r=0;const i=e?n.allChildren:n.children;for(let a=0;a<t;a++){const s=i[a];!s||!e&&s.isRemoved||(r+=s.paddedSize(e))}return r}class G1{constructor(t,e=[]){l(this,"type");l(this,"parent");l(this,"_children");l(this,"visibleSize");l(this,"totalSize");if(this.type=t,this.visibleSize=0,this.totalSize=0,this._children=e,this.isText&&this._children.length>0)throw new b(S.ErrRefused,"Text node cannot have children")}updateAncestorsSize(t,e=!1){let r=this.parent;for(;r;){if(e)r.totalSize+=t;else if(r.visibleSize+=t,r.isRemoved)break;r=r.parent}}updateDescendantsSize(t=!1){let e=0;for(const r of this._children){const i=r.updateDescendantsSize(t);!t&&r.isRemoved||(e+=i)}return t?this.totalSize+=e:this.visibleSize+=e,this.paddedSize(t)}get isText(){return this.type===An}paddedSize(t=!1){let e=this.visibleSize;return t&&(e=this.totalSize),this.isText||(e+=j1),e}isAncestorOf(t){return Y1(this,t)}get nextSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t+1];if(e)return e}get prevSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t-1];if(e)return e}splitText(t,e){const r={data:0,meta:0};if(t===0||t===this.visibleSize)return[void 0,r];const i=this.value.slice(0,t),a=this.value.slice(t);if(!a.length)return[void 0,r];const s=this.getDataSize();this.value=i;const o=this.cloneText(t+e);return o.value=a,this.parent.insertAfterInternal(o,this),$t(r,this.getDataSize(),o.getDataSize()),ua(r,s),[o,r]}get children(){return this._children.filter(t=>!t.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(t=>t.isText)}getChildrenText(){return this.isText?this.value:this.hasTextChild()?this.children.map(t=>t.value).join(""):""}append(...t){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");this._children.push(...t);for(const e of t)e.parent=this,e.updateAncestorsSize(e.paddedSize()),e.updateAncestorsSize(e.paddedSize(!0),!0)}prepend(...t){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");this._children.unshift(...t);for(const e of t)e.parent=this}insertBefore(t,e){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(e);if(r===-1)throw new b(S.ErrInvalidArgument,"child not found");this.insertAtInternal(t,r),t.updateAncestorsSize(t.paddedSize()),t.updateAncestorsSize(t.paddedSize(!0),!0)}insertAfter(t,e){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(e);if(r===-1)throw new b(S.ErrInvalidArgument,"child not found");this.insertAtInternal(t,r+1),t.updateAncestorsSize(t.paddedSize()),t.updateAncestorsSize(t.paddedSize(!0),!0)}insertAt(t,e){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");this.insertAtInternal(t,e),t.updateAncestorsSize(t.paddedSize()),t.updateAncestorsSize(t.paddedSize(!0),!0)}removeChild(t){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");const e=this._children.indexOf(t);if(e===-1)throw new b(S.ErrInvalidArgument,"child not found");this._children.splice(e,1),t.updateAncestorsSize(-t.paddedSize(!0),!0),t.parent=void 0}splitElement(t,e){const r={data:0,meta:0},i=this.getDataSize(),a=this.cloneElement(e);this.parent.insertAfterInternal(a,this),a.updateAncestorsSize(a.paddedSize()),a.updateAncestorsSize(a.paddedSize(!0),!0);const s=this.children.slice(0,t),o=this.children.slice(t);this._children=s,a._children=o,this.visibleSize=this._children.reduce((u,c)=>u+c.paddedSize(),0),this.totalSize=this._children.reduce((u,c)=>u+c.paddedSize(!0),0),a.visibleSize=a._children.reduce((u,c)=>u+c.paddedSize(!0),0),a.totalSize=a._children.reduce((u,c)=>u+c.paddedSize(!0),0);for(const u of a._children)u.parent=a;return $t(r,this.getDataSize(),a.getDataSize()),ua(r,i),[a,r]}insertAfterInternal(t,e){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(e);if(r===-1)throw new b(S.ErrInvalidArgument,"child not found");this.insertAtInternal(t,r+1)}insertAtInternal(t,e){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");this._children.splice(e,0,t),t.parent=this}findOffset(t,e=!1){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");if(e)return this._children.indexOf(t);if(t.isRemoved){const r=this._children.indexOf(t);return this.allChildren.splice(0,r).filter(a=>!a.isRemoved).length}return this.children.indexOf(t)}findBranchOffset(t){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");let e=t;for(;e;){const r=this._children.indexOf(e);if(r!==-1)return r;e=e.parent}return-1}}function Y1(n,t){if(n===t)return!1;for(;t.parent;){if(t.parent===n)return!0;t=t.parent}return!1}var Nt=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(Nt||{});function BS(n,t,e,r,i=!1){if(t>e)throw new b(S.ErrInvalidArgument,`from is greater than to: ${t} > ${e}`);const a=i?n.totalSize:n.visibleSize;if(t>a)throw new b(S.ErrInvalidArgument,`from is out of range: ${t} > ${a}`);if(e>a)throw new b(S.ErrInvalidArgument,`to is out of range: ${e} > ${a}`);if(t===e)return;let s=0;const o=i?n._children:n.children;for(const u of o){if(t-u.paddedSize(i)<s&&s<e){const c=u.isText?t-s:t-s-1,h=u.isText?e-s:e-s-1,m=i?u.totalSize:u.visibleSize,d=!u.isText&&c<0,g=!u.isText&&h>m;(u.isText||d)&&r([u,u.isText?"Text":"Start"],g),BS(u,Math.max(0,c),Math.min(h,m),r,i),g&&r([u,"End"],g)}s+=u.paddedSize(i)}}function zS(n,t,e=0){for(const r of n.children)zS(r,t,e+1);t(n,e)}function Bc(n,t,e=0){for(const r of n._children)Bc(r,t,e+1);t(n,e)}function od(n,t,e=!0){if(t>n.visibleSize)throw new b(S.ErrInvalidArgument,`index is out of range: ${t} > ${n.visibleSize}`);if(n.isText)return{node:n,offset:t};let r=0,i=0;for(const a of n.children){if(e&&a.isText&&a.visibleSize>=t-i)return od(a,t-i,e);if(t===i)return{node:n,offset:r};if(!e&&a.paddedSize()===t-i)return{node:n,offset:r+1};if(a.paddedSize()>t-i)return od(a,t-i-1,e);i+=a.paddedSize(),r+=1}return{node:n,offset:r}}function MS(n){return n.isText||n.children.length===0?n:MS(n.children[0])}function X1(n,t){if(n.visibleSize<t)throw new b(S.ErrInvalidArgument,"unacceptable path");for(let e=0;e<n.children.length;e++){const r=n.children[e];if(r.visibleSize<t)t-=r.visibleSize;else{n=r;break}}return{node:n,offset:t}}class F1{constructor(t){l(this,"root");this.root=t}tokensBetween(t,e,r,i=!1){BS(this.root,t,e,r,i)}traverse(t){zS(this.root,t,0)}traverseAll(t){Bc(this.root,t,0)}findTreePos(t,e=!0){return od(this.root,t,e)}treePosToPath(t){const e=[];let r=t.node;if(r.isText){const i=r.parent.findOffset(r);if(i===-1)throw new b(S.ErrInvalidArgument,"invalid treePos");const a=Qs(r.parent,i);e.push(a+t.offset),r=r.parent}else if(r.hasTextChild()){const i=Qs(r,t.offset);e.push(i)}else e.push(t.offset);for(;r.parent;){const i=r.parent.findOffset(r);if(i===-1)throw new b(S.ErrInvalidArgument,"invalid treePos");e.push(i),r=r.parent}return e.reverse()}pathToIndex(t){const e=this.pathToTreePos(t);return this.indexOf(e)}pathToTreePos(t){if(!t.length)throw new b(S.ErrInvalidArgument,"unacceptable path");let e=this.root;for(let r=0;r<t.length-1;r++){const i=t[r];if(e=e.children[i],!e)throw new b(S.ErrInvalidArgument,"unacceptable path")}if(e.hasTextChild())return X1(e,t[t.length-1]);if(e.children.length<t[t.length-1])throw new b(S.ErrInvalidArgument,"unacceptable path");return{node:e,offset:t[t.length-1]}}getRoot(){return this.root}get size(){return this.root.visibleSize}findPostorderRight(t){const{node:e,offset:r}=t;if(e.isText){if(e.visibleSize===r){const i=e.nextSibling;return i||e.parent}return e}return e.children.length===r?e:MS(e.children[r])}indexOf(t,e=!1){let{node:r}=t;const{offset:i}=t;let a=0,s=1;if(r.isText){a+=i;const o=r.parent,u=o.findOffset(r,e);if(u===-1)throw new b(S.ErrInvalidArgument,"invalid pos");a+=Qs(o,u,e),r=r.parent}else a+=Qs(r,i,e);for(;r!=null&&r.parent;){const o=r.parent,u=o.findOffset(r,e);if(u===-1)throw new b(S.ErrInvalidArgument,"invalid pos");a+=Qs(o,u,e),s++,r=r.parent}return a+s-1}indexToPath(t){const e=this.findTreePos(t);return this.treePosToPath(e)}}const Z1=(n,t)=>n===t?0:n<t?-1:1;class Q1{constructor(t,e,r){l(this,"key");l(this,"value");l(this,"left");l(this,"right");l(this,"isRed");this.key=t,this.value=e,this.isRed=r}}class _1{constructor(t){l(this,"stack");this.stack=[],this.traverseInorder(t)}traverseInorder(t){t&&(this.traverseInorder(t.left),this.stack.push({key:t.key,value:t.value}),this.traverseInorder(t.right))}}class US{constructor(t){l(this,"root");l(this,"comparator");l(this,"counter");this.comparator=typeof t<"u"?t:Z1,this.counter=0}put(t,e){return this.root=this.putInternal(t,e,this.root),this.root.isRed=!1,e}get(t){const e=this.getInternal(t,this.root);return e?e.value:void 0}remove(t){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,t),this.root&&(this.root.isRed=!1)}getIterator(){return new _1(this.root)}values(){const t=[];for(const e of this.getIterator().stack)t.push(e.value);return t}floorEntry(t){let e=this.root,r;for(;e;){const i=this.comparator(t,e.key);if(i===0)return e;i<0?e=e.left:(r=e,e=e.right)}return r}lastEntry(){if(!this.root)return this.root;let t=this.root;for(;t.right;)t=t.right;return t}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(t,e){for(;e;){const r=this.comparator(t,e.key);if(r===0)return e;r<0?e=e.left:r>0&&(e=e.right)}}putInternal(t,e,r){if(!r)return this.counter+=1,new Q1(t,e,!0);const i=this.comparator(t,r.key);return i<0?r.left=this.putInternal(t,e,r.left):i>0?r.right=this.putInternal(t,e,r.right):r.value=e,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(t,e){if(this.comparator(e,t.key)<0)!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeInternal(t.left,e);else{if(this.isRed(t.left)&&(t=this.rotateRight(t)),this.comparator(e,t.key)===0&&!t.right){this.counter-=1;return}if(!this.isRed(t.right)&&!this.isRed(t.right.left)&&(t=this.moveRedRight(t)),this.comparator(e,t.key)===0){this.counter-=1;const r=this.min(t.right);t.value=r.value,t.key=r.key,t.right=this.removeMin(t.right)}else t.right=this.removeInternal(t.right,e)}return this.fixUp(t)}min(t){return t.left?this.min(t.left):t}removeMin(t){if(t.left)return!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeMin(t.left),this.fixUp(t)}fixUp(t){return this.isRed(t.right)&&(t=this.rotateLeft(t)),this.isRed(t.left)&&this.isRed(t.left.left)&&(t=this.rotateRight(t)),this.isRed(t.left)&&this.isRed(t.right)&&this.flipColors(t),t}moveRedLeft(t){return this.flipColors(t),this.isRed(t.right.left)&&(t.right=this.rotateRight(t.right),t=this.rotateLeft(t),this.flipColors(t)),t}moveRedRight(t){return this.flipColors(t),this.isRed(t.left.left)&&(t=this.rotateRight(t),this.flipColors(t)),t}isRed(t){return t&&t.isRed}rotateLeft(t){const e=t.right;return t.right=e.left,e.left=t,e.isRed=e.left.isRed,e.left.isRed=!0,e}rotateRight(t){const e=t.left;return t.left=e.right,e.right=t,e.isRed=e.right.isRed,e.right.isRed=!0,e}flipColors(t){t.isRed=!t.isRed,t.left.isRed=!t.left.isRed,t.right.isRed=!t.right.isRed}}class nn{constructor(t,e){l(this,"parentID");l(this,"leftSiblingID");this.parentID=t,this.leftSiblingID=e}static of(t,e){return new nn(t,e)}static fromTreePos(t){const{offset:e}=t;let{node:r}=t,i;return r.isText?(r.parent.children[0]===r&&e===0?i=r.parent:i=r,r=r.parent):e===0?i=r:i=r.children[e-1],nn.of(r.id,Yt.of(i.getCreatedAt(),i.getOffset()+e))}getParentID(){return this.parentID}static fromStruct(t){return nn.of(Yt.of($e.fromStruct(t.parentID.createdAt),t.parentID.offset),Yt.of($e.fromStruct(t.leftSiblingID.createdAt),t.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(t){const e=this.getParentID(),r=this.getLeftSiblingID(),i=t.findFloorNode(e);let a=t.findFloorNode(r);if(!i||!a)throw new b(S.ErrRefused,`cannot find node of CRDTTreePos(${e.toTestString()}, ${r.toTestString()})`);return!r.equals(e)&&r.getOffset()>0&&r.getOffset()===a.id.getOffset()&&a.insPrevID&&(a=t.findFloorNode(a.insPrevID)),[i,a]}getLeftSiblingID(){return this.leftSiblingID}equals(t){return this.getParentID().getCreatedAt().equals(t.getParentID().getCreatedAt())&&this.getParentID().getOffset()===t.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(t.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===t.getLeftSiblingID().getOffset()}}class Yt{constructor(t,e){l(this,"createdAt");l(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new Yt(t,e)}static fromStruct(t){return Yt.of($e.fromStruct(t.createdAt),t.offset)}static createComparator(){return(t,e)=>{const r=t.getCreatedAt().compare(e.getCreatedAt());return r!==0?r:t.getOffset()>e.getOffset()?1:t.getOffset()<e.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}getOffset(){return this.offset}setOffset(t){this.offset=t}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class pe extends G1{constructor(e,r,i,a,s){super(r);l(this,"id");l(this,"removedAt");l(this,"attrs");l(this,"insPrevID");l(this,"insNextID");l(this,"_value","");this.id=e,this.removedAt=s,a&&(this.attrs=a),typeof i=="string"?this.value=i:Array.isArray(i)&&(this._children=i)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,r,i,a){return new pe(e,r,i,a)}deepcopy(){var r;const e=new pe(this.id,this.type);return e.removedAt=this.removedAt,e._value=this._value,e.visibleSize=this.visibleSize,e.totalSize=this.totalSize,e.attrs=(r=this.attrs)==null?void 0:r.deepcopy(),e._children=this._children.map(i=>{const a=i.deepcopy();return a.parent=e,a}),e.insPrevID=this.insPrevID,e.insNextID=this.insNextID,e}get value(){if(!this.isText)throw new b(S.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new b(S.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=e,this.visibleSize=e.length,this.totalSize=e.length}get isRemoved(){return!!this.removedAt}remove(e){return this.removedAt?(e.after(this.removedAt)&&(this.removedAt=e),!1):(this.removedAt=e,this.updateAncestorsSize(-this.paddedSize()),!0)}cloneText(e){return new pe(Yt.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new pe(Yt.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,r,i){const[a,s]=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,i);if(a){if(a.insPrevID=this.id,this.insNextID){const o=e.findFloorNode(this.insNextID);o.insPrevID=a.id,a.insNextID=this.insNextID}this.insNextID=a.id,e.registerNode(a)}return[a,s]}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,r,i){return r?!!(!this.removedAt||!i&&(e!=null&&e.after(this.removedAt))):!1}canStyle(e,r){return this.isText?!1:this.getCreatedAt().getLamport()<=r&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,r){this.attrs||(this.attrs=new gi);const i=[];for(const[a,s]of Object.entries(e))i.push(this.attrs.set(a,s,r));return i}purge(e){this.attrs&&this.attrs.purge(e)}getDataSize(){const e={data:0,meta:0};if(this.isText&&(e.data+=this.visibleSize*2),this.id&&(e.meta+=wn),this.removedAt&&(e.meta+=wn),this.attrs)for(const r of this.attrs){if(r.getRemovedAt())continue;const i=r.getDataSize();e.meta+=i.meta,e.data+=i.data}return e}getGCPairs(){const e=[];if(!this.attrs)return e;for(const r of this.attrs)r.getRemovedAt()&&e.push({parent:this,child:r});return e}}function ld(n){var e;if(n.isText){const r=n;return{type:r.type,value:r.value}}const t={type:n.type,children:n.children.map(ld)};return n.attrs&&(t.attributes=li((e=n.attrs)==null?void 0:e.toObject())),t}function gg(n){if(n.isText)return n.value;let t="";return n.attrs&&n.attrs.size()&&(t=" "+Array.from(n.attrs).filter(e=>!e.isRemoved()).sort((e,r)=>e.getKey().localeCompare(r.getKey())).map(e=>{const r=JSON.parse(e.getValue());return typeof r=="string"?`${e.getKey()}="${r}"`:`${e.getKey()}="${vn(e.getValue())}"`}).join(" ")),`<${n.type}${t}>${n.children.map(e=>gg(e)).join("")}</${n.type}>`}function LS(n){if(n.isText){const t=n;return{type:t.type,value:t.value,visibleSize:t.visibleSize,isRemoved:t.isRemoved}}return{type:n.type,children:n.children.map(LS),visibleSize:n.visibleSize,isRemoved:n.isRemoved}}class Ee extends gl{constructor(e,r){super(r);l(this,"indexTree");l(this,"nodeMapByID");this.indexTree=new F1(e),this.nodeMapByID=new US(Yt.createComparator()),this.indexTree.traverseAll(i=>{this.nodeMapByID.put(i.id,i)})}static create(e,r){return new Ee(e,r)}findFloorNode(e){const r=this.nodeMapByID.floorEntry(e);if(!(!r||!r.key.getCreatedAt().equals(e.getCreatedAt())))return r.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,r){let i={data:0,meta:0};const[a,s]=e.toTreeNodePair(this);let o=s;const u=a===o,c=o.parent&&!u?o.parent:a;if(o.isText){const[,h]=o.split(this,e.getLeftSiblingID().getOffset()-o.id.getOffset());i=h}if(r){const h=c.allChildren,m=u?0:h.indexOf(o)+1;for(let d=m;d<h.length;d++){const g=h[d];if(!g.id.getCreatedAt().after(r))break;o=g}}return[[c,o],i]}style(e,r,i,a){const s={data:0,meta:0},[[o,u],c]=this.findNodesAndSplitText(e[0],i),[[h,m],d]=this.findNodesAndSplitText(e[1],i);$t(s,d,c);const g=[],T=r?li(r):{},A=[];return this.traverseInPosRange(o,u,h,m,([x,p])=>{var w;const y=x.getCreatedAt().getActorID();let v=ad;if(a!=null&&(v=a.get(y)?a.get(y):0n),x.canStyle(i,v)&&r){const k=x.setAttrs(r,i),I=k.reduce((P,[,J])=>(J&&(P[J.getKey()]=T[J.getKey()]),P),{}),C=x.parent,R=x.prevSibling||x.parent;Object.keys(I).length>0&&g.push({type:"style",from:this.toIndex(C,R),to:this.toIndex(x,x),fromPath:this.toPath(C,R),toPath:this.toPath(x,x),actor:i.getActorID(),value:I});for(const[P]of k)P&&A.push({parent:x,child:P});for(const[P]of Object.entries(T)){const J=(w=x.attrs)==null?void 0:w.getNodeMapByKey().get(P);J!==void 0&&p!==Nt.End&&$t(s,J.getDataSize())}}}),[A,g,s]}removeStyle(e,r,i,a){const s={data:0,meta:0},[[o,u],c]=this.findNodesAndSplitText(e[0],i),[[h,m],d]=this.findNodesAndSplitText(e[1],i);$t(s,d,c);const g=[],T=[];return this.traverseInPosRange(o,u,h,m,([A])=>{const x=A.getCreatedAt().getActorID();let p=ad;if(a!=null&&(p=a.get(x)?a.get(x):0n),A.canStyle(i,p)&&r){A.attrs||(A.attrs=new gi);for(const w of r){const k=A.attrs.remove(w,i);for(const I of k)T.push({parent:A,child:I})}const y=A.parent,v=A.prevSibling||A.parent;g.push({actor:i.getActorID(),type:"removeStyle",from:this.toIndex(y,v),to:this.toIndex(A,A),fromPath:this.toPath(y,v),toPath:this.toPath(A,A),value:r})}}),[T,g,s]}edit(e,r,i,a,s,o){const u={data:0,meta:0},[[c,h],m]=this.findNodesAndSplitText(e[0],a),[[d,g],T]=this.findNodesAndSplitText(e[1],a);$t(u,T,m);const A=this.toIndex(c,h),x=this.toPath(c,h),p=[],y=[],v=[];this.traverseInPosRange(c,h,d,g,([I,C],R)=>{if(C===Nt.Start&&!R)for(const ta of I.children)v.push(ta);const P=o===void 0;let J=!1;const Vt=o==null?void 0:o.get(I.id.getCreatedAt().getActorID());J=P||Vt!==void 0&&Vt>=I.id.getCreatedAt().getLamport();let fe=!1;if(I.removedAt){const ta=o==null?void 0:o.get(I.removedAt.getActorID());fe=P||ta!==void 0&&ta>=I.removedAt.getLamport()}(I.canDelete(a,J,fe)||p.includes(I.parent))&&((C===Nt.Text||C===Nt.Start)&&p.push(I),y.push([I,C]))},!0);const w=this.makeDeletionChanges(y,a),k=[];for(const I of p)I.remove(a),I.isRemoved&&k.push({parent:this,child:I});for(const I of v)I.removedAt||c.append(I);if(i>0){let I=0,C=c,R=h;for(;I<i;)C.split(this,C.findOffset(R)+1,s),R=C,C=C.parent,I++;w.push({type:"content",from:A,to:A,fromPath:x,toPath:x,actor:a.getActorID()})}if(r!=null&&r.length){const I=[];let C=h;for(const R of r)C===c?c.insertAt(R,0):c.insertAfter(R,C),C=R,Bc(R,P=>{c.isRemoved?(P.remove(a),k.push({parent:this,child:P})):$t(u,P.getDataSize()),this.nodeMapByID.put(P.id,P)}),R.isRemoved||I.push(R);if(I.length){const R=I.map(P=>ld(P));w.length&&w[w.length-1].from===A?w[w.length-1].value=R:w.push({type:"content",from:A,to:A,fromPath:x,toPath:x,actor:a.getActorID(),value:R})}}return[w,k,u]}editT(e,r,i,a,s){const o=this.findPos(e[0]),u=this.findPos(e[1]);return this.edit([o,u],r,i,a,s)}move(e,r,i){throw new b(S.ErrUnimplemented,`not implemented: ${e}, ${r}, ${i}`)}pathToTreePos(e){return this.indexTree.pathToTreePos(e)}purge(e){var a;(a=e.parent)==null||a.removeChild(e),this.nodeMapByID.remove(e.id);const r=e.insPrevID,i=e.insNextID;if(r){const s=this.findFloorNode(r);s.insNextID=i}if(i){const s=this.findFloorNode(i);s.insPrevID=r}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&e.push({parent:this,child:r});for(const i of r.getGCPairs())e.push(i)}),e}findPos(e,r=!0){const i=this.indexTree.findTreePos(e,r);return nn.fromTreePos(i)}pathToPosRange(e){const r=this.pathToIndex(e);return[this.findPos(r),this.findPos(r+1)]}pathToPos(e){const r=this.indexTree.pathToIndex(e);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return gg(this.indexTree.getRoot())}getDataSize(){const e={data:0,meta:0};return this.indexTree.traverse(r=>{if(r.getRemovedAt())return;const i=r.getDataSize();e.data+=i.data,e.meta+=i.meta}),{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),r=(i,a=void 0,s=void 0,o=0)=>{var g,T,A,x;let u,c,h;const m=i.isText?{node:i,offset:0}:a&&s?this.toTreePos(a,s):null;m&&(u=this.indexTree.indexOf(m),c=this.indexTree.treePosToPath(m),h=nn.fromTreePos(m).toStruct());const d={type:i.type,parent:a==null?void 0:a.id.toTestString(),size:i.visibleSize,id:i.id.toTestString(),removedAt:(g=i.removedAt)==null?void 0:g.toTestString(),insPrev:(T=i.insPrevID)==null?void 0:T.toTestString(),insNext:(A=i.insNextID)==null?void 0:A.toTestString(),value:i.isText?i.value:void 0,isRemoved:i.isRemoved,children:[],depth:o,attributes:i.attrs?li((x=i.attrs)==null?void 0:x.toObject()):void 0,index:u,path:c,pos:h};for(let p=0;p<i.allChildren.length;p++){const y=p===0?i:i.allChildren[p-1];d.children.push(r(i.allChildren[p],i,y,o+1))}return d};return r(e)}getRootTreeNode(){return ld(this.indexTree.getRoot())}toTestTreeNode(){return LS(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot(),r=new Ee(e.deepcopy(),this.getCreatedAt());return r.setRemovedAt(this.getRemovedAt()),r.setMovedAt(this.getMovedAt()),r}toPath(e,r){const i=this.toTreePos(e,r);return i?this.indexTree.treePosToPath(i):[]}toIndex(e,r,i=!1){const a=this.toTreePos(e,r,i);return a?this.indexTree.indexOf(a,i):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const r=this.findPos(e[0]);return e[0]===e[1]?[r,r]:[r,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[r,i]=e,a=this.findPos(r);return r===i?[a.toStruct(),a.toStruct()]:[a.toStruct(),this.findPos(i).toStruct()]}posRangeToPathRange(e){const[[r,i]]=this.findNodesAndSplitText(e[0]),[[a,s]]=this.findNodesAndSplitText(e[1]);return[this.toPath(r,i),this.toPath(a,s)]}posRangeToIndexRange(e){const[[r,i]]=this.findNodesAndSplitText(e[0]),[[a,s]]=this.findNodesAndSplitText(e[1]);return[this.toIndex(r,i),this.toIndex(a,s)]}traverseInPosRange(e,r,i,a,s,o=!1){const u=this.toIndex(e,r,o),c=this.toIndex(i,a,o);this.indexTree.tokensBetween(u,c,s,o)}toTreePos(e,r,i=!1){if(!e||!r)return;if(!i&&e.isRemoved){let s;for(;e.isRemoved;)s=e,e=s.parent;const o=e.findOffset(s,i);return{node:e,offset:o}}if(e===r)return{node:e,offset:0};let a=e.findOffset(r,i);if(i||!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize(i)};a++}return{node:e,offset:a}}makeDeletionChanges(e,r){const i=[],a=[];let s=null,o=null;for(let u=0;u<e.length;u++){const c=e[u],h=e[u+1];s||(s=c),o=c;const m=this.findRightToken(c);(!m||!h||m[0]!==h[0]||m[1]!==h[1])&&(a.push([s,o]),s=null,o=null)}for(const u of a){const[c,h]=u,[m,d]=this.findLeftToken(c),[g,T]=h,A=d===Nt.Start?m:m.parent,x=T===Nt.Start?g:g.parent,p=this.toIndex(A,m),y=this.toIndex(x,g);p<y&&(i.length>0&&p===i[i.length-1].to?(i[i.length-1].to=y,i[i.length-1].toPath=this.toPath(x,g)):i.push({type:"content",from:p,to:y,fromPath:this.toPath(A,m),toPath:this.toPath(x,g),actor:r.getActorID()}))}return i.reverse()}findRightToken([e,r]){if(r===Nt.Start){const u=e.allChildren;return u.length>0?[u[0],u[0].isText?Nt.Text:Nt.Start]:[e,Nt.End]}const i=e.parent,a=i.allChildren,s=a.indexOf(e);if(i&&s===a.length-1)return[i,Nt.End];const o=a[s+1];return[o,o.isText?Nt.Text:Nt.Start]}findLeftToken([e,r]){if(r===Nt.End){const u=e.allChildren;if(u.length>0){const c=u[u.length-1];return[c,c.isText?Nt.Text:Nt.End]}return[e,Nt.Start]}const i=e.parent,a=i.allChildren,s=a.indexOf(e);if(i&&s===0)return[i,Nt.Start];const o=a[s-1];return[o,o.isText?Nt.Text:Nt.End]}}class pl extends on{constructor(e,r,i,a,s,o){super(e,o);l(this,"fromPos");l(this,"toPos");l(this,"contents");l(this,"splitLevel");this.fromPos=r,this.toPos=i,this.contents=a,this.splitLevel=s}static create(e,r,i,a,s,o){return new pl(e,r,i,a,s,o)}execute(e,r,i){var m;const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Ee))throw new b(S.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const s=this.getExecutedAt(),o=a,[u,c,h]=o.edit([this.fromPos,this.toPos],(m=this.contents)==null?void 0:m.map(d=>d.deepcopy()),this.splitLevel,s,(()=>{let d=s.getDelimiter();return this.contents!==void 0&&(d+=this.contents.length),()=>$e.of(s.getLamport(),++d,s.getActorID())})(),i);e.acc(h);for(const d of c)e.registerGCPair(d);return{opInfos:u.map(({from:d,to:g,value:T,splitLevel:A,fromPath:x,toPath:p})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:d,to:g,value:T,splitLevel:A,fromPath:x,toPath:p}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,a=this.contents||[];return`${e}.EDIT(${r},${i},${a.map(s=>gg(s)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}}class us{constructor(t){l(this,"vector");this.vector=t||new Map}set(t,e){this.vector.set(t,e)}unset(t){this.vector.delete(t)}get(t){return this.vector.get(t)}has(t){return this.vector.has(t)}maxLamport(){let t=BigInt(0);for(const[,e]of this)e>t&&(t=e);return t}max(t){const e=new Map;for(const[r,i]of t){const a=this.vector.get(r),s=a&&a>i?a:i;e.set(r,s)}for(const[r,i]of this){const a=t.get(r),s=a&&a>i?a:i;e.set(r,s)}return new us(e)}afterOrEqual(t){const e=this.vector.get(t.getActorID());return e===void 0?!1:e>=t.getLamport()}deepcopy(){const t=new Map;for(const[e,r]of this.vector)t.set(e,r);return new us(t)}filter(t){const e=new Map;for(const[r]of t){const i=this.vector.get(r);i!==void 0&&e.set(r,i)}return new us(e)}size(){return this.vector.size}*[Symbol.iterator](){for(const[t,e]of this.vector)yield[t,e]}}const JS=new us(new Map);class Qe{constructor(t,e,r,i,a){l(this,"clientSeq");l(this,"serverSeq");l(this,"actor");l(this,"lamport");l(this,"versionVector");this.clientSeq=t,this.serverSeq=a,this.lamport=e,this.versionVector=i,this.actor=r}hasClocks(){return this.versionVector.size()>0&&this.lamport!=id}static of(t,e,r,i,a){return new Qe(t,e,r,i,a)}next(t=!1){if(t)return new Qe(this.clientSeq+1,this.lamport,this.actor,JS,id);const e=this.versionVector.deepcopy();return e.set(this.actor,this.lamport+1n),new Qe(this.clientSeq+1,this.lamport+1n,this.actor,e)}syncClocks(t){if(!t.hasClocks())return this;const e=t.lamport>this.lamport?t.lamport+1n:this.lamport+1n,r=this.versionVector.max(t.versionVector),i=new Qe(this.clientSeq,e,this.actor,r);return i.versionVector.set(this.actor,e),i}setClocks(t,e){const r=t>this.lamport?t+1n:this.lamport+1n,i=this.versionVector.max(e);return i.set(this.actor,r),Qe.of(this.clientSeq,r,this.actor,i)}createTimeTicket(t){return $e.of(this.lamport,t,this.actor)}setActor(t){return new Qe(this.clientSeq,this.lamport,t,this.versionVector,this.serverSeq)}setLamport(t){return new Qe(this.clientSeq,t,this.actor,this.versionVector,this.serverSeq)}setVersionVector(t){return new Qe(this.clientSeq,this.lamport,this.actor,t,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const W1=new Qe(0,0n,hg,JS);class Rs{constructor({id:t,operations:e,presenceChange:r,message:i}){l(this,"id");l(this,"operations");l(this,"presenceChange");l(this,"message");this.id=t,this.operations=e||[],this.presenceChange=r,this.message=i}static create({id:t,operations:e,presenceChange:r,message:i}){return new Rs({id:t,operations:e,presenceChange:r,message:i})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(t){for(const e of this.operations)e.setActor(t);this.id=this.id.setActor(t)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(t,e,r){const i=[],a=[];for(const s of this.operations){const o=s.execute(t,r,this.id.getVersionVector());if(!o)continue;const{opInfos:u,reverseOp:c}=o;i.push(...u),c&&a.unshift(c)}return this.presenceChange&&(this.presenceChange.type===Nn.Put?e.set(this.id.getActorID(),Ze(this.presenceChange.presence)):e.delete(this.id.getActorID())),{opInfos:i,reverseOps:a}}toTestString(){return`${this.operations.map(t=>t.toTestString()).join(",")}`}toStruct(){return{changeID:St.bytesToHex(St.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(t=>St.bytesToHex(St.toOperation(t).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(t){const{changeID:e,operations:r,presenceChange:i,message:a}=t;return Rs.create({id:St.bytesToChangeID(St.hexToBytes(e)),operations:r==null?void 0:r.map(s=>St.bytesToOperation(St.hexToBytes(s))),presenceChange:i,message:a})}}class zc{constructor(t,e,r,i,a,s){l(this,"documentKey");l(this,"checkpoint");l(this,"isRemoved");l(this,"changes");l(this,"snapshot");l(this,"versionVector");this.documentKey=t,this.checkpoint=e,this.isRemoved=r,this.changes=i,this.snapshot=s,this.versionVector=a}static create(t,e,r,i,a,s){return new zc(t,e,r,i,a,s)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getVersionVector(){return this.versionVector}}class cs{constructor(t,e){l(this,"serverSeq");l(this,"clientSeq");this.serverSeq=t,this.clientSeq=e}static of(t,e){return new cs(t,e)}increaseClientSeq(t){return t===0?this:new cs(this.serverSeq,this.clientSeq+t)}forward(t){if(this.equals(t))return this;const e=this.serverSeq>t.serverSeq?this.serverSeq:t.serverSeq,r=Math.max(this.clientSeq,t.clientSeq);return cs.of(e,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(t){return this.clientSeq===t.clientSeq&&this.serverSeq==t.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const tE=new cs(0n,0);class En{constructor(t,e){l(this,"createdAt");l(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new En(t,e)}static fromStruct(t){return En.of($e.fromStruct(t.createdAt),t.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}hasSameCreatedAt(t){return this.createdAt.compare(t.createdAt)===0}split(t){return new En(this.createdAt,this.offset+t)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const eE=En.of(Os,0);class an{constructor(t,e){l(this,"id");l(this,"relativeOffset");this.id=t,this.relativeOffset=e}static of(t,e){return new an(t,e)}static fromStruct(t){const e=En.fromStruct(t.id);return an.of(e,t.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return En.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(t){return this.id.equals(t.id)?this.relativeOffset===t.relativeOffset:!1}}class Gi extends DS{constructor(e,r,i){super(r);l(this,"id");l(this,"removedAt");l(this,"prev");l(this,"next");l(this,"insPrev");l(this,"insNext");this.id=e,this.removedAt=i}static create(e,r){return new Gi(e,r)}static createComparator(){return(e,r)=>{const i=e.getCreatedAt().compare(r.getCreatedAt());return i!==0?i:e.getOffset()>r.getOffset()?1:e.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new Gi(this.id.split(e),this.splitValue(e),this.removedAt)}canRemove(e,r,i){return r?!!(!this.removedAt||!i&&(e!=null&&e.after(this.removedAt))):!1}canStyle(e,r){return this.getCreatedAt().getLamport()<=r&&(!this.removedAt||e.after(this.removedAt))}setRemovedAt(e){this.removedAt=e}remove(e){if(!this.removedAt){this.removedAt=e;return}e.after(this.removedAt)&&(this.removedAt=e)}createPosRange(){return[an.of(this.id,0),an.of(this.id,this.getLength())]}getDataSize(){const e=this.value.getDataSize();return this.id&&(e.meta+=wn),this.removedAt&&(e.meta+=wn),e}deepcopy(){return new Gi(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const r=this.value;return this.value=r.substring(0,e),r.substring(e,r.length)}toIDString(){return this.id.toIDString()}}class Bs{constructor(){l(this,"head");l(this,"treeByIndex");l(this,"treeByID");this.head=Gi.create(eE),this.treeByIndex=new Yo,this.treeByID=new US(Gi.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Bs}edit(t,e,r,i){const a={data:0,meta:0},[s,o,u]=this.findNodeWithSplit(t[1],e),[c,h,m]=this.findNodeWithSplit(t[0],e);$t(a,o,h);const d=this.findBetween(m,u),[g,T]=this.deleteNodes(d,e,i),A=u?u.getID():s.getID();let x=an.of(A,0);if(r){const y=this.posToIndex(c.createPosRange()[1],!0),v=this.insertAfter(c,Gi.create(En.of(e,0),r));$t(a,v.getDataSize()),g.length&&g[g.length-1].from===y?g[g.length-1].value=r:g.push({actor:e.getActorID(),from:y,to:y,value:r}),x=an.of(v.getID(),v.getContentLength())}const p=[];for(const[,y]of T)p.push({parent:this,child:y});return[x,p,a,g]}indexToPos(t){const[e,r]=this.treeByIndex.find(t),i=e;return an.of(i.getID(),r)}findIndexesFromRange(t){const[e,r]=t;return[this.posToIndex(e,!1),this.posToIndex(r,!0)]}posToIndex(t,e){const r=t.getAbsoluteID(),i=e?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);if(!i)throw new b(S.ErrInvalidArgument,`the node of the given id should be found: ${r.toTestString()}`);const a=this.treeByIndex.indexOf(i),s=i.isRemoved()?0:r.getOffset()-i.getID().getOffset();return a+s}findNode(t){return this.findFloorNode(t)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const t=[];for(const e of this)e.isRemoved()||t.push(e.getValue());return t.join("")}*[Symbol.iterator](){let t=this.head.getNext();for(;t;)yield t,t=t.getNext()}getHead(){return this.head}deepcopy(){const t=new Bs;let e=this.head.getNext(),r=t.head,i;for(;e;){if(i=t.insertAfter(r,e.deepcopy()),e.hasInsPrev()){const a=t.findNode(e.getInsPrevID());i.setInsPrev(a)}r=i,e=e.getNext()}return t}toTestString(){const t=[];let e=this.head;for(;e;)e.isRemoved()?t.push(`{${e.toTestString()}}`):t.push(`[${e.toTestString()}]`),e=e.getNext();return t.join("")}insertAfter(t,e){const r=t.getNext();return e.setPrev(t),r&&r.setPrev(e),this.treeByID.put(e.getID(),e),this.treeByIndex.insertAfter(t,e),e}findNodeWithSplit(t,e){const r=t.getAbsoluteID();let i=this.findFloorNodePreferToLeft(r);const a=r.getOffset()-i.getID().getOffset(),[,s]=this.splitNode(i,a);for(;i.hasNext()&&i.getNext().getCreatedAt().after(e);)i=i.getNext();return[i,s,i.getNext()]}findFloorNodePreferToLeft(t){let e=this.findFloorNode(t);if(!e)throw new b(S.ErrInvalidArgument,`the node of the given id should be found: ${t.toTestString()}`);if(t.getOffset()>0&&e.getID().getOffset()==t.getOffset()){if(!e.hasInsPrev())return e;e=e.getInsPrev()}return e}findFloorNode(t){const e=this.treeByID.floorEntry(t);if(e&&!(!e.key.equals(t)&&!e.key.hasSameCreatedAt(t)))return e.value}findBetween(t,e){const r=[];let i=t;for(;i&&i!==e;)r.push(i),i=i.getNext();return r}splitNode(t,e){const r={data:0,meta:0};if(e>t.getContentLength())throw new b(S.ErrInvalidArgument,"offset should be less than or equal to length");if(e===0)return[t,r];if(e===t.getContentLength())return[t.getNext(),r];const i=t.getDataSize(),a=t.split(e);this.treeByIndex.updateWeight(a),this.insertAfter(t,a);const s=t.getInsNext();return s&&s.setInsPrev(a),a.setInsPrev(t),$t(r,t.getDataSize(),a.getDataSize()),ua(r,i),[a,r]}deleteNodes(t,e,r){if(!t.length)return[[],new Map];const i=r===void 0||r.size()===0,a=[],s=[],[o,u]=this.findEdgesOfCandidates(t);s.push(o);for(const m of t){let d=!1;if(i)d=!0;else{const T=r==null?void 0:r.get(m.getCreatedAt().getActorID());T&&T>=m.getCreatedAt().getLamport()&&(d=!0)}let g=!1;if(m.getRemovedAt()){const T=r==null?void 0:r.get(m.getRemovedAt().getActorID());(i||T&&T>=m.getRemovedAt().getLamport())&&(g=!0)}m.canRemove(e,d,g)?a.push(m):s.push(m)}s.push(u);const c=this.makeChanges(s,e),h=new Map;for(const m of a)h.set(m.getID().toIDString(),m),m.remove(e);return this.deleteIndexNodes(s),[c,h]}findEdgesOfCandidates(t){return[t[0].getPrev(),t[t.length-1].getNext()]}makeChanges(t,e){const r=[];let i,a;for(let s=0;s<t.length-1;s++){const o=t[s],u=t[s+1];o.getNext()!=u&&([i]=this.findIndexesFromRange(o.getNext().createPosRange()),u?[,a]=this.findIndexesFromRange(u.getPrev().createPosRange()):a=this.treeByIndex.length,i<a&&r.push({actor:e.getActorID(),from:i,to:a}))}return r.reverse()}deleteIndexNodes(t){for(let e=0;e<t.length-1;e++){const r=t[e],i=t[e+1];r.getNext()!=i&&this.treeByIndex.deleteRange(r,i)}}purge(t){this.treeByIndex.delete(t),this.treeByID.remove(t.getID());const e=t.getPrev(),r=t.getNext(),i=t.getInsPrev(),a=t.getInsNext();e&&e.setNext(r),r&&r.setPrev(e),t.setPrev(void 0),t.setNext(void 0),i&&i.setInsNext(a),a&&a.setInsPrev(i),t.setInsPrev(void 0),t.setInsNext(void 0)}}const Hy=n=>n<0?Math.ceil(n):Math.floor(n);var Dn=(n=>(n[n.Int=0]="Int",n[n.Long=1]="Long",n))(Dn||{});class oe extends gl{constructor(e,r,i){super(i);l(this,"valueType");l(this,"value");switch(this.valueType=e,e){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=F.fromNumber(r).toInt():this.value=Hy(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=F.fromNumber(r):this.value=r;break;default:throw new b(S.ErrUnimplemented,`unimplemented type: ${e}`)}}static create(e,r,i){return new oe(e,r,i)}static valueFromBytes(e,r){switch(e){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return F.fromBytesLE(Array.from(r));default:throw new b(S.ErrUnimplemented,`unimplemented type: ${e}`)}}getDataSize(){return{data:this.valueType===0?4:8,meta:this.getMetaUsage()}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=oe.create(this.valueType,this.value,this.getCreatedAt());return e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof F?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!oe.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new b(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function r(i){if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`)}return r(this),r(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===lt.Long?this.value=this.value+e.getValue().toInt():this.value=F.fromNumber(this.value+Hy(e.getValue())).toInt(),this}}class zs extends on{constructor(e,r,i){super(e,i);l(this,"value");this.value=r}static create(e,r,i){return new zs(e,r,i)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof oe))throw new b(S.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const i=r,a=this.value.deepcopy();return i.increase(a),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:a.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),i=e.getType()===lt.Long?e.getValue().multiply(-1):e.getValue()*-1;return zs.create(this.getParentCreatedAt(),vt.of(i,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class ui extends on{constructor(e,r,i,a,s,o){super(e,o);l(this,"fromPos");l(this,"toPos");l(this,"attributes");l(this,"attributesToRemove");this.fromPos=r,this.toPos=i,this.attributes=a,this.attributesToRemove=s}static create(e,r,i,a,s){return new ui(e,r,i,a,[],s)}static createTreeRemoveStyleOperation(e,r,i,a,s){return new ui(e,r,i,new Map,a,s)}execute(e,r,i){const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Ee))throw new b(S.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const s=a;let o,u,c={data:0,meta:0};if(this.attributes.size){const h={};[...this.attributes].forEach(([m,d])=>h[m]=d),[u,o,c]=s.style([this.fromPos,this.toPos],h,this.getExecutedAt(),i)}else{const h=this.attributesToRemove;[u,o,c]=s.removeStyle([this.fromPos,this.toPos],h,this.getExecutedAt(),i)}e.acc(c);for(const h of u)e.registerGCPair(h);return{opInfos:o.map(({from:h,to:m,value:d,fromPath:g,toPath:T})=>({type:"tree-style",from:h,to:m,value:this.attributes.size?{attributes:d}:{attributesToRemove:d},fromPath:g,toPath:T,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${r},${i},${Object.entries(this.attributes||{}).map(([a,s])=>`${a}:"${s}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}class mi extends on{constructor(e,r,i,a){super(e,a);l(this,"createdAt");l(this,"value");this.createdAt=r,this.value=i}static create(e,r,i,a){return new mi(e,r,i,a)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Qt))throw new b(S.ErrInvalidArgument,"fail to execute, only array can execute set");const i=r.getByID(this.createdAt).deepcopy(),a=this.toReverseOperation(this.value,i),s=this.value.deepcopy();return r.insertAfter(this.createdAt,s,this.getExecutedAt()),r.delete(this.createdAt,this.getExecutedAt()),e.registerElement(s),{opInfos:[{type:"array-set",path:e.createPath(this.getParentCreatedAt())}],reverseOp:a}}toReverseOperation(e,r){return mi.create(this.getParentCreatedAt(),e.getCreatedAt(),r)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ARRAY_SET.${this.createdAt.toTestString()}=${this.value.toSortedJSON()}`}getCreatedAt(){return this.createdAt}getValue(){return this.value}setCreatedAt(e){this.createdAt=e}}function nE(n){const t=new Ds,e=t.data;for(const[r,i]of Object.entries(n))e[r]=JSON.stringify(i);return t}function rE(n){if(n.type===Nn.Put)return new Go({type:wa.PUT,presence:nE(n.presence)});if(n.type===Nn.Clear)return new Go({type:wa.CLEAR});throw new b(S.ErrUnimplemented,"unimplemented type")}function iE(n){return new NS({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function qS(n){return new Cc({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:Uc(n.getActorID()),versionVector:mg(n.getVersionVector())})}function U(n){if(n)return new M({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:Uc(n.getActorID())})}function mg(n){if(!n)return;const t=new Ic;for(const[e,r]of n){const i=PE(Uc(e));t.vector[i]=BigInt(r.toString())}return t}function PS(n){switch(n){case lt.Null:return V.NULL;case lt.Boolean:return V.BOOLEAN;case lt.Integer:return V.INTEGER;case lt.Long:return V.LONG;case lt.Double:return V.DOUBLE;case lt.String:return V.STRING;case lt.Bytes:return V.BYTES;case lt.Date:return V.DATE;default:throw new b(S.ErrInvalidType,`unsupported type: ${n}`)}}function VS(n){switch(n){case Dn.Int:return V.INTEGER_CNT;case Dn.Long:return V.LONG_CNT;default:throw new b(S.ErrInvalidType,`unsupported type: ${n}`)}}function Ll(n){if(n instanceof Zt)return new ke({type:V.JSON_OBJECT,createdAt:U(n.getCreatedAt()),value:tb(n)});if(n instanceof Qt)return new ke({type:V.JSON_ARRAY,createdAt:U(n.getCreatedAt()),value:UE(n)});if(n instanceof Ae)return new ke({type:V.TEXT,createdAt:U(n.getCreatedAt())});if(n instanceof vt)return new ke({type:PS(n.getType()),createdAt:U(n.getCreatedAt()),value:n.toBytes()});if(n instanceof oe)return new ke({type:VS(n.getType()),createdAt:U(n.getCreatedAt()),value:n.toBytes()});if(n instanceof Ee)return new ke({type:V.TREE,createdAt:U(n.getCreatedAt()),value:JE(n)});throw new b(S.ErrUnimplemented,"unimplemented element")}function aE(n){return new jo({createdAt:U(n.getCreatedAt()),offset:n.getOffset()})}function Jl(n){return new Aa({createdAt:U(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function ql(n){return new Ta({parentId:Eo(n.getParentID()),leftSiblingId:Eo(n.getLeftSiblingID())})}function Eo(n){return new ji({createdAt:U(n.getCreatedAt()),offset:n.getOffset()})}function HS(n){const t=new fg;if(n instanceof Ea){const e=n,r=new Pu;r.parentCreatedAt=U(e.getParentCreatedAt()),r.key=e.getKey(),r.value=Ll(e.getValue()),r.executedAt=U(e.getExecutedAt()),t.body.case="set",t.body.value=r}else if(n instanceof Wi){const e=n,r=new Vu;r.parentCreatedAt=U(e.getParentCreatedAt()),r.prevCreatedAt=U(e.getPrevCreatedAt()),r.value=Ll(e.getValue()),r.executedAt=U(e.getExecutedAt()),t.body.case="add",t.body.value=r}else if(n instanceof en){const e=n,r=new Hu;r.parentCreatedAt=U(e.getParentCreatedAt()),r.prevCreatedAt=U(e.getPrevCreatedAt()),r.createdAt=U(e.getCreatedAt()),r.executedAt=U(e.getExecutedAt()),t.body.case="move",t.body.value=r}else if(n instanceof xn){const e=n,r=new Ku;r.parentCreatedAt=U(e.getParentCreatedAt()),r.createdAt=U(e.getCreatedAt()),r.executedAt=U(e.getExecutedAt()),t.body.case="remove",t.body.value=r}else if(n instanceof ml){const e=n,r=new ju;r.parentCreatedAt=U(e.getParentCreatedAt()),r.from=Jl(e.getFromPos()),r.to=Jl(e.getToPos()),r.content=e.getContent();const i=r.attributes;for(const[a,s]of e.getAttributes())i[a]=s;r.executedAt=U(e.getExecutedAt()),t.body.case="edit",t.body.value=r}else if(n instanceof yl){const e=n,r=new $u;r.parentCreatedAt=U(e.getParentCreatedAt()),r.from=Jl(e.getFromPos()),r.to=Jl(e.getToPos());const i=r.attributes;for(const[a,s]of e.getAttributes())i[a]=s;r.executedAt=U(e.getExecutedAt()),t.body.case="style",t.body.value=r}else if(n instanceof zs){const e=n,r=new Gu;r.parentCreatedAt=U(e.getParentCreatedAt()),r.value=Ll(e.getValue()),r.executedAt=U(e.getExecutedAt()),t.body.case="increase",t.body.value=r}else if(n instanceof pl){const e=n,r=new Yu;r.parentCreatedAt=U(e.getParentCreatedAt()),r.from=ql(e.getFromPos()),r.to=ql(e.getToPos()),r.contents=hE(e.getContents()),r.splitLevel=e.getSplitLevel(),r.executedAt=U(e.getExecutedAt()),t.body.case="treeEdit",t.body.value=r}else if(n instanceof ui){const e=n,r=new Xu;r.parentCreatedAt=U(e.getParentCreatedAt()),r.from=ql(e.getFromPos()),r.to=ql(e.getToPos());const i=e.getAttributesToRemove();if(i.length>0)r.attributesToRemove=i;else{const a=r.attributes;for(const[s,o]of e.getAttributes())a[s]=o}r.executedAt=U(e.getExecutedAt()),t.body.case="treeStyle",t.body.value=r}else if(n instanceof mi){const e=n,r=new Fu;r.parentCreatedAt=U(e.getParentCreatedAt()),r.createdAt=U(e.getCreatedAt()),r.value=Ll(e.getValue()),r.executedAt=U(e.getExecutedAt()),t.body.case="arraySet",t.body.value=r}else throw new b(S.ErrUnimplemented,"unimplemented operation");return t}function sE(n){const t=[];for(const e of n)t.push(HS(e));return t}function oE(n){const t=new AS({id:qS(n.getID()),message:n.getMessage()});return n.hasOperations()&&(t.operations=sE(n.getOperations())),n.hasPresenceChange()&&(t.presenceChange=rE(n.getPresenceChange())),t}function lE(n){const t=[];for(const e of n)t.push(oE(e));return t}function uE(n){const t=[];for(const e of n)t.push(new ES({key:e.getStrKey(),element:pg(e.getValue())}));return t}function cE(n){const t=[];for(const e of n)t.push(new nc({element:pg(e.getValue())}));return t}function fE(n){const t=[];for(const e of n){const r=new rc;r.id=aE(e.getID()),r.value=e.getValue().getContent(),r.removedAt=U(e.getRemovedAt());const i=r.attributes,a=e.getValue().getAttrs();for(const s of a){const o=new xs;o.value=s.getValue(),o.updatedAt=U(s.getUpdatedAt()),i[s.getKey()]=o}t.push(r)}return t}function hE(n){const t=[];if(!n||!n.length)return t;for(const e of n)t.push(new ic({content:yg(e)}));return t}function dE(n){const t={};for(const e of n)t[e.getKey()]=new xs({value:e.getValue(),updatedAt:U(e.getUpdatedAt()),isRemoved:e.isRemoved()});return t}function yg(n){if(!n)return[];const t=[];return Bc(n,(e,r)=>{const i=new $o({id:Eo(e.id),type:e.type,removedAt:U(e.removedAt),depth:r});e.isText&&(i.value=e.value),e.insPrevID&&(i.insPrevId=Eo(e.insPrevID)),e.insNextID&&(i.insNextId=Eo(e.insNextID)),e.attrs&&(i.attributes=dE(e.attrs)),t.push(i)}),t}function gE(n){const t=new ue;return t.body.case="jsonObject",t.body.value=new Zu({nodes:uE(n.getRHT()),createdAt:U(n.getCreatedAt()),movedAt:U(n.getMovedAt()),removedAt:U(n.getRemovedAt())}),t}function KS(n){const t=new ue;return t.body.case="jsonArray",t.body.value=new Qu({nodes:cE(n.getElements()),createdAt:U(n.getCreatedAt()),movedAt:U(n.getMovedAt()),removedAt:U(n.getRemovedAt())}),t}function mE(n){const t=new ue;return t.body.case="primitive",t.body.value=new _u({type:PS(n.getType()),value:n.toBytes(),createdAt:U(n.getCreatedAt()),movedAt:U(n.getMovedAt()),removedAt:U(n.getRemovedAt())}),t}function yE(n){const t=new ue;return t.body.case="text",t.body.value=new Wu({nodes:fE(n.getRGATreeSplit()),createdAt:U(n.getCreatedAt()),movedAt:U(n.getMovedAt()),removedAt:U(n.getRemovedAt())}),t}function pE(n){const t=new ue;return t.body.case="counter",t.body.value=new tc({type:VS(n.getType()),value:n.toBytes(),createdAt:U(n.getCreatedAt()),movedAt:U(n.getMovedAt()),removedAt:U(n.getRemovedAt())}),t}function jS(n){const t=new ue;return t.body.case="tree",t.body.value=new ec({nodes:yg(n.getRoot()),createdAt:U(n.getCreatedAt()),movedAt:U(n.getMovedAt()),removedAt:U(n.getRemovedAt())}),t}function pg(n){if(n instanceof Zt)return gE(n);if(n instanceof Qt)return KS(n);if(n instanceof vt)return mE(n);if(n instanceof Ae)return yE(n);if(n instanceof oe)return pE(n);if(n instanceof Ee)return jS(n);throw new b(S.ErrUnimplemented,"unimplemented element")}function vE(n){return new pi({documentKey:n.getDocumentKey(),checkpoint:iE(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:lE(n.getChanges()),snapshot:n.getSnapshot(),versionVector:mg(n.getVersionVector())})}function ro(n){if(!(n instanceof ot))return{};const t=n.findDetails(U1);for(const e of t)return e.metadata;return{}}function qa(n){return ro(n).code??""}function Nf(n,t){return n instanceof ot&&qa(n)===t}function $S(n){return Qe.of(n.clientSeq,BigInt(n.lamport),wg(n.actorId),vg(n.versionVector),BigInt(n.serverSeq))}function vg(n){if(!n)return;const t=new us;return Object.entries(n.vector).forEach(([e,r])=>{const i=Mc(qE(e));t.set(i,BigInt(r.toString()))}),t}function L(n){if(n)return $e.of(BigInt(n.lamport),n.delimiter,wg(n.actorId))}function Sg(n){const t={};return Object.entries(n.data).forEach(([e,r])=>{t[e]=JSON.parse(r)}),t}function SE(n){const t=n.type;if(t===wa.PUT){const e=Sg(n.presence);return{type:Nn.Put,presence:e}}if(t===wa.CLEAR)return{type:Nn.Clear};throw new b(S.ErrInvalidType,`unsupported type: ${t}`)}function bE(n){const t=new Map;return Object.entries(n).forEach(([e,r])=>{t.set(e,Sg(r))}),t}function GS(n){switch(n){case V.NULL:return lt.Null;case V.BOOLEAN:return lt.Boolean;case V.INTEGER:return lt.Integer;case V.LONG:return lt.Long;case V.DOUBLE:return lt.Double;case V.STRING:return lt.String;case V.BYTES:return lt.Bytes;case V.DATE:return lt.Date}throw new b(S.ErrUnimplemented,`unimplemented value type: ${n}`)}function cc(n){switch(n){case V.INTEGER_CNT:return Dn.Int;case V.LONG_CNT:return Dn.Long}throw new b(S.ErrUnimplemented,`unimplemented value type: ${n}`)}function Pl(n){switch(n.type){case V.JSON_OBJECT:return n.value?WS(n.value):Zt.create(L(n.createdAt));case V.JSON_ARRAY:return n.value?ME(n.value):Qt.create(L(n.createdAt));case V.TEXT:return Ae.create(Bs.create(),L(n.createdAt));case V.TREE:return LE(n.value);case V.NULL:case V.BOOLEAN:case V.INTEGER:case V.LONG:case V.DOUBLE:case V.STRING:case V.BYTES:case V.DATE:return vt.of(vt.valueFromBytes(GS(n.type),n.value),L(n.createdAt));case V.INTEGER_CNT:case V.LONG_CNT:return oe.create(cc(n.type),oe.valueFromBytes(cc(n.type),n.value),L(n.createdAt))}}function Vl(n){return an.of(En.of(L(n.createdAt),n.offset),n.relativeOffset)}function YS(n){return En.of(L(n.createdAt),n.offset)}function TE(n){const t=Fo.create(n.value);Object.entries(n.attributes).forEach(([r,i])=>{t.setAttr(r,i.value,L(i.updatedAt))});const e=Gi.create(YS(n.id),t);return e.setRemovedAt(L(n.removedAt)),e}function Ba(n){return nn.of(No(n.parentId),No(n.leftSiblingId))}function No(n){return Yt.of(L(n.createdAt),n.offset)}function wE(n){if(!n.length)return;const t=[];return n.forEach(e=>{const r=bg(e.content);t.push(r)}),t}function bg(n){if(n.length===0)return;const t=[];for(const i of n)t.push(EE(i));const e=t[t.length-1],r=new Map;r.set(n[t.length-1].depth,t[t.length-1]);for(let i=t.length-2;i>=0;i--)r.get(n[i].depth-1).prepend(t[i]),r.set(n[i].depth,t[i]);return e.updateDescendantsSize(),e.updateDescendantsSize(!0),Ee.create(e,Os).getRoot()}function AE(n){const t=gi.create();for(const[e,r]of Object.entries(n))t.setInternal(e,r.value,L(r.updatedAt),r.isRemoved);return t}function EE(n){const t=No(n.id),e=pe.create(t,n.type),r=Object.entries(n.attributes);return e.isText?e.value=n.value:r.length&&(e.attrs=AE(n.attributes)),n.insPrevId&&(e.insPrevID=No(n.insPrevId)),n.insNextId&&(e.insNextID=No(n.insNextId)),e.removedAt=L(n.removedAt),e}function XS(n){if(n.body.case==="set"){const t=n.body.value;return Ea.create(t.key,Pl(t.value),L(t.parentCreatedAt),L(t.executedAt))}else if(n.body.case==="add"){const t=n.body.value;return Wi.create(L(t.parentCreatedAt),L(t.prevCreatedAt),Pl(t.value),L(t.executedAt))}else if(n.body.case==="move"){const t=n.body.value;return en.create(L(t.parentCreatedAt),L(t.prevCreatedAt),L(t.createdAt),L(t.executedAt))}else if(n.body.case==="remove"){const t=n.body.value;return xn.create(L(t.parentCreatedAt),L(t.createdAt),L(t.executedAt))}else if(n.body.case==="edit"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([r,i])=>{e.set(r,i)}),ml.create(L(t.parentCreatedAt),Vl(t.from),Vl(t.to),t.content,e,L(t.executedAt))}else if(n.body.case==="style"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([r,i])=>{e.set(r,i)}),yl.create(L(t.parentCreatedAt),Vl(t.from),Vl(t.to),e,L(t.executedAt))}else if(n.body.case==="increase"){const t=n.body.value;return zs.create(L(t.parentCreatedAt),Pl(t.value),L(t.executedAt))}else if(n.body.case==="treeEdit"){const t=n.body.value;return pl.create(L(t.parentCreatedAt),Ba(t.from),Ba(t.to),wE(t.contents),t.splitLevel,L(t.executedAt))}else if(n.body.case==="treeStyle"){const t=n.body.value,e=new Map,r=t.attributesToRemove;return(r==null?void 0:r.length)>0?ui.createTreeRemoveStyleOperation(L(t.parentCreatedAt),Ba(t.from),Ba(t.to),r,L(t.executedAt)):(Object.entries(t.attributes).forEach(([i,a])=>{e.set(i,a)}),ui.create(L(t.parentCreatedAt),Ba(t.from),Ba(t.to),e,L(t.executedAt)))}else if(n.body.case==="arraySet"){const t=n.body.value;return mi.create(L(t.parentCreatedAt),L(t.createdAt),Pl(t.value),L(t.executedAt))}else throw new b(S.ErrUnimplemented,"unimplemented operation")}function NE(n){const t=[];for(const e of n){const r=XS(e);r&&t.push(r)}return t}function FS(n){const t=[];for(const e of n)t.push(Rs.create({id:$S(e.id),operations:NE(e.operations),presenceChange:e.presenceChange?SE(e.presenceChange):void 0,message:e.message}));return t}function xE(n){return cs.of(BigInt(n.serverSeq),n.clientSeq)}function DE(n){return zc.create(n.documentKey,xE(n.checkpoint),n.isRemoved,FS(n.changes),vg(n.versionVector),n.snapshot)}function ZS(n){const t=new ks;for(const r of n.nodes){const i=Tg(r.element);t.set(r.key,i,i.getPositionedAt())}const e=new Zt(L(n.createdAt),t);return e.setMovedAt(L(n.movedAt)),e.setRemovedAt(L(n.removedAt)),e}function QS(n){const t=new Xo;for(const r of n.nodes)t.insert(Tg(r.element));const e=new Qt(L(n.createdAt),t);return e.setMovedAt(L(n.movedAt)),e.setRemovedAt(L(n.removedAt)),e}function OE(n){const t=vt.of(vt.valueFromBytes(GS(n.type),n.value),L(n.createdAt));return t.setMovedAt(L(n.movedAt)),t.setRemovedAt(L(n.removedAt)),t}function kE(n){const t=new Bs;let e=t.getHead();for(const i of n.nodes){const a=t.insertAfter(e,TE(i));i.insPrevId&&a.setInsPrev(t.findNode(YS(i.insPrevId))),e=a}const r=new Ae(t,L(n.createdAt));return r.setMovedAt(L(n.movedAt)),r.setRemovedAt(L(n.removedAt)),r}function CE(n){const t=oe.create(cc(n.type),oe.valueFromBytes(cc(n.type),n.value),L(n.createdAt));return t.setMovedAt(L(n.movedAt)),t.setRemovedAt(L(n.removedAt)),t}function _S(n){const t=bg(n.nodes);return Ee.create(t,L(n.createdAt))}function Tg(n){if(n.body.case==="jsonObject")return ZS(n.body.value);if(n.body.case==="jsonArray")return QS(n.body.value);if(n.body.case==="primitive")return OE(n.body.value);if(n.body.case==="text")return kE(n.body.value);if(n.body.case==="counter")return CE(n.body.value);if(n.body.case==="tree")return _S(n.body.value);throw new b(S.ErrUnimplemented,"unimplemented element")}function IE(n){return n.map(t=>({path:t.path,type:t.type}))}function RE(n){if(!n)return{root:Zt.create(Os),presences:new Map};const t=Eh.fromBinary(n);return{root:Tg(t.root),presences:bE(t.presences)}}function BE(n){const t=mg(n);return Mc(t.toBinary())}function zE(n){const t=Ag(n),e=Ic.fromBinary(t);return vg(e)}function WS(n){if(!n)throw new b(S.ErrInvalidArgument,"bytes is empty");const t=ue.fromBinary(n);return ZS(t.body.value)}function tb(n){return pg(n).toBinary()}function ME(n){if(!n)throw new b(S.ErrInvalidArgument,"bytes is empty");const t=ue.fromBinary(n);return QS(t.body.value)}function UE(n){return KS(n).toBinary()}function LE(n){if(!n)throw new b(S.ErrInvalidArgument,"bytes is empty");const t=ue.fromBinary(n);return _S(t.body.value)}function JE(n){return jS(n).toBinary()}function Mc(n){return n?Array.from(n).map(t=>t.toString(16).padStart(2,"0")).join(""):""}function wg(n){return Mc(n)}function Ag(n){return new Uint8Array(n.match(/.{1,2}/g).map(t=>parseInt(t,16)))}function qE(n){if(typeof window<"u"&&typeof window.atob=="function"){const t=window.atob(n),e=t.length,r=new Uint8Array(e);for(let i=0;i<e;i++)r[i]=t.charCodeAt(i);return r}else if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u"){const t=globalThis.Buffer;return new Uint8Array(t.from(n,"base64"))}else throw new Error("No base64 decoder available")}function Uc(n){return Ag(n)}function PE(n){if(typeof window<"u"&&typeof window.btoa=="function"){let t="";for(let e=0;e<n.byteLength;e++)t+=String.fromCharCode(n[e]);return window.btoa(t)}else{if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u")return globalThis.Buffer.from(n).toString("base64");throw new Error("No base64 encoder available")}}function VE(n){const t=Cc.fromBinary(n);return $S(t)}function HE(n){const t=fg.fromBinary(n);return XS(t)}const St={fromPresence:Sg,toChangePack:vE,fromChangePack:DE,fromChanges:FS,toTreeNodes:yg,fromTreeNodes:bg,objectToBytes:tb,bytesToObject:WS,bytesToSnapshot:RE,bytesToHex:Mc,hexToBytes:Ag,toHexString:wg,toUint8Array:Uc,toOperation:HS,toChangeID:qS,PbChangeID:Cc,bytesToChangeID:VE,bytesToOperation:HE,versionVectorToHex:BE,hexToVersionVector:zE,fromSchemaRules:IE};var ae=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(ae||{});let sa=3;function KE(n){sa=n}const B={trivial:(...n)=>{sa>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{sa>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{sa>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{sa>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{sa>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>sa<=n};function eb(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const t=Math.random()*16|0;return(n==="x"?t:t&3|8).toString(16)})}const xf=()=>{};class jE{constructor(t){l(this,"finalized",!1);l(this,"observers",[]);l(this,"finalError");try{t(this)}catch(e){this.error(e)}}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let i;if(!t)throw new b(S.ErrInvalidArgument,"missing observer");if(this.finalized)throw new b(S.ErrRefused,"observable is finalized due to previous error");typeof t=="object"?i=t:i={next:t,error:e,complete:r},i.next===void 0&&(i.next=xf),i.error===void 0&&(i.error=xf),i.complete===void 0&&(i.complete=xf);const a=eb(),s=this.unsubscribeOne.bind(this,a);if(this.observers.push({subscriptionID:a,observer:i}),this.finalized)try{this.finalError?i.error(this.finalError):i.complete()}catch(o){B.warn(o)}return s}unsubscribeOne(t){var e;this.observers=(e=this.observers)==null?void 0:e.filter(r=>r.subscriptionID!==t)}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t].observer)}catch(r){B.error(r)}}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.observers=void 0)}}function nb(n){const t=new jE(n);return{subscribe:t.subscribe.bind(t),getProxy:()=>t}}class xo{constructor(t,e,r,i){l(this,"prevID");l(this,"nextID");l(this,"delimiter");l(this,"message");l(this,"root");l(this,"operations");l(this,"presenceChange");l(this,"previousPresence");l(this,"reversePresenceKeys");this.prevID=t,this.nextID=t.next(),this.delimiter=xS,this.root=e,this.operations=[],this.previousPresence=Ze(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=i}static create(t,e,r,i){return new xo(t,e,r,i)}push(t){this.operations.push(t)}registerElement(t,e){this.root.registerElement(t,e)}registerRemovedElement(t){this.root.registerRemovedElement(t)}registerGCPair(t){this.root.registerGCPair(t)}getNextID(){return this.isPresenceOnlyChange()?this.prevID.next(!0).setLamport(this.prevID.getLamport()).setVersionVector(this.prevID.getVersionVector()):this.nextID}toChange(){const t=this.isPresenceOnlyChange()?this.prevID.next(!0):this.nextID;return Rs.create({id:t,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}isPresenceOnlyChange(){return this.operations.length===0}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(t){this.presenceChange=t}setReversePresence(t,e){for(const r of Object.keys(t))e!=null&&e.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const t={};for(const e of this.reversePresenceKeys)t[e]=this.previousPresence[e];return t}issueTimeTicket(){return this.delimiter+=1,this.nextID.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.nextID.createTimeTicket(this.delimiter)}acc(t){this.root.acc(t)}}function rb(n,t){const e=new Zo(n);return new Proxy(t,e.getHandlers())}class Zo{constructor(t){l(this,"context");l(this,"handlers");this.context=t,this.handlers={set:(e,r,i)=>(B.isEnabled(ae.Trivial)&&B.trivial(`obj[${r}]=${JSON.stringify(i)}`),Zo.setInternal(t,e,r,i),!0),get:(e,r)=>(B.isEnabled(ae.Trivial)&&B.trivial(`obj[${r}]`),r==="getID"?()=>e.getCreatedAt():r==="toJSON"||r==="toString"?()=>e.toJSON():r==="toJS"?()=>e.toJS():r==="toJSForTest"?()=>e.toJSForTest():oa(t,e.get(r))),ownKeys:e=>e.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(e,r)=>(B.isEnabled(ae.Trivial)&&B.trivial(`obj[${r}]`),Zo.deleteInternal(t,e,r),!0)}}static setInternal(t,e,r,i){if(r.includes("."))throw new b(S.ErrInvalidObjectKey,"key must not contain the '.'.");const a=t.issueTimeTicket(),s=Do(t,i,a),o=e.set(r,s,a);t.registerElement(s,e),o&&t.registerRemovedElement(o),t.push(Ea.create(r,s.deepcopy(),e.getCreatedAt(),a))}static buildObjectMembers(t,e){const r={};for(const[i,a]of Object.entries(e)){if(i.includes("."))throw new b(S.ErrInvalidObjectKey,"key must not contain the '.'.");const s=t.issueTimeTicket(),o=Do(t,a,s);r[i]=o}return r}static deleteInternal(t,e,r){const i=t.issueTimeTicket(),a=e.deleteByKey(r,i);a&&(t.push(xn.create(e.getCreatedAt(),a.getCreatedAt(),i)),t.registerRemovedElement(a))}getHandlers(){return this.handlers}}function $E(n,t){const e=new nt(n,t);return new Proxy(t,e.getHandlers())}function Ky(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function GE(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class nt{constructor(t,e){l(this,"context");l(this,"handlers");l(this,"array");this.context=t,this.array=e,this.handlers={get:(r,i,a)=>i==="getID"?()=>r.getCreatedAt():i==="getElementByID"?s=>{const o=r.getByID(s);if(!(!o||o.isRemoved()))return Fe(t,o)}:i==="getElementByIndex"?s=>{const o=r.get(s);return Fe(t,o)}:i==="getLast"?()=>Fe(t,r.getLast()):i==="delete"?s=>{const o=nt.deleteInternalByIndex(t,r,s);return Fe(t,o)}:i==="deleteByID"?s=>{const o=nt.deleteInternalByID(t,r,s);return Fe(t,o)}:i==="insertAfter"?(s,o)=>{const u=nt.insertAfterInternal(t,r,s,o);return Fe(t,u)}:i==="insertIntegerAfter"?(s,o)=>{const u=nt.insertIntegerAfterInternal(t,r,s,o);return Fe(t,u)}:i==="insertBefore"?(s,o)=>{const u=nt.insertBeforeInternal(t,r,s,o);return Fe(t,u)}:i==="setValue"?(s,o)=>{const u=nt.setValueInternal(t,r,s,o);return Fe(t,u)}:i==="moveBefore"?(s,o)=>{nt.moveBeforeInternal(t,r,s,o)}:i==="moveAfter"?(s,o)=>{nt.moveAfterInternal(t,r,s,o)}:i==="moveAfterByIndex"?(s,o)=>{nt.moveAfterByIndexInternal(t,r,s,o)}:i==="moveFront"?s=>{nt.moveFrontInternal(t,r,s)}:i==="moveLast"?s=>{nt.moveLastInternal(t,r,s)}:Ky(i)?oa(t,r.get(Number(i))):i==="push"?s=>nt.pushInternal(t,r,s):i==="splice"?(s,o,...u)=>nt.splice(t,r,s,o,...u):i==="length"?r.length:typeof i=="symbol"&&i===Symbol.iterator?nt.iteratorInternal.bind(this,t,r):i==="includes"?(s,o)=>nt.includes(t,r,s,o):i==="indexOf"?(s,o)=>nt.indexOf(t,r,s,o):i==="lastIndexOf"?(s,o)=>nt.lastIndexOf(t,r,s,o):i==="toJSForTest"?()=>r.toJSForTest():i==="toTestString"?()=>nt.toTestString(r):typeof i=="string"&&GE(i)?(...s)=>{const o=Array.from(r).map(u=>oa(t,u));return Array.prototype[i].apply(o,s)}:Reflect.get(r,i,a),set:(r,i,a)=>{if(Ky(i)){const s=Number(i);return nt.setValueInternal(t,r,s,a),!0}return Reflect.set(r,i,a)},deleteProperty:(r,i)=>(B.isEnabled(ae.Trivial)&&B.trivial(`array[${i}]`),nt.deleteInternalByIndex(t,r,Number.parseInt(i)),!0)}}static*iteratorInternal(t,e){for(const r of e)yield Fe(t,r)}static buildArrayElements(t,e){const r=[];for(const i of e){const a=t.issueTimeTicket(),s=Do(t,i,a);r.push(s)}return r}static pushInternal(t,e,r){return nt.insertAfterInternal(t,e,e.getLastCreatedAt(),r),e.length}static moveBeforeInternal(t,e,r,i){const a=t.issueTimeTicket(),s=e.getPrevCreatedAt(r);e.moveAfter(s,i,a),t.push(en.create(e.getCreatedAt(),s,i,a))}static moveAfterInternal(t,e,r,i){const a=t.issueTimeTicket();t.push(en.create(e.getCreatedAt(),r,i,a)),e.moveAfter(r,i,a)}static moveAfterByIndexInternal(t,e,r,i){const a=e.get(r);if(!a)throw new b(S.ErrInvalidArgument,`index out of bounds: ${r}`);const s=e.get(i);if(!s)throw new b(S.ErrInvalidArgument,`index out of bounds: ${i}`);nt.moveAfterInternal(t,e,a.getCreatedAt(),s.getCreatedAt())}static moveFrontInternal(t,e,r){const i=t.issueTimeTicket(),a=e.getHead();e.moveAfter(a.getCreatedAt(),r,i),t.push(en.create(e.getCreatedAt(),a.getCreatedAt(),r,i))}static moveLastInternal(t,e,r){const i=t.issueTimeTicket(),a=e.getLastCreatedAt();e.moveAfter(a,r,i),t.push(en.create(e.getCreatedAt(),a,r,i))}static insertAfterInternal(t,e,r,i){const a=t.issueTimeTicket(),s=Do(t,i,a);return e.insertAfter(r,s),t.registerElement(s,e),t.push(Wi.create(e.getCreatedAt(),r,s.deepcopy(),a)),s}static insertIntegerAfterInternal(t,e,r,i){const a=e.get(r);if(!a)throw new b(S.ErrInvalidArgument,`index out of bounds: ${r}`);return nt.insertAfterInternal(t,e,a.getCreatedAt(),i),e}static insertBeforeInternal(t,e,r,i){return nt.insertAfterInternal(t,e,e.getPrevCreatedAt(r),i)}static setValueInternal(t,e,r,i){const a=e.get(r);if(!a)throw new b(S.ErrInvalidArgument,`index out of bounds: ${r}`);return nt.setByIndexInternal(t,e,a.getCreatedAt(),i),e}static setByIndexInternal(t,e,r,i){const a=t.issueTimeTicket(),s=Do(t,i,a),o=s.deepcopy();return t.push(mi.create(e.getCreatedAt(),r,o,a)),e.set(r,s,a),t.registerElement(s,e),s}static deleteInternalByIndex(t,e,r){const i=t.issueTimeTicket(),a=e.deleteByIndex(r,i);if(a)return t.push(xn.create(e.getCreatedAt(),a.getCreatedAt(),i)),t.registerRemovedElement(a),a}static deleteInternalByID(t,e,r){const i=t.issueTimeTicket(),a=e.delete(r,i);return t.push(xn.create(e.getCreatedAt(),a.getCreatedAt(),i)),t.registerRemovedElement(a),a}static splice(t,e,r,i,...a){const s=e.length,o=r>=0?Math.min(r,s):Math.max(s+r,0),u=i===void 0?s:i<0?o:Math.min(o+i,s),c=[];for(let h=o;h<u;h++){const m=nt.deleteInternalByIndex(t,e,o);if(m){const d=m.deepcopy();d.setRemovedAt(),c.push(oa(t,d))}}if(a){let h=o===0?e.getHead().getID():e.get(o-1).getID();for(const m of a)h=nt.insertAfterInternal(t,e,h,m).getID()}return c}static includes(t,e,r,i){var o;const a=e.length,s=i===void 0?0:i<0?Math.max(i+a,0):i;if(s>=a)return!1;if(vt.isSupport(r))return Array.from(e).map(c=>oa(t,c)).includes(r,s);for(let u=s;u<a;u++)if(((o=e.get(u))==null?void 0:o.getID())===r.getID())return!0;return!1}static indexOf(t,e,r,i){var o;const a=e.length,s=i===void 0?0:i<0?Math.max(i+a,0):i;if(s>=a)return-1;if(vt.isSupport(r))return Array.from(e).map(c=>oa(t,c)).indexOf(r,s);for(let u=s;u<a;u++)if(((o=e.get(u))==null?void 0:o.getID())===r.getID())return u;return-1}static lastIndexOf(t,e,r,i){var o;const a=e.length,s=i===void 0||i>=a?a-1:i<0?i+a:i;if(s<0)return-1;if(vt.isSupport(r))return Array.from(e).map(c=>oa(t,c)).lastIndexOf(r,s);for(let u=s;u>0;u--)if(((o=e.get(u))==null?void 0:o.getID())===r.getID())return u;return-1}static toTestString(t){return t.toTestString()}getHandlers(){return this.handlers}}class Eg{constructor(t,e){l(this,"context");l(this,"text");this.context=t,this.text=e}initialize(t,e){this.context=t,this.text=e}getID(){return this.text.getID()}edit(t,e,r,i){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new b(S.ErrInvalidArgument,"from should be less than or equal to to");const a=this.text.indexRangeToPosRange(t,e);B.isEnabled(ae.Debug)&&B.debug(`EDIT: f:${t}->${a[0].toTestString()}, t:${e}->${a[1].toTestString()} c:${r}`);const s=i?Is(i):void 0,o=this.context.issueTimeTicket(),[,u,c,h]=this.text.edit(a,r,o,s);this.context.acc(c);for(const m of u)this.context.registerGCPair(m);return this.context.push(new ml(this.text.getCreatedAt(),a[0],a[1],r,s?new Map(Object.entries(s)):new Map,o)),this.text.findIndexesFromRange(h)}delete(t,e){return this.edit(t,e,"")}empty(){return this.edit(0,this.length,"")}setStyle(t,e,r){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new b(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.text.indexRangeToPosRange(t,e);B.isEnabled(ae.Debug)&&B.debug(`STYL: f:${t}->${i[0].toTestString()}, t:${e}->${i[1].toTestString()} a:${JSON.stringify(r)}`);const a=Is(r),s=this.context.issueTimeTicket(),[o,u]=this.text.setStyle(i,a,s);this.context.acc(u);for(const c of o)this.context.registerGCPair(c);return this.context.push(new yl(this.text.getCreatedAt(),i[0],i[1],new Map(Object.entries(a)),s)),!0}indexRangeToPosRange(t){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");const e=this.text.indexRangeToPosRange(t[0],t[1]);return[e[0].toStruct(),e[1].toStruct()]}posRangeToIndexRange(t){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");const e=this.text.findIndexesFromRange([an.fromStruct(t[0]),an.fromStruct(t[1])]);return[e[0],e[1]]}toTestString(){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(t,e){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(t,e)}}class Ng{constructor(t,e){l(this,"valueType");l(this,"value");l(this,"context");l(this,"counter");this.valueType=t,this.value=e}initialize(t,e){this.valueType=e.getValueType(),this.context=t,this.counter=e,this.value=e.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(t){if(!this.context||!this.counter)throw new b(S.ErrNotInitialized,"Counter is not initialized yet");const e=this.context.issueTimeTicket(),r=vt.of(t,e);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(zs.create(this.counter.getCreatedAt(),r,e)),this}toJSForTest(){if(!this.context||!this.counter)throw new b(S.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function xg(n){if(n.isText)return{type:n.type,value:n.value};const t={type:n.type,children:n.children.map(e=>xg(e))};return n.attrs&&(t.attributes=li(n.attrs.toObject())),t}function YE(n,t){const e={type:n.isText?n.parent.type:n.type,children:n.isText?n.parent.getChildrenText().length===t?[]:[{type:An,value:n.parent.getChildrenText().slice(t)}]:n.children.slice(t).map(r=>xg(r))};return n.attrs?e.attributes=li(n.attrs.toObject()):n.isText&&n.parent.attrs&&(e.attributes=li(n.parent.attrs.toObject())),e}function XE(n,t){const{node:e}=n,r=[...t].slice(0,-1),i=e.isText?e.parent.getChildrenText().length:e.children.length,a=[...r,i],s=[...r],o=[];s[s.length-1]+=1,t.every((c,h)=>c===a[h])||o.push({fromPath:[...t],toPath:a});const u=YE(e,t[t.length-1]);return u&&o.push({fromPath:s,toPath:s,content:u}),o}function FE(n,t){const{node:e,offset:r}=n,i=e.children[r],a=e.children[r-1],{children:s}=i,o=[...t].slice(0,-1),u=[{fromPath:[...t],toPath:[...o,r+1]}];if(!i.children.length)return u;const c=[...o,r-1,a.hasTextChild()?a.getChildrenText().length:a.children.length],h=s.map(m=>xg(m));return u.push({fromPath:c,toPath:c,content:h}),u}function Dg(n,t,e){const{type:r}=n,i=e.issueTimeTicket();if(r===An){ib(n);const{value:a}=n,s=pe.create(Yt.of(i,0),r,a);t.append(s)}else{const{children:a=[]}=n,{attributes:s}=n;let o;if(typeof s=="object"&&!RS(s)){const c=Is(s);o=new gi;for(const[h,m]of Object.entries(c))o.set(h,m,i)}const u=pe.create(Yt.of(i,0),r,void 0,o);t.append(u);for(const c of a)Dg(c,u,e)}}function ZE(n,t){const{type:e}=t,r=n.issueTimeTicket();let i;if(t.type===An){const{value:a}=t;i=pe.create(Yt.of(r,0),e,a)}else if(t){const{children:a=[]}=t,{attributes:s}=t;let o;if(typeof s=="object"&&!RS(s)){const u=Is(s);o=new gi;for(const[c,h]of Object.entries(u))o.set(c,h,r)}i=pe.create(Yt.of(n.issueTimeTicket(),0),e,void 0,o);for(const u of a)Dg(u,i,n)}return i}function ib(n){if(!n.value.length)throw new b(S.ErrInvalidArgument,"text node cannot have empty value");return!0}function jy(n){if(!n.length)return!0;if(n[0].type===An)for(const e of n){const{type:r}=e;if(r!==An)throw new b(S.ErrInvalidArgument,"element node and text node cannot be passed together");ib(e)}else for(const e of n){const{type:r}=e;if(r===An)throw new b(S.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class Og{constructor(t){l(this,"initialRoot");l(this,"context");l(this,"tree");this.initialRoot=t}initialize(t,e){this.context=t,this.tree=e}getID(){return this.tree.getID()}buildRoot(t){if(!this.initialRoot)return pe.create(Yt.of(t.issueTimeTicket(),0),$1);const e=pe.create(Yt.of(t.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)Dg(r,e,t);return e}getSize(){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}splitByPath(t){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new b(S.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t),r=XE(e,t);for(const i of r){const{fromPath:a,toPath:s,content:o}=i,u=this.tree.pathToPos(a),c=this.tree.pathToPos(s);this.editInternal(u,c,o?[o]:[],0)}}mergeByPath(t){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new b(S.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t);if(e.node.isText)throw new b(S.ErrInvalidArgument,"text node cannot be merged");const r=FE(e,t);for(const i of r){const{fromPath:a,toPath:s,content:o}=i,u=this.tree.pathToPos(a),c=this.tree.pathToPos(s);this.editInternal(u,c,o??[],0)}}styleByPath(t,e){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new b(S.ErrInvalidArgument,"path should not be empty");const[r,i]=this.tree.pathToPosRange(t),a=this.context.issueTimeTicket(),s=e?Is(e):void 0,[o,,u]=this.tree.style([r,i],s,a);this.context.acc(u);for(const c of o)this.context.registerGCPair(c);this.context.push(ui.create(this.tree.getCreatedAt(),r,i,s?new Map(Object.entries(s)):new Map,a))}style(t,e,r){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new b(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(t),a=this.tree.findPos(e),s=this.context.issueTimeTicket(),o=r?Is(r):void 0,[u,,c]=this.tree.style([i,a],o,s);this.context.acc(c);for(const h of u)this.context.registerGCPair(h);this.context.push(ui.create(this.tree.getCreatedAt(),i,a,o?new Map(Object.entries(o)):new Map,s))}removeStyle(t,e,r){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new b(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(t),a=this.tree.findPos(e),s=this.context.issueTimeTicket(),[o,,u]=this.tree.removeStyle([i,a],r,s);this.context.acc(u);for(const c of o)this.context.registerGCPair(c);this.context.push(ui.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),i,a,r,s))}editInternal(t,e,r,i=0){var c;if(r.length!==0&&r[0]&&(jy(r),r[0].type!==An))for(const h of r){const{children:m=[]}=h;jy(m)}const a=this.context.getLastTimeTicket();let s=new Array;if(((c=r[0])==null?void 0:c.type)===An){let h="";for(const m of r){const{value:d}=m;h+=d}s.push(pe.create(Yt.of(this.context.issueTimeTicket(),0),An,h))}else s=r.map(h=>h&&ZE(this.context,h)).filter(h=>h);const[,o,u]=this.tree.edit([t,e],s.length?s.map(h=>h==null?void 0:h.deepcopy()):void 0,i,a,()=>this.context.issueTimeTicket());this.context.acc(u);for(const h of o)this.context.registerGCPair(h);return this.context.push(pl.create(this.tree.getCreatedAt(),t,e,s.length?s:void 0,i,a)),!0}editByPath(t,e,r,i=0){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new b(S.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new b(S.ErrInvalidArgument,"path should not be empty");const a=this.tree.pathToPos(t),s=this.tree.pathToPos(e);return this.editInternal(a,s,r?[r]:[],i)}editBulkByPath(t,e,r,i=0){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new b(S.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new b(S.ErrInvalidArgument,"path should not be empty");const a=this.tree.pathToPos(t),s=this.tree.pathToPos(e);return this.editInternal(a,s,r,i)}edit(t,e,r,i=0){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new b(S.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),s=this.tree.findPos(e);return this.editInternal(a,s,r?[r]:[],i)}editBulk(t,e,r,i=0){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new b(S.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),s=this.tree.findPos(e);return this.editInternal(a,s,r,i)}toXML(){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(t){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(t)}pathToIndex(t){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(t)}pathRangeToPosRange(t){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");const e=[this.tree.pathToIndex(t[0]),this.tree.pathToIndex(t[1])],r=this.tree.indexRangeToPosRange(e);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(t){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(t)}posRangeToIndexRange(t){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");const e=[nn.fromStruct(t[0]),nn.fromStruct(t[1])];return this.tree.posRangeToIndexRange(e)}posRangeToPathRange(t){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");const e=[nn.fromStruct(t[0]),nn.fromStruct(t[1])];return this.tree.posRangeToPathRange(e)}}function $y(n,t){return rb(n,t)}function Fe(n,t){if(t){if(t instanceof vt)return t;if(t instanceof Zt)return rb(n,t);if(t instanceof Qt)return $E(n,t);if(t instanceof Ae)return new Eg(n,t);if(t instanceof oe){const e=new Ng(Dn.Int,0);return e.initialize(n,t),e}else if(t instanceof Ee){const e=new Og;return e.initialize(n,t),e}}else return;throw new TypeError(`Unsupported type of element: ${typeof t}`)}function oa(n,t){const e=Fe(n,t);return e instanceof vt?e.getValue():e}function Do(n,t,e){let r;if(vt.isSupport(t))r=vt.of(t,e);else if(Array.isArray(t))r=Qt.create(e,nt.buildArrayElements(n,t));else if(typeof t=="object")t instanceof Eg?(r=Ae.create(Bs.create(),e),t.initialize(n,r)):t instanceof Ng?(r=oe.create(t.getValueType(),t.getValue(),e),t.initialize(n,r)):t instanceof Og?(r=Ee.create(t.buildRoot(n),e),t.initialize(n,r)):r=Zt.create(e,Zo.buildObjectMembers(n,t));else throw new TypeError(`Unsupported type of value: ${typeof t}`);return r}class Qo{constructor(t){l(this,"rootObject");l(this,"elementPairMapByCreatedAt");l(this,"gcElementSetByCreatedAt");l(this,"gcPairMap");l(this,"docSize");this.rootObject=t,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.docSize={live:{data:0,meta:0},gc:{data:0,meta:0}},this.registerElement(t,void 0),t.getDescendants(e=>{if(e.getRemovedAt()&&this.registerRemovedElement(e),e instanceof Ae||e instanceof Ee)for(const r of e.getGCPairs())this.registerGCPair(r);return!1})}static create(){return new Qo(Zt.create(Os))}findByCreatedAt(t){const e=this.elementPairMapByCreatedAt.get(t.toIDString());if(e)return e.element}findElementPairByCreatedAt(t){return this.elementPairMapByCreatedAt.get(t.toIDString())}createSubPaths(t){let e=this.elementPairMapByCreatedAt.get(t.toIDString());if(!e)return[];const r=[];for(;e.parent;){const i=e.element.getCreatedAt(),a=e.parent.subPathOf(i);if(a===void 0)throw new b(S.ErrInvalidArgument,`cant find the given element: ${i.toIDString()}`);r.unshift(a),e=this.elementPairMapByCreatedAt.get(e.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(t){return this.createSubPaths(t).join(".")}registerElement(t,e){this.elementPairMapByCreatedAt.set(t.getCreatedAt().toIDString(),{parent:e,element:t}),$t(this.docSize.live,t.getDataSize()),t instanceof $i&&t.getDescendants((r,i)=>(this.elementPairMapByCreatedAt.set(r.getCreatedAt().toIDString(),{parent:i,element:r}),$t(this.docSize.live,r.getDataSize()),!1))}deregisterElement(t){let e=0;const r=i=>{const a=i.getCreatedAt().toIDString();ua(this.docSize.gc,i.getDataSize()),this.elementPairMapByCreatedAt.delete(a),this.gcElementSetByCreatedAt.delete(a),e++};return r(t),t instanceof $i&&t.getDescendants(i=>(r(i),!1)),e}registerRemovedElement(t){$t(this.docSize.gc,t.getDataSize()),ua(this.docSize.live,t.getDataSize()),this.docSize.live.meta+=wn,this.gcElementSetByCreatedAt.add(t.getCreatedAt().toIDString())}registerGCPair(t){if(this.gcPairMap.get(t.child.toIDString())){this.gcPairMap.delete(t.child.toIDString());return}this.gcPairMap.set(t.child.toIDString(),t);const r=this.gcPairMap.get(t.child.toIDString()).child.getDataSize();$t(this.docSize.gc,r),ua(this.docSize.live,r),t.child instanceof Mi||(this.docSize.live.meta+=wn)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const t=new Set;for(const e of this.gcElementSetByCreatedAt){t.add(e);const r=this.elementPairMapByCreatedAt.get(e);r.element instanceof $i&&r.element.getDescendants(i=>(t.add(i.getCreatedAt().toIDString()),!1))}return t.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}getDocSize(){return this.docSize}deepcopy(){return new Qo(this.rootObject.deepcopy())}garbageCollect(t){let e=0;for(const r of this.gcElementSetByCreatedAt){const i=this.elementPairMapByCreatedAt.get(r),a=i.element.getRemovedAt();a&&(t!=null&&t.afterOrEqual(a))&&(i.parent.purge(i.element),e+=this.deregisterElement(i.element))}for(const[,r]of this.gcPairMap){const i=r.child.getRemovedAt();i&&(t!=null&&t.afterOrEqual(i))&&(r.parent.purge(r.child),ua(this.docSize.gc,r.child.getDataSize()),this.gcPairMap.delete(r.child.toIDString()),e+=1)}return e}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}acc(t){$t(this.docSize.live,t)}*getGCElementPairs(){for(const t of this.gcElementSetByCreatedAt){const e=this.elementPairMapByCreatedAt.get(t);e&&(yield e)}}}let Gy=class{constructor(t,e){l(this,"context");l(this,"presence");this.context=t,this.presence=e}set(t,e){for(const r of Object.keys(t))this.presence[r]=t[r];this.context.setPresenceChange({type:Nn.Put,presence:Ze(this.presence)}),this.context.setReversePresence(t,e)}get(t){return this.presence[t]}clear(){this.presence={},this.context.setPresenceChange({type:Nn.Clear})}};const Yy=50;class QE{constructor(){l(this,"undoStack",[]);l(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(t){this.undoStack.length>=Yy&&this.undoStack.shift(),this.undoStack.push(t)}popUndo(){return this.undoStack.pop()}pushRedo(t){this.redoStack.length>=Yy&&this.redoStack.shift(),this.redoStack.push(t)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}reconcileCreatedAt(t,e){const r=i=>{for(const a of i)for(const s of a)(s instanceof mi||s instanceof xn||s instanceof en)&&s.getCreatedAt()===t&&s.setCreatedAt(e),(s instanceof Wi||s instanceof en)&&s.getPrevCreatedAt()===t&&s.setPrevCreatedAt(e)};r(this.undoStack),r(this.redoStack)}}function _E(n,t){const e=[];for(const r of t){const i=WE(n,r.path),a=tN(i,r);if(!a.valid)for(const s of a.errors||[])e.push(s)}return{valid:e.length===0,errors:e}}function WE(n,t){if(!t.startsWith("$"))throw new Error(`Path must start with $, got ${t}`);const e=t.split(".");let r=n;for(let i=1;i<e.length;i++){const a=e[i];if(!(r instanceof Zt))return;r=r.get(a)}return r}function tN(n,t){switch(t.type){case"string":case"boolean":case"integer":case"double":case"long":case"date":case"bytes":case"null":return nN(n,t);case"object":if(!(n instanceof Zt))return{valid:!1,errors:[{path:t.path,message:`expected object at path ${t.path}`}]};break;case"array":if(!(n instanceof Qt))return{valid:!1,errors:[{path:t.path,message:`expected array at path ${t.path}`}]};break;case"yorkie.Text":if(!(n instanceof Ae))return{valid:!1,errors:[{path:t.path,message:`expected yorkie.Text at path ${t.path}`}]};break;case"yorkie.Tree":if(!(n instanceof Ee))return{valid:!1,errors:[{path:t.path,message:`expected yorkie.Tree at path ${t.path}`}]};break;case"yorkie.Counter":if(!(n instanceof oe))return{valid:!1,errors:[{path:t.path,message:`expected yorkie.Counter at path ${t.path}`}]};break;default:throw new Error(`Unknown rule type: ${t.type}`)}return{valid:!0}}function eN(n){switch(n){case"null":return lt.Null;case"boolean":return lt.Boolean;case"integer":return lt.Integer;case"long":return lt.Long;case"double":return lt.Double;case"string":return lt.String;case"bytes":return lt.Bytes;case"date":return lt.Date;default:throw new Error(`Unknown primitive type: ${n}`)}}function nN(n,t){return n instanceof vt&&n.getType()===eN(t.type)?{valid:!0}:{valid:!1,errors:[{path:t.path,message:`expected ${t.type} at path ${t.path}`}]}}const rN="yorkie-devtools-panel",iN="yorkie-devtools-sdk";function aN(n){return[Ut.StatusChanged,Ut.Snapshot,Ut.LocalChange,Ut.RemoteChange,Ut.Initialized,Ut.Watched,Ut.Unwatched,Ut.PresenceChanged].includes(n.type)}function sN(n){return n.every(aN)}let Pa="disconnected";const Xy=new Map,ou=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=ou);function Hl(n,t){(t!=null&&t.force||Pa!=="disconnected")&&window.postMessage({source:iN,...n},"*")}function oN(n){if(!n.isEnableDevtools()||typeof window>"u"||Xy.has(n.getKey()))return;ou.set(n.getKey(),[]);const t=n.subscribe("all",e=>{sN(e)&&(ou.get(n.getKey()).push(e),Pa==="synced"&&Hl({msg:"doc::sync::partial",docKey:n.getKey(),event:e}))});Xy.set(n.getKey(),[t]),Hl({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",e=>{var i;if(((i=e.data)==null?void 0:i.source)!==rN)return;switch(e.data.msg){case"devtools::connect":if(Pa!=="disconnected")break;Pa="connected",Hl({msg:"doc::available",docKey:n.getKey()}),B.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":Pa="disconnected",B.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":Pa="synced",Hl({msg:"doc::sync::full",docKey:n.getKey(),events:ou.get(n.getKey())}),B.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var wi=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(wi||{}),Ut=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.AuthError="auth-error",n))(Ut||{}),Oo=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(Oo||{}),ud=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(ud||{});class Ci{constructor(t,e){l(this,"key");l(this,"status");l(this,"opts");l(this,"maxSizeLimit");l(this,"schemaRules");l(this,"changeID");l(this,"checkpoint");l(this,"localChanges");l(this,"root");l(this,"presences");l(this,"clone");l(this,"internalHistory");l(this,"isUpdating");l(this,"onlineClients");l(this,"eventStream");l(this,"eventStreamObserver");l(this,"history");this.key=t,this.status="detached",this.opts=e||{},this.maxSizeLimit=0,this.schemaRules=[],this.changeID=W1,this.checkpoint=tE,this.localChanges=[],this.root=Qo.create(),this.presences=new Map,this.onlineClients=new Set,this.internalHistory=new QE,this.isUpdating=!1,this.eventStream=nb(r=>this.eventStreamObserver=r),this.history={canUndo:()=>this.internalHistory.hasUndo()&&!this.isUpdating,canRedo:()=>this.internalHistory.hasRedo()&&!this.isUpdating,undo:()=>this.executeUndoRedo(!0),redo:()=>this.executeUndoRedo(!1)},oN(this)}update(t,e){var o,u,c;if(this.getStatus()==="removed")throw new b(S.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),i=xo.create(this.changeID,this.clone.root,this.clone.presences.get(r)||{},e);try{const h=$y(i,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,t(h,new Gy(i,this.clone.presences.get(r)))}catch(h){throw this.clone=void 0,h}finally{this.isUpdating=!1}const a=this.getSchemaRules();if(!i.isPresenceOnlyChange()&&a.length){const h=_E((o=this.clone)==null?void 0:o.root.getObject(),a);if(!h.valid)throw this.clone=void 0,new b(S.ErrDocumentSchemaValidationFailed,`schema validation failed: ${(u=h.errors)==null?void 0:u.map(m=>m.message).join(", ")}`)}const s=K1((c=this.clone)==null?void 0:c.root.getDocSize());if(!i.isPresenceOnlyChange()&&this.maxSizeLimit>0&&this.maxSizeLimit<s)throw this.clone=void 0,new b(S.ErrDocumentSizeExceedsLimit,`document size exceeded: ${s} > ${this.maxSizeLimit}`);if(i.hasChange()){B.isEnabled(ae.Trivial)&&B.trivial(`trying to update a local change: ${this.toJSON()}`);const h=i.toChange(),{opInfos:m,reverseOps:d}=h.execute(this.root,this.presences,gt.Local);for(const A of h.getOperations())A instanceof mi&&this.internalHistory.reconcileCreatedAt(A.getCreatedAt(),A.getValue().getCreatedAt());const g=i.getReversePresence();g&&d.push({type:"presence",value:g}),this.localChanges.push(h),d.length&&this.internalHistory.pushUndo(d),m.length&&this.internalHistory.clearRedo(),this.changeID=i.getNextID();const T=[];m.length&&T.push({type:"local-change",source:gt.Local,value:{message:h.getMessage()||"",operations:m,actor:r,clientSeq:h.getID().getClientSeq(),serverSeq:h.getID().getServerSeq()},rawChange:this.isEnableDevtools()?h.toStruct():void 0}),h.hasPresenceChange()&&T.push({type:"presence-changed",source:gt.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(T),B.isEnabled(ae.Trivial)&&B.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(t,e,r,i){if(typeof t=="string"){if(typeof e!="function")throw new b(S.ErrInvalidArgument,"Second argument must be a callback function");if(t==="presence"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="initialized"&&c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||o(c)},r,i)}if(t==="my-presence"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="initialized"&&c.type!=="presence-changed"||c.type==="presence-changed"&&c.value.clientID!==this.changeID.getActorID()||o(c)},r,i)}if(t==="others"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||c.value.clientID!==this.changeID.getActorID()&&o(c)},r,i)}if(t==="connection"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="connection-changed"&&o(c)},r,i)}if(t==="status"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="status-changed"&&o(c)},r,i)}if(t==="sync"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="sync-status-changed"&&o(c)},r,i)}if(t==="auth-error"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="auth-error"&&o(c)},r)}if(t==="all"){const o=e;return this.eventStream.subscribe(o,r,i)}const a=t,s=e;return this.eventStream.subscribe(o=>{for(const u of o){if(u.type!=="local-change"&&u.type!=="remote-change")continue;const c=[];for(const h of u.value.operations)this.isSameElementOrChildOf(h.path,a)&&c.push(h);c.length&&s({...u,value:{...u.value,operations:c}})}},r,i)}if(typeof t=="function"){const a=t,s=e,o=r;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="snapshot"&&c.type!=="local-change"&&c.type!=="remote-change"||a(c)},s,o)}throw new b(S.ErrInvalidArgument,`"${t}" is not a valid`)}publish(t){this.eventStreamObserver&&this.eventStreamObserver.next(t)}applyChangePack(t){t.hasSnapshot()?this.applySnapshot(t.getCheckpoint().getServerSeq(),t.getVersionVector(),t.getSnapshot(),t.getCheckpoint().getClientSeq()):(this.applyChanges(t.getChanges(),gt.Remote),this.removePushedLocalChanges(t.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(t.getCheckpoint()),t.hasSnapshot()||this.garbageCollect(t.getVersionVector()),t.getIsRemoved()&&this.applyStatus("removed"),B.isEnabled(ae.Trivial)&&B.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Ze(this.presences)})}createChangePack(){const t=Array.from(this.localChanges),e=this.checkpoint.increaseClientSeq(t.length);return zc.create(this.key,e,!1,t,this.getVersionVector())}setActor(t){for(const e of this.localChanges)e.setActor(t);this.changeID=this.changeID.setActor(t)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getClone(){return this.clone}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const t=xo.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return $y(t,this.clone.root.getObject())}getDocSize(){return this.root.getDocSize()}getMaxSizePerDocument(){return this.maxSizeLimit}setMaxSizePerDocument(t){this.maxSizeLimit=t}getSchemaRules(){return this.schemaRules}setSchemaRules(t){this.schemaRules=t}garbageCollect(t){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(t),this.root.garbageCollect(t))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getRootCRDT(){return this.root}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(t,e,r,i=-1){const{root:a,presences:s}=St.bytesToSnapshot(r);this.root=new Qo(a),this.presences=s,this.changeID=this.changeID.setClocks(e.maxLamport(),e),this.clone=void 0,this.removePushedLocalChanges(i),this.applyChanges(this.localChanges,gt.Local),this.publish([{type:"snapshot",source:gt.Remote,value:{serverSeq:t.toString(),snapshot:this.isEnableDevtools()?St.bytesToHex(r):void 0,snapshotVector:St.versionVectorToHex(e)}}])}applyChanges(t,e){B.isEnabled(ae.Debug)&&B.debug(`trying to apply ${t.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),B.isEnabled(ae.Trivial)&&B.trivial(t.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of t)this.applyChange(r,e);B.isEnabled(ae.Debug)&&B.debug(`after appling ${t.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(t,e){this.ensureClone(),t.execute(this.clone.root,this.clone.presences,e);const r=[],i=t.getID().getActorID();if(t.hasPresenceChange()&&this.onlineClients.has(i)){const s=t.getPresenceChange();switch(s.type){case Nn.Put:r.push(this.presences.has(i)?{type:"presence-changed",source:e,value:{clientID:i,presence:s.presence}}:{type:"watched",source:gt.Remote,value:{clientID:i,presence:s.presence}});break;case Nn.Clear:r.push({type:"unwatched",source:gt.Remote,value:{clientID:i,presence:this.getPresence(i)}}),this.removeOnlineClient(i);break}}const{opInfos:a}=t.execute(this.root,this.presences,e);if(this.changeID=this.changeID.syncClocks(t.getID()),a.length){const s=this.isEnableDevtools()?t.toStruct():void 0;r.push(e===gt.Remote?{type:"remote-change",source:e,value:{actor:i,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:a},rawChange:s}:{type:"local-change",source:e,value:{actor:i,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:a},rawChange:s})}r.length&&this.publish(r)}applyWatchStream(t){if(t.body.case==="initialization"){const e=t.body.value.clientIds,r=new Set;for(const i of e)i!==this.changeID.getActorID()&&r.add(i);this.setOnlineClients(r),this.publish([{type:"initialized",source:gt.Local,value:this.getPresences()}]);return}if(t.body.case==="event"){const{type:e,publisher:r}=t.body.value,i=[];if(e===Ns.DOCUMENT_WATCHED){if(this.onlineClients.has(r)&&this.hasPresence(r))return;this.addOnlineClient(r),this.hasPresence(r)&&i.push({type:"watched",source:gt.Remote,value:{clientID:r,presence:this.getPresence(r)}})}else if(e===Ns.DOCUMENT_UNWATCHED){const a=this.getPresence(r);this.removeOnlineClient(r),a&&i.push({type:"unwatched",source:gt.Remote,value:{clientID:r,presence:a}})}i.length&&this.publish(i)}}applyStatus(t){this.status=t,t==="detached"&&this.setActor(hg),this.publish([{source:t==="removed"?gt.Remote:gt.Local,type:"status-changed",value:t==="attached"?{status:t,actorID:this.changeID.getActorID()}:{status:t}}])}applyDocEventsForReplay(t){for(const e of t){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);continue}if(e.type==="snapshot"){const{snapshot:r,serverSeq:i,snapshotVector:a}=e.value;if(!r)continue;this.applySnapshot(BigInt(i),St.hexToVersionVector(a),St.hexToBytes(r));continue}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)continue;const r=Rs.fromStruct(e.rawChange);this.applyChange(r,e.source)}if(e.type==="initialized"){const r=new Set;for(const{clientID:i,presence:a}of e.value)r.add(i),this.presences.set(i,a);this.setOnlineClients(r)}else if(e.type==="watched"){const{clientID:r,presence:i}=e.value;this.addOnlineClient(r),this.presences.set(r,i)}else if(e.type==="unwatched"){const{clientID:r}=e.value;this.removeOnlineClient(r),this.presences.delete(r)}else if(e.type==="presence-changed"){const{clientID:r,presence:i}=e.value;this.presences.set(r,i)}}}getValueByPath(t){if(!t.startsWith("$"))throw new b(S.ErrInvalidArgument,'path must start with "$"');const e=t.split(".");e.shift();let r=this.getRoot();for(const i of e)if(r=r[i],!r)return;return r}setOnlineClients(t){this.onlineClients=t}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(t){this.onlineClients.add(t)}removeOnlineClient(t){this.onlineClients.delete(t)}hasPresence(t){return this.presences.has(t)}getMyPresence(){if(this.status!=="attached")return{};const t=this.presences.get(this.changeID.getActorID());return t?Ze(t):{}}getOthersPresences(){const t=[],e=this.changeID.getActorID();for(const r of this.onlineClients)r!==e&&this.presences.has(r)&&t.push({clientID:r,presence:Ze(this.presences.get(r))});return t}getPresence(t){if(t===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(t))return;const e=this.presences.get(t);return e?Ze(e):void 0}getPresences(){const t=[];t.push({clientID:this.changeID.getActorID(),presence:Ze(this.getMyPresence())});for(const e of this.onlineClients)this.presences.has(e)&&t.push({clientID:e,presence:Ze(this.presences.get(e))});return t}getPresenceForTest(t){const e=this.presences.get(t);return e?Ze(e):void 0}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const t=this.getChangeID().getActorID();return this.getPresences().filter(e=>e.clientID!==t).sort((e,r)=>e.clientID>r.clientID?1:-1)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}getVersionVector(){return this.changeID.getVersionVector()}isSameElementOrChildOf(t,e){if(e===t)return!0;const r=t.split(".");return e.split(".").every((i,a)=>i===r[a])}removePushedLocalChanges(t){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>t);)this.localChanges.shift()}executeUndoRedo(t){if(this.isUpdating)throw new b(S.ErrRefused,`${t?"Undo":"Redo"} is not allowed during an update`);const e=t?this.internalHistory.popUndo():this.internalHistory.popRedo();if(!e)throw new b(S.ErrRefused,`There is no operation to be ${t?"undone":"redone"}`);this.ensureClone();const r=xo.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const h of e){if(!(h instanceof on)){new Gy(r,Ze(this.clone.presences.get(this.changeID.getActorID()))).set(h.value,{addToHistory:!0});continue}const m=r.issueTimeTicket();if(h.setExecutedAt(m),h instanceof mi){const d=h.getCreatedAt();h.getValue().setCreatedAt(m),this.internalHistory.reconcileCreatedAt(d,m)}else if(h instanceof Wi){const d=h.getValue().getCreatedAt();h.getValue().setCreatedAt(m),this.internalHistory.reconcileCreatedAt(d,m)}r.push(h)}const i=r.toChange();i.execute(this.clone.root,this.clone.presences,gt.UndoRedo);const{opInfos:a,reverseOps:s}=i.execute(this.root,this.presences,gt.UndoRedo),o=r.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length&&(t?this.internalHistory.pushRedo(s):this.internalHistory.pushUndo(s)),!i.hasPresenceChange()&&!a.length)return;this.localChanges.push(i),this.changeID=r.getNextID();const u=this.changeID.getActorID(),c=[];a.length&&c.push({type:"local-change",source:gt.UndoRedo,value:{message:i.getMessage()||"",operations:a,actor:u,clientSeq:i.getID().getClientSeq(),serverSeq:i.getID().getServerSeq()},rawChange:this.isEnableDevtools()?i.toStruct():void 0}),i.hasPresenceChange()&&c.push({type:"presence-changed",source:gt.UndoRedo,value:{clientID:u,presence:this.getPresence(u)}}),this.publish(c)}}class Fy{constructor(t,e,r,i){l(this,"resource");l(this,"resourceID");l(this,"syncMode");l(this,"changeEventReceived");l(this,"lastHeartbeatTime");l(this,"reconnectStreamDelay");l(this,"cancelled");l(this,"watchStream");l(this,"watchLoopTimerID");l(this,"watchAbortController");this.reconnectStreamDelay=t,this.resource=e,this.resourceID=r,this.syncMode=i,this.changeEventReceived=i!==void 0?!1:void 0,this.lastHeartbeatTime=Date.now(),this.cancelled=!1}changeSyncMode(t){this.syncMode=t}needRealtimeSync(){return this.syncMode===ao.RealtimeSyncOff?!1:this.syncMode===ao.RealtimePushOnly?this.resource.hasLocalChanges():this.syncMode!==ao.Manual&&(this.resource.hasLocalChanges()||(this.changeEventReceived??!1))}needSync(t){return this.resource instanceof Ci?this.needRealtimeSync():this.syncMode===ao.Manual?!1:Date.now()-this.lastHeartbeatTime>=t}updateHeartbeatTime(){this.lastHeartbeatTime=Date.now()}async runWatchLoop(t){const e=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await t(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.cancelled||(this.watchLoopTimerID=setTimeout(e,this.reconnectStreamDelay))})}catch{}};await e()}cancelWatchStream(){this.cancelled=!0,this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}function lN(n,t){let e=t;return{authInterceptor:a=>async s=>(n&&s.header.set("x-api-key",n),e&&s.header.set("authorization",e),await a(s)),setToken:a=>{e=a}}}const uN="@yorkie-js/sdk",cN="0.6.37",Zy={name:uN,version:cN};function fN(n){return t=>async e=>(n?e.header.set("x-yorkie-user-agent",n):e.header.set("x-yorkie-user-agent",Zy.name+"/"+Zy.version),await t(e))}const hN=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var io=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(io||{}),ts=(n=>(n.PresenceChanged="presence-changed",n.Initialized="initialized",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(ts||{});const _s=".";class Ai{constructor(t){l(this,"key");l(this,"status");l(this,"actorID");l(this,"sessionID");l(this,"count");l(this,"seq");l(this,"eventStream");l(this,"eventStreamObserver");this.validateChannelKey(t),this.key=t,this.status="detached",this.count=0,this.seq=0,this.eventStream=nb(e=>this.eventStreamObserver=e)}getKey(){return this.key}getFirstKeyPath(){return this.key.split(_s)[0]}getStatus(){return this.status}applyStatus(t){this.status=t}isAttached(){return this.status==="attached"}getActorID(){return this.actorID}setActor(t){this.actorID=t}getSessionID(){return this.sessionID}setSessionID(t){this.sessionID=t}getPresenceCount(){return this.count}updateCount(t,e){return e===0||e>this.seq?(this.count=t,this.seq=e,!0):!1}hasLocalChanges(){return!1}subscribe(t,e){if(typeof t=="function")return this.eventStream.subscribe(t);const r=t,i=e;if(!i)throw new Error("callback is required when subscribing to specific event type or topic");if(r==="broadcast")return this.eventStream.subscribe(s=>{s.type==="broadcast"&&i(s)});if(r==="local-broadcast")return this.eventStream.subscribe(s=>{s.type==="local-broadcast"&&i(s)});if(r==="auth-error")return this.eventStream.subscribe(s=>{s.type==="auth-error"&&i(s)});if(r==="presence")return this.eventStream.subscribe(s=>{(s.type==="presence-changed"||s.type==="initialized")&&i(s)});if(r==="all")return this.eventStream.subscribe(i);const a=r;return this.eventStream.subscribe(s=>{s.type==="broadcast"&&s.topic===a&&i(s)})}publish(t){this.eventStreamObserver&&this.eventStreamObserver.next(t)}broadcast(t,e,r){if(this.status!=="attached")throw new Error(`channel is not attached: ${this.status}`);if(!this.actorID)throw new Error("actorID is not set");this.publish({type:"local-broadcast",clientID:this.actorID,topic:t,payload:e,options:r})}validateChannelKey(t){if(t==="")throw new Error("channel key must not be empty");if(t.includes(" "))throw new Error("channel key must not contain a whitespace");if(t.startsWith(_s))throw new Error("channel key must not start with a period");if(t.endsWith(_s))throw new Error("channel key must not end with a period");if(t.includes(`${_s}${_s}`))throw new Error("channel key path must not empty")}}var ao=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(ao||{});const za={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3,channelHeartbeatInterval:3e4},Df={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class ab{constructor(t){l(this,"id");l(this,"key");l(this,"metadata");l(this,"status");l(this,"attachmentMap");l(this,"apiKey");l(this,"authTokenInjector");l(this,"conditions");l(this,"syncLoopDuration");l(this,"reconnectStreamDelay");l(this,"retrySyncLoopDelay");l(this,"channelHeartbeatInterval");l(this,"rpcClient");l(this,"setAuthToken");l(this,"taskQueue");l(this,"processing",!1);l(this,"keepalive",!1);t=t||za;const e=t.rpcAddr||za.rpcAddr;this.key=t.key||eb(),this.metadata=t.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.authTokenInjector=t.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=t.syncLoopDuration??za.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay??za.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay??za.retrySyncLoopDelay,this.channelHeartbeatInterval=t.channelHeartbeatInterval??za.channelHeartbeatInterval;const{authInterceptor:r,setToken:i}=lN(this.apiKey);this.setAuthToken=i,this.rpcClient=h1(M1,z1({baseUrl:e,interceptors:[r,fN(t==null?void 0:t.userAgent)],fetch:(a,s)=>fetch(a,{...s,keepalive:this.keepalive})})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const t=await this.authTokenInjector();this.setAuthToken(t)}return this.enqueueTask(async()=>{try{const t=await this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}});this.id=t.clientId,this.status="activated",this.runSyncLoop(),B.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`),typeof window<"u"&&window.addEventListener("beforeunload",async()=>{await this.deactivate({keepalive:!0})})}catch(t){throw B.error(`[AC] c:"${this.getKey()}" err :`,t),await this.handleConnectError(t),t}})}deactivate(t={keepalive:!1,synchronous:!1}){if(this.status==="deactivated")return Promise.resolve();const e=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id,synchronous:t.synchronous},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}}),this.deactivateInternal(),B.info(`[DC] c"${this.getKey()}" deactivated`)}catch(r){throw B.error(`[DC] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};if(t.keepalive){this.keepalive=!0;const r=e();return this.keepalive=!1,r}return this.enqueueTask(e)}has(t){return this.attachmentMap.has(t)}attach(t,e){return t instanceof Ai?this.attachChannel(t,e):this.attachDocument(t,e)}attachDocument(t,e={}){if(!this.isActive())throw new b(S.ErrClientNotActivated,`${this.key} is not active`);if(t.getStatus()!==wi.Detached)throw new b(S.ErrNotDetached,`${t.getKey()} is not detached`);t.setActor(this.id),t.update((i,a)=>a.set(e.initialPresence||{}));const r=e.syncMode??"realtime";return this.enqueueTask(async()=>{try{const i=await this.rpcClient.attachDocument({clientId:this.id,changePack:St.toChangePack(t.createChangePack()),schemaKey:e.schema},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}});(i.maxSizePerDocument??0)>0&&t.setMaxSizePerDocument(i.maxSizePerDocument),i.schemaRules.length>0&&t.setSchemaRules(St.fromSchemaRules(i.schemaRules));const s=St.fromChangePack(i.changePack);if(t.applyChangePack(s),t.getStatus()===wi.Removed)return t;t.applyStatus(wi.Attached),this.attachmentMap.set(t.getKey(),new Fy(this.reconnectStreamDelay,t,i.documentId,r)),r!=="manual"&&await this.runWatchLoop(t.getKey()),B.info(`[AD] c:"${this.getKey()}" attaches d:"${t.getKey()}"`);const o=t.getRootObject();if(e.initialRoot){const u=e.initialRoot;t.update(c=>{for(const[h,m]of Object.entries(u))if(!o.has(h)){const d=h;c[d]=m}})}return t}catch(i){throw B.error(`[AD] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}})}detach(t,e){return t instanceof Ai?this.detachChannel(t):this.detachDocument(t,e)}detachDocument(t,e={keepalive:!1}){if(!this.isActive())throw new b(S.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(t.getKey());if(!r)throw new b(S.ErrNotAttached,`${t.getKey()} is not attached`);t.update((a,s)=>s.clear());const i=async()=>{try{const a=await this.rpcClient.detachDocument({clientId:this.id,documentId:r.resourceID,changePack:St.toChangePack(t.createChangePack()),removeIfNotAttached:e.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),s=St.fromChangePack(a.changePack);return t.applyChangePack(s),t.getStatus()!==wi.Removed&&t.applyStatus(wi.Detached),this.detachInternal(t.getKey()),B.info(`[DD] c:"${this.getKey()}" detaches d:"${t.getKey()}"`),t}catch(a){throw B.error(`[DD] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}};if(e.keepalive){this.keepalive=!0;const a=i();return this.keepalive=!1,a}return this.enqueueTask(i)}async attachChannel(t,e={}){if(!this.isActive())throw new b(S.ErrClientNotActivated,`${this.key} is not active`);if(t.getStatus()!==io.Detached)throw new b(S.ErrNotDetached,`${t.getKey()} is not detached`);t.setActor(this.id);const r=async()=>{try{const i=await this.rpcClient.attachChannel({clientId:this.id,channelKey:t.getKey()},{headers:{"x-shard-key":`${this.apiKey}/${t.getFirstKeyPath()}`}});t.setSessionID(i.sessionId),t.updateCount(Number(i.count),0),t.applyStatus(io.Attached);const a=e.isRealtime!==!1?"realtime":"manual",s=new Fy(this.reconnectStreamDelay,t,i.sessionId,a);return t.subscribe("local-broadcast",o=>{const{topic:u,payload:c,options:h}=o;this.broadcast(t.getKey(),u,c,h).catch(m=>{h!=null&&h.error&&h.error(m),B.error(`[BC] c:"${this.getKey()}" failed: ${m}`)})}),this.attachmentMap.set(t.getKey(),s),a==="realtime"&&await this.runWatchLoop(t.getKey()),B.info(`[AP] c:"${this.getKey()}" attaches p:"${t.getKey()}" mode:${a} count:${t.getPresenceCount()}`),t}catch(i){throw B.error(`[AP] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}};return this.enqueueTask(r)}async detachChannel(t){if(!this.isActive())throw new b(S.ErrClientNotActivated,`${this.key} is not active`);if(!this.attachmentMap.has(t.getKey()))throw new b(S.ErrNotAttached,`${t.getKey()} is not attached`);const e=async()=>{try{const r=await this.rpcClient.detachChannel({clientId:this.id,channelKey:t.getKey(),sessionId:t.getSessionID()},{headers:{"x-shard-key":`${this.apiKey}/${t.getFirstKeyPath()}`}});return t.updateCount(Number(r.count),0),t.applyStatus(io.Detached),this.detachInternal(t.getKey()),B.info(`[DP] c:"${this.getKey()}" detaches p:"${t.getKey()}" count:${t.getPresenceCount()}`),t}catch(r){throw B.error(`[DP] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};return this.enqueueTask(e)}async changeSyncMode(t,e){if(!this.isActive())throw new b(S.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(t.getKey());if(!r)throw new b(S.ErrNotAttached,`${t.getKey()} is not attached`);const i=r.syncMode;return i===e?t:(r.changeSyncMode(e),e==="manual"?(r.cancelWatchStream(),t):(e==="realtime"&&(r.changeEventReceived=!0),i==="manual"&&await this.runWatchLoop(t.getKey()),t))}sync(t){if(!this.isActive())throw new b(S.ErrClientNotActivated,`${this.key} is not active`);if(t instanceof Ai){const e=this.attachmentMap.get(t.getKey());if(!e)throw new b(S.ErrNotAttached,`${t.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(e).catch(async r=>{throw B.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}if(t instanceof Ci){const e=this.attachmentMap.get(t.getKey());if(!e)throw new b(S.ErrNotAttached,`${t.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(e,"realtime").catch(async r=>{throw B.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}return this.enqueueTask(async()=>{const e=[];for(const[,r]of this.attachmentMap)r.syncMode!==void 0&&r.resource instanceof Ci&&e.push(this.syncInternal(r,r.syncMode));return Promise.all(e).catch(async r=>{throw B.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r})})}remove(t){if(!this.isActive())throw new b(S.ErrClientNotActivated,`${this.key} is not active`);const e=this.attachmentMap.get(t.getKey());if(!e)throw new b(S.ErrNotAttached,`${t.getKey()} is not attached`);t.setActor(this.id);const r=St.toChangePack(t.createChangePack());return r.isRemoved=!0,this.enqueueTask(async()=>{try{const i=await this.rpcClient.removeDocument({clientId:this.id,documentId:e.resourceID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),a=St.fromChangePack(i.changePack);t.applyChangePack(a),this.detachInternal(t.getKey()),B.info(`[RD] c:"${this.getKey()}" removes d:"${t.getKey()}"`)}catch(i){throw B.error(`[RD] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(t){return this.conditions[t]}async broadcast(t,e,r,i){if(!this.isActive())throw new b(S.ErrClientNotActivated,`${this.key} is not active`);const a=this.attachmentMap.get(t);if(!a)throw new b(S.ErrNotAttached,`${t} is not attached`);if(!hN(r))throw new b(S.ErrInvalidArgument,"payload is not serializable");const s=a.resource,o=(i==null?void 0:i.maxRetries)??Df.maxRetries,u=Df.maxBackoff;let c=0;const h=d=>Math.min(Df.initialRetryInterval*2**d,u),m=async()=>this.enqueueTask(async()=>{try{await this.rpcClient.broadcast({clientId:this.id,channelKey:t,topic:e,payload:new TextEncoder().encode(JSON.stringify(r))},{headers:{"x-shard-key":`${this.apiKey}/${s.getFirstKeyPath()}`}}),B.info(`[BC] c:"${this.getKey()}" broadcasts p:"${t}" t:"${e}"`)}catch(d){if(B.error(`[BC] c:"${this.getKey()}" err:`,d),await this.handleConnectError(d))if(Nf(d,S.ErrUnauthenticated)&&a.resource instanceof Ai&&a.resource.publish({type:ts.AuthError,reason:ro(d).reason||"unauthenticated",method:"Broadcast"}),c<o)c++,setTimeout(()=>m(),h(c-1)),B.info(`[BC] c:"${this.getKey()}" retry attempt ${c}/${o}`);else throw B.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),d}});return m()}runSyncLoop(){const t=async()=>{if(!this.isActive()){B.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}try{await this.enqueueTask(async()=>{const e=[];for(const[,r]of this.attachmentMap)r.needSync(this.channelHeartbeatInterval)&&(r.changeEventReceived!==void 0&&(r.changeEventReceived=!1),e.push(this.syncInternal(r,r.syncMode).catch(i=>{throw Nf(i,S.ErrUnauthenticated)&&r.resource.publish([{type:Ut.AuthError,value:{reason:ro(i).reason,method:"PushPull"}}]),i})));await Promise.all(e),setTimeout(t,this.syncLoopDuration)})}catch(e){B.error(`[SL] c:"${this.getKey()}" sync failed:`,e),await this.handleConnectError(e)?setTimeout(t,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1}};B.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,t()}async runWatchLoop(t){const e=this.attachmentMap.get(t);if(!e)throw new b(S.ErrNotAttached,`${t} is not attached`);return this.conditions.WatchLoop=!0,e.runWatchLoop(r=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new b(S.ErrClientNotActivated,`${this.key} is not active`));if(!this.attachmentMap.has(t))return this.conditions.WatchLoop=!1,Promise.reject(new b(S.ErrNotAttached,`${t} is not attached`));const i=new AbortController;return e.resource instanceof Ci?this.createDocumentWatchStream(e,t,i,r):e.resource instanceof Ai?this.createChannelWatchStream(e,t,i,r):Promise.reject(new b(S.ErrClientNotActivated,`Unknown resource type for ${t}`))})}createDocumentWatchStream(t,e,r,i){const a=this.rpcClient.watchDocument({clientId:this.id,documentId:t.resourceID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:r.signal});return t.resource.publish([{type:Ut.ConnectionChanged,value:Oo.Connected}]),B.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),t.changeEventReceived!==void 0&&(t.changeEventReceived=!0),new Promise((s,o)=>{(async()=>{try{for await(const c of a)this.handleWatchDocumentResponse(t,c),c.body.case==="initialization"&&s([a,r]);t.resource.resetOnlineClients(),t.resource.publish([{type:Ut.Initialized,source:gt.Local,value:t.resource.getPresences()}]),t.resource.publish([{type:Ut.ConnectionChanged,value:Oo.Disconnected}]),B.debug(`[WD] c:"${this.getKey()}" unwatches (stream ended)`),i()}catch(c){t.resource.resetOnlineClients(),t.resource.publish([{type:Ut.Initialized,source:gt.Local,value:t.resource.getPresences()}]),t.resource.publish([{type:Ut.ConnectionChanged,value:Oo.Disconnected}]),B.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(c)?(Nf(c,S.ErrUnauthenticated)&&t.resource.publish([{type:Ut.AuthError,value:{reason:ro(c).reason,method:"WatchDocument"}}]),i()):this.conditions.WatchLoop=!1,o(c)}})()})}createChannelWatchStream(t,e,r,i){const a=this.rpcClient.watchChannel({clientId:this.id,channelKey:e},{headers:{"x-shard-key":`${this.apiKey}/${t.resource.getFirstKeyPath()}`},signal:r.signal});return B.info(`[WP] c:"${this.getKey()}" watches p:"${e}"`),new Promise((s,o)=>{(async()=>{try{let c=!0;for await(const h of a)this.handleWatchChannelResponse(t,h),c&&(c=!1,s([a,r]));B.debug(`[WP] c:"${this.getKey()}" p:"${e}" stream ended`),i()}catch(c){if(c instanceof Error&&c.name==="AbortError"){B.debug(`[WP] c:"${this.getKey()}" p:"${e}" stream aborted`);return}B.debug(`[WP] c:"${this.getKey()}" p:"${e}" err:`,c),await this.handleConnectError(c)?i():this.conditions.WatchLoop=!1,o(c)}})()})}handleWatchChannelResponse(t,e){const r=t.resource;if(e.body.case==="initialized"){const{count:i,seq:a}=e.body.value;r.updateCount(Number(i),Number(a))&&r.publish({type:ts.Initialized,count:Number(i)})}else if(e.body.case==="event"){const i=e.body.value;if(i.type===Rc.BROADCAST){const a=new TextDecoder;try{const s=JSON.parse(a.decode(i.payload));r.publish({type:ts.Broadcast,clientID:i.publisher,topic:i.topic,payload:s})}catch(s){B.error(`[WP] c:"${this.getKey()}" failed to parse broadcast payload:`,s)}return}r.updateCount(Number(i.count),Number(i.seq))&&r.publish({type:ts.PresenceChanged,count:Number(i.count)})}}handleWatchDocumentResponse(t,e){if(e.body.case==="event"&&e.body.value.type===Ns.DOCUMENT_CHANGED){t.changeEventReceived!==void 0&&(t.changeEventReceived=!0);return}t.resource.applyWatchStream(e)}deactivateInternal(){this.status="deactivated";for(const[t,e]of this.attachmentMap)this.detachInternal(t),e.resource instanceof Ci?e.resource.applyStatus(wi.Detached):e.resource instanceof Ai&&e.resource.applyStatus(io.Detached)}detachInternal(t){const e=this.attachmentMap.get(t);e&&(e.cancelWatchStream(),e.resource instanceof Ci&&e.resource.resetOnlineClients(),this.attachmentMap.delete(t))}async syncInternal(t,e){const{resource:r}=t;if(r instanceof Ai){try{const o=await this.rpcClient.refreshChannel({clientId:this.id,channelKey:r.getKey(),sessionId:r.getSessionID()},{headers:{"x-shard-key":`${this.apiKey}/${r.getFirstKeyPath()}`}});r.updateCount(Number(o.count),0),t.updateHeartbeatTime(),B.debug(`[RP] c:"${this.getKey()}" refreshes p:"${r.getKey()}" mode:${t.syncMode}`)}catch(o){throw B.error(`[RP] c:"${this.getKey()}" err :`,o),o}return r}const i=r,{resourceID:a}=t,s=i.createChangePack();try{const o=await this.rpcClient.pushPullChanges({clientId:this.id,documentId:a,changePack:St.toChangePack(s),pushOnly:e==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${i.getKey()}`}}),u=St.fromChangePack(o.changePack);if(u.hasChanges()&&(t.syncMode==="realtime-pushonly"||t.syncMode==="realtime-syncoff"))return i;i.applyChangePack(u),t.resource.publish([{type:Ut.SyncStatusChanged,value:ud.Synced}]),i.getStatus()===wi.Removed&&this.detachInternal(i.getKey());const c=i.getKey(),h=u.getChangeSize();return B.info(`[PP] c:"${this.getKey()}" sync d:"${c}", push:${s.getChangeSize()} pull:${h} cp:${u.getCheckpoint().toTestString()}`),i}catch(o){throw i.publish([{type:Ut.SyncStatusChanged,value:ud.SyncFailed}]),B.error(`[PP] c:"${this.getKey()}" err :`,o),o}}async handleConnectError(t){if(!(t instanceof ot))return!1;if(t.code===X.Canceled||t.code===X.Unknown||t.code===X.ResourceExhausted||t.code===X.Unavailable)return!0;if(qa(t)===S.ErrUnauthenticated){if(this.authTokenInjector){const e=await this.authTokenInjector(ro(t).reason);this.setAuthToken(e)}return!0}return qa(t)===S.ErrTooManySubscribers?(B.error(`[WD] c:"${this.getKey()}" err :`,t.rawMessage),!0):(qa(t)===S.ErrTooManyAttachments||(qa(t)===S.ErrClientNotActivated||qa(t)===S.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(t){return new Promise((e,r)=>{this.taskQueue.push(()=>t().then(e).catch(r)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{B.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}Dn.Int,Dn.Long;typeof globalThis<"u"&&(globalThis.yorkie={Client:ab,Document:Ci,Primitive:vt,Text:Eg,Counter:Ng,Tree:Og,Channel:Ai,ChannelEventType:ts,LogLevel:ae,setLogLevel:KE,IntType:Dn.Int,LongType:Dn.Long});const dN="@yorkie-js/react",gN="0.6.37",Qy={name:dN,version:gN};ut.createContext({client:void 0,loading:!0,error:void 0});function mN(n){const[t,e]=ut.useState(void 0),[r,i]=ut.useState(!0),[a,s]=ut.useState(void 0),[o,u]=ut.useState(!1);return ut.useEffect(()=>{u(!0)},[]),ut.useEffect(()=>{i(!0),s(void 0);async function c(){if(o)try{const h=new ab(n);await h.activate(),e(h)}catch(h){s(h instanceof Error?h:new Error("Failed to activate client"))}finally{i(!1)}}return c(),()=>{t!=null&&t.isActive()&&t.deactivate({keepalive:!0})}},[n.apiKey,n.rpcAddr,o]),{client:t,loading:r,error:a}}function yN(n){const t=new Set;let e=n;const r=()=>{t.forEach(u=>u(e))};return{subscribe:u=>(t.add(u),()=>t.delete(u)),getSnapshot:()=>e,setState:u=>{const c=e;e=typeof u=="function"?u(c):u,c!==e&&r()},destroy:()=>{t.clear()}}}const pN=n=>yN(n);function vN(n,t,e=Object.is){const r=ut.useRef(t),i=ut.useRef(e),a=ut.useRef(void 0);r.current=t,i.current=e;const s=()=>{const o=n.getSnapshot(),u=r.current?r.current(o):o;return a.current!==void 0&&i.current(a.current,u)?a.current:(a.current=u,u)};return ut.useSyncExternalStore(n.subscribe,s,s)}function SN(n,t,e,r,i,a,s){const o=ut.useRef(i),u=ut.useRef(a),[c,h]=ut.useState(!1);ut.useEffect(()=>{h(!0)},[]),ut.useEffect(()=>{if(e){s.setState(T=>({...T,loading:!1,error:e}));return}if(!n||t||!c){s.setState(T=>({...T,loading:!0}));return}s.setState(T=>({...T,loading:!0,error:void 0}));const m=new Ci(r),d=[];d.push(m.subscribe(()=>{s.setState(T=>({...T,root:m.getRoot()}))})),d.push(m.subscribe("presence",()=>{s.setState(T=>({...T,presences:m.getPresences()}))})),d.push(m.subscribe("connection",T=>{s.setState(A=>({...A,connection:T.value}))}));async function g(){try{await(n==null?void 0:n.attach(m,{initialRoot:o.current,initialPresence:u.current}));const T=A=>{try{m.update(A)}catch(x){s.setState(p=>({...p,error:x instanceof Error?x:new Error("Failed to update document")}))}};s.setState(A=>({...A,doc:m,root:m.getRoot(),presences:m.getPresences(),update:T}))}catch(T){s.setState(A=>({...A,error:T instanceof Error?T:new Error("Failed to attach document")}))}finally{s.setState(T=>({...T,loading:!1}))}}return g(),()=>{n&&n.has(r)&&n.detach(m);for(const T of d)T()}},[n,t,e,r,s,c])}ut.createContext(void 0);function bN(n,t,e){const r=ut.useRef(void 0);r.current||(r.current=pN({doc:void 0,root:(e==null?void 0:e.initialRoot)??{},presences:[],connection:Oo.Disconnected,update:()=>{},loading:!0,error:void 0}));const i=r.current,a=ut.useMemo(()=>({apiKey:n,userAgent:Qy.name+"/"+Qy.version,...e}),[n,e]),{client:s,loading:o,error:u}=mN(a);SN(s,o,u,t,(e==null?void 0:e.initialRoot)??{},(e==null?void 0:e.initialPresence)??{},i);const c=vN(i);return{root:c.root,presences:c.presences,connection:c.connection,update:c.update,loading:c.loading,error:c.error}}ut.createContext(void 0);function TN(n){const e=new URLSearchParams(window.location.search).get("key")||`react-todomvc-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`,{root:r,update:i,loading:a,error:s}=bN("D6sd9E5ehtXBssmeRZ4QQP",e,{initialRoot:n,rpcAddr:"https://api.yorkie.dev"}),o=ut.useCallback(u=>{i(c=>{dA(c,u)})},[i]);return{root:r,dispatch:o,loading:a,error:s}}const wN={todos:[{id:crypto.randomUUID(),text:"Yorkie JS SDK",completed:!1},{id:crypto.randomUUID(),text:"Garbage collection",completed:!1},{id:crypto.randomUUID(),text:"RichText datatype",completed:!1}]};function AN(){const{root:n,dispatch:t,loading:e,error:r}=TN(wN);return e?W.jsx("div",{children:"Loading..."}):r?W.jsxs("div",{children:["Error: ",r.message]}):W.jsxs("div",{className:"App",children:[W.jsx(oA,{dispatch:t}),W.jsx(hA,{todos:n.todos,dispatch:t})]})}aA.createRoot(document.getElementById("root")).render(W.jsx(ut.StrictMode,{children:W.jsx(AN,{})}));
