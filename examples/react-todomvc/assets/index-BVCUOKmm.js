var AT=Object.defineProperty;var ET=(n,t,e)=>t in n?AT(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var l=(n,t,e)=>ET(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();function mp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var gp={exports:{}},Tc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT=Symbol.for("react.transitional.element"),xT=Symbol.for("react.fragment");function yp(n,t,e){var r=null;if(e!==void 0&&(r=""+e),t.key!==void 0&&(r=""+t.key),"key"in t){e={};for(var i in t)i!=="key"&&(e[i]=t[i])}else e=t;return t=e.ref,{$$typeof:NT,type:n,key:r,ref:t!==void 0?t:null,props:e}}Tc.Fragment=xT;Tc.jsx=yp;Tc.jsxs=yp;gp.exports=Tc;var W=gp.exports,pp={exports:{}},bc={},vp={exports:{}},Sp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(z,j){var $=z.length;z.push(j);t:for(;0<$;){var Et=$-1>>>1,Mt=z[Et];if(0<i(Mt,j))z[Et]=j,z[$]=Mt,$=Et;else break t}}function e(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var j=z[0],$=z.pop();if($!==j){z[0]=$;t:for(var Et=0,Mt=z.length,xl=Mt>>>1;Et<xl;){var Dl=2*(Et+1)-1,Yc=z[Dl],ua=Dl+1,kl=z[ua];if(0>i(Yc,$))ua<Mt&&0>i(kl,Yc)?(z[Et]=kl,z[ua]=$,Et=ua):(z[Et]=Yc,z[Dl]=$,Et=Dl);else if(ua<Mt&&0>i(kl,$))z[Et]=kl,z[ua]=$,Et=ua;else break t}}return j}function i(z,j){var $=z.sortIndex-j.sortIndex;return $!==0?$:z.id-j.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var u=[],c=[],h=1,g=null,d=3,m=!1,A=!1,b=!1,x=!1,p=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;function w(z){for(var j=e(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=z)r(c),j.sortIndex=j.expirationTime,t(u,j);else break;j=e(c)}}function O(z){if(b=!1,w(z),!A)if(e(u)!==null)A=!0,I||(I=!0,fe());else{var j=e(c);j!==null&&Gc(O,j.startTime-z)}}var I=!1,C=-1,R=5,P=-1;function J(){return x?!0:!(n.unstable_now()-P<R)}function Vt(){if(x=!1,I){var z=n.unstable_now();P=z;var j=!0;try{t:{A=!1,b&&(b=!1,y(C),C=-1),m=!0;var $=d;try{e:{for(w(z),g=e(u);g!==null&&!(g.expirationTime>z&&J());){var Et=g.callback;if(typeof Et=="function"){g.callback=null,d=g.priorityLevel;var Mt=Et(g.expirationTime<=z);if(z=n.unstable_now(),typeof Mt=="function"){g.callback=Mt,w(z),j=!0;break e}g===e(u)&&r(u),w(z)}else r(u);g=e(u)}if(g!==null)j=!0;else{var xl=e(c);xl!==null&&Gc(O,xl.startTime-z),j=!1}}break t}finally{g=null,d=$,m=!1}j=void 0}}finally{j?fe():I=!1}}}var fe;if(typeof v=="function")fe=function(){v(Vt)};else if(typeof MessageChannel<"u"){var la=new MessageChannel,wT=la.port2;la.port1.onmessage=Vt,fe=function(){wT.postMessage(null)}}else fe=function(){p(Vt,0)};function Gc(z,j){C=p(function(){z(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_next=function(z){switch(d){case 1:case 2:case 3:var j=3;break;default:j=d}var $=d;d=j;try{return z()}finally{d=$}},n.unstable_requestPaint=function(){x=!0},n.unstable_runWithPriority=function(z,j){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var $=d;d=z;try{return j()}finally{d=$}},n.unstable_scheduleCallback=function(z,j,$){var Et=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Et+$:Et):$=Et,z){case 1:var Mt=-1;break;case 2:Mt=250;break;case 5:Mt=1073741823;break;case 4:Mt=1e4;break;default:Mt=5e3}return Mt=$+Mt,z={id:h++,callback:j,priorityLevel:z,startTime:$,expirationTime:Mt,sortIndex:-1},$>Et?(z.sortIndex=$,t(c,z),e(u)===null&&z===e(c)&&(b?(y(C),C=-1):b=!0,Gc(O,$-Et))):(z.sortIndex=Mt,t(u,z),A||m||(A=!0,I||(I=!0,fe()))),z},n.unstable_shouldYield=J,n.unstable_wrapCallback=function(z){var j=d;return function(){var $=d;d=j;try{return z.apply(this,arguments)}finally{d=$}}}})(Sp);vp.exports=Sp;var DT=vp.exports,Tp={exports:{}},V={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nd=Symbol.for("react.transitional.element"),kT=Symbol.for("react.portal"),OT=Symbol.for("react.fragment"),CT=Symbol.for("react.strict_mode"),IT=Symbol.for("react.profiler"),BT=Symbol.for("react.consumer"),RT=Symbol.for("react.context"),zT=Symbol.for("react.forward_ref"),MT=Symbol.for("react.suspense"),UT=Symbol.for("react.memo"),bp=Symbol.for("react.lazy"),$m=Symbol.iterator;function LT(n){return n===null||typeof n!="object"?null:(n=$m&&n[$m]||n["@@iterator"],typeof n=="function"?n:null)}var wp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ap=Object.assign,Ep={};function Hs(n,t,e){this.props=n,this.context=t,this.refs=Ep,this.updater=e||wp}Hs.prototype.isReactComponent={};Hs.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};Hs.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Np(){}Np.prototype=Hs.prototype;function xd(n,t,e){this.props=n,this.context=t,this.refs=Ep,this.updater=e||wp}var Dd=xd.prototype=new Np;Dd.constructor=xd;Ap(Dd,Hs.prototype);Dd.isPureReactComponent=!0;var jm=Array.isArray,yt={H:null,A:null,T:null,S:null,V:null},xp=Object.prototype.hasOwnProperty;function kd(n,t,e,r,i,a){return e=a.ref,{$$typeof:Nd,type:n,key:t,ref:e!==void 0?e:null,props:a}}function JT(n,t){return kd(n.type,t,void 0,void 0,void 0,n.props)}function Od(n){return typeof n=="object"&&n!==null&&n.$$typeof===Nd}function qT(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var Gm=/\/+/g;function Xc(n,t){return typeof n=="object"&&n!==null&&n.key!=null?qT(""+n.key):t.toString(36)}function Ym(){}function PT(n){switch(n.status){case"fulfilled":return n.value;case"rejected":throw n.reason;default:switch(typeof n.status=="string"?n.then(Ym,Ym):(n.status="pending",n.then(function(t){n.status==="pending"&&(n.status="fulfilled",n.value=t)},function(t){n.status==="pending"&&(n.status="rejected",n.reason=t)})),n.status){case"fulfilled":return n.value;case"rejected":throw n.reason}}throw n}function Ha(n,t,e,r,i){var a=typeof n;(a==="undefined"||a==="boolean")&&(n=null);var s=!1;if(n===null)s=!0;else switch(a){case"bigint":case"string":case"number":s=!0;break;case"object":switch(n.$$typeof){case Nd:case kT:s=!0;break;case bp:return s=n._init,Ha(s(n._payload),t,e,r,i)}}if(s)return i=i(n),s=r===""?"."+Xc(n,0):r,jm(i)?(e="",s!=null&&(e=s.replace(Gm,"$&/")+"/"),Ha(i,t,e,"",function(c){return c})):i!=null&&(Od(i)&&(i=JT(i,e+(i.key==null||n&&n.key===i.key?"":(""+i.key).replace(Gm,"$&/")+"/")+s)),t.push(i)),1;s=0;var o=r===""?".":r+":";if(jm(n))for(var u=0;u<n.length;u++)r=n[u],a=o+Xc(r,u),s+=Ha(r,t,e,a,i);else if(u=LT(n),typeof u=="function")for(n=u.call(n),u=0;!(r=n.next()).done;)r=r.value,a=o+Xc(r,u++),s+=Ha(r,t,e,a,i);else if(a==="object"){if(typeof n.then=="function")return Ha(PT(n),t,e,r,i);throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return s}function Ol(n,t,e){if(n==null)return n;var r=[],i=0;return Ha(n,r,"","",function(a){return t.call(e,a,i++)}),r}function KT(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var Xm=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function VT(){}V.Children={map:Ol,forEach:function(n,t,e){Ol(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return Ol(n,function(){t++}),t},toArray:function(n){return Ol(n,function(t){return t})||[]},only:function(n){if(!Od(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};V.Component=Hs;V.Fragment=OT;V.Profiler=IT;V.PureComponent=xd;V.StrictMode=CT;V.Suspense=MT;V.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=yt;V.__COMPILER_RUNTIME={__proto__:null,c:function(n){return yt.H.useMemoCache(n)}};V.cache=function(n){return function(){return n.apply(null,arguments)}};V.cloneElement=function(n,t,e){if(n==null)throw Error("The argument must be a React element, but you passed "+n+".");var r=Ap({},n.props),i=n.key,a=void 0;if(t!=null)for(s in t.ref!==void 0&&(a=void 0),t.key!==void 0&&(i=""+t.key),t)!xp.call(t,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&t.ref===void 0||(r[s]=t[s]);var s=arguments.length-2;if(s===1)r.children=e;else if(1<s){for(var o=Array(s),u=0;u<s;u++)o[u]=arguments[u+2];r.children=o}return kd(n.type,i,void 0,void 0,a,r)};V.createContext=function(n){return n={$$typeof:RT,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null},n.Provider=n,n.Consumer={$$typeof:BT,_context:n},n};V.createElement=function(n,t,e){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=""+t.key),t)xp.call(t,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=e;else if(1<s){for(var o=Array(s),u=0;u<s;u++)o[u]=arguments[u+2];i.children=o}if(n&&n.defaultProps)for(r in s=n.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return kd(n,a,void 0,void 0,null,i)};V.createRef=function(){return{current:null}};V.forwardRef=function(n){return{$$typeof:zT,render:n}};V.isValidElement=Od;V.lazy=function(n){return{$$typeof:bp,_payload:{_status:-1,_result:n},_init:KT}};V.memo=function(n,t){return{$$typeof:UT,type:n,compare:t===void 0?null:t}};V.startTransition=function(n){var t=yt.T,e={};yt.T=e;try{var r=n(),i=yt.S;i!==null&&i(e,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(VT,Xm)}catch(a){Xm(a)}finally{yt.T=t}};V.unstable_useCacheRefresh=function(){return yt.H.useCacheRefresh()};V.use=function(n){return yt.H.use(n)};V.useActionState=function(n,t,e){return yt.H.useActionState(n,t,e)};V.useCallback=function(n,t){return yt.H.useCallback(n,t)};V.useContext=function(n){return yt.H.useContext(n)};V.useDebugValue=function(){};V.useDeferredValue=function(n,t){return yt.H.useDeferredValue(n,t)};V.useEffect=function(n,t,e){var r=yt.H;if(typeof e=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(n,t)};V.useId=function(){return yt.H.useId()};V.useImperativeHandle=function(n,t,e){return yt.H.useImperativeHandle(n,t,e)};V.useInsertionEffect=function(n,t){return yt.H.useInsertionEffect(n,t)};V.useLayoutEffect=function(n,t){return yt.H.useLayoutEffect(n,t)};V.useMemo=function(n,t){return yt.H.useMemo(n,t)};V.useOptimistic=function(n,t){return yt.H.useOptimistic(n,t)};V.useReducer=function(n,t,e){return yt.H.useReducer(n,t,e)};V.useRef=function(n){return yt.H.useRef(n)};V.useState=function(n){return yt.H.useState(n)};V.useSyncExternalStore=function(n,t,e){return yt.H.useSyncExternalStore(n,t,e)};V.useTransition=function(){return yt.H.useTransition()};V.version="19.1.0";Tp.exports=V;var ut=Tp.exports,Dp={exports:{}},ee={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HT=ut;function kp(n){var t="https://react.dev/errors/"+n;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var e=2;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e])}return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function xi(){}var te={d:{f:xi,r:function(){throw Error(kp(522))},D:xi,C:xi,L:xi,m:xi,X:xi,S:xi,M:xi},p:0,findDOMNode:null},$T=Symbol.for("react.portal");function jT(n,t,e){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$T,key:r==null?null:""+r,children:n,containerInfo:t,implementation:e}}var go=HT.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function wc(n,t){if(n==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}ee.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te;ee.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(kp(299));return jT(n,t,null,e)};ee.flushSync=function(n){var t=go.T,e=te.p;try{if(go.T=null,te.p=2,n)return n()}finally{go.T=t,te.p=e,te.d.f()}};ee.preconnect=function(n,t){typeof n=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,te.d.C(n,t))};ee.prefetchDNS=function(n){typeof n=="string"&&te.d.D(n)};ee.preinit=function(n,t){if(typeof n=="string"&&t&&typeof t.as=="string"){var e=t.as,r=wc(e,t.crossOrigin),i=typeof t.integrity=="string"?t.integrity:void 0,a=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;e==="style"?te.d.S(n,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:a}):e==="script"&&te.d.X(n,{crossOrigin:r,integrity:i,fetchPriority:a,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};ee.preinitModule=function(n,t){if(typeof n=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var e=wc(t.as,t.crossOrigin);te.d.M(n,{crossOrigin:e,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&te.d.M(n)};ee.preload=function(n,t){if(typeof n=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var e=t.as,r=wc(e,t.crossOrigin);te.d.L(n,e,{crossOrigin:r,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};ee.preloadModule=function(n,t){if(typeof n=="string")if(t){var e=wc(t.as,t.crossOrigin);te.d.m(n,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:e,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else te.d.m(n)};ee.requestFormReset=function(n){te.d.r(n)};ee.unstable_batchedUpdates=function(n,t){return n(t)};ee.useFormState=function(n,t,e){return go.H.useFormState(n,t,e)};ee.useFormStatus=function(){return go.H.useHostTransitionStatus()};ee.version="19.1.0";function Op(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Op)}catch(n){console.error(n)}}Op(),Dp.exports=ee;var GT=Dp.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zt=DT,Cp=ut,YT=GT;function N(n){var t="https://react.dev/errors/"+n;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var e=2;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e])}return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ip(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function sl(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function Bp(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function Fm(n){if(sl(n)!==n)throw Error(N(188))}function XT(n){var t=n.alternate;if(!t){if(t=sl(n),t===null)throw Error(N(188));return t!==n?null:n}for(var e=n,r=t;;){var i=e.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){e=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===e)return Fm(i),n;if(a===r)return Fm(i),t;a=a.sibling}throw Error(N(188))}if(e.return!==r.return)e=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===e){s=!0,e=i,r=a;break}if(o===r){s=!0,r=i,e=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===e){s=!0,e=a,r=i;break}if(o===r){s=!0,r=a,e=i;break}o=o.sibling}if(!s)throw Error(N(189))}}if(e.alternate!==r)throw Error(N(190))}if(e.tag!==3)throw Error(N(188));return e.stateNode.current===e?n:t}function Rp(n){var t=n.tag;if(t===5||t===26||t===27||t===6)return n;for(n=n.child;n!==null;){if(t=Rp(n),t!==null)return t;n=n.sibling}return null}var ht=Object.assign,FT=Symbol.for("react.element"),Cl=Symbol.for("react.transitional.element"),oo=Symbol.for("react.portal"),Fa=Symbol.for("react.fragment"),zp=Symbol.for("react.strict_mode"),Lf=Symbol.for("react.profiler"),ZT=Symbol.for("react.provider"),Mp=Symbol.for("react.consumer"),si=Symbol.for("react.context"),Cd=Symbol.for("react.forward_ref"),Jf=Symbol.for("react.suspense"),qf=Symbol.for("react.suspense_list"),Id=Symbol.for("react.memo"),Bi=Symbol.for("react.lazy"),Pf=Symbol.for("react.activity"),QT=Symbol.for("react.memo_cache_sentinel"),Zm=Symbol.iterator;function Zs(n){return n===null||typeof n!="object"?null:(n=Zm&&n[Zm]||n["@@iterator"],typeof n=="function"?n:null)}var _T=Symbol.for("react.client.reference");function Kf(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===_T?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Fa:return"Fragment";case Lf:return"Profiler";case zp:return"StrictMode";case Jf:return"Suspense";case qf:return"SuspenseList";case Pf:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case oo:return"Portal";case si:return(n.displayName||"Context")+".Provider";case Mp:return(n._context.displayName||"Context")+".Consumer";case Cd:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Id:return t=n.displayName||null,t!==null?t:Kf(n.type)||"Memo";case Bi:t=n._payload,n=n._init;try{return Kf(n(t))}catch{}}return null}var lo=Array.isArray,q=Cp.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et=YT.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,va={pending:!1,data:null,method:null,action:null},Vf=[],Za=-1;function kn(n){return{current:n}}function Kt(n){0>Za||(n.current=Vf[Za],Vf[Za]=null,Za--)}function pt(n,t){Za++,Vf[Za]=n.current,n.current=t}var Sn=kn(null),Lo=kn(null),$i=kn(null),yu=kn(null);function pu(n,t){switch(pt($i,t),pt(Lo,n),pt(Sn,null),t.nodeType){case 9:case 11:n=(n=t.documentElement)&&(n=n.namespaceURI)?ey(n):0;break;default:if(n=t.tagName,t=t.namespaceURI)t=ey(t),n=_0(t,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Kt(Sn),pt(Sn,n)}function Ss(){Kt(Sn),Kt(Lo),Kt($i)}function Hf(n){n.memoizedState!==null&&pt(yu,n);var t=Sn.current,e=_0(t,n.type);t!==e&&(pt(Lo,n),pt(Sn,e))}function vu(n){Lo.current===n&&(Kt(Sn),Kt(Lo)),yu.current===n&&(Kt(yu),Yo._currentValue=va)}var $f=Object.prototype.hasOwnProperty,Bd=zt.unstable_scheduleCallback,Fc=zt.unstable_cancelCallback,WT=zt.unstable_shouldYield,tb=zt.unstable_requestPaint,Tn=zt.unstable_now,eb=zt.unstable_getCurrentPriorityLevel,Up=zt.unstable_ImmediatePriority,Lp=zt.unstable_UserBlockingPriority,Su=zt.unstable_NormalPriority,nb=zt.unstable_LowPriority,Jp=zt.unstable_IdlePriority,rb=zt.log,ib=zt.unstable_setDisableYieldValue,ol=null,ve=null;function qi(n){if(typeof rb=="function"&&ib(n),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(ol,n)}catch{}}var Se=Math.clz32?Math.clz32:ob,ab=Math.log,sb=Math.LN2;function ob(n){return n>>>=0,n===0?32:31-(ab(n)/sb|0)|0}var Il=256,Bl=4194304;function fa(n){var t=n&42;if(t!==0)return t;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ac(n,t,e){var r=n.pendingLanes;if(r===0)return 0;var i=0,a=n.suspendedLanes,s=n.pingedLanes;n=n.warmLanes;var o=r&134217727;return o!==0?(r=o&~a,r!==0?i=fa(r):(s&=o,s!==0?i=fa(s):e||(e=o&~n,e!==0&&(i=fa(e))))):(o=r&~a,o!==0?i=fa(o):s!==0?i=fa(s):e||(e=r&~n,e!==0&&(i=fa(e)))),i===0?0:t!==0&&t!==i&&!(t&a)&&(a=i&-i,e=t&-t,a>=e||a===32&&(e&4194048)!==0)?t:i}function ll(n,t){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&t)===0}function lb(n,t){switch(n){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qp(){var n=Il;return Il<<=1,!(Il&4194048)&&(Il=256),n}function Pp(){var n=Bl;return Bl<<=1,!(Bl&62914560)&&(Bl=4194304),n}function Zc(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function ul(n,t){n.pendingLanes|=t,t!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ub(n,t,e,r,i,a){var s=n.pendingLanes;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=e,n.entangledLanes&=e,n.errorRecoveryDisabledLanes&=e,n.shellSuspendCounter=0;var o=n.entanglements,u=n.expirationTimes,c=n.hiddenUpdates;for(e=s&~e;0<e;){var h=31-Se(e),g=1<<h;o[h]=0,u[h]=-1;var d=c[h];if(d!==null)for(c[h]=null,h=0;h<d.length;h++){var m=d[h];m!==null&&(m.lane&=-536870913)}e&=~g}r!==0&&Kp(n,r,0),a!==0&&i===0&&n.tag!==0&&(n.suspendedLanes|=a&~(s&~t))}function Kp(n,t,e){n.pendingLanes|=t,n.suspendedLanes&=~t;var r=31-Se(t);n.entangledLanes|=t,n.entanglements[r]=n.entanglements[r]|1073741824|e&4194090}function Vp(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var r=31-Se(e),i=1<<r;i&t|n[r]&t&&(n[r]|=t),e&=~i}}function Rd(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function zd(n){return n&=-n,2<n?8<n?n&134217727?32:268435456:8:2}function Hp(){var n=et.p;return n!==0?n:(n=window.event,n===void 0?32:lS(n.type))}function cb(n,t){var e=et.p;try{return et.p=n,t()}finally{et.p=e}}var aa=Math.random().toString(36).slice(2),Xt="__reactFiber$"+aa,le="__reactProps$"+aa,$s="__reactContainer$"+aa,jf="__reactEvents$"+aa,fb="__reactListeners$"+aa,hb="__reactHandles$"+aa,Qm="__reactResources$"+aa,cl="__reactMarker$"+aa;function Md(n){delete n[Xt],delete n[le],delete n[jf],delete n[fb],delete n[hb]}function Qa(n){var t=n[Xt];if(t)return t;for(var e=n.parentNode;e;){if(t=e[$s]||e[Xt]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=iy(n);n!==null;){if(e=n[Xt])return e;n=iy(n)}return t}n=e,e=n.parentNode}return null}function js(n){if(n=n[Xt]||n[$s]){var t=n.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return n}return null}function uo(n){var t=n.tag;if(t===5||t===26||t===27||t===6)return n.stateNode;throw Error(N(33))}function us(n){var t=n[Qm];return t||(t=n[Qm]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Jt(n){n[cl]=!0}var $p=new Set,jp={};function Ra(n,t){Ts(n,t),Ts(n+"Capture",t)}function Ts(n,t){for(jp[n]=t,n=0;n<t.length;n++)$p.add(t[n])}var db=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_m={},Wm={};function mb(n){return $f.call(Wm,n)?!0:$f.call(_m,n)?!1:db.test(n)?Wm[n]=!0:(_m[n]=!0,!1)}function Ql(n,t,e){if(mb(t))if(e===null)n.removeAttribute(t);else{switch(typeof e){case"undefined":case"function":case"symbol":n.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){n.removeAttribute(t);return}}n.setAttribute(t,""+e)}}function Rl(n,t,e){if(e===null)n.removeAttribute(t);else{switch(typeof e){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(t);return}n.setAttribute(t,""+e)}}function Cn(n,t,e,r){if(r===null)n.removeAttribute(e);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(e);return}n.setAttributeNS(t,e,""+r)}}var Qc,tg;function $a(n){if(Qc===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Qc=t&&t[1]||"",tg=-1<e.stack.indexOf(`
    at`)?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qc+n+tg}var _c=!1;function Wc(n,t){if(!n||_c)return"";_c=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(m){var d=m}Reflect.construct(n,[],g)}else{try{g.call()}catch(m){d=m}n.call(g.prototype)}}else{try{throw Error()}catch(m){d=m}(g=n())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(m){if(m&&d&&typeof m.stack=="string")return[m.stack,d.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var u=s.split(`
`),c=o.split(`
`);for(i=r=0;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===u.length||i===c.length)for(r=u.length-1,i=c.length-1;1<=r&&0<=i&&u[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(u[r]!==c[i]){if(r!==1||i!==1)do if(r--,i--,0>i||u[r]!==c[i]){var h=`
`+u[r].replace(" at new "," at ");return n.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",n.displayName)),h}while(1<=r&&0<=i);break}}}finally{_c=!1,Error.prepareStackTrace=e}return(e=n?n.displayName||n.name:"")?$a(e):""}function gb(n){switch(n.tag){case 26:case 27:case 5:return $a(n.type);case 16:return $a("Lazy");case 13:return $a("Suspense");case 19:return $a("SuspenseList");case 0:case 15:return Wc(n.type,!1);case 11:return Wc(n.type.render,!1);case 1:return Wc(n.type,!0);case 31:return $a("Activity");default:return""}}function eg(n){try{var t="";do t+=gb(n),n=n.return;while(n);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}function xe(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Gp(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yb(n){var t=Gp(n)?"checked":"value",e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),r=""+n[t];if(!n.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var i=e.get,a=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function Tu(n){n._valueTracker||(n._valueTracker=yb(n))}function Yp(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),r="";return n&&(r=Gp(n)?n.checked?"true":"false":n.value),n=r,n!==e?(t.setValue(n),!0):!1}function bu(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var pb=/[\n"\\]/g;function Je(n){return n.replace(pb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Gf(n,t,e,r,i,a,s,o){n.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?n.type=s:n.removeAttribute("type"),t!=null?s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+xe(t)):n.value!==""+xe(t)&&(n.value=""+xe(t)):s!=="submit"&&s!=="reset"||n.removeAttribute("value"),t!=null?Yf(n,s,xe(t)):e!=null?Yf(n,s,xe(e)):r!=null&&n.removeAttribute("value"),i==null&&a!=null&&(n.defaultChecked=!!a),i!=null&&(n.checked=i&&typeof i!="function"&&typeof i!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?n.name=""+xe(o):n.removeAttribute("name")}function Xp(n,t,e,r,i,a,s,o){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(n.type=a),t!=null||e!=null){if(!(a!=="submit"&&a!=="reset"||t!=null))return;e=e!=null?""+xe(e):"",t=t!=null?""+xe(t):e,o||t===n.value||(n.value=t),n.defaultValue=t}r=r??i,r=typeof r!="function"&&typeof r!="symbol"&&!!r,n.checked=o?n.checked:!!r,n.defaultChecked=!!r,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(n.name=s)}function Yf(n,t,e){t==="number"&&bu(n.ownerDocument)===n||n.defaultValue===""+e||(n.defaultValue=""+e)}function cs(n,t,e,r){if(n=n.options,t){t={};for(var i=0;i<e.length;i++)t["$"+e[i]]=!0;for(e=0;e<n.length;e++)i=t.hasOwnProperty("$"+n[e].value),n[e].selected!==i&&(n[e].selected=i),i&&r&&(n[e].defaultSelected=!0)}else{for(e=""+xe(e),t=null,i=0;i<n.length;i++){if(n[i].value===e){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}t!==null||n[i].disabled||(t=n[i])}t!==null&&(t.selected=!0)}}function Fp(n,t,e){if(t!=null&&(t=""+xe(t),t!==n.value&&(n.value=t),e==null)){n.defaultValue!==t&&(n.defaultValue=t);return}n.defaultValue=e!=null?""+xe(e):""}function Zp(n,t,e,r){if(t==null){if(r!=null){if(e!=null)throw Error(N(92));if(lo(r)){if(1<r.length)throw Error(N(93));r=r[0]}e=r}e==null&&(e=""),t=e}e=xe(t),n.defaultValue=e,r=n.textContent,r===e&&r!==""&&r!==null&&(n.value=r)}function bs(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var vb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ng(n,t,e){var r=t.indexOf("--")===0;e==null||typeof e=="boolean"||e===""?r?n.setProperty(t,""):t==="float"?n.cssFloat="":n[t]="":r?n.setProperty(t,e):typeof e!="number"||e===0||vb.has(t)?t==="float"?n.cssFloat=e:n[t]=(""+e).trim():n[t]=e+"px"}function Qp(n,t,e){if(t!=null&&typeof t!="object")throw Error(N(62));if(n=n.style,e!=null){for(var r in e)!e.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&e[i]!==r&&ng(n,i,r)}else for(var a in t)t.hasOwnProperty(a)&&ng(n,a,t[a])}function Ud(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _l(n){return Tb.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Xf=null;function Ld(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _a=null,fs=null;function rg(n){var t=js(n);if(t&&(n=t.stateNode)){var e=n[le]||null;t:switch(n=t.stateNode,t.type){case"input":if(Gf(n,e.value,e.defaultValue,e.defaultValue,e.checked,e.defaultChecked,e.type,e.name),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll('input[name="'+Je(""+t)+'"][type="radio"]'),t=0;t<e.length;t++){var r=e[t];if(r!==n&&r.form===n.form){var i=r[le]||null;if(!i)throw Error(N(90));Gf(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<e.length;t++)r=e[t],r.form===n.form&&Yp(r)}break t;case"textarea":Fp(n,e.value,e.defaultValue);break t;case"select":t=e.value,t!=null&&cs(n,!!e.multiple,t,!1)}}}var tf=!1;function _p(n,t,e){if(tf)return n(t,e);tf=!0;try{var r=n(t);return r}finally{if(tf=!1,(_a!==null||fs!==null)&&(Rc(),_a&&(t=_a,n=fs,fs=_a=null,rg(t),n)))for(t=0;t<n.length;t++)rg(n[t])}}function Jo(n,t){var e=n.stateNode;if(e===null)return null;var r=e[le]||null;if(r===null)return null;e=r[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(N(231,t,typeof e));return e}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ff=!1;if(vi)try{var Qs={};Object.defineProperty(Qs,"passive",{get:function(){Ff=!0}}),window.addEventListener("test",Qs,Qs),window.removeEventListener("test",Qs,Qs)}catch{Ff=!1}var Pi=null,Jd=null,Wl=null;function Wp(){if(Wl)return Wl;var n,t=Jd,e=t.length,r,i="value"in Pi?Pi.value:Pi.textContent,a=i.length;for(n=0;n<e&&t[n]===i[n];n++);var s=e-n;for(r=1;r<=s&&t[e-r]===i[a-r];r++);return Wl=i.slice(n,1<r?1-r:void 0)}function tu(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function zl(){return!0}function ig(){return!1}function ce(n){function t(e,r,i,a,s){this._reactName=e,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(e=n[o],this[o]=e?e(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?zl:ig,this.isPropagationStopped=ig,this}return ht(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=zl)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=zl)},persist:function(){},isPersistent:zl}),t}var za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ec=ce(za),fl=ht({},za,{view:0,detail:0}),bb=ce(fl),ef,nf,_s,Nc=ht({},fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qd,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_s&&(_s&&n.type==="mousemove"?(ef=n.screenX-_s.screenX,nf=n.screenY-_s.screenY):nf=ef=0,_s=n),ef)},movementY:function(n){return"movementY"in n?n.movementY:nf}}),ag=ce(Nc),wb=ht({},Nc,{dataTransfer:0}),Ab=ce(wb),Eb=ht({},fl,{relatedTarget:0}),rf=ce(Eb),Nb=ht({},za,{animationName:0,elapsedTime:0,pseudoElement:0}),xb=ce(Nb),Db=ht({},za,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),kb=ce(Db),Ob=ht({},za,{data:0}),sg=ce(Ob),Cb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ib={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rb(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=Bb[n])?!!t[n]:!1}function qd(){return Rb}var zb=ht({},fl,{key:function(n){if(n.key){var t=Cb[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=tu(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ib[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qd,charCode:function(n){return n.type==="keypress"?tu(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?tu(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Mb=ce(zb),Ub=ht({},Nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),og=ce(Ub),Lb=ht({},fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qd}),Jb=ce(Lb),qb=ht({},za,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pb=ce(qb),Kb=ht({},Nc,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Vb=ce(Kb),Hb=ht({},za,{newState:0,oldState:0}),$b=ce(Hb),jb=[9,13,27,32],Pd=vi&&"CompositionEvent"in window,yo=null;vi&&"documentMode"in document&&(yo=document.documentMode);var Gb=vi&&"TextEvent"in window&&!yo,tv=vi&&(!Pd||yo&&8<yo&&11>=yo),lg=" ",ug=!1;function ev(n,t){switch(n){case"keyup":return jb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nv(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Wa=!1;function Yb(n,t){switch(n){case"compositionend":return nv(t);case"keypress":return t.which!==32?null:(ug=!0,lg);case"textInput":return n=t.data,n===lg&&ug?null:n;default:return null}}function Xb(n,t){if(Wa)return n==="compositionend"||!Pd&&ev(n,t)?(n=Wp(),Wl=Jd=Pi=null,Wa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tv&&t.locale!=="ko"?null:t.data;default:return null}}var Fb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cg(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!Fb[n.type]:t==="textarea"}function rv(n,t,e,r){_a?fs?fs.push(r):fs=[r]:_a=r,t=qu(t,"onChange"),0<t.length&&(e=new Ec("onChange","change",null,e,r),n.push({event:e,listeners:t}))}var po=null,qo=null;function Zb(n){F0(n,0)}function xc(n){var t=uo(n);if(Yp(t))return n}function fg(n,t){if(n==="change")return t}var iv=!1;if(vi){var af;if(vi){var sf="oninput"in document;if(!sf){var hg=document.createElement("div");hg.setAttribute("oninput","return;"),sf=typeof hg.oninput=="function"}af=sf}else af=!1;iv=af&&(!document.documentMode||9<document.documentMode)}function dg(){po&&(po.detachEvent("onpropertychange",av),qo=po=null)}function av(n){if(n.propertyName==="value"&&xc(qo)){var t=[];rv(t,qo,n,Ld(n)),_p(Zb,t)}}function Qb(n,t,e){n==="focusin"?(dg(),po=t,qo=e,po.attachEvent("onpropertychange",av)):n==="focusout"&&dg()}function _b(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return xc(qo)}function Wb(n,t){if(n==="click")return xc(t)}function tw(n,t){if(n==="input"||n==="change")return xc(t)}function ew(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var we=typeof Object.is=="function"?Object.is:ew;function Po(n,t){if(we(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),r=Object.keys(t);if(e.length!==r.length)return!1;for(r=0;r<e.length;r++){var i=e[r];if(!$f.call(t,i)||!we(n[i],t[i]))return!1}return!0}function mg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function gg(n,t){var e=mg(n);n=0;for(var r;e;){if(e.nodeType===3){if(r=n+e.textContent.length,n<=t&&r>=t)return{node:e,offset:t-n};n=r}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=mg(e)}}function sv(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?sv(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function ov(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var t=bu(n.document);t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=bu(n.document)}return t}function Kd(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}var nw=vi&&"documentMode"in document&&11>=document.documentMode,ts=null,Zf=null,vo=null,Qf=!1;function yg(n,t,e){var r=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Qf||ts==null||ts!==bu(r)||(r=ts,"selectionStart"in r&&Kd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vo&&Po(vo,r)||(vo=r,r=qu(Zf,"onSelect"),0<r.length&&(t=new Ec("onSelect","select",null,t,e),n.push({event:t,listeners:r}),t.target=ts)))}function ca(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var es={animationend:ca("Animation","AnimationEnd"),animationiteration:ca("Animation","AnimationIteration"),animationstart:ca("Animation","AnimationStart"),transitionrun:ca("Transition","TransitionRun"),transitionstart:ca("Transition","TransitionStart"),transitioncancel:ca("Transition","TransitionCancel"),transitionend:ca("Transition","TransitionEnd")},of={},lv={};vi&&(lv=document.createElement("div").style,"AnimationEvent"in window||(delete es.animationend.animation,delete es.animationiteration.animation,delete es.animationstart.animation),"TransitionEvent"in window||delete es.transitionend.transition);function Ma(n){if(of[n])return of[n];if(!es[n])return n;var t=es[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in lv)return of[n]=t[e];return n}var uv=Ma("animationend"),cv=Ma("animationiteration"),fv=Ma("animationstart"),rw=Ma("transitionrun"),iw=Ma("transitionstart"),aw=Ma("transitioncancel"),hv=Ma("transitionend"),dv=new Map,_f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_f.push("scrollEnd");function sn(n,t){dv.set(n,t),Ra(t,[n])}var pg=new WeakMap;function qe(n,t){if(typeof n=="object"&&n!==null){var e=pg.get(n);return e!==void 0?e:(t={value:n,source:t,stack:eg(t)},pg.set(n,t),t)}return{value:n,source:t,stack:eg(t)}}var Ne=[],ns=0,Vd=0;function Dc(){for(var n=ns,t=Vd=ns=0;t<n;){var e=Ne[t];Ne[t++]=null;var r=Ne[t];Ne[t++]=null;var i=Ne[t];Ne[t++]=null;var a=Ne[t];if(Ne[t++]=null,r!==null&&i!==null){var s=r.pending;s===null?i.next=i:(i.next=s.next,s.next=i),r.pending=i}a!==0&&mv(e,i,a)}}function kc(n,t,e,r){Ne[ns++]=n,Ne[ns++]=t,Ne[ns++]=e,Ne[ns++]=r,Vd|=r,n.lanes|=r,n=n.alternate,n!==null&&(n.lanes|=r)}function Hd(n,t,e,r){return kc(n,t,e,r),wu(n)}function Gs(n,t){return kc(n,null,null,t),wu(n)}function mv(n,t,e){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e);for(var i=!1,a=n.return;a!==null;)a.childLanes|=e,r=a.alternate,r!==null&&(r.childLanes|=e),a.tag===22&&(n=a.stateNode,n===null||n._visibility&1||(i=!0)),n=a,a=a.return;return n.tag===3?(a=n.stateNode,i&&t!==null&&(i=31-Se(e),n=a.hiddenUpdates,r=n[i],r===null?n[i]=[t]:r.push(t),t.lane=e|536870912),a):null}function wu(n){if(50<ko)throw ko=0,Sh=null,Error(N(185));for(var t=n.return;t!==null;)n=t,t=n.return;return n.tag===3?n.stateNode:null}var rs={};function sw(n,t,e,r){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ge(n,t,e,r){return new sw(n,t,e,r)}function $d(n){return n=n.prototype,!(!n||!n.isReactComponent)}function mi(n,t){var e=n.alternate;return e===null?(e=ge(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&65011712,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e.refCleanup=n.refCleanup,e}function gv(n,t){n.flags&=65011714;var e=n.alternate;return e===null?(n.childLanes=0,n.lanes=t,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.type=e.type,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n}function eu(n,t,e,r,i,a){var s=0;if(r=n,typeof n=="function")$d(n)&&(s=1);else if(typeof n=="string")s=lA(n,e,Sn.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case Pf:return n=ge(31,e,t,i),n.elementType=Pf,n.lanes=a,n;case Fa:return Sa(e.children,i,a,t);case zp:s=8,i|=24;break;case Lf:return n=ge(12,e,t,i|2),n.elementType=Lf,n.lanes=a,n;case Jf:return n=ge(13,e,t,i),n.elementType=Jf,n.lanes=a,n;case qf:return n=ge(19,e,t,i),n.elementType=qf,n.lanes=a,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ZT:case si:s=10;break t;case Mp:s=9;break t;case Cd:s=11;break t;case Id:s=14;break t;case Bi:s=16,r=null;break t}s=29,e=Error(N(130,n===null?"null":typeof n,"")),r=null}return t=ge(s,e,t,i),t.elementType=n,t.type=r,t.lanes=a,t}function Sa(n,t,e,r){return n=ge(7,n,r,t),n.lanes=e,n}function lf(n,t,e){return n=ge(6,n,null,t),n.lanes=e,n}function uf(n,t,e){return t=ge(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}var is=[],as=0,Au=null,Eu=0,De=[],ke=0,Ta=null,oi=1,li="";function ha(n,t){is[as++]=Eu,is[as++]=Au,Au=n,Eu=t}function yv(n,t,e){De[ke++]=oi,De[ke++]=li,De[ke++]=Ta,Ta=n;var r=oi;n=li;var i=32-Se(r)-1;r&=~(1<<i),e+=1;var a=32-Se(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,oi=1<<32-Se(t)+i|e<<i|r,li=a+n}else oi=1<<a|e<<i|r,li=n}function jd(n){n.return!==null&&(ha(n,1),yv(n,1,0))}function Gd(n){for(;n===Au;)Au=is[--as],is[as]=null,Eu=is[--as],is[as]=null;for(;n===Ta;)Ta=De[--ke],De[ke]=null,li=De[--ke],De[ke]=null,oi=De[--ke],De[ke]=null}var Wt=null,bt=null,tt=!1,ba=null,fn=!1,Wf=Error(N(519));function Na(n){var t=Error(N(418,""));throw Ko(qe(t,n)),Wf}function vg(n){var t=n.stateNode,e=n.type,r=n.memoizedProps;switch(t[Xt]=n,t[le]=r,e){case"dialog":G("cancel",t),G("close",t);break;case"iframe":case"object":case"embed":G("load",t);break;case"video":case"audio":for(e=0;e<$o.length;e++)G($o[e],t);break;case"source":G("error",t);break;case"img":case"image":case"link":G("error",t),G("load",t);break;case"details":G("toggle",t);break;case"input":G("invalid",t),Xp(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),Tu(t);break;case"select":G("invalid",t);break;case"textarea":G("invalid",t),Zp(t,r.value,r.defaultValue,r.children),Tu(t)}e=r.children,typeof e!="string"&&typeof e!="number"&&typeof e!="bigint"||t.textContent===""+e||r.suppressHydrationWarning===!0||Q0(t.textContent,e)?(r.popover!=null&&(G("beforetoggle",t),G("toggle",t)),r.onScroll!=null&&G("scroll",t),r.onScrollEnd!=null&&G("scrollend",t),r.onClick!=null&&(t.onclick=Uc),t=!0):t=!1,t||Na(n)}function Sg(n){for(Wt=n.return;Wt;)switch(Wt.tag){case 5:case 13:fn=!1;return;case 27:case 3:fn=!0;return;default:Wt=Wt.return}}function Ws(n){if(n!==Wt)return!1;if(!tt)return Sg(n),tt=!0,!1;var t=n.tag,e;if((e=t!==3&&t!==27)&&((e=t===5)&&(e=n.type,e=!(e!=="form"&&e!=="button")||Nh(n.type,n.memoizedProps)),e=!e),e&&bt&&Na(n),Sg(n),t===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(N(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8)if(e=n.data,e==="/$"){if(t===0){bt=rn(n.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++;n=n.nextSibling}bt=null}}else t===27?(t=bt,sa(n.type)?(n=kh,kh=null,bt=n):bt=t):bt=Wt?rn(n.stateNode.nextSibling):null;return!0}function hl(){bt=Wt=null,tt=!1}function Tg(){var n=ba;return n!==null&&(ie===null?ie=n:ie.push.apply(ie,n),ba=null),n}function Ko(n){ba===null?ba=[n]:ba.push(n)}var th=kn(null),Ua=null,ui=null;function zi(n,t,e){pt(th,t._currentValue),t._currentValue=e}function gi(n){n._currentValue=th.current,Kt(th)}function eh(n,t,e){for(;n!==null;){var r=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),n===e)break;n=n.return}}function nh(n,t,e,r){var i=n.child;for(i!==null&&(i.return=n);i!==null;){var a=i.dependencies;if(a!==null){var s=i.child;a=a.firstContext;t:for(;a!==null;){var o=a;a=i;for(var u=0;u<t.length;u++)if(o.context===t[u]){a.lanes|=e,o=a.alternate,o!==null&&(o.lanes|=e),eh(a.return,e,n),r||(s=null);break t}a=o.next}}else if(i.tag===18){if(s=i.return,s===null)throw Error(N(341));s.lanes|=e,a=s.alternate,a!==null&&(a.lanes|=e),eh(s,e,n),s=null}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===n){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}}function dl(n,t,e,r){n=null;for(var i=t,a=!1;i!==null;){if(!a){if(i.flags&524288)a=!0;else if(i.flags&262144)break}if(i.tag===10){var s=i.alternate;if(s===null)throw Error(N(387));if(s=s.memoizedProps,s!==null){var o=i.type;we(i.pendingProps.value,s.value)||(n!==null?n.push(o):n=[o])}}else if(i===yu.current){if(s=i.alternate,s===null)throw Error(N(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(n!==null?n.push(Yo):n=[Yo])}i=i.return}n!==null&&nh(t,n,e,r),t.flags|=262144}function Nu(n){for(n=n.firstContext;n!==null;){if(!we(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function xa(n){Ua=n,ui=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ft(n){return pv(Ua,n)}function Ml(n,t){return Ua===null&&xa(n),pv(n,t)}function pv(n,t){var e=t._currentValue;if(t={context:t,memoizedValue:e,next:null},ui===null){if(n===null)throw Error(N(308));ui=t,n.dependencies={lanes:0,firstContext:t},n.flags|=524288}else ui=ui.next=t;return e}var ow=typeof AbortController<"u"?AbortController:function(){var n=[],t=this.signal={aborted:!1,addEventListener:function(e,r){n.push(r)}};this.abort=function(){t.aborted=!0,n.forEach(function(e){return e()})}},lw=zt.unstable_scheduleCallback,uw=zt.unstable_NormalPriority,Bt={$$typeof:si,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yd(){return{controller:new ow,data:new Map,refCount:0}}function ml(n){n.refCount--,n.refCount===0&&lw(uw,function(){n.controller.abort()})}var So=null,rh=0,ws=0,hs=null;function cw(n,t){if(So===null){var e=So=[];rh=0,ws=ym(),hs={status:"pending",value:void 0,then:function(r){e.push(r)}}}return rh++,t.then(bg,bg),t}function bg(){if(--rh===0&&So!==null){hs!==null&&(hs.status="fulfilled");var n=So;So=null,ws=0,hs=null;for(var t=0;t<n.length;t++)(0,n[t])()}}function fw(n,t){var e=[],r={status:"pending",value:null,reason:null,then:function(i){e.push(i)}};return n.then(function(){r.status="fulfilled",r.value=t;for(var i=0;i<e.length;i++)(0,e[i])(t)},function(i){for(r.status="rejected",r.reason=i,i=0;i<e.length;i++)(0,e[i])(void 0)}),r}var wg=q.S;q.S=function(n,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&cw(n,t),wg!==null&&wg(n,t)};var wa=kn(null);function Xd(){var n=wa.current;return n!==null?n:ft.pooledCache}function nu(n,t){t===null?pt(wa,wa.current):pt(wa,t.pool)}function vv(){var n=Xd();return n===null?null:{parent:Bt._currentValue,pool:n}}var gl=Error(N(460)),Sv=Error(N(474)),Oc=Error(N(542)),ih={then:function(){}};function Ag(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ul(){}function Tv(n,t,e){switch(e=n[e],e===void 0?n.push(t):e!==t&&(t.then(Ul,Ul),t=e),t.status){case"fulfilled":return t.value;case"rejected":throw n=t.reason,Ng(n),n;default:if(typeof t.status=="string")t.then(Ul,Ul);else{if(n=ft,n!==null&&100<n.shellSuspendCounter)throw Error(N(482));n=t,n.status="pending",n.then(function(r){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=r}},function(r){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw n=t.reason,Ng(n),n}throw To=t,gl}}var To=null;function Eg(){if(To===null)throw Error(N(459));var n=To;return To=null,n}function Ng(n){if(n===gl||n===Oc)throw Error(N(483))}var Ri=!1;function Fd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ah(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ji(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Gi(n,t,e){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,it&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=wu(n),mv(n,null,e),t}return kc(n,r,t,e),wu(n)}function bo(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194048)!==0)){var r=t.lanes;r&=n.pendingLanes,e|=r,t.lanes=e,Vp(n,e)}}function cf(n,t){var e=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,e===r)){var i=null,a=null;if(e=e.firstBaseUpdate,e!==null){do{var s={lane:e.lane,tag:e.tag,payload:e.payload,callback:null,next:null};a===null?i=a=s:a=a.next=s,e=e.next}while(e!==null);a===null?i=a=t:a=a.next=t}else i=a=t;e={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}var sh=!1;function wo(){if(sh){var n=hs;if(n!==null)throw n}}function Ao(n,t,e,r){sh=!1;var i=n.updateQueue;Ri=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var u=o,c=u.next;u.next=null,s===null?a=c:s.next=c,s=u;var h=n.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==s&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=u))}if(a!==null){var g=i.baseState;s=0,h=c=u=null,o=a;do{var d=o.lane&-536870913,m=d!==o.lane;if(m?(Q&d)===d:(r&d)===d){d!==0&&d===ws&&(sh=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});t:{var A=n,b=o;d=t;var x=e;switch(b.tag){case 1:if(A=b.payload,typeof A=="function"){g=A.call(x,g,d);break t}g=A;break t;case 3:A.flags=A.flags&-65537|128;case 0:if(A=b.payload,d=typeof A=="function"?A.call(x,g,d):A,d==null)break t;g=ht({},g,d);break t;case 2:Ri=!0}}d=o.callback,d!==null&&(n.flags|=64,m&&(n.flags|=8192),m=i.callbacks,m===null?i.callbacks=[d]:m.push(d))}else m={lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=m,u=g):h=h.next=m,s|=d;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);h===null&&(u=g),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,a===null&&(i.shared.lanes=0),ra|=s,n.lanes=s,n.memoizedState=g}}function bv(n,t){if(typeof n!="function")throw Error(N(191,n));n.call(t)}function wv(n,t){var e=n.callbacks;if(e!==null)for(n.callbacks=null,n=0;n<e.length;n++)bv(e[n],t)}var As=kn(null),xu=kn(0);function xg(n,t){n=bi,pt(xu,n),pt(As,t),bi=n|t.baseLanes}function oh(){pt(xu,bi),pt(As,As.current)}function Zd(){bi=xu.current,Kt(As),Kt(xu)}var ea=0,H=null,st=null,Ct=null,Du=!1,ds=!1,Da=!1,ku=0,Vo=0,ms=null,hw=0;function Nt(){throw Error(N(321))}function Qd(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!we(n[e],t[e]))return!1;return!0}function _d(n,t,e,r,i,a){return ea=a,H=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,q.H=n===null||n.memoizedState===null?Wv:t0,Da=!1,a=e(r,i),Da=!1,ds&&(a=Ev(t,e,r,i)),Av(n),a}function Av(n){q.H=Ou;var t=st!==null&&st.next!==null;if(ea=0,Ct=st=H=null,Du=!1,Vo=0,ms=null,t)throw Error(N(300));n===null||Pt||(n=n.dependencies,n!==null&&Nu(n)&&(Pt=!0))}function Ev(n,t,e,r){H=n;var i=0;do{if(ds&&(ms=null),Vo=0,ds=!1,25<=i)throw Error(N(301));if(i+=1,Ct=st=null,n.updateQueue!=null){var a=n.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}q.H=Sw,a=t(e,r)}while(ds);return a}function dw(){var n=q.H,t=n.useState()[0];return t=typeof t.then=="function"?yl(t):t,n=n.useState()[0],(st!==null?st.memoizedState:null)!==n&&(H.flags|=1024),t}function Wd(){var n=ku!==0;return ku=0,n}function tm(n,t,e){t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~e}function em(n){if(Du){for(n=n.memoizedState;n!==null;){var t=n.queue;t!==null&&(t.pending=null),n=n.next}Du=!1}ea=0,Ct=st=H=null,ds=!1,Vo=ku=0,ms=null}function ne(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?H.memoizedState=Ct=n:Ct=Ct.next=n,Ct}function It(){if(st===null){var n=H.alternate;n=n!==null?n.memoizedState:null}else n=st.next;var t=Ct===null?H.memoizedState:Ct.next;if(t!==null)Ct=t,st=n;else{if(n===null)throw H.alternate===null?Error(N(467)):Error(N(310));st=n,n={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Ct===null?H.memoizedState=Ct=n:Ct=Ct.next=n}return Ct}function nm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yl(n){var t=Vo;return Vo+=1,ms===null&&(ms=[]),n=Tv(ms,n,t),t=H,(Ct===null?t.memoizedState:Ct.next)===null&&(t=t.alternate,q.H=t===null||t.memoizedState===null?Wv:t0),n}function Cc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return yl(n);if(n.$$typeof===si)return Ft(n)}throw Error(N(438,String(n)))}function rm(n){var t=null,e=H.updateQueue;if(e!==null&&(t=e.memoCache),t==null){var r=H.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),e===null&&(e=nm(),H.updateQueue=e),e.memoCache=t,e=t.data[t.index],e===void 0)for(e=t.data[t.index]=Array(n),r=0;r<n;r++)e[r]=QT;return t.index++,e}function Si(n,t){return typeof t=="function"?t(n):t}function ru(n){var t=It();return im(t,st,n)}function im(n,t,e){var r=n.queue;if(r===null)throw Error(N(311));r.lastRenderedReducer=e;var i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}t.baseQueue=i=a,r.pending=null}if(a=n.baseState,i===null)n.memoizedState=a;else{t=i.next;var o=s=null,u=null,c=t,h=!1;do{var g=c.lane&-536870913;if(g!==c.lane?(Q&g)===g:(ea&g)===g){var d=c.revertLane;if(d===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),g===ws&&(h=!0);else if((ea&d)===d){c=c.next,d===ws&&(h=!0);continue}else g={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(o=u=g,s=a):u=u.next=g,H.lanes|=d,ra|=d;g=c.action,Da&&e(a,g),a=c.hasEagerState?c.eagerState:e(a,g)}else d={lane:g,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(o=u=d,s=a):u=u.next=d,H.lanes|=g,ra|=g;c=c.next}while(c!==null&&c!==t);if(u===null?s=a:u.next=o,!we(a,n.memoizedState)&&(Pt=!0,h&&(e=hs,e!==null)))throw e;n.memoizedState=a,n.baseState=s,n.baseQueue=u,r.lastRenderedState=a}return i===null&&(r.lanes=0),[n.memoizedState,r.dispatch]}function ff(n){var t=It(),e=t.queue;if(e===null)throw Error(N(311));e.lastRenderedReducer=n;var r=e.dispatch,i=e.pending,a=t.memoizedState;if(i!==null){e.pending=null;var s=i=i.next;do a=n(a,s.action),s=s.next;while(s!==i);we(a,t.memoizedState)||(Pt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),e.lastRenderedState=a}return[a,r]}function Nv(n,t,e){var r=H,i=It(),a=tt;if(a){if(e===void 0)throw Error(N(407));e=e()}else e=t();var s=!we((st||i).memoizedState,e);s&&(i.memoizedState=e,Pt=!0),i=i.queue;var o=kv.bind(null,r,i,n);if(pl(2048,8,o,[n]),i.getSnapshot!==t||s||Ct!==null&&Ct.memoizedState.tag&1){if(r.flags|=2048,Es(9,Ic(),Dv.bind(null,r,i,e,t),null),ft===null)throw Error(N(349));a||ea&124||xv(r,t,e)}return e}function xv(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=H.updateQueue,t===null?(t=nm(),H.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function Dv(n,t,e,r){t.value=e,t.getSnapshot=r,Ov(t)&&Cv(n)}function kv(n,t,e){return e(function(){Ov(t)&&Cv(n)})}function Ov(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!we(n,e)}catch{return!0}}function Cv(n){var t=Gs(n,2);t!==null&&be(t,n,2)}function lh(n){var t=ne();if(typeof n=="function"){var e=n;if(n=e(),Da){qi(!0);try{e()}finally{qi(!1)}}}return t.memoizedState=t.baseState=n,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:n},t}function Iv(n,t,e,r){return n.baseState=e,im(n,st,typeof r=="function"?r:Si)}function mw(n,t,e,r,i){if(Bc(n))throw Error(N(485));if(n=t.action,n!==null){var a={payload:i,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){a.listeners.push(s)}};q.T!==null?e(!0):a.isTransition=!1,r(a),e=t.pending,e===null?(a.next=t.pending=a,Bv(t,a)):(a.next=e.next,t.pending=e.next=a)}}function Bv(n,t){var e=t.action,r=t.payload,i=n.state;if(t.isTransition){var a=q.T,s={};q.T=s;try{var o=e(i,r),u=q.S;u!==null&&u(s,o),Dg(n,t,o)}catch(c){uh(n,t,c)}finally{q.T=a}}else try{a=e(i,r),Dg(n,t,a)}catch(c){uh(n,t,c)}}function Dg(n,t,e){e!==null&&typeof e=="object"&&typeof e.then=="function"?e.then(function(r){kg(n,t,r)},function(r){return uh(n,t,r)}):kg(n,t,e)}function kg(n,t,e){t.status="fulfilled",t.value=e,Rv(t),n.state=e,t=n.pending,t!==null&&(e=t.next,e===t?n.pending=null:(e=e.next,t.next=e,Bv(n,e)))}function uh(n,t,e){var r=n.pending;if(n.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=e,Rv(t),t=t.next;while(t!==r)}n.action=null}function Rv(n){n=n.listeners;for(var t=0;t<n.length;t++)(0,n[t])()}function zv(n,t){return t}function Og(n,t){if(tt){var e=ft.formState;if(e!==null){t:{var r=H;if(tt){if(bt){e:{for(var i=bt,a=fn;i.nodeType!==8;){if(!a){i=null;break e}if(i=rn(i.nextSibling),i===null){i=null;break e}}a=i.data,i=a==="F!"||a==="F"?i:null}if(i){bt=rn(i.nextSibling),r=i.data==="F!";break t}}Na(r)}r=!1}r&&(t=e[0])}}return e=ne(),e.memoizedState=e.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zv,lastRenderedState:t},e.queue=r,e=Zv.bind(null,H,r),r.dispatch=e,r=lh(!1),a=lm.bind(null,H,!1,r.queue),r=ne(),i={state:t,dispatch:null,action:n,pending:null},r.queue=i,e=mw.bind(null,H,i,a,e),i.dispatch=e,r.memoizedState=n,[t,e,!1]}function Cg(n){var t=It();return Mv(t,st,n)}function Mv(n,t,e){if(t=im(n,t,zv)[0],n=ru(Si)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=yl(t)}catch(s){throw s===gl?Oc:s}else r=t;t=It();var i=t.queue,a=i.dispatch;return e!==t.memoizedState&&(H.flags|=2048,Es(9,Ic(),gw.bind(null,i,e),null)),[r,a,n]}function gw(n,t){n.action=t}function Ig(n){var t=It(),e=st;if(e!==null)return Mv(t,e,n);It(),t=t.memoizedState,e=It();var r=e.queue.dispatch;return e.memoizedState=n,[t,r,!1]}function Es(n,t,e,r){return n={tag:n,create:e,deps:r,inst:t,next:null},t=H.updateQueue,t===null&&(t=nm(),H.updateQueue=t),e=t.lastEffect,e===null?t.lastEffect=n.next=n:(r=e.next,e.next=n,n.next=r,t.lastEffect=n),n}function Ic(){return{destroy:void 0,resource:void 0}}function Uv(){return It().memoizedState}function iu(n,t,e,r){var i=ne();r=r===void 0?null:r,H.flags|=n,i.memoizedState=Es(1|t,Ic(),e,r)}function pl(n,t,e,r){var i=It();r=r===void 0?null:r;var a=i.memoizedState.inst;st!==null&&r!==null&&Qd(r,st.memoizedState.deps)?i.memoizedState=Es(t,a,e,r):(H.flags|=n,i.memoizedState=Es(1|t,a,e,r))}function Bg(n,t){iu(8390656,8,n,t)}function Lv(n,t){pl(2048,8,n,t)}function Jv(n,t){return pl(4,2,n,t)}function qv(n,t){return pl(4,4,n,t)}function Pv(n,t){if(typeof t=="function"){n=n();var e=t(n);return function(){typeof e=="function"?e():t(null)}}if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function Kv(n,t,e){e=e!=null?e.concat([n]):null,pl(4,4,Pv.bind(null,t,n),e)}function am(){}function Vv(n,t){var e=It();t=t===void 0?null:t;var r=e.memoizedState;return t!==null&&Qd(t,r[1])?r[0]:(e.memoizedState=[n,t],n)}function Hv(n,t){var e=It();t=t===void 0?null:t;var r=e.memoizedState;if(t!==null&&Qd(t,r[1]))return r[0];if(r=n(),Da){qi(!0);try{n()}finally{qi(!1)}}return e.memoizedState=[r,t],r}function sm(n,t,e){return e===void 0||ea&1073741824?n.memoizedState=t:(n.memoizedState=e,n=R0(),H.lanes|=n,ra|=n,e)}function $v(n,t,e,r){return we(e,t)?e:As.current!==null?(n=sm(n,e,r),we(n,t)||(Pt=!0),n):ea&42?(n=R0(),H.lanes|=n,ra|=n,t):(Pt=!0,n.memoizedState=e)}function jv(n,t,e,r,i){var a=et.p;et.p=a!==0&&8>a?a:8;var s=q.T,o={};q.T=o,lm(n,!1,t,e);try{var u=i(),c=q.S;if(c!==null&&c(o,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=fw(u,r);Eo(n,t,h,Te(n))}else Eo(n,t,r,Te(n))}catch(g){Eo(n,t,{then:function(){},status:"rejected",reason:g},Te())}finally{et.p=a,q.T=s}}function yw(){}function ch(n,t,e,r){if(n.tag!==5)throw Error(N(476));var i=Gv(n).queue;jv(n,i,t,va,e===null?yw:function(){return Yv(n),e(r)})}function Gv(n){var t=n.memoizedState;if(t!==null)return t;t={memoizedState:va,baseState:va,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:va},next:null};var e={};return t.next={memoizedState:e,baseState:e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:e},next:null},n.memoizedState=t,n=n.alternate,n!==null&&(n.memoizedState=t),t}function Yv(n){var t=Gv(n).next.queue;Eo(n,t,{},Te())}function om(){return Ft(Yo)}function Xv(){return It().memoizedState}function Fv(){return It().memoizedState}function pw(n){for(var t=n.return;t!==null;){switch(t.tag){case 24:case 3:var e=Te();n=ji(e);var r=Gi(t,n,e);r!==null&&(be(r,t,e),bo(r,t,e)),t={cache:Yd()},n.payload=t;return}t=t.return}}function vw(n,t,e){var r=Te();e={lane:r,revertLane:0,action:e,hasEagerState:!1,eagerState:null,next:null},Bc(n)?Qv(t,e):(e=Hd(n,t,e,r),e!==null&&(be(e,n,r),_v(e,t,r)))}function Zv(n,t,e){var r=Te();Eo(n,t,e,r)}function Eo(n,t,e,r){var i={lane:r,revertLane:0,action:e,hasEagerState:!1,eagerState:null,next:null};if(Bc(n))Qv(t,i);else{var a=n.alternate;if(n.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,e);if(i.hasEagerState=!0,i.eagerState=o,we(o,s))return kc(n,t,i,0),ft===null&&Dc(),!1}catch{}finally{}if(e=Hd(n,t,i,r),e!==null)return be(e,n,r),_v(e,t,r),!0}return!1}function lm(n,t,e,r){if(r={lane:2,revertLane:ym(),action:r,hasEagerState:!1,eagerState:null,next:null},Bc(n)){if(t)throw Error(N(479))}else t=Hd(n,e,r,2),t!==null&&be(t,n,2)}function Bc(n){var t=n.alternate;return n===H||t!==null&&t===H}function Qv(n,t){ds=Du=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function _v(n,t,e){if(e&4194048){var r=t.lanes;r&=n.pendingLanes,e|=r,t.lanes=e,Vp(n,e)}}var Ou={readContext:Ft,use:Cc,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt},Wv={readContext:Ft,use:Cc,useCallback:function(n,t){return ne().memoizedState=[n,t===void 0?null:t],n},useContext:Ft,useEffect:Bg,useImperativeHandle:function(n,t,e){e=e!=null?e.concat([n]):null,iu(4194308,4,Pv.bind(null,t,n),e)},useLayoutEffect:function(n,t){return iu(4194308,4,n,t)},useInsertionEffect:function(n,t){iu(4,2,n,t)},useMemo:function(n,t){var e=ne();t=t===void 0?null:t;var r=n();if(Da){qi(!0);try{n()}finally{qi(!1)}}return e.memoizedState=[r,t],r},useReducer:function(n,t,e){var r=ne();if(e!==void 0){var i=e(t);if(Da){qi(!0);try{e(t)}finally{qi(!1)}}}else i=t;return r.memoizedState=r.baseState=i,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},r.queue=n,n=n.dispatch=vw.bind(null,H,n),[r.memoizedState,n]},useRef:function(n){var t=ne();return n={current:n},t.memoizedState=n},useState:function(n){n=lh(n);var t=n.queue,e=Zv.bind(null,H,t);return t.dispatch=e,[n.memoizedState,e]},useDebugValue:am,useDeferredValue:function(n,t){var e=ne();return sm(e,n,t)},useTransition:function(){var n=lh(!1);return n=jv.bind(null,H,n.queue,!0,!1),ne().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,t,e){var r=H,i=ne();if(tt){if(e===void 0)throw Error(N(407));e=e()}else{if(e=t(),ft===null)throw Error(N(349));Q&124||xv(r,t,e)}i.memoizedState=e;var a={value:e,getSnapshot:t};return i.queue=a,Bg(kv.bind(null,r,a,n),[n]),r.flags|=2048,Es(9,Ic(),Dv.bind(null,r,a,e,t),null),e},useId:function(){var n=ne(),t=ft.identifierPrefix;if(tt){var e=li,r=oi;e=(r&~(1<<32-Se(r)-1)).toString(32)+e,t=""+t+"R"+e,e=ku++,0<e&&(t+="H"+e.toString(32)),t+=""}else e=hw++,t=""+t+"r"+e.toString(32)+"";return n.memoizedState=t},useHostTransitionStatus:om,useFormState:Og,useActionState:Og,useOptimistic:function(n){var t=ne();t.memoizedState=t.baseState=n;var e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=e,t=lm.bind(null,H,!0,e),e.dispatch=t,[n,t]},useMemoCache:rm,useCacheRefresh:function(){return ne().memoizedState=pw.bind(null,H)}},t0={readContext:Ft,use:Cc,useCallback:Vv,useContext:Ft,useEffect:Lv,useImperativeHandle:Kv,useInsertionEffect:Jv,useLayoutEffect:qv,useMemo:Hv,useReducer:ru,useRef:Uv,useState:function(){return ru(Si)},useDebugValue:am,useDeferredValue:function(n,t){var e=It();return $v(e,st.memoizedState,n,t)},useTransition:function(){var n=ru(Si)[0],t=It().memoizedState;return[typeof n=="boolean"?n:yl(n),t]},useSyncExternalStore:Nv,useId:Xv,useHostTransitionStatus:om,useFormState:Cg,useActionState:Cg,useOptimistic:function(n,t){var e=It();return Iv(e,st,n,t)},useMemoCache:rm,useCacheRefresh:Fv},Sw={readContext:Ft,use:Cc,useCallback:Vv,useContext:Ft,useEffect:Lv,useImperativeHandle:Kv,useInsertionEffect:Jv,useLayoutEffect:qv,useMemo:Hv,useReducer:ff,useRef:Uv,useState:function(){return ff(Si)},useDebugValue:am,useDeferredValue:function(n,t){var e=It();return st===null?sm(e,n,t):$v(e,st.memoizedState,n,t)},useTransition:function(){var n=ff(Si)[0],t=It().memoizedState;return[typeof n=="boolean"?n:yl(n),t]},useSyncExternalStore:Nv,useId:Xv,useHostTransitionStatus:om,useFormState:Ig,useActionState:Ig,useOptimistic:function(n,t){var e=It();return st!==null?Iv(e,st,n,t):(e.baseState=n,[n,e.queue.dispatch])},useMemoCache:rm,useCacheRefresh:Fv},gs=null,Ho=0;function Ll(n){var t=Ho;return Ho+=1,gs===null&&(gs=[]),Tv(gs,n,t)}function to(n,t){t=t.props.ref,n.ref=t!==void 0?t:null}function Jl(n,t){throw t.$$typeof===FT?Error(N(525)):(n=Object.prototype.toString.call(t),Error(N(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)))}function Rg(n){var t=n._init;return t(n._payload)}function e0(n){function t(p,y){if(n){var v=p.deletions;v===null?(p.deletions=[y],p.flags|=16):v.push(y)}}function e(p,y){if(!n)return null;for(;y!==null;)t(p,y),y=y.sibling;return null}function r(p){for(var y=new Map;p!==null;)p.key!==null?y.set(p.key,p):y.set(p.index,p),p=p.sibling;return y}function i(p,y){return p=mi(p,y),p.index=0,p.sibling=null,p}function a(p,y,v){return p.index=v,n?(v=p.alternate,v!==null?(v=v.index,v<y?(p.flags|=67108866,y):v):(p.flags|=67108866,y)):(p.flags|=1048576,y)}function s(p){return n&&p.alternate===null&&(p.flags|=67108866),p}function o(p,y,v,w){return y===null||y.tag!==6?(y=lf(v,p.mode,w),y.return=p,y):(y=i(y,v),y.return=p,y)}function u(p,y,v,w){var O=v.type;return O===Fa?h(p,y,v.props.children,w,v.key):y!==null&&(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Bi&&Rg(O)===y.type)?(y=i(y,v.props),to(y,v),y.return=p,y):(y=eu(v.type,v.key,v.props,null,p.mode,w),to(y,v),y.return=p,y)}function c(p,y,v,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=uf(v,p.mode,w),y.return=p,y):(y=i(y,v.children||[]),y.return=p,y)}function h(p,y,v,w,O){return y===null||y.tag!==7?(y=Sa(v,p.mode,w,O),y.return=p,y):(y=i(y,v),y.return=p,y)}function g(p,y,v){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=lf(""+y,p.mode,v),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Cl:return v=eu(y.type,y.key,y.props,null,p.mode,v),to(v,y),v.return=p,v;case oo:return y=uf(y,p.mode,v),y.return=p,y;case Bi:var w=y._init;return y=w(y._payload),g(p,y,v)}if(lo(y)||Zs(y))return y=Sa(y,p.mode,v,null),y.return=p,y;if(typeof y.then=="function")return g(p,Ll(y),v);if(y.$$typeof===si)return g(p,Ml(p,y),v);Jl(p,y)}return null}function d(p,y,v,w){var O=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return O!==null?null:o(p,y,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Cl:return v.key===O?u(p,y,v,w):null;case oo:return v.key===O?c(p,y,v,w):null;case Bi:return O=v._init,v=O(v._payload),d(p,y,v,w)}if(lo(v)||Zs(v))return O!==null?null:h(p,y,v,w,null);if(typeof v.then=="function")return d(p,y,Ll(v),w);if(v.$$typeof===si)return d(p,y,Ml(p,v),w);Jl(p,v)}return null}function m(p,y,v,w,O){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return p=p.get(v)||null,o(y,p,""+w,O);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Cl:return p=p.get(w.key===null?v:w.key)||null,u(y,p,w,O);case oo:return p=p.get(w.key===null?v:w.key)||null,c(y,p,w,O);case Bi:var I=w._init;return w=I(w._payload),m(p,y,v,w,O)}if(lo(w)||Zs(w))return p=p.get(v)||null,h(y,p,w,O,null);if(typeof w.then=="function")return m(p,y,v,Ll(w),O);if(w.$$typeof===si)return m(p,y,v,Ml(y,w),O);Jl(y,w)}return null}function A(p,y,v,w){for(var O=null,I=null,C=y,R=y=0,P=null;C!==null&&R<v.length;R++){C.index>R?(P=C,C=null):P=C.sibling;var J=d(p,C,v[R],w);if(J===null){C===null&&(C=P);break}n&&C&&J.alternate===null&&t(p,C),y=a(J,y,R),I===null?O=J:I.sibling=J,I=J,C=P}if(R===v.length)return e(p,C),tt&&ha(p,R),O;if(C===null){for(;R<v.length;R++)C=g(p,v[R],w),C!==null&&(y=a(C,y,R),I===null?O=C:I.sibling=C,I=C);return tt&&ha(p,R),O}for(C=r(C);R<v.length;R++)P=m(C,p,R,v[R],w),P!==null&&(n&&P.alternate!==null&&C.delete(P.key===null?R:P.key),y=a(P,y,R),I===null?O=P:I.sibling=P,I=P);return n&&C.forEach(function(Vt){return t(p,Vt)}),tt&&ha(p,R),O}function b(p,y,v,w){if(v==null)throw Error(N(151));for(var O=null,I=null,C=y,R=y=0,P=null,J=v.next();C!==null&&!J.done;R++,J=v.next()){C.index>R?(P=C,C=null):P=C.sibling;var Vt=d(p,C,J.value,w);if(Vt===null){C===null&&(C=P);break}n&&C&&Vt.alternate===null&&t(p,C),y=a(Vt,y,R),I===null?O=Vt:I.sibling=Vt,I=Vt,C=P}if(J.done)return e(p,C),tt&&ha(p,R),O;if(C===null){for(;!J.done;R++,J=v.next())J=g(p,J.value,w),J!==null&&(y=a(J,y,R),I===null?O=J:I.sibling=J,I=J);return tt&&ha(p,R),O}for(C=r(C);!J.done;R++,J=v.next())J=m(C,p,R,J.value,w),J!==null&&(n&&J.alternate!==null&&C.delete(J.key===null?R:J.key),y=a(J,y,R),I===null?O=J:I.sibling=J,I=J);return n&&C.forEach(function(fe){return t(p,fe)}),tt&&ha(p,R),O}function x(p,y,v,w){if(typeof v=="object"&&v!==null&&v.type===Fa&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Cl:t:{for(var O=v.key;y!==null;){if(y.key===O){if(O=v.type,O===Fa){if(y.tag===7){e(p,y.sibling),w=i(y,v.props.children),w.return=p,p=w;break t}}else if(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Bi&&Rg(O)===y.type){e(p,y.sibling),w=i(y,v.props),to(w,v),w.return=p,p=w;break t}e(p,y);break}else t(p,y);y=y.sibling}v.type===Fa?(w=Sa(v.props.children,p.mode,w,v.key),w.return=p,p=w):(w=eu(v.type,v.key,v.props,null,p.mode,w),to(w,v),w.return=p,p=w)}return s(p);case oo:t:{for(O=v.key;y!==null;){if(y.key===O)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){e(p,y.sibling),w=i(y,v.children||[]),w.return=p,p=w;break t}else{e(p,y);break}else t(p,y);y=y.sibling}w=uf(v,p.mode,w),w.return=p,p=w}return s(p);case Bi:return O=v._init,v=O(v._payload),x(p,y,v,w)}if(lo(v))return A(p,y,v,w);if(Zs(v)){if(O=Zs(v),typeof O!="function")throw Error(N(150));return v=O.call(v),b(p,y,v,w)}if(typeof v.then=="function")return x(p,y,Ll(v),w);if(v.$$typeof===si)return x(p,y,Ml(p,v),w);Jl(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint"?(v=""+v,y!==null&&y.tag===6?(e(p,y.sibling),w=i(y,v),w.return=p,p=w):(e(p,y),w=lf(v,p.mode,w),w.return=p,p=w),s(p)):e(p,y)}return function(p,y,v,w){try{Ho=0;var O=x(p,y,v,w);return gs=null,O}catch(C){if(C===gl||C===Oc)throw C;var I=ge(29,C,null,p.mode);return I.lanes=w,I.return=p,I}finally{}}}var Ns=e0(!0),n0=e0(!1),Ye=kn(null),bn=null;function Mi(n){var t=n.alternate;pt(Rt,Rt.current&1),pt(Ye,n),bn===null&&(t===null||As.current!==null||t.memoizedState!==null)&&(bn=n)}function r0(n){if(n.tag===22){if(pt(Rt,Rt.current),pt(Ye,n),bn===null){var t=n.alternate;t!==null&&t.memoizedState!==null&&(bn=n)}}else Ui()}function Ui(){pt(Rt,Rt.current),pt(Ye,Ye.current)}function ci(n){Kt(Ye),bn===n&&(bn=null),Kt(Rt)}var Rt=kn(0);function Cu(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||Dh(e)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function hf(n,t,e,r){t=n.memoizedState,e=e(r,t),e=e==null?t:ht({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var fh={enqueueSetState:function(n,t,e){n=n._reactInternals;var r=Te(),i=ji(r);i.payload=t,e!=null&&(i.callback=e),t=Gi(n,i,r),t!==null&&(be(t,n,r),bo(t,n,r))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var r=Te(),i=ji(r);i.tag=1,i.payload=t,e!=null&&(i.callback=e),t=Gi(n,i,r),t!==null&&(be(t,n,r),bo(t,n,r))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=Te(),r=ji(e);r.tag=2,t!=null&&(r.callback=t),t=Gi(n,r,e),t!==null&&(be(t,n,e),bo(t,n,e))}};function zg(n,t,e,r,i,a,s){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,a,s):t.prototype&&t.prototype.isPureReactComponent?!Po(e,r)||!Po(i,a):!0}function Mg(n,t,e,r){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,r),t.state!==n&&fh.enqueueReplaceState(t,t.state,null)}function ka(n,t){var e=t;if("ref"in t){e={};for(var r in t)r!=="ref"&&(e[r]=t[r])}if(n=n.defaultProps){e===t&&(e=ht({},e));for(var i in n)e[i]===void 0&&(e[i]=n[i])}return e}var Iu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function i0(n){Iu(n)}function a0(n){console.error(n)}function s0(n){Iu(n)}function Bu(n,t){try{var e=n.onUncaughtError;e(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function Ug(n,t,e){try{var r=n.onCaughtError;r(e.value,{componentStack:e.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function hh(n,t,e){return e=ji(e),e.tag=3,e.payload={element:null},e.callback=function(){Bu(n,t)},e}function o0(n){return n=ji(n),n.tag=3,n}function l0(n,t,e,r){var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=r.value;n.payload=function(){return i(a)},n.callback=function(){Ug(t,e,r)}}var s=e.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ug(t,e,r),typeof i!="function"&&(Yi===null?Yi=new Set([this]):Yi.add(this));var o=r.stack;this.componentDidCatch(r.value,{componentStack:o!==null?o:""})})}function Tw(n,t,e,r,i){if(e.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=e.alternate,t!==null&&dl(t,e,i,!0),e=Ye.current,e!==null){switch(e.tag){case 13:return bn===null?Th():e.alternate===null&&wt===0&&(wt=3),e.flags&=-257,e.flags|=65536,e.lanes=i,r===ih?e.flags|=16384:(t=e.updateQueue,t===null?e.updateQueue=new Set([r]):t.add(r),Af(n,r,i)),!1;case 22:return e.flags|=65536,r===ih?e.flags|=16384:(t=e.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},e.updateQueue=t):(e=t.retryQueue,e===null?t.retryQueue=new Set([r]):e.add(r)),Af(n,r,i)),!1}throw Error(N(435,e.tag))}return Af(n,r,i),Th(),!1}if(tt)return t=Ye.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==Wf&&(n=Error(N(422),{cause:r}),Ko(qe(n,e)))):(r!==Wf&&(t=Error(N(423),{cause:r}),Ko(qe(t,e))),n=n.current.alternate,n.flags|=65536,i&=-i,n.lanes|=i,r=qe(r,e),i=hh(n.stateNode,r,i),cf(n,i),wt!==4&&(wt=2)),!1;var a=Error(N(520),{cause:r});if(a=qe(a,e),Do===null?Do=[a]:Do.push(a),wt!==4&&(wt=2),t===null)return!0;r=qe(r,e),e=t;do{switch(e.tag){case 3:return e.flags|=65536,n=i&-i,e.lanes|=n,n=hh(e.stateNode,r,n),cf(e,n),!1;case 1:if(t=e.type,a=e.stateNode,(e.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(Yi===null||!Yi.has(a))))return e.flags|=65536,i&=-i,e.lanes|=i,i=o0(i),l0(i,n,e,r),cf(e,i),!1}e=e.return}while(e!==null);return!1}var u0=Error(N(461)),Pt=!1;function Ht(n,t,e,r){t.child=n===null?n0(t,null,e,r):Ns(t,n.child,e,r)}function Lg(n,t,e,r,i){e=e.render;var a=t.ref;if("ref"in r){var s={};for(var o in r)o!=="ref"&&(s[o]=r[o])}else s=r;return xa(t),r=_d(n,t,e,s,a,i),o=Wd(),n!==null&&!Pt?(tm(n,t,i),Ti(n,t,i)):(tt&&o&&jd(t),t.flags|=1,Ht(n,t,r,i),t.child)}function Jg(n,t,e,r,i){if(n===null){var a=e.type;return typeof a=="function"&&!$d(a)&&a.defaultProps===void 0&&e.compare===null?(t.tag=15,t.type=a,c0(n,t,a,r,i)):(n=eu(e.type,null,r,t,t.mode,i),n.ref=t.ref,n.return=t,t.child=n)}if(a=n.child,!um(n,i)){var s=a.memoizedProps;if(e=e.compare,e=e!==null?e:Po,e(s,r)&&n.ref===t.ref)return Ti(n,t,i)}return t.flags|=1,n=mi(a,r),n.ref=t.ref,n.return=t,t.child=n}function c0(n,t,e,r,i){if(n!==null){var a=n.memoizedProps;if(Po(a,r)&&n.ref===t.ref)if(Pt=!1,t.pendingProps=r=a,um(n,i))n.flags&131072&&(Pt=!0);else return t.lanes=n.lanes,Ti(n,t,i)}return dh(n,t,e,r,i)}function f0(n,t,e){var r=t.pendingProps,i=r.children,a=n!==null?n.memoizedState:null;if(r.mode==="hidden"){if(t.flags&128){if(r=a!==null?a.baseLanes|e:e,n!==null){for(i=t.child=n.child,a=0;i!==null;)a=a|i.lanes|i.childLanes,i=i.sibling;t.childLanes=a&~r}else t.childLanes=0,t.child=null;return qg(n,t,r,e)}if(e&536870912)t.memoizedState={baseLanes:0,cachePool:null},n!==null&&nu(t,a!==null?a.cachePool:null),a!==null?xg(t,a):oh(),r0(t);else return t.lanes=t.childLanes=536870912,qg(n,t,a!==null?a.baseLanes|e:e,e)}else a!==null?(nu(t,a.cachePool),xg(t,a),Ui(),t.memoizedState=null):(n!==null&&nu(t,null),oh(),Ui());return Ht(n,t,i,e),t.child}function qg(n,t,e,r){var i=Xd();return i=i===null?null:{parent:Bt._currentValue,pool:i},t.memoizedState={baseLanes:e,cachePool:i},n!==null&&nu(t,null),oh(),r0(t),n!==null&&dl(n,t,r,!0),null}function au(n,t){var e=t.ref;if(e===null)n!==null&&n.ref!==null&&(t.flags|=4194816);else{if(typeof e!="function"&&typeof e!="object")throw Error(N(284));(n===null||n.ref!==e)&&(t.flags|=4194816)}}function dh(n,t,e,r,i){return xa(t),e=_d(n,t,e,r,void 0,i),r=Wd(),n!==null&&!Pt?(tm(n,t,i),Ti(n,t,i)):(tt&&r&&jd(t),t.flags|=1,Ht(n,t,e,i),t.child)}function Pg(n,t,e,r,i,a){return xa(t),t.updateQueue=null,e=Ev(t,r,e,i),Av(n),r=Wd(),n!==null&&!Pt?(tm(n,t,a),Ti(n,t,a)):(tt&&r&&jd(t),t.flags|=1,Ht(n,t,e,a),t.child)}function Kg(n,t,e,r,i){if(xa(t),t.stateNode===null){var a=rs,s=e.contextType;typeof s=="object"&&s!==null&&(a=Ft(s)),a=new e(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=fh,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},Fd(t),s=e.contextType,a.context=typeof s=="object"&&s!==null?Ft(s):rs,a.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(hf(t,e,s,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&fh.enqueueReplaceState(a,a.state,null),Ao(t,r,a,i),wo(),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(n===null){a=t.stateNode;var o=t.memoizedProps,u=ka(e,o);a.props=u;var c=a.context,h=e.contextType;s=rs,typeof h=="object"&&h!==null&&(s=Ft(h));var g=e.getDerivedStateFromProps;h=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function",o=t.pendingProps!==o,h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o||c!==s)&&Mg(t,a,r,s),Ri=!1;var d=t.memoizedState;a.state=d,Ao(t,r,a,i),wo(),c=t.memoizedState,o||d!==c||Ri?(typeof g=="function"&&(hf(t,e,g,r),c=t.memoizedState),(u=Ri||zg(t,e,u,r,d,c,s))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=s,r=u):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,ah(n,t),s=t.memoizedProps,h=ka(e,s),a.props=h,g=t.pendingProps,d=a.context,c=e.contextType,u=rs,typeof c=="object"&&c!==null&&(u=Ft(c)),o=e.getDerivedStateFromProps,(c=typeof o=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==g||d!==u)&&Mg(t,a,r,u),Ri=!1,d=t.memoizedState,a.state=d,Ao(t,r,a,i),wo();var m=t.memoizedState;s!==g||d!==m||Ri||n!==null&&n.dependencies!==null&&Nu(n.dependencies)?(typeof o=="function"&&(hf(t,e,o,r),m=t.memoizedState),(h=Ri||zg(t,e,h,r,d,m,u)||n!==null&&n.dependencies!==null&&Nu(n.dependencies))?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,m,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,m,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(t.flags|=1024),r=!1)}return a=r,au(n,t),r=(t.flags&128)!==0,a||r?(a=t.stateNode,e=r&&typeof e.getDerivedStateFromError!="function"?null:a.render(),t.flags|=1,n!==null&&r?(t.child=Ns(t,n.child,null,i),t.child=Ns(t,null,e,i)):Ht(n,t,e,i),t.memoizedState=a.state,n=t.child):n=Ti(n,t,i),n}function Vg(n,t,e,r){return hl(),t.flags|=256,Ht(n,t,e,r),t.child}var df={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mf(n){return{baseLanes:n,cachePool:vv()}}function gf(n,t,e){return n=n!==null?n.childLanes&~e:0,t&&(n|=Pe),n}function h0(n,t,e){var r=t.pendingProps,i=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=n!==null&&n.memoizedState===null?!1:(Rt.current&2)!==0),s&&(i=!0,t.flags&=-129),s=(t.flags&32)!==0,t.flags&=-33,n===null){if(tt){if(i?Mi(t):Ui(),tt){var o=bt,u;if(u=o){t:{for(u=o,o=fn;u.nodeType!==8;){if(!o){o=null;break t}if(u=rn(u.nextSibling),u===null){o=null;break t}}o=u}o!==null?(t.memoizedState={dehydrated:o,treeContext:Ta!==null?{id:oi,overflow:li}:null,retryLane:536870912,hydrationErrors:null},u=ge(18,null,null,0),u.stateNode=o,u.return=t,t.child=u,Wt=t,bt=null,u=!0):u=!1}u||Na(t)}if(o=t.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return Dh(o)?t.lanes=32:t.lanes=536870912,null;ci(t)}return o=r.children,r=r.fallback,i?(Ui(),i=t.mode,o=Ru({mode:"hidden",children:o},i),r=Sa(r,i,e,null),o.return=t,r.return=t,o.sibling=r,t.child=o,i=t.child,i.memoizedState=mf(e),i.childLanes=gf(n,s,e),t.memoizedState=df,r):(Mi(t),mh(t,o))}if(u=n.memoizedState,u!==null&&(o=u.dehydrated,o!==null)){if(a)t.flags&256?(Mi(t),t.flags&=-257,t=yf(n,t,e)):t.memoizedState!==null?(Ui(),t.child=n.child,t.flags|=128,t=null):(Ui(),i=r.fallback,o=t.mode,r=Ru({mode:"visible",children:r.children},o),i=Sa(i,o,e,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,Ns(t,n.child,null,e),r=t.child,r.memoizedState=mf(e),r.childLanes=gf(n,s,e),t.memoizedState=df,t=i);else if(Mi(t),Dh(o)){if(s=o.nextSibling&&o.nextSibling.dataset,s)var c=s.dgst;s=c,r=Error(N(419)),r.stack="",r.digest=s,Ko({value:r,source:null,stack:null}),t=yf(n,t,e)}else if(Pt||dl(n,t,e,!1),s=(e&n.childLanes)!==0,Pt||s){if(s=ft,s!==null&&(r=e&-e,r=r&42?1:Rd(r),r=r&(s.suspendedLanes|e)?0:r,r!==0&&r!==u.retryLane))throw u.retryLane=r,Gs(n,r),be(s,n,r),u0;o.data==="$?"||Th(),t=yf(n,t,e)}else o.data==="$?"?(t.flags|=192,t.child=n.child,t=null):(n=u.treeContext,bt=rn(o.nextSibling),Wt=t,tt=!0,ba=null,fn=!1,n!==null&&(De[ke++]=oi,De[ke++]=li,De[ke++]=Ta,oi=n.id,li=n.overflow,Ta=t),t=mh(t,r.children),t.flags|=4096);return t}return i?(Ui(),i=r.fallback,o=t.mode,u=n.child,c=u.sibling,r=mi(u,{mode:"hidden",children:r.children}),r.subtreeFlags=u.subtreeFlags&65011712,c!==null?i=mi(c,i):(i=Sa(i,o,e,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=n.child.memoizedState,o===null?o=mf(e):(u=o.cachePool,u!==null?(c=Bt._currentValue,u=u.parent!==c?{parent:c,pool:c}:u):u=vv(),o={baseLanes:o.baseLanes|e,cachePool:u}),i.memoizedState=o,i.childLanes=gf(n,s,e),t.memoizedState=df,r):(Mi(t),e=n.child,n=e.sibling,e=mi(e,{mode:"visible",children:r.children}),e.return=t,e.sibling=null,n!==null&&(s=t.deletions,s===null?(t.deletions=[n],t.flags|=16):s.push(n)),t.child=e,t.memoizedState=null,e)}function mh(n,t){return t=Ru({mode:"visible",children:t},n.mode),t.return=n,n.child=t}function Ru(n,t){return n=ge(22,n,null,t),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function yf(n,t,e){return Ns(t,n.child,null,e),n=mh(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function Hg(n,t,e){n.lanes|=t;var r=n.alternate;r!==null&&(r.lanes|=t),eh(n.return,t,e)}function pf(n,t,e,r,i){var a=n.memoizedState;a===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:e,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=e,a.tailMode=i)}function d0(n,t,e){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Ht(n,t,r.children,e),r=Rt.current,r&2)r=r&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Hg(n,e,t);else if(n.tag===19)Hg(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}switch(pt(Rt,r),i){case"forwards":for(e=t.child,i=null;e!==null;)n=e.alternate,n!==null&&Cu(n)===null&&(i=e),e=e.sibling;e=i,e===null?(i=t.child,t.child=null):(i=e.sibling,e.sibling=null),pf(t,!1,i,e,a);break;case"backwards":for(e=null,i=t.child,t.child=null;i!==null;){if(n=i.alternate,n!==null&&Cu(n)===null){t.child=i;break}n=i.sibling,i.sibling=e,e=i,i=n}pf(t,!0,e,null,a);break;case"together":pf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ti(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),ra|=t.lanes,!(e&t.childLanes))if(n!==null){if(dl(n,t,e,!1),(e&t.childLanes)===0)return null}else return null;if(n!==null&&t.child!==n.child)throw Error(N(153));if(t.child!==null){for(n=t.child,e=mi(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=mi(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function um(n,t){return n.lanes&t?!0:(n=n.dependencies,!!(n!==null&&Nu(n)))}function bw(n,t,e){switch(t.tag){case 3:pu(t,t.stateNode.containerInfo),zi(t,Bt,n.memoizedState.cache),hl();break;case 27:case 5:Hf(t);break;case 4:pu(t,t.stateNode.containerInfo);break;case 10:zi(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Mi(t),t.flags|=128,null):e&t.child.childLanes?h0(n,t,e):(Mi(t),n=Ti(n,t,e),n!==null?n.sibling:null);Mi(t);break;case 19:var i=(n.flags&128)!==0;if(r=(e&t.childLanes)!==0,r||(dl(n,t,e,!1),r=(e&t.childLanes)!==0),i){if(r)return d0(n,t,e);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),pt(Rt,Rt.current),r)break;return null;case 22:case 23:return t.lanes=0,f0(n,t,e);case 24:zi(t,Bt,n.memoizedState.cache)}return Ti(n,t,e)}function m0(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps)Pt=!0;else{if(!um(n,e)&&!(t.flags&128))return Pt=!1,bw(n,t,e);Pt=!!(n.flags&131072)}else Pt=!1,tt&&t.flags&1048576&&yv(t,Eu,t.index);switch(t.lanes=0,t.tag){case 16:t:{n=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,typeof r=="function")$d(r)?(n=ka(r,n),t.tag=1,t=Kg(null,t,r,n,e)):(t.tag=0,t=dh(null,t,r,n,e));else{if(r!=null){if(i=r.$$typeof,i===Cd){t.tag=11,t=Lg(null,t,r,n,e);break t}else if(i===Id){t.tag=14,t=Jg(null,t,r,n,e);break t}}throw t=Kf(r)||r,Error(N(306,t,""))}}return t;case 0:return dh(n,t,t.type,t.pendingProps,e);case 1:return r=t.type,i=ka(r,t.pendingProps),Kg(n,t,r,i,e);case 3:t:{if(pu(t,t.stateNode.containerInfo),n===null)throw Error(N(387));r=t.pendingProps;var a=t.memoizedState;i=a.element,ah(n,t),Ao(t,r,null,e);var s=t.memoizedState;if(r=s.cache,zi(t,Bt,r),r!==a.cache&&nh(t,[Bt],e,!0),wo(),r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=Vg(n,t,r,e);break t}else if(r!==i){i=qe(Error(N(424)),t),Ko(i),t=Vg(n,t,r,e);break t}else{switch(n=t.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(bt=rn(n.firstChild),Wt=t,tt=!0,ba=null,fn=!0,e=n0(t,null,r,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling}else{if(hl(),r===i){t=Ti(n,t,e);break t}Ht(n,t,r,e)}t=t.child}return t;case 26:return au(n,t),n===null?(e=sy(t.type,null,t.pendingProps,null))?t.memoizedState=e:tt||(e=t.type,n=t.pendingProps,r=Pu($i.current).createElement(e),r[Xt]=t,r[le]=n,Gt(r,e,n),Jt(r),t.stateNode=r):t.memoizedState=sy(t.type,n.memoizedProps,t.pendingProps,n.memoizedState),null;case 27:return Hf(t),n===null&&tt&&(r=t.stateNode=tS(t.type,t.pendingProps,$i.current),Wt=t,fn=!0,i=bt,sa(t.type)?(kh=i,bt=rn(r.firstChild)):bt=i),Ht(n,t,t.pendingProps.children,e),au(n,t),n===null&&(t.flags|=4194304),t.child;case 5:return n===null&&tt&&((i=r=bt)&&(r=Fw(r,t.type,t.pendingProps,fn),r!==null?(t.stateNode=r,Wt=t,bt=rn(r.firstChild),fn=!1,i=!0):i=!1),i||Na(t)),Hf(t),i=t.type,a=t.pendingProps,s=n!==null?n.memoizedProps:null,r=a.children,Nh(i,a)?r=null:s!==null&&Nh(i,s)&&(t.flags|=32),t.memoizedState!==null&&(i=_d(n,t,dw,null,null,e),Yo._currentValue=i),au(n,t),Ht(n,t,r,e),t.child;case 6:return n===null&&tt&&((n=e=bt)&&(e=Zw(e,t.pendingProps,fn),e!==null?(t.stateNode=e,Wt=t,bt=null,n=!0):n=!1),n||Na(t)),null;case 13:return h0(n,t,e);case 4:return pu(t,t.stateNode.containerInfo),r=t.pendingProps,n===null?t.child=Ns(t,null,r,e):Ht(n,t,r,e),t.child;case 11:return Lg(n,t,t.type,t.pendingProps,e);case 7:return Ht(n,t,t.pendingProps,e),t.child;case 8:return Ht(n,t,t.pendingProps.children,e),t.child;case 12:return Ht(n,t,t.pendingProps.children,e),t.child;case 10:return r=t.pendingProps,zi(t,t.type,r.value),Ht(n,t,r.children,e),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,xa(t),i=Ft(i),r=r(i),t.flags|=1,Ht(n,t,r,e),t.child;case 14:return Jg(n,t,t.type,t.pendingProps,e);case 15:return c0(n,t,t.type,t.pendingProps,e);case 19:return d0(n,t,e);case 31:return r=t.pendingProps,e=t.mode,r={mode:r.mode,children:r.children},n===null?(e=Ru(r,e),e.ref=t.ref,t.child=e,e.return=t,t=e):(e=mi(n.child,r),e.ref=t.ref,t.child=e,e.return=t,t=e),t;case 22:return f0(n,t,e);case 24:return xa(t),r=Ft(Bt),n===null?(i=Xd(),i===null&&(i=ft,a=Yd(),i.pooledCache=a,a.refCount++,a!==null&&(i.pooledCacheLanes|=e),i=a),t.memoizedState={parent:r,cache:i},Fd(t),zi(t,Bt,i)):(n.lanes&e&&(ah(n,t),Ao(t,null,null,e),wo()),i=n.memoizedState,a=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),zi(t,Bt,r)):(r=a.cache,zi(t,Bt,r),r!==i.cache&&nh(t,[Bt],e,!0))),Ht(n,t,t.pendingProps.children,e),t.child;case 29:throw t.pendingProps}throw Error(N(156,t.tag))}function In(n){n.flags|=4}function $g(n,t){if(t.type!=="stylesheet"||t.state.loading&4)n.flags&=-16777217;else if(n.flags|=16777216,!rS(t)){if(t=Ye.current,t!==null&&((Q&4194048)===Q?bn!==null:(Q&62914560)!==Q&&!(Q&536870912)||t!==bn))throw To=ih,Sv;n.flags|=8192}}function ql(n,t){t!==null&&(n.flags|=4),n.flags&16384&&(t=n.tag!==22?Pp():536870912,n.lanes|=t,xs|=t)}function eo(n,t){if(!tt)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function vt(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,r=0;if(t)for(var i=n.child;i!==null;)e|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)e|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=e,t}function ww(n,t,e){var r=t.pendingProps;switch(Gd(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return vt(t),null;case 3:return e=t.stateNode,r=null,n!==null&&(r=n.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),gi(Bt),Ss(),e.pendingContext&&(e.context=e.pendingContext,e.pendingContext=null),(n===null||n.child===null)&&(Ws(t)?In(t):n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tg())),vt(t),null;case 26:return e=t.memoizedState,n===null?(In(t),e!==null?(vt(t),$g(t,e)):(vt(t),t.flags&=-16777217)):e?e!==n.memoizedState?(In(t),vt(t),$g(t,e)):(vt(t),t.flags&=-16777217):(n.memoizedProps!==r&&In(t),vt(t),t.flags&=-16777217),null;case 27:vu(t),e=$i.current;var i=t.type;if(n!==null&&t.stateNode!=null)n.memoizedProps!==r&&In(t);else{if(!r){if(t.stateNode===null)throw Error(N(166));return vt(t),null}n=Sn.current,Ws(t)?vg(t):(n=tS(i,r,e),t.stateNode=n,In(t))}return vt(t),null;case 5:if(vu(t),e=t.type,n!==null&&t.stateNode!=null)n.memoizedProps!==r&&In(t);else{if(!r){if(t.stateNode===null)throw Error(N(166));return vt(t),null}if(n=Sn.current,Ws(t))vg(t);else{switch(i=Pu($i.current),n){case 1:n=i.createElementNS("http://www.w3.org/2000/svg",e);break;case 2:n=i.createElementNS("http://www.w3.org/1998/Math/MathML",e);break;default:switch(e){case"svg":n=i.createElementNS("http://www.w3.org/2000/svg",e);break;case"math":n=i.createElementNS("http://www.w3.org/1998/Math/MathML",e);break;case"script":n=i.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof r.is=="string"?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?n.multiple=!0:r.size&&(n.size=r.size);break;default:n=typeof r.is=="string"?i.createElement(e,{is:r.is}):i.createElement(e)}}n[Xt]=t,n[le]=r;t:for(i=t.child;i!==null;){if(i.tag===5||i.tag===6)n.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break t;for(;i.sibling===null;){if(i.return===null||i.return===t)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=n;t:switch(Gt(n,e,r),e){case"button":case"input":case"select":case"textarea":n=!!r.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&In(t)}}return vt(t),t.flags&=-16777217,null;case 6:if(n&&t.stateNode!=null)n.memoizedProps!==r&&In(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(N(166));if(n=$i.current,Ws(t)){if(n=t.stateNode,e=t.memoizedProps,r=null,i=Wt,i!==null)switch(i.tag){case 27:case 5:r=i.memoizedProps}n[Xt]=t,n=!!(n.nodeValue===e||r!==null&&r.suppressHydrationWarning===!0||Q0(n.nodeValue,e)),n||Na(t)}else n=Pu(n).createTextNode(r),n[Xt]=t,t.stateNode=n}return vt(t),null;case 13:if(r=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(i=Ws(t),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(N(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(N(317));i[Xt]=t}else hl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vt(t),i=!1}else i=Tg(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(ci(t),t):(ci(t),null)}if(ci(t),t.flags&128)return t.lanes=e,t;if(e=r!==null,n=n!==null&&n.memoizedState!==null,e){r=t.child,i=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(i=r.alternate.memoizedState.cachePool.pool);var a=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)}return e!==n&&e&&(t.child.flags|=8192),ql(t,t.updateQueue),vt(t),null;case 4:return Ss(),n===null&&pm(t.stateNode.containerInfo),vt(t),null;case 10:return gi(t.type),vt(t),null;case 19:if(Kt(Rt),i=t.memoizedState,i===null)return vt(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)eo(i,!1);else{if(wt!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(a=Cu(n),a!==null){for(t.flags|=128,eo(i,!1),n=a.updateQueue,t.updateQueue=n,ql(t,n),t.subtreeFlags=0,n=e,e=t.child;e!==null;)gv(e,n),e=e.sibling;return pt(Rt,Rt.current&1|2),t.child}n=n.sibling}i.tail!==null&&Tn()>Mu&&(t.flags|=128,r=!0,eo(i,!1),t.lanes=4194304)}else{if(!r)if(n=Cu(a),n!==null){if(t.flags|=128,r=!0,n=n.updateQueue,t.updateQueue=n,ql(t,n),eo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!tt)return vt(t),null}else 2*Tn()-i.renderingStartTime>Mu&&e!==536870912&&(t.flags|=128,r=!0,eo(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Tn(),t.sibling=null,n=Rt.current,pt(Rt,r?n&1|2:n&1),t):(vt(t),null);case 22:case 23:return ci(t),Zd(),r=t.memoizedState!==null,n!==null?n.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?e&536870912&&!(t.flags&128)&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),e=t.updateQueue,e!==null&&ql(t,e.retryQueue),e=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==e&&(t.flags|=2048),n!==null&&Kt(wa),null;case 24:return e=null,n!==null&&(e=n.memoizedState.cache),t.memoizedState.cache!==e&&(t.flags|=2048),gi(Bt),vt(t),null;case 25:return null;case 30:return null}throw Error(N(156,t.tag))}function Aw(n,t){switch(Gd(t),t.tag){case 1:return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return gi(Bt),Ss(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 26:case 27:case 5:return vu(t),null;case 13:if(ci(t),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(N(340));hl()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return Kt(Rt),null;case 4:return Ss(),null;case 10:return gi(t.type),null;case 22:case 23:return ci(t),Zd(),n!==null&&Kt(wa),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 24:return gi(Bt),null;case 25:return null;default:return null}}function g0(n,t){switch(Gd(t),t.tag){case 3:gi(Bt),Ss();break;case 26:case 27:case 5:vu(t);break;case 4:Ss();break;case 13:ci(t);break;case 19:Kt(Rt);break;case 10:gi(t.type);break;case 22:case 23:ci(t),Zd(),n!==null&&Kt(wa);break;case 24:gi(Bt)}}function vl(n,t){try{var e=t.updateQueue,r=e!==null?e.lastEffect:null;if(r!==null){var i=r.next;e=i;do{if((e.tag&n)===n){r=void 0;var a=e.create,s=e.inst;r=a(),s.destroy=r}e=e.next}while(e!==i)}}catch(o){ct(t,t.return,o)}}function na(n,t,e){try{var r=t.updateQueue,i=r!==null?r.lastEffect:null;if(i!==null){var a=i.next;r=a;do{if((r.tag&n)===n){var s=r.inst,o=s.destroy;if(o!==void 0){s.destroy=void 0,i=t;var u=e,c=o;try{c()}catch(h){ct(i,u,h)}}}r=r.next}while(r!==a)}}catch(h){ct(t,t.return,h)}}function y0(n){var t=n.updateQueue;if(t!==null){var e=n.stateNode;try{wv(t,e)}catch(r){ct(n,n.return,r)}}}function p0(n,t,e){e.props=ka(n.type,n.memoizedProps),e.state=n.memoizedState;try{e.componentWillUnmount()}catch(r){ct(n,t,r)}}function No(n,t){try{var e=n.ref;if(e!==null){switch(n.tag){case 26:case 27:case 5:var r=n.stateNode;break;case 30:r=n.stateNode;break;default:r=n.stateNode}typeof e=="function"?n.refCleanup=e(r):e.current=r}}catch(i){ct(n,t,i)}}function dn(n,t){var e=n.ref,r=n.refCleanup;if(e!==null)if(typeof r=="function")try{r()}catch(i){ct(n,t,i)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof e=="function")try{e(null)}catch(i){ct(n,t,i)}else e.current=null}function v0(n){var t=n.type,e=n.memoizedProps,r=n.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":e.autoFocus&&r.focus();break t;case"img":e.src?r.src=e.src:e.srcSet&&(r.srcset=e.srcSet)}}catch(i){ct(n,n.return,i)}}function vf(n,t,e){try{var r=n.stateNode;$w(r,n.type,e,t),r[le]=t}catch(i){ct(n,n.return,i)}}function S0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&sa(n.type)||n.tag===4}function Sf(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||S0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&sa(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function gh(n,t,e){var r=n.tag;if(r===5||r===6)n=n.stateNode,t?(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e).insertBefore(n,t):(t=e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,t.appendChild(n),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=Uc));else if(r!==4&&(r===27&&sa(n.type)&&(e=n.stateNode,t=null),n=n.child,n!==null))for(gh(n,t,e),n=n.sibling;n!==null;)gh(n,t,e),n=n.sibling}function zu(n,t,e){var r=n.tag;if(r===5||r===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(r!==4&&(r===27&&sa(n.type)&&(e=n.stateNode),n=n.child,n!==null))for(zu(n,t,e),n=n.sibling;n!==null;)zu(n,t,e),n=n.sibling}function T0(n){var t=n.stateNode,e=n.memoizedProps;try{for(var r=n.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Gt(t,r,e),t[Xt]=n,t[le]=e}catch(a){ct(n,n.return,a)}}var ri=!1,Dt=!1,Tf=!1,jg=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function Ew(n,t){if(n=n.containerInfo,Ah=$u,n=ov(n),Kd(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var r=e.getSelection&&e.getSelection();if(r&&r.rangeCount!==0){e=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{e.nodeType,a.nodeType}catch{e=null;break t}var s=0,o=-1,u=-1,c=0,h=0,g=n,d=null;e:for(;;){for(var m;g!==e||i!==0&&g.nodeType!==3||(o=s+i),g!==a||r!==0&&g.nodeType!==3||(u=s+r),g.nodeType===3&&(s+=g.nodeValue.length),(m=g.firstChild)!==null;)d=g,g=m;for(;;){if(g===n)break e;if(d===e&&++c===i&&(o=s),d===a&&++h===r&&(u=s),(m=g.nextSibling)!==null)break;g=d,d=g.parentNode}g=m}e=o===-1||u===-1?null:{start:o,end:u}}else e=null}e=e||{start:0,end:0}}else e=null;for(Eh={focusedElem:n,selectionRange:e},$u=!1,Lt=t;Lt!==null;)if(t=Lt,n=t.child,(t.subtreeFlags&1024)!==0&&n!==null)n.return=t,Lt=n;else for(;Lt!==null;){switch(t=Lt,a=t.alternate,n=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(n&1024&&a!==null){n=void 0,e=t,i=a.memoizedProps,a=a.memoizedState,r=e.stateNode;try{var A=ka(e.type,i,e.elementType===e.type);n=r.getSnapshotBeforeUpdate(A,a),r.__reactInternalSnapshotBeforeUpdate=n}catch(b){ct(e,e.return,b)}}break;case 3:if(n&1024){if(n=t.stateNode.containerInfo,e=n.nodeType,e===9)xh(n);else if(e===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":xh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(n&1024)throw Error(N(163))}if(n=t.sibling,n!==null){n.return=t.return,Lt=n;break}Lt=t.return}}function b0(n,t,e){var r=e.flags;switch(e.tag){case 0:case 11:case 15:Di(n,e),r&4&&vl(5,e);break;case 1:if(Di(n,e),r&4)if(n=e.stateNode,t===null)try{n.componentDidMount()}catch(s){ct(e,e.return,s)}else{var i=ka(e.type,t.memoizedProps);t=t.memoizedState;try{n.componentDidUpdate(i,t,n.__reactInternalSnapshotBeforeUpdate)}catch(s){ct(e,e.return,s)}}r&64&&y0(e),r&512&&No(e,e.return);break;case 3:if(Di(n,e),r&64&&(n=e.updateQueue,n!==null)){if(t=null,e.child!==null)switch(e.child.tag){case 27:case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}try{wv(n,t)}catch(s){ct(e,e.return,s)}}break;case 27:t===null&&r&4&&T0(e);case 26:case 5:Di(n,e),t===null&&r&4&&v0(e),r&512&&No(e,e.return);break;case 12:Di(n,e);break;case 13:Di(n,e),r&4&&E0(n,e),r&64&&(n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(e=Rw.bind(null,e),Qw(n,e))));break;case 22:if(r=e.memoizedState!==null||ri,!r){t=t!==null&&t.memoizedState!==null||Dt,i=ri;var a=Dt;ri=r,(Dt=t)&&!a?Oi(n,e,(e.subtreeFlags&8772)!==0):Di(n,e),ri=i,Dt=a}break;case 30:break;default:Di(n,e)}}function w0(n){var t=n.alternate;t!==null&&(n.alternate=null,w0(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&Md(t)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var dt=null,re=!1;function Bn(n,t,e){for(e=e.child;e!==null;)A0(n,t,e),e=e.sibling}function A0(n,t,e){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(ol,e)}catch{}switch(e.tag){case 26:Dt||dn(e,t),Bn(n,t,e),e.memoizedState?e.memoizedState.count--:e.stateNode&&(e=e.stateNode,e.parentNode.removeChild(e));break;case 27:Dt||dn(e,t);var r=dt,i=re;sa(e.type)&&(dt=e.stateNode,re=!1),Bn(n,t,e),Oo(e.stateNode),dt=r,re=i;break;case 5:Dt||dn(e,t);case 6:if(r=dt,i=re,dt=null,Bn(n,t,e),dt=r,re=i,dt!==null)if(re)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(e.stateNode)}catch(a){ct(e,t,a)}else try{dt.removeChild(e.stateNode)}catch(a){ct(e,t,a)}break;case 18:dt!==null&&(re?(n=dt,ry(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.stateNode),Zo(n)):ry(dt,e.stateNode));break;case 4:r=dt,i=re,dt=e.stateNode.containerInfo,re=!0,Bn(n,t,e),dt=r,re=i;break;case 0:case 11:case 14:case 15:Dt||na(2,e,t),Dt||na(4,e,t),Bn(n,t,e);break;case 1:Dt||(dn(e,t),r=e.stateNode,typeof r.componentWillUnmount=="function"&&p0(e,t,r)),Bn(n,t,e);break;case 21:Bn(n,t,e);break;case 22:Dt=(r=Dt)||e.memoizedState!==null,Bn(n,t,e),Dt=r;break;default:Bn(n,t,e)}}function E0(n,t){if(t.memoizedState===null&&(n=t.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Zo(n)}catch(e){ct(t,t.return,e)}}function Nw(n){switch(n.tag){case 13:case 19:var t=n.stateNode;return t===null&&(t=n.stateNode=new jg),t;case 22:return n=n.stateNode,t=n._retryCache,t===null&&(t=n._retryCache=new jg),t;default:throw Error(N(435,n.tag))}}function bf(n,t){var e=Nw(n);t.forEach(function(r){var i=zw.bind(null,n,r);e.has(r)||(e.add(r),r.then(i,i))})}function he(n,t){var e=t.deletions;if(e!==null)for(var r=0;r<e.length;r++){var i=e[r],a=n,s=t,o=s;t:for(;o!==null;){switch(o.tag){case 27:if(sa(o.type)){dt=o.stateNode,re=!1;break t}break;case 5:dt=o.stateNode,re=!1;break t;case 3:case 4:dt=o.stateNode.containerInfo,re=!0;break t}o=o.return}if(dt===null)throw Error(N(160));A0(a,s,i),dt=null,re=!1,a=i.alternate,a!==null&&(a.return=null),i.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)N0(t,n),t=t.sibling}var We=null;function N0(n,t){var e=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:he(t,n),de(n),r&4&&(na(3,n,n.return),vl(3,n),na(5,n,n.return));break;case 1:he(t,n),de(n),r&512&&(Dt||e===null||dn(e,e.return)),r&64&&ri&&(n=n.updateQueue,n!==null&&(r=n.callbacks,r!==null&&(e=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=e===null?r:e.concat(r))));break;case 26:var i=We;if(he(t,n),de(n),r&512&&(Dt||e===null||dn(e,e.return)),r&4){var a=e!==null?e.memoizedState:null;if(r=n.memoizedState,e===null)if(r===null)if(n.stateNode===null){t:{r=n.type,e=n.memoizedProps,i=i.ownerDocument||i;e:switch(r){case"title":a=i.getElementsByTagName("title")[0],(!a||a[cl]||a[Xt]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=i.createElement(r),i.head.insertBefore(a,i.querySelector("head > title"))),Gt(a,r,e),a[Xt]=n,Jt(a),r=a;break t;case"link":var s=ly("link","href",i).get(r+(e.href||""));if(s){for(var o=0;o<s.length;o++)if(a=s[o],a.getAttribute("href")===(e.href==null||e.href===""?null:e.href)&&a.getAttribute("rel")===(e.rel==null?null:e.rel)&&a.getAttribute("title")===(e.title==null?null:e.title)&&a.getAttribute("crossorigin")===(e.crossOrigin==null?null:e.crossOrigin)){s.splice(o,1);break e}}a=i.createElement(r),Gt(a,r,e),i.head.appendChild(a);break;case"meta":if(s=ly("meta","content",i).get(r+(e.content||""))){for(o=0;o<s.length;o++)if(a=s[o],a.getAttribute("content")===(e.content==null?null:""+e.content)&&a.getAttribute("name")===(e.name==null?null:e.name)&&a.getAttribute("property")===(e.property==null?null:e.property)&&a.getAttribute("http-equiv")===(e.httpEquiv==null?null:e.httpEquiv)&&a.getAttribute("charset")===(e.charSet==null?null:e.charSet)){s.splice(o,1);break e}}a=i.createElement(r),Gt(a,r,e),i.head.appendChild(a);break;default:throw Error(N(468,r))}a[Xt]=n,Jt(a),r=a}n.stateNode=r}else uy(i,n.type,n.stateNode);else n.stateNode=oy(i,r,n.memoizedProps);else a!==r?(a===null?e.stateNode!==null&&(e=e.stateNode,e.parentNode.removeChild(e)):a.count--,r===null?uy(i,n.type,n.stateNode):oy(i,r,n.memoizedProps)):r===null&&n.stateNode!==null&&vf(n,n.memoizedProps,e.memoizedProps)}break;case 27:he(t,n),de(n),r&512&&(Dt||e===null||dn(e,e.return)),e!==null&&r&4&&vf(n,n.memoizedProps,e.memoizedProps);break;case 5:if(he(t,n),de(n),r&512&&(Dt||e===null||dn(e,e.return)),n.flags&32){i=n.stateNode;try{bs(i,"")}catch(m){ct(n,n.return,m)}}r&4&&n.stateNode!=null&&(i=n.memoizedProps,vf(n,i,e!==null?e.memoizedProps:i)),r&1024&&(Tf=!0);break;case 6:if(he(t,n),de(n),r&4){if(n.stateNode===null)throw Error(N(162));r=n.memoizedProps,e=n.stateNode;try{e.nodeValue=r}catch(m){ct(n,n.return,m)}}break;case 3:if(lu=null,i=We,We=Ku(t.containerInfo),he(t,n),We=i,de(n),r&4&&e!==null&&e.memoizedState.isDehydrated)try{Zo(t.containerInfo)}catch(m){ct(n,n.return,m)}Tf&&(Tf=!1,x0(n));break;case 4:r=We,We=Ku(n.stateNode.containerInfo),he(t,n),de(n),We=r;break;case 12:he(t,n),de(n);break;case 13:he(t,n),de(n),n.child.flags&8192&&n.memoizedState!==null!=(e!==null&&e.memoizedState!==null)&&(mm=Tn()),r&4&&(r=n.updateQueue,r!==null&&(n.updateQueue=null,bf(n,r)));break;case 22:i=n.memoizedState!==null;var u=e!==null&&e.memoizedState!==null,c=ri,h=Dt;if(ri=c||i,Dt=h||u,he(t,n),Dt=h,ri=c,de(n),r&8192)t:for(t=n.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(e===null||u||ri||Dt||da(n)),e=null,t=n;;){if(t.tag===5||t.tag===26){if(e===null){u=e=t;try{if(a=u.stateNode,i)s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=u.stateNode;var g=u.memoizedProps.style,d=g!=null&&g.hasOwnProperty("display")?g.display:null;o.style.display=d==null||typeof d=="boolean"?"":(""+d).trim()}}catch(m){ct(u,u.return,m)}}}else if(t.tag===6){if(e===null){u=t;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(m){ct(u,u.return,m)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===n)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;e===t&&(e=null),t=t.return}e===t&&(e=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=n.updateQueue,r!==null&&(e=r.retryQueue,e!==null&&(r.retryQueue=null,bf(n,e))));break;case 19:he(t,n),de(n),r&4&&(r=n.updateQueue,r!==null&&(n.updateQueue=null,bf(n,r)));break;case 30:break;case 21:break;default:he(t,n),de(n)}}function de(n){var t=n.flags;if(t&2){try{for(var e,r=n.return;r!==null;){if(S0(r)){e=r;break}r=r.return}if(e==null)throw Error(N(160));switch(e.tag){case 27:var i=e.stateNode,a=Sf(n);zu(n,a,i);break;case 5:var s=e.stateNode;e.flags&32&&(bs(s,""),e.flags&=-33);var o=Sf(n);zu(n,o,s);break;case 3:case 4:var u=e.stateNode.containerInfo,c=Sf(n);gh(n,c,u);break;default:throw Error(N(161))}}catch(h){ct(n,n.return,h)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function x0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var t=n;x0(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),n=n.sibling}}function Di(n,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)b0(n,t.alternate,t),t=t.sibling}function da(n){for(n=n.child;n!==null;){var t=n;switch(t.tag){case 0:case 11:case 14:case 15:na(4,t,t.return),da(t);break;case 1:dn(t,t.return);var e=t.stateNode;typeof e.componentWillUnmount=="function"&&p0(t,t.return,e),da(t);break;case 27:Oo(t.stateNode);case 26:case 5:dn(t,t.return),da(t);break;case 22:t.memoizedState===null&&da(t);break;case 30:da(t);break;default:da(t)}n=n.sibling}}function Oi(n,t,e){for(e=e&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,i=n,a=t,s=a.flags;switch(a.tag){case 0:case 11:case 15:Oi(i,a,e),vl(4,a);break;case 1:if(Oi(i,a,e),r=a,i=r.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(c){ct(r,r.return,c)}if(r=a,i=r.updateQueue,i!==null){var o=r.stateNode;try{var u=i.shared.hiddenCallbacks;if(u!==null)for(i.shared.hiddenCallbacks=null,i=0;i<u.length;i++)bv(u[i],o)}catch(c){ct(r,r.return,c)}}e&&s&64&&y0(a),No(a,a.return);break;case 27:T0(a);case 26:case 5:Oi(i,a,e),e&&r===null&&s&4&&v0(a),No(a,a.return);break;case 12:Oi(i,a,e);break;case 13:Oi(i,a,e),e&&s&4&&E0(i,a);break;case 22:a.memoizedState===null&&Oi(i,a,e),No(a,a.return);break;case 30:break;default:Oi(i,a,e)}t=t.sibling}}function cm(n,t){var e=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==e&&(n!=null&&n.refCount++,e!=null&&ml(e))}function fm(n,t){n=null,t.alternate!==null&&(n=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==n&&(t.refCount++,n!=null&&ml(n))}function ln(n,t,e,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)D0(n,t,e,r),t=t.sibling}function D0(n,t,e,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ln(n,t,e,r),i&2048&&vl(9,t);break;case 1:ln(n,t,e,r);break;case 3:ln(n,t,e,r),i&2048&&(n=null,t.alternate!==null&&(n=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==n&&(t.refCount++,n!=null&&ml(n)));break;case 12:if(i&2048){ln(n,t,e,r),n=t.stateNode;try{var a=t.memoizedProps,s=a.id,o=a.onPostCommit;typeof o=="function"&&o(s,t.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(u){ct(t,t.return,u)}}else ln(n,t,e,r);break;case 13:ln(n,t,e,r);break;case 23:break;case 22:a=t.stateNode,s=t.alternate,t.memoizedState!==null?a._visibility&2?ln(n,t,e,r):xo(n,t):a._visibility&2?ln(n,t,e,r):(a._visibility|=2,ja(n,t,e,r,(t.subtreeFlags&10256)!==0)),i&2048&&cm(s,t);break;case 24:ln(n,t,e,r),i&2048&&fm(t.alternate,t);break;default:ln(n,t,e,r)}}function ja(n,t,e,r,i){for(i=i&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var a=n,s=t,o=e,u=r,c=s.flags;switch(s.tag){case 0:case 11:case 15:ja(a,s,o,u,i),vl(8,s);break;case 23:break;case 22:var h=s.stateNode;s.memoizedState!==null?h._visibility&2?ja(a,s,o,u,i):xo(a,s):(h._visibility|=2,ja(a,s,o,u,i)),i&&c&2048&&cm(s.alternate,s);break;case 24:ja(a,s,o,u,i),i&&c&2048&&fm(s.alternate,s);break;default:ja(a,s,o,u,i)}t=t.sibling}}function xo(n,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var e=n,r=t,i=r.flags;switch(r.tag){case 22:xo(e,r),i&2048&&cm(r.alternate,r);break;case 24:xo(e,r),i&2048&&fm(r.alternate,r);break;default:xo(e,r)}t=t.sibling}}var co=8192;function Ja(n){if(n.subtreeFlags&co)for(n=n.child;n!==null;)k0(n),n=n.sibling}function k0(n){switch(n.tag){case 26:Ja(n),n.flags&co&&n.memoizedState!==null&&cA(We,n.memoizedState,n.memoizedProps);break;case 5:Ja(n);break;case 3:case 4:var t=We;We=Ku(n.stateNode.containerInfo),Ja(n),We=t;break;case 22:n.memoizedState===null&&(t=n.alternate,t!==null&&t.memoizedState!==null?(t=co,co=16777216,Ja(n),co=t):Ja(n));break;default:Ja(n)}}function O0(n){var t=n.alternate;if(t!==null&&(n=t.child,n!==null)){t.child=null;do t=n.sibling,n.sibling=null,n=t;while(n!==null)}}function no(n){var t=n.deletions;if(n.flags&16){if(t!==null)for(var e=0;e<t.length;e++){var r=t[e];Lt=r,I0(r,n)}O0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)C0(n),n=n.sibling}function C0(n){switch(n.tag){case 0:case 11:case 15:no(n),n.flags&2048&&na(9,n,n.return);break;case 3:no(n);break;case 12:no(n);break;case 22:var t=n.stateNode;n.memoizedState!==null&&t._visibility&2&&(n.return===null||n.return.tag!==13)?(t._visibility&=-3,su(n)):no(n);break;default:no(n)}}function su(n){var t=n.deletions;if(n.flags&16){if(t!==null)for(var e=0;e<t.length;e++){var r=t[e];Lt=r,I0(r,n)}O0(n)}for(n=n.child;n!==null;){switch(t=n,t.tag){case 0:case 11:case 15:na(8,t,t.return),su(t);break;case 22:e=t.stateNode,e._visibility&2&&(e._visibility&=-3,su(t));break;default:su(t)}n=n.sibling}}function I0(n,t){for(;Lt!==null;){var e=Lt;switch(e.tag){case 0:case 11:case 15:na(8,e,t);break;case 23:case 22:if(e.memoizedState!==null&&e.memoizedState.cachePool!==null){var r=e.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ml(e.memoizedState.cache)}if(r=e.child,r!==null)r.return=e,Lt=r;else t:for(e=n;Lt!==null;){r=Lt;var i=r.sibling,a=r.return;if(w0(r),r===e){Lt=null;break t}if(i!==null){i.return=a,Lt=i;break t}Lt=a}}}var xw={getCacheForType:function(n){var t=Ft(Bt),e=t.data.get(n);return e===void 0&&(e=n(),t.data.set(n,e)),e}},Dw=typeof WeakMap=="function"?WeakMap:Map,it=0,ft=null,Y=null,Q=0,rt=0,me=null,Ki=!1,Ys=!1,hm=!1,bi=0,wt=0,ra=0,Aa=0,dm=0,Pe=0,xs=0,Do=null,ie=null,yh=!1,mm=0,Mu=1/0,Uu=null,Yi=null,$t=0,Xi=null,Ds=null,ys=0,ph=0,vh=null,B0=null,ko=0,Sh=null;function Te(){if(it&2&&Q!==0)return Q&-Q;if(q.T!==null){var n=ws;return n!==0?n:ym()}return Hp()}function R0(){Pe===0&&(Pe=!(Q&536870912)||tt?qp():536870912);var n=Ye.current;return n!==null&&(n.flags|=32),Pe}function be(n,t,e){(n===ft&&(rt===2||rt===9)||n.cancelPendingCommit!==null)&&(ks(n,0),Vi(n,Q,Pe,!1)),ul(n,e),(!(it&2)||n!==ft)&&(n===ft&&(!(it&2)&&(Aa|=e),wt===4&&Vi(n,Q,Pe,!1)),On(n))}function z0(n,t,e){if(it&6)throw Error(N(327));var r=!e&&(t&124)===0&&(t&n.expiredLanes)===0||ll(n,t),i=r?Cw(n,t):wf(n,t,!0),a=r;do{if(i===0){Ys&&!r&&Vi(n,t,0,!1);break}else{if(e=n.current.alternate,a&&!kw(e)){i=wf(n,t,!1),a=!1;continue}if(i===2){if(a=t,n.errorRecoveryDisabledLanes&a)var s=0;else s=n.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){t=s;t:{var o=n;i=Do;var u=o.current.memoizedState.isDehydrated;if(u&&(ks(o,s).flags|=256),s=wf(o,s,!1),s!==2){if(hm&&!u){o.errorRecoveryDisabledLanes|=a,Aa|=a,i=4;break t}a=ie,ie=i,a!==null&&(ie===null?ie=a:ie.push.apply(ie,a))}i=s}if(a=!1,i!==2)continue}}if(i===1){ks(n,0),Vi(n,t,0,!0);break}t:{switch(r=n,a=i,a){case 0:case 1:throw Error(N(345));case 4:if((t&4194048)!==t)break;case 6:Vi(r,t,Pe,!Ki);break t;case 2:ie=null;break;case 3:case 5:break;default:throw Error(N(329))}if((t&62914560)===t&&(i=mm+300-Tn(),10<i)){if(Vi(r,t,Pe,!Ki),Ac(r,0,!0)!==0)break t;r.timeoutHandle=W0(Gg.bind(null,r,e,ie,Uu,yh,t,Pe,Aa,xs,Ki,a,2,-0,0),i);break t}Gg(r,e,ie,Uu,yh,t,Pe,Aa,xs,Ki,a,0,-0,0)}}break}while(!0);On(n)}function Gg(n,t,e,r,i,a,s,o,u,c,h,g,d,m){if(n.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(Go={stylesheets:null,count:0,unsuspend:uA},k0(t),g=fA(),g!==null)){n.cancelPendingCommit=g(Xg.bind(null,n,t,a,e,r,i,s,o,u,h,1,d,m)),Vi(n,a,s,!c);return}Xg(n,t,a,e,r,i,s,o,u)}function kw(n){for(var t=n;;){var e=t.tag;if((e===0||e===11||e===15)&&t.flags&16384&&(e=t.updateQueue,e!==null&&(e=e.stores,e!==null)))for(var r=0;r<e.length;r++){var i=e[r],a=i.getSnapshot;i=i.value;try{if(!we(a(),i))return!1}catch{return!1}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vi(n,t,e,r){t&=~dm,t&=~Aa,n.suspendedLanes|=t,n.pingedLanes&=~t,r&&(n.warmLanes|=t),r=n.expirationTimes;for(var i=t;0<i;){var a=31-Se(i),s=1<<a;r[a]=-1,i&=~s}e!==0&&Kp(n,e,t)}function Rc(){return it&6?!0:(Sl(0),!1)}function gm(){if(Y!==null){if(rt===0)var n=Y.return;else n=Y,ui=Ua=null,em(n),gs=null,Ho=0,n=Y;for(;n!==null;)g0(n.alternate,n),n=n.return;Y=null}}function ks(n,t){var e=n.timeoutHandle;e!==-1&&(n.timeoutHandle=-1,Gw(e)),e=n.cancelPendingCommit,e!==null&&(n.cancelPendingCommit=null,e()),gm(),ft=n,Y=e=mi(n.current,null),Q=t,rt=0,me=null,Ki=!1,Ys=ll(n,t),hm=!1,xs=Pe=dm=Aa=ra=wt=0,ie=Do=null,yh=!1,t&8&&(t|=t&32);var r=n.entangledLanes;if(r!==0)for(n=n.entanglements,r&=t;0<r;){var i=31-Se(r),a=1<<i;t|=n[i],r&=~a}return bi=t,Dc(),e}function M0(n,t){H=null,q.H=Ou,t===gl||t===Oc?(t=Eg(),rt=3):t===Sv?(t=Eg(),rt=4):rt=t===u0?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,me=t,Y===null&&(wt=1,Bu(n,qe(t,n.current)))}function U0(){var n=q.H;return q.H=Ou,n===null?Ou:n}function L0(){var n=q.A;return q.A=xw,n}function Th(){wt=4,Ki||(Q&4194048)!==Q&&Ye.current!==null||(Ys=!0),!(ra&134217727)&&!(Aa&134217727)||ft===null||Vi(ft,Q,Pe,!1)}function wf(n,t,e){var r=it;it|=2;var i=U0(),a=L0();(ft!==n||Q!==t)&&(Uu=null,ks(n,t)),t=!1;var s=wt;t:do try{if(rt!==0&&Y!==null){var o=Y,u=me;switch(rt){case 8:gm(),s=6;break t;case 3:case 2:case 9:case 6:Ye.current===null&&(t=!0);var c=rt;if(rt=0,me=null,ss(n,o,u,c),e&&Ys){s=0;break t}break;default:c=rt,rt=0,me=null,ss(n,o,u,c)}}Ow(),s=wt;break}catch(h){M0(n,h)}while(!0);return t&&n.shellSuspendCounter++,ui=Ua=null,it=r,q.H=i,q.A=a,Y===null&&(ft=null,Q=0,Dc()),s}function Ow(){for(;Y!==null;)J0(Y)}function Cw(n,t){var e=it;it|=2;var r=U0(),i=L0();ft!==n||Q!==t?(Uu=null,Mu=Tn()+500,ks(n,t)):Ys=ll(n,t);t:do try{if(rt!==0&&Y!==null){t=Y;var a=me;e:switch(rt){case 1:rt=0,me=null,ss(n,t,a,1);break;case 2:case 9:if(Ag(a)){rt=0,me=null,Yg(t);break}t=function(){rt!==2&&rt!==9||ft!==n||(rt=7),On(n)},a.then(t,t);break t;case 3:rt=7;break t;case 4:rt=5;break t;case 7:Ag(a)?(rt=0,me=null,Yg(t)):(rt=0,me=null,ss(n,t,a,7));break;case 5:var s=null;switch(Y.tag){case 26:s=Y.memoizedState;case 5:case 27:var o=Y;if(!s||rS(s)){rt=0,me=null;var u=o.sibling;if(u!==null)Y=u;else{var c=o.return;c!==null?(Y=c,zc(c)):Y=null}break e}}rt=0,me=null,ss(n,t,a,5);break;case 6:rt=0,me=null,ss(n,t,a,6);break;case 8:gm(),wt=6;break t;default:throw Error(N(462))}}Iw();break}catch(h){M0(n,h)}while(!0);return ui=Ua=null,q.H=r,q.A=i,it=e,Y!==null?0:(ft=null,Q=0,Dc(),wt)}function Iw(){for(;Y!==null&&!WT();)J0(Y)}function J0(n){var t=m0(n.alternate,n,bi);n.memoizedProps=n.pendingProps,t===null?zc(n):Y=t}function Yg(n){var t=n,e=t.alternate;switch(t.tag){case 15:case 0:t=Pg(e,t,t.pendingProps,t.type,void 0,Q);break;case 11:t=Pg(e,t,t.pendingProps,t.type.render,t.ref,Q);break;case 5:em(t);default:g0(e,t),t=Y=gv(t,bi),t=m0(e,t,bi)}n.memoizedProps=n.pendingProps,t===null?zc(n):Y=t}function ss(n,t,e,r){ui=Ua=null,em(t),gs=null,Ho=0;var i=t.return;try{if(Tw(n,i,t,e,Q)){wt=1,Bu(n,qe(e,n.current)),Y=null;return}}catch(a){if(i!==null)throw Y=i,a;wt=1,Bu(n,qe(e,n.current)),Y=null;return}t.flags&32768?(tt||r===1?n=!0:Ys||Q&536870912?n=!1:(Ki=n=!0,(r===2||r===9||r===3||r===6)&&(r=Ye.current,r!==null&&r.tag===13&&(r.flags|=16384))),q0(t,n)):zc(t)}function zc(n){var t=n;do{if(t.flags&32768){q0(t,Ki);return}n=t.return;var e=ww(t.alternate,t,bi);if(e!==null){Y=e;return}if(t=t.sibling,t!==null){Y=t;return}Y=t=n}while(t!==null);wt===0&&(wt=5)}function q0(n,t){do{var e=Aw(n.alternate,n);if(e!==null){e.flags&=32767,Y=e;return}if(e=n.return,e!==null&&(e.flags|=32768,e.subtreeFlags=0,e.deletions=null),!t&&(n=n.sibling,n!==null)){Y=n;return}Y=n=e}while(n!==null);wt=6,Y=null}function Xg(n,t,e,r,i,a,s,o,u){n.cancelPendingCommit=null;do Mc();while($t!==0);if(it&6)throw Error(N(327));if(t!==null){if(t===n.current)throw Error(N(177));if(a=t.lanes|t.childLanes,a|=Vd,ub(n,e,a,s,o,u),n===ft&&(Y=ft=null,Q=0),Ds=t,Xi=n,ys=e,ph=a,vh=i,B0=r,t.subtreeFlags&10256||t.flags&10256?(n.callbackNode=null,n.callbackPriority=0,Mw(Su,function(){return $0(),null})):(n.callbackNode=null,n.callbackPriority=0),r=(t.flags&13878)!==0,t.subtreeFlags&13878||r){r=q.T,q.T=null,i=et.p,et.p=2,s=it,it|=4;try{Ew(n,t,e)}finally{it=s,et.p=i,q.T=r}}$t=1,P0(),K0(),V0()}}function P0(){if($t===1){$t=0;var n=Xi,t=Ds,e=(t.flags&13878)!==0;if(t.subtreeFlags&13878||e){e=q.T,q.T=null;var r=et.p;et.p=2;var i=it;it|=4;try{N0(t,n);var a=Eh,s=ov(n.containerInfo),o=a.focusedElem,u=a.selectionRange;if(s!==o&&o&&o.ownerDocument&&sv(o.ownerDocument.documentElement,o)){if(u!==null&&Kd(o)){var c=u.start,h=u.end;if(h===void 0&&(h=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(h,o.value.length);else{var g=o.ownerDocument||document,d=g&&g.defaultView||window;if(d.getSelection){var m=d.getSelection(),A=o.textContent.length,b=Math.min(u.start,A),x=u.end===void 0?b:Math.min(u.end,A);!m.extend&&b>x&&(s=x,x=b,b=s);var p=gg(o,b),y=gg(o,x);if(p&&y&&(m.rangeCount!==1||m.anchorNode!==p.node||m.anchorOffset!==p.offset||m.focusNode!==y.node||m.focusOffset!==y.offset)){var v=g.createRange();v.setStart(p.node,p.offset),m.removeAllRanges(),b>x?(m.addRange(v),m.extend(y.node,y.offset)):(v.setEnd(y.node,y.offset),m.addRange(v))}}}}for(g=[],m=o;m=m.parentNode;)m.nodeType===1&&g.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<g.length;o++){var w=g[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}$u=!!Ah,Eh=Ah=null}finally{it=i,et.p=r,q.T=e}}n.current=t,$t=2}}function K0(){if($t===2){$t=0;var n=Xi,t=Ds,e=(t.flags&8772)!==0;if(t.subtreeFlags&8772||e){e=q.T,q.T=null;var r=et.p;et.p=2;var i=it;it|=4;try{b0(n,t.alternate,t)}finally{it=i,et.p=r,q.T=e}}$t=3}}function V0(){if($t===4||$t===3){$t=0,tb();var n=Xi,t=Ds,e=ys,r=B0;t.subtreeFlags&10256||t.flags&10256?$t=5:($t=0,Ds=Xi=null,H0(n,n.pendingLanes));var i=n.pendingLanes;if(i===0&&(Yi=null),zd(e),t=t.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(ol,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=q.T,i=et.p,et.p=2,q.T=null;try{for(var a=n.onRecoverableError,s=0;s<r.length;s++){var o=r[s];a(o.value,{componentStack:o.stack})}}finally{q.T=t,et.p=i}}ys&3&&Mc(),On(n),i=n.pendingLanes,e&4194090&&i&42?n===Sh?ko++:(ko=0,Sh=n):ko=0,Sl(0)}}function H0(n,t){(n.pooledCacheLanes&=t)===0&&(t=n.pooledCache,t!=null&&(n.pooledCache=null,ml(t)))}function Mc(n){return P0(),K0(),V0(),$0()}function $0(){if($t!==5)return!1;var n=Xi,t=ph;ph=0;var e=zd(ys),r=q.T,i=et.p;try{et.p=32>e?32:e,q.T=null,e=vh,vh=null;var a=Xi,s=ys;if($t=0,Ds=Xi=null,ys=0,it&6)throw Error(N(331));var o=it;if(it|=4,C0(a.current),D0(a,a.current,s,e),it=o,Sl(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(ol,a)}catch{}return!0}finally{et.p=i,q.T=r,H0(n,t)}}function Fg(n,t,e){t=qe(e,t),t=hh(n.stateNode,t,2),n=Gi(n,t,2),n!==null&&(ul(n,2),On(n))}function ct(n,t,e){if(n.tag===3)Fg(n,n,e);else for(;t!==null;){if(t.tag===3){Fg(t,n,e);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yi===null||!Yi.has(r))){n=qe(e,n),e=o0(2),r=Gi(t,e,2),r!==null&&(l0(e,r,t,n),ul(r,2),On(r));break}}t=t.return}}function Af(n,t,e){var r=n.pingCache;if(r===null){r=n.pingCache=new Dw;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(e)||(hm=!0,i.add(e),n=Bw.bind(null,n,t,e),t.then(n,n))}function Bw(n,t,e){var r=n.pingCache;r!==null&&r.delete(t),n.pingedLanes|=n.suspendedLanes&e,n.warmLanes&=~e,ft===n&&(Q&e)===e&&(wt===4||wt===3&&(Q&62914560)===Q&&300>Tn()-mm?!(it&2)&&ks(n,0):dm|=e,xs===Q&&(xs=0)),On(n)}function j0(n,t){t===0&&(t=Pp()),n=Gs(n,t),n!==null&&(ul(n,t),On(n))}function Rw(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),j0(n,e)}function zw(n,t){var e=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(e=i.retryLane);break;case 19:r=n.stateNode;break;case 22:r=n.stateNode._retryCache;break;default:throw Error(N(314))}r!==null&&r.delete(t),j0(n,e)}function Mw(n,t){return Bd(n,t)}var Lu=null,Ga=null,bh=!1,Ju=!1,Ef=!1,Ea=0;function On(n){n!==Ga&&n.next===null&&(Ga===null?Lu=Ga=n:Ga=Ga.next=n),Ju=!0,bh||(bh=!0,Lw())}function Sl(n,t){if(!Ef&&Ju){Ef=!0;do for(var e=!1,r=Lu;r!==null;){if(n!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var s=r.suspendedLanes,o=r.pingedLanes;a=(1<<31-Se(42|n)+1)-1,a&=i&~(s&~o),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(e=!0,Zg(r,a))}else a=Q,a=Ac(r,r===ft?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||ll(r,a)||(e=!0,Zg(r,a));r=r.next}while(e);Ef=!1}}function Uw(){G0()}function G0(){Ju=bh=!1;var n=0;Ea!==0&&(jw()&&(n=Ea),Ea=0);for(var t=Tn(),e=null,r=Lu;r!==null;){var i=r.next,a=Y0(r,t);a===0?(r.next=null,e===null?Lu=i:e.next=i,i===null&&(Ga=e)):(e=r,(n!==0||a&3)&&(Ju=!0)),r=i}Sl(n)}function Y0(n,t){for(var e=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,a=n.pendingLanes&-62914561;0<a;){var s=31-Se(a),o=1<<s,u=i[s];u===-1?(!(o&e)||o&r)&&(i[s]=lb(o,t)):u<=t&&(n.expiredLanes|=o),a&=~o}if(t=ft,e=Q,e=Ac(n,n===t?e:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),r=n.callbackNode,e===0||n===t&&(rt===2||rt===9)||n.cancelPendingCommit!==null)return r!==null&&r!==null&&Fc(r),n.callbackNode=null,n.callbackPriority=0;if(!(e&3)||ll(n,e)){if(t=e&-e,t===n.callbackPriority)return t;switch(r!==null&&Fc(r),zd(e)){case 2:case 8:e=Lp;break;case 32:e=Su;break;case 268435456:e=Jp;break;default:e=Su}return r=X0.bind(null,n),e=Bd(e,r),n.callbackPriority=t,n.callbackNode=e,t}return r!==null&&r!==null&&Fc(r),n.callbackPriority=2,n.callbackNode=null,2}function X0(n,t){if($t!==0&&$t!==5)return n.callbackNode=null,n.callbackPriority=0,null;var e=n.callbackNode;if(Mc()&&n.callbackNode!==e)return null;var r=Q;return r=Ac(n,n===ft?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),r===0?null:(z0(n,r,t),Y0(n,Tn()),n.callbackNode!=null&&n.callbackNode===e?X0.bind(null,n):null)}function Zg(n,t){if(Mc())return null;z0(n,t,!0)}function Lw(){Yw(function(){it&6?Bd(Up,Uw):G0()})}function ym(){return Ea===0&&(Ea=qp()),Ea}function Qg(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:_l(""+n)}function _g(n,t){var e=t.ownerDocument.createElement("input");return e.name=t.name,e.value=t.value,n.id&&e.setAttribute("form",n.id),t.parentNode.insertBefore(e,t),n=new FormData(n),e.parentNode.removeChild(e),n}function Jw(n,t,e,r,i){if(t==="submit"&&e&&e.stateNode===i){var a=Qg((i[le]||null).action),s=r.submitter;s&&(t=(t=s[le]||null)?Qg(t.formAction):s.getAttribute("formAction"),t!==null&&(a=t,s=null));var o=new Ec("action","action",null,r,i);n.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Ea!==0){var u=s?_g(i,s):new FormData(i);ch(e,{pending:!0,data:u,method:i.method,action:a},null,u)}}else typeof a=="function"&&(o.preventDefault(),u=s?_g(i,s):new FormData(i),ch(e,{pending:!0,data:u,method:i.method,action:a},a,u))},currentTarget:i}]})}}for(var Nf=0;Nf<_f.length;Nf++){var xf=_f[Nf],qw=xf.toLowerCase(),Pw=xf[0].toUpperCase()+xf.slice(1);sn(qw,"on"+Pw)}sn(uv,"onAnimationEnd");sn(cv,"onAnimationIteration");sn(fv,"onAnimationStart");sn("dblclick","onDoubleClick");sn("focusin","onFocus");sn("focusout","onBlur");sn(rw,"onTransitionRun");sn(iw,"onTransitionStart");sn(aw,"onTransitionCancel");sn(hv,"onTransitionEnd");Ts("onMouseEnter",["mouseout","mouseover"]);Ts("onMouseLeave",["mouseout","mouseover"]);Ts("onPointerEnter",["pointerout","pointerover"]);Ts("onPointerLeave",["pointerout","pointerover"]);Ra("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ra("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ra("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ra("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ra("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ra("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($o));function F0(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var r=n[e],i=r.event;r=r.listeners;t:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],u=o.instance,c=o.currentTarget;if(o=o.listener,u!==a&&i.isPropagationStopped())break t;a=o,i.currentTarget=c;try{a(i)}catch(h){Iu(h)}i.currentTarget=null,a=u}else for(s=0;s<r.length;s++){if(o=r[s],u=o.instance,c=o.currentTarget,o=o.listener,u!==a&&i.isPropagationStopped())break t;a=o,i.currentTarget=c;try{a(i)}catch(h){Iu(h)}i.currentTarget=null,a=u}}}}function G(n,t){var e=t[jf];e===void 0&&(e=t[jf]=new Set);var r=n+"__bubble";e.has(r)||(Z0(t,n,2,!1),e.add(r))}function Df(n,t,e){var r=0;t&&(r|=4),Z0(e,n,r,t)}var Pl="_reactListening"+Math.random().toString(36).slice(2);function pm(n){if(!n[Pl]){n[Pl]=!0,$p.forEach(function(e){e!=="selectionchange"&&(Kw.has(e)||Df(e,!1,n),Df(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[Pl]||(t[Pl]=!0,Df("selectionchange",!1,t))}}function Z0(n,t,e,r){switch(lS(t)){case 2:var i=mA;break;case 8:i=gA;break;default:i=bm}e=i.bind(null,t,e,n),i=void 0,!Ff||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(t,e,{capture:!0,passive:i}):n.addEventListener(t,e,!0):i!==void 0?n.addEventListener(t,e,{passive:i}):n.addEventListener(t,e,!1)}function kf(n,t,e,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)t:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;o!==null;){if(s=Qa(o),s===null)return;if(u=s.tag,u===5||u===6||u===26||u===27){r=a=s;continue t}o=o.parentNode}}r=r.return}_p(function(){var c=a,h=Ld(e),g=[];t:{var d=dv.get(n);if(d!==void 0){var m=Ec,A=n;switch(n){case"keypress":if(tu(e)===0)break t;case"keydown":case"keyup":m=Mb;break;case"focusin":A="focus",m=rf;break;case"focusout":A="blur",m=rf;break;case"beforeblur":case"afterblur":m=rf;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=ag;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Ab;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Jb;break;case uv:case cv:case fv:m=xb;break;case hv:m=Pb;break;case"scroll":case"scrollend":m=bb;break;case"wheel":m=Vb;break;case"copy":case"cut":case"paste":m=kb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=og;break;case"toggle":case"beforetoggle":m=$b}var b=(t&4)!==0,x=!b&&(n==="scroll"||n==="scrollend"),p=b?d!==null?d+"Capture":null:d;b=[];for(var y=c,v;y!==null;){var w=y;if(v=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||v===null||p===null||(w=Jo(y,p),w!=null&&b.push(jo(y,w,v))),x)break;y=y.return}0<b.length&&(d=new m(d,A,null,e,h),g.push({event:d,listeners:b}))}}if(!(t&7)){t:{if(d=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",d&&e!==Xf&&(A=e.relatedTarget||e.fromElement)&&(Qa(A)||A[$s]))break t;if((m||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,m?(A=e.relatedTarget||e.toElement,m=c,A=A?Qa(A):null,A!==null&&(x=sl(A),b=A.tag,A!==x||b!==5&&b!==27&&b!==6)&&(A=null)):(m=null,A=c),m!==A)){if(b=ag,w="onMouseLeave",p="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(b=og,w="onPointerLeave",p="onPointerEnter",y="pointer"),x=m==null?d:uo(m),v=A==null?d:uo(A),d=new b(w,y+"leave",m,e,h),d.target=x,d.relatedTarget=v,w=null,Qa(h)===c&&(b=new b(p,y+"enter",A,e,h),b.target=v,b.relatedTarget=x,w=b),x=w,m&&A)e:{for(b=m,p=A,y=0,v=b;v;v=qa(v))y++;for(v=0,w=p;w;w=qa(w))v++;for(;0<y-v;)b=qa(b),y--;for(;0<v-y;)p=qa(p),v--;for(;y--;){if(b===p||p!==null&&b===p.alternate)break e;b=qa(b),p=qa(p)}b=null}else b=null;m!==null&&Wg(g,d,m,b,!1),A!==null&&x!==null&&Wg(g,x,A,b,!0)}}t:{if(d=c?uo(c):window,m=d.nodeName&&d.nodeName.toLowerCase(),m==="select"||m==="input"&&d.type==="file")var O=fg;else if(cg(d))if(iv)O=tw;else{O=_b;var I=Qb}else m=d.nodeName,!m||m.toLowerCase()!=="input"||d.type!=="checkbox"&&d.type!=="radio"?c&&Ud(c.elementType)&&(O=fg):O=Wb;if(O&&(O=O(n,c))){rv(g,O,e,h);break t}I&&I(n,d,c),n==="focusout"&&c&&d.type==="number"&&c.memoizedProps.value!=null&&Yf(d,"number",d.value)}switch(I=c?uo(c):window,n){case"focusin":(cg(I)||I.contentEditable==="true")&&(ts=I,Zf=c,vo=null);break;case"focusout":vo=Zf=ts=null;break;case"mousedown":Qf=!0;break;case"contextmenu":case"mouseup":case"dragend":Qf=!1,yg(g,e,h);break;case"selectionchange":if(nw)break;case"keydown":case"keyup":yg(g,e,h)}var C;if(Pd)t:{switch(n){case"compositionstart":var R="onCompositionStart";break t;case"compositionend":R="onCompositionEnd";break t;case"compositionupdate":R="onCompositionUpdate";break t}R=void 0}else Wa?ev(n,e)&&(R="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(R="onCompositionStart");R&&(tv&&e.locale!=="ko"&&(Wa||R!=="onCompositionStart"?R==="onCompositionEnd"&&Wa&&(C=Wp()):(Pi=h,Jd="value"in Pi?Pi.value:Pi.textContent,Wa=!0)),I=qu(c,R),0<I.length&&(R=new sg(R,n,null,e,h),g.push({event:R,listeners:I}),C?R.data=C:(C=nv(e),C!==null&&(R.data=C)))),(C=Gb?Yb(n,e):Xb(n,e))&&(R=qu(c,"onBeforeInput"),0<R.length&&(I=new sg("onBeforeInput","beforeinput",null,e,h),g.push({event:I,listeners:R}),I.data=C)),Jw(g,n,c,e,h)}F0(g,t)})}function jo(n,t,e){return{instance:n,listener:t,currentTarget:e}}function qu(n,t){for(var e=t+"Capture",r=[];n!==null;){var i=n,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=Jo(n,e),i!=null&&r.unshift(jo(n,i,a)),i=Jo(n,t),i!=null&&r.push(jo(n,i,a))),n.tag===3)return r;n=n.return}return[]}function qa(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Wg(n,t,e,r,i){for(var a=t._reactName,s=[];e!==null&&e!==r;){var o=e,u=o.alternate,c=o.stateNode;if(o=o.tag,u!==null&&u===r)break;o!==5&&o!==26&&o!==27||c===null||(u=c,i?(c=Jo(e,a),c!=null&&s.unshift(jo(e,c,u))):i||(c=Jo(e,a),c!=null&&s.push(jo(e,c,u)))),e=e.return}s.length!==0&&n.push({event:t,listeners:s})}var Vw=/\r\n?/g,Hw=/\u0000|\uFFFD/g;function ty(n){return(typeof n=="string"?n:""+n).replace(Vw,`
`).replace(Hw,"")}function Q0(n,t){return t=ty(t),ty(n)===t}function Uc(){}function at(n,t,e,r,i,a){switch(e){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||bs(n,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&bs(n,""+r);break;case"className":Rl(n,"class",r);break;case"tabIndex":Rl(n,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Rl(n,e,r);break;case"style":Qp(n,r,a);break;case"data":if(t!=="object"){Rl(n,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||e!=="href")){n.removeAttribute(e);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){n.removeAttribute(e);break}r=_l(""+r),n.setAttribute(e,r);break;case"action":case"formAction":if(typeof r=="function"){n.setAttribute(e,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(e==="formAction"?(t!=="input"&&at(n,t,"name",i.name,i,null),at(n,t,"formEncType",i.formEncType,i,null),at(n,t,"formMethod",i.formMethod,i,null),at(n,t,"formTarget",i.formTarget,i,null)):(at(n,t,"encType",i.encType,i,null),at(n,t,"method",i.method,i,null),at(n,t,"target",i.target,i,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){n.removeAttribute(e);break}r=_l(""+r),n.setAttribute(e,r);break;case"onClick":r!=null&&(n.onclick=Uc);break;case"onScroll":r!=null&&G("scroll",n);break;case"onScrollEnd":r!=null&&G("scrollend",n);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(N(61));if(e=r.__html,e!=null){if(i.children!=null)throw Error(N(60));n.innerHTML=e}}break;case"multiple":n.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":n.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){n.removeAttribute("xlink:href");break}e=_l(""+r),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?n.setAttribute(e,""+r):n.removeAttribute(e);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?n.setAttribute(e,""):n.removeAttribute(e);break;case"capture":case"download":r===!0?n.setAttribute(e,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?n.setAttribute(e,r):n.removeAttribute(e);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?n.setAttribute(e,r):n.removeAttribute(e);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?n.removeAttribute(e):n.setAttribute(e,r);break;case"popover":G("beforetoggle",n),G("toggle",n),Ql(n,"popover",r);break;case"xlinkActuate":Cn(n,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Cn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Cn(n,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Cn(n,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Cn(n,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Cn(n,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Cn(n,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Cn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Cn(n,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Ql(n,"is",r);break;case"innerText":case"textContent":break;default:(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(e=Sb.get(e)||e,Ql(n,e,r))}}function wh(n,t,e,r,i,a){switch(e){case"style":Qp(n,r,a);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(N(61));if(e=r.__html,e!=null){if(i.children!=null)throw Error(N(60));n.innerHTML=e}}break;case"children":typeof r=="string"?bs(n,r):(typeof r=="number"||typeof r=="bigint")&&bs(n,""+r);break;case"onScroll":r!=null&&G("scroll",n);break;case"onScrollEnd":r!=null&&G("scrollend",n);break;case"onClick":r!=null&&(n.onclick=Uc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jp.hasOwnProperty(e))t:{if(e[0]==="o"&&e[1]==="n"&&(i=e.endsWith("Capture"),t=e.slice(2,i?e.length-7:void 0),a=n[le]||null,a=a!=null?a[e]:null,typeof a=="function"&&n.removeEventListener(t,a,i),typeof r=="function")){typeof a!="function"&&a!==null&&(e in n?n[e]=null:n.hasAttribute(e)&&n.removeAttribute(e)),n.addEventListener(t,r,i);break t}e in n?n[e]=r:r===!0?n.setAttribute(e,""):Ql(n,e,r)}}}function Gt(n,t,e){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":G("error",n),G("load",n);var r=!1,i=!1,a;for(a in e)if(e.hasOwnProperty(a)){var s=e[a];if(s!=null)switch(a){case"src":r=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(N(137,t));default:at(n,t,a,s,e,null)}}i&&at(n,t,"srcSet",e.srcSet,e,null),r&&at(n,t,"src",e.src,e,null);return;case"input":G("invalid",n);var o=a=s=i=null,u=null,c=null;for(r in e)if(e.hasOwnProperty(r)){var h=e[r];if(h!=null)switch(r){case"name":i=h;break;case"type":s=h;break;case"checked":u=h;break;case"defaultChecked":c=h;break;case"value":a=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(N(137,t));break;default:at(n,t,r,h,e,null)}}Xp(n,a,o,u,c,s,i,!1),Tu(n);return;case"select":G("invalid",n),r=s=a=null;for(i in e)if(e.hasOwnProperty(i)&&(o=e[i],o!=null))switch(i){case"value":a=o;break;case"defaultValue":s=o;break;case"multiple":r=o;default:at(n,t,i,o,e,null)}t=a,e=s,n.multiple=!!r,t!=null?cs(n,!!r,t,!1):e!=null&&cs(n,!!r,e,!0);return;case"textarea":G("invalid",n),a=i=r=null;for(s in e)if(e.hasOwnProperty(s)&&(o=e[s],o!=null))switch(s){case"value":r=o;break;case"defaultValue":i=o;break;case"children":a=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(N(91));break;default:at(n,t,s,o,e,null)}Zp(n,r,i,a),Tu(n);return;case"option":for(u in e)if(e.hasOwnProperty(u)&&(r=e[u],r!=null))switch(u){case"selected":n.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:at(n,t,u,r,e,null)}return;case"dialog":G("beforetoggle",n),G("toggle",n),G("cancel",n),G("close",n);break;case"iframe":case"object":G("load",n);break;case"video":case"audio":for(r=0;r<$o.length;r++)G($o[r],n);break;case"image":G("error",n),G("load",n);break;case"details":G("toggle",n);break;case"embed":case"source":case"link":G("error",n),G("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in e)if(e.hasOwnProperty(c)&&(r=e[c],r!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(N(137,t));default:at(n,t,c,r,e,null)}return;default:if(Ud(t)){for(h in e)e.hasOwnProperty(h)&&(r=e[h],r!==void 0&&wh(n,t,h,r,e,void 0));return}}for(o in e)e.hasOwnProperty(o)&&(r=e[o],r!=null&&at(n,t,o,r,e,null))}function $w(n,t,e,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,s=null,o=null,u=null,c=null,h=null;for(m in e){var g=e[m];if(e.hasOwnProperty(m)&&g!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":u=g;default:r.hasOwnProperty(m)||at(n,t,m,null,r,g)}}for(var d in r){var m=r[d];if(g=e[d],r.hasOwnProperty(d)&&(m!=null||g!=null))switch(d){case"type":a=m;break;case"name":i=m;break;case"checked":c=m;break;case"defaultChecked":h=m;break;case"value":s=m;break;case"defaultValue":o=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(N(137,t));break;default:m!==g&&at(n,t,d,m,r,g)}}Gf(n,s,o,u,c,h,a,i);return;case"select":m=s=o=d=null;for(a in e)if(u=e[a],e.hasOwnProperty(a)&&u!=null)switch(a){case"value":break;case"multiple":m=u;default:r.hasOwnProperty(a)||at(n,t,a,null,r,u)}for(i in r)if(a=r[i],u=e[i],r.hasOwnProperty(i)&&(a!=null||u!=null))switch(i){case"value":d=a;break;case"defaultValue":o=a;break;case"multiple":s=a;default:a!==u&&at(n,t,i,a,r,u)}t=o,e=s,r=m,d!=null?cs(n,!!e,d,!1):!!r!=!!e&&(t!=null?cs(n,!!e,t,!0):cs(n,!!e,e?[]:"",!1));return;case"textarea":m=d=null;for(o in e)if(i=e[o],e.hasOwnProperty(o)&&i!=null&&!r.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:at(n,t,o,null,r,i)}for(s in r)if(i=r[s],a=e[s],r.hasOwnProperty(s)&&(i!=null||a!=null))switch(s){case"value":d=i;break;case"defaultValue":m=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(N(91));break;default:i!==a&&at(n,t,s,i,r,a)}Fp(n,d,m);return;case"option":for(var A in e)if(d=e[A],e.hasOwnProperty(A)&&d!=null&&!r.hasOwnProperty(A))switch(A){case"selected":n.selected=!1;break;default:at(n,t,A,null,r,d)}for(u in r)if(d=r[u],m=e[u],r.hasOwnProperty(u)&&d!==m&&(d!=null||m!=null))switch(u){case"selected":n.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:at(n,t,u,d,r,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var b in e)d=e[b],e.hasOwnProperty(b)&&d!=null&&!r.hasOwnProperty(b)&&at(n,t,b,null,r,d);for(c in r)if(d=r[c],m=e[c],r.hasOwnProperty(c)&&d!==m&&(d!=null||m!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(N(137,t));break;default:at(n,t,c,d,r,m)}return;default:if(Ud(t)){for(var x in e)d=e[x],e.hasOwnProperty(x)&&d!==void 0&&!r.hasOwnProperty(x)&&wh(n,t,x,void 0,r,d);for(h in r)d=r[h],m=e[h],!r.hasOwnProperty(h)||d===m||d===void 0&&m===void 0||wh(n,t,h,d,r,m);return}}for(var p in e)d=e[p],e.hasOwnProperty(p)&&d!=null&&!r.hasOwnProperty(p)&&at(n,t,p,null,r,d);for(g in r)d=r[g],m=e[g],!r.hasOwnProperty(g)||d===m||d==null&&m==null||at(n,t,g,d,r,m)}var Ah=null,Eh=null;function Pu(n){return n.nodeType===9?n:n.ownerDocument}function ey(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _0(n,t){if(n===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&t==="foreignObject"?0:n}function Nh(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Of=null;function jw(){var n=window.event;return n&&n.type==="popstate"?n===Of?!1:(Of=n,!0):(Of=null,!1)}var W0=typeof setTimeout=="function"?setTimeout:void 0,Gw=typeof clearTimeout=="function"?clearTimeout:void 0,ny=typeof Promise=="function"?Promise:void 0,Yw=typeof queueMicrotask=="function"?queueMicrotask:typeof ny<"u"?function(n){return ny.resolve(null).then(n).catch(Xw)}:W0;function Xw(n){setTimeout(function(){throw n})}function sa(n){return n==="head"}function ry(n,t){var e=t,r=0,i=0;do{var a=e.nextSibling;if(n.removeChild(e),a&&a.nodeType===8)if(e=a.data,e==="/$"){if(0<r&&8>r){e=r;var s=n.ownerDocument;if(e&1&&Oo(s.documentElement),e&2&&Oo(s.body),e&4)for(e=s.head,Oo(e),s=e.firstChild;s;){var o=s.nextSibling,u=s.nodeName;s[cl]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&s.rel.toLowerCase()==="stylesheet"||e.removeChild(s),s=o}}if(i===0){n.removeChild(a),Zo(t);return}i--}else e==="$"||e==="$?"||e==="$!"?i++:r=e.charCodeAt(0)-48;else r=0;e=a}while(e);Zo(t)}function xh(n){var t=n.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var e=t;switch(t=t.nextSibling,e.nodeName){case"HTML":case"HEAD":case"BODY":xh(e),Md(e);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(e.rel.toLowerCase()==="stylesheet")continue}n.removeChild(e)}}function Fw(n,t,e,r){for(;n.nodeType===1;){var i=e;if(n.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(r){if(!n[cl])switch(t){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(a=n.getAttribute("rel"),a==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(a!==i.rel||n.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||n.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||n.getAttribute("title")!==(i.title==null?null:i.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(a=n.getAttribute("src"),(a!==(i.src==null?null:i.src)||n.getAttribute("type")!==(i.type==null?null:i.type)||n.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(t==="input"&&n.type==="hidden"){var a=i.name==null?null:""+i.name;if(i.type==="hidden"&&n.getAttribute("name")===a)return n}else return n;if(n=rn(n.nextSibling),n===null)break}return null}function Zw(n,t,e){if(t==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!e||(n=rn(n.nextSibling),n===null))return null;return n}function Dh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function Qw(n,t){var e=n.ownerDocument;if(n.data!=="$?"||e.readyState==="complete")t();else{var r=function(){t(),e.removeEventListener("DOMContentLoaded",r)};e.addEventListener("DOMContentLoaded",r),n._reactRetry=r}}function rn(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return n}var kh=null;function iy(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return n;t--}else e==="/$"&&t++}n=n.previousSibling}return null}function tS(n,t,e){switch(t=Pu(e),n){case"html":if(n=t.documentElement,!n)throw Error(N(452));return n;case"head":if(n=t.head,!n)throw Error(N(453));return n;case"body":if(n=t.body,!n)throw Error(N(454));return n;default:throw Error(N(451))}}function Oo(n){for(var t=n.attributes;t.length;)n.removeAttributeNode(t[0]);Md(n)}var Xe=new Map,ay=new Set;function Ku(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ei=et.d;et.d={f:_w,r:Ww,D:tA,C:eA,L:nA,m:rA,X:aA,S:iA,M:sA};function _w(){var n=Ei.f(),t=Rc();return n||t}function Ww(n){var t=js(n);t!==null&&t.tag===5&&t.type==="form"?Yv(t):Ei.r(n)}var Xs=typeof document>"u"?null:document;function eS(n,t,e){var r=Xs;if(r&&typeof t=="string"&&t){var i=Je(t);i='link[rel="'+n+'"][href="'+i+'"]',typeof e=="string"&&(i+='[crossorigin="'+e+'"]'),ay.has(i)||(ay.add(i),n={rel:n,crossOrigin:e,href:t},r.querySelector(i)===null&&(t=r.createElement("link"),Gt(t,"link",n),Jt(t),r.head.appendChild(t)))}}function tA(n){Ei.D(n),eS("dns-prefetch",n,null)}function eA(n,t){Ei.C(n,t),eS("preconnect",n,t)}function nA(n,t,e){Ei.L(n,t,e);var r=Xs;if(r&&n&&t){var i='link[rel="preload"][as="'+Je(t)+'"]';t==="image"&&e&&e.imageSrcSet?(i+='[imagesrcset="'+Je(e.imageSrcSet)+'"]',typeof e.imageSizes=="string"&&(i+='[imagesizes="'+Je(e.imageSizes)+'"]')):i+='[href="'+Je(n)+'"]';var a=i;switch(t){case"style":a=Os(n);break;case"script":a=Fs(n)}Xe.has(a)||(n=ht({rel:"preload",href:t==="image"&&e&&e.imageSrcSet?void 0:n,as:t},e),Xe.set(a,n),r.querySelector(i)!==null||t==="style"&&r.querySelector(Tl(a))||t==="script"&&r.querySelector(bl(a))||(t=r.createElement("link"),Gt(t,"link",n),Jt(t),r.head.appendChild(t)))}}function rA(n,t){Ei.m(n,t);var e=Xs;if(e&&n){var r=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+Je(r)+'"][href="'+Je(n)+'"]',a=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Fs(n)}if(!Xe.has(a)&&(n=ht({rel:"modulepreload",href:n},t),Xe.set(a,n),e.querySelector(i)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(e.querySelector(bl(a)))return}r=e.createElement("link"),Gt(r,"link",n),Jt(r),e.head.appendChild(r)}}}function iA(n,t,e){Ei.S(n,t,e);var r=Xs;if(r&&n){var i=us(r).hoistableStyles,a=Os(n);t=t||"default";var s=i.get(a);if(!s){var o={loading:0,preload:null};if(s=r.querySelector(Tl(a)))o.loading=5;else{n=ht({rel:"stylesheet",href:n,"data-precedence":t},e),(e=Xe.get(a))&&vm(n,e);var u=s=r.createElement("link");Jt(u),Gt(u,"link",n),u._p=new Promise(function(c,h){u.onload=c,u.onerror=h}),u.addEventListener("load",function(){o.loading|=1}),u.addEventListener("error",function(){o.loading|=2}),o.loading|=4,ou(s,t,r)}s={type:"stylesheet",instance:s,count:1,state:o},i.set(a,s)}}}function aA(n,t){Ei.X(n,t);var e=Xs;if(e&&n){var r=us(e).hoistableScripts,i=Fs(n),a=r.get(i);a||(a=e.querySelector(bl(i)),a||(n=ht({src:n,async:!0},t),(t=Xe.get(i))&&Sm(n,t),a=e.createElement("script"),Jt(a),Gt(a,"link",n),e.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}function sA(n,t){Ei.M(n,t);var e=Xs;if(e&&n){var r=us(e).hoistableScripts,i=Fs(n),a=r.get(i);a||(a=e.querySelector(bl(i)),a||(n=ht({src:n,async:!0,type:"module"},t),(t=Xe.get(i))&&Sm(n,t),a=e.createElement("script"),Jt(a),Gt(a,"link",n),e.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}function sy(n,t,e,r){var i=(i=$i.current)?Ku(i):null;if(!i)throw Error(N(446));switch(n){case"meta":case"title":return null;case"style":return typeof e.precedence=="string"&&typeof e.href=="string"?(t=Os(e.href),e=us(i).hoistableStyles,r=e.get(t),r||(r={type:"style",instance:null,count:0,state:null},e.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(e.rel==="stylesheet"&&typeof e.href=="string"&&typeof e.precedence=="string"){n=Os(e.href);var a=us(i).hoistableStyles,s=a.get(n);if(s||(i=i.ownerDocument||i,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(n,s),(a=i.querySelector(Tl(n)))&&!a._p&&(s.instance=a,s.state.loading=5),Xe.has(n)||(e={rel:"preload",as:"style",href:e.href,crossOrigin:e.crossOrigin,integrity:e.integrity,media:e.media,hrefLang:e.hrefLang,referrerPolicy:e.referrerPolicy},Xe.set(n,e),a||oA(i,n,e,s.state))),t&&r===null)throw Error(N(528,""));return s}if(t&&r!==null)throw Error(N(529,""));return null;case"script":return t=e.async,e=e.src,typeof e=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Fs(e),e=us(i).hoistableScripts,r=e.get(t),r||(r={type:"script",instance:null,count:0,state:null},e.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(N(444,n))}}function Os(n){return'href="'+Je(n)+'"'}function Tl(n){return'link[rel="stylesheet"]['+n+"]"}function nS(n){return ht({},n,{"data-precedence":n.precedence,precedence:null})}function oA(n,t,e,r){n.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=n.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),Gt(t,"link",e),Jt(t),n.head.appendChild(t))}function Fs(n){return'[src="'+Je(n)+'"]'}function bl(n){return"script[async]"+n}function oy(n,t,e){if(t.count++,t.instance===null)switch(t.type){case"style":var r=n.querySelector('style[data-href~="'+Je(e.href)+'"]');if(r)return t.instance=r,Jt(r),r;var i=ht({},e,{"data-href":e.href,"data-precedence":e.precedence,href:null,precedence:null});return r=(n.ownerDocument||n).createElement("style"),Jt(r),Gt(r,"style",i),ou(r,e.precedence,n),t.instance=r;case"stylesheet":i=Os(e.href);var a=n.querySelector(Tl(i));if(a)return t.state.loading|=4,t.instance=a,Jt(a),a;r=nS(e),(i=Xe.get(i))&&vm(r,i),a=(n.ownerDocument||n).createElement("link"),Jt(a);var s=a;return s._p=new Promise(function(o,u){s.onload=o,s.onerror=u}),Gt(a,"link",r),t.state.loading|=4,ou(a,e.precedence,n),t.instance=a;case"script":return a=Fs(e.src),(i=n.querySelector(bl(a)))?(t.instance=i,Jt(i),i):(r=e,(i=Xe.get(a))&&(r=ht({},e),Sm(r,i)),n=n.ownerDocument||n,i=n.createElement("script"),Jt(i),Gt(i,"link",r),n.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(N(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,ou(r,e.precedence,n));return t.instance}function ou(n,t,e){for(var r=e.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,a=i,s=0;s<r.length;s++){var o=r[s];if(o.dataset.precedence===t)a=o;else if(a!==i)break}a?a.parentNode.insertBefore(n,a.nextSibling):(t=e.nodeType===9?e.head:e,t.insertBefore(n,t.firstChild))}function vm(n,t){n.crossOrigin==null&&(n.crossOrigin=t.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=t.referrerPolicy),n.title==null&&(n.title=t.title)}function Sm(n,t){n.crossOrigin==null&&(n.crossOrigin=t.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=t.referrerPolicy),n.integrity==null&&(n.integrity=t.integrity)}var lu=null;function ly(n,t,e){if(lu===null){var r=new Map,i=lu=new Map;i.set(e,r)}else i=lu,r=i.get(e),r||(r=new Map,i.set(e,r));if(r.has(n))return r;for(r.set(n,null),e=e.getElementsByTagName(n),i=0;i<e.length;i++){var a=e[i];if(!(a[cl]||a[Xt]||n==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var s=a.getAttribute(t)||"";s=n+s;var o=r.get(s);o?o.push(a):r.set(s,[a])}}return r}function uy(n,t,e){n=n.ownerDocument||n,n.head.insertBefore(e,t==="title"?n.querySelector("head > title"):null)}function lA(n,t,e){if(e===1||t.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return n=t.disabled,typeof t.precedence=="string"&&n==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function rS(n){return!(n.type==="stylesheet"&&!(n.state.loading&3))}var Go=null;function uA(){}function cA(n,t,e){if(Go===null)throw Error(N(475));var r=Go;if(t.type==="stylesheet"&&(typeof e.media!="string"||matchMedia(e.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var i=Os(e.href),a=n.querySelector(Tl(i));if(a){n=a._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(r.count++,r=Vu.bind(r),n.then(r,r)),t.state.loading|=4,t.instance=a,Jt(a);return}a=n.ownerDocument||n,e=nS(e),(i=Xe.get(i))&&vm(e,i),a=a.createElement("link"),Jt(a);var s=a;s._p=new Promise(function(o,u){s.onload=o,s.onerror=u}),Gt(a,"link",e),t.instance=a}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(t,n),(n=t.state.preload)&&!(t.state.loading&3)&&(r.count++,t=Vu.bind(r),n.addEventListener("load",t),n.addEventListener("error",t))}}function fA(){if(Go===null)throw Error(N(475));var n=Go;return n.stylesheets&&n.count===0&&Oh(n,n.stylesheets),0<n.count?function(t){var e=setTimeout(function(){if(n.stylesheets&&Oh(n,n.stylesheets),n.unsuspend){var r=n.unsuspend;n.unsuspend=null,r()}},6e4);return n.unsuspend=t,function(){n.unsuspend=null,clearTimeout(e)}}:null}function Vu(){if(this.count--,this.count===0){if(this.stylesheets)Oh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Hu=null;function Oh(n,t){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Hu=new Map,t.forEach(hA,n),Hu=null,Vu.call(n))}function hA(n,t){if(!(t.state.loading&4)){var e=Hu.get(n);if(e)var r=e.get(null);else{e=new Map,Hu.set(n,e);for(var i=n.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var s=i[a];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(e.set(s.dataset.precedence,s),r=s)}r&&e.set(null,r)}i=t.instance,s=i.getAttribute("data-precedence"),a=e.get(s)||r,a===r&&e.set(null,i),e.set(s,i),this.count++,r=Vu.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),a?a.parentNode.insertBefore(i,a.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(i,n.firstChild)),t.state.loading|=4}}var Yo={$$typeof:si,Provider:null,Consumer:null,_currentValue:va,_currentValue2:va,_threadCount:0};function dA(n,t,e,r,i,a,s,o){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.hiddenUpdates=Zc(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function iS(n,t,e,r,i,a,s,o,u,c,h,g){return n=new dA(n,t,e,s,o,u,c,g),t=1,a===!0&&(t|=24),a=ge(3,null,null,t),n.current=a,a.stateNode=n,t=Yd(),t.refCount++,n.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:e,cache:t},Fd(a),n}function aS(n){return n?(n=rs,n):rs}function sS(n,t,e,r,i,a){i=aS(i),r.context===null?r.context=i:r.pendingContext=i,r=ji(t),r.payload={element:e},a=a===void 0?null:a,a!==null&&(r.callback=a),e=Gi(n,r,t),e!==null&&(be(e,n,t),bo(e,n,t))}function cy(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function Tm(n,t){cy(n,t),(n=n.alternate)&&cy(n,t)}function oS(n){if(n.tag===13){var t=Gs(n,67108864);t!==null&&be(t,n,67108864),Tm(n,67108864)}}var $u=!0;function mA(n,t,e,r){var i=q.T;q.T=null;var a=et.p;try{et.p=2,bm(n,t,e,r)}finally{et.p=a,q.T=i}}function gA(n,t,e,r){var i=q.T;q.T=null;var a=et.p;try{et.p=8,bm(n,t,e,r)}finally{et.p=a,q.T=i}}function bm(n,t,e,r){if($u){var i=Ch(r);if(i===null)kf(n,t,r,ju,e),fy(n,r);else if(pA(i,n,t,e,r))r.stopPropagation();else if(fy(n,r),t&4&&-1<yA.indexOf(n)){for(;i!==null;){var a=js(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var s=fa(a.pendingLanes);if(s!==0){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var u=1<<31-Se(s);o.entanglements[1]|=u,s&=~u}On(a),!(it&6)&&(Mu=Tn()+500,Sl(0))}}break;case 13:o=Gs(a,2),o!==null&&be(o,a,2),Rc(),Tm(a,2)}if(a=Ch(r),a===null&&kf(n,t,r,ju,e),a===i)break;i=a}i!==null&&r.stopPropagation()}else kf(n,t,r,null,e)}}function Ch(n){return n=Ld(n),wm(n)}var ju=null;function wm(n){if(ju=null,n=Qa(n),n!==null){var t=sl(n);if(t===null)n=null;else{var e=t.tag;if(e===13){if(n=Bp(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null)}}return ju=n,null}function lS(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(eb()){case Up:return 2;case Lp:return 8;case Su:case nb:return 32;case Jp:return 268435456;default:return 32}default:return 32}}var Ih=!1,Fi=null,Zi=null,Qi=null,Xo=new Map,Fo=new Map,Li=[],yA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fy(n,t){switch(n){case"focusin":case"focusout":Fi=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":Xo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fo.delete(t.pointerId)}}function ro(n,t,e,r,i,a){return n===null||n.nativeEvent!==a?(n={blockedOn:t,domEventName:e,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=js(t),t!==null&&oS(t)),n):(n.eventSystemFlags|=r,t=n.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),n)}function pA(n,t,e,r,i){switch(t){case"focusin":return Fi=ro(Fi,n,t,e,r,i),!0;case"dragenter":return Zi=ro(Zi,n,t,e,r,i),!0;case"mouseover":return Qi=ro(Qi,n,t,e,r,i),!0;case"pointerover":var a=i.pointerId;return Xo.set(a,ro(Xo.get(a)||null,n,t,e,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Fo.set(a,ro(Fo.get(a)||null,n,t,e,r,i)),!0}return!1}function uS(n){var t=Qa(n.target);if(t!==null){var e=sl(t);if(e!==null){if(t=e.tag,t===13){if(t=Bp(e),t!==null){n.blockedOn=t,cb(n.priority,function(){if(e.tag===13){var r=Te();r=Rd(r);var i=Gs(e,r);i!==null&&be(i,e,r),Tm(e,r)}});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function uu(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=Ch(n.nativeEvent);if(e===null){e=n.nativeEvent;var r=new e.constructor(e.type,e);Xf=r,e.target.dispatchEvent(r),Xf=null}else return t=js(e),t!==null&&oS(t),n.blockedOn=e,!1;t.shift()}return!0}function hy(n,t,e){uu(n)&&e.delete(t)}function vA(){Ih=!1,Fi!==null&&uu(Fi)&&(Fi=null),Zi!==null&&uu(Zi)&&(Zi=null),Qi!==null&&uu(Qi)&&(Qi=null),Xo.forEach(hy),Fo.forEach(hy)}function Kl(n,t){n.blockedOn===t&&(n.blockedOn=null,Ih||(Ih=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,vA)))}var Vl=null;function dy(n){Vl!==n&&(Vl=n,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,function(){Vl===n&&(Vl=null);for(var t=0;t<n.length;t+=3){var e=n[t],r=n[t+1],i=n[t+2];if(typeof r!="function"){if(wm(r||e)===null)continue;break}var a=js(e);a!==null&&(n.splice(t,3),t-=3,ch(a,{pending:!0,data:i,method:e.method,action:r},r,i))}}))}function Zo(n){function t(u){return Kl(u,n)}Fi!==null&&Kl(Fi,n),Zi!==null&&Kl(Zi,n),Qi!==null&&Kl(Qi,n),Xo.forEach(t),Fo.forEach(t);for(var e=0;e<Li.length;e++){var r=Li[e];r.blockedOn===n&&(r.blockedOn=null)}for(;0<Li.length&&(e=Li[0],e.blockedOn===null);)uS(e),e.blockedOn===null&&Li.shift();if(e=(n.ownerDocument||n).$$reactFormReplay,e!=null)for(r=0;r<e.length;r+=3){var i=e[r],a=e[r+1],s=i[le]||null;if(typeof a=="function")s||dy(e);else if(s){var o=null;if(a&&a.hasAttribute("formAction")){if(i=a,s=a[le]||null)o=s.formAction;else if(wm(i)!==null)continue}else o=s.action;typeof o=="function"?e[r+1]=o:(e.splice(r,3),r-=3),dy(e)}}}function Am(n){this._internalRoot=n}Lc.prototype.render=Am.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(N(409));var e=t.current,r=Te();sS(e,r,n,t,null,null)};Lc.prototype.unmount=Am.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;sS(n.current,2,null,n,null,null),Rc(),t[$s]=null}};function Lc(n){this._internalRoot=n}Lc.prototype.unstable_scheduleHydration=function(n){if(n){var t=Hp();n={blockedOn:null,target:n,priority:t};for(var e=0;e<Li.length&&t!==0&&t<Li[e].priority;e++);Li.splice(e,0,n),e===0&&uS(n)}};var my=Cp.version;if(my!=="19.1.0")throw Error(N(527,my,"19.1.0"));et.findDOMNode=function(n){var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(N(188)):(n=Object.keys(n).join(","),Error(N(268,n)));return n=XT(t),n=n!==null?Rp(n):null,n=n===null?null:n.stateNode,n};var SA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hl.isDisabled&&Hl.supportsFiber)try{ol=Hl.inject(SA),ve=Hl}catch{}}bc.createRoot=function(n,t){if(!Ip(n))throw Error(N(299));var e=!1,r="",i=i0,a=a0,s=s0,o=null;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(s=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(o=t.unstable_transitionCallbacks)),t=iS(n,1,!1,null,null,e,r,i,a,s,o,null),n[$s]=t.current,pm(n),new Am(t)};bc.hydrateRoot=function(n,t,e){if(!Ip(n))throw Error(N(299));var r=!1,i="",a=i0,s=a0,o=s0,u=null,c=null;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(a=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(u=e.unstable_transitionCallbacks),e.formState!==void 0&&(c=e.formState)),t=iS(n,1,!0,t,e??null,r,i,a,s,o,u,c),t.context=aS(null),e=t.current,r=Te(),r=Rd(r),i=ji(r),i.callback=null,Gi(e,i,r),e=r,t.current.lanes=e,ul(t,e),On(t),n[$s]=t.current,pm(n),new Lc(t)};bc.version="19.1.0";function cS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cS)}catch(n){console.error(n)}}cS(),pp.exports=bc;var TA=pp.exports;const bA=mp(TA);function fS({onSave:n,placeholder:t}){const[e,r]=ut.useState("");return W.jsx("input",{className:"new-todo",type:"text",placeholder:t,value:e,onChange:i=>{r(i.target.value)},onKeyDown:i=>{i.key==="Enter"&&!i.nativeEvent.isComposing&&(n(e.trim()),r(""))}})}function wA({dispatch:n}){const t=e=>{n({type:"ADDED_TODO",payload:{text:e}})};return W.jsxs("header",{className:"header",children:[W.jsx("h1",{children:"todos"}),W.jsx(fS,{onSave:e=>{e.length!==0&&t(e)},placeholder:"What needs to be done?"})]})}var hS={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var t={}.hasOwnProperty;function e(){for(var a="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(a=i(a,r(o)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return e.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var s="";for(var o in a)t.call(a,o)&&a[o]&&(s=i(s,o));return s}function i(a,s){return s?a?a+" "+s:a+s:a}n.exports?(e.default=e,n.exports=e):window.classNames=e})()})(hS);var AA=hS.exports;const dS=mp(AA),gy={SHOW_ALL:"All",SHOW_ACTIVE:"Active",SHOW_COMPLETED:"Completed"};function EA({completedCount:n,activeCount:t,filter:e,onClearCompleted:r,onShow:i}){return W.jsxs("footer",{className:"footer",children:[W.jsxs("span",{className:"todo-count",children:[W.jsx("strong",{children:t||"No"}),"",t===1?"item":"items"," left"]}),W.jsx("ul",{className:"filters",children:Object.keys(gy).map(a=>W.jsx("li",{children:W.jsx("button",{type:"button",className:dS({selected:a===e}),style:{cursor:"pointer"},onClick:()=>i(a),children:gy[a]})},a))}),!!n&&W.jsx("button",{type:"button",className:"clear-completed",onClick:r,children:"Clear completed"})]})}function NA({todo:n,dispatch:t}){const[e,r]=ut.useState(!1),i=o=>{t({type:"DELETED_TODO",payload:{id:o}})},a=(o,u)=>{t({type:"EDITED_TODO",payload:{id:o,text:u}})},s=o=>{t({type:"COMPLETED_TODO",payload:{id:o}})};return W.jsx("li",{className:dS({completed:n.completed,editing:e}),children:e?W.jsx(fS,{editing:e,onSave:o=>{o.length===0?i(n.id):a(n.id,o),r(!1)}}):W.jsxs("div",{className:"view",children:[W.jsx("input",{id:`item-input-${n.id}`,className:"toggle",type:"checkbox",checked:n.completed,onChange:()=>s(n.id)}),W.jsx("label",{htmlFor:`item-input-${n.id}`,onDoubleClick:()=>r(!0),children:n.text}),W.jsx("button",{type:"button","aria-label":"Delete",className:"destroy",onClick:()=>i(n.id)})]})})}const xA={SHOW_ALL:()=>!0,SHOW_ACTIVE:n=>!n.completed,SHOW_COMPLETED:n=>n.completed};function DA({todos:n,dispatch:t}){const[e,r]=ut.useState("SHOW_ALL"),i=n.filter(xA[e]),a=n.filter(c=>c.completed).length,s=n.length-a,o=()=>t({type:"CLEARED_COMPLETED"}),u=()=>t({type:"TOGGLED_ALL"});return n.length===0?null:W.jsxs("section",{className:"main",children:[i.length>0?W.jsxs("div",{className:"toggle-all-container",children:[W.jsx("input",{className:"toggle-all",type:"checkbox",id:"toggle-all",checked:a===n.length,onChange:u}),W.jsx("label",{className:"toggle-all-label",htmlFor:"toggle-all",children:"Mark all as complete"})]}):null,W.jsx("ul",{className:"todo-list",children:i.map(c=>W.jsx(NA,{todo:c,dispatch:t},c.id))}),W.jsx(EA,{completedCount:a,activeCount:s,filter:e,onClearCompleted:o,onShow:r})]})}function kA(n,t){switch(t.type){case"ADDED_TODO":{const{text:e}=t.payload;n.todos.push({id:crypto.randomUUID(),completed:!1,text:e});break}case"DELETED_TODO":{const{id:e}=t.payload,r=n.todos.findIndex(i=>i.id===e);if(r!==-1){const i=n.todos.getElementByIndex(r);n.todos.deleteByID(i.getID())}break}case"EDITED_TODO":{const{id:e,text:r}=t.payload;n.todos.forEach(i=>{i.id===e&&(i.text=r)});break}case"COMPLETED_TODO":{const{id:e}=t.payload;n.todos.forEach(r=>{r.id===e&&(r.completed=!r.completed)});break}case"CLEARED_COMPLETED":{const e=[];n.todos.forEach((r,i)=>{r.completed&&e.push(i)});for(let r=e.length-1;r>=0;r--){const i=n.todos.getElementByIndex(e[r]);n.todos.deleteByID(i.getID())}break}case"TOGGLED_ALL":{const e=n.todos.every(r=>r.completed);n.todos.forEach(r=>{r.completed=!e});break}}}var X;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(X||(X={}));function yy(n){const t=X[n];return typeof t!="string"?n.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,e=>"_"+e.toLowerCase())}class ot extends Error{constructor(t,e=X.Unknown,r,i,a){super(OA(t,e)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=t,this.code=e,this.metadata=new Headers(r??{}),this.details=i??[],this.cause=a}static from(t,e=X.Unknown){return t instanceof ot?t:t instanceof Error?t.name=="AbortError"?new ot(t.message,X.Canceled):new ot(t.message,e,void 0,void 0,t):new ot(String(t),e,void 0,void 0,t)}static[Symbol.hasInstance](t){return t instanceof Error?Object.getPrototypeOf(t)===ot.prototype?!0:t.name==="ConnectError"&&"code"in t&&typeof t.code=="number"&&"metadata"in t&&"details"in t&&Array.isArray(t.details)&&"rawMessage"in t&&typeof t.rawMessage=="string"&&"cause"in t:!1}findDetails(t){const e="typeName"in t?{findMessage:i=>i===t.typeName?t:void 0}:t,r=[];for(const i of this.details){if("getType"in i){e.findMessage(i.getType().typeName)&&r.push(i);continue}const a=e.findMessage(i.type);if(a)try{r.push(a.fromBinary(i.value))}catch{}}return r}}function OA(n,t){return n.length?`[${yy(t)}] ${n}`:`[${yy(t)}]`}function At(n,t){if(!n)throw new Error(t)}const CA=34028234663852886e22,IA=-34028234663852886e22,BA=4294967295,RA=2147483647,zA=-2147483648;function cu(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>RA||n<zA)throw new Error("invalid int 32: "+n)}function Bh(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>BA||n<0)throw new Error("invalid uint 32: "+n)}function mS(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>CA||n<IA))throw new Error("invalid float 32: "+n)}const gS=Symbol("@bufbuild/protobuf/enum-type");function MA(n){const t=n[gS];return At(t,"missing enum type on enum object"),t}function yS(n,t,e,r){n[gS]=pS(t,e.map(i=>({no:i.no,name:i.name,localName:n[i.no]})))}function pS(n,t,e){const r=Object.create(null),i=Object.create(null),a=[];for(const s of t){const o=vS(s);a.push(o),r[s.name]=o,i[s.no]=o}return{typeName:n,values:a,findName(s){return r[s]},findNumber(s){return i[s]}}}function UA(n,t,e){const r={};for(const i of t){const a=vS(i);r[a.localName]=a.no,r[a.no]=a.localName}return yS(r,n,t),r}function vS(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class D{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,e){const r=this.getType(),i=r.runtime.bin,a=i.makeReadOptions(e);return i.readMessage(this,a.readerFactory(t),t.byteLength,a),this}fromJson(t,e){const r=this.getType(),i=r.runtime.json,a=i.makeReadOptions(e);return i.readMessage(r,t,a,this),this}fromJsonString(t,e){let r;try{r=JSON.parse(t)}catch(i){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${i instanceof Error?i.message:String(i)}`)}return this.fromJson(r,e)}toBinary(t){const e=this.getType(),r=e.runtime.bin,i=r.makeWriteOptions(t),a=i.writerFactory();return r.writeMessage(this,a,i),a.finish()}toJson(t){const e=this.getType(),r=e.runtime.json,i=r.makeWriteOptions(t);return r.writeMessage(this,i)}toJsonString(t){var e;const r=this.toJson(t);return JSON.stringify(r,null,(e=t==null?void 0:t.prettySpaces)!==null&&e!==void 0?e:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function LA(n,t,e,r){var i;const a=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:t.substring(t.lastIndexOf(".")+1),s={[a]:function(o){n.util.initFields(this),n.util.initPartial(o,this)}}[a];return Object.setPrototypeOf(s.prototype,new D),Object.assign(s,{runtime:n,typeName:t,fields:n.util.newFieldList(e),fromBinary(o,u){return new s().fromBinary(o,u)},fromJson(o,u){return new s().fromJson(o,u)},fromJsonString(o,u){return new s().fromJsonString(o,u)},equals(o,u){return n.util.equals(s,o,u)}}),s}function JA(){let n=0,t=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(n|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,t]}let e=this.buf[this.pos++];if(n|=(e&15)<<28,t=(e&112)>>4,!(e&128))return this.assertBounds(),[n,t];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,t]}throw new Error("invalid varint")}function Cf(n,t,e){for(let a=0;a<28;a=a+7){const s=n>>>a,o=!(!(s>>>7)&&t==0),u=(o?s|128:s)&255;if(e.push(u),!o)return}const r=n>>>28&15|(t&7)<<4,i=!!(t>>3);if(e.push((i?r|128:r)&255),!!i){for(let a=3;a<31;a=a+7){const s=t>>>a,o=!!(s>>>7),u=(o?s|128:s)&255;if(e.push(u),!o)return}e.push(t>>>31&1)}}const fu=4294967296;function py(n){const t=n[0]==="-";t&&(n=n.slice(1));const e=1e6;let r=0,i=0;function a(s,o){const u=Number(n.slice(s,o));i*=e,r=r*e+u,r>=fu&&(i=i+(r/fu|0),r=r%fu)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),t?TS(r,i):Em(r,i)}function qA(n,t){let e=Em(n,t);const r=e.hi&2147483648;r&&(e=TS(e.lo,e.hi));const i=SS(e.lo,e.hi);return r?"-"+i:i}function SS(n,t){if({lo:n,hi:t}=PA(n,t),t<=2097151)return String(fu*t+n);const e=n&16777215,r=(n>>>24|t<<8)&16777215,i=t>>16&65535;let a=e+r*6777216+i*6710656,s=r+i*8147497,o=i*2;const u=1e7;return a>=u&&(s+=Math.floor(a/u),a%=u),s>=u&&(o+=Math.floor(s/u),s%=u),o.toString()+vy(s)+vy(a)}function PA(n,t){return{lo:n>>>0,hi:t>>>0}}function Em(n,t){return{lo:n|0,hi:t|0}}function TS(n,t){return t=~t,n?n=~n+1:t+=1,Em(n,t)}const vy=n=>{const t=String(n);return"0000000".slice(t.length)+t};function Sy(n,t){if(n>=0){for(;n>127;)t.push(n&127|128),n=n>>>7;t.push(n)}else{for(let e=0;e<9;e++)t.push(n&127|128),n=n>>7;t.push(1)}}function KA(){let n=this.buf[this.pos++],t=n&127;if(!(n&128))return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<7,!(n&128))return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<14,!(n&128))return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<21,!(n&128))return this.assertBounds(),t;n=this.buf[this.pos++],t|=(n&15)<<28;for(let e=5;n&128&&e<10;e++)n=this.buf[this.pos++];if(n&128)throw new Error("invalid varint");return this.assertBounds(),t>>>0}var Ty={};function VA(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof Ty!="object"||Ty.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),a=BigInt("9223372036854775807"),s=BigInt("0"),o=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(u){const c=typeof u=="bigint"?u:BigInt(u);if(c>a||c<i)throw new Error(`int64 invalid: ${u}`);return c},uParse(u){const c=typeof u=="bigint"?u:BigInt(u);if(c>o||c<s)throw new Error(`uint64 invalid: ${u}`);return c},enc(u){return n.setBigInt64(0,this.parse(u),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(u){return n.setBigInt64(0,this.uParse(u),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(u,c){return n.setInt32(0,u,!0),n.setInt32(4,c,!0),n.getBigInt64(0,!0)},uDec(u,c){return n.setInt32(0,u,!0),n.setInt32(4,c,!0),n.getBigUint64(0,!0)}}}const e=i=>At(/^-?[0-9]+$/.test(i),`int64 invalid: ${i}`),r=i=>At(/^[0-9]+$/.test(i),`uint64 invalid: ${i}`);return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),e(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),e(i),py(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),py(i)},dec(i,a){return qA(i,a)},uDec(i,a){return SS(i,a)}}}const Z=VA();var E;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(E||(E={}));var ia;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(ia||(ia={}));function ki(n,t,e){if(t===e)return!0;if(n==E.BYTES){if(!(t instanceof Uint8Array)||!(e instanceof Uint8Array)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}switch(n){case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return t==e}return!1}function Cs(n,t){switch(n){case E.BOOL:return!1;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return t==0?Z.zero:"0";case E.DOUBLE:case E.FLOAT:return 0;case E.BYTES:return new Uint8Array(0);case E.STRING:return"";default:return 0}}function bS(n,t){switch(n){case E.BOOL:return t===!1;case E.STRING:return t==="";case E.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}var kt;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(kt||(kt={}));class HA{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let i=0;i<this.chunks.length;i++)t+=this.chunks[i].length;let e=new Uint8Array(t),r=0;for(let i=0;i<this.chunks.length;i++)e.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],e}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),e=this.stack.pop();if(!e)throw new Error("invalid state, fork stack empty");return this.chunks=e.chunks,this.buf=e.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,e){return this.uint32((t<<3|e)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(Bh(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return cu(t),Sy(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let e=this.textEncoder.encode(t);return this.uint32(e.byteLength),this.raw(e)}float(t){mS(t);let e=new Uint8Array(4);return new DataView(e.buffer).setFloat32(0,t,!0),this.raw(e)}double(t){let e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,t,!0),this.raw(e)}fixed32(t){Bh(t);let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t,!0),this.raw(e)}sfixed32(t){cu(t);let e=new Uint8Array(4);return new DataView(e.buffer).setInt32(0,t,!0),this.raw(e)}sint32(t){return cu(t),t=(t<<1^t>>31)>>>0,Sy(t,this.buf),this}sfixed64(t){let e=new Uint8Array(8),r=new DataView(e.buffer),i=Z.enc(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(e)}fixed64(t){let e=new Uint8Array(8),r=new DataView(e.buffer),i=Z.uEnc(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(e)}int64(t){let e=Z.enc(t);return Cf(e.lo,e.hi,this.buf),this}sint64(t){let e=Z.enc(t),r=e.hi>>31,i=e.lo<<1^r,a=(e.hi<<1|e.lo>>>31)^r;return Cf(i,a,this.buf),this}uint64(t){let e=Z.uEnc(t);return Cf(e.lo,e.hi,this.buf),this}}class $A{constructor(t,e){this.varint64=JA,this.uint32=KA,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=e??new TextDecoder}tag(){let t=this.uint32(),e=t>>>3,r=t&7;if(e<=0||r<0||r>5)throw new Error("illegal tag: field no "+e+" wire type "+r);return[e,r]}skip(t,e){let r=this.pos;switch(t){case kt.Varint:for(;this.buf[this.pos++]&128;);break;case kt.Bit64:this.pos+=4;case kt.Bit32:this.pos+=4;break;case kt.LengthDelimited:let i=this.uint32();this.pos+=i;break;case kt.StartGroup:for(;;){const[a,s]=this.tag();if(s===kt.EndGroup){if(e!==void 0&&a!==e)throw new Error("invalid end group tag");break}this.skip(s,a)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return Z.dec(...this.varint64())}uint64(){return Z.uDec(...this.varint64())}sint64(){let[t,e]=this.varint64(),r=-(t&1);return t=(t>>>1|(e&1)<<31)^r,e=e>>>1^r,Z.dec(t,e)}bool(){let[t,e]=this.varint64();return t!==0||e!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Z.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Z.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),e=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(e,e+t)}string(){return this.textDecoder.decode(this.bytes())}}function jA(n,t,e,r){let i;return{typeName:t,extendee:e,get field(){if(!i){const a=typeof r=="function"?r():r;a.name=t.split(".").pop(),a.jsonName=`[${t}]`,i=n.util.newFieldList([a]).list()[0]}return i},runtime:n}}function wS(n){const t=n.field.localName,e=Object.create(null);return e[t]=GA(n),[e,()=>e[t]]}function GA(n){const t=n.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return Cs(t.T,t.L);case"message":const e=t.T,r=new e;return e.fieldWrapper?e.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function YA(n,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let e=n.length-1;e>=0;--e)if(n[e].no==t.no)return[n[e]];return[]}return n.filter(e=>e.no===t.no)}let ii="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Jc=[];for(let n=0;n<ii.length;n++)Jc[ii[n].charCodeAt(0)]=n;Jc[45]=ii.indexOf("+");Jc[95]=ii.indexOf("/");const Nm={dec(n){let t=n.length*3/4;n[n.length-2]=="="?t-=2:n[n.length-1]=="="&&(t-=1);let e=new Uint8Array(t),r=0,i=0,a,s=0;for(let o=0;o<n.length;o++){if(a=Jc[n.charCodeAt(o)],a===void 0)switch(n[o]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:s=a,i=1;break;case 1:e[r++]=s<<2|(a&48)>>4,s=a,i=2;break;case 2:e[r++]=(s&15)<<4|(a&60)>>2,s=a,i=3;break;case 3:e[r++]=(s&3)<<6|a,i=0;break}}if(i==1)throw Error("invalid base64 string.");return e.subarray(0,r)},enc(n){let t="",e=0,r,i=0;for(let a=0;a<n.length;a++)switch(r=n[a],e){case 0:t+=ii[r>>2],i=(r&3)<<4,e=1;break;case 1:t+=ii[i|r>>4],i=(r&15)<<2,e=2;break;case 2:t+=ii[i|r>>6],t+=ii[r&63],e=0;break}return e&&(t+=ii[i],t+="=",e==1&&(t+="=")),t}};function XA(n,t,e){ES(t,n);const r=t.runtime.bin.makeReadOptions(e),i=YA(n.getType().runtime.bin.listUnknownFields(n),t.field),[a,s]=wS(t);for(const o of i)t.runtime.bin.readField(a,r.readerFactory(o.data),t.field,o.wireType,r);return s()}function FA(n,t,e,r){ES(t,n);const i=t.runtime.bin.makeReadOptions(r),a=t.runtime.bin.makeWriteOptions(r);if(AS(n,t)){const c=n.getType().runtime.bin.listUnknownFields(n).filter(h=>h.no!=t.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const h of c)n.getType().runtime.bin.onUnknownField(n,h.no,h.wireType,h.data)}const s=a.writerFactory();let o=t.field;!o.opt&&!o.repeated&&(o.kind=="enum"||o.kind=="scalar")&&(o=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(o,e,s,a);const u=i.readerFactory(s.finish());for(;u.pos<u.len;){const[c,h]=u.tag(),g=u.skip(h,c);n.getType().runtime.bin.onUnknownField(n,c,h,g)}}function AS(n,t){const e=n.getType();return t.extendee.typeName===e.typeName&&!!e.runtime.bin.listUnknownFields(n).find(r=>r.no==t.field.no)}function ES(n,t){At(n.extendee.typeName==t.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function NS(n,t){const e=n.localName;if(n.repeated)return t[e].length>0;if(n.oneof)return t[n.oneof.localName].case===e;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?t[e]!==void 0:n.kind=="enum"?t[e]!==n.T.values[0].no:!bS(n.T,t[e]);case"message":return t[e]!==void 0;case"map":return Object.keys(t[e]).length>0}}function by(n,t){const e=n.localName,r=!n.opt&&!n.req;if(n.repeated)t[e]=[];else if(n.oneof)t[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":t[e]={};break;case"enum":t[e]=r?n.T.values[0].no:void 0;break;case"scalar":t[e]=r?Cs(n.T,n.L):void 0;break;case"message":t[e]=void 0;break}}function ai(n,t){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(D.prototype).every(r=>r in n&&typeof n[r]=="function"))return!1;const e=n.getType();return e===null||typeof e!="function"||!("typeName"in e)||typeof e.typeName!="string"?!1:t===void 0?!0:e.typeName==t.typeName}function xS(n,t){return ai(t)||!n.fieldWrapper?t:n.fieldWrapper.wrapField(t)}E.DOUBLE,E.FLOAT,E.INT64,E.UINT64,E.INT32,E.UINT32,E.BOOL,E.STRING,E.BYTES;const wy={ignoreUnknownFields:!1},Ay={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function ZA(n){return n?Object.assign(Object.assign({},wy),n):wy}function QA(n){return n?Object.assign(Object.assign({},Ay),n):Ay}const Gu=Symbol(),hu=Symbol();function _A(){return{makeReadOptions:ZA,makeWriteOptions:QA,readMessage(n,t,e,r){if(t==null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${cn(t)}`);r=r??new n;const i=new Map,a=e.typeRegistry;for(const[s,o]of Object.entries(t)){const u=n.fields.findJsonName(s);if(u){if(u.oneof){if(o===null&&u.kind=="scalar")continue;const c=i.get(u.oneof);if(c!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${u.oneof.name}" present: "${c}", "${s}"`);i.set(u.oneof,s)}Ey(r,o,u,e,n)}else{let c=!1;if(a!=null&&a.findExtension&&s.startsWith("[")&&s.endsWith("]")){const h=a.findExtension(s.substring(1,s.length-1));if(h&&h.extendee.typeName==n.typeName){c=!0;const[g,d]=wS(h);Ey(g,o,h.field,e,h),FA(r,h,d(),e)}}if(!c&&!e.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${s}" is unknown`)}}return r},writeMessage(n,t){const e=n.getType(),r={};let i;try{for(i of e.fields.byNumber()){if(!NS(i,n)){if(i.req)throw"required field not set";if(!t.emitDefaultValues||!t1(i))continue}const s=i.oneof?n[i.oneof.localName].value:n[i.localName],o=Ny(i,s,t);o!==void 0&&(r[t.useProtoFieldName?i.name:i.jsonName]=o)}const a=t.typeRegistry;if(a!=null&&a.findExtensionFor)for(const s of e.runtime.bin.listUnknownFields(n)){const o=a.findExtensionFor(e.typeName,s.no);if(o&&AS(n,o)){const u=XA(n,o,t),c=Ny(o.field,u,t);c!==void 0&&(r[o.field.jsonName]=c)}}}catch(a){const s=i?`cannot encode field ${e.typeName}.${i.name} to JSON`:`cannot encode message ${e.typeName} to JSON`,o=a instanceof Error?a.message:String(a);throw new Error(s+(o.length>0?`: ${o}`:""))}return r},readScalar(n,t,e){return Co(n,t,e??ia.BIGINT,!0)},writeScalar(n,t,e){if(t!==void 0&&(e||bS(n,t)))return du(n,t)},debug:cn}}function cn(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function Ey(n,t,e,r,i){let a=e.localName;if(e.repeated){if(At(e.kind!="map"),t===null)return;if(!Array.isArray(t))throw new Error(`cannot decode field ${i.typeName}.${e.name} from JSON: ${cn(t)}`);const s=n[a];for(const o of t){if(o===null)throw new Error(`cannot decode field ${i.typeName}.${e.name} from JSON: ${cn(o)}`);switch(e.kind){case"message":s.push(e.T.fromJson(o,r));break;case"enum":const u=If(e.T,o,r.ignoreUnknownFields,!0);u!==hu&&s.push(u);break;case"scalar":try{s.push(Co(e.T,o,e.L,!0))}catch(c){let h=`cannot decode field ${i.typeName}.${e.name} from JSON: ${cn(o)}`;throw c instanceof Error&&c.message.length>0&&(h+=`: ${c.message}`),new Error(h)}break}}}else if(e.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error(`cannot decode field ${i.typeName}.${e.name} from JSON: ${cn(t)}`);const s=n[a];for(const[o,u]of Object.entries(t)){if(u===null)throw new Error(`cannot decode field ${i.typeName}.${e.name} from JSON: map value null`);let c;try{c=WA(e.K,o)}catch(h){let g=`cannot decode map key for field ${i.typeName}.${e.name} from JSON: ${cn(t)}`;throw h instanceof Error&&h.message.length>0&&(g+=`: ${h.message}`),new Error(g)}switch(e.V.kind){case"message":s[c]=e.V.T.fromJson(u,r);break;case"enum":const h=If(e.V.T,u,r.ignoreUnknownFields,!0);h!==hu&&(s[c]=h);break;case"scalar":try{s[c]=Co(e.V.T,u,ia.BIGINT,!0)}catch(g){let d=`cannot decode map value for field ${i.typeName}.${e.name} from JSON: ${cn(t)}`;throw g instanceof Error&&g.message.length>0&&(d+=`: ${g.message}`),new Error(d)}break}}}else switch(e.oneof&&(n=n[e.oneof.localName]={case:a},a="value"),e.kind){case"message":const s=e.T;if(t===null&&s.typeName!="google.protobuf.Value")return;let o=n[a];ai(o)?o.fromJson(t,r):(n[a]=o=s.fromJson(t,r),s.fieldWrapper&&!e.oneof&&(n[a]=s.fieldWrapper.unwrapField(o)));break;case"enum":const u=If(e.T,t,r.ignoreUnknownFields,!1);switch(u){case Gu:by(e,n);break;case hu:break;default:n[a]=u;break}break;case"scalar":try{const c=Co(e.T,t,e.L,!1);switch(c){case Gu:by(e,n);break;default:n[a]=c;break}}catch(c){let h=`cannot decode field ${i.typeName}.${e.name} from JSON: ${cn(t)}`;throw c instanceof Error&&c.message.length>0&&(h+=`: ${c.message}`),new Error(h)}break}}function WA(n,t){if(n===E.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1;break}return Co(n,t,ia.BIGINT,!0).toString()}function Co(n,t,e,r){if(t===null)return r?Cs(n,e):Gu;switch(n){case E.DOUBLE:case E.FLOAT:if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const i=Number(t);if(Number.isNaN(i)||!Number.isFinite(i))break;return n==E.FLOAT&&mS(i),i;case E.INT32:case E.FIXED32:case E.SFIXED32:case E.SINT32:case E.UINT32:let a;if(typeof t=="number"?a=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(a=Number(t)),a===void 0)break;return n==E.UINT32||n==E.FIXED32?Bh(a):cu(a),a;case E.INT64:case E.SFIXED64:case E.SINT64:if(typeof t!="number"&&typeof t!="string")break;const s=Z.parse(t);return e?s.toString():s;case E.FIXED64:case E.UINT64:if(typeof t!="number"&&typeof t!="string")break;const o=Z.uParse(t);return e?o.toString():o;case E.BOOL:if(typeof t!="boolean")break;return t;case E.STRING:if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case E.BYTES:if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return Nm.dec(t)}throw new Error}function If(n,t,e,r){if(t===null)return n.typeName=="google.protobuf.NullValue"?0:r?n.values[0].no:Gu;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const i=n.findName(t);if(i!==void 0)return i.no;if(e)return hu;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${cn(t)}`)}function t1(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function Ny(n,t,e){if(n.kind=="map"){At(typeof t=="object"&&t!=null);const r={},i=Object.entries(t);switch(n.V.kind){case"scalar":for(const[s,o]of i)r[s.toString()]=du(n.V.T,o);break;case"message":for(const[s,o]of i)r[s.toString()]=o.toJson(e);break;case"enum":const a=n.V.T;for(const[s,o]of i)r[s.toString()]=Bf(a,o,e.enumAsInteger);break}return e.emitDefaultValues||i.length>0?r:void 0}if(n.repeated){At(Array.isArray(t));const r=[];switch(n.kind){case"scalar":for(let i=0;i<t.length;i++)r.push(du(n.T,t[i]));break;case"enum":for(let i=0;i<t.length;i++)r.push(Bf(n.T,t[i],e.enumAsInteger));break;case"message":for(let i=0;i<t.length;i++)r.push(t[i].toJson(e));break}return e.emitDefaultValues||r.length>0?r:void 0}switch(n.kind){case"scalar":return du(n.T,t);case"enum":return Bf(n.T,t,e.enumAsInteger);case"message":return xS(n.T,t).toJson(e)}}function Bf(n,t,e){var r;if(At(typeof t=="number"),n.typeName=="google.protobuf.NullValue")return null;if(e)return t;const i=n.findNumber(t);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:t}function du(n,t){switch(n){case E.INT32:case E.SFIXED32:case E.SINT32:case E.FIXED32:case E.UINT32:return At(typeof t=="number"),t;case E.FLOAT:case E.DOUBLE:return At(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case E.STRING:return At(typeof t=="string"),t;case E.BOOL:return At(typeof t=="boolean"),t;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return At(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),t.toString();case E.BYTES:return At(t instanceof Uint8Array),Nm.enc(t)}}const Pa=Symbol("@bufbuild/protobuf/unknown-fields"),xy={readUnknownFields:!0,readerFactory:n=>new $A(n)},Dy={writeUnknownFields:!0,writerFactory:()=>new HA};function e1(n){return n?Object.assign(Object.assign({},xy),n):xy}function n1(n){return n?Object.assign(Object.assign({},Dy),n):Dy}function r1(){return{makeReadOptions:e1,makeWriteOptions:n1,listUnknownFields(n){var t;return(t=n[Pa])!==null&&t!==void 0?t:[]},discardUnknownFields(n){delete n[Pa]},writeUnknownFields(n,t){const r=n[Pa];if(r)for(const i of r)t.tag(i.no,i.wireType).raw(i.data)},onUnknownField(n,t,e,r){const i=n;Array.isArray(i[Pa])||(i[Pa]=[]),i[Pa].push({no:t,wireType:e,data:r})},readMessage(n,t,e,r,i){const a=n.getType(),s=i?t.len:t.pos+e;let o,u;for(;t.pos<s&&([o,u]=t.tag(),!(i===!0&&u==kt.EndGroup));){const c=a.fields.find(o);if(!c){const h=t.skip(u,o);r.readUnknownFields&&this.onUnknownField(n,o,u,h);continue}ky(n,t,c,u,r)}if(i&&(u!=kt.EndGroup||o!==e))throw new Error("invalid end group tag")},readField:ky,writeMessage(n,t,e){const r=n.getType();for(const i of r.fields.byNumber()){if(!NS(i,n)){if(i.req)throw new Error(`cannot encode field ${r.typeName}.${i.name} to binary: required field not set`);continue}const a=i.oneof?n[i.oneof.localName].value:n[i.localName];Oy(i,a,t,e)}return e.writeUnknownFields&&this.writeUnknownFields(n,t),t},writeField(n,t,e,r){t!==void 0&&Oy(n,t,e,r)}}}function ky(n,t,e,r,i){let{repeated:a,localName:s}=e;switch(e.oneof&&(n=n[e.oneof.localName],n.case!=s&&delete n.value,n.case=s,s="value"),e.kind){case"scalar":case"enum":const o=e.kind=="enum"?E.INT32:e.T;let u=Yu;if(e.kind=="scalar"&&e.L>0&&(u=a1),a){let d=n[s];if(r==kt.LengthDelimited&&o!=E.STRING&&o!=E.BYTES){let A=t.uint32()+t.pos;for(;t.pos<A;)d.push(u(t,o))}else d.push(u(t,o))}else n[s]=u(t,o);break;case"message":const c=e.T;a?n[s].push(mu(t,new c,i,e)):ai(n[s])?mu(t,n[s],i,e):(n[s]=mu(t,new c,i,e),c.fieldWrapper&&!e.oneof&&!e.repeated&&(n[s]=c.fieldWrapper.unwrapField(n[s])));break;case"map":let[h,g]=i1(e,t,i);n[s][h]=g;break}}function mu(n,t,e,r){const i=t.getType().runtime.bin,a=r==null?void 0:r.delimited;return i.readMessage(t,n,a?r.no:n.uint32(),e,a),t}function i1(n,t,e){const r=t.uint32(),i=t.pos+r;let a,s;for(;t.pos<i;){const[o]=t.tag();switch(o){case 1:a=Yu(t,n.K);break;case 2:switch(n.V.kind){case"scalar":s=Yu(t,n.V.T);break;case"enum":s=t.int32();break;case"message":s=mu(t,new n.V.T,e,void 0);break}break}}if(a===void 0&&(a=Cs(n.K,ia.BIGINT)),typeof a!="string"&&typeof a!="number"&&(a=a.toString()),s===void 0)switch(n.V.kind){case"scalar":s=Cs(n.V.T,ia.BIGINT);break;case"enum":s=n.V.T.values[0].no;break;case"message":s=new n.V.T;break}return[a,s]}function a1(n,t){const e=Yu(n,t);return typeof e=="bigint"?e.toString():e}function Yu(n,t){switch(t){case E.STRING:return n.string();case E.BOOL:return n.bool();case E.DOUBLE:return n.double();case E.FLOAT:return n.float();case E.INT32:return n.int32();case E.INT64:return n.int64();case E.UINT64:return n.uint64();case E.FIXED64:return n.fixed64();case E.BYTES:return n.bytes();case E.FIXED32:return n.fixed32();case E.SFIXED32:return n.sfixed32();case E.SFIXED64:return n.sfixed64();case E.SINT64:return n.sint64();case E.UINT32:return n.uint32();case E.SINT32:return n.sint32()}}function Oy(n,t,e,r){At(t!==void 0);const i=n.repeated;switch(n.kind){case"scalar":case"enum":let a=n.kind=="enum"?E.INT32:n.T;if(i)if(At(Array.isArray(t)),n.packed)o1(e,a,n.no,t);else for(const s of t)Io(e,a,n.no,s);else Io(e,a,n.no,t);break;case"message":if(i){At(Array.isArray(t));for(const s of t)Cy(e,r,n,s)}else Cy(e,r,n,t);break;case"map":At(typeof t=="object"&&t!=null);for(const[s,o]of Object.entries(t))s1(e,r,n,s,o);break}}function s1(n,t,e,r,i){n.tag(e.no,kt.LengthDelimited),n.fork();let a=r;switch(e.K){case E.INT32:case E.FIXED32:case E.UINT32:case E.SFIXED32:case E.SINT32:a=Number.parseInt(r);break;case E.BOOL:At(r=="true"||r=="false"),a=r=="true";break}switch(Io(n,e.K,1,a),e.V.kind){case"scalar":Io(n,e.V.T,2,i);break;case"enum":Io(n,E.INT32,2,i);break;case"message":At(i!==void 0),n.tag(2,kt.LengthDelimited).bytes(i.toBinary(t));break}n.join()}function Cy(n,t,e,r){const i=xS(e.T,r);e.delimited?n.tag(e.no,kt.StartGroup).raw(i.toBinary(t)).tag(e.no,kt.EndGroup):n.tag(e.no,kt.LengthDelimited).bytes(i.toBinary(t))}function Io(n,t,e,r){At(r!==void 0);let[i,a]=DS(t);n.tag(e,i)[a](r)}function o1(n,t,e,r){if(!r.length)return;n.tag(e,kt.LengthDelimited).fork();let[,i]=DS(t);for(let a=0;a<r.length;a++)n[i](r[a]);n.join()}function DS(n){let t=kt.Varint;switch(n){case E.BYTES:case E.STRING:t=kt.LengthDelimited;break;case E.DOUBLE:case E.FIXED64:case E.SFIXED64:t=kt.Bit64;break;case E.FIXED32:case E.SFIXED32:case E.FLOAT:t=kt.Bit32;break}const e=E[n].toLowerCase();return[t,e]}function l1(){return{setEnumType:yS,initPartial(n,t){if(n===void 0)return;const e=t.getType();for(const r of e.fields.byMember()){const i=r.localName,a=t,s=n;if(s[i]!=null)switch(r.kind){case"oneof":const o=s[i].case;if(o===void 0)continue;const u=r.findField(o);let c=s[i].value;u&&u.kind=="message"&&!ai(c,u.T)?c=new u.T(c):u&&u.kind==="scalar"&&u.T===E.BYTES&&(c=io(c)),a[i]={case:o,value:c};break;case"scalar":case"enum":let h=s[i];r.T===E.BYTES&&(h=r.repeated?h.map(io):io(h)),a[i]=h;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===E.BYTES)for(const[m,A]of Object.entries(s[i]))a[i][m]=io(A);else Object.assign(a[i],s[i]);break;case"message":const d=r.V.T;for(const m of Object.keys(s[i])){let A=s[i][m];d.fieldWrapper||(A=new d(A)),a[i][m]=A}break}break;case"message":const g=r.T;if(r.repeated)a[i]=s[i].map(d=>ai(d,g)?d:new g(d));else{const d=s[i];g.fieldWrapper?g.typeName==="google.protobuf.BytesValue"?a[i]=io(d):a[i]=d:a[i]=ai(d,g)?d:new g(d)}break}}},equals(n,t,e){return t===e?!0:!t||!e?!1:n.fields.byMember().every(r=>{const i=t[r.localName],a=e[r.localName];if(r.repeated){if(i.length!==a.length)return!1;switch(r.kind){case"message":return i.every((s,o)=>r.T.equals(s,a[o]));case"scalar":return i.every((s,o)=>ki(r.T,s,a[o]));case"enum":return i.every((s,o)=>ki(E.INT32,s,a[o]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":let s=i,o=a;return r.T.fieldWrapper&&(s!==void 0&&!ai(s)&&(s=r.T.fieldWrapper.wrapField(s)),o!==void 0&&!ai(o)&&(o=r.T.fieldWrapper.wrapField(o))),r.T.equals(s,o);case"enum":return ki(E.INT32,i,a);case"scalar":return ki(r.T,i,a);case"oneof":if(i.case!==a.case)return!1;const u=r.findField(i.case);if(u===void 0)return!0;switch(u.kind){case"message":return u.T.equals(i.value,a.value);case"enum":return ki(E.INT32,i.value,a.value);case"scalar":return ki(u.T,i.value,a.value)}throw new Error(`oneof cannot contain ${u.kind}`);case"map":const c=Object.keys(i).concat(Object.keys(a));switch(r.V.kind){case"message":const h=r.V.T;return c.every(d=>h.equals(i[d],a[d]));case"enum":return c.every(d=>ki(E.INT32,i[d],a[d]));case"scalar":const g=r.V.T;return c.every(d=>ki(g,i[d],a[d]))}break}})},clone(n){const t=n.getType(),e=new t,r=e;for(const i of t.fields.byMember()){const a=n[i.localName];let s;if(i.repeated)s=a.map($l);else if(i.kind=="map"){s=r[i.localName];for(const[o,u]of Object.entries(a))s[o]=$l(u)}else i.kind=="oneof"?s=i.findField(a.case)?{case:a.case,value:$l(a.value)}:{case:void 0}:s=$l(a);r[i.localName]=s}for(const i of t.runtime.bin.listUnknownFields(n))t.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return e}}}function $l(n){if(n===void 0)return n;if(ai(n))return n.clone();if(n instanceof Uint8Array){const t=new Uint8Array(n.byteLength);return t.set(n),t}return n}function io(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function u1(n,t,e){return{syntax:n,json:_A(),bin:r1(),util:Object.assign(Object.assign({},l1()),{newFieldList:t,initFields:e}),makeMessageType(r,i,a){return LA(this,r,i,a)},makeEnum:UA,makeEnumType:pS,getEnumType:MA,makeExtension(r,i,a){return jA(this,r,i,a)}}}class c1{constructor(t,e){this._fields=t,this._normalizer=e}findJsonName(t){if(!this.jsonNames){const e={};for(const r of this.list())e[r.jsonName]=e[r.name]=r;this.jsonNames=e}return this.jsonNames[t]}find(t){if(!this.numbers){const e={};for(const r of this.list())e[r.no]=r;this.numbers=e}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,e)=>t.no-e.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let e;for(const r of this.list())r.oneof?r.oneof!==e&&(e=r.oneof,t.push(e)):t.push(r)}return this.members}}function kS(n,t){const e=OS(n);return t?e:y1(g1(e))}function f1(n){return kS(n,!1)}const h1=OS;function OS(n){let t=!1;const e=[];for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.push(i),t=!1;break;default:t&&(t=!1,i=i.toUpperCase()),e.push(i);break}}return e.join("")}const d1=new Set(["constructor","toString","toJSON","valueOf"]),m1=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),CS=n=>`${n}$`,g1=n=>m1.has(n)?CS(n):n,y1=n=>d1.has(n)?CS(n):n;class p1{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=f1(t)}addField(t){At(t.oneof===this,`field ${t.name} not one of ${this.name}`),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[t]}}function v1(n,t){var e,r,i,a,s,o;const u=[];let c;for(const h of typeof n=="function"?n():n){const g=h;if(g.localName=kS(h.name,h.oneof!==void 0),g.jsonName=(e=h.jsonName)!==null&&e!==void 0?e:h1(h.name),g.repeated=(r=h.repeated)!==null&&r!==void 0?r:!1,h.kind=="scalar"&&(g.L=(i=h.L)!==null&&i!==void 0?i:ia.BIGINT),g.delimited=(a=h.delimited)!==null&&a!==void 0?a:!1,g.req=(s=h.req)!==null&&s!==void 0?s:!1,g.opt=(o=h.opt)!==null&&o!==void 0?o:!1,h.packed===void 0&&(g.packed=h.kind=="enum"||h.kind=="scalar"&&h.T!=E.BYTES&&h.T!=E.STRING),h.oneof!==void 0){const d=typeof h.oneof=="string"?h.oneof:h.oneof.name;(!c||c.name!=d)&&(c=new p1(d)),g.oneof=c,c.addField(g)}u.push(g)}return u}const f=u1("proto3",n=>new c1(n,t=>v1(t)),n=>{for(const t of n.getType().fields.byMember()){if(t.opt)continue;const e=t.localName,r=n;if(t.repeated){r[e]=[];continue}switch(t.kind){case"oneof":r[e]={case:void 0};break;case"enum":r[e]=0;break;case"map":r[e]={};break;case"scalar":r[e]=Cs(t.T,t.L);break}}});var Tt;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(Tt||(Tt={}));var Iy;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(Iy||(Iy={}));class qt extends D{constructor(t){super(),this.seconds=Z.zero,this.nanos=0,f.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${f.json.debug(t)}`);const r=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Z.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(t){const e=Number(this.seconds)*1e3;if(e<Date.parse("0001-01-01T00:00:00Z")||e>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(e).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return qt.fromDate(new Date)}static fromDate(t){const e=t.getTime();return new qt({seconds:Z.parse(Math.floor(e/1e3)),nanos:e%1e3*1e6})}static fromBinary(t,e){return new qt().fromBinary(t,e)}static fromJson(t,e){return new qt().fromJson(t,e)}static fromJsonString(t,e){return new qt().fromJsonString(t,e)}static equals(t,e){return f.util.equals(qt,t,e)}}qt.runtime=f;qt.typeName="google.protobuf.Timestamp";qt.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class fi extends D{constructor(t){super(),this.seconds=Z.zero,this.nanos=0,f.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(t)}`);const r=t.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(t)}`);const i=Number(r[1]);if(i>315576e6||i<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(t)}`);if(this.seconds=Z.parse(i),typeof r[2]=="string"){const a=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(a),(i<0||Object.is(i,-0))&&(this.nanos=-this.nanos)}return this}toJson(t){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let e=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),e+="."+r,this.nanos<0&&Number(this.seconds)==0&&(e="-"+e)}return e+"s"}static fromBinary(t,e){return new fi().fromBinary(t,e)}static fromJson(t,e){return new fi().fromJson(t,e)}static fromJsonString(t,e){return new fi().fromJsonString(t,e)}static equals(t,e){return f.util.equals(fi,t,e)}}fi.runtime=f;fi.typeName="google.protobuf.Duration";fi.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class hn extends D{constructor(t){super(),this.typeUrl="",this.value=new Uint8Array(0),f.util.initPartial(t,this)}toJson(t){var e;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),i=(e=t==null?void 0:t.typeRegistry)===null||e===void 0?void 0:e.findMessage(r);if(!i)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let s=i.fromBinary(this.value).toJson(t);return(r.startsWith("google.protobuf.")||s===null||Array.isArray(s)||typeof s!="object")&&(s={value:s}),s["@type"]=this.typeUrl,s}fromJson(t,e){var r;if(t===null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${t===null?"null":Array.isArray(t)?"array":typeof t}`);if(Object.keys(t).length==0)return this;const i=t["@type"];if(typeof i!="string"||i=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const a=this.typeUrlToName(i),s=(r=e==null?void 0:e.typeRegistry)===null||r===void 0?void 0:r.findMessage(a);if(!s)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${i} is not in the type registry`);let o;if(a.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(t,"value"))o=s.fromJson(t.value,e);else{const u=Object.assign({},t);delete u["@type"],o=s.fromJson(u,e)}return this.packFrom(o),this}packFrom(t){this.value=t.toBinary(),this.typeUrl=this.typeNameToUrl(t.getType().typeName)}unpackTo(t){return this.is(t.getType())?(t.fromBinary(this.value),!0):!1}unpack(t){if(this.typeUrl==="")return;const e=t.findMessage(this.typeUrlToName(this.typeUrl));if(e)return e.fromBinary(this.value)}is(t){if(this.typeUrl==="")return!1;const e=this.typeUrlToName(this.typeUrl);let r="";return typeof t=="string"?r=t:r=t.typeName,e===r}typeNameToUrl(t){return`type.googleapis.com/${t}`}typeUrlToName(t){if(!t.length)throw new Error(`invalid type url: ${t}`);const e=t.lastIndexOf("/"),r=e>=0?t.substring(e+1):t;if(!r.length)throw new Error(`invalid type url: ${t}`);return r}static pack(t){const e=new hn;return e.packFrom(t),e}static fromBinary(t,e){return new hn().fromBinary(t,e)}static fromJson(t,e){return new hn().fromJson(t,e)}static fromJsonString(t,e){return new hn().fromJsonString(t,e)}static equals(t,e){return f.util.equals(hn,t,e)}}hn.runtime=f;hn.typeName="google.protobuf.Any";hn.fields=f.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class mn extends D{constructor(t){super(),this.value=0,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.DOUBLE,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.DOUBLE,t)}catch(r){let i='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(t,e){return new mn().fromBinary(t,e)}static fromJson(t,e){return new mn().fromJson(t,e)}static fromJsonString(t,e){return new mn().fromJsonString(t,e)}static equals(t,e){return f.util.equals(mn,t,e)}}mn.runtime=f;mn.typeName="google.protobuf.DoubleValue";mn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);mn.fieldWrapper={wrapField(n){return new mn({value:n})},unwrapField(n){return n.value}};class gn extends D{constructor(t){super(),this.value=0,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.FLOAT,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.FLOAT,t)}catch(r){let i='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(t,e){return new gn().fromBinary(t,e)}static fromJson(t,e){return new gn().fromJson(t,e)}static fromJsonString(t,e){return new gn().fromJsonString(t,e)}static equals(t,e){return f.util.equals(gn,t,e)}}gn.runtime=f;gn.typeName="google.protobuf.FloatValue";gn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);gn.fieldWrapper={wrapField(n){return new gn({value:n})},unwrapField(n){return n.value}};class Ke extends D{constructor(t){super(),this.value=Z.zero,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.INT64,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.INT64,t)}catch(r){let i='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(t,e){return new Ke().fromBinary(t,e)}static fromJson(t,e){return new Ke().fromJson(t,e)}static fromJsonString(t,e){return new Ke().fromJsonString(t,e)}static equals(t,e){return f.util.equals(Ke,t,e)}}Ke.runtime=f;Ke.typeName="google.protobuf.Int64Value";Ke.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);Ke.fieldWrapper={wrapField(n){return new Ke({value:n})},unwrapField(n){return n.value}};class Ve extends D{constructor(t){super(),this.value=Z.zero,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.UINT64,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.UINT64,t)}catch(r){let i='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(t,e){return new Ve().fromBinary(t,e)}static fromJson(t,e){return new Ve().fromJson(t,e)}static fromJsonString(t,e){return new Ve().fromJsonString(t,e)}static equals(t,e){return f.util.equals(Ve,t,e)}}Ve.runtime=f;Ve.typeName="google.protobuf.UInt64Value";Ve.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);Ve.fieldWrapper={wrapField(n){return new Ve({value:n})},unwrapField(n){return n.value}};class ye extends D{constructor(t){super(),this.value=0,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.INT32,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.INT32,t)}catch(r){let i='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(t,e){return new ye().fromBinary(t,e)}static fromJson(t,e){return new ye().fromJson(t,e)}static fromJsonString(t,e){return new ye().fromJsonString(t,e)}static equals(t,e){return f.util.equals(ye,t,e)}}ye.runtime=f;ye.typeName="google.protobuf.Int32Value";ye.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);ye.fieldWrapper={wrapField(n){return new ye({value:n})},unwrapField(n){return n.value}};class yn extends D{constructor(t){super(),this.value=0,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.UINT32,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.UINT32,t)}catch(r){let i='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(t,e){return new yn().fromBinary(t,e)}static fromJson(t,e){return new yn().fromJson(t,e)}static fromJsonString(t,e){return new yn().fromJsonString(t,e)}static equals(t,e){return f.util.equals(yn,t,e)}}yn.runtime=f;yn.typeName="google.protobuf.UInt32Value";yn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);yn.fieldWrapper={wrapField(n){return new yn({value:n})},unwrapField(n){return n.value}};class He extends D{constructor(t){super(),this.value=!1,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.BOOL,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.BOOL,t)}catch(r){let i='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(t,e){return new He().fromBinary(t,e)}static fromJson(t,e){return new He().fromJson(t,e)}static fromJsonString(t,e){return new He().fromJsonString(t,e)}static equals(t,e){return f.util.equals(He,t,e)}}He.runtime=f;He.typeName="google.protobuf.BoolValue";He.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);He.fieldWrapper={wrapField(n){return new He({value:n})},unwrapField(n){return n.value}};class Ot extends D{constructor(t){super(),this.value="",f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.STRING,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.STRING,t)}catch(r){let i='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(t,e){return new Ot().fromBinary(t,e)}static fromJson(t,e){return new Ot().fromJson(t,e)}static fromJsonString(t,e){return new Ot().fromJsonString(t,e)}static equals(t,e){return f.util.equals(Ot,t,e)}}Ot.runtime=f;Ot.typeName="google.protobuf.StringValue";Ot.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);Ot.fieldWrapper={wrapField(n){return new Ot({value:n})},unwrapField(n){return n.value}};class pn extends D{constructor(t){super(),this.value=new Uint8Array(0),f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.BYTES,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.BYTES,t)}catch(r){let i='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(t,e){return new pn().fromBinary(t,e)}static fromJson(t,e){return new pn().fromJson(t,e)}static fromJsonString(t,e){return new pn().fromJsonString(t,e)}static equals(t,e){return f.util.equals(pn,t,e)}}pn.runtime=f;pn.typeName="google.protobuf.BytesValue";pn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);pn.fieldWrapper={wrapField(n){return new pn({value:n})},unwrapField(n){return n.value}};function S1(n,t,e){try{const r=Nm.dec(n);return t?t.fromBinary(r,e):r}catch(r){throw ot.from(r,X.DataLoss)}}function T1(n,t){const e={};for(const[r,i]of Object.entries(n.methods)){const a=t(Object.assign(Object.assign({},i),{localName:r,service:n}));a!=null&&(e[r]=a)}return e}const By=1;function Ry(n){let t,e=new Uint8Array(0);function r(i){const a=new Uint8Array(e.length+i.length);a.set(e),a.set(i,e.length),e=a}return new ReadableStream({start(){t=n.getReader()},async pull(i){let a;for(;;){if(a===void 0&&e.byteLength>=5){let u=0;for(let c=1;c<5;c++)u=(u<<8)+e[c];a={flags:e[0],length:u}}if(a!==void 0&&e.byteLength>=a.length+5)break;const o=await t.read();if(o.done)break;r(o.value)}if(a===void 0){if(e.byteLength==0){i.close();return}i.error(new ot("premature end of stream",X.DataLoss));return}const s=e.subarray(5,5+a.length);e=e.subarray(5+a.length),i.enqueue({flags:a.flags,data:s})}})}function zy(n,t){const e=new Uint8Array(t.length+5);e.set(t,5);const r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.setUint8(0,n),r.setUint32(1,t.length),e}var b1=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(a){e[a]=n[a]&&function(s){return new Promise(function(o,u){s=n[a](s),i(o,u,s.done,s.value)})}}function i(a,s,o,u){Promise.resolve(u).then(function(c){a({value:c,done:o})},s)}},Qo=function(n){return this instanceof Qo?(this.v=n,this):new Qo(n)},w1=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,a=[];return i={},o("next"),o("throw"),o("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(A){return Promise.resolve(A).then(m,g)}}function o(m,A){r[m]&&(i[m]=function(b){return new Promise(function(x,p){a.push([m,b,x,p])>1||u(m,b)})},A&&(i[m]=A(i[m])))}function u(m,A){try{c(r[m](A))}catch(b){d(a[0][3],b)}}function c(m){m.value instanceof Qo?Promise.resolve(m.value.v).then(h,g):d(a[0][2],m)}function h(m){u("next",m)}function g(m){u("throw",m)}function d(m,A){m(A),a.shift(),a.length&&u(a[0][0],a[0][1])}},A1=function(n){var t,e;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,a){t[i]=n[i]?function(s){return(e=!e)?{value:Qo(n[i](s)),done:!1}:a?a(s):s}:a}};function E1(n){return w1(this,arguments,function*(){yield Qo(yield*A1(b1(n)))})}var IS=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(a){e[a]=n[a]&&function(s){return new Promise(function(o,u){s=n[a](s),i(o,u,s.done,s.value)})}}function i(a,s,o,u){Promise.resolve(u).then(function(c){a({value:c,done:o})},s)}},Is=function(n){return this instanceof Is?(this.v=n,this):new Is(n)},N1=function(n){var t,e;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,a){t[i]=n[i]?function(s){return(e=!e)?{value:Is(n[i](s)),done:!1}:a?a(s):s}:a}},x1=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,a=[];return i={},o("next"),o("throw"),o("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(A){return Promise.resolve(A).then(m,g)}}function o(m,A){r[m]&&(i[m]=function(b){return new Promise(function(x,p){a.push([m,b,x,p])>1||u(m,b)})},A&&(i[m]=A(i[m])))}function u(m,A){try{c(r[m](A))}catch(b){d(a[0][3],b)}}function c(m){m.value instanceof Is?Promise.resolve(m.value.v).then(h,g):d(a[0][2],m)}function h(m){u("next",m)}function g(m){u("throw",m)}function d(m,A){m(A),a.shift(),a.length&&u(a[0][0],a[0][1])}};function D1(n,t){return T1(n,e=>{switch(e.kind){case Tt.Unary:return k1(t,n,e);case Tt.ServerStreaming:return O1(t,n,e);case Tt.ClientStreaming:return C1(t,n,e);case Tt.BiDiStreaming:return I1(t,n,e);default:return null}})}function k1(n,t,e){return async function(r,i){var a,s;const o=await n.unary(t,e,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);return(a=i==null?void 0:i.onHeader)===null||a===void 0||a.call(i,o.header),(s=i==null?void 0:i.onTrailer)===null||s===void 0||s.call(i,o.trailer),o.message}}function O1(n,t,e){return function(r,i){return BS(n.stream(t,e,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,E1([r]),i==null?void 0:i.contextValues),i)}}function C1(n,t,e){return async function(r,i){var a,s,o,u,c,h;const g=await n.stream(t,e,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);(c=i==null?void 0:i.onHeader)===null||c===void 0||c.call(i,g.header);let d,m=0;try{for(var A=!0,b=IS(g.message),x;x=await b.next(),a=x.done,!a;A=!0)u=x.value,A=!1,d=u,m++}catch(p){s={error:p}}finally{try{!A&&!a&&(o=b.return)&&await o.call(b)}finally{if(s)throw s.error}}if(!d)throw new ot("protocol error: missing response message",X.Unimplemented);if(m>1)throw new ot("protocol error: received extra messages for client streaming method",X.Unimplemented);return(h=i==null?void 0:i.onTrailer)===null||h===void 0||h.call(i,g.trailer),d}}function I1(n,t,e){return function(r,i){return BS(n.stream(t,e,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues),i)}}function BS(n,t){const e=function(){return x1(this,arguments,function*(){var r,i;const a=yield Is(n);(r=t==null?void 0:t.onHeader)===null||r===void 0||r.call(t,a.header),yield Is(yield*N1(IS(a.message))),(i=t==null?void 0:t.onTrailer)===null||i===void 0||i.call(t,a.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>e.next()})}}function B1(...n){const t=new AbortController,e=n.filter(i=>i!==void 0).concat(t.signal);for(const i of e){if(i.aborted){r.apply(i);break}i.addEventListener("abort",r)}function r(){t.signal.aborted||t.abort(RS(this));for(const i of e)i.removeEventListener("abort",r)}return t}function R1(n){const t=new AbortController,e=()=>{t.abort(new ot("the operation timed out",X.DeadlineExceeded))};let r;return n!==void 0&&(n<=0?e():r=setTimeout(e,n)),{signal:t.signal,cleanup:()=>clearTimeout(r)}}function RS(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const t=new Error("This operation was aborted");return t.name="AbortError",t}function My(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,t){return this[n.id]=t,this},delete(n){return delete this[n.id],this}}}const Rf=128;function Uy(n){const t=new Headers,e=new TextDecoder().decode(n).split(`\r
`);for(const r of e){if(r==="")continue;const i=r.indexOf(":");if(i>0){const a=r.substring(0,i).trim(),s=r.substring(i+1).trim();t.append(a,s)}}return t}const z1="Content-Type",M1="Grpc-Timeout",Bs="Grpc-Status",zS="Grpc-Message",U1="Grpc-Status-Details-Bin",L1="X-User-Agent",J1="X-Grpc-Web",q1="application/grpc-web+proto",P1="application/grpc-web+json";class hi extends D{constructor(t){super(),this.code=0,this.message="",this.details=[],f.util.initPartial(t,this)}static fromBinary(t,e){return new hi().fromBinary(t,e)}static fromJson(t,e){return new hi().fromJson(t,e)}static fromJsonString(t,e){return new hi().fromJsonString(t,e)}static equals(t,e){return f.util.equals(hi,t,e)}}hi.runtime=f;hi.typeName="google.rpc.Status";hi.fields=f.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:hn,repeated:!0}]);const K1="0";function MS(n){var t;const e=n.get(U1);if(e!=null){const i=S1(e,hi);if(i.code==0)return;const a=new ot(i.message,i.code,n);return a.details=i.details.map(s=>({type:s.typeUrl.substring(s.typeUrl.lastIndexOf("/")+1),value:s.value})),a}const r=n.get(Bs);if(r!=null){if(r===K1)return;const i=parseInt(r,10);return i in X?new ot(decodeURIComponent((t=n.get(zS))!==null&&t!==void 0?t:""),i,n):new ot(`invalid grpc-status: ${r}`,X.Internal,n)}}function Ly(n,t,e){const r=typeof t=="string"?t:t.typeName,i=typeof e=="string"?e:e.name;return n.toString().replace(/\/?$/,`/${r}/${i}`)}function US(n,t){return t instanceof n?t:new n(t)}function V1(n,t){function e(r){return r.done===!0?r:{done:r.done,value:US(n,r.value)}}return{[Symbol.asyncIterator](){const r=t[Symbol.asyncIterator](),i={next:()=>r.next().then(e)};return r.throw!==void 0&&(i.throw=a=>r.throw(a).then(e)),r.return!==void 0&&(i.return=a=>r.return(a).then(e)),i}}}function LS(n,t){var e;return(e=t==null?void 0:t.concat().reverse().reduce((r,i)=>i(r),n))!==null&&e!==void 0?e:n}function H1(n){var t;const e=Object.assign({},n);return(t=e.ignoreUnknownFields)!==null&&t!==void 0||(e.ignoreUnknownFields=!0),e}function Jy(n,t,e,r){const i=t?qy(n.I,r):Py(n.I,e);return{parse:(t?qy(n.O,r):Py(n.O,e)).parse,serialize:i.serialize}}function qy(n,t){return{parse(e){try{return n.fromBinary(e,t)}catch(r){const i=r instanceof Error?r.message:String(r);throw new ot(`parse binary: ${i}`,X.Internal)}},serialize(e){try{return e.toBinary(t)}catch(r){const i=r instanceof Error?r.message:String(r);throw new ot(`serialize binary: ${i}`,X.Internal)}}}}function Py(n,t){var e,r;const i=(e=t==null?void 0:t.textEncoder)!==null&&e!==void 0?e:new TextEncoder,a=(r=t==null?void 0:t.textDecoder)!==null&&r!==void 0?r:new TextDecoder,s=H1(t);return{parse(o){try{const u=a.decode(o);return n.fromJsonString(u,s)}catch(u){throw ot.from(u,X.InvalidArgument)}},serialize(o){try{const u=o.toJsonString(s);return i.encode(u)}catch(u){throw ot.from(u,X.Internal)}}}}function $1(n){const t=LS(n.next,n.interceptors),[e,r,i]=JS(n),a=Object.assign(Object.assign({},n.req),{message:US(n.req.method.I,n.req.message),signal:e});return t(a).then(s=>(i(),s),r)}function j1(n){const t=LS(n.next,n.interceptors),[e,r,i]=JS(n),a=Object.assign(Object.assign({},n.req),{message:V1(n.req.method.I,n.req.message),signal:e});let s=!1;return e.addEventListener("abort",function(){var o,u;const c=n.req.message[Symbol.asyncIterator]();s||(o=c.throw)===null||o===void 0||o.call(c,this.reason).catch(()=>{}),(u=c.return)===null||u===void 0||u.call(c).catch(()=>{})}),t(a).then(o=>Object.assign(Object.assign({},o),{message:{[Symbol.asyncIterator](){const u=o.message[Symbol.asyncIterator]();return{next(){return u.next().then(c=>(c.done==!0&&(s=!0,i()),c),r)}}}}}),r)}function JS(n){const{signal:t,cleanup:e}=R1(n.timeoutMs),r=B1(n.signal,t);return[r.signal,function(a){const s=ot.from(t.aborted?RS(t):a);return r.abort(s),e(),Promise.reject(s)},function(){e(),r.abort()}]}function G1(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function Ky(n,t){const e=MS(n);if(e)throw t.forEach((r,i)=>{e.metadata.append(i,r)}),e;if(!t.has(Bs)&&!n.has(Bs))throw new ot("protocol error: missing status",X.Internal)}function Vy(n,t,e,r){const i=new Headers(e??{});return i.set(z1,n?q1:P1),i.set(J1,"1"),i.set(L1,"connect-es/1.6.1"),t!==void 0&&i.set(M1,`${t}m`),i}function Y1(n){switch(n){case 400:return X.Internal;case 401:return X.Unauthenticated;case 403:return X.PermissionDenied;case 404:return X.Unimplemented;case 429:return X.Unavailable;case 502:return X.Unavailable;case 503:return X.Unavailable;case 504:return X.Unavailable;default:return X.Unknown}}function Hy(n,t){var e;if(n>=200&&n<300)return{foundStatus:t.has(Bs),headerError:MS(t)};throw new ot(decodeURIComponent((e=t.get(zS))!==null&&e!==void 0?e:`HTTP ${n}`),Y1(n),t)}var ya=function(n){return this instanceof ya?(this.v=n,this):new ya(n)},X1=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,a=[];return i={},o("next"),o("throw"),o("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(A){return Promise.resolve(A).then(m,g)}}function o(m,A){r[m]&&(i[m]=function(b){return new Promise(function(x,p){a.push([m,b,x,p])>1||u(m,b)})},A&&(i[m]=A(i[m])))}function u(m,A){try{c(r[m](A))}catch(b){d(a[0][3],b)}}function c(m){m.value instanceof ya?Promise.resolve(m.value.v).then(h,g):d(a[0][2],m)}function h(m){u("next",m)}function g(m){u("throw",m)}function d(m,A){m(A),a.shift(),a.length&&u(a[0][0],a[0][1])}};function F1(n){var t;G1();const e=(t=n.useBinaryFormat)!==null&&t!==void 0?t:!0;return{async unary(r,i,a,s,o,u,c){var h;const{serialize:g,parse:d}=Jy(i,e,n.jsonOptions,n.binaryOptions);return s=s===void 0?n.defaultTimeoutMs:s<=0?void 0:s,await $1({interceptors:n.interceptors,signal:a,timeoutMs:s,req:{stream:!1,service:r,method:i,url:Ly(n.baseUrl,r,i),init:{method:"POST",credentials:(h=n.credentials)!==null&&h!==void 0?h:"same-origin",redirect:"error",mode:"cors"},header:Vy(e,s,o),contextValues:c??My(),message:u},next:async m=>{var A;const x=await((A=n.fetch)!==null&&A!==void 0?A:globalThis.fetch)(m.url,Object.assign(Object.assign({},m.init),{headers:m.header,signal:m.signal,body:zy(0,g(m.message))})),{headerError:p}=Hy(x.status,x.headers);if(!x.body)throw p!==void 0?p:"missing response body";const y=Ry(x.body).getReader();let v,w;for(;;){const O=await y.read();if(O.done)break;const{flags:I,data:C}=O.value;if((I&By)===By)throw new ot("protocol error: received unsupported compressed output",X.Internal);if(I===Rf){if(v!==void 0)throw"extra trailer";v=Uy(C);continue}if(w!==void 0)throw new ot("extra message",X.Unimplemented);w=d(C)}if(v===void 0)throw p!==void 0?p:new ot("missing trailer",x.headers.has(Bs)?X.Unimplemented:X.Unknown);if(Ky(v,x.headers),w===void 0)throw new ot("missing message",v.has(Bs)?X.Unimplemented:X.Unknown);return{stream:!1,service:r,method:i,header:x.headers,message:w,trailer:v}}})},async stream(r,i,a,s,o,u,c){var h;const{serialize:g,parse:d}=Jy(i,e,n.jsonOptions,n.binaryOptions);function m(b,x,p,y,v){return X1(this,arguments,function*(){const O=Ry(b).getReader();if(x){if(!(yield ya(O.read())).done)throw"extra data for trailers-only";return yield ya(void 0)}let I=!1;for(;;){const C=yield ya(O.read());if(C.done)break;const{flags:R,data:P}=C.value;if((R&Rf)===Rf){if(I)throw"extra trailer";I=!0;const J=Uy(P);Ky(J,y),J.forEach((Vt,fe)=>p.set(fe,Vt));continue}if(I)throw"extra message";yield yield ya(d(P))}if("throwIfAborted"in v&&v.throwIfAborted(),!I)throw"missing trailer"})}async function A(b){if(i.kind!=Tt.ServerStreaming)throw"The fetch API does not support streaming request bodies";const x=await b[Symbol.asyncIterator]().next();if(x.done==!0)throw"missing request message";return zy(0,g(x.value))}return s=s===void 0?n.defaultTimeoutMs:s<=0?void 0:s,j1({interceptors:n.interceptors,signal:a,timeoutMs:s,req:{stream:!0,service:r,method:i,url:Ly(n.baseUrl,r,i),init:{method:"POST",credentials:(h=n.credentials)!==null&&h!==void 0?h:"same-origin",redirect:"error",mode:"cors"},header:Vy(e,s,o),contextValues:c??My(),message:u},next:async b=>{var x;const y=await((x=n.fetch)!==null&&x!==void 0?x:globalThis.fetch)(b.url,Object.assign(Object.assign({},b.init),{headers:b.header,signal:b.signal,body:await A(b.message)})),{foundStatus:v,headerError:w}=Hy(y.status,y.headers);if(w!=null)throw w;if(!y.body)throw"missing response body";const O=new Headers;return Object.assign(Object.assign({},b),{header:y.headers,trailer:O,message:m(y.body,v,O,y.headers,b.signal)})}})}}}var K=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))(K||{});f.util.setEnumType(K,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var Rs=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(Rs||{});f.util.setEnumType(Rs,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const Rn=class Rn extends D{constructor(e){super();l(this,"root");l(this,"presences",{});f.util.initPartial(e,this)}static fromBinary(e,r){return new Rn().fromBinary(e,r)}static fromJson(e,r){return new Rn().fromJson(e,r)}static fromJsonString(e,r){return new Rn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Rn,e,r)}};l(Rn,"runtime",f),l(Rn,"typeName","yorkie.v1.Snapshot"),l(Rn,"fields",f.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:ue},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:Ms}}]));let Rh=Rn;var Ce;let Ni=(Ce=class extends D{constructor(e){super();l(this,"documentKey","");l(this,"checkpoint");l(this,"snapshot",new Uint8Array(0));l(this,"changes",[]);l(this,"minSyncedTicket");l(this,"isRemoved",!1);l(this,"versionVector");f.util.initPartial(e,this)}static fromBinary(e,r){return new Ce().fromBinary(e,r)}static fromJson(e,r){return new Ce().fromJson(e,r)}static fromJsonString(e,r){return new Ce().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Ce,e,r)}},l(Ce,"runtime",f),l(Ce,"typeName","yorkie.v1.ChangePack"),l(Ce,"fields",f.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:KS},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:qS,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:M},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:Pc}])),Ce);var Ie;let qS=(Ie=class extends D{constructor(e){super();l(this,"id");l(this,"message","");l(this,"operations",[]);l(this,"presenceChange");f.util.initPartial(e,this)}static fromBinary(e,r){return new Ie().fromBinary(e,r)}static fromJson(e,r){return new Ie().fromJson(e,r)}static fromJsonString(e,r){return new Ie().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Ie,e,r)}},l(Ie,"runtime",f),l(Ie,"typeName","yorkie.v1.Change"),l(Ie,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:qc},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:xm,repeated:!0},{no:4,name:"presence_change",kind:"message",T:tl}])),Ie);var Be;let qc=(Be=class extends D{constructor(e){super();l(this,"clientSeq",0);l(this,"serverSeq",Z.zero);l(this,"lamport",Z.zero);l(this,"actorId",new Uint8Array(0));l(this,"versionVector");f.util.initPartial(e,this)}static fromBinary(e,r){return new Be().fromBinary(e,r)}static fromJson(e,r){return new Be().fromJson(e,r)}static fromJsonString(e,r){return new Be().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Be,e,r)}},l(Be,"runtime",f),l(Be,"typeName","yorkie.v1.ChangeID"),l(Be,"fields",f.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:Pc}])),Be);var Re;let Pc=(Re=class extends D{constructor(e){super();l(this,"vector",{});f.util.initPartial(e,this)}static fromBinary(e,r){return new Re().fromBinary(e,r)}static fromJson(e,r){return new Re().fromJson(e,r)}static fromJsonString(e,r){return new Re().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Re,e,r)}},l(Re,"runtime",f),l(Re,"typeName","yorkie.v1.VersionVector"),l(Re,"fields",f.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),Re);var ze;let xm=(ze=class extends D{constructor(e){super();l(this,"body",{case:void 0});f.util.initPartial(e,this)}static fromBinary(e,r){return new ze().fromBinary(e,r)}static fromJson(e,r){return new ze().fromJson(e,r)}static fromJsonString(e,r){return new ze().fromJsonString(e,r)}static equals(e,r){return f.util.equals(ze,e,r)}},l(ze,"runtime",f),l(ze,"typeName","yorkie.v1.Operation"),l(ze,"fields",f.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:Xu,oneof:"body"},{no:2,name:"add",kind:"message",T:Fu,oneof:"body"},{no:3,name:"move",kind:"message",T:Zu,oneof:"body"},{no:4,name:"remove",kind:"message",T:Qu,oneof:"body"},{no:5,name:"edit",kind:"message",T:_u,oneof:"body"},{no:7,name:"style",kind:"message",T:Wu,oneof:"body"},{no:8,name:"increase",kind:"message",T:tc,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:ec,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:nc,oneof:"body"},{no:11,name:"array_set",kind:"message",T:rc,oneof:"body"}])),ze);const zn=class zn extends D{constructor(e){super();l(this,"parentCreatedAt");l(this,"key","");l(this,"value");l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new zn().fromBinary(e,r)}static fromJson(e,r){return new zn().fromJson(e,r)}static fromJsonString(e,r){return new zn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(zn,e,r)}};l(zn,"runtime",f),l(zn,"typeName","yorkie.v1.Operation.Set"),l(zn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:Oe},{no:4,name:"executed_at",kind:"message",T:M}]));let Xu=zn;const Mn=class Mn extends D{constructor(e){super();l(this,"parentCreatedAt");l(this,"prevCreatedAt");l(this,"value");l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Mn().fromBinary(e,r)}static fromJson(e,r){return new Mn().fromJson(e,r)}static fromJsonString(e,r){return new Mn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Mn,e,r)}};l(Mn,"runtime",f),l(Mn,"typeName","yorkie.v1.Operation.Add"),l(Mn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"prev_created_at",kind:"message",T:M},{no:3,name:"value",kind:"message",T:Oe},{no:4,name:"executed_at",kind:"message",T:M}]));let Fu=Mn;const Un=class Un extends D{constructor(e){super();l(this,"parentCreatedAt");l(this,"prevCreatedAt");l(this,"createdAt");l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Un().fromBinary(e,r)}static fromJson(e,r){return new Un().fromJson(e,r)}static fromJsonString(e,r){return new Un().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Un,e,r)}};l(Un,"runtime",f),l(Un,"typeName","yorkie.v1.Operation.Move"),l(Un,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"prev_created_at",kind:"message",T:M},{no:3,name:"created_at",kind:"message",T:M},{no:4,name:"executed_at",kind:"message",T:M}]));let Zu=Un;const Ln=class Ln extends D{constructor(e){super();l(this,"parentCreatedAt");l(this,"createdAt");l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Ln().fromBinary(e,r)}static fromJson(e,r){return new Ln().fromJson(e,r)}static fromJsonString(e,r){return new Ln().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Ln,e,r)}};l(Ln,"runtime",f),l(Ln,"typeName","yorkie.v1.Operation.Remove"),l(Ln,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"executed_at",kind:"message",T:M}]));let Qu=Ln;const Jn=class Jn extends D{constructor(e){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"createdAtMapByActor",{});l(this,"content","");l(this,"executedAt");l(this,"attributes",{});f.util.initPartial(e,this)}static fromBinary(e,r){return new Jn().fromBinary(e,r)}static fromJson(e,r){return new Jn().fromJson(e,r)}static fromJsonString(e,r){return new Jn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Jn,e,r)}};l(Jn,"runtime",f),l(Jn,"typeName","yorkie.v1.Operation.Edit"),l(Jn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:Ia},{no:3,name:"to",kind:"message",T:Ia},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:M},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let _u=Jn;const qn=class qn extends D{constructor(e){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"attributes",{});l(this,"executedAt");l(this,"createdAtMapByActor",{});f.util.initPartial(e,this)}static fromBinary(e,r){return new qn().fromBinary(e,r)}static fromJson(e,r){return new qn().fromJson(e,r)}static fromJsonString(e,r){return new qn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(qn,e,r)}};l(qn,"runtime",f),l(qn,"typeName","yorkie.v1.Operation.Style"),l(qn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:Ia},{no:3,name:"to",kind:"message",T:Ia},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:M},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}}]));let Wu=qn;const Pn=class Pn extends D{constructor(e){super();l(this,"parentCreatedAt");l(this,"value");l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Pn().fromBinary(e,r)}static fromJson(e,r){return new Pn().fromJson(e,r)}static fromJsonString(e,r){return new Pn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Pn,e,r)}};l(Pn,"runtime",f),l(Pn,"typeName","yorkie.v1.Operation.Increase"),l(Pn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"value",kind:"message",T:Oe},{no:3,name:"executed_at",kind:"message",T:M}]));let tc=Pn;const Kn=class Kn extends D{constructor(e){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"createdAtMapByActor",{});l(this,"contents",[]);l(this,"splitLevel",0);l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Kn().fromBinary(e,r)}static fromJson(e,r){return new Kn().fromJson(e,r)}static fromJsonString(e,r){return new Kn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Kn,e,r)}};l(Kn,"runtime",f),l(Kn,"typeName","yorkie.v1.Operation.TreeEdit"),l(Kn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:Oa},{no:3,name:"to",kind:"message",T:Oa},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}},{no:5,name:"contents",kind:"message",T:hc,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:M}]));let ec=Kn;const Vn=class Vn extends D{constructor(e){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"attributes",{});l(this,"executedAt");l(this,"attributesToRemove",[]);l(this,"createdAtMapByActor",{});f.util.initPartial(e,this)}static fromBinary(e,r){return new Vn().fromBinary(e,r)}static fromJson(e,r){return new Vn().fromJson(e,r)}static fromJsonString(e,r){return new Vn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Vn,e,r)}};l(Vn,"runtime",f),l(Vn,"typeName","yorkie.v1.Operation.TreeStyle"),l(Vn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:Oa},{no:3,name:"to",kind:"message",T:Oa},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:M},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}}]));let nc=Vn;const Hn=class Hn extends D{constructor(e){super();l(this,"parentCreatedAt");l(this,"createdAt");l(this,"value");l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Hn().fromBinary(e,r)}static fromJson(e,r){return new Hn().fromJson(e,r)}static fromJsonString(e,r){return new Hn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Hn,e,r)}};l(Hn,"runtime",f),l(Hn,"typeName","yorkie.v1.Operation.ArraySet"),l(Hn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"value",kind:"message",T:Oe},{no:4,name:"executed_at",kind:"message",T:M}]));let rc=Hn;const $n=class $n extends D{constructor(e){super();l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");l(this,"type",0);l(this,"value",new Uint8Array(0));f.util.initPartial(e,this)}static fromBinary(e,r){return new $n().fromBinary(e,r)}static fromJson(e,r){return new $n().fromJson(e,r)}static fromJsonString(e,r){return new $n().fromJsonString(e,r)}static equals(e,r){return f.util.equals($n,e,r)}};l($n,"runtime",f),l($n,"typeName","yorkie.v1.JSONElementSimple"),l($n,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"moved_at",kind:"message",T:M},{no:3,name:"removed_at",kind:"message",T:M},{no:4,name:"type",kind:"enum",T:f.getEnumType(K)},{no:5,name:"value",kind:"scalar",T:12}]));let Oe=$n;const jn=class jn extends D{constructor(e){super();l(this,"body",{case:void 0});f.util.initPartial(e,this)}static fromBinary(e,r){return new jn().fromBinary(e,r)}static fromJson(e,r){return new jn().fromJson(e,r)}static fromJsonString(e,r){return new jn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(jn,e,r)}};l(jn,"runtime",f),l(jn,"typeName","yorkie.v1.JSONElement"),l(jn,"fields",f.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:ic,oneof:"body"},{no:2,name:"json_array",kind:"message",T:ac,oneof:"body"},{no:3,name:"primitive",kind:"message",T:sc,oneof:"body"},{no:5,name:"text",kind:"message",T:oc,oneof:"body"},{no:6,name:"counter",kind:"message",T:lc,oneof:"body"},{no:7,name:"tree",kind:"message",T:uc,oneof:"body"}]));let ue=jn;const Gn=class Gn extends D{constructor(e){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Gn().fromBinary(e,r)}static fromJson(e,r){return new Gn().fromJson(e,r)}static fromJsonString(e,r){return new Gn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Gn,e,r)}};l(Gn,"runtime",f),l(Gn,"typeName","yorkie.v1.JSONElement.JSONObject"),l(Gn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:PS,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}]));let ic=Gn;const Yn=class Yn extends D{constructor(e){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Yn().fromBinary(e,r)}static fromJson(e,r){return new Yn().fromJson(e,r)}static fromJsonString(e,r){return new Yn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Yn,e,r)}};l(Yn,"runtime",f),l(Yn,"typeName","yorkie.v1.JSONElement.JSONArray"),l(Yn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:cc,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}]));let ac=Yn;const Xn=class Xn extends D{constructor(e){super();l(this,"type",0);l(this,"value",new Uint8Array(0));l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Xn().fromBinary(e,r)}static fromJson(e,r){return new Xn().fromJson(e,r)}static fromJsonString(e,r){return new Xn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Xn,e,r)}};l(Xn,"runtime",f),l(Xn,"typeName","yorkie.v1.JSONElement.Primitive"),l(Xn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(K)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:M},{no:4,name:"moved_at",kind:"message",T:M},{no:5,name:"removed_at",kind:"message",T:M}]));let sc=Xn;const Fn=class Fn extends D{constructor(e){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Fn().fromBinary(e,r)}static fromJson(e,r){return new Fn().fromJson(e,r)}static fromJsonString(e,r){return new Fn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Fn,e,r)}};l(Fn,"runtime",f),l(Fn,"typeName","yorkie.v1.JSONElement.Text"),l(Fn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:fc,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}]));let oc=Fn;const Zn=class Zn extends D{constructor(e){super();l(this,"type",0);l(this,"value",new Uint8Array(0));l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Zn().fromBinary(e,r)}static fromJson(e,r){return new Zn().fromJson(e,r)}static fromJsonString(e,r){return new Zn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Zn,e,r)}};l(Zn,"runtime",f),l(Zn,"typeName","yorkie.v1.JSONElement.Counter"),l(Zn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(K)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:M},{no:4,name:"moved_at",kind:"message",T:M},{no:5,name:"removed_at",kind:"message",T:M}]));let lc=Zn;const Qn=class Qn extends D{constructor(e){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Qn().fromBinary(e,r)}static fromJson(e,r){return new Qn().fromJson(e,r)}static fromJsonString(e,r){return new Qn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Qn,e,r)}};l(Qn,"runtime",f),l(Qn,"typeName","yorkie.v1.JSONElement.Tree"),l(Qn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Wo,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}]));let uc=Qn;var Me;let PS=(Me=class extends D{constructor(e){super();l(this,"key","");l(this,"element");f.util.initPartial(e,this)}static fromBinary(e,r){return new Me().fromBinary(e,r)}static fromJson(e,r){return new Me().fromJson(e,r)}static fromJsonString(e,r){return new Me().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Me,e,r)}},l(Me,"runtime",f),l(Me,"typeName","yorkie.v1.RHTNode"),l(Me,"fields",f.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:ue}])),Me);const un=class un extends D{constructor(e){super();l(this,"next");l(this,"element");f.util.initPartial(e,this)}static fromBinary(e,r){return new un().fromBinary(e,r)}static fromJson(e,r){return new un().fromJson(e,r)}static fromJsonString(e,r){return new un().fromJsonString(e,r)}static equals(e,r){return f.util.equals(un,e,r)}};l(un,"runtime",f),l(un,"typeName","yorkie.v1.RGANode"),l(un,"fields",f.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:un},{no:2,name:"element",kind:"message",T:ue}]));let cc=un;const _n=class _n extends D{constructor(e){super();l(this,"value","");l(this,"updatedAt");l(this,"isRemoved",!1);f.util.initPartial(e,this)}static fromBinary(e,r){return new _n().fromBinary(e,r)}static fromJson(e,r){return new _n().fromJson(e,r)}static fromJsonString(e,r){return new _n().fromJsonString(e,r)}static equals(e,r){return f.util.equals(_n,e,r)}};l(_n,"runtime",f),l(_n,"typeName","yorkie.v1.NodeAttr"),l(_n,"fields",f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:M},{no:3,name:"is_removed",kind:"scalar",T:8}]));let zs=_n;const Wn=class Wn extends D{constructor(e){super();l(this,"id");l(this,"value","");l(this,"removedAt");l(this,"insPrevId");l(this,"attributes",{});f.util.initPartial(e,this)}static fromBinary(e,r){return new Wn().fromBinary(e,r)}static fromJson(e,r){return new Wn().fromJson(e,r)}static fromJsonString(e,r){return new Wn().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Wn,e,r)}};l(Wn,"runtime",f),l(Wn,"typeName","yorkie.v1.TextNode"),l(Wn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:_o},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:M},{no:4,name:"ins_prev_id",kind:"message",T:_o},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:zs}}]));let fc=Wn;const tr=class tr extends D{constructor(e){super();l(this,"createdAt");l(this,"offset",0);f.util.initPartial(e,this)}static fromBinary(e,r){return new tr().fromBinary(e,r)}static fromJson(e,r){return new tr().fromJson(e,r)}static fromJsonString(e,r){return new tr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(tr,e,r)}};l(tr,"runtime",f),l(tr,"typeName","yorkie.v1.TextNodeID"),l(tr,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"offset",kind:"scalar",T:5}]));let _o=tr;const er=class er extends D{constructor(e){super();l(this,"id");l(this,"type","");l(this,"value","");l(this,"removedAt");l(this,"insPrevId");l(this,"insNextId");l(this,"depth",0);l(this,"attributes",{});f.util.initPartial(e,this)}static fromBinary(e,r){return new er().fromBinary(e,r)}static fromJson(e,r){return new er().fromJson(e,r)}static fromJsonString(e,r){return new er().fromJsonString(e,r)}static equals(e,r){return f.util.equals(er,e,r)}};l(er,"runtime",f),l(er,"typeName","yorkie.v1.TreeNode"),l(er,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:_i},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:M},{no:5,name:"ins_prev_id",kind:"message",T:_i},{no:6,name:"ins_next_id",kind:"message",T:_i},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:zs}}]));let Wo=er;const nr=class nr extends D{constructor(e){super();l(this,"content",[]);f.util.initPartial(e,this)}static fromBinary(e,r){return new nr().fromBinary(e,r)}static fromJson(e,r){return new nr().fromJson(e,r)}static fromJsonString(e,r){return new nr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(nr,e,r)}};l(nr,"runtime",f),l(nr,"typeName","yorkie.v1.TreeNodes"),l(nr,"fields",f.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:Wo,repeated:!0}]));let hc=nr;const rr=class rr extends D{constructor(e){super();l(this,"createdAt");l(this,"offset",0);f.util.initPartial(e,this)}static fromBinary(e,r){return new rr().fromBinary(e,r)}static fromJson(e,r){return new rr().fromJson(e,r)}static fromJsonString(e,r){return new rr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(rr,e,r)}};l(rr,"runtime",f),l(rr,"typeName","yorkie.v1.TreeNodeID"),l(rr,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"offset",kind:"scalar",T:5}]));let _i=rr;const ir=class ir extends D{constructor(e){super();l(this,"parentId");l(this,"leftSiblingId");f.util.initPartial(e,this)}static fromBinary(e,r){return new ir().fromBinary(e,r)}static fromJson(e,r){return new ir().fromJson(e,r)}static fromJsonString(e,r){return new ir().fromJsonString(e,r)}static equals(e,r){return f.util.equals(ir,e,r)}};l(ir,"runtime",f),l(ir,"typeName","yorkie.v1.TreePos"),l(ir,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:_i},{no:2,name:"left_sibling_id",kind:"message",T:_i}]));let Oa=ir;const ar=class ar extends D{constructor(e){super();l(this,"id","");l(this,"authProvider","");l(this,"username","");l(this,"createdAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new ar().fromBinary(e,r)}static fromJson(e,r){return new ar().fromJson(e,r)}static fromJsonString(e,r){return new ar().fromJsonString(e,r)}static equals(e,r){return f.util.equals(ar,e,r)}};l(ar,"runtime",f),l(ar,"typeName","yorkie.v1.User"),l(ar,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"auth_provider",kind:"scalar",T:9},{no:3,name:"username",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:qt}]));let $y=ar;const sr=class sr extends D{constructor(e){super();l(this,"id","");l(this,"name","");l(this,"publicKey","");l(this,"secretKey","");l(this,"authWebhookUrl","");l(this,"authWebhookMethods",[]);l(this,"authWebhookMaxRetries",Z.zero);l(this,"authWebhookMinWaitInterval","");l(this,"authWebhookMaxWaitInterval","");l(this,"authWebhookRequestTimeout","");l(this,"eventWebhookUrl","");l(this,"eventWebhookEvents",[]);l(this,"eventWebhookMaxRetries",Z.zero);l(this,"eventWebhookMinWaitInterval","");l(this,"eventWebhookMaxWaitInterval","");l(this,"eventWebhookRequestTimeout","");l(this,"clientDeactivateThreshold","");l(this,"snapshotThreshold",Z.zero);l(this,"snapshotInterval",Z.zero);l(this,"maxSubscribersPerDocument",0);l(this,"maxAttachmentsPerDocument",0);l(this,"maxSizePerDocument",0);l(this,"removeOnDetach",!1);l(this,"autoRevisionEnabled",!1);l(this,"allowedOrigins",[]);l(this,"createdAt");l(this,"updatedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new sr().fromBinary(e,r)}static fromJson(e,r){return new sr().fromJson(e,r)}static fromJsonString(e,r){return new sr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(sr,e,r)}};l(sr,"runtime",f),l(sr,"typeName","yorkie.v1.Project"),l(sr,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:17,name:"auth_webhook_max_retries",kind:"scalar",T:4},{no:18,name:"auth_webhook_min_wait_interval",kind:"scalar",T:9},{no:19,name:"auth_webhook_max_wait_interval",kind:"scalar",T:9},{no:20,name:"auth_webhook_request_timeout",kind:"scalar",T:9},{no:7,name:"event_webhook_url",kind:"scalar",T:9},{no:8,name:"event_webhook_events",kind:"scalar",T:9,repeated:!0},{no:21,name:"event_webhook_max_retries",kind:"scalar",T:4},{no:22,name:"event_webhook_min_wait_interval",kind:"scalar",T:9},{no:23,name:"event_webhook_max_wait_interval",kind:"scalar",T:9},{no:24,name:"event_webhook_request_timeout",kind:"scalar",T:9},{no:9,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:25,name:"snapshot_threshold",kind:"scalar",T:3},{no:26,name:"snapshot_interval",kind:"scalar",T:3},{no:10,name:"max_subscribers_per_document",kind:"scalar",T:5},{no:11,name:"max_attachments_per_document",kind:"scalar",T:5},{no:15,name:"max_size_per_document",kind:"scalar",T:5},{no:16,name:"remove_on_detach",kind:"scalar",T:8},{no:27,name:"auto_revision_enabled",kind:"scalar",T:8},{no:14,name:"allowed_origins",kind:"scalar",T:9,repeated:!0},{no:12,name:"created_at",kind:"message",T:qt},{no:13,name:"updated_at",kind:"message",T:qt}]));let jy=sr;const or=class or extends D{constructor(e){super();l(this,"timestamp",Z.zero);l(this,"value",0);f.util.initPartial(e,this)}static fromBinary(e,r){return new or().fromBinary(e,r)}static fromJson(e,r){return new or().fromJson(e,r)}static fromJsonString(e,r){return new or().fromJsonString(e,r)}static equals(e,r){return f.util.equals(or,e,r)}};l(or,"runtime",f),l(or,"typeName","yorkie.v1.MetricPoint"),l(or,"fields",f.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"value",kind:"scalar",T:5}]));let Gy=or;const lr=class lr extends D{constructor(e){super();l(this,"name");l(this,"authWebhookUrl");l(this,"authWebhookMethods");l(this,"authWebhookMaxRetries");l(this,"authWebhookMinWaitInterval");l(this,"authWebhookMaxWaitInterval");l(this,"authWebhookRequestTimeout");l(this,"eventWebhookUrl");l(this,"eventWebhookEvents");l(this,"eventWebhookMaxRetries");l(this,"eventWebhookMinWaitInterval");l(this,"eventWebhookMaxWaitInterval");l(this,"eventWebhookRequestTimeout");l(this,"snapshotThreshold");l(this,"snapshotInterval");l(this,"clientDeactivateThreshold");l(this,"maxSubscribersPerDocument");l(this,"maxAttachmentsPerDocument");l(this,"maxSizePerDocument");l(this,"removeOnDetach");l(this,"autoRevisionEnabled");l(this,"allowedOrigins");f.util.initPartial(e,this)}static fromBinary(e,r){return new lr().fromBinary(e,r)}static fromJson(e,r){return new lr().fromJson(e,r)}static fromJsonString(e,r){return new lr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(lr,e,r)}};l(lr,"runtime",f),l(lr,"typeName","yorkie.v1.UpdatableProjectFields"),l(lr,"fields",f.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:Ot},{no:2,name:"auth_webhook_url",kind:"message",T:Ot},{no:3,name:"auth_webhook_methods",kind:"message",T:zh},{no:12,name:"auth_webhook_max_retries",kind:"message",T:Ve},{no:13,name:"auth_webhook_min_wait_interval",kind:"message",T:Ot},{no:14,name:"auth_webhook_max_wait_interval",kind:"message",T:Ot},{no:15,name:"auth_webhook_request_timeout",kind:"message",T:Ot},{no:4,name:"event_webhook_url",kind:"message",T:Ot},{no:5,name:"event_webhook_events",kind:"message",T:Mh},{no:16,name:"event_webhook_max_retries",kind:"message",T:Ve},{no:17,name:"event_webhook_min_wait_interval",kind:"message",T:Ot},{no:18,name:"event_webhook_max_wait_interval",kind:"message",T:Ot},{no:19,name:"event_webhook_request_timeout",kind:"message",T:Ot},{no:20,name:"snapshot_threshold",kind:"message",T:Ke},{no:21,name:"snapshot_interval",kind:"message",T:Ke},{no:6,name:"client_deactivate_threshold",kind:"message",T:Ot},{no:7,name:"max_subscribers_per_document",kind:"message",T:ye},{no:8,name:"max_attachments_per_document",kind:"message",T:ye},{no:10,name:"max_size_per_document",kind:"message",T:ye},{no:11,name:"remove_on_detach",kind:"message",T:He},{no:22,name:"auto_revision_enabled",kind:"message",T:He},{no:9,name:"allowed_origins",kind:"message",T:Uh}]));let Yy=lr;const ur=class ur extends D{constructor(e){super();l(this,"methods",[]);f.util.initPartial(e,this)}static fromBinary(e,r){return new ur().fromBinary(e,r)}static fromJson(e,r){return new ur().fromJson(e,r)}static fromJsonString(e,r){return new ur().fromJsonString(e,r)}static equals(e,r){return f.util.equals(ur,e,r)}};l(ur,"runtime",f),l(ur,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),l(ur,"fields",f.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let zh=ur;const cr=class cr extends D{constructor(e){super();l(this,"events",[]);f.util.initPartial(e,this)}static fromBinary(e,r){return new cr().fromBinary(e,r)}static fromJson(e,r){return new cr().fromJson(e,r)}static fromJsonString(e,r){return new cr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(cr,e,r)}};l(cr,"runtime",f),l(cr,"typeName","yorkie.v1.UpdatableProjectFields.EventWebhookEvents"),l(cr,"fields",f.util.newFieldList(()=>[{no:1,name:"events",kind:"scalar",T:9,repeated:!0}]));let Mh=cr;const fr=class fr extends D{constructor(e){super();l(this,"origins",[]);f.util.initPartial(e,this)}static fromBinary(e,r){return new fr().fromBinary(e,r)}static fromJson(e,r){return new fr().fromJson(e,r)}static fromJsonString(e,r){return new fr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(fr,e,r)}};l(fr,"runtime",f),l(fr,"typeName","yorkie.v1.UpdatableProjectFields.AllowedOrigins"),l(fr,"fields",f.util.newFieldList(()=>[{no:1,name:"origins",kind:"scalar",T:9,repeated:!0}]));let Uh=fr;const hr=class hr extends D{constructor(e){super();l(this,"id","");l(this,"key","");l(this,"root","");l(this,"attachedClients",0);l(this,"documentSize");l(this,"schemaKey","");l(this,"presences",{});l(this,"createdAt");l(this,"accessedAt");l(this,"updatedAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new hr().fromBinary(e,r)}static fromJson(e,r){return new hr().fromJson(e,r)}static fromJsonString(e,r){return new hr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(hr,e,r)}};l(hr,"runtime",f),l(hr,"typeName","yorkie.v1.DocumentSummary"),l(hr,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"root",kind:"scalar",T:9},{no:7,name:"attached_clients",kind:"scalar",T:5},{no:8,name:"document_size",kind:"message",T:Ph},{no:9,name:"schema_key",kind:"scalar",T:9},{no:10,name:"presences",kind:"map",K:9,V:{kind:"message",T:Ms}},{no:4,name:"created_at",kind:"message",T:qt},{no:5,name:"accessed_at",kind:"message",T:qt},{no:6,name:"updated_at",kind:"message",T:qt}]));let Xy=hr;const dr=class dr extends D{constructor(e){super();l(this,"type",0);l(this,"presence");f.util.initPartial(e,this)}static fromBinary(e,r){return new dr().fromBinary(e,r)}static fromJson(e,r){return new dr().fromJson(e,r)}static fromJsonString(e,r){return new dr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(dr,e,r)}};l(dr,"runtime",f),l(dr,"typeName","yorkie.v1.PresenceChange"),l(dr,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Ca)},{no:2,name:"presence",kind:"message",T:Ms}]));let tl=dr;var Ca=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(Ca||{});f.util.setEnumType(Ca,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);const mr=class mr extends D{constructor(e){super();l(this,"data",{});f.util.initPartial(e,this)}static fromBinary(e,r){return new mr().fromBinary(e,r)}static fromJson(e,r){return new mr().fromJson(e,r)}static fromJsonString(e,r){return new mr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(mr,e,r)}};l(mr,"runtime",f),l(mr,"typeName","yorkie.v1.Presence"),l(mr,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Ms=mr;const gr=class gr extends D{constructor(e){super();l(this,"key","");l(this,"presenceCount",0);f.util.initPartial(e,this)}static fromBinary(e,r){return new gr().fromBinary(e,r)}static fromJson(e,r){return new gr().fromJson(e,r)}static fromJsonString(e,r){return new gr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(gr,e,r)}};l(gr,"runtime",f),l(gr,"typeName","yorkie.v1.ChannelSummary"),l(gr,"fields",f.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"presence_count",kind:"scalar",T:5}]));let Fy=gr;var Ue;let KS=(Ue=class extends D{constructor(e){super();l(this,"serverSeq",Z.zero);l(this,"clientSeq",0);f.util.initPartial(e,this)}static fromBinary(e,r){return new Ue().fromBinary(e,r)}static fromJson(e,r){return new Ue().fromJson(e,r)}static fromJsonString(e,r){return new Ue().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Ue,e,r)}},l(Ue,"runtime",f),l(Ue,"typeName","yorkie.v1.Checkpoint"),l(Ue,"fields",f.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),Ue);const yr=class yr extends D{constructor(e){super();l(this,"createdAt");l(this,"offset",0);l(this,"relativeOffset",0);f.util.initPartial(e,this)}static fromBinary(e,r){return new yr().fromBinary(e,r)}static fromJson(e,r){return new yr().fromJson(e,r)}static fromJsonString(e,r){return new yr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(yr,e,r)}};l(yr,"runtime",f),l(yr,"typeName","yorkie.v1.TextNodePos"),l(yr,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let Ia=yr;var Le;let M=(Le=class extends D{constructor(e){super();l(this,"lamport",Z.zero);l(this,"delimiter",0);l(this,"actorId",new Uint8Array(0));f.util.initPartial(e,this)}static fromBinary(e,r){return new Le().fromBinary(e,r)}static fromJson(e,r){return new Le().fromJson(e,r)}static fromJsonString(e,r){return new Le().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Le,e,r)}},l(Le,"runtime",f),l(Le,"typeName","yorkie.v1.TimeTicket"),l(Le,"fields",f.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),Le);const pr=class pr extends D{constructor(e){super();l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(e,this)}static fromBinary(e,r){return new pr().fromBinary(e,r)}static fromJson(e,r){return new pr().fromJson(e,r)}static fromJsonString(e,r){return new pr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(pr,e,r)}};l(pr,"runtime",f),l(pr,"typeName","yorkie.v1.DocEventBody"),l(pr,"fields",f.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let Lh=pr;const vr=class vr extends D{constructor(e){super();l(this,"type",0);l(this,"publisher","");l(this,"body");f.util.initPartial(e,this)}static fromBinary(e,r){return new vr().fromBinary(e,r)}static fromJson(e,r){return new vr().fromJson(e,r)}static fromJsonString(e,r){return new vr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(vr,e,r)}};l(vr,"runtime",f),l(vr,"typeName","yorkie.v1.DocEvent"),l(vr,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Rs)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Lh}]));let Jh=vr;const Sr=class Sr extends D{constructor(e){super();l(this,"type",0);l(this,"publisher","");l(this,"count",Z.zero);l(this,"seq",Z.zero);l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(e,this)}static fromBinary(e,r){return new Sr().fromBinary(e,r)}static fromJson(e,r){return new Sr().fromJson(e,r)}static fromJsonString(e,r){return new Sr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Sr,e,r)}};l(Sr,"runtime",f),l(Sr,"typeName","yorkie.v1.ChannelEvent"),l(Sr,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Kc)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"count",kind:"scalar",T:3},{no:4,name:"seq",kind:"scalar",T:3},{no:5,name:"topic",kind:"scalar",T:9},{no:6,name:"payload",kind:"scalar",T:12}]));let qh=Sr;var Kc=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PRESENCE=1]="PRESENCE",n[n.BROADCAST=2]="BROADCAST",n))(Kc||{});f.util.setEnumType(Kc,"yorkie.v1.ChannelEvent.Type",[{no:0,name:"TYPE_UNSPECIFIED"},{no:1,name:"TYPE_PRESENCE"},{no:2,name:"TYPE_BROADCAST"}]);const Tr=class Tr extends D{constructor(e){super();l(this,"data",0);l(this,"meta",0);f.util.initPartial(e,this)}static fromBinary(e,r){return new Tr().fromBinary(e,r)}static fromJson(e,r){return new Tr().fromJson(e,r)}static fromJsonString(e,r){return new Tr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Tr,e,r)}};l(Tr,"runtime",f),l(Tr,"typeName","yorkie.v1.DataSize"),l(Tr,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"scalar",T:5},{no:2,name:"meta",kind:"scalar",T:5}]));let dc=Tr;const br=class br extends D{constructor(e){super();l(this,"live");l(this,"gc");f.util.initPartial(e,this)}static fromBinary(e,r){return new br().fromBinary(e,r)}static fromJson(e,r){return new br().fromJson(e,r)}static fromJsonString(e,r){return new br().fromJsonString(e,r)}static equals(e,r){return f.util.equals(br,e,r)}};l(br,"runtime",f),l(br,"typeName","yorkie.v1.DocSize"),l(br,"fields",f.util.newFieldList(()=>[{no:1,name:"live",kind:"message",T:dc},{no:2,name:"gc",kind:"message",T:dc}]));let Ph=br;const wr=class wr extends D{constructor(e){super();l(this,"id","");l(this,"name","");l(this,"version",0);l(this,"body","");l(this,"rules",[]);l(this,"createdAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new wr().fromBinary(e,r)}static fromJson(e,r){return new wr().fromJson(e,r)}static fromJsonString(e,r){return new wr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(wr,e,r)}};l(wr,"runtime",f),l(wr,"typeName","yorkie.v1.Schema"),l(wr,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"version",kind:"scalar",T:5},{no:4,name:"body",kind:"scalar",T:9},{no:5,name:"rules",kind:"message",T:mc,repeated:!0},{no:6,name:"created_at",kind:"message",T:qt}]));let Zy=wr;const Ar=class Ar extends D{constructor(e){super();l(this,"path","");l(this,"type","");f.util.initPartial(e,this)}static fromBinary(e,r){return new Ar().fromBinary(e,r)}static fromJson(e,r){return new Ar().fromJson(e,r)}static fromJsonString(e,r){return new Ar().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Ar,e,r)}};l(Ar,"runtime",f),l(Ar,"typeName","yorkie.v1.Rule"),l(Ar,"fields",f.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:9},{no:2,name:"type",kind:"scalar",T:9}]));let mc=Ar;const Er=class Er extends D{constructor(e){super();l(this,"id","");l(this,"label","");l(this,"description","");l(this,"snapshot","");l(this,"createdAt");f.util.initPartial(e,this)}static fromBinary(e,r){return new Er().fromBinary(e,r)}static fromJson(e,r){return new Er().fromJson(e,r)}static fromJsonString(e,r){return new Er().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Er,e,r)}};l(Er,"runtime",f),l(Er,"typeName","yorkie.v1.RevisionSummary"),l(Er,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"label",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9},{no:4,name:"snapshot",kind:"scalar",T:9},{no:5,name:"created_at",kind:"message",T:qt}]));let gc=Er;const Nr=class Nr extends D{constructor(e){super();l(this,"clientKey","");l(this,"metadata",{});f.util.initPartial(e,this)}static fromBinary(e,r){return new Nr().fromBinary(e,r)}static fromJson(e,r){return new Nr().fromJson(e,r)}static fromJsonString(e,r){return new Nr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Nr,e,r)}};l(Nr,"runtime",f),l(Nr,"typeName","yorkie.v1.ActivateClientRequest"),l(Nr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Kh=Nr;const xr=class xr extends D{constructor(e){super();l(this,"clientId","");f.util.initPartial(e,this)}static fromBinary(e,r){return new xr().fromBinary(e,r)}static fromJson(e,r){return new xr().fromJson(e,r)}static fromJsonString(e,r){return new xr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(xr,e,r)}};l(xr,"runtime",f),l(xr,"typeName","yorkie.v1.ActivateClientResponse"),l(xr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Vh=xr;const Dr=class Dr extends D{constructor(e){super();l(this,"clientId","");l(this,"synchronous",!1);f.util.initPartial(e,this)}static fromBinary(e,r){return new Dr().fromBinary(e,r)}static fromJson(e,r){return new Dr().fromJson(e,r)}static fromJsonString(e,r){return new Dr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Dr,e,r)}};l(Dr,"runtime",f),l(Dr,"typeName","yorkie.v1.DeactivateClientRequest"),l(Dr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"synchronous",kind:"scalar",T:8}]));let Hh=Dr;const kr=class kr extends D{constructor(t){super(),f.util.initPartial(t,this)}static fromBinary(t,e){return new kr().fromBinary(t,e)}static fromJson(t,e){return new kr().fromJson(t,e)}static fromJsonString(t,e){return new kr().fromJsonString(t,e)}static equals(t,e){return f.util.equals(kr,t,e)}};l(kr,"runtime",f),l(kr,"typeName","yorkie.v1.DeactivateClientResponse"),l(kr,"fields",f.util.newFieldList(()=>[]));let $h=kr;const Or=class Or extends D{constructor(e){super();l(this,"clientId","");l(this,"changePack");l(this,"schemaKey","");f.util.initPartial(e,this)}static fromBinary(e,r){return new Or().fromBinary(e,r)}static fromJson(e,r){return new Or().fromJson(e,r)}static fromJsonString(e,r){return new Or().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Or,e,r)}};l(Or,"runtime",f),l(Or,"typeName","yorkie.v1.AttachDocumentRequest"),l(Or,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Ni},{no:3,name:"schema_key",kind:"scalar",T:9}]));let jh=Or;const Cr=class Cr extends D{constructor(e){super();l(this,"documentId","");l(this,"changePack");l(this,"maxSizePerDocument",0);l(this,"schemaRules",[]);f.util.initPartial(e,this)}static fromBinary(e,r){return new Cr().fromBinary(e,r)}static fromJson(e,r){return new Cr().fromJson(e,r)}static fromJsonString(e,r){return new Cr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Cr,e,r)}};l(Cr,"runtime",f),l(Cr,"typeName","yorkie.v1.AttachDocumentResponse"),l(Cr,"fields",f.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Ni},{no:3,name:"max_size_per_document",kind:"scalar",T:5},{no:4,name:"schema_rules",kind:"message",T:mc,repeated:!0}]));let Gh=Cr;const Ir=class Ir extends D{constructor(e){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");l(this,"removeIfNotAttached",!1);f.util.initPartial(e,this)}static fromBinary(e,r){return new Ir().fromBinary(e,r)}static fromJson(e,r){return new Ir().fromJson(e,r)}static fromJsonString(e,r){return new Ir().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Ir,e,r)}};l(Ir,"runtime",f),l(Ir,"typeName","yorkie.v1.DetachDocumentRequest"),l(Ir,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Ni},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let Yh=Ir;const Br=class Br extends D{constructor(e){super();l(this,"changePack");f.util.initPartial(e,this)}static fromBinary(e,r){return new Br().fromBinary(e,r)}static fromJson(e,r){return new Br().fromJson(e,r)}static fromJsonString(e,r){return new Br().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Br,e,r)}};l(Br,"runtime",f),l(Br,"typeName","yorkie.v1.DetachDocumentResponse"),l(Br,"fields",f.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:Ni}]));let Xh=Br;const Rr=class Rr extends D{constructor(e){super();l(this,"clientId","");l(this,"documentId","");f.util.initPartial(e,this)}static fromBinary(e,r){return new Rr().fromBinary(e,r)}static fromJson(e,r){return new Rr().fromJson(e,r)}static fromJsonString(e,r){return new Rr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Rr,e,r)}};l(Rr,"runtime",f),l(Rr,"typeName","yorkie.v1.WatchDocumentRequest"),l(Rr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let Fh=Rr;const zr=class zr extends D{constructor(e){super();l(this,"body",{case:void 0});f.util.initPartial(e,this)}static fromBinary(e,r){return new zr().fromBinary(e,r)}static fromJson(e,r){return new zr().fromJson(e,r)}static fromJsonString(e,r){return new zr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(zr,e,r)}};l(zr,"runtime",f),l(zr,"typeName","yorkie.v1.WatchDocumentResponse"),l(zr,"fields",f.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:Qh,oneof:"body"},{no:2,name:"event",kind:"message",T:Jh,oneof:"body"}]));let Zh=zr;const Mr=class Mr extends D{constructor(e){super();l(this,"clientIds",[]);f.util.initPartial(e,this)}static fromBinary(e,r){return new Mr().fromBinary(e,r)}static fromJson(e,r){return new Mr().fromJson(e,r)}static fromJsonString(e,r){return new Mr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Mr,e,r)}};l(Mr,"runtime",f),l(Mr,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),l(Mr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let Qh=Mr;const Ur=class Ur extends D{constructor(e){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");f.util.initPartial(e,this)}static fromBinary(e,r){return new Ur().fromBinary(e,r)}static fromJson(e,r){return new Ur().fromJson(e,r)}static fromJsonString(e,r){return new Ur().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Ur,e,r)}};l(Ur,"runtime",f),l(Ur,"typeName","yorkie.v1.RemoveDocumentRequest"),l(Ur,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Ni}]));let _h=Ur;const Lr=class Lr extends D{constructor(e){super();l(this,"changePack");f.util.initPartial(e,this)}static fromBinary(e,r){return new Lr().fromBinary(e,r)}static fromJson(e,r){return new Lr().fromJson(e,r)}static fromJsonString(e,r){return new Lr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Lr,e,r)}};l(Lr,"runtime",f),l(Lr,"typeName","yorkie.v1.RemoveDocumentResponse"),l(Lr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Ni}]));let Wh=Lr;const Jr=class Jr extends D{constructor(e){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");l(this,"pushOnly",!1);f.util.initPartial(e,this)}static fromBinary(e,r){return new Jr().fromBinary(e,r)}static fromJson(e,r){return new Jr().fromJson(e,r)}static fromJsonString(e,r){return new Jr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Jr,e,r)}};l(Jr,"runtime",f),l(Jr,"typeName","yorkie.v1.PushPullChangesRequest"),l(Jr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Ni},{no:4,name:"push_only",kind:"scalar",T:8}]));let td=Jr;const qr=class qr extends D{constructor(e){super();l(this,"changePack");f.util.initPartial(e,this)}static fromBinary(e,r){return new qr().fromBinary(e,r)}static fromJson(e,r){return new qr().fromJson(e,r)}static fromJsonString(e,r){return new qr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(qr,e,r)}};l(qr,"runtime",f),l(qr,"typeName","yorkie.v1.PushPullChangesResponse"),l(qr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Ni}]));let ed=qr;const Pr=class Pr extends D{constructor(e){super();l(this,"clientId","");l(this,"documentId","");l(this,"label","");l(this,"description","");f.util.initPartial(e,this)}static fromBinary(e,r){return new Pr().fromBinary(e,r)}static fromJson(e,r){return new Pr().fromJson(e,r)}static fromJsonString(e,r){return new Pr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Pr,e,r)}};l(Pr,"runtime",f),l(Pr,"typeName","yorkie.v1.CreateRevisionRequest"),l(Pr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"label",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]));let nd=Pr;const Kr=class Kr extends D{constructor(e){super();l(this,"revision");f.util.initPartial(e,this)}static fromBinary(e,r){return new Kr().fromBinary(e,r)}static fromJson(e,r){return new Kr().fromJson(e,r)}static fromJsonString(e,r){return new Kr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Kr,e,r)}};l(Kr,"runtime",f),l(Kr,"typeName","yorkie.v1.CreateRevisionResponse"),l(Kr,"fields",f.util.newFieldList(()=>[{no:1,name:"revision",kind:"message",T:gc}]));let rd=Kr;const Vr=class Vr extends D{constructor(e){super();l(this,"projectId","");l(this,"documentId","");l(this,"pageSize",0);l(this,"offset",0);l(this,"isForward",!1);f.util.initPartial(e,this)}static fromBinary(e,r){return new Vr().fromBinary(e,r)}static fromJson(e,r){return new Vr().fromJson(e,r)}static fromJsonString(e,r){return new Vr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Vr,e,r)}};l(Vr,"runtime",f),l(Vr,"typeName","yorkie.v1.ListRevisionsRequest"),l(Vr,"fields",f.util.newFieldList(()=>[{no:1,name:"project_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"page_size",kind:"scalar",T:5},{no:4,name:"offset",kind:"scalar",T:5},{no:5,name:"is_forward",kind:"scalar",T:8}]));let id=Vr;const Hr=class Hr extends D{constructor(e){super();l(this,"revisions",[]);f.util.initPartial(e,this)}static fromBinary(e,r){return new Hr().fromBinary(e,r)}static fromJson(e,r){return new Hr().fromJson(e,r)}static fromJsonString(e,r){return new Hr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Hr,e,r)}};l(Hr,"runtime",f),l(Hr,"typeName","yorkie.v1.ListRevisionsResponse"),l(Hr,"fields",f.util.newFieldList(()=>[{no:1,name:"revisions",kind:"message",T:gc,repeated:!0}]));let ad=Hr;const $r=class $r extends D{constructor(e){super();l(this,"clientId","");l(this,"revisionId","");f.util.initPartial(e,this)}static fromBinary(e,r){return new $r().fromBinary(e,r)}static fromJson(e,r){return new $r().fromJson(e,r)}static fromJsonString(e,r){return new $r().fromJsonString(e,r)}static equals(e,r){return f.util.equals($r,e,r)}};l($r,"runtime",f),l($r,"typeName","yorkie.v1.RestoreRevisionRequest"),l($r,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"revision_id",kind:"scalar",T:9}]));let sd=$r;const jr=class jr extends D{constructor(t){super(),f.util.initPartial(t,this)}static fromBinary(t,e){return new jr().fromBinary(t,e)}static fromJson(t,e){return new jr().fromJson(t,e)}static fromJsonString(t,e){return new jr().fromJsonString(t,e)}static equals(t,e){return f.util.equals(jr,t,e)}};l(jr,"runtime",f),l(jr,"typeName","yorkie.v1.RestoreRevisionResponse"),l(jr,"fields",f.util.newFieldList(()=>[]));let od=jr;const Gr=class Gr extends D{constructor(e){super();l(this,"clientId","");l(this,"channelKey","");f.util.initPartial(e,this)}static fromBinary(e,r){return new Gr().fromBinary(e,r)}static fromJson(e,r){return new Gr().fromJson(e,r)}static fromJsonString(e,r){return new Gr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Gr,e,r)}};l(Gr,"runtime",f),l(Gr,"typeName","yorkie.v1.AttachChannelRequest"),l(Gr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9}]));let ld=Gr;const Yr=class Yr extends D{constructor(e){super();l(this,"sessionId","");l(this,"count",Z.zero);f.util.initPartial(e,this)}static fromBinary(e,r){return new Yr().fromBinary(e,r)}static fromJson(e,r){return new Yr().fromJson(e,r)}static fromJsonString(e,r){return new Yr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Yr,e,r)}};l(Yr,"runtime",f),l(Yr,"typeName","yorkie.v1.AttachChannelResponse"),l(Yr,"fields",f.util.newFieldList(()=>[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"count",kind:"scalar",T:3}]));let ud=Yr;const Xr=class Xr extends D{constructor(e){super();l(this,"clientId","");l(this,"channelKey","");l(this,"sessionId","");f.util.initPartial(e,this)}static fromBinary(e,r){return new Xr().fromBinary(e,r)}static fromJson(e,r){return new Xr().fromJson(e,r)}static fromJsonString(e,r){return new Xr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Xr,e,r)}};l(Xr,"runtime",f),l(Xr,"typeName","yorkie.v1.DetachChannelRequest"),l(Xr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}]));let cd=Xr;const Fr=class Fr extends D{constructor(e){super();l(this,"count",Z.zero);f.util.initPartial(e,this)}static fromBinary(e,r){return new Fr().fromBinary(e,r)}static fromJson(e,r){return new Fr().fromJson(e,r)}static fromJsonString(e,r){return new Fr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Fr,e,r)}};l(Fr,"runtime",f),l(Fr,"typeName","yorkie.v1.DetachChannelResponse"),l(Fr,"fields",f.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3}]));let fd=Fr;const Zr=class Zr extends D{constructor(e){super();l(this,"clientId","");l(this,"channelKey","");l(this,"sessionId","");f.util.initPartial(e,this)}static fromBinary(e,r){return new Zr().fromBinary(e,r)}static fromJson(e,r){return new Zr().fromJson(e,r)}static fromJsonString(e,r){return new Zr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Zr,e,r)}};l(Zr,"runtime",f),l(Zr,"typeName","yorkie.v1.RefreshChannelRequest"),l(Zr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}]));let hd=Zr;const Qr=class Qr extends D{constructor(e){super();l(this,"count",Z.zero);f.util.initPartial(e,this)}static fromBinary(e,r){return new Qr().fromBinary(e,r)}static fromJson(e,r){return new Qr().fromJson(e,r)}static fromJsonString(e,r){return new Qr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Qr,e,r)}};l(Qr,"runtime",f),l(Qr,"typeName","yorkie.v1.RefreshChannelResponse"),l(Qr,"fields",f.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3}]));let dd=Qr;const _r=class _r extends D{constructor(e){super();l(this,"clientId","");l(this,"channelKey","");f.util.initPartial(e,this)}static fromBinary(e,r){return new _r().fromBinary(e,r)}static fromJson(e,r){return new _r().fromJson(e,r)}static fromJsonString(e,r){return new _r().fromJsonString(e,r)}static equals(e,r){return f.util.equals(_r,e,r)}};l(_r,"runtime",f),l(_r,"typeName","yorkie.v1.WatchChannelRequest"),l(_r,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9}]));let md=_r;const Wr=class Wr extends D{constructor(e){super();l(this,"body",{case:void 0});f.util.initPartial(e,this)}static fromBinary(e,r){return new Wr().fromBinary(e,r)}static fromJson(e,r){return new Wr().fromJson(e,r)}static fromJsonString(e,r){return new Wr().fromJsonString(e,r)}static equals(e,r){return f.util.equals(Wr,e,r)}};l(Wr,"runtime",f),l(Wr,"typeName","yorkie.v1.WatchChannelResponse"),l(Wr,"fields",f.util.newFieldList(()=>[{no:1,name:"initialized",kind:"message",T:yd,oneof:"body"},{no:2,name:"event",kind:"message",T:qh,oneof:"body"}]));let gd=Wr;const ti=class ti extends D{constructor(e){super();l(this,"count",Z.zero);l(this,"seq",Z.zero);f.util.initPartial(e,this)}static fromBinary(e,r){return new ti().fromBinary(e,r)}static fromJson(e,r){return new ti().fromJson(e,r)}static fromJsonString(e,r){return new ti().fromJsonString(e,r)}static equals(e,r){return f.util.equals(ti,e,r)}};l(ti,"runtime",f),l(ti,"typeName","yorkie.v1.WatchChannelInitialized"),l(ti,"fields",f.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3},{no:2,name:"seq",kind:"scalar",T:3}]));let yd=ti;const ei=class ei extends D{constructor(e){super();l(this,"clientId","");l(this,"channelKey","");l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(e,this)}static fromBinary(e,r){return new ei().fromBinary(e,r)}static fromJson(e,r){return new ei().fromJson(e,r)}static fromJsonString(e,r){return new ei().fromJsonString(e,r)}static equals(e,r){return f.util.equals(ei,e,r)}};l(ei,"runtime",f),l(ei,"typeName","yorkie.v1.BroadcastRequest"),l(ei,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let pd=ei;const ni=class ni extends D{constructor(t){super(),f.util.initPartial(t,this)}static fromBinary(t,e){return new ni().fromBinary(t,e)}static fromJson(t,e){return new ni().fromJson(t,e)}static fromJsonString(t,e){return new ni().fromJsonString(t,e)}static equals(t,e){return f.util.equals(ni,t,e)}};l(ni,"runtime",f),l(ni,"typeName","yorkie.v1.BroadcastResponse"),l(ni,"fields",f.util.newFieldList(()=>[]));let vd=ni;const Z1={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Kh,O:Vh,kind:Tt.Unary},deactivateClient:{name:"DeactivateClient",I:Hh,O:$h,kind:Tt.Unary},attachDocument:{name:"AttachDocument",I:jh,O:Gh,kind:Tt.Unary},detachDocument:{name:"DetachDocument",I:Yh,O:Xh,kind:Tt.Unary},removeDocument:{name:"RemoveDocument",I:_h,O:Wh,kind:Tt.Unary},pushPullChanges:{name:"PushPullChanges",I:td,O:ed,kind:Tt.Unary},watchDocument:{name:"WatchDocument",I:Fh,O:Zh,kind:Tt.ServerStreaming},createRevision:{name:"CreateRevision",I:nd,O:rd,kind:Tt.Unary},listRevisions:{name:"ListRevisions",I:id,O:ad,kind:Tt.Unary},restoreRevision:{name:"RestoreRevision",I:sd,O:od,kind:Tt.Unary},attachChannel:{name:"AttachChannel",I:ld,O:ud,kind:Tt.Unary},detachChannel:{name:"DetachChannel",I:cd,O:fd,kind:Tt.Unary},refreshChannel:{name:"RefreshChannel",I:hd,O:dd,kind:Tt.Unary},watchChannel:{name:"WatchChannel",I:md,O:gd,kind:Tt.ServerStreaming},broadcast:{name:"Broadcast",I:pd,O:vd,kind:Tt.Unary}}},Q1=f.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);f.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:fi}]);f.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:_1,repeated:!0}]);const _1=f.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"api_service",kind:"scalar",T:9},{no:4,name:"quota_metric",kind:"scalar",T:9},{no:5,name:"quota_id",kind:"scalar",T:9},{no:6,name:"quota_dimensions",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:7,name:"quota_value",kind:"scalar",T:3},{no:8,name:"future_quota_value",kind:"scalar",T:3,opt:!0}],{localName:"QuotaFailure_Violation"});f.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:W1,repeated:!0}]);const W1=f.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});f.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:tE,repeated:!0}]);const tE=f.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9},{no:4,name:"localized_message",kind:"message",T:nE}],{localName:"BadRequest_FieldViolation"});f.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:eE,repeated:!0}]);const eE=f.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"}),nE=f.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var S=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrNotAttached="ErrNotAttached",n.ErrNotDetached="ErrNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrDocumentSizeExceedsLimit="ErrDocumentSizeExceedsLimit",n.ErrDocumentSchemaValidationFailed="ErrDocumentSchemaValidationFailed",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n.ErrTooManySubscribers="ErrTooManySubscribers",n.ErrTooManyAttachments="ErrTooManyAttachments",n))(S||{});class T extends Error{constructor(e,r){super(r);l(this,"name","YorkieError");l(this,"stack");this.code=e,this.message=r,this.toString=()=>`[code=${this.code}]: ${this.message}`}}var Nn=(n=>(n.Put="put",n.Clear="clear",n))(Nn||{});const Dm="000000000000000000000000",wn=24;class Ge{constructor(t,e,r){l(this,"lamport");l(this,"delimiter");l(this,"actorID");this.lamport=t,this.delimiter=e,this.actorID=r}static of(t,e,r){return new Ge(t,e,r)}static fromStruct(t){return Ge.of(BigInt(t.lamport),t.delimiter,t.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(t){return new Ge(this.lamport,this.delimiter,t)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(t){return this.compare(t)>0}equals(t){return this.compare(t)===0}compare(t){if(this.lamport>t.lamport)return 1;if(t.lamport>this.lamport)return-1;const e=this.actorID.localeCompare(t.actorID);return e!==0?e:this.delimiter>t.delimiter?1:t.delimiter>this.delimiter?-1:0}}const Sd=0n,VS=0,Td=9223372036854775807n,Us=new Ge(Sd,VS,Dm);function vn(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(t){switch(t){case'"':case"\\":return"\\"+t;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return t}})}class wl{constructor(t){l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");this.createdAt=t}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setCreatedAt(t){this.createdAt=t}setMovedAt(t){return!this.movedAt||t&&t.after(this.movedAt)?(this.movedAt=t,!0):!1}setRemovedAt(t){this.removedAt=t}remove(t){return t&&t.after(this.createdAt)&&(!this.removedAt||t.after(this.removedAt))?(this.removedAt=t,!0):!1}isRemoved(){return!!this.removedAt}getMetaUsage(){let t=0;return this.getCreatedAt()&&(t+=wn),this.getMovedAt()&&(t+=wn),this.getRemovedAt()&&(t+=wn),t}}class Wi extends wl{constructor(t){super(t)}}class yc{constructor(t,e){l(this,"strKey");l(this,"value");this.strKey=t,this.value=e}static of(t,e){return new yc(t,e)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(t){return this.value.remove(t)}}class Ls{constructor(){l(this,"nodeMapByKey");l(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new Ls}set(t,e,r){let i;const a=this.nodeMapByKey.get(t);a&&!a.isRemoved()&&a.remove(r)&&(i=a.getValue());const s=yc.of(t,e);return this.nodeMapByCreatedAt.set(e.getCreatedAt().toIDString(),s),(!a||r.after(a.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(t,s),e.setMovedAt(r)),i}delete(t,e){if(!this.nodeMapByCreatedAt.has(t.toIDString()))throw new T(S.ErrInvalidArgument,`fail to find ${t.toIDString()}`);const r=this.nodeMapByCreatedAt.get(t.toIDString());return r.remove(e),r.getValue()}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return e.getStrKey()}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new T(S.ErrInvalidArgument,`fail to find ${t.getCreatedAt().toIDString()}`);const r=this.nodeMapByKey.get(e.getStrKey());e===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}deleteByKey(t,e){const r=this.nodeMapByKey.get(t);if(r&&r.remove(e))return r.getValue()}has(t){const e=this.nodeMapByKey.get(t);return e?!e.isRemoved():!1}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}get(t){const e=this.nodeMapByKey.get(t);if(!(!e||e.isRemoved()))return e}deepcopy(){const t=Ls.create();for(const[,e]of this.nodeMapByCreatedAt)t.nodeMapByCreatedAt.set(e.getValue().getCreatedAt().toIDString(),yc.of(e.getStrKey(),e.getValue().deepcopy()));for(const[e,r]of this.nodeMapByKey)t.nodeMapByKey.set(e,t.nodeMapByCreatedAt.get(r.getValue().getCreatedAt().toIDString()));return t}*[Symbol.iterator](){for(const[,t]of this.nodeMapByCreatedAt)yield t}}class Zt extends Wi{constructor(e,r){super(e);l(this,"memberNodes");this.memberNodes=r}static create(e,r){if(!r)return new Zt(e,Ls.create());const i=Ls.create();for(const[a,s]of Object.entries(r))i.set(a,s.deepcopy(),s.getCreatedAt());return new Zt(e,i)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,r,i){return this.memberNodes.set(e,r,i)}delete(e,r){return this.memberNodes.delete(e,r)}deleteByKey(e,r){return this.memberNodes.deleteByKey(e,r)}get(e){const r=this.memberNodes.get(e);return r==null?void 0:r.getValue()}getByID(e){const r=this.memberNodes.getByID(e);return r==null?void 0:r.getValue()}has(e){return this.memberNodes.has(e)}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const[r,i]of this)e.push(`"${vn(r)}":${i.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[r,i]of this){const{createdAt:a,value:s,type:o}=i.toJSForTest();e[r]={key:r,createdAt:a,value:s,type:o}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[r]of this)e.push(r);return e}toSortedJSON(){var i;const e=new Set;for(const[a]of this)e.add(a);const r=[];for(const a of Array.from(e).sort()){const s=(i=this.memberNodes.get(a))==null?void 0:i.getValue();r.push(`"${vn(a)}":${s.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=Zt.create(this.getCreatedAt());return e.memberNodes=this.memberNodes.deepcopy(),e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}getDescendants(e){for(const r of this.memberNodes){const i=r.getValue();if(e(i,this))return;i instanceof Wi&&i.getDescendants(e)}}*[Symbol.iterator](){for(const e of this.memberNodes)e.isRemoved()||(yield[e.getStrKey(),e.getValue()])}}var mt=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(mt||{});class on{constructor(t,e){l(this,"parentCreatedAt");l(this,"executedAt");this.parentCreatedAt=t,this.executedAt=e}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new T(S.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(t){this.executedAt&&(this.executedAt=this.executedAt.setActor(t))}setExecutedAt(t){this.executedAt=t}}class HS{constructor(t){l(this,"value");l(this,"left");l(this,"right");l(this,"parent");l(this,"weight");this.value=t,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(t){this.left=t}setRight(t){this.right=t}setParent(t){this.parent=t}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(t){this.weight+=t}initWeight(){this.weight=this.getLength()}}class el{constructor(t){l(this,"root");this.root=t}get length(){return this.root?this.root.getWeight():0}find(t){if(!this.root||t<0)return[void 0,0];let e=this.root;for(;;)if(e.hasLeft()&&t<=e.getLeftWeight())e=e.getLeft();else if(e.hasRight()&&e.getLeftWeight()+e.getLength()<t)t-=e.getLeftWeight()+e.getLength(),e=e.getRight();else{t-=e.getLeftWeight();break}if(t>e.getLength())throw new T(S.ErrInvalidArgument,`out of index range: pos: ${t} > node.length: ${e.getLength()}`);return this.splayNode(e),[e,t]}indexOf(t){return!t||t!==this.root&&!t.hasLinks()?-1:(this.splayNode(t),this.root.getLeftWeight())}getRoot(){return this.root}insert(t){return this.insertAfter(this.root,t)}insertAfter(t,e){return t?(this.splayNode(t),this.root=e,e.setRight(t.getRight()),t.hasRight()&&t.getRight().setParent(e),e.setLeft(t),t.setParent(e),t.setRight(),this.updateWeight(t),this.updateWeight(e),e):(this.root=e,e)}updateWeight(t){t.initWeight(),t.hasLeft()&&t.increaseWeight(t.getLeftWeight()),t.hasRight()&&t.increaseWeight(t.getRightWeight())}updateTreeWeight(t){for(;t;)this.updateWeight(t),t=t.getParent()}splayNode(t){if(t)for(;;)if(this.isLeftChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t),this.rotateLeft(t);else if(this.isLeftChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t.getParent()),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t.getParent()),this.rotateLeft(t);else{this.isLeftChild(t)?this.rotateRight(t):this.isRightChild(t)&&this.rotateLeft(t),this.updateWeight(t);return}}delete(t){this.splayNode(t);const e=new el(t.getLeft());e.root&&e.root.setParent();const r=new el(t.getRight());if(r.root&&r.root.setParent(),e.root){const i=e.getRightmost();e.splayNode(i),e.root.setRight(r.root),r.root&&r.root.setParent(e.root),this.root=e.root}else this.root=r.root;t.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(t,e){if(!e){this.splayNode(t),this.cutOffRight(t);return}this.splayNode(t),this.splayNode(e),e.getLeft()!=t&&this.rotateRight(t),this.cutOffRight(t)}cutOffRight(t){const e=[];this.traversePostorder(t.getRight(),e);for(const r of e)r.initWeight();this.updateTreeWeight(t)}toTestString(){const t=[];return this.traverseInorder(this.root,t),t.map(e=>`[${e.getWeight()},${e.getLength()}]${e.getValue()||""}`).join("")}checkWeight(){const t=[];this.traverseInorder(this.root,t);for(const e of t)if(e.getWeight()!=e.getLength()+e.getLeftWeight()+e.getRightWeight())return!1;return!0}getRightmost(){let t=this.root;for(;t.hasRight();)t=t.getRight();return t}traverseInorder(t,e){t&&(this.traverseInorder(t.getLeft(),e),e.push(t),this.traverseInorder(t.getRight(),e))}traversePostorder(t,e){t&&(this.traversePostorder(t.getLeft(),e),this.traversePostorder(t.getRight(),e),e.push(t))}rotateLeft(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setRight(t.getLeft()),e.hasRight()&&e.getRight().setParent(e),t.setLeft(e),t.getLeft().setParent(t),this.updateWeight(e),this.updateWeight(t)}rotateRight(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setLeft(t.getRight()),e.hasLeft()&&e.getLeft().setParent(e),t.setRight(e),t.getRight().setParent(t),this.updateWeight(e),this.updateWeight(t)}isLeftChild(t){return t&&t.hasParent()?t.getParent().getLeft()===t:!1}isRightChild(t){return t&&t.hasParent()?t.getParent().getRight()===t:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var $e=null;try{$e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function F(n,t,e){this.low=n|0,this.high=t|0,this.unsigned=!!e}F.prototype.__isLong__;Object.defineProperty(F.prototype,"__isLong__",{value:!0});function _t(n){return(n&&n.__isLong__)===!0}function Qy(n){var t=Math.clz32(n&-n);return n?31-t:t}F.isLong=_t;var _y={},Wy={};function La(n,t){var e,r,i;return t?(n>>>=0,(i=0<=n&&n<256)&&(r=Wy[n],r)?r:(e=_(n,0,!0),i&&(Wy[n]=e),e)):(n|=0,(i=-128<=n&&n<128)&&(r=_y[n],r)?r:(e=_(n,n<0?-1:0,!1),i&&(_y[n]=e),e))}F.fromInt=La;function je(n,t){if(isNaN(n))return t?di:tn;if(t){if(n<0)return di;if(n>=$S)return YS}else{if(n<=-ep)return se;if(n+1>=ep)return GS}return n<0?je(-n,t).neg():_(n%Js|0,n/Js|0,t)}F.fromNumber=je;function _(n,t,e){return new F(n,t,e)}F.fromBits=_;var pc=Math.pow;function km(n,t,e){if(n.length===0)throw Error("empty string");if(typeof t=="number"?(e=t,t=!1):t=!!t,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return t?di:tn;if(e=e||10,e<2||36<e)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return km(n.substring(1),t,e).neg();for(var i=je(pc(e,8)),a=tn,s=0;s<n.length;s+=8){var o=Math.min(8,n.length-s),u=parseInt(n.substring(s,s+o),e);if(o<8){var c=je(pc(e,o));a=a.mul(c).add(je(u))}else a=a.mul(i),a=a.add(je(u))}return a.unsigned=t,a}F.fromString=km;function Fe(n,t){return typeof n=="number"?je(n,t):typeof n=="string"?km(n,t):_(n.low,n.high,typeof t=="boolean"?t:n.unsigned)}F.fromValue=Fe;var tp=65536,rE=1<<24,Js=tp*tp,$S=Js*Js,ep=$S/2,np=La(rE),tn=La(0);F.ZERO=tn;var di=La(0,!0);F.UZERO=di;var os=La(1);F.ONE=os;var jS=La(1,!0);F.UONE=jS;var bd=La(-1);F.NEG_ONE=bd;var GS=_(-1,2147483647,!1);F.MAX_VALUE=GS;var YS=_(-1,-1,!0);F.MAX_UNSIGNED_VALUE=YS;var se=_(0,-2147483648,!1);F.MIN_VALUE=se;var k=F.prototype;k.toInt=function(){return this.unsigned?this.low>>>0:this.low};k.toNumber=function(){return this.unsigned?(this.high>>>0)*Js+(this.low>>>0):this.high*Js+(this.low>>>0)};k.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(se)){var e=je(t),r=this.div(e),i=r.mul(e).sub(this);return r.toString(t)+i.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var a=je(pc(t,6),this.unsigned),s=this,o="";;){var u=s.div(a),c=s.sub(u.mul(a)).toInt()>>>0,h=c.toString(t);if(s=u,s.isZero())return h+o;for(;h.length<6;)h="0"+h;o=""+h+o}};k.getHighBits=function(){return this.high};k.getHighBitsUnsigned=function(){return this.high>>>0};k.getLowBits=function(){return this.low};k.getLowBitsUnsigned=function(){return this.low>>>0};k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(se)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1};k.isSafeInteger=function(){var t=this.high>>21;return t?this.unsigned?!1:t===-1&&!(this.low===0&&this.high===-2097152):!0};k.isZero=function(){return this.high===0&&this.low===0};k.eqz=k.isZero;k.isNegative=function(){return!this.unsigned&&this.high<0};k.isPositive=function(){return this.unsigned||this.high>=0};k.isOdd=function(){return(this.low&1)===1};k.isEven=function(){return(this.low&1)===0};k.equals=function(t){return _t(t)||(t=Fe(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};k.eq=k.equals;k.notEquals=function(t){return!this.eq(t)};k.neq=k.notEquals;k.ne=k.notEquals;k.lessThan=function(t){return this.comp(t)<0};k.lt=k.lessThan;k.lessThanOrEqual=function(t){return this.comp(t)<=0};k.lte=k.lessThanOrEqual;k.le=k.lessThanOrEqual;k.greaterThan=function(t){return this.comp(t)>0};k.gt=k.greaterThan;k.greaterThanOrEqual=function(t){return this.comp(t)>=0};k.gte=k.greaterThanOrEqual;k.ge=k.greaterThanOrEqual;k.compare=function(t){if(_t(t)||(t=Fe(t)),this.eq(t))return 0;var e=this.isNegative(),r=t.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};k.comp=k.compare;k.negate=function(){return!this.unsigned&&this.eq(se)?se:this.not().add(os)};k.neg=k.negate;k.add=function(t){_t(t)||(t=Fe(t));var e=this.high>>>16,r=this.high&65535,i=this.low>>>16,a=this.low&65535,s=t.high>>>16,o=t.high&65535,u=t.low>>>16,c=t.low&65535,h=0,g=0,d=0,m=0;return m+=a+c,d+=m>>>16,m&=65535,d+=i+u,g+=d>>>16,d&=65535,g+=r+o,h+=g>>>16,g&=65535,h+=e+s,h&=65535,_(d<<16|m,h<<16|g,this.unsigned)};k.subtract=function(t){return _t(t)||(t=Fe(t)),this.add(t.neg())};k.sub=k.subtract;k.multiply=function(t){if(this.isZero())return this;if(_t(t)||(t=Fe(t)),$e){var e=$e.mul(this.low,this.high,t.low,t.high);return _(e,$e.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?di:tn;if(this.eq(se))return t.isOdd()?se:tn;if(t.eq(se))return this.isOdd()?se:tn;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(np)&&t.lt(np))return je(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,a=this.low>>>16,s=this.low&65535,o=t.high>>>16,u=t.high&65535,c=t.low>>>16,h=t.low&65535,g=0,d=0,m=0,A=0;return A+=s*h,m+=A>>>16,A&=65535,m+=a*h,d+=m>>>16,m&=65535,m+=s*c,d+=m>>>16,m&=65535,d+=i*h,g+=d>>>16,d&=65535,d+=a*c,g+=d>>>16,d&=65535,d+=s*u,g+=d>>>16,d&=65535,g+=r*h+i*c+a*u+s*o,g&=65535,_(m<<16|A,g<<16|d,this.unsigned)};k.mul=k.multiply;k.divide=function(t){if(_t(t)||(t=Fe(t)),t.isZero())throw Error("division by zero");if($e){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?$e.div_u:$e.div_s)(this.low,this.high,t.low,t.high);return _(e,$e.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?di:tn;var r,i,a;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return di;if(t.gt(this.shru(1)))return jS;a=di}else{if(this.eq(se)){if(t.eq(os)||t.eq(bd))return se;if(t.eq(se))return os;var s=this.shr(1);return r=s.div(t).shl(1),r.eq(tn)?t.isNegative()?os:bd:(i=this.sub(t.mul(r)),a=r.add(i.div(t)),a)}else if(t.eq(se))return this.unsigned?di:tn;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();a=tn}for(i=this;i.gte(t);){r=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(r)/Math.LN2),u=o<=48?1:pc(2,o-48),c=je(r),h=c.mul(t);h.isNegative()||h.gt(i);)r-=u,c=je(r,this.unsigned),h=c.mul(t);c.isZero()&&(c=os),a=a.add(c),i=i.sub(h)}return a};k.div=k.divide;k.modulo=function(t){if(_t(t)||(t=Fe(t)),$e){var e=(this.unsigned?$e.rem_u:$e.rem_s)(this.low,this.high,t.low,t.high);return _(e,$e.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};k.mod=k.modulo;k.rem=k.modulo;k.not=function(){return _(~this.low,~this.high,this.unsigned)};k.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};k.clz=k.countLeadingZeros;k.countTrailingZeros=function(){return this.low?Qy(this.low):Qy(this.high)+32};k.ctz=k.countTrailingZeros;k.and=function(t){return _t(t)||(t=Fe(t)),_(this.low&t.low,this.high&t.high,this.unsigned)};k.or=function(t){return _t(t)||(t=Fe(t)),_(this.low|t.low,this.high|t.high,this.unsigned)};k.xor=function(t){return _t(t)||(t=Fe(t)),_(this.low^t.low,this.high^t.high,this.unsigned)};k.shiftLeft=function(t){return _t(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?_(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):_(0,this.low<<t-32,this.unsigned)};k.shl=k.shiftLeft;k.shiftRight=function(t){return _t(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?_(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):_(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};k.shr=k.shiftRight;k.shiftRightUnsigned=function(t){return _t(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?_(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?_(this.high,0,this.unsigned):_(this.high>>>t-32,0,this.unsigned)};k.shru=k.shiftRightUnsigned;k.shr_u=k.shiftRightUnsigned;k.rotateLeft=function(t){var e;return _t(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?_(this.high,this.low,this.unsigned):t<32?(e=32-t,_(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,_(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))};k.rotl=k.rotateLeft;k.rotateRight=function(t){var e;return _t(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?_(this.high,this.low,this.unsigned):t<32?(e=32-t,_(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,_(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))};k.rotr=k.rotateRight;k.toSigned=function(){return this.unsigned?_(this.low,this.high,!1):this};k.toUnsigned=function(){return this.unsigned?this:_(this.low,this.high,!0)};k.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};k.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};k.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};F.fromBytes=function(t,e,r){return r?F.fromBytesLE(t,e):F.fromBytesBE(t,e)};F.fromBytesLE=function(t,e){return new F(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)};F.fromBytesBE=function(t,e){return new F(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};typeof BigInt=="function"&&(F.fromBigInt=function(t,e){var r=Number(BigInt.asIntN(32,t)),i=Number(BigInt.asIntN(32,t>>BigInt(32)));return _(r,i,e)},F.fromValue=function(t,e){return typeof t=="bigint"?F.fromBigInt(t,e):Fe(t,e)},k.toBigInt=function(){var t=BigInt(this.low>>>0),e=BigInt(this.unsigned?this.high>>>0:this.high);return e<<BigInt(32)|t});var lt=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(lt||{});class St extends wl{constructor(e,r){super(r);l(this,"valueType");l(this,"value");this.valueType=St.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,r){return new St(e,r)}static valueFromBytes(e,r){switch(e){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const i=new DataView(r.buffer);return r.forEach(function(a,s){i.setUint8(s,a)}),i.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return F.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(F.fromBytesLE(Array.from(r),!0).toNumber());default:throw new T(S.ErrUnimplemented,`unimplemented type: ${e}`)}}getValueSize(){switch(this.valueType){case 0:return 8;case 1:return 4;case 2:return 4;case 3:return 8;case 4:return 8;case 5:return this.value.length*2;case 6:return this.value.length;case 7:return 8;default:throw new T(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}getDataSize(){return{data:this.getValueSize(),meta:this.getMetaUsage()}}toJSON(){return this.valueType===5?`"${vn(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=St.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof F)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return St.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const e=this.value,r=F.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new T(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class vc extends HS{constructor(e){super(e);l(this,"prev");l(this,"next");l(this,"movedFrom");this.value=e}static createAfter(e,r){const i=new vc(r),a=e.next;return e.next=i,i.prev=e,i.next=a,a&&(a.prev=i),i}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getMovedFrom(){return this.movedFrom}setMovedFrom(e){this.movedFrom=e}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class nl{constructor(){l(this,"dummyHead");l(this,"last");l(this,"nodeMapByIndex");l(this,"nodeMapByCreatedAt");const t=St.of(0,Us);t.setRemovedAt(Us),this.dummyHead=new vc(t),this.last=this.dummyHead,this.nodeMapByIndex=new el,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new nl}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(t,e){let r=this.nodeMapByCreatedAt.get(t.toIDString());if(!r)throw new T(S.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);for(;r.getValue().getMovedAt()&&r.getValue().getMovedAt().after(e)&&r.getMovedFrom();)r=r.getMovedFrom();for(;r.getNext()&&r.getNext().getPositionedAt().after(e);)r=r.getNext();return r}release(t){this.last===t&&(this.last=t.getPrev()),t.release(),this.nodeMapByIndex.delete(t),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}insertAfter(t,e,r=e.getCreatedAt()){const i=this.findNextBeforeExecutedAt(t,r),a=vc.createAfter(i,e);return i===this.last&&(this.last=a),this.nodeMapByIndex.insertAfter(i,a),this.nodeMapByCreatedAt.set(a.getCreatedAt().toIDString(),a),a}moveAfter(t,e,r){let i=this.nodeMapByCreatedAt.get(t.toIDString());if(!i)throw new T(S.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);let a=this.nodeMapByCreatedAt.get(e.toIDString());if(!a)throw new T(S.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);if(i!==a&&r.after(a.getPositionedAt())){const s=a.getPrev();let o=a.getNext();for(this.release(a),a=this.insertAfter(i.getCreatedAt(),a.getValue(),r),a.getValue().setMovedAt(r),a.setMovedFrom(s);o&&o.getPositionedAt().after(r);)i=a,a=o,o=a.getNext(),this.release(a),a=this.insertAfter(i.getCreatedAt(),a.getValue(),r),a.getValue().setMovedAt(r),a.setMovedFrom(s)}}insert(t){this.insertAfter(this.last.getCreatedAt(),t)}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return String(this.nodeMapByIndex.indexOf(e))}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new T(S.ErrInvalidArgument,`fail to find the given createdAt: ${t.getCreatedAt().toIDString()}`);this.release(e)}getByIndex(t){if(t>=this.length)return;const[e,r]=this.nodeMapByIndex.find(t);let i=e;if(t===0&&e===this.dummyHead||r>0)do i&&(i=i.getNext());while(i&&i.isRemoved());return i}getPrevCreatedAt(t){let e=this.nodeMapByCreatedAt.get(t.toIDString());do e=e.getPrev();while(this.dummyHead!==e&&e.isRemoved());return e.getValue().getCreatedAt()}delete(t,e){const r=this.nodeMapByCreatedAt.get(t.toIDString()),i=r.isRemoved();return r.remove(e)&&!i&&this.nodeMapByIndex.splayNode(r),r.getValue()}set(t,e,r){const i=this.nodeMapByCreatedAt.get(t.toIDString());if(!i)throw new T(S.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);return this.insertAfter(i.getCreatedAt(),e,r),this.delete(t,r)}deleteByIndex(t,e){const r=this.getByIndex(t);if(r)return r.remove(e)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const t=[];for(const e of this){const r=`${e.getCreatedAt().toIDString()}:${e.getValue().toJSON()}`;e.isRemoved()?t.push(`{${r}}`):t.push(`[${r}]`)}return t.join("")}*[Symbol.iterator](){let t=this.dummyHead.getNext();for(;t;)yield t,t=t.getNext()}}class Qt extends Wi{constructor(e,r){super(e);l(this,"elements");this.elements=r}static create(e,r){if(!r)return new Qt(e,nl.create());const i=nl.create();for(const a of r)i.insertAfter(i.getLastCreatedAt(),a.deepcopy());return new Qt(e,i)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,r,i){this.elements.insertAfter(e,r,i)}moveAfter(e,r,i){this.elements.moveAfter(e,r,i)}get(e){const r=this.elements.getByIndex(e);return r==null?void 0:r.getValue()}getByID(e){const r=this.elements.getByID(e);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,r){return this.elements.delete(e,r)}deleteByIndex(e,r){return this.elements.deleteByIndex(e,r)}set(e,r,i){return this.elements.set(e,r,i)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const r of this.elements){const i=r.getValue();if(e(i,this))return;i instanceof Wi&&i.getDescendants(e)}}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const r of this)e.push(r.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let r=0;r<this.length;r++){const{createdAt:i,value:a,type:s}=this.get(r).toJSForTest();e[r]={key:String(r),createdAt:i,value:a,type:s}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=Qt.create(this.getCreatedAt());for(const r of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),r.getValue().deepcopy());return e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}}class oa extends on{constructor(e,r,i,a){super(e,a);l(this,"prevCreatedAt");l(this,"value");this.prevCreatedAt=r,this.value=i}static create(e,r,i,a){return new oa(e,r,i,a)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Qt))throw new T(S.ErrInvalidArgument,"fail to execute, only array can execute add");const i=r,a=this.value.deepcopy();return i.insertAfter(this.prevCreatedAt,a,this.getExecutedAt()),e.registerElement(a,i),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(i.subPathOf(this.getEffectedCreatedAt()))}],reverseOp:this.toReverseOperation()}}toReverseOperation(){return xn.create(this.getParentCreatedAt(),this.value.getCreatedAt())}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}setPrevCreatedAt(e){this.prevCreatedAt=e}}class xn extends on{constructor(e,r,i){super(e,i);l(this,"createdAt");this.createdAt=r}static create(e,r,i){return new xn(e,r,i)}execute(e,r){var c;const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof Wi))throw new T(S.ErrInvalidArgument,`only object and array can execute remove: ${i}`);if(r===mt.UndoRedo){let h=i.getByID(this.createdAt);for(;h;){if(h.getRemovedAt())return;h=(c=e.findElementPairByCreatedAt(h.getCreatedAt()))==null?void 0:c.parent}}const a=i.subPathOf(this.createdAt),s=this.toReverseOperation(i),o=i.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(o),{opInfos:i instanceof Qt?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(a)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:a}],reverseOp:s}}toReverseOperation(e){if(e instanceof Qt){const r=e.getByID(this.createdAt);if(r!==void 0){const i=e.getPrevCreatedAt(this.createdAt);return oa.create(this.getParentCreatedAt(),i,r.deepcopy())}}if(e instanceof Zt){const r=e.subPathOf(this.createdAt);if(r!==void 0){const i=e.get(r);if(i!==void 0)return Ba.create(r,i.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}setCreatedAt(e){this.createdAt=e}}class Ba extends on{constructor(e,r,i,a){super(i,a);l(this,"key");l(this,"value");this.key=e,this.value=r}static create(e,r,i,a){return new Ba(e,r,i,a)}execute(e,r){var c;const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof Zt))throw new T(S.ErrInvalidArgument,"fail to execute, only object can execute set");if(r===mt.UndoRedo){let h=i;for(;h;){if(h.getRemovedAt())return;h=(c=e.findElementPairByCreatedAt(h.getCreatedAt()))==null?void 0:c.parent}}const a=i.get(this.key),s=this.toReverseOperation(a),o=this.value.deepcopy(),u=i.set(this.key,o,this.getExecutedAt());return r===mt.UndoRedo&&e.findByCreatedAt(o.getCreatedAt())&&e.deregisterElement(o),e.registerElement(o,i),u&&e.registerRemovedElement(u),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:s}}toReverseOperation(e){let r=xn.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(r=Ba.create(this.key,e.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class en extends on{constructor(e,r,i,a){super(e,a);l(this,"prevCreatedAt");l(this,"createdAt");this.prevCreatedAt=r,this.createdAt=i}static create(e,r,i,a){return new en(e,r,i,a)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Qt))throw new T(S.ErrInvalidArgument,"fail to execute, only array can execute move");const i=r,a=this.toReverseOperation(i),s=Number(i.subPathOf(this.createdAt));i.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const o=Number(i.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:o,previousIndex:s}],reverseOp:a}}toReverseOperation(e){const r=e.getPrevCreatedAt(this.createdAt);return en.create(this.getParentCreatedAt(),r,this.createdAt)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}setPrevCreatedAt(e){this.prevCreatedAt=e}setCreatedAt(e){this.createdAt=e}}class Hi{constructor(t,e,r,i){l(this,"key");l(this,"value");l(this,"updatedAt");l(this,"_isRemoved");this.key=t,this.value=e,this.updatedAt=r,this._isRemoved=i}static of(t,e,r,i){return new Hi(t,e,r,i)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}getDataSize(){return{data:(this.key.length+this.value.length)*2,meta:wn}}}class wi{constructor(){l(this,"nodeMapByKey");l(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new wi}getNodeMapByKey(){return this.nodeMapByKey}set(t,e,r){const i=this.nodeMapByKey.get(t);if(i&&i.isRemoved()&&r.after(i.getUpdatedAt())&&(this.numberOfRemovedElement-=1),i===void 0||r.after(i.getUpdatedAt())){const a=Hi.of(t,e,r,!1);return this.nodeMapByKey.set(t,a),i!==void 0&&i.isRemoved()?[i,a]:[void 0,a]}return i.isRemoved()?[i,void 0]:[void 0,void 0]}setInternal(t,e,r,i){const a=Hi.of(t,e,r,i);this.nodeMapByKey.set(t,a),i&&this.numberOfRemovedElement++}remove(t,e){const r=this.nodeMapByKey.get(t),i=[];if(r===void 0||e.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const o=Hi.of(t,"",e,!0);return this.nodeMapByKey.set(t,o),i.push(o),i}const a=r.isRemoved();a||(this.numberOfRemovedElement+=1),a&&i.push(r);const s=Hi.of(t,r.getValue(),e,!0);return this.nodeMapByKey.set(t,s),i.push(s),i}return i}has(t){if(this.nodeMapByKey.has(t)){const e=this.nodeMapByKey.get(t);return e!==void 0&&!e.isRemoved()}return!1}get(t){if(this.nodeMapByKey.has(t))return this.nodeMapByKey.get(t).getValue()}deepcopy(){const t=new wi;for(const[,e]of this.nodeMapByKey)t.setInternal(e.getKey(),e.getValue(),e.getUpdatedAt(),e.isRemoved());return t}toJSON(){if(!this.size())return"{}";const t=[];for(const[e,r]of this.nodeMapByKey)r.isRemoved()||t.push(`"${vn(e)}":"${vn(r.getValue())}"`);return`{${t.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const t={};for(const[e,r]of this.nodeMapByKey)r.isRemoved()||(t[e]=r.getValue());return t}*[Symbol.iterator](){for(const[,t]of this.nodeMapByKey)yield t}purge(t){const e=this.nodeMapByKey.get(t.getKey());e==null||e.toIDString()!=t.toIDString()||(this.nodeMapByKey.delete(t.getKey()),this.numberOfRemovedElement--)}}function Qe(n){if(n instanceof Map){const t=Array.from(n);return new Map(JSON.parse(JSON.stringify(t)))}return JSON.parse(JSON.stringify(n))}const XS=n=>n?Object.entries(n).length===0:!0,qs=n=>{const t={};for(const[e,r]of Object.entries(n))t[e]=JSON.stringify(r);return t},yi=n=>{const t={};for(const[e,r]of Object.entries(n))t[e]=JSON.parse(r);return t};function iE(n){return n?rp(n.live)+rp(n.gc):0}function rp(n){return n.data+n.meta}function jt(n,...t){for(const e of t)n.data+=e.data,n.meta+=e.meta}function pa(n,t){n.data-=t.data,n.meta-=t.meta}class rl{constructor(t){l(this,"attributes");l(this,"content");this.attributes=wi.create(),this.content=t}static create(t){return new rl(t)}get length(){return this.content.length}substring(t,e){const r=new rl(this.content.substring(t,e));return r.attributes=this.attributes.deepcopy(),r}setAttr(t,e,r){return this.attributes.set(t,e,r)}getAttrs(){return this.attributes}toString(){return this.content}getDataSize(){const t={data:0,meta:0};t.data+=this.content.length*2;for(const e of this.attributes){const r=e.getDataSize();t.meta+=r.meta,t.data+=r.data}return t}toJSON(){const t=vn(this.content),e=this.attributes.toObject(),r=[];for(const[i,a]of Object.entries(e)){const s=JSON.parse(a),o=typeof s=="string"?`"${vn(i)}":"${vn(s)}"`:`"${vn(i)}":${String(s)}`;r.push(o)}return r.sort(),r.length===0?`{"val":"${t}"}`:`{"attrs":{${r.join(",")}},"val":"${t}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(t){this.attributes&&t instanceof Hi&&this.attributes.purge(t)}getGCPairs(){const t=[];for(const e of this.attributes)e.getRemovedAt()&&t.push({parent:this,child:e});return t}}class Ae extends wl{constructor(e,r){super(r);l(this,"rgaTreeSplit");this.rgaTreeSplit=e}static create(e,r){return new Ae(e,r)}edit(e,r,i,a,s){const o=r?rl.create(r):void 0;if(o&&a)for(const[m,A]of Object.entries(a))o.setAttr(m,A,i);const[u,c,h,g]=this.rgaTreeSplit.edit(e,i,o,s);return[g.map(m=>({...m,value:m.value?{attributes:yi(m.value.getAttributes()),content:m.value.getContent()}:{attributes:void 0,content:""},type:"content"})),c,h,[u,u]]}setStyle(e,r,i,a){const s={data:0,meta:0},[,o,u]=this.rgaTreeSplit.findNodeWithSplit(e[1],i),[,c,h]=this.rgaTreeSplit.findNodeWithSplit(e[0],i);jt(s,o,c);const g=[],d=this.rgaTreeSplit.findBetween(h,u),m=[];for(const b of d){const x=b.getCreatedAt().getActorID();let p=Td;a!=null&&(p=a.get(x)?a.get(x):0n),b.canStyle(i,p)&&m.push(b)}const A=[];for(const b of m){if(b.isRemoved())continue;const[x,p]=this.rgaTreeSplit.findIndexesFromRange(b.createPosRange());g.push({type:"style",actor:i.getActorID(),from:x,to:p,value:{attributes:yi(r)}});for(const[y,v]of Object.entries(r)){const[w]=b.getValue().setAttr(y,v,i);w!==void 0&&A.push({parent:b.getValue(),child:w});const O=b.getValue().getAttrs().getNodeMapByKey().get(y);O!==void 0&&jt(s,O.getDataSize())}}return[A,s,g]}indexRangeToPosRange(e,r){const i=this.rgaTreeSplit.indexToPos(e);return e===r?[i,i]:[i,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}getDataSize(){const e={data:0,meta:0};for(const r of this.rgaTreeSplit){if(r.isRemoved())continue;const i=r.getDataSize();e.data+=i.data,e.meta+=i.meta}return{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){const e=[];for(const r of this.rgaTreeSplit)r.isRemoved()||e.push(r.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const i=r.getValue();e.push({attributes:yi(i.getAttributes()),content:i.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new Ae(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:r});for(const i of r.getValue().getGCPairs())e.push(i)}return e}}class Al extends on{constructor(e,r,i,a,s,o){super(e,o);l(this,"fromPos");l(this,"toPos");l(this,"content");l(this,"attributes");this.fromPos=r,this.toPos=i,this.content=a,this.attributes=s}static create(e,r,i,a,s,o){return new Al(e,r,i,a,s,o)}execute(e,r,i){const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Ae))throw new T(S.ErrInvalidArgument,"fail to execute, only Text can execute edit");const s=a,[o,u,c]=s.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),i);e.acc(c);for(const h of u)e.registerGCPair(h);return{opInfos:o.map(({from:h,to:g,value:d})=>({type:"edit",from:h,to:g,value:d,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),a=this.content;return`${e}.EDIT(${r},${i},${a})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}}class El extends on{constructor(e,r,i,a,s){super(e,s);l(this,"fromPos");l(this,"toPos");l(this,"attributes");this.fromPos=r,this.toPos=i,this.attributes=a}static create(e,r,i,a,s){return new El(e,r,i,a,s)}execute(e,r,i){const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Ae))throw new T(S.ErrInvalidArgument,"fail to execute, only Text can execute edit");const s=a,[o,u,c]=s.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),i);e.acc(u);for(const h of o)e.registerGCPair(h);return{opInfos:c.map(({from:h,to:g,value:d})=>({type:"style",from:h,to:g,value:d,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),a=this.attributes;return`${e}.STYL(${r},${i},${JSON.stringify(a)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}const aE=2,sE="root",An="text";function ao(n,t,e=!1){let r=0;const i=e?n.allChildren:n.children;for(let a=0;a<t;a++){const s=i[a];!s||!e&&s.isRemoved||(r+=s.paddedSize(e))}return r}class oE{constructor(t,e=[]){l(this,"type");l(this,"parent");l(this,"_children");l(this,"visibleSize");l(this,"totalSize");if(this.type=t,this.visibleSize=0,this.totalSize=0,this._children=e,this.isText&&this._children.length>0)throw new T(S.ErrRefused,"Text node cannot have children")}updateAncestorsSize(t,e=!1){let r=this.parent;for(;r;){if(e)r.totalSize+=t;else if(r.visibleSize+=t,r.isRemoved)break;r=r.parent}}updateDescendantsSize(t=!1){let e=0;for(const r of this._children){const i=r.updateDescendantsSize(t);!t&&r.isRemoved||(e+=i)}return t?this.totalSize+=e:this.visibleSize+=e,this.paddedSize(t)}get isText(){return this.type===An}paddedSize(t=!1){let e=this.visibleSize;return t&&(e=this.totalSize),this.isText||(e+=aE),e}isAncestorOf(t){return lE(this,t)}get nextSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t+1];if(e)return e}get prevSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t-1];if(e)return e}splitText(t,e){const r={data:0,meta:0};if(t===0||t===this.visibleSize)return[void 0,r];const i=this.value.slice(0,t),a=this.value.slice(t);if(!a.length)return[void 0,r];const s=this.getDataSize();this.value=i;const o=this.cloneText(t+e);return o.value=a,this.parent.insertAfterInternal(o,this),jt(r,this.getDataSize(),o.getDataSize()),pa(r,s),[o,r]}get children(){return this._children.filter(t=>!t.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(t=>t.isText)}getChildrenText(){return this.isText?this.value:this.hasTextChild()?this.children.map(t=>t.value).join(""):""}append(...t){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");this._children.push(...t);for(const e of t)e.parent=this,e.updateAncestorsSize(e.paddedSize()),e.updateAncestorsSize(e.paddedSize(!0),!0)}prepend(...t){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");this._children.unshift(...t);for(const e of t)e.parent=this}insertBefore(t,e){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(e);if(r===-1)throw new T(S.ErrInvalidArgument,"child not found");this.insertAtInternal(t,r),t.updateAncestorsSize(t.paddedSize()),t.updateAncestorsSize(t.paddedSize(!0),!0)}insertAfter(t,e){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(e);if(r===-1)throw new T(S.ErrInvalidArgument,"child not found");this.insertAtInternal(t,r+1),t.updateAncestorsSize(t.paddedSize()),t.updateAncestorsSize(t.paddedSize(!0),!0)}insertAt(t,e){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");this.insertAtInternal(t,e),t.updateAncestorsSize(t.paddedSize()),t.updateAncestorsSize(t.paddedSize(!0),!0)}removeChild(t){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");const e=this._children.indexOf(t);if(e===-1)throw new T(S.ErrInvalidArgument,"child not found");this._children.splice(e,1),t.updateAncestorsSize(-t.paddedSize(!0),!0),t.parent=void 0}splitElement(t,e){const r={data:0,meta:0},i=this.getDataSize(),a=this.cloneElement(e);this.parent.insertAfterInternal(a,this),a.updateAncestorsSize(a.paddedSize()),a.updateAncestorsSize(a.paddedSize(!0),!0);const s=this.children.slice(0,t),o=this.children.slice(t);this._children=s,a._children=o,this.visibleSize=this._children.reduce((u,c)=>u+c.paddedSize(),0),this.totalSize=this._children.reduce((u,c)=>u+c.paddedSize(!0),0),a.visibleSize=a._children.reduce((u,c)=>u+c.paddedSize(!0),0),a.totalSize=a._children.reduce((u,c)=>u+c.paddedSize(!0),0);for(const u of a._children)u.parent=a;return jt(r,this.getDataSize(),a.getDataSize()),pa(r,i),[a,r]}insertAfterInternal(t,e){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(e);if(r===-1)throw new T(S.ErrInvalidArgument,"child not found");this.insertAtInternal(t,r+1)}insertAtInternal(t,e){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");this._children.splice(e,0,t),t.parent=this}findOffset(t,e=!1){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");if(e)return this._children.indexOf(t);if(t.isRemoved){const r=this._children.indexOf(t);return this.allChildren.splice(0,r).filter(a=>!a.isRemoved).length}return this.children.indexOf(t)}findBranchOffset(t){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");let e=t;for(;e;){const r=this._children.indexOf(e);if(r!==-1)return r;e=e.parent}return-1}}function lE(n,t){if(n===t)return!1;for(;t.parent;){if(t.parent===n)return!0;t=t.parent}return!1}var xt=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(xt||{});function FS(n,t,e,r,i=!1){if(t>e)throw new T(S.ErrInvalidArgument,`from is greater than to: ${t} > ${e}`);const a=i?n.totalSize:n.visibleSize;if(t>a)throw new T(S.ErrInvalidArgument,`from is out of range: ${t} > ${a}`);if(e>a)throw new T(S.ErrInvalidArgument,`to is out of range: ${e} > ${a}`);if(t===e)return;let s=0;const o=i?n._children:n.children;for(const u of o){if(t-u.paddedSize(i)<s&&s<e){const c=u.isText?t-s:t-s-1,h=u.isText?e-s:e-s-1,g=i?u.totalSize:u.visibleSize,d=!u.isText&&c<0,m=!u.isText&&h>g;(u.isText||d)&&r([u,u.isText?"Text":"Start"],m),FS(u,Math.max(0,c),Math.min(h,g),r,i),m&&r([u,"End"],m)}s+=u.paddedSize(i)}}function ZS(n,t,e=0){for(const r of n.children)ZS(r,t,e+1);t(n,e)}function Vc(n,t,e=0){for(const r of n._children)Vc(r,t,e+1);t(n,e)}function wd(n,t,e=!0){if(t>n.visibleSize)throw new T(S.ErrInvalidArgument,`index is out of range: ${t} > ${n.visibleSize}`);if(n.isText)return{node:n,offset:t};let r=0,i=0;for(const a of n.children){if(e&&a.isText&&a.visibleSize>=t-i)return wd(a,t-i,e);if(t===i)return{node:n,offset:r};if(!e&&a.paddedSize()===t-i)return{node:n,offset:r+1};if(a.paddedSize()>t-i)return wd(a,t-i-1,e);i+=a.paddedSize(),r+=1}return{node:n,offset:r}}function QS(n){return n.isText||n.children.length===0?n:QS(n.children[0])}function uE(n,t){if(n.visibleSize<t)throw new T(S.ErrInvalidArgument,"unacceptable path");for(let e=0;e<n.children.length;e++){const r=n.children[e];if(r.visibleSize<t)t-=r.visibleSize;else{n=r;break}}return{node:n,offset:t}}class cE{constructor(t){l(this,"root");this.root=t}tokensBetween(t,e,r,i=!1){FS(this.root,t,e,r,i)}traverse(t){ZS(this.root,t,0)}traverseAll(t){Vc(this.root,t,0)}findTreePos(t,e=!0){return wd(this.root,t,e)}treePosToPath(t){const e=[];let r=t.node;if(r.isText){const i=r.parent.findOffset(r);if(i===-1)throw new T(S.ErrInvalidArgument,"invalid treePos");const a=ao(r.parent,i);e.push(a+t.offset),r=r.parent}else if(r.hasTextChild()){const i=ao(r,t.offset);e.push(i)}else e.push(t.offset);for(;r.parent;){const i=r.parent.findOffset(r);if(i===-1)throw new T(S.ErrInvalidArgument,"invalid treePos");e.push(i),r=r.parent}return e.reverse()}pathToIndex(t){const e=this.pathToTreePos(t);return this.indexOf(e)}pathToTreePos(t){if(!t.length)throw new T(S.ErrInvalidArgument,"unacceptable path");let e=this.root;for(let r=0;r<t.length-1;r++){const i=t[r];if(e=e.children[i],!e)throw new T(S.ErrInvalidArgument,"unacceptable path")}if(e.hasTextChild())return uE(e,t[t.length-1]);if(e.children.length<t[t.length-1])throw new T(S.ErrInvalidArgument,"unacceptable path");return{node:e,offset:t[t.length-1]}}getRoot(){return this.root}get size(){return this.root.visibleSize}findPostorderRight(t){const{node:e,offset:r}=t;if(e.isText){if(e.visibleSize===r){const i=e.nextSibling;return i||e.parent}return e}return e.children.length===r?e:QS(e.children[r])}indexOf(t,e=!1){let{node:r}=t;const{offset:i}=t;let a=0,s=1;if(r.isText){a+=i;const o=r.parent,u=o.findOffset(r,e);if(u===-1)throw new T(S.ErrInvalidArgument,"invalid pos");a+=ao(o,u,e),r=r.parent}else a+=ao(r,i,e);for(;r!=null&&r.parent;){const o=r.parent,u=o.findOffset(r,e);if(u===-1)throw new T(S.ErrInvalidArgument,"invalid pos");a+=ao(o,u,e),s++,r=r.parent}return a+s-1}indexToPath(t){const e=this.findTreePos(t);return this.treePosToPath(e)}}const fE=(n,t)=>n===t?0:n<t?-1:1;class hE{constructor(t,e,r){l(this,"key");l(this,"value");l(this,"left");l(this,"right");l(this,"isRed");this.key=t,this.value=e,this.isRed=r}}class dE{constructor(t){l(this,"stack");this.stack=[],this.traverseInorder(t)}traverseInorder(t){t&&(this.traverseInorder(t.left),this.stack.push({key:t.key,value:t.value}),this.traverseInorder(t.right))}}class _S{constructor(t){l(this,"root");l(this,"comparator");l(this,"counter");this.comparator=typeof t<"u"?t:fE,this.counter=0}put(t,e){return this.root=this.putInternal(t,e,this.root),this.root.isRed=!1,e}get(t){const e=this.getInternal(t,this.root);return e?e.value:void 0}remove(t){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,t),this.root&&(this.root.isRed=!1)}getIterator(){return new dE(this.root)}values(){const t=[];for(const e of this.getIterator().stack)t.push(e.value);return t}floorEntry(t){let e=this.root,r;for(;e;){const i=this.comparator(t,e.key);if(i===0)return e;i<0?e=e.left:(r=e,e=e.right)}return r}lastEntry(){if(!this.root)return this.root;let t=this.root;for(;t.right;)t=t.right;return t}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(t,e){for(;e;){const r=this.comparator(t,e.key);if(r===0)return e;r<0?e=e.left:r>0&&(e=e.right)}}putInternal(t,e,r){if(!r)return this.counter+=1,new hE(t,e,!0);const i=this.comparator(t,r.key);return i<0?r.left=this.putInternal(t,e,r.left):i>0?r.right=this.putInternal(t,e,r.right):r.value=e,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(t,e){if(this.comparator(e,t.key)<0)!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeInternal(t.left,e);else{if(this.isRed(t.left)&&(t=this.rotateRight(t)),this.comparator(e,t.key)===0&&!t.right){this.counter-=1;return}if(!this.isRed(t.right)&&!this.isRed(t.right.left)&&(t=this.moveRedRight(t)),this.comparator(e,t.key)===0){this.counter-=1;const r=this.min(t.right);t.value=r.value,t.key=r.key,t.right=this.removeMin(t.right)}else t.right=this.removeInternal(t.right,e)}return this.fixUp(t)}min(t){return t.left?this.min(t.left):t}removeMin(t){if(t.left)return!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeMin(t.left),this.fixUp(t)}fixUp(t){return this.isRed(t.right)&&(t=this.rotateLeft(t)),this.isRed(t.left)&&this.isRed(t.left.left)&&(t=this.rotateRight(t)),this.isRed(t.left)&&this.isRed(t.right)&&this.flipColors(t),t}moveRedLeft(t){return this.flipColors(t),this.isRed(t.right.left)&&(t.right=this.rotateRight(t.right),t=this.rotateLeft(t),this.flipColors(t)),t}moveRedRight(t){return this.flipColors(t),this.isRed(t.left.left)&&(t=this.rotateRight(t),this.flipColors(t)),t}isRed(t){return t&&t.isRed}rotateLeft(t){const e=t.right;return t.right=e.left,e.left=t,e.isRed=e.left.isRed,e.left.isRed=!0,e}rotateRight(t){const e=t.left;return t.left=e.right,e.right=t,e.isRed=e.right.isRed,e.right.isRed=!0,e}flipColors(t){t.isRed=!t.isRed,t.left.isRed=!t.left.isRed,t.right.isRed=!t.right.isRed}}class nn{constructor(t,e){l(this,"parentID");l(this,"leftSiblingID");this.parentID=t,this.leftSiblingID=e}static of(t,e){return new nn(t,e)}static fromTreePos(t){const{offset:e}=t;let{node:r}=t,i;return r.isText?(r.parent.children[0]===r&&e===0?i=r.parent:i=r,r=r.parent):e===0?i=r:i=r.children[e-1],nn.of(r.id,Yt.of(i.getCreatedAt(),i.getOffset()+e))}getParentID(){return this.parentID}static fromStruct(t){return nn.of(Yt.of(Ge.fromStruct(t.parentID.createdAt),t.parentID.offset),Yt.of(Ge.fromStruct(t.leftSiblingID.createdAt),t.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(t){const e=this.getParentID(),r=this.getLeftSiblingID(),i=t.findFloorNode(e);let a=t.findFloorNode(r);if(!i||!a)throw new T(S.ErrRefused,`cannot find node of CRDTTreePos(${e.toTestString()}, ${r.toTestString()})`);return!r.equals(e)&&r.getOffset()>0&&r.getOffset()===a.id.getOffset()&&a.insPrevID&&(a=t.findFloorNode(a.insPrevID)),[i,a]}getLeftSiblingID(){return this.leftSiblingID}equals(t){return this.getParentID().getCreatedAt().equals(t.getParentID().getCreatedAt())&&this.getParentID().getOffset()===t.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(t.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===t.getLeftSiblingID().getOffset()}}class Yt{constructor(t,e){l(this,"createdAt");l(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new Yt(t,e)}static fromStruct(t){return Yt.of(Ge.fromStruct(t.createdAt),t.offset)}static createComparator(){return(t,e)=>{const r=t.getCreatedAt().compare(e.getCreatedAt());return r!==0?r:t.getOffset()>e.getOffset()?1:t.getOffset()<e.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}getOffset(){return this.offset}setOffset(t){this.offset=t}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class pe extends oE{constructor(e,r,i,a,s){super(r);l(this,"id");l(this,"removedAt");l(this,"attrs");l(this,"insPrevID");l(this,"insNextID");l(this,"_value","");this.id=e,this.removedAt=s,a&&(this.attrs=a),typeof i=="string"?this.value=i:Array.isArray(i)&&(this._children=i)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,r,i,a){return new pe(e,r,i,a)}deepcopy(){var r;const e=new pe(this.id,this.type);return e.removedAt=this.removedAt,e._value=this._value,e.visibleSize=this.visibleSize,e.totalSize=this.totalSize,e.attrs=(r=this.attrs)==null?void 0:r.deepcopy(),e._children=this._children.map(i=>{const a=i.deepcopy();return a.parent=e,a}),e.insPrevID=this.insPrevID,e.insNextID=this.insNextID,e}get value(){if(!this.isText)throw new T(S.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new T(S.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=e,this.visibleSize=e.length,this.totalSize=e.length}get isRemoved(){return!!this.removedAt}remove(e){return this.removedAt?(e.after(this.removedAt)&&(this.removedAt=e),!1):(this.removedAt=e,this.updateAncestorsSize(-this.paddedSize()),!0)}cloneText(e){return new pe(Yt.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new pe(Yt.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,r,i){const[a,s]=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,i);if(a){if(a.insPrevID=this.id,this.insNextID){const o=e.findFloorNode(this.insNextID);o.insPrevID=a.id,a.insNextID=this.insNextID}this.insNextID=a.id,e.registerNode(a)}return[a,s]}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,r,i){return r?!!(!this.removedAt||!i&&(e!=null&&e.after(this.removedAt))):!1}canStyle(e,r){return this.isText?!1:this.getCreatedAt().getLamport()<=r&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,r){this.attrs||(this.attrs=new wi);const i=[];for(const[a,s]of Object.entries(e))i.push(this.attrs.set(a,s,r));return i}purge(e){this.attrs&&this.attrs.purge(e)}getDataSize(){const e={data:0,meta:0};if(this.isText&&(e.data+=this.visibleSize*2),this.id&&(e.meta+=wn),this.removedAt&&(e.meta+=wn),this.attrs)for(const r of this.attrs){if(r.getRemovedAt())continue;const i=r.getDataSize();e.meta+=i.meta,e.data+=i.data}return e}getGCPairs(){const e=[];if(!this.attrs)return e;for(const r of this.attrs)r.getRemovedAt()&&e.push({parent:this,child:r});return e}}function Ad(n){var e;if(n.isText){const r=n;return{type:r.type,value:r.value}}const t={type:n.type,children:n.children.map(Ad)};return n.attrs&&(t.attributes=yi((e=n.attrs)==null?void 0:e.toObject())),t}function Om(n){if(n.isText)return n.value;let t="";return n.attrs&&n.attrs.size()&&(t=" "+Array.from(n.attrs).filter(e=>!e.isRemoved()).sort((e,r)=>e.getKey().localeCompare(r.getKey())).map(e=>{const r=JSON.parse(e.getValue());return typeof r=="string"?`${e.getKey()}="${r}"`:`${e.getKey()}="${vn(e.getValue())}"`}).join(" ")),`<${n.type}${t}>${n.children.map(e=>Om(e)).join("")}</${n.type}>`}function WS(n){if(n.isText){const t=n;return{type:t.type,value:t.value,visibleSize:t.visibleSize,isRemoved:t.isRemoved}}return{type:n.type,children:n.children.map(WS),visibleSize:n.visibleSize,isRemoved:n.isRemoved}}class Ee extends wl{constructor(e,r){super(r);l(this,"indexTree");l(this,"nodeMapByID");this.indexTree=new cE(e),this.nodeMapByID=new _S(Yt.createComparator()),this.indexTree.traverseAll(i=>{this.nodeMapByID.put(i.id,i)})}static create(e,r){return new Ee(e,r)}findFloorNode(e){const r=this.nodeMapByID.floorEntry(e);if(!(!r||!r.key.getCreatedAt().equals(e.getCreatedAt())))return r.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,r){let i={data:0,meta:0};const[a,s]=e.toTreeNodePair(this);let o=s;const u=a===o,c=o.parent&&!u?o.parent:a;if(o.isText){const[,h]=o.split(this,e.getLeftSiblingID().getOffset()-o.id.getOffset());i=h}if(r){const h=c.allChildren,g=u?0:h.indexOf(o)+1;for(let d=g;d<h.length;d++){const m=h[d];if(!m.id.getCreatedAt().after(r))break;o=m}}return[[c,o],i]}style(e,r,i,a){const s={data:0,meta:0},[[o,u],c]=this.findNodesAndSplitText(e[0],i),[[h,g],d]=this.findNodesAndSplitText(e[1],i);jt(s,d,c);const m=[],A=r?yi(r):{},b=[];return this.traverseInPosRange(o,u,h,g,([x,p])=>{var w;const y=x.getCreatedAt().getActorID();let v=Td;if(a!=null&&(v=a.get(y)?a.get(y):0n),x.canStyle(i,v)&&r){const O=x.setAttrs(r,i),I=O.reduce((P,[,J])=>(J&&(P[J.getKey()]=A[J.getKey()]),P),{}),C=x.parent,R=x.prevSibling||x.parent;Object.keys(I).length>0&&m.push({type:"style",from:this.toIndex(C,R),to:this.toIndex(x,x),fromPath:this.toPath(C,R),toPath:this.toPath(x,x),actor:i.getActorID(),value:I});for(const[P]of O)P&&b.push({parent:x,child:P});for(const[P]of Object.entries(A)){const J=(w=x.attrs)==null?void 0:w.getNodeMapByKey().get(P);J!==void 0&&p!==xt.End&&jt(s,J.getDataSize())}}}),[b,m,s]}removeStyle(e,r,i,a){const s={data:0,meta:0},[[o,u],c]=this.findNodesAndSplitText(e[0],i),[[h,g],d]=this.findNodesAndSplitText(e[1],i);jt(s,d,c);const m=[],A=[];return this.traverseInPosRange(o,u,h,g,([b])=>{const x=b.getCreatedAt().getActorID();let p=Td;if(a!=null&&(p=a.get(x)?a.get(x):0n),b.canStyle(i,p)&&r){b.attrs||(b.attrs=new wi);for(const w of r){const O=b.attrs.remove(w,i);for(const I of O)A.push({parent:b,child:I})}const y=b.parent,v=b.prevSibling||b.parent;m.push({actor:i.getActorID(),type:"removeStyle",from:this.toIndex(y,v),to:this.toIndex(b,b),fromPath:this.toPath(y,v),toPath:this.toPath(b,b),value:r})}}),[A,m,s]}edit(e,r,i,a,s,o){const u={data:0,meta:0},[[c,h],g]=this.findNodesAndSplitText(e[0],a),[[d,m],A]=this.findNodesAndSplitText(e[1],a);jt(u,A,g);const b=this.toIndex(c,h),x=this.toPath(c,h),p=[],y=[],v=[];this.traverseInPosRange(c,h,d,m,([I,C],R)=>{if(C===xt.Start&&!R)for(const la of I.children)v.push(la);const P=o===void 0;let J=!1;const Vt=o==null?void 0:o.get(I.id.getCreatedAt().getActorID());J=P||Vt!==void 0&&Vt>=I.id.getCreatedAt().getLamport();let fe=!1;if(I.removedAt){const la=o==null?void 0:o.get(I.removedAt.getActorID());fe=P||la!==void 0&&la>=I.removedAt.getLamport()}(I.canDelete(a,J,fe)||p.includes(I.parent))&&((C===xt.Text||C===xt.Start)&&p.push(I),y.push([I,C]))},!0);const w=this.makeDeletionChanges(y,a),O=[];for(const I of p)I.remove(a),I.isRemoved&&O.push({parent:this,child:I});for(const I of v)I.removedAt||c.append(I);if(i>0){let I=0,C=c,R=h;for(;I<i;)C.split(this,C.findOffset(R)+1,s),R=C,C=C.parent,I++;w.push({type:"content",from:b,to:b,fromPath:x,toPath:x,actor:a.getActorID()})}if(r!=null&&r.length){const I=[];let C=h;for(const R of r)C===c?c.insertAt(R,0):c.insertAfter(R,C),C=R,Vc(R,P=>{c.isRemoved?(P.remove(a),O.push({parent:this,child:P})):jt(u,P.getDataSize()),this.nodeMapByID.put(P.id,P)}),R.isRemoved||I.push(R);if(I.length){const R=I.map(P=>Ad(P));w.length&&w[w.length-1].from===b?w[w.length-1].value=R:w.push({type:"content",from:b,to:b,fromPath:x,toPath:x,actor:a.getActorID(),value:R})}}return[w,O,u]}editT(e,r,i,a,s){const o=this.findPos(e[0]),u=this.findPos(e[1]);return this.edit([o,u],r,i,a,s)}move(e,r,i){throw new T(S.ErrUnimplemented,`not implemented: ${e}, ${r}, ${i}`)}pathToTreePos(e){return this.indexTree.pathToTreePos(e)}purge(e){var a;(a=e.parent)==null||a.removeChild(e),this.nodeMapByID.remove(e.id);const r=e.insPrevID,i=e.insNextID;if(r){const s=this.findFloorNode(r);s.insNextID=i}if(i){const s=this.findFloorNode(i);s.insPrevID=r}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&e.push({parent:this,child:r});for(const i of r.getGCPairs())e.push(i)}),e}findPos(e,r=!0){const i=this.indexTree.findTreePos(e,r);return nn.fromTreePos(i)}pathToPosRange(e){const r=this.pathToIndex(e);return[this.findPos(r),this.findPos(r+1)]}pathToPos(e){const r=this.indexTree.pathToIndex(e);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return Om(this.indexTree.getRoot())}getDataSize(){const e={data:0,meta:0};return this.indexTree.traverse(r=>{if(r.getRemovedAt())return;const i=r.getDataSize();e.data+=i.data,e.meta+=i.meta}),{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),r=(i,a=void 0,s=void 0,o=0)=>{var m,A,b,x;let u,c,h;const g=i.isText?{node:i,offset:0}:a&&s?this.toTreePos(a,s):null;g&&(u=this.indexTree.indexOf(g),c=this.indexTree.treePosToPath(g),h=nn.fromTreePos(g).toStruct());const d={type:i.type,parent:a==null?void 0:a.id.toTestString(),size:i.visibleSize,id:i.id.toTestString(),removedAt:(m=i.removedAt)==null?void 0:m.toTestString(),insPrev:(A=i.insPrevID)==null?void 0:A.toTestString(),insNext:(b=i.insNextID)==null?void 0:b.toTestString(),value:i.isText?i.value:void 0,isRemoved:i.isRemoved,children:[],depth:o,attributes:i.attrs?yi((x=i.attrs)==null?void 0:x.toObject()):void 0,index:u,path:c,pos:h};for(let p=0;p<i.allChildren.length;p++){const y=p===0?i:i.allChildren[p-1];d.children.push(r(i.allChildren[p],i,y,o+1))}return d};return r(e)}getRootTreeNode(){return Ad(this.indexTree.getRoot())}toTestTreeNode(){return WS(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot(),r=new Ee(e.deepcopy(),this.getCreatedAt());return r.setRemovedAt(this.getRemovedAt()),r.setMovedAt(this.getMovedAt()),r}toPath(e,r){const i=this.toTreePos(e,r);return i?this.indexTree.treePosToPath(i):[]}toIndex(e,r,i=!1){const a=this.toTreePos(e,r,i);return a?this.indexTree.indexOf(a,i):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const r=this.findPos(e[0]);return e[0]===e[1]?[r,r]:[r,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[r,i]=e,a=this.findPos(r);return r===i?[a.toStruct(),a.toStruct()]:[a.toStruct(),this.findPos(i).toStruct()]}posRangeToPathRange(e){const[[r,i]]=this.findNodesAndSplitText(e[0]),[[a,s]]=this.findNodesAndSplitText(e[1]);return[this.toPath(r,i),this.toPath(a,s)]}posRangeToIndexRange(e){const[[r,i]]=this.findNodesAndSplitText(e[0]),[[a,s]]=this.findNodesAndSplitText(e[1]);return[this.toIndex(r,i),this.toIndex(a,s)]}traverseInPosRange(e,r,i,a,s,o=!1){const u=this.toIndex(e,r,o),c=this.toIndex(i,a,o);this.indexTree.tokensBetween(u,c,s,o)}toTreePos(e,r,i=!1){if(!e||!r)return;if(!i&&e.isRemoved){let s;for(;e.isRemoved;)s=e,e=s.parent;const o=e.findOffset(s,i);return{node:e,offset:o}}if(e===r)return{node:e,offset:0};let a=e.findOffset(r,i);if(i||!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize(i)};a++}return{node:e,offset:a}}makeDeletionChanges(e,r){const i=[],a=[];let s=null,o=null;for(let u=0;u<e.length;u++){const c=e[u],h=e[u+1];s||(s=c),o=c;const g=this.findRightToken(c);(!g||!h||g[0]!==h[0]||g[1]!==h[1])&&(a.push([s,o]),s=null,o=null)}for(const u of a){const[c,h]=u,[g,d]=this.findLeftToken(c),[m,A]=h,b=d===xt.Start?g:g.parent,x=A===xt.Start?m:m.parent,p=this.toIndex(b,g),y=this.toIndex(x,m);p<y&&(i.length>0&&p===i[i.length-1].to?(i[i.length-1].to=y,i[i.length-1].toPath=this.toPath(x,m)):i.push({type:"content",from:p,to:y,fromPath:this.toPath(b,g),toPath:this.toPath(x,m),actor:r.getActorID()}))}return i.reverse()}findRightToken([e,r]){if(r===xt.Start){const u=e.allChildren;return u.length>0?[u[0],u[0].isText?xt.Text:xt.Start]:[e,xt.End]}const i=e.parent,a=i.allChildren,s=a.indexOf(e);if(i&&s===a.length-1)return[i,xt.End];const o=a[s+1];return[o,o.isText?xt.Text:xt.Start]}findLeftToken([e,r]){if(r===xt.End){const u=e.allChildren;if(u.length>0){const c=u[u.length-1];return[c,c.isText?xt.Text:xt.End]}return[e,xt.Start]}const i=e.parent,a=i.allChildren,s=a.indexOf(e);if(i&&s===0)return[i,xt.Start];const o=a[s-1];return[o,o.isText?xt.Text:xt.End]}}class Nl extends on{constructor(e,r,i,a,s,o){super(e,o);l(this,"fromPos");l(this,"toPos");l(this,"contents");l(this,"splitLevel");this.fromPos=r,this.toPos=i,this.contents=a,this.splitLevel=s}static create(e,r,i,a,s,o){return new Nl(e,r,i,a,s,o)}execute(e,r,i){var g;const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Ee))throw new T(S.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const s=this.getExecutedAt(),o=a,[u,c,h]=o.edit([this.fromPos,this.toPos],(g=this.contents)==null?void 0:g.map(d=>d.deepcopy()),this.splitLevel,s,(()=>{let d=s.getDelimiter();return this.contents!==void 0&&(d+=this.contents.length),()=>Ge.of(s.getLamport(),++d,s.getActorID())})(),i);e.acc(h);for(const d of c)e.registerGCPair(d);return{opInfos:u.map(({from:d,to:m,value:A,splitLevel:b,fromPath:x,toPath:p})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:d,to:m,value:A,splitLevel:b,fromPath:x,toPath:p}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,a=this.contents||[];return`${e}.EDIT(${r},${i},${a.map(s=>Om(s)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}}class ps{constructor(t){l(this,"vector");this.vector=t||new Map}set(t,e){this.vector.set(t,e)}unset(t){this.vector.delete(t)}get(t){return this.vector.get(t)}has(t){return this.vector.has(t)}maxLamport(){let t=BigInt(0);for(const[,e]of this)e>t&&(t=e);return t}max(t){const e=new Map;for(const[r,i]of t){const a=this.vector.get(r),s=a&&a>i?a:i;e.set(r,s)}for(const[r,i]of this){const a=t.get(r),s=a&&a>i?a:i;e.set(r,s)}return new ps(e)}afterOrEqual(t){const e=this.vector.get(t.getActorID());return e===void 0?!1:e>=t.getLamport()}deepcopy(){const t=new Map;for(const[e,r]of this.vector)t.set(e,r);return new ps(t)}filter(t){const e=new Map;for(const[r]of t){const i=this.vector.get(r);i!==void 0&&e.set(r,i)}return new ps(e)}size(){return this.vector.size}*[Symbol.iterator](){for(const[t,e]of this.vector)yield[t,e]}}const tT=new ps(new Map);class _e{constructor(t,e,r,i,a){l(this,"clientSeq");l(this,"serverSeq");l(this,"actor");l(this,"lamport");l(this,"versionVector");this.clientSeq=t,this.serverSeq=a,this.lamport=e,this.versionVector=i,this.actor=r}hasClocks(){return this.versionVector.size()>0&&this.lamport!=Sd}static of(t,e,r,i,a){return new _e(t,e,r,i,a)}next(t=!1){if(t)return new _e(this.clientSeq+1,this.lamport,this.actor,tT,Sd);const e=this.versionVector.deepcopy();return e.set(this.actor,this.lamport+1n),new _e(this.clientSeq+1,this.lamport+1n,this.actor,e)}syncClocks(t){if(!t.hasClocks())return this;const e=t.lamport>this.lamport?t.lamport+1n:this.lamport+1n,r=this.versionVector.max(t.versionVector),i=new _e(this.clientSeq,e,this.actor,r);return i.versionVector.set(this.actor,e),i}setClocks(t,e){const r=t>this.lamport?t+1n:this.lamport+1n,i=this.versionVector.max(e);return i.set(this.actor,r),_e.of(this.clientSeq,r,this.actor,i)}createTimeTicket(t){return Ge.of(this.lamport,t,this.actor)}setActor(t){return new _e(this.clientSeq,this.lamport,t,this.versionVector,this.serverSeq)}setLamport(t){return new _e(this.clientSeq,t,this.actor,this.versionVector,this.serverSeq)}setVersionVector(t){return new _e(this.clientSeq,this.lamport,this.actor,t,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const mE=new _e(0,0n,Dm,tT);class Ps{constructor({id:t,operations:e,presenceChange:r,message:i}){l(this,"id");l(this,"operations");l(this,"presenceChange");l(this,"message");this.id=t,this.operations=e||[],this.presenceChange=r,this.message=i}static create({id:t,operations:e,presenceChange:r,message:i}){return new Ps({id:t,operations:e,presenceChange:r,message:i})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(t){for(const e of this.operations)e.setActor(t);this.id=this.id.setActor(t)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(t,e,r){const i=[],a=[];for(const s of this.operations){const o=s.execute(t,r,this.id.getVersionVector());if(!o)continue;const{opInfos:u,reverseOp:c}=o;i.push(...u),c&&a.unshift(c)}return this.presenceChange&&(this.presenceChange.type===Nn.Put?e.set(this.id.getActorID(),Qe(this.presenceChange.presence)):e.delete(this.id.getActorID())),{opInfos:i,reverseOps:a}}toTestString(){return`${this.operations.map(t=>t.toTestString()).join(",")}`}toStruct(){return{changeID:gt.bytesToHex(gt.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(t=>gt.bytesToHex(gt.toOperation(t).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(t){const{changeID:e,operations:r,presenceChange:i,message:a}=t;return Ps.create({id:gt.bytesToChangeID(gt.hexToBytes(e)),operations:r==null?void 0:r.map(s=>gt.bytesToOperation(gt.hexToBytes(s))),presenceChange:i,message:a})}}class Hc{constructor(t,e,r,i,a,s){l(this,"documentKey");l(this,"checkpoint");l(this,"isRemoved");l(this,"changes");l(this,"snapshot");l(this,"versionVector");this.documentKey=t,this.checkpoint=e,this.isRemoved=r,this.changes=i,this.snapshot=s,this.versionVector=a}static create(t,e,r,i,a,s){return new Hc(t,e,r,i,a,s)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getVersionVector(){return this.versionVector}}class vs{constructor(t,e){l(this,"serverSeq");l(this,"clientSeq");this.serverSeq=t,this.clientSeq=e}static of(t,e){return new vs(t,e)}increaseClientSeq(t){return t===0?this:new vs(this.serverSeq,this.clientSeq+t)}forward(t){if(this.equals(t))return this;const e=this.serverSeq>t.serverSeq?this.serverSeq:t.serverSeq,r=Math.max(this.clientSeq,t.clientSeq);return vs.of(e,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(t){return this.clientSeq===t.clientSeq&&this.serverSeq==t.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const gE=new vs(0n,0);class En{constructor(t,e){l(this,"createdAt");l(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new En(t,e)}static fromStruct(t){return En.of(Ge.fromStruct(t.createdAt),t.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}hasSameCreatedAt(t){return this.createdAt.compare(t.createdAt)===0}split(t){return new En(this.createdAt,this.offset+t)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const yE=En.of(Us,0);class an{constructor(t,e){l(this,"id");l(this,"relativeOffset");this.id=t,this.relativeOffset=e}static of(t,e){return new an(t,e)}static fromStruct(t){const e=En.fromStruct(t.id);return an.of(e,t.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return En.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(t){return this.id.equals(t.id)?this.relativeOffset===t.relativeOffset:!1}}class ta extends HS{constructor(e,r,i){super(r);l(this,"id");l(this,"removedAt");l(this,"prev");l(this,"next");l(this,"insPrev");l(this,"insNext");this.id=e,this.removedAt=i}static create(e,r){return new ta(e,r)}static createComparator(){return(e,r)=>{const i=e.getCreatedAt().compare(r.getCreatedAt());return i!==0?i:e.getOffset()>r.getOffset()?1:e.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new ta(this.id.split(e),this.splitValue(e),this.removedAt)}canRemove(e,r,i){return r?!!(!this.removedAt||!i&&(e!=null&&e.after(this.removedAt))):!1}canStyle(e,r){return this.getCreatedAt().getLamport()<=r&&(!this.removedAt||e.after(this.removedAt))}setRemovedAt(e){this.removedAt=e}remove(e){if(!this.removedAt){this.removedAt=e;return}e.after(this.removedAt)&&(this.removedAt=e)}createPosRange(){return[an.of(this.id,0),an.of(this.id,this.getLength())]}getDataSize(){const e=this.value.getDataSize();return this.id&&(e.meta+=wn),this.removedAt&&(e.meta+=wn),e}deepcopy(){return new ta(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const r=this.value;return this.value=r.substring(0,e),r.substring(e,r.length)}toIDString(){return this.id.toIDString()}}class Ks{constructor(){l(this,"head");l(this,"treeByIndex");l(this,"treeByID");this.head=ta.create(yE),this.treeByIndex=new el,this.treeByID=new _S(ta.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Ks}edit(t,e,r,i){const a={data:0,meta:0},[s,o,u]=this.findNodeWithSplit(t[1],e),[c,h,g]=this.findNodeWithSplit(t[0],e);jt(a,o,h);const d=this.findBetween(g,u),[m,A]=this.deleteNodes(d,e,i),b=u?u.getID():s.getID();let x=an.of(b,0);if(r){const y=this.posToIndex(c.createPosRange()[1],!0),v=this.insertAfter(c,ta.create(En.of(e,0),r));jt(a,v.getDataSize()),m.length&&m[m.length-1].from===y?m[m.length-1].value=r:m.push({actor:e.getActorID(),from:y,to:y,value:r}),x=an.of(v.getID(),v.getContentLength())}const p=[];for(const[,y]of A)p.push({parent:this,child:y});return[x,p,a,m]}indexToPos(t){const[e,r]=this.treeByIndex.find(t),i=e;return an.of(i.getID(),r)}findIndexesFromRange(t){const[e,r]=t;return[this.posToIndex(e,!1),this.posToIndex(r,!0)]}posToIndex(t,e){const r=t.getAbsoluteID(),i=e?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);if(!i)throw new T(S.ErrInvalidArgument,`the node of the given id should be found: ${r.toTestString()}`);const a=this.treeByIndex.indexOf(i),s=i.isRemoved()?0:r.getOffset()-i.getID().getOffset();return a+s}findNode(t){return this.findFloorNode(t)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const t=[];for(const e of this)e.isRemoved()||t.push(e.getValue());return t.join("")}*[Symbol.iterator](){let t=this.head.getNext();for(;t;)yield t,t=t.getNext()}getHead(){return this.head}deepcopy(){const t=new Ks;let e=this.head.getNext(),r=t.head,i;for(;e;){if(i=t.insertAfter(r,e.deepcopy()),e.hasInsPrev()){const a=t.findNode(e.getInsPrevID());i.setInsPrev(a)}r=i,e=e.getNext()}return t}toTestString(){const t=[];let e=this.head;for(;e;)e.isRemoved()?t.push(`{${e.toTestString()}}`):t.push(`[${e.toTestString()}]`),e=e.getNext();return t.join("")}insertAfter(t,e){const r=t.getNext();return e.setPrev(t),r&&r.setPrev(e),this.treeByID.put(e.getID(),e),this.treeByIndex.insertAfter(t,e),e}findNodeWithSplit(t,e){const r=t.getAbsoluteID();let i=this.findFloorNodePreferToLeft(r);const a=r.getOffset()-i.getID().getOffset(),[,s]=this.splitNode(i,a);for(;i.hasNext()&&i.getNext().getCreatedAt().after(e);)i=i.getNext();return[i,s,i.getNext()]}findFloorNodePreferToLeft(t){let e=this.findFloorNode(t);if(!e)throw new T(S.ErrInvalidArgument,`the node of the given id should be found: ${t.toTestString()}`);if(t.getOffset()>0&&e.getID().getOffset()==t.getOffset()){if(!e.hasInsPrev())return e;e=e.getInsPrev()}return e}findFloorNode(t){const e=this.treeByID.floorEntry(t);if(e&&!(!e.key.equals(t)&&!e.key.hasSameCreatedAt(t)))return e.value}findBetween(t,e){const r=[];let i=t;for(;i&&i!==e;)r.push(i),i=i.getNext();return r}splitNode(t,e){const r={data:0,meta:0};if(e>t.getContentLength())throw new T(S.ErrInvalidArgument,"offset should be less than or equal to length");if(e===0)return[t,r];if(e===t.getContentLength())return[t.getNext(),r];const i=t.getDataSize(),a=t.split(e);this.treeByIndex.updateWeight(a),this.insertAfter(t,a);const s=t.getInsNext();return s&&s.setInsPrev(a),a.setInsPrev(t),jt(r,t.getDataSize(),a.getDataSize()),pa(r,i),[a,r]}deleteNodes(t,e,r){if(!t.length)return[[],new Map];const i=r===void 0||r.size()===0,a=[],s=[],[o,u]=this.findEdgesOfCandidates(t);s.push(o);for(const g of t){let d=!1;if(i)d=!0;else{const A=r==null?void 0:r.get(g.getCreatedAt().getActorID());A&&A>=g.getCreatedAt().getLamport()&&(d=!0)}let m=!1;if(g.getRemovedAt()){const A=r==null?void 0:r.get(g.getRemovedAt().getActorID());(i||A&&A>=g.getRemovedAt().getLamport())&&(m=!0)}g.canRemove(e,d,m)?a.push(g):s.push(g)}s.push(u);const c=this.makeChanges(s,e),h=new Map;for(const g of a)h.set(g.getID().toIDString(),g),g.remove(e);return this.deleteIndexNodes(s),[c,h]}findEdgesOfCandidates(t){return[t[0].getPrev(),t[t.length-1].getNext()]}makeChanges(t,e){const r=[];let i,a;for(let s=0;s<t.length-1;s++){const o=t[s],u=t[s+1];o.getNext()!=u&&([i]=this.findIndexesFromRange(o.getNext().createPosRange()),u?[,a]=this.findIndexesFromRange(u.getPrev().createPosRange()):a=this.treeByIndex.length,i<a&&r.push({actor:e.getActorID(),from:i,to:a}))}return r.reverse()}deleteIndexNodes(t){for(let e=0;e<t.length-1;e++){const r=t[e],i=t[e+1];r.getNext()!=i&&this.treeByIndex.deleteRange(r,i)}}purge(t){this.treeByIndex.delete(t),this.treeByID.remove(t.getID());const e=t.getPrev(),r=t.getNext(),i=t.getInsPrev(),a=t.getInsNext();e&&e.setNext(r),r&&r.setPrev(e),t.setPrev(void 0),t.setNext(void 0),i&&i.setInsNext(a),a&&a.setInsPrev(i),t.setInsPrev(void 0),t.setInsNext(void 0)}}const ip=n=>n<0?Math.ceil(n):Math.floor(n);var Dn=(n=>(n[n.Int=0]="Int",n[n.Long=1]="Long",n))(Dn||{});class oe extends wl{constructor(e,r,i){super(i);l(this,"valueType");l(this,"value");switch(this.valueType=e,e){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=F.fromNumber(r).toInt():this.value=ip(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=F.fromNumber(r):this.value=r;break;default:throw new T(S.ErrUnimplemented,`unimplemented type: ${e}`)}}static create(e,r,i){return new oe(e,r,i)}static valueFromBytes(e,r){switch(e){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return F.fromBytesLE(Array.from(r));default:throw new T(S.ErrUnimplemented,`unimplemented type: ${e}`)}}getDataSize(){return{data:this.valueType===0?4:8,meta:this.getMetaUsage()}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=oe.create(this.valueType,this.value,this.getCreatedAt());return e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof F?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!oe.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new T(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function r(i){if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`)}return r(this),r(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===lt.Long?this.value=this.value+e.getValue().toInt():this.value=F.fromNumber(this.value+ip(e.getValue())).toInt(),this}}class Vs extends on{constructor(e,r,i){super(e,i);l(this,"value");this.value=r}static create(e,r,i){return new Vs(e,r,i)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof oe))throw new T(S.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const i=r,a=this.value.deepcopy();return i.increase(a),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:a.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),i=e.getType()===lt.Long?e.getValue().multiply(-1):e.getValue()*-1;return Vs.create(this.getParentCreatedAt(),St.of(i,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class pi extends on{constructor(e,r,i,a,s,o){super(e,o);l(this,"fromPos");l(this,"toPos");l(this,"attributes");l(this,"attributesToRemove");this.fromPos=r,this.toPos=i,this.attributes=a,this.attributesToRemove=s}static create(e,r,i,a,s){return new pi(e,r,i,a,[],s)}static createTreeRemoveStyleOperation(e,r,i,a,s){return new pi(e,r,i,new Map,a,s)}execute(e,r,i){const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Ee))throw new T(S.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const s=a;let o,u,c={data:0,meta:0};if(this.attributes.size){const h={};[...this.attributes].forEach(([g,d])=>h[g]=d),[u,o,c]=s.style([this.fromPos,this.toPos],h,this.getExecutedAt(),i)}else{const h=this.attributesToRemove;[u,o,c]=s.removeStyle([this.fromPos,this.toPos],h,this.getExecutedAt(),i)}e.acc(c);for(const h of u)e.registerGCPair(h);return{opInfos:o.map(({from:h,to:g,value:d,fromPath:m,toPath:A})=>({type:"tree-style",from:h,to:g,value:this.attributes.size?{attributes:d}:{attributesToRemove:d},fromPath:m,toPath:A,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${r},${i},${Object.entries(this.attributes||{}).map(([a,s])=>`${a}:"${s}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}class Ai extends on{constructor(e,r,i,a){super(e,a);l(this,"createdAt");l(this,"value");this.createdAt=r,this.value=i}static create(e,r,i,a){return new Ai(e,r,i,a)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Qt))throw new T(S.ErrInvalidArgument,"fail to execute, only array can execute set");const i=r.getByID(this.createdAt).deepcopy(),a=this.toReverseOperation(this.value,i),s=this.value.deepcopy();return r.insertAfter(this.createdAt,s,this.getExecutedAt()),r.delete(this.createdAt,this.getExecutedAt()),e.registerElement(s),{opInfos:[{type:"array-set",path:e.createPath(this.getParentCreatedAt())}],reverseOp:a}}toReverseOperation(e,r){return Ai.create(this.getParentCreatedAt(),e.getCreatedAt(),r)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ARRAY_SET.${this.createdAt.toTestString()}=${this.value.toSortedJSON()}`}getCreatedAt(){return this.createdAt}getValue(){return this.value}setCreatedAt(e){this.createdAt=e}}function pE(n){const t=new Ms,e=t.data;for(const[r,i]of Object.entries(n))e[r]=JSON.stringify(i);return t}function vE(n){if(n.type===Nn.Put)return new tl({type:Ca.PUT,presence:pE(n.presence)});if(n.type===Nn.Clear)return new tl({type:Ca.CLEAR});throw new T(S.ErrUnimplemented,"unimplemented type")}function SE(n){return new KS({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function eT(n){return new qc({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:jc(n.getActorID()),versionVector:Cm(n.getVersionVector())})}function U(n){if(n)return new M({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:jc(n.getActorID())})}function Cm(n){if(!n)return;const t=new Pc;for(const[e,r]of n){const i=nN(jc(e));t.vector[i]=BigInt(r.toString())}return t}function nT(n){switch(n){case lt.Null:return K.NULL;case lt.Boolean:return K.BOOLEAN;case lt.Integer:return K.INTEGER;case lt.Long:return K.LONG;case lt.Double:return K.DOUBLE;case lt.String:return K.STRING;case lt.Bytes:return K.BYTES;case lt.Date:return K.DATE;default:throw new T(S.ErrInvalidType,`unsupported type: ${n}`)}}function rT(n){switch(n){case Dn.Int:return K.INTEGER_CNT;case Dn.Long:return K.LONG_CNT;default:throw new T(S.ErrInvalidType,`unsupported type: ${n}`)}}function jl(n){if(n instanceof Zt)return new Oe({type:K.JSON_OBJECT,createdAt:U(n.getCreatedAt()),value:yT(n)});if(n instanceof Qt)return new Oe({type:K.JSON_ARRAY,createdAt:U(n.getCreatedAt()),value:_E(n)});if(n instanceof Ae)return new Oe({type:K.TEXT,createdAt:U(n.getCreatedAt())});if(n instanceof St)return new Oe({type:nT(n.getType()),createdAt:U(n.getCreatedAt()),value:n.toBytes()});if(n instanceof oe)return new Oe({type:rT(n.getType()),createdAt:U(n.getCreatedAt()),value:n.toBytes()});if(n instanceof Ee)return new Oe({type:K.TREE,createdAt:U(n.getCreatedAt()),value:tN(n)});throw new T(S.ErrUnimplemented,"unimplemented element")}function TE(n){return new _o({createdAt:U(n.getCreatedAt()),offset:n.getOffset()})}function Gl(n){return new Ia({createdAt:U(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function Yl(n){return new Oa({parentId:Bo(n.getParentID()),leftSiblingId:Bo(n.getLeftSiblingID())})}function Bo(n){return new _i({createdAt:U(n.getCreatedAt()),offset:n.getOffset()})}function iT(n){const t=new xm;if(n instanceof Ba){const e=n,r=new Xu;r.parentCreatedAt=U(e.getParentCreatedAt()),r.key=e.getKey(),r.value=jl(e.getValue()),r.executedAt=U(e.getExecutedAt()),t.body.case="set",t.body.value=r}else if(n instanceof oa){const e=n,r=new Fu;r.parentCreatedAt=U(e.getParentCreatedAt()),r.prevCreatedAt=U(e.getPrevCreatedAt()),r.value=jl(e.getValue()),r.executedAt=U(e.getExecutedAt()),t.body.case="add",t.body.value=r}else if(n instanceof en){const e=n,r=new Zu;r.parentCreatedAt=U(e.getParentCreatedAt()),r.prevCreatedAt=U(e.getPrevCreatedAt()),r.createdAt=U(e.getCreatedAt()),r.executedAt=U(e.getExecutedAt()),t.body.case="move",t.body.value=r}else if(n instanceof xn){const e=n,r=new Qu;r.parentCreatedAt=U(e.getParentCreatedAt()),r.createdAt=U(e.getCreatedAt()),r.executedAt=U(e.getExecutedAt()),t.body.case="remove",t.body.value=r}else if(n instanceof Al){const e=n,r=new _u;r.parentCreatedAt=U(e.getParentCreatedAt()),r.from=Gl(e.getFromPos()),r.to=Gl(e.getToPos()),r.content=e.getContent();const i=r.attributes;for(const[a,s]of e.getAttributes())i[a]=s;r.executedAt=U(e.getExecutedAt()),t.body.case="edit",t.body.value=r}else if(n instanceof El){const e=n,r=new Wu;r.parentCreatedAt=U(e.getParentCreatedAt()),r.from=Gl(e.getFromPos()),r.to=Gl(e.getToPos());const i=r.attributes;for(const[a,s]of e.getAttributes())i[a]=s;r.executedAt=U(e.getExecutedAt()),t.body.case="style",t.body.value=r}else if(n instanceof Vs){const e=n,r=new tc;r.parentCreatedAt=U(e.getParentCreatedAt()),r.value=jl(e.getValue()),r.executedAt=U(e.getExecutedAt()),t.body.case="increase",t.body.value=r}else if(n instanceof Nl){const e=n,r=new ec;r.parentCreatedAt=U(e.getParentCreatedAt()),r.from=Yl(e.getFromPos()),r.to=Yl(e.getToPos()),r.contents=DE(e.getContents()),r.splitLevel=e.getSplitLevel(),r.executedAt=U(e.getExecutedAt()),t.body.case="treeEdit",t.body.value=r}else if(n instanceof pi){const e=n,r=new nc;r.parentCreatedAt=U(e.getParentCreatedAt()),r.from=Yl(e.getFromPos()),r.to=Yl(e.getToPos());const i=e.getAttributesToRemove();if(i.length>0)r.attributesToRemove=i;else{const a=r.attributes;for(const[s,o]of e.getAttributes())a[s]=o}r.executedAt=U(e.getExecutedAt()),t.body.case="treeStyle",t.body.value=r}else if(n instanceof Ai){const e=n,r=new rc;r.parentCreatedAt=U(e.getParentCreatedAt()),r.createdAt=U(e.getCreatedAt()),r.value=jl(e.getValue()),r.executedAt=U(e.getExecutedAt()),t.body.case="arraySet",t.body.value=r}else throw new T(S.ErrUnimplemented,"unimplemented operation");return t}function bE(n){const t=[];for(const e of n)t.push(iT(e));return t}function wE(n){const t=new qS({id:eT(n.getID()),message:n.getMessage()});return n.hasOperations()&&(t.operations=bE(n.getOperations())),n.hasPresenceChange()&&(t.presenceChange=vE(n.getPresenceChange())),t}function AE(n){const t=[];for(const e of n)t.push(wE(e));return t}function EE(n){const t=[];for(const e of n)t.push(new PS({key:e.getStrKey(),element:Bm(e.getValue())}));return t}function NE(n){const t=[];for(const e of n)t.push(new cc({element:Bm(e.getValue())}));return t}function xE(n){const t=[];for(const e of n){const r=new fc;r.id=TE(e.getID()),r.value=e.getValue().getContent(),r.removedAt=U(e.getRemovedAt());const i=r.attributes,a=e.getValue().getAttrs();for(const s of a){const o=new zs;o.value=s.getValue(),o.updatedAt=U(s.getUpdatedAt()),i[s.getKey()]=o}t.push(r)}return t}function DE(n){const t=[];if(!n||!n.length)return t;for(const e of n)t.push(new hc({content:Im(e)}));return t}function kE(n){const t={};for(const e of n)t[e.getKey()]=new zs({value:e.getValue(),updatedAt:U(e.getUpdatedAt()),isRemoved:e.isRemoved()});return t}function Im(n){if(!n)return[];const t=[];return Vc(n,(e,r)=>{const i=new Wo({id:Bo(e.id),type:e.type,removedAt:U(e.removedAt),depth:r});e.isText&&(i.value=e.value),e.insPrevID&&(i.insPrevId=Bo(e.insPrevID)),e.insNextID&&(i.insNextId=Bo(e.insNextID)),e.attrs&&(i.attributes=kE(e.attrs)),t.push(i)}),t}function OE(n){const t=new ue;return t.body.case="jsonObject",t.body.value=new ic({nodes:EE(n.getRHT()),createdAt:U(n.getCreatedAt()),movedAt:U(n.getMovedAt()),removedAt:U(n.getRemovedAt())}),t}function aT(n){const t=new ue;return t.body.case="jsonArray",t.body.value=new ac({nodes:NE(n.getElements()),createdAt:U(n.getCreatedAt()),movedAt:U(n.getMovedAt()),removedAt:U(n.getRemovedAt())}),t}function CE(n){const t=new ue;return t.body.case="primitive",t.body.value=new sc({type:nT(n.getType()),value:n.toBytes(),createdAt:U(n.getCreatedAt()),movedAt:U(n.getMovedAt()),removedAt:U(n.getRemovedAt())}),t}function IE(n){const t=new ue;return t.body.case="text",t.body.value=new oc({nodes:xE(n.getRGATreeSplit()),createdAt:U(n.getCreatedAt()),movedAt:U(n.getMovedAt()),removedAt:U(n.getRemovedAt())}),t}function BE(n){const t=new ue;return t.body.case="counter",t.body.value=new lc({type:rT(n.getType()),value:n.toBytes(),createdAt:U(n.getCreatedAt()),movedAt:U(n.getMovedAt()),removedAt:U(n.getRemovedAt())}),t}function sT(n){const t=new ue;return t.body.case="tree",t.body.value=new uc({nodes:Im(n.getRoot()),createdAt:U(n.getCreatedAt()),movedAt:U(n.getMovedAt()),removedAt:U(n.getRemovedAt())}),t}function Bm(n){if(n instanceof Zt)return OE(n);if(n instanceof Qt)return aT(n);if(n instanceof St)return CE(n);if(n instanceof Ae)return IE(n);if(n instanceof oe)return BE(n);if(n instanceof Ee)return sT(n);throw new T(S.ErrUnimplemented,"unimplemented element")}function RE(n){return new Ni({documentKey:n.getDocumentKey(),checkpoint:SE(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:AE(n.getChanges()),snapshot:n.getSnapshot(),versionVector:Cm(n.getVersionVector())})}function zE(n){var t;return{id:n.id,label:n.label,description:n.description,snapshot:n.snapshot,createdAt:((t=n.createdAt)==null?void 0:t.toDate())||new Date}}function fo(n){if(!(n instanceof ot))return{};const t=n.findDetails(Q1);for(const e of t)return e.metadata;return{}}function Ya(n){return fo(n).code??""}function zf(n,t){return n instanceof ot&&Ya(n)===t}function oT(n){return _e.of(n.clientSeq,BigInt(n.lamport),Lm(n.actorId),Rm(n.versionVector),BigInt(n.serverSeq))}function Rm(n){if(!n)return;const t=new ps;return Object.entries(n.vector).forEach(([e,r])=>{const i=$c(eN(e));t.set(i,BigInt(r.toString()))}),t}function L(n){if(n)return Ge.of(BigInt(n.lamport),n.delimiter,Lm(n.actorId))}function zm(n){const t={};return Object.entries(n.data).forEach(([e,r])=>{t[e]=JSON.parse(r)}),t}function ME(n){const t=n.type;if(t===Ca.PUT){const e=zm(n.presence);return{type:Nn.Put,presence:e}}if(t===Ca.CLEAR)return{type:Nn.Clear};throw new T(S.ErrInvalidType,`unsupported type: ${t}`)}function UE(n){const t=new Map;return Object.entries(n).forEach(([e,r])=>{t.set(e,zm(r))}),t}function lT(n){switch(n){case K.NULL:return lt.Null;case K.BOOLEAN:return lt.Boolean;case K.INTEGER:return lt.Integer;case K.LONG:return lt.Long;case K.DOUBLE:return lt.Double;case K.STRING:return lt.String;case K.BYTES:return lt.Bytes;case K.DATE:return lt.Date}throw new T(S.ErrUnimplemented,`unimplemented value type: ${n}`)}function Sc(n){switch(n){case K.INTEGER_CNT:return Dn.Int;case K.LONG_CNT:return Dn.Long}throw new T(S.ErrUnimplemented,`unimplemented value type: ${n}`)}function Xl(n){switch(n.type){case K.JSON_OBJECT:return n.value?gT(n.value):Zt.create(L(n.createdAt));case K.JSON_ARRAY:return n.value?QE(n.value):Qt.create(L(n.createdAt));case K.TEXT:return Ae.create(Ks.create(),L(n.createdAt));case K.TREE:return WE(n.value);case K.NULL:case K.BOOLEAN:case K.INTEGER:case K.LONG:case K.DOUBLE:case K.STRING:case K.BYTES:case K.DATE:return St.of(St.valueFromBytes(lT(n.type),n.value),L(n.createdAt));case K.INTEGER_CNT:case K.LONG_CNT:return oe.create(Sc(n.type),oe.valueFromBytes(Sc(n.type),n.value),L(n.createdAt))}}function Fl(n){return an.of(En.of(L(n.createdAt),n.offset),n.relativeOffset)}function uT(n){return En.of(L(n.createdAt),n.offset)}function LE(n){const t=rl.create(n.value);Object.entries(n.attributes).forEach(([r,i])=>{t.setAttr(r,i.value,L(i.updatedAt))});const e=ta.create(uT(n.id),t);return e.setRemovedAt(L(n.removedAt)),e}function Ka(n){return nn.of(Ro(n.parentId),Ro(n.leftSiblingId))}function Ro(n){return Yt.of(L(n.createdAt),n.offset)}function JE(n){if(!n.length)return;const t=[];return n.forEach(e=>{const r=Mm(e.content);t.push(r)}),t}function Mm(n){if(n.length===0)return;const t=[];for(const i of n)t.push(PE(i));const e=t[t.length-1],r=new Map;r.set(n[t.length-1].depth,t[t.length-1]);for(let i=t.length-2;i>=0;i--)r.get(n[i].depth-1).prepend(t[i]),r.set(n[i].depth,t[i]);return e.updateDescendantsSize(),e.updateDescendantsSize(!0),Ee.create(e,Us).getRoot()}function qE(n){const t=wi.create();for(const[e,r]of Object.entries(n))t.setInternal(e,r.value,L(r.updatedAt),r.isRemoved);return t}function PE(n){const t=Ro(n.id),e=pe.create(t,n.type),r=Object.entries(n.attributes);return e.isText?e.value=n.value:r.length&&(e.attrs=qE(n.attributes)),n.insPrevId&&(e.insPrevID=Ro(n.insPrevId)),n.insNextId&&(e.insNextID=Ro(n.insNextId)),e.removedAt=L(n.removedAt),e}function cT(n){if(n.body.case==="set"){const t=n.body.value;return Ba.create(t.key,Xl(t.value),L(t.parentCreatedAt),L(t.executedAt))}else if(n.body.case==="add"){const t=n.body.value;return oa.create(L(t.parentCreatedAt),L(t.prevCreatedAt),Xl(t.value),L(t.executedAt))}else if(n.body.case==="move"){const t=n.body.value;return en.create(L(t.parentCreatedAt),L(t.prevCreatedAt),L(t.createdAt),L(t.executedAt))}else if(n.body.case==="remove"){const t=n.body.value;return xn.create(L(t.parentCreatedAt),L(t.createdAt),L(t.executedAt))}else if(n.body.case==="edit"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([r,i])=>{e.set(r,i)}),Al.create(L(t.parentCreatedAt),Fl(t.from),Fl(t.to),t.content,e,L(t.executedAt))}else if(n.body.case==="style"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([r,i])=>{e.set(r,i)}),El.create(L(t.parentCreatedAt),Fl(t.from),Fl(t.to),e,L(t.executedAt))}else if(n.body.case==="increase"){const t=n.body.value;return Vs.create(L(t.parentCreatedAt),Xl(t.value),L(t.executedAt))}else if(n.body.case==="treeEdit"){const t=n.body.value;return Nl.create(L(t.parentCreatedAt),Ka(t.from),Ka(t.to),JE(t.contents),t.splitLevel,L(t.executedAt))}else if(n.body.case==="treeStyle"){const t=n.body.value,e=new Map,r=t.attributesToRemove;return(r==null?void 0:r.length)>0?pi.createTreeRemoveStyleOperation(L(t.parentCreatedAt),Ka(t.from),Ka(t.to),r,L(t.executedAt)):(Object.entries(t.attributes).forEach(([i,a])=>{e.set(i,a)}),pi.create(L(t.parentCreatedAt),Ka(t.from),Ka(t.to),e,L(t.executedAt)))}else if(n.body.case==="arraySet"){const t=n.body.value;return Ai.create(L(t.parentCreatedAt),L(t.createdAt),Xl(t.value),L(t.executedAt))}else throw new T(S.ErrUnimplemented,"unimplemented operation")}function KE(n){const t=[];for(const e of n){const r=cT(e);r&&t.push(r)}return t}function fT(n){const t=[];for(const e of n)t.push(Ps.create({id:oT(e.id),operations:KE(e.operations),presenceChange:e.presenceChange?ME(e.presenceChange):void 0,message:e.message}));return t}function VE(n){return vs.of(BigInt(n.serverSeq),n.clientSeq)}function HE(n){return Hc.create(n.documentKey,VE(n.checkpoint),n.isRemoved,fT(n.changes),Rm(n.versionVector),n.snapshot)}function hT(n){const t=new Ls;for(const r of n.nodes){const i=Um(r.element);t.set(r.key,i,i.getPositionedAt())}const e=new Zt(L(n.createdAt),t);return e.setMovedAt(L(n.movedAt)),e.setRemovedAt(L(n.removedAt)),e}function dT(n){const t=new nl;for(const r of n.nodes)t.insert(Um(r.element));const e=new Qt(L(n.createdAt),t);return e.setMovedAt(L(n.movedAt)),e.setRemovedAt(L(n.removedAt)),e}function $E(n){const t=St.of(St.valueFromBytes(lT(n.type),n.value),L(n.createdAt));return t.setMovedAt(L(n.movedAt)),t.setRemovedAt(L(n.removedAt)),t}function jE(n){const t=new Ks;let e=t.getHead();for(const i of n.nodes){const a=t.insertAfter(e,LE(i));i.insPrevId&&a.setInsPrev(t.findNode(uT(i.insPrevId))),e=a}const r=new Ae(t,L(n.createdAt));return r.setMovedAt(L(n.movedAt)),r.setRemovedAt(L(n.removedAt)),r}function GE(n){const t=oe.create(Sc(n.type),oe.valueFromBytes(Sc(n.type),n.value),L(n.createdAt));return t.setMovedAt(L(n.movedAt)),t.setRemovedAt(L(n.removedAt)),t}function mT(n){const t=Mm(n.nodes);return Ee.create(t,L(n.createdAt))}function Um(n){if(n.body.case==="jsonObject")return hT(n.body.value);if(n.body.case==="jsonArray")return dT(n.body.value);if(n.body.case==="primitive")return $E(n.body.value);if(n.body.case==="text")return jE(n.body.value);if(n.body.case==="counter")return GE(n.body.value);if(n.body.case==="tree")return mT(n.body.value);throw new T(S.ErrUnimplemented,"unimplemented element")}function YE(n){return n.map(t=>({path:t.path,type:t.type}))}function XE(n){if(!n)return{root:Zt.create(Us),presences:new Map};const t=Rh.fromBinary(n);return{root:Um(t.root),presences:UE(t.presences)}}function FE(n){const t=Cm(n);return $c(t.toBinary())}function ZE(n){const t=Jm(n),e=Pc.fromBinary(t);return Rm(e)}function gT(n){if(!n)throw new T(S.ErrInvalidArgument,"bytes is empty");const t=ue.fromBinary(n);return hT(t.body.value)}function yT(n){return Bm(n).toBinary()}function QE(n){if(!n)throw new T(S.ErrInvalidArgument,"bytes is empty");const t=ue.fromBinary(n);return dT(t.body.value)}function _E(n){return aT(n).toBinary()}function WE(n){if(!n)throw new T(S.ErrInvalidArgument,"bytes is empty");const t=ue.fromBinary(n);return mT(t.body.value)}function tN(n){return sT(n).toBinary()}function $c(n){return n?Array.from(n).map(t=>t.toString(16).padStart(2,"0")).join(""):""}function Lm(n){return $c(n)}function Jm(n){return new Uint8Array(n.match(/.{1,2}/g).map(t=>parseInt(t,16)))}function eN(n){if(typeof window<"u"&&typeof window.atob=="function"){const t=window.atob(n),e=t.length,r=new Uint8Array(e);for(let i=0;i<e;i++)r[i]=t.charCodeAt(i);return r}else if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u"){const t=globalThis.Buffer;return new Uint8Array(t.from(n,"base64"))}else throw new Error("No base64 decoder available")}function jc(n){return Jm(n)}function nN(n){if(typeof window<"u"&&typeof window.btoa=="function"){let t="";for(let e=0;e<n.byteLength;e++)t+=String.fromCharCode(n[e]);return window.btoa(t)}else{if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u")return globalThis.Buffer.from(n).toString("base64");throw new Error("No base64 encoder available")}}function rN(n){const t=qc.fromBinary(n);return oT(t)}function iN(n){const t=xm.fromBinary(n);return cT(t)}const gt={fromPresence:zm,toChangePack:RE,fromChangePack:HE,fromChanges:fT,toTreeNodes:Im,fromTreeNodes:Mm,objectToBytes:yT,bytesToObject:gT,bytesToSnapshot:XE,bytesToHex:$c,hexToBytes:Jm,toHexString:Lm,toUint8Array:jc,toOperation:iT,toChangeID:eT,PbChangeID:qc,bytesToChangeID:rN,bytesToOperation:iN,versionVectorToHex:FE,hexToVersionVector:ZE,fromSchemaRules:YE,toRevisionSummary:zE};var ae=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(ae||{});let ma=3;function aN(n){ma=n}const B={trivial:(...n)=>{ma>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{ma>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{ma>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{ma>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{ma>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>ma<=n};function pT(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const t=Math.random()*16|0;return(n==="x"?t:t&3|8).toString(16)})}const Mf=()=>{};class sN{constructor(t){l(this,"finalized",!1);l(this,"observers",[]);l(this,"finalError");try{t(this)}catch(e){this.error(e)}}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let i;if(!t)throw new T(S.ErrInvalidArgument,"missing observer");if(this.finalized)throw new T(S.ErrRefused,"observable is finalized due to previous error");typeof t=="object"?i=t:i={next:t,error:e,complete:r},i.next===void 0&&(i.next=Mf),i.error===void 0&&(i.error=Mf),i.complete===void 0&&(i.complete=Mf);const a=pT(),s=this.unsubscribeOne.bind(this,a);if(this.observers.push({subscriptionID:a,observer:i}),this.finalized)try{this.finalError?i.error(this.finalError):i.complete()}catch(o){B.warn(o)}return s}unsubscribeOne(t){var e;this.observers=(e=this.observers)==null?void 0:e.filter(r=>r.subscriptionID!==t)}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t].observer)}catch(r){B.error(r)}}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.observers=void 0)}}function vT(n){const t=new sN(n);return{subscribe:t.subscribe.bind(t),getProxy:()=>t}}class zo{constructor(t,e,r,i){l(this,"prevID");l(this,"nextID");l(this,"delimiter");l(this,"message");l(this,"root");l(this,"operations");l(this,"presenceChange");l(this,"previousPresence");l(this,"reversePresenceKeys");this.prevID=t,this.nextID=t.next(),this.delimiter=VS,this.root=e,this.operations=[],this.previousPresence=Qe(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=i}static create(t,e,r,i){return new zo(t,e,r,i)}push(t){this.operations.push(t)}registerElement(t,e){this.root.registerElement(t,e)}registerRemovedElement(t){this.root.registerRemovedElement(t)}registerGCPair(t){this.root.registerGCPair(t)}getNextID(){return this.isPresenceOnlyChange()?this.prevID.next(!0).setLamport(this.prevID.getLamport()).setVersionVector(this.prevID.getVersionVector()):this.nextID}toChange(){const t=this.isPresenceOnlyChange()?this.prevID.next(!0):this.nextID;return Ps.create({id:t,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}isPresenceOnlyChange(){return this.operations.length===0}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(t){this.presenceChange=t}setReversePresence(t,e){for(const r of Object.keys(t))e!=null&&e.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const t={};for(const e of this.reversePresenceKeys)t[e]=this.previousPresence[e];return t}issueTimeTicket(){return this.delimiter+=1,this.nextID.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.nextID.createTimeTicket(this.delimiter)}acc(t){this.root.acc(t)}}function ST(n,t){const e=new il(n);return new Proxy(t,e.getHandlers())}class il{constructor(t){l(this,"context");l(this,"handlers");this.context=t,this.handlers={set:(e,r,i)=>(B.isEnabled(ae.Trivial)&&B.trivial(`obj[${r}]=${JSON.stringify(i)}`),il.setInternal(t,e,r,i),!0),get:(e,r)=>(B.isEnabled(ae.Trivial)&&B.trivial(`obj[${r}]`),r==="getID"?()=>e.getCreatedAt():r==="toJSON"||r==="toString"?()=>e.toJSON():r==="toJS"?()=>e.toJS():r==="toJSForTest"?()=>e.toJSForTest():ga(t,e.get(r))),ownKeys:e=>e.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(e,r)=>(B.isEnabled(ae.Trivial)&&B.trivial(`obj[${r}]`),il.deleteInternal(t,e,r),!0)}}static setInternal(t,e,r,i){if(r.includes("."))throw new T(S.ErrInvalidObjectKey,"key must not contain the '.'.");const a=t.issueTimeTicket(),s=Mo(t,i,a),o=e.set(r,s,a);t.registerElement(s,e),o&&t.registerRemovedElement(o),t.push(Ba.create(r,s.deepcopy(),e.getCreatedAt(),a))}static buildObjectMembers(t,e){const r={};for(const[i,a]of Object.entries(e)){if(i.includes("."))throw new T(S.ErrInvalidObjectKey,"key must not contain the '.'.");const s=t.issueTimeTicket(),o=Mo(t,a,s);r[i]=o}return r}static deleteInternal(t,e,r){const i=t.issueTimeTicket(),a=e.deleteByKey(r,i);a&&(t.push(xn.create(e.getCreatedAt(),a.getCreatedAt(),i)),t.registerRemovedElement(a))}getHandlers(){return this.handlers}}function oN(n,t){const e=new nt(n,t);return new Proxy(t,e.getHandlers())}function ap(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function lN(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class nt{constructor(t,e){l(this,"context");l(this,"handlers");l(this,"array");this.context=t,this.array=e,this.handlers={get:(r,i,a)=>i==="getID"?()=>r.getCreatedAt():i==="getElementByID"?s=>{const o=r.getByID(s);if(!(!o||o.isRemoved()))return Ze(t,o)}:i==="getElementByIndex"?s=>{const o=r.get(s);return Ze(t,o)}:i==="getLast"?()=>Ze(t,r.getLast()):i==="delete"?s=>{const o=nt.deleteInternalByIndex(t,r,s);return Ze(t,o)}:i==="deleteByID"?s=>{const o=nt.deleteInternalByID(t,r,s);return Ze(t,o)}:i==="insertAfter"?(s,o)=>{const u=nt.insertAfterInternal(t,r,s,o);return Ze(t,u)}:i==="insertIntegerAfter"?(s,o)=>{const u=nt.insertIntegerAfterInternal(t,r,s,o);return Ze(t,u)}:i==="insertBefore"?(s,o)=>{const u=nt.insertBeforeInternal(t,r,s,o);return Ze(t,u)}:i==="setValue"?(s,o)=>{const u=nt.setValueInternal(t,r,s,o);return Ze(t,u)}:i==="moveBefore"?(s,o)=>{nt.moveBeforeInternal(t,r,s,o)}:i==="moveAfter"?(s,o)=>{nt.moveAfterInternal(t,r,s,o)}:i==="moveAfterByIndex"?(s,o)=>{nt.moveAfterByIndexInternal(t,r,s,o)}:i==="moveFront"?s=>{nt.moveFrontInternal(t,r,s)}:i==="moveLast"?s=>{nt.moveLastInternal(t,r,s)}:ap(i)?ga(t,r.get(Number(i))):i==="push"?s=>nt.pushInternal(t,r,s):i==="splice"?(s,o,...u)=>nt.splice(t,r,s,o,...u):i==="length"?r.length:typeof i=="symbol"&&i===Symbol.iterator?nt.iteratorInternal.bind(this,t,r):i==="includes"?(s,o)=>nt.includes(t,r,s,o):i==="indexOf"?(s,o)=>nt.indexOf(t,r,s,o):i==="lastIndexOf"?(s,o)=>nt.lastIndexOf(t,r,s,o):i==="toJSForTest"?()=>r.toJSForTest():i==="toTestString"?()=>nt.toTestString(r):typeof i=="string"&&lN(i)?(...s)=>{const o=Array.from(r).map(u=>ga(t,u));return Array.prototype[i].apply(o,s)}:Reflect.get(r,i,a),set:(r,i,a)=>{if(ap(i)){const s=Number(i);return nt.setValueInternal(t,r,s,a),!0}return Reflect.set(r,i,a)},deleteProperty:(r,i)=>(B.isEnabled(ae.Trivial)&&B.trivial(`array[${i}]`),nt.deleteInternalByIndex(t,r,Number.parseInt(i)),!0)}}static*iteratorInternal(t,e){for(const r of e)yield Ze(t,r)}static buildArrayElements(t,e){const r=[];for(const i of e){const a=t.issueTimeTicket(),s=Mo(t,i,a);r.push(s)}return r}static pushInternal(t,e,r){return nt.insertAfterInternal(t,e,e.getLastCreatedAt(),r),e.length}static moveBeforeInternal(t,e,r,i){const a=t.issueTimeTicket(),s=e.getPrevCreatedAt(r);e.moveAfter(s,i,a),t.push(en.create(e.getCreatedAt(),s,i,a))}static moveAfterInternal(t,e,r,i){const a=t.issueTimeTicket();t.push(en.create(e.getCreatedAt(),r,i,a)),e.moveAfter(r,i,a)}static moveAfterByIndexInternal(t,e,r,i){const a=e.get(r);if(!a)throw new T(S.ErrInvalidArgument,`index out of bounds: ${r}`);const s=e.get(i);if(!s)throw new T(S.ErrInvalidArgument,`index out of bounds: ${i}`);nt.moveAfterInternal(t,e,a.getCreatedAt(),s.getCreatedAt())}static moveFrontInternal(t,e,r){const i=t.issueTimeTicket(),a=e.getHead();e.moveAfter(a.getCreatedAt(),r,i),t.push(en.create(e.getCreatedAt(),a.getCreatedAt(),r,i))}static moveLastInternal(t,e,r){const i=t.issueTimeTicket(),a=e.getLastCreatedAt();e.moveAfter(a,r,i),t.push(en.create(e.getCreatedAt(),a,r,i))}static insertAfterInternal(t,e,r,i){const a=t.issueTimeTicket(),s=Mo(t,i,a);return e.insertAfter(r,s),t.registerElement(s,e),t.push(oa.create(e.getCreatedAt(),r,s.deepcopy(),a)),s}static insertIntegerAfterInternal(t,e,r,i){const a=e.get(r);if(!a)throw new T(S.ErrInvalidArgument,`index out of bounds: ${r}`);return nt.insertAfterInternal(t,e,a.getCreatedAt(),i),e}static insertBeforeInternal(t,e,r,i){return nt.insertAfterInternal(t,e,e.getPrevCreatedAt(r),i)}static setValueInternal(t,e,r,i){const a=e.get(r);if(!a)throw new T(S.ErrInvalidArgument,`index out of bounds: ${r}`);return nt.setByIndexInternal(t,e,a.getCreatedAt(),i),e}static setByIndexInternal(t,e,r,i){const a=t.issueTimeTicket(),s=Mo(t,i,a),o=s.deepcopy();return t.push(Ai.create(e.getCreatedAt(),r,o,a)),e.set(r,s,a),t.registerElement(s,e),s}static deleteInternalByIndex(t,e,r){const i=t.issueTimeTicket(),a=e.deleteByIndex(r,i);if(a)return t.push(xn.create(e.getCreatedAt(),a.getCreatedAt(),i)),t.registerRemovedElement(a),a}static deleteInternalByID(t,e,r){const i=t.issueTimeTicket(),a=e.delete(r,i);return t.push(xn.create(e.getCreatedAt(),a.getCreatedAt(),i)),t.registerRemovedElement(a),a}static splice(t,e,r,i,...a){const s=e.length,o=r>=0?Math.min(r,s):Math.max(s+r,0),u=i===void 0?s:i<0?o:Math.min(o+i,s),c=[];for(let h=o;h<u;h++){const g=nt.deleteInternalByIndex(t,e,o);if(g){const d=g.deepcopy();d.setRemovedAt(),c.push(ga(t,d))}}if(a){let h=o===0?e.getHead().getID():e.get(o-1).getID();for(const g of a)h=nt.insertAfterInternal(t,e,h,g).getID()}return c}static includes(t,e,r,i){var o;const a=e.length,s=i===void 0?0:i<0?Math.max(i+a,0):i;if(s>=a)return!1;if(St.isSupport(r))return Array.from(e).map(c=>ga(t,c)).includes(r,s);for(let u=s;u<a;u++)if(((o=e.get(u))==null?void 0:o.getID())===r.getID())return!0;return!1}static indexOf(t,e,r,i){var o;const a=e.length,s=i===void 0?0:i<0?Math.max(i+a,0):i;if(s>=a)return-1;if(St.isSupport(r))return Array.from(e).map(c=>ga(t,c)).indexOf(r,s);for(let u=s;u<a;u++)if(((o=e.get(u))==null?void 0:o.getID())===r.getID())return u;return-1}static lastIndexOf(t,e,r,i){var o;const a=e.length,s=i===void 0||i>=a?a-1:i<0?i+a:i;if(s<0)return-1;if(St.isSupport(r))return Array.from(e).map(c=>ga(t,c)).lastIndexOf(r,s);for(let u=s;u>0;u--)if(((o=e.get(u))==null?void 0:o.getID())===r.getID())return u;return-1}static toTestString(t){return t.toTestString()}getHandlers(){return this.handlers}}class qm{constructor(t,e){l(this,"context");l(this,"text");this.context=t,this.text=e}initialize(t,e){this.context=t,this.text=e}getID(){return this.text.getID()}edit(t,e,r,i){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new T(S.ErrInvalidArgument,"from should be less than or equal to to");const a=this.text.indexRangeToPosRange(t,e);B.isEnabled(ae.Debug)&&B.debug(`EDIT: f:${t}->${a[0].toTestString()}, t:${e}->${a[1].toTestString()} c:${r}`);const s=i?qs(i):void 0,o=this.context.issueTimeTicket(),[,u,c,h]=this.text.edit(a,r,o,s);this.context.acc(c);for(const g of u)this.context.registerGCPair(g);return this.context.push(new Al(this.text.getCreatedAt(),a[0],a[1],r,s?new Map(Object.entries(s)):new Map,o)),this.text.findIndexesFromRange(h)}delete(t,e){return this.edit(t,e,"")}empty(){return this.edit(0,this.length,"")}setStyle(t,e,r){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new T(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.text.indexRangeToPosRange(t,e);B.isEnabled(ae.Debug)&&B.debug(`STYL: f:${t}->${i[0].toTestString()}, t:${e}->${i[1].toTestString()} a:${JSON.stringify(r)}`);const a=qs(r),s=this.context.issueTimeTicket(),[o,u]=this.text.setStyle(i,a,s);this.context.acc(u);for(const c of o)this.context.registerGCPair(c);return this.context.push(new El(this.text.getCreatedAt(),i[0],i[1],new Map(Object.entries(a)),s)),!0}indexRangeToPosRange(t){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");const e=this.text.indexRangeToPosRange(t[0],t[1]);return[e[0].toStruct(),e[1].toStruct()]}posRangeToIndexRange(t){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");const e=this.text.findIndexesFromRange([an.fromStruct(t[0]),an.fromStruct(t[1])]);return[e[0],e[1]]}toTestString(){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(t,e){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(t,e)}}class Pm{constructor(t,e){l(this,"valueType");l(this,"value");l(this,"context");l(this,"counter");this.valueType=t,this.value=e}initialize(t,e){this.valueType=e.getValueType(),this.context=t,this.counter=e,this.value=e.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(t){if(!this.context||!this.counter)throw new T(S.ErrNotInitialized,"Counter is not initialized yet");const e=this.context.issueTimeTicket(),r=St.of(t,e);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(Vs.create(this.counter.getCreatedAt(),r,e)),this}toJSForTest(){if(!this.context||!this.counter)throw new T(S.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function Km(n){if(n.isText)return{type:n.type,value:n.value};const t={type:n.type,children:n.children.map(e=>Km(e))};return n.attrs&&(t.attributes=yi(n.attrs.toObject())),t}function uN(n,t){const e={type:n.isText?n.parent.type:n.type,children:n.isText?n.parent.getChildrenText().length===t?[]:[{type:An,value:n.parent.getChildrenText().slice(t)}]:n.children.slice(t).map(r=>Km(r))};return n.attrs?e.attributes=yi(n.attrs.toObject()):n.isText&&n.parent.attrs&&(e.attributes=yi(n.parent.attrs.toObject())),e}function cN(n,t){const{node:e}=n,r=[...t].slice(0,-1),i=e.isText?e.parent.getChildrenText().length:e.children.length,a=[...r,i],s=[...r],o=[];s[s.length-1]+=1,t.every((c,h)=>c===a[h])||o.push({fromPath:[...t],toPath:a});const u=uN(e,t[t.length-1]);return u&&o.push({fromPath:s,toPath:s,content:u}),o}function fN(n,t){const{node:e,offset:r}=n,i=e.children[r],a=e.children[r-1],{children:s}=i,o=[...t].slice(0,-1),u=[{fromPath:[...t],toPath:[...o,r+1]}];if(!i.children.length)return u;const c=[...o,r-1,a.hasTextChild()?a.getChildrenText().length:a.children.length],h=s.map(g=>Km(g));return u.push({fromPath:c,toPath:c,content:h}),u}function Vm(n,t,e){const{type:r}=n,i=e.issueTimeTicket();if(r===An){TT(n);const{value:a}=n,s=pe.create(Yt.of(i,0),r,a);t.append(s)}else{const{children:a=[]}=n,{attributes:s}=n;let o;if(typeof s=="object"&&!XS(s)){const c=qs(s);o=new wi;for(const[h,g]of Object.entries(c))o.set(h,g,i)}const u=pe.create(Yt.of(i,0),r,void 0,o);t.append(u);for(const c of a)Vm(c,u,e)}}function hN(n,t){const{type:e}=t,r=n.issueTimeTicket();let i;if(t.type===An){const{value:a}=t;i=pe.create(Yt.of(r,0),e,a)}else if(t){const{children:a=[]}=t,{attributes:s}=t;let o;if(typeof s=="object"&&!XS(s)){const u=qs(s);o=new wi;for(const[c,h]of Object.entries(u))o.set(c,h,r)}i=pe.create(Yt.of(n.issueTimeTicket(),0),e,void 0,o);for(const u of a)Vm(u,i,n)}return i}function TT(n){if(!n.value.length)throw new T(S.ErrInvalidArgument,"text node cannot have empty value");return!0}function sp(n){if(!n.length)return!0;if(n[0].type===An)for(const e of n){const{type:r}=e;if(r!==An)throw new T(S.ErrInvalidArgument,"element node and text node cannot be passed together");TT(e)}else for(const e of n){const{type:r}=e;if(r===An)throw new T(S.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class Hm{constructor(t){l(this,"initialRoot");l(this,"context");l(this,"tree");this.initialRoot=t}initialize(t,e){this.context=t,this.tree=e}getID(){return this.tree.getID()}buildRoot(t){if(!this.initialRoot)return pe.create(Yt.of(t.issueTimeTicket(),0),sE);const e=pe.create(Yt.of(t.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)Vm(r,e,t);return e}getSize(){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}splitByPath(t){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new T(S.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t),r=cN(e,t);for(const i of r){const{fromPath:a,toPath:s,content:o}=i,u=this.tree.pathToPos(a),c=this.tree.pathToPos(s);this.editInternal(u,c,o?[o]:[],0)}}mergeByPath(t){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new T(S.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t);if(e.node.isText)throw new T(S.ErrInvalidArgument,"text node cannot be merged");const r=fN(e,t);for(const i of r){const{fromPath:a,toPath:s,content:o}=i,u=this.tree.pathToPos(a),c=this.tree.pathToPos(s);this.editInternal(u,c,o??[],0)}}styleByPath(t,e){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new T(S.ErrInvalidArgument,"path should not be empty");const[r,i]=this.tree.pathToPosRange(t),a=this.context.issueTimeTicket(),s=e?qs(e):void 0,[o,,u]=this.tree.style([r,i],s,a);this.context.acc(u);for(const c of o)this.context.registerGCPair(c);this.context.push(pi.create(this.tree.getCreatedAt(),r,i,s?new Map(Object.entries(s)):new Map,a))}style(t,e,r){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new T(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(t),a=this.tree.findPos(e),s=this.context.issueTimeTicket(),o=r?qs(r):void 0,[u,,c]=this.tree.style([i,a],o,s);this.context.acc(c);for(const h of u)this.context.registerGCPair(h);this.context.push(pi.create(this.tree.getCreatedAt(),i,a,o?new Map(Object.entries(o)):new Map,s))}removeStyle(t,e,r){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new T(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(t),a=this.tree.findPos(e),s=this.context.issueTimeTicket(),[o,,u]=this.tree.removeStyle([i,a],r,s);this.context.acc(u);for(const c of o)this.context.registerGCPair(c);this.context.push(pi.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),i,a,r,s))}editInternal(t,e,r,i=0){var c;if(r.length!==0&&r[0]&&(sp(r),r[0].type!==An))for(const h of r){const{children:g=[]}=h;sp(g)}const a=this.context.getLastTimeTicket();let s=new Array;if(((c=r[0])==null?void 0:c.type)===An){let h="";for(const g of r){const{value:d}=g;h+=d}s.push(pe.create(Yt.of(this.context.issueTimeTicket(),0),An,h))}else s=r.map(h=>h&&hN(this.context,h)).filter(h=>h);const[,o,u]=this.tree.edit([t,e],s.length?s.map(h=>h==null?void 0:h.deepcopy()):void 0,i,a,()=>this.context.issueTimeTicket());this.context.acc(u);for(const h of o)this.context.registerGCPair(h);return this.context.push(Nl.create(this.tree.getCreatedAt(),t,e,s.length?s:void 0,i,a)),!0}editByPath(t,e,r,i=0){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new T(S.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new T(S.ErrInvalidArgument,"path should not be empty");const a=this.tree.pathToPos(t),s=this.tree.pathToPos(e);return this.editInternal(a,s,r?[r]:[],i)}editBulkByPath(t,e,r,i=0){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new T(S.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new T(S.ErrInvalidArgument,"path should not be empty");const a=this.tree.pathToPos(t),s=this.tree.pathToPos(e);return this.editInternal(a,s,r,i)}edit(t,e,r,i=0){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new T(S.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),s=this.tree.findPos(e);return this.editInternal(a,s,r?[r]:[],i)}editBulk(t,e,r,i=0){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new T(S.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),s=this.tree.findPos(e);return this.editInternal(a,s,r,i)}toXML(){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(t){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(t)}pathToIndex(t){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(t)}pathRangeToPosRange(t){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");const e=[this.tree.pathToIndex(t[0]),this.tree.pathToIndex(t[1])],r=this.tree.indexRangeToPosRange(e);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(t){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(t)}posRangeToIndexRange(t){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");const e=[nn.fromStruct(t[0]),nn.fromStruct(t[1])];return this.tree.posRangeToIndexRange(e)}posRangeToPathRange(t){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");const e=[nn.fromStruct(t[0]),nn.fromStruct(t[1])];return this.tree.posRangeToPathRange(e)}}function op(n,t){return ST(n,t)}function Ze(n,t){if(t){if(t instanceof St)return t;if(t instanceof Zt)return ST(n,t);if(t instanceof Qt)return oN(n,t);if(t instanceof Ae)return new qm(n,t);if(t instanceof oe){const e=new Pm(Dn.Int,0);return e.initialize(n,t),e}else if(t instanceof Ee){const e=new Hm;return e.initialize(n,t),e}}else return;throw new TypeError(`Unsupported type of element: ${typeof t}`)}function ga(n,t){const e=Ze(n,t);return e instanceof St?e.getValue():e}function Mo(n,t,e){let r;if(St.isSupport(t))r=St.of(t,e);else if(Array.isArray(t))r=Qt.create(e,nt.buildArrayElements(n,t));else if(typeof t=="object")t instanceof qm?(r=Ae.create(Ks.create(),e),t.initialize(n,r)):t instanceof Pm?(r=oe.create(t.getValueType(),t.getValue(),e),t.initialize(n,r)):t instanceof Hm?(r=Ee.create(t.buildRoot(n),e),t.initialize(n,r)):r=Zt.create(e,il.buildObjectMembers(n,t));else throw new TypeError(`Unsupported type of value: ${typeof t}`);return r}class al{constructor(t){l(this,"rootObject");l(this,"elementPairMapByCreatedAt");l(this,"gcElementSetByCreatedAt");l(this,"gcPairMap");l(this,"docSize");this.rootObject=t,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.docSize={live:{data:0,meta:0},gc:{data:0,meta:0}},this.registerElement(t,void 0),t.getDescendants(e=>{if(e.getRemovedAt()&&this.registerRemovedElement(e),e instanceof Ae||e instanceof Ee)for(const r of e.getGCPairs())this.registerGCPair(r);return!1})}static create(){return new al(Zt.create(Us))}findByCreatedAt(t){const e=this.elementPairMapByCreatedAt.get(t.toIDString());if(e)return e.element}findElementPairByCreatedAt(t){return this.elementPairMapByCreatedAt.get(t.toIDString())}createSubPaths(t){let e=this.elementPairMapByCreatedAt.get(t.toIDString());if(!e)return[];const r=[];for(;e.parent;){const i=e.element.getCreatedAt(),a=e.parent.subPathOf(i);if(a===void 0)throw new T(S.ErrInvalidArgument,`cant find the given element: ${i.toIDString()}`);r.unshift(a),e=this.elementPairMapByCreatedAt.get(e.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(t){return this.createSubPaths(t).join(".")}registerElement(t,e){this.elementPairMapByCreatedAt.set(t.getCreatedAt().toIDString(),{parent:e,element:t}),jt(this.docSize.live,t.getDataSize()),t instanceof Wi&&t.getDescendants((r,i)=>(this.elementPairMapByCreatedAt.set(r.getCreatedAt().toIDString(),{parent:i,element:r}),jt(this.docSize.live,r.getDataSize()),!1))}deregisterElement(t){let e=0;const r=i=>{const a=i.getCreatedAt().toIDString();pa(this.docSize.gc,i.getDataSize()),this.elementPairMapByCreatedAt.delete(a),this.gcElementSetByCreatedAt.delete(a),e++};return r(t),t instanceof Wi&&t.getDescendants(i=>(r(i),!1)),e}registerRemovedElement(t){jt(this.docSize.gc,t.getDataSize()),pa(this.docSize.live,t.getDataSize()),this.docSize.live.meta+=wn,this.gcElementSetByCreatedAt.add(t.getCreatedAt().toIDString())}registerGCPair(t){if(this.gcPairMap.get(t.child.toIDString())){this.gcPairMap.delete(t.child.toIDString());return}this.gcPairMap.set(t.child.toIDString(),t);const r=this.gcPairMap.get(t.child.toIDString()).child.getDataSize();jt(this.docSize.gc,r),pa(this.docSize.live,r),t.child instanceof Hi||(this.docSize.live.meta+=wn)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const t=new Set;for(const e of this.gcElementSetByCreatedAt){t.add(e);const r=this.elementPairMapByCreatedAt.get(e);r.element instanceof Wi&&r.element.getDescendants(i=>(t.add(i.getCreatedAt().toIDString()),!1))}return t.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}getDocSize(){return this.docSize}deepcopy(){return new al(this.rootObject.deepcopy())}garbageCollect(t){let e=0;for(const r of this.gcElementSetByCreatedAt){const i=this.elementPairMapByCreatedAt.get(r),a=i.element.getRemovedAt();a&&(t!=null&&t.afterOrEqual(a))&&(i.parent.purge(i.element),e+=this.deregisterElement(i.element))}for(const[,r]of this.gcPairMap){const i=r.child.getRemovedAt();i&&(t!=null&&t.afterOrEqual(i))&&(r.parent.purge(r.child),pa(this.docSize.gc,r.child.getDataSize()),this.gcPairMap.delete(r.child.toIDString()),e+=1)}return e}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}acc(t){jt(this.docSize.live,t)}*getGCElementPairs(){for(const t of this.gcElementSetByCreatedAt){const e=this.elementPairMapByCreatedAt.get(t);e&&(yield e)}}}let lp=class{constructor(t,e){l(this,"context");l(this,"presence");this.context=t,this.presence=e}set(t,e){for(const r of Object.keys(t))this.presence[r]=t[r];this.context.setPresenceChange({type:Nn.Put,presence:Qe(this.presence)}),this.context.setReversePresence(t,e)}get(t){return this.presence[t]}clear(){this.presence={},this.context.setPresenceChange({type:Nn.Clear})}};const up=50;class dN{constructor(){l(this,"undoStack",[]);l(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(t){this.undoStack.length>=up&&this.undoStack.shift(),this.undoStack.push(t)}popUndo(){return this.undoStack.pop()}pushRedo(t){this.redoStack.length>=up&&this.redoStack.shift(),this.redoStack.push(t)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}reconcileCreatedAt(t,e){const r=i=>{for(const a of i)for(const s of a)(s instanceof Ai||s instanceof xn||s instanceof en)&&s.getCreatedAt()===t&&s.setCreatedAt(e),(s instanceof oa||s instanceof en)&&s.getPrevCreatedAt()===t&&s.setPrevCreatedAt(e)};r(this.undoStack),r(this.redoStack)}}function mN(n,t){const e=[];for(const r of t){const i=gN(n,r.path),a=yN(i,r);if(!a.valid)for(const s of a.errors||[])e.push(s)}return{valid:e.length===0,errors:e}}function gN(n,t){if(!t.startsWith("$"))throw new Error(`Path must start with $, got ${t}`);const e=t.split(".");let r=n;for(let i=1;i<e.length;i++){const a=e[i];if(!(r instanceof Zt))return;r=r.get(a)}return r}function yN(n,t){switch(t.type){case"string":case"boolean":case"integer":case"double":case"long":case"date":case"bytes":case"null":return vN(n,t);case"object":if(!(n instanceof Zt))return{valid:!1,errors:[{path:t.path,message:`expected object at path ${t.path}`}]};break;case"array":if(!(n instanceof Qt))return{valid:!1,errors:[{path:t.path,message:`expected array at path ${t.path}`}]};break;case"yorkie.Text":if(!(n instanceof Ae))return{valid:!1,errors:[{path:t.path,message:`expected yorkie.Text at path ${t.path}`}]};break;case"yorkie.Tree":if(!(n instanceof Ee))return{valid:!1,errors:[{path:t.path,message:`expected yorkie.Tree at path ${t.path}`}]};break;case"yorkie.Counter":if(!(n instanceof oe))return{valid:!1,errors:[{path:t.path,message:`expected yorkie.Counter at path ${t.path}`}]};break;default:throw new Error(`Unknown rule type: ${t.type}`)}return{valid:!0}}function pN(n){switch(n){case"null":return lt.Null;case"boolean":return lt.Boolean;case"integer":return lt.Integer;case"long":return lt.Long;case"double":return lt.Double;case"string":return lt.String;case"bytes":return lt.Bytes;case"date":return lt.Date;default:throw new Error(`Unknown primitive type: ${n}`)}}function vN(n,t){return n instanceof St&&n.getType()===pN(t.type)?{valid:!0}:{valid:!1,errors:[{path:t.path,message:`expected ${t.type} at path ${t.path}`}]}}const SN="yorkie-devtools-panel",TN="yorkie-devtools-sdk";function bN(n){return[Ut.StatusChanged,Ut.Snapshot,Ut.LocalChange,Ut.RemoteChange,Ut.Initialized,Ut.Watched,Ut.Unwatched,Ut.PresenceChanged].includes(n.type)}function wN(n){return n.every(bN)}let Xa="disconnected";const cp=new Map,gu=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=gu);function Zl(n,t){(t!=null&&t.force||Xa!=="disconnected")&&window.postMessage({source:TN,...n},"*")}function AN(n){if(!n.isEnableDevtools()||typeof window>"u"||cp.has(n.getKey()))return;gu.set(n.getKey(),[]);const t=n.subscribe("all",e=>{wN(e)&&(gu.get(n.getKey()).push(e),Xa==="synced"&&Zl({msg:"doc::sync::partial",docKey:n.getKey(),event:e}))});cp.set(n.getKey(),[t]),Zl({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",e=>{var i;if(((i=e.data)==null?void 0:i.source)!==SN)return;switch(e.data.msg){case"devtools::connect":if(Xa!=="disconnected")break;Xa="connected",Zl({msg:"doc::available",docKey:n.getKey()}),B.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":Xa="disconnected",B.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":Xa="synced",Zl({msg:"doc::sync::full",docKey:n.getKey(),events:gu.get(n.getKey())}),B.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var Ci=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(Ci||{}),Ut=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.AuthError="auth-error",n))(Ut||{}),Uo=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(Uo||{}),Ed=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(Ed||{});class Ji{constructor(t,e){l(this,"key");l(this,"status");l(this,"opts");l(this,"maxSizeLimit");l(this,"schemaRules");l(this,"changeID");l(this,"checkpoint");l(this,"localChanges");l(this,"root");l(this,"presences");l(this,"clone");l(this,"internalHistory");l(this,"isUpdating");l(this,"onlineClients");l(this,"eventStream");l(this,"eventStreamObserver");l(this,"history");this.key=t,this.status="detached",this.opts=e||{},this.maxSizeLimit=0,this.schemaRules=[],this.changeID=mE,this.checkpoint=gE,this.localChanges=[],this.root=al.create(),this.presences=new Map,this.onlineClients=new Set,this.internalHistory=new dN,this.isUpdating=!1,this.eventStream=vT(r=>this.eventStreamObserver=r),this.history={canUndo:()=>this.internalHistory.hasUndo()&&!this.isUpdating,canRedo:()=>this.internalHistory.hasRedo()&&!this.isUpdating,undo:()=>this.executeUndoRedo(!0),redo:()=>this.executeUndoRedo(!1)},AN(this)}update(t,e){var o,u,c;if(this.getStatus()==="removed")throw new T(S.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),i=zo.create(this.changeID,this.clone.root,this.clone.presences.get(r)||{},e);try{const h=op(i,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,t(h,new lp(i,this.clone.presences.get(r)))}catch(h){throw this.clone=void 0,h}finally{this.isUpdating=!1}const a=this.getSchemaRules();if(!i.isPresenceOnlyChange()&&a.length){const h=mN((o=this.clone)==null?void 0:o.root.getObject(),a);if(!h.valid)throw this.clone=void 0,new T(S.ErrDocumentSchemaValidationFailed,`schema validation failed: ${(u=h.errors)==null?void 0:u.map(g=>g.message).join(", ")}`)}const s=iE((c=this.clone)==null?void 0:c.root.getDocSize());if(!i.isPresenceOnlyChange()&&this.maxSizeLimit>0&&this.maxSizeLimit<s)throw this.clone=void 0,new T(S.ErrDocumentSizeExceedsLimit,`document size exceeded: ${s} > ${this.maxSizeLimit}`);if(i.hasChange()){B.isEnabled(ae.Trivial)&&B.trivial(`trying to update a local change: ${this.toJSON()}`);const h=i.toChange(),{opInfos:g,reverseOps:d}=h.execute(this.root,this.presences,mt.Local);for(const b of h.getOperations())b instanceof Ai&&this.internalHistory.reconcileCreatedAt(b.getCreatedAt(),b.getValue().getCreatedAt());const m=i.getReversePresence();m&&d.push({type:"presence",value:m}),this.localChanges.push(h),d.length&&this.internalHistory.pushUndo(d),g.length&&this.internalHistory.clearRedo(),this.changeID=i.getNextID();const A=[];g.length&&A.push({type:"local-change",source:mt.Local,value:{message:h.getMessage()||"",operations:g,actor:r,clientSeq:h.getID().getClientSeq(),serverSeq:h.getID().getServerSeq()},rawChange:this.isEnableDevtools()?h.toStruct():void 0}),h.hasPresenceChange()&&A.push({type:"presence-changed",source:mt.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(A),B.isEnabled(ae.Trivial)&&B.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(t,e,r,i){if(typeof t=="string"){if(typeof e!="function")throw new T(S.ErrInvalidArgument,"Second argument must be a callback function");if(t==="presence"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="initialized"&&c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||o(c)},r,i)}if(t==="my-presence"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="initialized"&&c.type!=="presence-changed"||c.type==="presence-changed"&&c.value.clientID!==this.changeID.getActorID()||o(c)},r,i)}if(t==="others"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||c.value.clientID!==this.changeID.getActorID()&&o(c)},r,i)}if(t==="connection"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="connection-changed"&&o(c)},r,i)}if(t==="status"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="status-changed"&&o(c)},r,i)}if(t==="sync"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="sync-status-changed"&&o(c)},r,i)}if(t==="auth-error"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="auth-error"&&o(c)},r)}if(t==="all"){const o=e;return this.eventStream.subscribe(o,r,i)}const a=t,s=e;return this.eventStream.subscribe(o=>{for(const u of o){if(u.type!=="local-change"&&u.type!=="remote-change")continue;const c=[];for(const h of u.value.operations)this.isSameElementOrChildOf(h.path,a)&&c.push(h);c.length&&s({...u,value:{...u.value,operations:c}})}},r,i)}if(typeof t=="function"){const a=t,s=e,o=r;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="snapshot"&&c.type!=="local-change"&&c.type!=="remote-change"||a(c)},s,o)}throw new T(S.ErrInvalidArgument,`"${t}" is not a valid`)}publish(t){this.eventStreamObserver&&this.eventStreamObserver.next(t)}applyChangePack(t){t.hasSnapshot()?this.applySnapshot(t.getCheckpoint().getServerSeq(),t.getVersionVector(),t.getSnapshot(),t.getCheckpoint().getClientSeq()):(this.applyChanges(t.getChanges(),mt.Remote),this.removePushedLocalChanges(t.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(t.getCheckpoint()),t.hasSnapshot()||this.garbageCollect(t.getVersionVector()),t.getIsRemoved()&&this.applyStatus("removed"),B.isEnabled(ae.Trivial)&&B.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Qe(this.presences)})}createChangePack(){const t=Array.from(this.localChanges),e=this.checkpoint.increaseClientSeq(t.length);return Hc.create(this.key,e,!1,t,this.getVersionVector())}setActor(t){for(const e of this.localChanges)e.setActor(t);this.changeID=this.changeID.setActor(t)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getClone(){return this.clone}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const t=zo.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return op(t,this.clone.root.getObject())}getDocSize(){return this.root.getDocSize()}getMaxSizePerDocument(){return this.maxSizeLimit}setMaxSizePerDocument(t){this.maxSizeLimit=t}getSchemaRules(){return this.schemaRules}setSchemaRules(t){this.schemaRules=t}garbageCollect(t){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(t),this.root.garbageCollect(t))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getRootCRDT(){return this.root}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(t,e,r,i=-1){const{root:a,presences:s}=gt.bytesToSnapshot(r);this.root=new al(a),this.presences=s,this.changeID=this.changeID.setClocks(e.maxLamport(),e),this.clone=void 0,this.removePushedLocalChanges(i),this.applyChanges(this.localChanges,mt.Local),this.publish([{type:"snapshot",source:mt.Remote,value:{serverSeq:t.toString(),snapshot:this.isEnableDevtools()?gt.bytesToHex(r):void 0,snapshotVector:gt.versionVectorToHex(e)}}])}applyChanges(t,e){B.isEnabled(ae.Debug)&&B.debug(`trying to apply ${t.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),B.isEnabled(ae.Trivial)&&B.trivial(t.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of t)this.applyChange(r,e);B.isEnabled(ae.Debug)&&B.debug(`after appling ${t.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(t,e){this.ensureClone(),t.execute(this.clone.root,this.clone.presences,e);const r=[],i=t.getID().getActorID();if(t.hasPresenceChange()&&this.onlineClients.has(i)){const s=t.getPresenceChange();switch(s.type){case Nn.Put:r.push(this.presences.has(i)?{type:"presence-changed",source:e,value:{clientID:i,presence:s.presence}}:{type:"watched",source:mt.Remote,value:{clientID:i,presence:s.presence}});break;case Nn.Clear:r.push({type:"unwatched",source:mt.Remote,value:{clientID:i,presence:this.getPresence(i)}}),this.removeOnlineClient(i);break}}const{opInfos:a}=t.execute(this.root,this.presences,e);if(this.changeID=this.changeID.syncClocks(t.getID()),a.length){const s=this.isEnableDevtools()?t.toStruct():void 0;r.push(e===mt.Remote?{type:"remote-change",source:e,value:{actor:i,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:a},rawChange:s}:{type:"local-change",source:e,value:{actor:i,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:a},rawChange:s})}r.length&&this.publish(r)}applyWatchStream(t){if(t.body.case==="initialization"){const e=t.body.value.clientIds,r=new Set;for(const i of e)i!==this.changeID.getActorID()&&r.add(i);this.setOnlineClients(r),this.publish([{type:"initialized",source:mt.Local,value:this.getPresences()}]);return}if(t.body.case==="event"){const{type:e,publisher:r}=t.body.value,i=[];if(e===Rs.DOCUMENT_WATCHED){if(this.onlineClients.has(r)&&this.hasPresence(r))return;this.addOnlineClient(r),this.hasPresence(r)&&i.push({type:"watched",source:mt.Remote,value:{clientID:r,presence:this.getPresence(r)}})}else if(e===Rs.DOCUMENT_UNWATCHED){const a=this.getPresence(r);this.removeOnlineClient(r),a&&i.push({type:"unwatched",source:mt.Remote,value:{clientID:r,presence:a}})}i.length&&this.publish(i)}}applyStatus(t){this.status=t,t==="detached"&&this.setActor(Dm),this.publish([{source:t==="removed"?mt.Remote:mt.Local,type:"status-changed",value:t==="attached"?{status:t,actorID:this.changeID.getActorID()}:{status:t}}])}applyDocEventsForReplay(t){for(const e of t){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);continue}if(e.type==="snapshot"){const{snapshot:r,serverSeq:i,snapshotVector:a}=e.value;if(!r)continue;this.applySnapshot(BigInt(i),gt.hexToVersionVector(a),gt.hexToBytes(r));continue}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)continue;const r=Ps.fromStruct(e.rawChange);this.applyChange(r,e.source)}if(e.type==="initialized"){const r=new Set;for(const{clientID:i,presence:a}of e.value)r.add(i),this.presences.set(i,a);this.setOnlineClients(r)}else if(e.type==="watched"){const{clientID:r,presence:i}=e.value;this.addOnlineClient(r),this.presences.set(r,i)}else if(e.type==="unwatched"){const{clientID:r}=e.value;this.removeOnlineClient(r),this.presences.delete(r)}else if(e.type==="presence-changed"){const{clientID:r,presence:i}=e.value;this.presences.set(r,i)}}}getValueByPath(t){if(!t.startsWith("$"))throw new T(S.ErrInvalidArgument,'path must start with "$"');const e=t.split(".");e.shift();let r=this.getRoot();for(const i of e)if(r=r[i],!r)return;return r}setOnlineClients(t){this.onlineClients=t}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(t){this.onlineClients.add(t)}removeOnlineClient(t){this.onlineClients.delete(t)}hasPresence(t){return this.presences.has(t)}getMyPresence(){if(this.status!=="attached")return{};const t=this.presences.get(this.changeID.getActorID());return t?Qe(t):{}}getOthersPresences(){const t=[],e=this.changeID.getActorID();for(const r of this.onlineClients)r!==e&&this.presences.has(r)&&t.push({clientID:r,presence:Qe(this.presences.get(r))});return t}getPresence(t){if(t===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(t))return;const e=this.presences.get(t);return e?Qe(e):void 0}getPresences(){const t=[];t.push({clientID:this.changeID.getActorID(),presence:Qe(this.getMyPresence())});for(const e of this.onlineClients)this.presences.has(e)&&t.push({clientID:e,presence:Qe(this.presences.get(e))});return t}getPresenceForTest(t){const e=this.presences.get(t);return e?Qe(e):void 0}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const t=this.getChangeID().getActorID();return this.getPresences().filter(e=>e.clientID!==t).sort((e,r)=>e.clientID>r.clientID?1:-1)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}getVersionVector(){return this.changeID.getVersionVector()}isSameElementOrChildOf(t,e){if(e===t)return!0;const r=t.split(".");return e.split(".").every((i,a)=>i===r[a])}removePushedLocalChanges(t){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>t);)this.localChanges.shift()}executeUndoRedo(t){if(this.isUpdating)throw new T(S.ErrRefused,`${t?"Undo":"Redo"} is not allowed during an update`);const e=t?this.internalHistory.popUndo():this.internalHistory.popRedo();if(!e)throw new T(S.ErrRefused,`There is no operation to be ${t?"undone":"redone"}`);this.ensureClone();const r=zo.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const h of e){if(!(h instanceof on)){new lp(r,Qe(this.clone.presences.get(this.changeID.getActorID()))).set(h.value,{addToHistory:!0});continue}const g=r.issueTimeTicket();if(h.setExecutedAt(g),h instanceof Ai){const d=h.getCreatedAt();h.getValue().setCreatedAt(g),this.internalHistory.reconcileCreatedAt(d,g)}else if(h instanceof oa){const d=h.getValue().getCreatedAt();h.getValue().setCreatedAt(g),this.internalHistory.reconcileCreatedAt(d,g)}r.push(h)}const i=r.toChange();i.execute(this.clone.root,this.clone.presences,mt.UndoRedo);const{opInfos:a,reverseOps:s}=i.execute(this.root,this.presences,mt.UndoRedo),o=r.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length&&(t?this.internalHistory.pushRedo(s):this.internalHistory.pushUndo(s)),!i.hasPresenceChange()&&!a.length)return;this.localChanges.push(i),this.changeID=r.getNextID();const u=this.changeID.getActorID(),c=[];a.length&&c.push({type:"local-change",source:mt.UndoRedo,value:{message:i.getMessage()||"",operations:a,actor:u,clientSeq:i.getID().getClientSeq(),serverSeq:i.getID().getServerSeq()},rawChange:this.isEnableDevtools()?i.toStruct():void 0}),i.hasPresenceChange()&&c.push({type:"presence-changed",source:mt.UndoRedo,value:{clientID:u,presence:this.getPresence(u)}}),this.publish(c)}}class fp{constructor(t,e,r,i){l(this,"resource");l(this,"resourceID");l(this,"syncMode");l(this,"changeEventReceived");l(this,"lastHeartbeatTime");l(this,"reconnectStreamDelay");l(this,"cancelled");l(this,"watchStream");l(this,"watchLoopTimerID");l(this,"watchAbortController");this.reconnectStreamDelay=t,this.resource=e,this.resourceID=r,this.syncMode=i,this.changeEventReceived=i!==void 0?!1:void 0,this.lastHeartbeatTime=Date.now(),this.cancelled=!1}changeSyncMode(t){this.syncMode=t}needRealtimeSync(){return this.syncMode===mo.RealtimeSyncOff?!1:this.syncMode===mo.RealtimePushOnly?this.resource.hasLocalChanges():this.syncMode!==mo.Manual&&(this.resource.hasLocalChanges()||(this.changeEventReceived??!1))}needSync(t){return this.resource instanceof Ji?this.needRealtimeSync():this.syncMode===mo.Manual?!1:Date.now()-this.lastHeartbeatTime>=t}updateHeartbeatTime(){this.lastHeartbeatTime=Date.now()}async runWatchLoop(t){const e=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await t(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.cancelled||(this.watchLoopTimerID=setTimeout(e,this.reconnectStreamDelay))})}catch{}};await e()}cancelWatchStream(){this.cancelled=!0,this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}function EN(n,t){let e=t;return{authInterceptor:a=>async s=>(n&&s.header.set("x-api-key",n),e&&s.header.set("authorization",e),await a(s)),setToken:a=>{e=a}}}const NN="@yorkie-js/sdk",xN="0.6.39",hp={name:NN,version:xN};function DN(n){return t=>async e=>(n?e.header.set("x-yorkie-user-agent",n):e.header.set("x-yorkie-user-agent",hp.name+"/"+hp.version),await t(e))}const kN=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var ho=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(ho||{}),ls=(n=>(n.PresenceChanged="presence-changed",n.Initialized="initialized",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(ls||{});const so=".";class Ii{constructor(t){l(this,"key");l(this,"status");l(this,"actorID");l(this,"sessionID");l(this,"count");l(this,"seq");l(this,"eventStream");l(this,"eventStreamObserver");this.validateChannelKey(t),this.key=t,this.status="detached",this.count=0,this.seq=0,this.eventStream=vT(e=>this.eventStreamObserver=e)}getKey(){return this.key}getFirstKeyPath(){return this.key.split(so)[0]}getStatus(){return this.status}applyStatus(t){this.status=t}isAttached(){return this.status==="attached"}getActorID(){return this.actorID}setActor(t){this.actorID=t}getSessionID(){return this.sessionID}setSessionID(t){this.sessionID=t}getPresenceCount(){return this.count}updateCount(t,e){return e===0||e>this.seq?(this.count=t,this.seq=e,!0):!1}hasLocalChanges(){return!1}subscribe(t,e){if(typeof t=="function")return this.eventStream.subscribe(t);const r=t,i=e;if(!i)throw new Error("callback is required when subscribing to specific event type or topic");if(r==="broadcast")return this.eventStream.subscribe(s=>{s.type==="broadcast"&&i(s)});if(r==="local-broadcast")return this.eventStream.subscribe(s=>{s.type==="local-broadcast"&&i(s)});if(r==="auth-error")return this.eventStream.subscribe(s=>{s.type==="auth-error"&&i(s)});if(r==="presence")return this.eventStream.subscribe(s=>{(s.type==="presence-changed"||s.type==="initialized")&&i(s)});if(r==="all")return this.eventStream.subscribe(i);const a=r;return this.eventStream.subscribe(s=>{s.type==="broadcast"&&s.topic===a&&i(s)})}publish(t){this.eventStreamObserver&&this.eventStreamObserver.next(t)}broadcast(t,e,r){if(this.status!=="attached")throw new Error(`channel is not attached: ${this.status}`);if(!this.actorID)throw new Error("actorID is not set");this.publish({type:"local-broadcast",clientID:this.actorID,topic:t,payload:e,options:r})}validateChannelKey(t){if(t==="")throw new Error("channel key must not be empty");if(t.includes(" "))throw new Error("channel key must not contain a whitespace");if(t.startsWith(so))throw new Error("channel key must not start with a period");if(t.endsWith(so))throw new Error("channel key must not end with a period");if(t.includes(`${so}${so}`))throw new Error("channel key path must not empty")}}var mo=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(mo||{});const Va={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3,channelHeartbeatInterval:3e4},Uf={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class bT{constructor(t){l(this,"id");l(this,"key");l(this,"metadata");l(this,"status");l(this,"attachmentMap");l(this,"apiKey");l(this,"authTokenInjector");l(this,"conditions");l(this,"syncLoopDuration");l(this,"reconnectStreamDelay");l(this,"retrySyncLoopDelay");l(this,"channelHeartbeatInterval");l(this,"rpcClient");l(this,"setAuthToken");l(this,"taskQueue");l(this,"processing",!1);l(this,"keepalive",!1);t=t||Va;const e=t.rpcAddr||Va.rpcAddr;this.key=t.key||pT(),this.metadata=t.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.authTokenInjector=t.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=t.syncLoopDuration??Va.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay??Va.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay??Va.retrySyncLoopDelay,this.channelHeartbeatInterval=t.channelHeartbeatInterval??Va.channelHeartbeatInterval;const{authInterceptor:r,setToken:i}=EN(this.apiKey);this.setAuthToken=i,this.rpcClient=D1(Z1,F1({baseUrl:e,interceptors:[r,DN(t==null?void 0:t.userAgent)],fetch:(a,s)=>fetch(a,{...s,keepalive:this.keepalive})})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const t=await this.authTokenInjector();this.setAuthToken(t)}return this.enqueueTask(async()=>{try{const t=await this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}});this.id=t.clientId,this.status="activated",this.runSyncLoop(),B.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`),typeof window<"u"&&window.addEventListener("beforeunload",async()=>{await this.deactivate({keepalive:!0})})}catch(t){throw B.error(`[AC] c:"${this.getKey()}" err :`,t),await this.handleConnectError(t),t}})}deactivate(t={keepalive:!1,synchronous:!1}){if(this.status==="deactivated")return Promise.resolve();const e=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id,synchronous:t.synchronous},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}}),this.deactivateInternal(),B.info(`[DC] c"${this.getKey()}" deactivated`)}catch(r){throw B.error(`[DC] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};if(t.keepalive){this.keepalive=!0;const r=e();return this.keepalive=!1,r}return this.enqueueTask(e)}has(t){return this.attachmentMap.has(t)}attach(t,e){return t instanceof Ii?this.attachChannel(t,e):this.attachDocument(t,e)}attachDocument(t,e={}){if(!this.isActive())throw new T(S.ErrClientNotActivated,`${this.key} is not active`);if(t.getStatus()!==Ci.Detached)throw new T(S.ErrNotDetached,`${t.getKey()} is not detached`);t.setActor(this.id),t.update((i,a)=>a.set(e.initialPresence||{}));const r=e.syncMode??"realtime";return this.enqueueTask(async()=>{try{const i=await this.rpcClient.attachDocument({clientId:this.id,changePack:gt.toChangePack(t.createChangePack()),schemaKey:e.schema},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}});(i.maxSizePerDocument??0)>0&&t.setMaxSizePerDocument(i.maxSizePerDocument),i.schemaRules.length>0&&t.setSchemaRules(gt.fromSchemaRules(i.schemaRules));const s=gt.fromChangePack(i.changePack);if(t.applyChangePack(s),t.getStatus()===Ci.Removed)return t;t.applyStatus(Ci.Attached),this.attachmentMap.set(t.getKey(),new fp(this.reconnectStreamDelay,t,i.documentId,r)),r!=="manual"&&await this.runWatchLoop(t.getKey()),B.info(`[AD] c:"${this.getKey()}" attaches d:"${t.getKey()}"`);const o=t.getRootObject();if(e.initialRoot){const u=e.initialRoot;t.update(c=>{for(const[h,g]of Object.entries(u))if(!o.has(h)){const d=h;c[d]=g}})}return t}catch(i){throw B.error(`[AD] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}})}detach(t,e){return t instanceof Ii?this.detachChannel(t):this.detachDocument(t,e)}detachDocument(t,e={keepalive:!1}){if(!this.isActive())throw new T(S.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(t.getKey());if(!r)throw new T(S.ErrNotAttached,`${t.getKey()} is not attached`);t.update((a,s)=>s.clear());const i=async()=>{try{const a=await this.rpcClient.detachDocument({clientId:this.id,documentId:r.resourceID,changePack:gt.toChangePack(t.createChangePack()),removeIfNotAttached:e.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),s=gt.fromChangePack(a.changePack);return t.applyChangePack(s),t.getStatus()!==Ci.Removed&&t.applyStatus(Ci.Detached),this.detachInternal(t.getKey()),B.info(`[DD] c:"${this.getKey()}" detaches d:"${t.getKey()}"`),t}catch(a){throw B.error(`[DD] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}};if(e.keepalive){this.keepalive=!0;const a=i();return this.keepalive=!1,a}return this.enqueueTask(i)}async attachChannel(t,e={}){if(!this.isActive())throw new T(S.ErrClientNotActivated,`${this.key} is not active`);if(t.getStatus()!==ho.Detached)throw new T(S.ErrNotDetached,`${t.getKey()} is not detached`);t.setActor(this.id);const r=async()=>{try{const i=await this.rpcClient.attachChannel({clientId:this.id,channelKey:t.getKey()},{headers:{"x-shard-key":`${this.apiKey}/${t.getFirstKeyPath()}`}});t.setSessionID(i.sessionId),t.updateCount(Number(i.count),0),t.applyStatus(ho.Attached);const a=e.isRealtime!==!1?"realtime":"manual",s=new fp(this.reconnectStreamDelay,t,i.sessionId,a);return t.subscribe("local-broadcast",o=>{const{topic:u,payload:c,options:h}=o;this.broadcast(t.getKey(),u,c,h).catch(g=>{h!=null&&h.error&&h.error(g),B.error(`[BC] c:"${this.getKey()}" failed: ${g}`)})}),this.attachmentMap.set(t.getKey(),s),a==="realtime"&&await this.runWatchLoop(t.getKey()),B.info(`[AP] c:"${this.getKey()}" attaches p:"${t.getKey()}" mode:${a} count:${t.getPresenceCount()}`),t}catch(i){throw B.error(`[AP] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}};return this.enqueueTask(r)}async detachChannel(t){if(!this.isActive())throw new T(S.ErrClientNotActivated,`${this.key} is not active`);if(!this.attachmentMap.has(t.getKey()))throw new T(S.ErrNotAttached,`${t.getKey()} is not attached`);const e=async()=>{try{const r=await this.rpcClient.detachChannel({clientId:this.id,channelKey:t.getKey(),sessionId:t.getSessionID()},{headers:{"x-shard-key":`${this.apiKey}/${t.getFirstKeyPath()}`}});return t.updateCount(Number(r.count),0),t.applyStatus(ho.Detached),this.detachInternal(t.getKey()),B.info(`[DP] c:"${this.getKey()}" detaches p:"${t.getKey()}" count:${t.getPresenceCount()}`),t}catch(r){throw B.error(`[DP] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};return this.enqueueTask(e)}async changeSyncMode(t,e){if(!this.isActive())throw new T(S.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(t.getKey());if(!r)throw new T(S.ErrNotAttached,`${t.getKey()} is not attached`);const i=r.syncMode;return i===e?t:(r.changeSyncMode(e),e==="manual"?(r.cancelWatchStream(),t):(e==="realtime"&&(r.changeEventReceived=!0),i==="manual"&&await this.runWatchLoop(t.getKey()),t))}sync(t){if(!this.isActive())throw new T(S.ErrClientNotActivated,`${this.key} is not active`);if(t instanceof Ii){const e=this.attachmentMap.get(t.getKey());if(!e)throw new T(S.ErrNotAttached,`${t.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(e).catch(async r=>{throw B.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}if(t instanceof Ji){const e=this.attachmentMap.get(t.getKey());if(!e)throw new T(S.ErrNotAttached,`${t.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(e,"realtime").catch(async r=>{throw B.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}return this.enqueueTask(async()=>{const e=[];for(const[,r]of this.attachmentMap)r.syncMode!==void 0&&r.resource instanceof Ji&&e.push(this.syncInternal(r,r.syncMode));return Promise.all(e).catch(async r=>{throw B.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r})})}remove(t){if(!this.isActive())throw new T(S.ErrClientNotActivated,`${this.key} is not active`);const e=this.attachmentMap.get(t.getKey());if(!e)throw new T(S.ErrNotAttached,`${t.getKey()} is not attached`);t.setActor(this.id);const r=gt.toChangePack(t.createChangePack());return r.isRemoved=!0,this.enqueueTask(async()=>{try{const i=await this.rpcClient.removeDocument({clientId:this.id,documentId:e.resourceID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),a=gt.fromChangePack(i.changePack);t.applyChangePack(a),this.detachInternal(t.getKey()),B.info(`[RD] c:"${this.getKey()}" removes d:"${t.getKey()}"`)}catch(i){throw B.error(`[RD] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(t){return this.conditions[t]}async createRevision(t,e,r){if(!this.isActive())throw new T(S.ErrClientNotActivated,`${this.key} is not active`);const i=this.attachmentMap.get(t.getKey());if(!i)throw new T(S.ErrNotAttached,`${t.getKey()} is not attached`);const a=async()=>{try{const s=await this.rpcClient.createRevision({clientId:this.id,documentId:i.resourceID,label:e,description:r||""},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}});if(!s.revision)throw new T(S.ErrInvalidArgument,"revision is not returned");return B.info(`[CR] c:"${this.getKey()}" creates revision d:"${t.getKey()}" l:"${e}"`),gt.toRevisionSummary(s.revision)}catch(s){throw B.error(`[CR] c:"${this.getKey()}" err :`,s),await this.handleConnectError(s),s}};return this.enqueueTask(a)}async listRevisions(t,e){if(!this.isActive())throw new T(S.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(t.getKey());if(!r)throw new T(S.ErrNotAttached,`${t.getKey()} is not attached`);const i=async()=>{try{const a=await this.rpcClient.listRevisions({projectId:"",documentId:r.resourceID,pageSize:(e==null?void 0:e.pageSize)||10,offset:(e==null?void 0:e.offset)||0,isForward:(e==null?void 0:e.isForward)??!1},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}});return B.info(`[LR] c:"${this.getKey()}" lists revisions d:"${t.getKey()}" count:${a.revisions.length}`),a.revisions.map(gt.toRevisionSummary)}catch(a){throw B.error(`[LR] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}};return this.enqueueTask(i)}async restoreRevision(t,e){if(!this.isActive())throw new T(S.ErrClientNotActivated,`${this.key} is not active`);if(!this.attachmentMap.get(t.getKey()))throw new T(S.ErrNotAttached,`${t.getKey()} is not attached`);const i=async()=>{try{await this.rpcClient.restoreRevision({clientId:this.id,revisionId:e},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),B.info(`[RR] c:"${this.getKey()}" restores revision d:"${t.getKey()}" r:"${e}"`)}catch(a){throw B.error(`[RR] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}};return this.enqueueTask(i)}async broadcast(t,e,r,i){if(!this.isActive())throw new T(S.ErrClientNotActivated,`${this.key} is not active`);const a=this.attachmentMap.get(t);if(!a)throw new T(S.ErrNotAttached,`${t} is not attached`);if(!kN(r))throw new T(S.ErrInvalidArgument,"payload is not serializable");const s=a.resource,o=(i==null?void 0:i.maxRetries)??Uf.maxRetries,u=Uf.maxBackoff;let c=0;const h=d=>Math.min(Uf.initialRetryInterval*2**d,u),g=async()=>this.enqueueTask(async()=>{try{await this.rpcClient.broadcast({clientId:this.id,channelKey:t,topic:e,payload:new TextEncoder().encode(JSON.stringify(r))},{headers:{"x-shard-key":`${this.apiKey}/${s.getFirstKeyPath()}`}}),B.info(`[BC] c:"${this.getKey()}" broadcasts p:"${t}" t:"${e}"`)}catch(d){if(B.error(`[BC] c:"${this.getKey()}" err:`,d),await this.handleConnectError(d))if(zf(d,S.ErrUnauthenticated)&&a.resource instanceof Ii&&a.resource.publish({type:ls.AuthError,reason:fo(d).reason||"unauthenticated",method:"Broadcast"}),c<o)c++,setTimeout(()=>g(),h(c-1)),B.info(`[BC] c:"${this.getKey()}" retry attempt ${c}/${o}`);else throw B.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),d}});return g()}runSyncLoop(){const t=async()=>{if(!this.isActive()){B.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}try{await this.enqueueTask(async()=>{const e=[];for(const[,r]of this.attachmentMap)r.needSync(this.channelHeartbeatInterval)&&(r.changeEventReceived!==void 0&&(r.changeEventReceived=!1),e.push(this.syncInternal(r,r.syncMode).catch(i=>{throw zf(i,S.ErrUnauthenticated)&&r.resource.publish([{type:Ut.AuthError,value:{reason:fo(i).reason,method:"PushPull"}}]),i})));await Promise.all(e),setTimeout(t,this.syncLoopDuration)})}catch(e){B.error(`[SL] c:"${this.getKey()}" sync failed:`,e),await this.handleConnectError(e)?setTimeout(t,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1}};B.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,t()}async runWatchLoop(t){const e=this.attachmentMap.get(t);if(!e)throw new T(S.ErrNotAttached,`${t} is not attached`);return this.conditions.WatchLoop=!0,e.runWatchLoop(r=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new T(S.ErrClientNotActivated,`${this.key} is not active`));if(!this.attachmentMap.has(t))return this.conditions.WatchLoop=!1,Promise.reject(new T(S.ErrNotAttached,`${t} is not attached`));const i=new AbortController;return e.resource instanceof Ji?this.createDocumentWatchStream(e,t,i,r):e.resource instanceof Ii?this.createChannelWatchStream(e,t,i,r):Promise.reject(new T(S.ErrClientNotActivated,`Unknown resource type for ${t}`))})}createDocumentWatchStream(t,e,r,i){const a=this.rpcClient.watchDocument({clientId:this.id,documentId:t.resourceID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:r.signal});return t.resource.publish([{type:Ut.ConnectionChanged,value:Uo.Connected}]),B.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),t.changeEventReceived!==void 0&&(t.changeEventReceived=!0),new Promise((s,o)=>{(async()=>{try{for await(const c of a)this.handleWatchDocumentResponse(t,c),c.body.case==="initialization"&&s([a,r]);t.resource.resetOnlineClients(),t.resource.publish([{type:Ut.Initialized,source:mt.Local,value:t.resource.getPresences()}]),t.resource.publish([{type:Ut.ConnectionChanged,value:Uo.Disconnected}]),B.debug(`[WD] c:"${this.getKey()}" unwatches (stream ended)`),i()}catch(c){t.resource.resetOnlineClients(),t.resource.publish([{type:Ut.Initialized,source:mt.Local,value:t.resource.getPresences()}]),t.resource.publish([{type:Ut.ConnectionChanged,value:Uo.Disconnected}]),B.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(c)?(zf(c,S.ErrUnauthenticated)&&t.resource.publish([{type:Ut.AuthError,value:{reason:fo(c).reason,method:"WatchDocument"}}]),i()):this.conditions.WatchLoop=!1,o(c)}})()})}createChannelWatchStream(t,e,r,i){const a=this.rpcClient.watchChannel({clientId:this.id,channelKey:e},{headers:{"x-shard-key":`${this.apiKey}/${t.resource.getFirstKeyPath()}`},signal:r.signal});return B.info(`[WP] c:"${this.getKey()}" watches p:"${e}"`),new Promise((s,o)=>{(async()=>{try{let c=!0;for await(const h of a)this.handleWatchChannelResponse(t,h),c&&(c=!1,s([a,r]));B.debug(`[WP] c:"${this.getKey()}" p:"${e}" stream ended`),i()}catch(c){if(c instanceof Error&&c.name==="AbortError"){B.debug(`[WP] c:"${this.getKey()}" p:"${e}" stream aborted`);return}B.debug(`[WP] c:"${this.getKey()}" p:"${e}" err:`,c),await this.handleConnectError(c)?i():this.conditions.WatchLoop=!1,o(c)}})()})}handleWatchChannelResponse(t,e){const r=t.resource;if(e.body.case==="initialized"){const{count:i,seq:a}=e.body.value;r.updateCount(Number(i),Number(a))&&r.publish({type:ls.Initialized,count:Number(i)})}else if(e.body.case==="event"){const i=e.body.value;if(i.type===Kc.BROADCAST){const a=new TextDecoder;try{const s=JSON.parse(a.decode(i.payload));r.publish({type:ls.Broadcast,clientID:i.publisher,topic:i.topic,payload:s})}catch(s){B.error(`[WP] c:"${this.getKey()}" failed to parse broadcast payload:`,s)}return}r.updateCount(Number(i.count),Number(i.seq))&&r.publish({type:ls.PresenceChanged,count:Number(i.count)})}}handleWatchDocumentResponse(t,e){if(e.body.case==="event"&&e.body.value.type===Rs.DOCUMENT_CHANGED){t.changeEventReceived!==void 0&&(t.changeEventReceived=!0);return}t.resource.applyWatchStream(e)}deactivateInternal(){this.status="deactivated";for(const[t,e]of this.attachmentMap)this.detachInternal(t),e.resource instanceof Ji?e.resource.applyStatus(Ci.Detached):e.resource instanceof Ii&&e.resource.applyStatus(ho.Detached)}detachInternal(t){const e=this.attachmentMap.get(t);e&&(e.cancelWatchStream(),e.resource instanceof Ji&&e.resource.resetOnlineClients(),this.attachmentMap.delete(t))}async syncInternal(t,e){const{resource:r}=t;if(r instanceof Ii){try{const o=await this.rpcClient.refreshChannel({clientId:this.id,channelKey:r.getKey(),sessionId:r.getSessionID()},{headers:{"x-shard-key":`${this.apiKey}/${r.getFirstKeyPath()}`}});r.updateCount(Number(o.count),0),t.updateHeartbeatTime(),B.debug(`[RP] c:"${this.getKey()}" refreshes p:"${r.getKey()}" mode:${t.syncMode}`)}catch(o){throw B.error(`[RP] c:"${this.getKey()}" err :`,o),o}return r}const i=r,{resourceID:a}=t,s=i.createChangePack();try{const o=await this.rpcClient.pushPullChanges({clientId:this.id,documentId:a,changePack:gt.toChangePack(s),pushOnly:e==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${i.getKey()}`}}),u=gt.fromChangePack(o.changePack);if(u.hasChanges()&&(t.syncMode==="realtime-pushonly"||t.syncMode==="realtime-syncoff"))return i;i.applyChangePack(u),t.resource.publish([{type:Ut.SyncStatusChanged,value:Ed.Synced}]),i.getStatus()===Ci.Removed&&this.detachInternal(i.getKey());const c=i.getKey(),h=u.getChangeSize();return B.info(`[PP] c:"${this.getKey()}" sync d:"${c}", push:${s.getChangeSize()} pull:${h} cp:${u.getCheckpoint().toTestString()}`),i}catch(o){throw i.publish([{type:Ut.SyncStatusChanged,value:Ed.SyncFailed}]),B.error(`[PP] c:"${this.getKey()}" err :`,o),o}}async handleConnectError(t){if(!(t instanceof ot))return!1;if(t.code===X.Canceled||t.code===X.Unknown||t.code===X.ResourceExhausted||t.code===X.Unavailable)return!0;if(Ya(t)===S.ErrUnauthenticated){if(this.authTokenInjector){const e=await this.authTokenInjector(fo(t).reason);this.setAuthToken(e)}return!0}return Ya(t)===S.ErrTooManySubscribers?(B.error(`[WD] c:"${this.getKey()}" err :`,t.rawMessage),!0):(Ya(t)===S.ErrTooManyAttachments||(Ya(t)===S.ErrClientNotActivated||Ya(t)===S.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(t){return new Promise((e,r)=>{this.taskQueue.push(()=>t().then(e).catch(r)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{B.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}Dn.Int,Dn.Long;typeof globalThis<"u"&&(globalThis.yorkie={Client:bT,Document:Ji,Primitive:St,Text:qm,Counter:Pm,Tree:Hm,Channel:Ii,ChannelEventType:ls,LogLevel:ae,setLogLevel:aN,IntType:Dn.Int,LongType:Dn.Long});const ON="@yorkie-js/react",CN="0.6.39",dp={name:ON,version:CN};ut.createContext({client:void 0,loading:!0,error:void 0});function IN(n){const[t,e]=ut.useState(void 0),[r,i]=ut.useState(!0),[a,s]=ut.useState(void 0),[o,u]=ut.useState(!1);return ut.useEffect(()=>{u(!0)},[]),ut.useEffect(()=>{i(!0),s(void 0);async function c(){if(o)try{const h=new bT(n);await h.activate(),e(h)}catch(h){s(h instanceof Error?h:new Error("Failed to activate client"))}finally{i(!1)}}return c(),()=>{t!=null&&t.isActive()&&t.deactivate({keepalive:!0})}},[n.apiKey,n.rpcAddr,o]),{client:t,loading:r,error:a}}function BN(n){const t=new Set;let e=n;const r=()=>{t.forEach(u=>u(e))};return{subscribe:u=>(t.add(u),()=>t.delete(u)),getSnapshot:()=>e,setState:u=>{const c=e;e=typeof u=="function"?u(c):u,c!==e&&r()},destroy:()=>{t.clear()}}}const RN=n=>BN(n);function zN(n,t,e=Object.is){const r=ut.useRef(t),i=ut.useRef(e),a=ut.useRef(void 0);r.current=t,i.current=e;const s=()=>{const o=n.getSnapshot(),u=r.current?r.current(o):o;return a.current!==void 0&&i.current(a.current,u)?a.current:(a.current=u,u)};return ut.useSyncExternalStore(n.subscribe,s,s)}function MN(n,t,e,r,i,a,s,o){const u=ut.useRef(i),c=ut.useRef(a),[h,g]=ut.useState(!1);ut.useEffect(()=>{g(!0)},[]),ut.useEffect(()=>{if(e){o.setState(b=>({...b,loading:!1,error:e}));return}if(!n||t||!h){o.setState(b=>({...b,loading:!0}));return}o.setState(b=>({...b,loading:!0,error:void 0}));const d=new Ji(r,{enableDevtools:s}),m=[];m.push(d.subscribe(()=>{o.setState(b=>({...b,root:d.getRoot()}))})),m.push(d.subscribe("presence",()=>{o.setState(b=>({...b,presences:d.getPresences()}))})),m.push(d.subscribe("connection",b=>{o.setState(x=>({...x,connection:b.value}))}));async function A(){try{await(n==null?void 0:n.attach(d,{initialRoot:u.current,initialPresence:c.current}));const b=x=>{try{d.update(x)}catch(p){o.setState(y=>({...y,error:p instanceof Error?p:new Error("Failed to update document")}))}};o.setState(x=>({...x,doc:d,root:d.getRoot(),presences:d.getPresences(),update:b}))}catch(b){o.setState(x=>({...x,error:b instanceof Error?b:new Error("Failed to attach document")}))}finally{o.setState(b=>({...b,loading:!1}))}}return A(),()=>{n&&n.has(r)&&n.detach(d);for(const b of m)b()}},[n,t,e,r,o,h])}ut.createContext(void 0);function UN(n,t,e){const r=ut.useRef(void 0);r.current||(r.current=RN({doc:void 0,root:(e==null?void 0:e.initialRoot)??{},presences:[],connection:Uo.Disconnected,update:()=>{},loading:!0,error:void 0}));const i=r.current,a=ut.useMemo(()=>({apiKey:n,userAgent:dp.name+"/"+dp.version,...e}),[n,e]),{client:s,loading:o,error:u}=IN(a);MN(s,o,u,t,(e==null?void 0:e.initialRoot)??{},(e==null?void 0:e.initialPresence)??{},(e==null?void 0:e.enableDevtools)??!1,i);const c=zN(i);return{root:c.root,presences:c.presences,connection:c.connection,update:c.update,loading:c.loading,error:c.error}}ut.createContext(void 0);function LN(n){const e=new URLSearchParams(window.location.search).get("key")||`react-todomvc-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`,{root:r,update:i,loading:a,error:s}=UN("D6sd9E5ehtXBssmeRZ4QQP",e,{initialRoot:n,rpcAddr:"https://api.yorkie.dev",enableDevtools:!0}),o=ut.useCallback(u=>{i(c=>{kA(c,u)})},[i]);return{root:r,dispatch:o,loading:a,error:s}}const JN={todos:[{id:crypto.randomUUID(),text:"Yorkie JS SDK",completed:!1},{id:crypto.randomUUID(),text:"Garbage collection",completed:!1},{id:crypto.randomUUID(),text:"RichText datatype",completed:!1}]};function qN(){const{root:n,dispatch:t,loading:e,error:r}=LN(JN);return e?W.jsx("div",{children:"Loading..."}):r?W.jsxs("div",{children:["Error: ",r.message]}):W.jsxs("div",{className:"App",children:[W.jsx(wA,{dispatch:t}),W.jsx(DA,{todos:n.todos,dispatch:t})]})}bA.createRoot(document.getElementById("root")).render(W.jsx(ut.StrictMode,{children:W.jsx(qN,{})}));
