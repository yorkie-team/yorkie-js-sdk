var Dy=Object.defineProperty;var Oy=(t,e,n)=>e in t?Dy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var u=(t,e,n)=>Oy(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Ry(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rg={exports:{}},ml={},ig={exports:{}},q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ko=Symbol.for("react.element"),Ly=Symbol.for("react.portal"),By=Symbol.for("react.fragment"),by=Symbol.for("react.strict_mode"),Fy=Symbol.for("react.profiler"),My=Symbol.for("react.provider"),Jy=Symbol.for("react.context"),$y=Symbol.for("react.forward_ref"),zy=Symbol.for("react.suspense"),Uy=Symbol.for("react.memo"),jy=Symbol.for("react.lazy"),rd=Symbol.iterator;function qy(t){return t===null||typeof t!="object"?null:(t=rd&&t[rd]||t["@@iterator"],typeof t=="function"?t:null)}var sg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},og=Object.assign,ag={};function gs(t,e,n){this.props=t,this.context=e,this.refs=ag,this.updater=n||sg}gs.prototype.isReactComponent={};gs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lg(){}lg.prototype=gs.prototype;function Vc(t,e,n){this.props=t,this.context=e,this.refs=ag,this.updater=n||sg}var Kc=Vc.prototype=new lg;Kc.constructor=Vc;og(Kc,gs.prototype);Kc.isPureReactComponent=!0;var id=Array.isArray,ug=Object.prototype.hasOwnProperty,Wc={current:null},cg={key:!0,ref:!0,__self:!0,__source:!0};function fg(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ug.call(e,r)&&!cg.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ko,type:t,key:s,ref:o,props:i,_owner:Wc.current}}function Vy(t,e){return{$$typeof:ko,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Hc(t){return typeof t=="object"&&t!==null&&t.$$typeof===ko}function Ky(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sd=/\/+/g;function Ul(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ky(""+t.key):e.toString(36)}function na(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ko:case Ly:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ul(o,0):r,id(i)?(n="",t!=null&&(n=t.replace(sd,"$&/")+"/"),na(i,e,n,"",function(c){return c})):i!=null&&(Hc(i)&&(i=Vy(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(sd,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",id(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Ul(s,a);o+=na(s,e,n,l,i)}else if(l=qy(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Ul(s,a++),o+=na(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Lo(t,e,n){if(t==null)return t;var r=[],i=0;return na(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Wy(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Me={current:null},ra={transition:null},Hy={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:ra,ReactCurrentOwner:Wc};q.Children={map:Lo,forEach:function(t,e,n){Lo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Lo(t,function(){e++}),e},toArray:function(t){return Lo(t,function(e){return e})||[]},only:function(t){if(!Hc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};q.Component=gs;q.Fragment=By;q.Profiler=Fy;q.PureComponent=Vc;q.StrictMode=by;q.Suspense=zy;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hy;q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=og({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Wc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ug.call(e,l)&&!cg.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ko,type:t.type,key:i,ref:s,props:r,_owner:o}};q.createContext=function(t){return t={$$typeof:Jy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:My,_context:t},t.Consumer=t};q.createElement=fg;q.createFactory=function(t){var e=fg.bind(null,t);return e.type=t,e};q.createRef=function(){return{current:null}};q.forwardRef=function(t){return{$$typeof:$y,render:t}};q.isValidElement=Hc;q.lazy=function(t){return{$$typeof:jy,_payload:{_status:-1,_result:t},_init:Wy}};q.memo=function(t,e){return{$$typeof:Uy,type:t,compare:e===void 0?null:e}};q.startTransition=function(t){var e=ra.transition;ra.transition={};try{t()}finally{ra.transition=e}};q.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};q.useCallback=function(t,e){return Me.current.useCallback(t,e)};q.useContext=function(t){return Me.current.useContext(t)};q.useDebugValue=function(){};q.useDeferredValue=function(t){return Me.current.useDeferredValue(t)};q.useEffect=function(t,e){return Me.current.useEffect(t,e)};q.useId=function(){return Me.current.useId()};q.useImperativeHandle=function(t,e,n){return Me.current.useImperativeHandle(t,e,n)};q.useInsertionEffect=function(t,e){return Me.current.useInsertionEffect(t,e)};q.useLayoutEffect=function(t,e){return Me.current.useLayoutEffect(t,e)};q.useMemo=function(t,e){return Me.current.useMemo(t,e)};q.useReducer=function(t,e,n){return Me.current.useReducer(t,e,n)};q.useRef=function(t){return Me.current.useRef(t)};q.useState=function(t){return Me.current.useState(t)};q.useSyncExternalStore=function(t,e,n){return Me.current.useSyncExternalStore(t,e,n)};q.useTransition=function(){return Me.current.useTransition()};q.version="18.2.0";ig.exports=q;var br=ig.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _y=br,Gy=Symbol.for("react.element"),Yy=Symbol.for("react.fragment"),Qy=Object.prototype.hasOwnProperty,Xy=_y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zy={key:!0,ref:!0,__self:!0,__source:!0};function dg(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Qy.call(e,r)&&!Zy.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Gy,type:t,key:s,ref:o,props:i,_owner:Xy.current}}ml.Fragment=Yy;ml.jsx=dg;ml.jsxs=dg;rg.exports=ml;var Q=rg.exports,Tu={},hg={exports:{}},it={},gg={exports:{}},mg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,z){var j=L.length;L.push(z);e:for(;0<j;){var ce=j-1>>>1,Se=L[ce];if(0<i(Se,z))L[ce]=z,L[j]=Se,j=ce;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var z=L[0],j=L.pop();if(j!==z){L[0]=j;e:for(var ce=0,Se=L.length,Oo=Se>>>1;ce<Oo;){var ti=2*(ce+1)-1,zl=L[ti],ni=ti+1,Ro=L[ni];if(0>i(zl,j))ni<Se&&0>i(Ro,zl)?(L[ce]=Ro,L[ni]=j,ce=ni):(L[ce]=zl,L[ti]=j,ce=ti);else if(ni<Se&&0>i(Ro,j))L[ce]=Ro,L[ni]=j,ce=ni;else break e}}return z}function i(L,z){var j=L.sortIndex-z.sortIndex;return j!==0?j:L.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,m=!1,w=!1,I=!1,O=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(L){for(var z=n(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=L)r(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(c)}}function T(L){if(I=!1,v(L),!w)if(n(l)!==null)w=!0,Jl(x);else{var z=n(c);z!==null&&$l(T,z.startTime-L)}}function x(L,z){w=!1,I&&(I=!1,y(B),B=-1),m=!0;var j=p;try{for(v(z),h=n(l);h!==null&&(!(h.expirationTime>z)||L&&!_e());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,p=h.priorityLevel;var Se=ce(h.expirationTime<=z);z=t.unstable_now(),typeof Se=="function"?h.callback=Se:h===n(l)&&r(l),v(z)}else r(l);h=n(l)}if(h!==null)var Oo=!0;else{var ti=n(c);ti!==null&&$l(T,ti.startTime-z),Oo=!1}return Oo}finally{h=null,p=j,m=!1}}var N=!1,P=null,B=-1,H=5,U=-1;function _e(){return!(t.unstable_now()-U<H)}function ys(){if(P!==null){var L=t.unstable_now();U=L;var z=!0;try{z=P(!0,L)}finally{z?vs():(N=!1,P=null)}}else N=!1}var vs;if(typeof g=="function")vs=function(){g(ys)};else if(typeof MessageChannel<"u"){var nd=new MessageChannel,Py=nd.port2;nd.port1.onmessage=ys,vs=function(){Py.postMessage(null)}}else vs=function(){O(ys,0)};function Jl(L){P=L,N||(N=!0,vs())}function $l(L,z){B=O(function(){L(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){w||m||(w=!0,Jl(x))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(L){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var j=p;p=z;try{return L()}finally{p=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,z){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var j=p;p=L;try{return z()}finally{p=j}},t.unstable_scheduleCallback=function(L,z,j){var ce=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?ce+j:ce):j=ce,L){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=j+Se,L={id:d++,callback:z,priorityLevel:L,startTime:j,expirationTime:Se,sortIndex:-1},j>ce?(L.sortIndex=j,e(c,L),n(l)===null&&L===n(c)&&(I?(y(B),B=-1):I=!0,$l(T,j-ce))):(L.sortIndex=Se,e(l,L),w||m||(w=!0,Jl(x))),L},t.unstable_shouldYield=_e,t.unstable_wrapCallback=function(L){var z=p;return function(){var j=p;p=z;try{return L.apply(this,arguments)}finally{p=j}}}})(mg);gg.exports=mg;var ev=gg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pg=br,rt=ev;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yg=new Set,Hs={};function Ii(t,e){Zi(t,e),Zi(t+"Capture",e)}function Zi(t,e){for(Hs[t]=e,t=0;t<e.length;t++)yg.add(e[t])}var mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Au=Object.prototype.hasOwnProperty,tv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,od={},ad={};function nv(t){return Au.call(ad,t)?!0:Au.call(od,t)?!1:tv.test(t)?ad[t]=!0:(od[t]=!0,!1)}function rv(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iv(t,e,n,r){if(e===null||typeof e>"u"||rv(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Je(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xe[t]=new Je(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xe[e]=new Je(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xe[t]=new Je(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xe[t]=new Je(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xe[t]=new Je(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xe[t]=new Je(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xe[t]=new Je(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xe[t]=new Je(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xe[t]=new Je(t,5,!1,t.toLowerCase(),null,!1,!1)});var _c=/[\-:]([a-z])/g;function Gc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_c,Gc);xe[e]=new Je(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_c,Gc);xe[e]=new Je(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_c,Gc);xe[e]=new Je(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xe[t]=new Je(t,1,!1,t.toLowerCase(),null,!1,!1)});xe.xlinkHref=new Je("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xe[t]=new Je(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yc(t,e,n,r){var i=xe.hasOwnProperty(e)?xe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iv(e,n,i,r)&&(n=null),r||i===null?nv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var kr=pg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bo=Symbol.for("react.element"),Oi=Symbol.for("react.portal"),Ri=Symbol.for("react.fragment"),Qc=Symbol.for("react.strict_mode"),Iu=Symbol.for("react.profiler"),vg=Symbol.for("react.provider"),wg=Symbol.for("react.context"),Xc=Symbol.for("react.forward_ref"),Eu=Symbol.for("react.suspense"),xu=Symbol.for("react.suspense_list"),Zc=Symbol.for("react.memo"),Cr=Symbol.for("react.lazy"),Sg=Symbol.for("react.offscreen"),ld=Symbol.iterator;function ws(t){return t===null||typeof t!="object"?null:(t=ld&&t[ld]||t["@@iterator"],typeof t=="function"?t:null)}var oe=Object.assign,jl;function Ps(t){if(jl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jl=e&&e[1]||""}return`
`+jl+t}var ql=!1;function Vl(t,e){if(!t||ql)return"";ql=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ql=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ps(t):""}function sv(t){switch(t.tag){case 5:return Ps(t.type);case 16:return Ps("Lazy");case 13:return Ps("Suspense");case 19:return Ps("SuspenseList");case 0:case 2:case 15:return t=Vl(t.type,!1),t;case 11:return t=Vl(t.type.render,!1),t;case 1:return t=Vl(t.type,!0),t;default:return""}}function Cu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ri:return"Fragment";case Oi:return"Portal";case Iu:return"Profiler";case Qc:return"StrictMode";case Eu:return"Suspense";case xu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wg:return(t.displayName||"Context")+".Consumer";case vg:return(t._context.displayName||"Context")+".Provider";case Xc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zc:return e=t.displayName||null,e!==null?e:Cu(t.type)||"Memo";case Cr:e=t._payload,t=t._init;try{return Cu(t(e))}catch{}}return null}function ov(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cu(e);case 8:return e===Qc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function av(t){var e=kg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bo(t){t._valueTracker||(t._valueTracker=av(t))}function Tg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ka(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nu(t,e){var n=e.checked;return oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ud(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ag(t,e){e=e.checked,e!=null&&Yc(t,"checked",e,!1)}function Pu(t,e){Ag(t,e);var n=Hr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Du(t,e.type,n):e.hasOwnProperty("defaultValue")&&Du(t,e.type,Hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Du(t,e,n){(e!=="number"||ka(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ds=Array.isArray;function Ki(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ou(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(E(92));if(Ds(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hr(n)}}function Ig(t,e){var n=Hr(e.value),r=Hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Eg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ru(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Eg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fo,xg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fo=Fo||document.createElement("div"),Fo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _s(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ls={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lv=["Webkit","ms","Moz","O"];Object.keys(Ls).forEach(function(t){lv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ls[e]=Ls[t]})});function Cg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ls.hasOwnProperty(t)&&Ls[t]?(""+e).trim():e+"px"}function Ng(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Cg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var uv=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lu(t,e){if(e){if(uv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function Bu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bu=null;function ef(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fu=null,Wi=null,Hi=null;function hd(t){if(t=Io(t)){if(typeof Fu!="function")throw Error(E(280));var e=t.stateNode;e&&(e=Sl(e),Fu(t.stateNode,t.type,e))}}function Pg(t){Wi?Hi?Hi.push(t):Hi=[t]:Wi=t}function Dg(){if(Wi){var t=Wi,e=Hi;if(Hi=Wi=null,hd(t),e)for(t=0;t<e.length;t++)hd(e[t])}}function Og(t,e){return t(e)}function Rg(){}var Kl=!1;function Lg(t,e,n){if(Kl)return t(e,n);Kl=!0;try{return Og(t,e,n)}finally{Kl=!1,(Wi!==null||Hi!==null)&&(Rg(),Dg())}}function Gs(t,e){var n=t.stateNode;if(n===null)return null;var r=Sl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(E(231,e,typeof n));return n}var Mu=!1;if(mr)try{var Ss={};Object.defineProperty(Ss,"passive",{get:function(){Mu=!0}}),window.addEventListener("test",Ss,Ss),window.removeEventListener("test",Ss,Ss)}catch{Mu=!1}function cv(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Bs=!1,Ta=null,Aa=!1,Ju=null,fv={onError:function(t){Bs=!0,Ta=t}};function dv(t,e,n,r,i,s,o,a,l){Bs=!1,Ta=null,cv.apply(fv,arguments)}function hv(t,e,n,r,i,s,o,a,l){if(dv.apply(this,arguments),Bs){if(Bs){var c=Ta;Bs=!1,Ta=null}else throw Error(E(198));Aa||(Aa=!0,Ju=c)}}function Ei(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Bg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gd(t){if(Ei(t)!==t)throw Error(E(188))}function gv(t){var e=t.alternate;if(!e){if(e=Ei(t),e===null)throw Error(E(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return gd(i),t;if(s===r)return gd(i),e;s=s.sibling}throw Error(E(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?t:e}function bg(t){return t=gv(t),t!==null?Fg(t):null}function Fg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Fg(t);if(e!==null)return e;t=t.sibling}return null}var Mg=rt.unstable_scheduleCallback,md=rt.unstable_cancelCallback,mv=rt.unstable_shouldYield,pv=rt.unstable_requestPaint,fe=rt.unstable_now,yv=rt.unstable_getCurrentPriorityLevel,tf=rt.unstable_ImmediatePriority,Jg=rt.unstable_UserBlockingPriority,Ia=rt.unstable_NormalPriority,vv=rt.unstable_LowPriority,$g=rt.unstable_IdlePriority,pl=null,en=null;function wv(t){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(pl,t,void 0,(t.current.flags&128)===128)}catch{}}var Rt=Math.clz32?Math.clz32:Tv,Sv=Math.log,kv=Math.LN2;function Tv(t){return t>>>=0,t===0?32:31-(Sv(t)/kv|0)|0}var Mo=64,Jo=4194304;function Os(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ea(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Os(a):(s&=o,s!==0&&(r=Os(s)))}else o=n&~i,o!==0?r=Os(o):s!==0&&(r=Os(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Rt(e),i=1<<n,r|=t[n],e&=~i;return r}function Av(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Iv(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Rt(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=Av(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function $u(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zg(){var t=Mo;return Mo<<=1,!(Mo&4194240)&&(Mo=64),t}function Wl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function To(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Rt(e),t[e]=n}function Ev(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Rt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function nf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Rt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var G=0;function Ug(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jg,rf,qg,Vg,Kg,zu=!1,$o=[],Fr=null,Mr=null,Jr=null,Ys=new Map,Qs=new Map,Pr=[],xv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pd(t,e){switch(t){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":Ys.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qs.delete(e.pointerId)}}function ks(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Io(e),e!==null&&rf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Cv(t,e,n,r,i){switch(e){case"focusin":return Fr=ks(Fr,t,e,n,r,i),!0;case"dragenter":return Mr=ks(Mr,t,e,n,r,i),!0;case"mouseover":return Jr=ks(Jr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ys.set(s,ks(Ys.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Qs.set(s,ks(Qs.get(s)||null,t,e,n,r,i)),!0}return!1}function Wg(t){var e=ai(t.target);if(e!==null){var n=Ei(e);if(n!==null){if(e=n.tag,e===13){if(e=Bg(n),e!==null){t.blockedOn=e,Kg(t.priority,function(){qg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ia(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Uu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);bu=r,n.target.dispatchEvent(r),bu=null}else return e=Io(n),e!==null&&rf(e),t.blockedOn=n,!1;e.shift()}return!0}function yd(t,e,n){ia(t)&&n.delete(e)}function Nv(){zu=!1,Fr!==null&&ia(Fr)&&(Fr=null),Mr!==null&&ia(Mr)&&(Mr=null),Jr!==null&&ia(Jr)&&(Jr=null),Ys.forEach(yd),Qs.forEach(yd)}function Ts(t,e){t.blockedOn===e&&(t.blockedOn=null,zu||(zu=!0,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,Nv)))}function Xs(t){function e(i){return Ts(i,t)}if(0<$o.length){Ts($o[0],t);for(var n=1;n<$o.length;n++){var r=$o[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Fr!==null&&Ts(Fr,t),Mr!==null&&Ts(Mr,t),Jr!==null&&Ts(Jr,t),Ys.forEach(e),Qs.forEach(e),n=0;n<Pr.length;n++)r=Pr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Pr.length&&(n=Pr[0],n.blockedOn===null);)Wg(n),n.blockedOn===null&&Pr.shift()}var _i=kr.ReactCurrentBatchConfig,xa=!0;function Pv(t,e,n,r){var i=G,s=_i.transition;_i.transition=null;try{G=1,sf(t,e,n,r)}finally{G=i,_i.transition=s}}function Dv(t,e,n,r){var i=G,s=_i.transition;_i.transition=null;try{G=4,sf(t,e,n,r)}finally{G=i,_i.transition=s}}function sf(t,e,n,r){if(xa){var i=Uu(t,e,n,r);if(i===null)nu(t,e,r,Ca,n),pd(t,r);else if(Cv(i,t,e,n,r))r.stopPropagation();else if(pd(t,r),e&4&&-1<xv.indexOf(t)){for(;i!==null;){var s=Io(i);if(s!==null&&jg(s),s=Uu(t,e,n,r),s===null&&nu(t,e,r,Ca,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else nu(t,e,r,null,n)}}var Ca=null;function Uu(t,e,n,r){if(Ca=null,t=ef(r),t=ai(t),t!==null)if(e=Ei(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Bg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ca=t,null}function Hg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yv()){case tf:return 1;case Jg:return 4;case Ia:case vv:return 16;case $g:return 536870912;default:return 16}default:return 16}}var Rr=null,of=null,sa=null;function _g(){if(sa)return sa;var t,e=of,n=e.length,r,i="value"in Rr?Rr.value:Rr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return sa=i.slice(t,1<r?1-r:void 0)}function oa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zo(){return!0}function vd(){return!1}function st(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zo:vd,this.isPropagationStopped=vd,this}return oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zo)},persist:function(){},isPersistent:zo}),e}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},af=st(ms),Ao=oe({},ms,{view:0,detail:0}),Ov=st(Ao),Hl,_l,As,yl=oe({},Ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==As&&(As&&t.type==="mousemove"?(Hl=t.screenX-As.screenX,_l=t.screenY-As.screenY):_l=Hl=0,As=t),Hl)},movementY:function(t){return"movementY"in t?t.movementY:_l}}),wd=st(yl),Rv=oe({},yl,{dataTransfer:0}),Lv=st(Rv),Bv=oe({},Ao,{relatedTarget:0}),Gl=st(Bv),bv=oe({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),Fv=st(bv),Mv=oe({},ms,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Jv=st(Mv),$v=oe({},ms,{data:0}),Sd=st($v),zv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jv[t])?!!e[t]:!1}function lf(){return qv}var Vv=oe({},Ao,{key:function(t){if(t.key){var e=zv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=oa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lf,charCode:function(t){return t.type==="keypress"?oa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?oa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Kv=st(Vv),Wv=oe({},yl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kd=st(Wv),Hv=oe({},Ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lf}),_v=st(Hv),Gv=oe({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yv=st(Gv),Qv=oe({},yl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Xv=st(Qv),Zv=[9,13,27,32],uf=mr&&"CompositionEvent"in window,bs=null;mr&&"documentMode"in document&&(bs=document.documentMode);var e0=mr&&"TextEvent"in window&&!bs,Gg=mr&&(!uf||bs&&8<bs&&11>=bs),Td=" ",Ad=!1;function Yg(t,e){switch(t){case"keyup":return Zv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Li=!1;function t0(t,e){switch(t){case"compositionend":return Qg(e);case"keypress":return e.which!==32?null:(Ad=!0,Td);case"textInput":return t=e.data,t===Td&&Ad?null:t;default:return null}}function n0(t,e){if(Li)return t==="compositionend"||!uf&&Yg(t,e)?(t=_g(),sa=of=Rr=null,Li=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gg&&e.locale!=="ko"?null:e.data;default:return null}}var r0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Id(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!r0[t.type]:e==="textarea"}function Xg(t,e,n,r){Pg(r),e=Na(e,"onChange"),0<e.length&&(n=new af("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fs=null,Zs=null;function i0(t){um(t,0)}function vl(t){var e=Fi(t);if(Tg(e))return t}function s0(t,e){if(t==="change")return e}var Zg=!1;if(mr){var Yl;if(mr){var Ql="oninput"in document;if(!Ql){var Ed=document.createElement("div");Ed.setAttribute("oninput","return;"),Ql=typeof Ed.oninput=="function"}Yl=Ql}else Yl=!1;Zg=Yl&&(!document.documentMode||9<document.documentMode)}function xd(){Fs&&(Fs.detachEvent("onpropertychange",em),Zs=Fs=null)}function em(t){if(t.propertyName==="value"&&vl(Zs)){var e=[];Xg(e,Zs,t,ef(t)),Lg(i0,e)}}function o0(t,e,n){t==="focusin"?(xd(),Fs=e,Zs=n,Fs.attachEvent("onpropertychange",em)):t==="focusout"&&xd()}function a0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vl(Zs)}function l0(t,e){if(t==="click")return vl(e)}function u0(t,e){if(t==="input"||t==="change")return vl(e)}function c0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ft=typeof Object.is=="function"?Object.is:c0;function eo(t,e){if(Ft(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Au.call(e,i)||!Ft(t[i],e[i]))return!1}return!0}function Cd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Nd(t,e){var n=Cd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cd(n)}}function tm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nm(){for(var t=window,e=ka();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ka(t.document)}return e}function cf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function f0(t){var e=nm(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&tm(n.ownerDocument.documentElement,n)){if(r!==null&&cf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Nd(n,s);var o=Nd(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var d0=mr&&"documentMode"in document&&11>=document.documentMode,Bi=null,ju=null,Ms=null,qu=!1;function Pd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qu||Bi==null||Bi!==ka(r)||(r=Bi,"selectionStart"in r&&cf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ms&&eo(Ms,r)||(Ms=r,r=Na(ju,"onSelect"),0<r.length&&(e=new af("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Bi)))}function Uo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bi={animationend:Uo("Animation","AnimationEnd"),animationiteration:Uo("Animation","AnimationIteration"),animationstart:Uo("Animation","AnimationStart"),transitionend:Uo("Transition","TransitionEnd")},Xl={},rm={};mr&&(rm=document.createElement("div").style,"AnimationEvent"in window||(delete bi.animationend.animation,delete bi.animationiteration.animation,delete bi.animationstart.animation),"TransitionEvent"in window||delete bi.transitionend.transition);function wl(t){if(Xl[t])return Xl[t];if(!bi[t])return t;var e=bi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rm)return Xl[t]=e[n];return t}var im=wl("animationend"),sm=wl("animationiteration"),om=wl("animationstart"),am=wl("transitionend"),lm=new Map,Dd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xr(t,e){lm.set(t,e),Ii(e,[t])}for(var Zl=0;Zl<Dd.length;Zl++){var eu=Dd[Zl],h0=eu.toLowerCase(),g0=eu[0].toUpperCase()+eu.slice(1);Xr(h0,"on"+g0)}Xr(im,"onAnimationEnd");Xr(sm,"onAnimationIteration");Xr(om,"onAnimationStart");Xr("dblclick","onDoubleClick");Xr("focusin","onFocus");Xr("focusout","onBlur");Xr(am,"onTransitionEnd");Zi("onMouseEnter",["mouseout","mouseover"]);Zi("onMouseLeave",["mouseout","mouseover"]);Zi("onPointerEnter",["pointerout","pointerover"]);Zi("onPointerLeave",["pointerout","pointerover"]);Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rs));function Od(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,hv(r,e,void 0,t),t.currentTarget=null}function um(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Od(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Od(i,a,c),s=l}}}if(Aa)throw t=Ju,Aa=!1,Ju=null,t}function Z(t,e){var n=e[_u];n===void 0&&(n=e[_u]=new Set);var r=t+"__bubble";n.has(r)||(cm(e,t,2,!1),n.add(r))}function tu(t,e,n){var r=0;e&&(r|=4),cm(n,t,r,e)}var jo="_reactListening"+Math.random().toString(36).slice(2);function to(t){if(!t[jo]){t[jo]=!0,yg.forEach(function(n){n!=="selectionchange"&&(m0.has(n)||tu(n,!1,t),tu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jo]||(e[jo]=!0,tu("selectionchange",!1,e))}}function cm(t,e,n,r){switch(Hg(e)){case 1:var i=Pv;break;case 4:i=Dv;break;default:i=sf}n=i.bind(null,e,n,t),i=void 0,!Mu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function nu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ai(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Lg(function(){var c=s,d=ef(n),h=[];e:{var p=lm.get(t);if(p!==void 0){var m=af,w=t;switch(t){case"keypress":if(oa(n)===0)break e;case"keydown":case"keyup":m=Kv;break;case"focusin":w="focus",m=Gl;break;case"focusout":w="blur",m=Gl;break;case"beforeblur":case"afterblur":m=Gl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=wd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Lv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=_v;break;case im:case sm:case om:m=Fv;break;case am:m=Yv;break;case"scroll":m=Ov;break;case"wheel":m=Xv;break;case"copy":case"cut":case"paste":m=Jv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=kd}var I=(e&4)!==0,O=!I&&t==="scroll",y=I?p!==null?p+"Capture":null:p;I=[];for(var g=c,v;g!==null;){v=g;var T=v.stateNode;if(v.tag===5&&T!==null&&(v=T,y!==null&&(T=Gs(g,y),T!=null&&I.push(no(g,T,v)))),O)break;g=g.return}0<I.length&&(p=new m(p,w,null,n,d),h.push({event:p,listeners:I}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==bu&&(w=n.relatedTarget||n.fromElement)&&(ai(w)||w[pr]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(w=n.relatedTarget||n.toElement,m=c,w=w?ai(w):null,w!==null&&(O=Ei(w),w!==O||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=c),m!==w)){if(I=wd,T="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(I=kd,T="onPointerLeave",y="onPointerEnter",g="pointer"),O=m==null?p:Fi(m),v=w==null?p:Fi(w),p=new I(T,g+"leave",m,n,d),p.target=O,p.relatedTarget=v,T=null,ai(d)===c&&(I=new I(y,g+"enter",w,n,d),I.target=v,I.relatedTarget=O,T=I),O=T,m&&w)t:{for(I=m,y=w,g=0,v=I;v;v=Ci(v))g++;for(v=0,T=y;T;T=Ci(T))v++;for(;0<g-v;)I=Ci(I),g--;for(;0<v-g;)y=Ci(y),v--;for(;g--;){if(I===y||y!==null&&I===y.alternate)break t;I=Ci(I),y=Ci(y)}I=null}else I=null;m!==null&&Rd(h,p,m,I,!1),w!==null&&O!==null&&Rd(h,O,w,I,!0)}}e:{if(p=c?Fi(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var x=s0;else if(Id(p))if(Zg)x=u0;else{x=a0;var N=o0}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(x=l0);if(x&&(x=x(t,c))){Xg(h,x,n,d);break e}N&&N(t,p,c),t==="focusout"&&(N=p._wrapperState)&&N.controlled&&p.type==="number"&&Du(p,"number",p.value)}switch(N=c?Fi(c):window,t){case"focusin":(Id(N)||N.contentEditable==="true")&&(Bi=N,ju=c,Ms=null);break;case"focusout":Ms=ju=Bi=null;break;case"mousedown":qu=!0;break;case"contextmenu":case"mouseup":case"dragend":qu=!1,Pd(h,n,d);break;case"selectionchange":if(d0)break;case"keydown":case"keyup":Pd(h,n,d)}var P;if(uf)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else Li?Yg(t,n)&&(B="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(Gg&&n.locale!=="ko"&&(Li||B!=="onCompositionStart"?B==="onCompositionEnd"&&Li&&(P=_g()):(Rr=d,of="value"in Rr?Rr.value:Rr.textContent,Li=!0)),N=Na(c,B),0<N.length&&(B=new Sd(B,t,null,n,d),h.push({event:B,listeners:N}),P?B.data=P:(P=Qg(n),P!==null&&(B.data=P)))),(P=e0?t0(t,n):n0(t,n))&&(c=Na(c,"onBeforeInput"),0<c.length&&(d=new Sd("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=P))}um(h,e)})}function no(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Na(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Gs(t,n),s!=null&&r.unshift(no(t,s,i)),s=Gs(t,e),s!=null&&r.push(no(t,s,i))),t=t.return}return r}function Ci(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Rd(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Gs(n,s),l!=null&&o.unshift(no(n,l,a))):i||(l=Gs(n,s),l!=null&&o.push(no(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var p0=/\r\n?/g,y0=/\u0000|\uFFFD/g;function Ld(t){return(typeof t=="string"?t:""+t).replace(p0,`
`).replace(y0,"")}function qo(t,e,n){if(e=Ld(e),Ld(t)!==e&&n)throw Error(E(425))}function Pa(){}var Vu=null,Ku=null;function Wu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hu=typeof setTimeout=="function"?setTimeout:void 0,v0=typeof clearTimeout=="function"?clearTimeout:void 0,Bd=typeof Promise=="function"?Promise:void 0,w0=typeof queueMicrotask=="function"?queueMicrotask:typeof Bd<"u"?function(t){return Bd.resolve(null).then(t).catch(S0)}:Hu;function S0(t){setTimeout(function(){throw t})}function ru(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Xs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Xs(e)}function $r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ps=Math.random().toString(36).slice(2),qt="__reactFiber$"+ps,ro="__reactProps$"+ps,pr="__reactContainer$"+ps,_u="__reactEvents$"+ps,k0="__reactListeners$"+ps,T0="__reactHandles$"+ps;function ai(t){var e=t[qt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pr]||n[qt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bd(t);t!==null;){if(n=t[qt])return n;t=bd(t)}return e}t=n,n=t.parentNode}return null}function Io(t){return t=t[qt]||t[pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function Sl(t){return t[ro]||null}var Gu=[],Mi=-1;function Zr(t){return{current:t}}function ee(t){0>Mi||(t.current=Gu[Mi],Gu[Mi]=null,Mi--)}function X(t,e){Mi++,Gu[Mi]=t.current,t.current=e}var _r={},Oe=Zr(_r),qe=Zr(!1),pi=_r;function es(t,e){var n=t.type.contextTypes;if(!n)return _r;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ve(t){return t=t.childContextTypes,t!=null}function Da(){ee(qe),ee(Oe)}function Fd(t,e,n){if(Oe.current!==_r)throw Error(E(168));X(Oe,e),X(qe,n)}function fm(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(E(108,ov(t)||"Unknown",i));return oe({},n,r)}function Oa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_r,pi=Oe.current,X(Oe,t),X(qe,qe.current),!0}function Md(t,e,n){var r=t.stateNode;if(!r)throw Error(E(169));n?(t=fm(t,e,pi),r.__reactInternalMemoizedMergedChildContext=t,ee(qe),ee(Oe),X(Oe,t)):ee(qe),X(qe,n)}var sr=null,kl=!1,iu=!1;function dm(t){sr===null?sr=[t]:sr.push(t)}function A0(t){kl=!0,dm(t)}function ei(){if(!iu&&sr!==null){iu=!0;var t=0,e=G;try{var n=sr;for(G=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}sr=null,kl=!1}catch(i){throw sr!==null&&(sr=sr.slice(t+1)),Mg(tf,ei),i}finally{G=e,iu=!1}}return null}var Ji=[],$i=0,Ra=null,La=0,ot=[],at=0,yi=null,ar=1,lr="";function ri(t,e){Ji[$i++]=La,Ji[$i++]=Ra,Ra=t,La=e}function hm(t,e,n){ot[at++]=ar,ot[at++]=lr,ot[at++]=yi,yi=t;var r=ar;t=lr;var i=32-Rt(r)-1;r&=~(1<<i),n+=1;var s=32-Rt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ar=1<<32-Rt(e)+i|n<<i|r,lr=s+t}else ar=1<<s|n<<i|r,lr=t}function ff(t){t.return!==null&&(ri(t,1),hm(t,1,0))}function df(t){for(;t===Ra;)Ra=Ji[--$i],Ji[$i]=null,La=Ji[--$i],Ji[$i]=null;for(;t===yi;)yi=ot[--at],ot[at]=null,lr=ot[--at],ot[at]=null,ar=ot[--at],ot[at]=null}var Ze=null,Ye=null,te=!1,Pt=null;function gm(t,e){var n=yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Jd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ze=t,Ye=$r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ze=t,Ye=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=yi!==null?{id:ar,overflow:lr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ze=t,Ye=null,!0):!1;default:return!1}}function Yu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qu(t){if(te){var e=Ye;if(e){var n=e;if(!Jd(t,e)){if(Yu(t))throw Error(E(418));e=$r(n.nextSibling);var r=Ze;e&&Jd(t,e)?gm(r,n):(t.flags=t.flags&-4097|2,te=!1,Ze=t)}}else{if(Yu(t))throw Error(E(418));t.flags=t.flags&-4097|2,te=!1,Ze=t}}}function $d(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ze=t}function Vo(t){if(t!==Ze)return!1;if(!te)return $d(t),te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wu(t.type,t.memoizedProps)),e&&(e=Ye)){if(Yu(t))throw mm(),Error(E(418));for(;e;)gm(t,e),e=$r(e.nextSibling)}if($d(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ye=$r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ye=null}}else Ye=Ze?$r(t.stateNode.nextSibling):null;return!0}function mm(){for(var t=Ye;t;)t=$r(t.nextSibling)}function ts(){Ye=Ze=null,te=!1}function hf(t){Pt===null?Pt=[t]:Pt.push(t)}var I0=kr.ReactCurrentBatchConfig;function xt(t,e){if(t&&t.defaultProps){e=oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Ba=Zr(null),ba=null,zi=null,gf=null;function mf(){gf=zi=ba=null}function pf(t){var e=Ba.current;ee(Ba),t._currentValue=e}function Xu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Gi(t,e){ba=t,gf=zi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ue=!0),t.firstContext=null)}function kt(t){var e=t._currentValue;if(gf!==t)if(t={context:t,memoizedValue:e,next:null},zi===null){if(ba===null)throw Error(E(308));zi=t,ba.dependencies={lanes:0,firstContext:t}}else zi=zi.next=t;return e}var li=null;function yf(t){li===null?li=[t]:li.push(t)}function pm(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,yf(e)):(n.next=i.next,i.next=n),e.interleaved=n,yr(t,r)}function yr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Nr=!1;function vf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ym(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,K&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,yr(t,n)}return i=r.interleaved,i===null?(e.next=e,yf(r)):(e.next=i.next,i.next=e),r.interleaved=e,yr(t,n)}function aa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nf(t,n)}}function zd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fa(t,e,n,r){var i=t.updateQueue;Nr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,I=a;switch(p=e,m=n,I.tag){case 1:if(w=I.payload,typeof w=="function"){h=w.call(m,h,p);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=I.payload,p=typeof w=="function"?w.call(m,h,p):w,p==null)break e;h=oe({},h,p);break e;case 2:Nr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);wi|=o,t.lanes=o,t.memoizedState=h}}function Ud(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(E(191,i));i.call(r)}}}var vm=new pg.Component().refs;function Zu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tl={isMounted:function(t){return(t=t._reactInternals)?Ei(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Fe(),i=jr(t),s=dr(r,i);s.payload=e,n!=null&&(s.callback=n),e=zr(t,s,i),e!==null&&(Lt(e,t,i,r),aa(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Fe(),i=jr(t),s=dr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=zr(t,s,i),e!==null&&(Lt(e,t,i,r),aa(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Fe(),r=jr(t),i=dr(n,r);i.tag=2,e!=null&&(i.callback=e),e=zr(t,i,r),e!==null&&(Lt(e,t,r,n),aa(e,t,r))}};function jd(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!eo(n,r)||!eo(i,s):!0}function wm(t,e,n){var r=!1,i=_r,s=e.contextType;return typeof s=="object"&&s!==null?s=kt(s):(i=Ve(e)?pi:Oe.current,r=e.contextTypes,s=(r=r!=null)?es(t,i):_r),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function qd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tl.enqueueReplaceState(e,e.state,null)}function ec(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=vm,vf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=kt(s):(s=Ve(e)?pi:Oe.current,i.context=es(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Zu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Tl.enqueueReplaceState(i,i.state,null),Fa(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Is(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===vm&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function Ko(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vd(t){var e=t._init;return e(t._payload)}function Sm(t){function e(y,g){if(t){var v=y.deletions;v===null?(y.deletions=[g],y.flags|=16):v.push(g)}}function n(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=qr(y,g),y.index=0,y.sibling=null,y}function s(y,g,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<g?(y.flags|=2,g):v):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,g,v,T){return g===null||g.tag!==6?(g=fu(v,y.mode,T),g.return=y,g):(g=i(g,v),g.return=y,g)}function l(y,g,v,T){var x=v.type;return x===Ri?d(y,g,v.props.children,T,v.key):g!==null&&(g.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Cr&&Vd(x)===g.type)?(T=i(g,v.props),T.ref=Is(y,g,v),T.return=y,T):(T=ha(v.type,v.key,v.props,null,y.mode,T),T.ref=Is(y,g,v),T.return=y,T)}function c(y,g,v,T){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=du(v,y.mode,T),g.return=y,g):(g=i(g,v.children||[]),g.return=y,g)}function d(y,g,v,T,x){return g===null||g.tag!==7?(g=hi(v,y.mode,T,x),g.return=y,g):(g=i(g,v),g.return=y,g)}function h(y,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=fu(""+g,y.mode,v),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Bo:return v=ha(g.type,g.key,g.props,null,y.mode,v),v.ref=Is(y,null,g),v.return=y,v;case Oi:return g=du(g,y.mode,v),g.return=y,g;case Cr:var T=g._init;return h(y,T(g._payload),v)}if(Ds(g)||ws(g))return g=hi(g,y.mode,v,null),g.return=y,g;Ko(y,g)}return null}function p(y,g,v,T){var x=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return x!==null?null:a(y,g,""+v,T);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Bo:return v.key===x?l(y,g,v,T):null;case Oi:return v.key===x?c(y,g,v,T):null;case Cr:return x=v._init,p(y,g,x(v._payload),T)}if(Ds(v)||ws(v))return x!==null?null:d(y,g,v,T,null);Ko(y,v)}return null}function m(y,g,v,T,x){if(typeof T=="string"&&T!==""||typeof T=="number")return y=y.get(v)||null,a(g,y,""+T,x);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Bo:return y=y.get(T.key===null?v:T.key)||null,l(g,y,T,x);case Oi:return y=y.get(T.key===null?v:T.key)||null,c(g,y,T,x);case Cr:var N=T._init;return m(y,g,v,N(T._payload),x)}if(Ds(T)||ws(T))return y=y.get(v)||null,d(g,y,T,x,null);Ko(g,T)}return null}function w(y,g,v,T){for(var x=null,N=null,P=g,B=g=0,H=null;P!==null&&B<v.length;B++){P.index>B?(H=P,P=null):H=P.sibling;var U=p(y,P,v[B],T);if(U===null){P===null&&(P=H);break}t&&P&&U.alternate===null&&e(y,P),g=s(U,g,B),N===null?x=U:N.sibling=U,N=U,P=H}if(B===v.length)return n(y,P),te&&ri(y,B),x;if(P===null){for(;B<v.length;B++)P=h(y,v[B],T),P!==null&&(g=s(P,g,B),N===null?x=P:N.sibling=P,N=P);return te&&ri(y,B),x}for(P=r(y,P);B<v.length;B++)H=m(P,y,B,v[B],T),H!==null&&(t&&H.alternate!==null&&P.delete(H.key===null?B:H.key),g=s(H,g,B),N===null?x=H:N.sibling=H,N=H);return t&&P.forEach(function(_e){return e(y,_e)}),te&&ri(y,B),x}function I(y,g,v,T){var x=ws(v);if(typeof x!="function")throw Error(E(150));if(v=x.call(v),v==null)throw Error(E(151));for(var N=x=null,P=g,B=g=0,H=null,U=v.next();P!==null&&!U.done;B++,U=v.next()){P.index>B?(H=P,P=null):H=P.sibling;var _e=p(y,P,U.value,T);if(_e===null){P===null&&(P=H);break}t&&P&&_e.alternate===null&&e(y,P),g=s(_e,g,B),N===null?x=_e:N.sibling=_e,N=_e,P=H}if(U.done)return n(y,P),te&&ri(y,B),x;if(P===null){for(;!U.done;B++,U=v.next())U=h(y,U.value,T),U!==null&&(g=s(U,g,B),N===null?x=U:N.sibling=U,N=U);return te&&ri(y,B),x}for(P=r(y,P);!U.done;B++,U=v.next())U=m(P,y,B,U.value,T),U!==null&&(t&&U.alternate!==null&&P.delete(U.key===null?B:U.key),g=s(U,g,B),N===null?x=U:N.sibling=U,N=U);return t&&P.forEach(function(ys){return e(y,ys)}),te&&ri(y,B),x}function O(y,g,v,T){if(typeof v=="object"&&v!==null&&v.type===Ri&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Bo:e:{for(var x=v.key,N=g;N!==null;){if(N.key===x){if(x=v.type,x===Ri){if(N.tag===7){n(y,N.sibling),g=i(N,v.props.children),g.return=y,y=g;break e}}else if(N.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Cr&&Vd(x)===N.type){n(y,N.sibling),g=i(N,v.props),g.ref=Is(y,N,v),g.return=y,y=g;break e}n(y,N);break}else e(y,N);N=N.sibling}v.type===Ri?(g=hi(v.props.children,y.mode,T,v.key),g.return=y,y=g):(T=ha(v.type,v.key,v.props,null,y.mode,T),T.ref=Is(y,g,v),T.return=y,y=T)}return o(y);case Oi:e:{for(N=v.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(y,g.sibling),g=i(g,v.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else e(y,g);g=g.sibling}g=du(v,y.mode,T),g.return=y,y=g}return o(y);case Cr:return N=v._init,O(y,g,N(v._payload),T)}if(Ds(v))return w(y,g,v,T);if(ws(v))return I(y,g,v,T);Ko(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(n(y,g.sibling),g=i(g,v),g.return=y,y=g):(n(y,g),g=fu(v,y.mode,T),g.return=y,y=g),o(y)):n(y,g)}return O}var ns=Sm(!0),km=Sm(!1),Eo={},tn=Zr(Eo),io=Zr(Eo),so=Zr(Eo);function ui(t){if(t===Eo)throw Error(E(174));return t}function wf(t,e){switch(X(so,e),X(io,t),X(tn,Eo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ru(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ru(e,t)}ee(tn),X(tn,e)}function rs(){ee(tn),ee(io),ee(so)}function Tm(t){ui(so.current);var e=ui(tn.current),n=Ru(e,t.type);e!==n&&(X(io,t),X(tn,n))}function Sf(t){io.current===t&&(ee(tn),ee(io))}var re=Zr(0);function Ma(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var su=[];function kf(){for(var t=0;t<su.length;t++)su[t]._workInProgressVersionPrimary=null;su.length=0}var la=kr.ReactCurrentDispatcher,ou=kr.ReactCurrentBatchConfig,vi=0,se=null,pe=null,ke=null,Ja=!1,Js=!1,oo=0,E0=0;function Ce(){throw Error(E(321))}function Tf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ft(t[n],e[n]))return!1;return!0}function Af(t,e,n,r,i,s){if(vi=s,se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,la.current=t===null||t.memoizedState===null?P0:D0,t=n(r,i),Js){s=0;do{if(Js=!1,oo=0,25<=s)throw Error(E(301));s+=1,ke=pe=null,e.updateQueue=null,la.current=O0,t=n(r,i)}while(Js)}if(la.current=$a,e=pe!==null&&pe.next!==null,vi=0,ke=pe=se=null,Ja=!1,e)throw Error(E(300));return t}function If(){var t=oo!==0;return oo=0,t}function zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?se.memoizedState=ke=t:ke=ke.next=t,ke}function Tt(){if(pe===null){var t=se.alternate;t=t!==null?t.memoizedState:null}else t=pe.next;var e=ke===null?se.memoizedState:ke.next;if(e!==null)ke=e,pe=t;else{if(t===null)throw Error(E(310));pe=t,t={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},ke===null?se.memoizedState=ke=t:ke=ke.next=t}return ke}function ao(t,e){return typeof e=="function"?e(t):e}function au(t){var e=Tt(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=pe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((vi&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,se.lanes|=d,wi|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Ft(r,e.memoizedState)||(Ue=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,se.lanes|=s,wi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function lu(t){var e=Tt(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ft(s,e.memoizedState)||(Ue=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Am(){}function Im(t,e){var n=se,r=Tt(),i=e(),s=!Ft(r.memoizedState,i);if(s&&(r.memoizedState=i,Ue=!0),r=r.queue,Ef(Cm.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ke!==null&&ke.memoizedState.tag&1){if(n.flags|=2048,lo(9,xm.bind(null,n,r,i,e),void 0,null),Te===null)throw Error(E(349));vi&30||Em(n,e,i)}return i}function Em(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=se.updateQueue,e===null?(e={lastEffect:null,stores:null},se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xm(t,e,n,r){e.value=n,e.getSnapshot=r,Nm(e)&&Pm(t)}function Cm(t,e,n){return n(function(){Nm(e)&&Pm(t)})}function Nm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ft(t,n)}catch{return!0}}function Pm(t){var e=yr(t,1);e!==null&&Lt(e,t,1,-1)}function Kd(t){var e=zt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:t},e.queue=t,t=t.dispatch=N0.bind(null,se,t),[e.memoizedState,t]}function lo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=se.updateQueue,e===null?(e={lastEffect:null,stores:null},se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Dm(){return Tt().memoizedState}function ua(t,e,n,r){var i=zt();se.flags|=t,i.memoizedState=lo(1|e,n,void 0,r===void 0?null:r)}function Al(t,e,n,r){var i=Tt();r=r===void 0?null:r;var s=void 0;if(pe!==null){var o=pe.memoizedState;if(s=o.destroy,r!==null&&Tf(r,o.deps)){i.memoizedState=lo(e,n,s,r);return}}se.flags|=t,i.memoizedState=lo(1|e,n,s,r)}function Wd(t,e){return ua(8390656,8,t,e)}function Ef(t,e){return Al(2048,8,t,e)}function Om(t,e){return Al(4,2,t,e)}function Rm(t,e){return Al(4,4,t,e)}function Lm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Bm(t,e,n){return n=n!=null?n.concat([t]):null,Al(4,4,Lm.bind(null,e,t),n)}function xf(){}function bm(t,e){var n=Tt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Fm(t,e){var n=Tt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Mm(t,e,n){return vi&21?(Ft(n,e)||(n=zg(),se.lanes|=n,wi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ue=!0),t.memoizedState=n)}function x0(t,e){var n=G;G=n!==0&&4>n?n:4,t(!0);var r=ou.transition;ou.transition={};try{t(!1),e()}finally{G=n,ou.transition=r}}function Jm(){return Tt().memoizedState}function C0(t,e,n){var r=jr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$m(t))zm(e,n);else if(n=pm(t,e,n,r),n!==null){var i=Fe();Lt(n,t,r,i),Um(n,e,r)}}function N0(t,e,n){var r=jr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($m(t))zm(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ft(a,o)){var l=e.interleaved;l===null?(i.next=i,yf(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=pm(t,e,i,r),n!==null&&(i=Fe(),Lt(n,t,r,i),Um(n,e,r))}}function $m(t){var e=t.alternate;return t===se||e!==null&&e===se}function zm(t,e){Js=Ja=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Um(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nf(t,n)}}var $a={readContext:kt,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useInsertionEffect:Ce,useLayoutEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useMutableSource:Ce,useSyncExternalStore:Ce,useId:Ce,unstable_isNewReconciler:!1},P0={readContext:kt,useCallback:function(t,e){return zt().memoizedState=[t,e===void 0?null:e],t},useContext:kt,useEffect:Wd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ua(4194308,4,Lm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ua(4194308,4,t,e)},useInsertionEffect:function(t,e){return ua(4,2,t,e)},useMemo:function(t,e){var n=zt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=C0.bind(null,se,t),[r.memoizedState,t]},useRef:function(t){var e=zt();return t={current:t},e.memoizedState=t},useState:Kd,useDebugValue:xf,useDeferredValue:function(t){return zt().memoizedState=t},useTransition:function(){var t=Kd(!1),e=t[0];return t=x0.bind(null,t[1]),zt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=se,i=zt();if(te){if(n===void 0)throw Error(E(407));n=n()}else{if(n=e(),Te===null)throw Error(E(349));vi&30||Em(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Wd(Cm.bind(null,r,s,t),[t]),r.flags|=2048,lo(9,xm.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=zt(),e=Te.identifierPrefix;if(te){var n=lr,r=ar;n=(r&~(1<<32-Rt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=oo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=E0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},D0={readContext:kt,useCallback:bm,useContext:kt,useEffect:Ef,useImperativeHandle:Bm,useInsertionEffect:Om,useLayoutEffect:Rm,useMemo:Fm,useReducer:au,useRef:Dm,useState:function(){return au(ao)},useDebugValue:xf,useDeferredValue:function(t){var e=Tt();return Mm(e,pe.memoizedState,t)},useTransition:function(){var t=au(ao)[0],e=Tt().memoizedState;return[t,e]},useMutableSource:Am,useSyncExternalStore:Im,useId:Jm,unstable_isNewReconciler:!1},O0={readContext:kt,useCallback:bm,useContext:kt,useEffect:Ef,useImperativeHandle:Bm,useInsertionEffect:Om,useLayoutEffect:Rm,useMemo:Fm,useReducer:lu,useRef:Dm,useState:function(){return lu(ao)},useDebugValue:xf,useDeferredValue:function(t){var e=Tt();return pe===null?e.memoizedState=t:Mm(e,pe.memoizedState,t)},useTransition:function(){var t=lu(ao)[0],e=Tt().memoizedState;return[t,e]},useMutableSource:Am,useSyncExternalStore:Im,useId:Jm,unstable_isNewReconciler:!1};function is(t,e){try{var n="",r=e;do n+=sv(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function uu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var R0=typeof WeakMap=="function"?WeakMap:Map;function jm(t,e,n){n=dr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ua||(Ua=!0,fc=r),tc(t,e)},n}function qm(t,e,n){n=dr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){tc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){tc(t,e),typeof r!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Hd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new R0;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=W0.bind(null,t,e,n),e.then(t,t))}function _d(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=dr(-1,1),e.tag=2,zr(n,e,1))),n.lanes|=1),t)}var L0=kr.ReactCurrentOwner,Ue=!1;function Le(t,e,n,r){e.child=t===null?km(e,null,n,r):ns(e,t.child,n,r)}function Yd(t,e,n,r,i){n=n.render;var s=e.ref;return Gi(e,i),r=Af(t,e,n,r,s,i),n=If(),t!==null&&!Ue?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,vr(t,e,i)):(te&&n&&ff(e),e.flags|=1,Le(t,e,r,i),e.child)}function Qd(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Bf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Vm(t,e,s,r,i)):(t=ha(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:eo,n(o,r)&&t.ref===e.ref)return vr(t,e,i)}return e.flags|=1,t=qr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Vm(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(eo(s,r)&&t.ref===e.ref)if(Ue=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ue=!0);else return e.lanes=t.lanes,vr(t,e,i)}return nc(t,e,n,r,i)}function Km(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},X(ji,Ge),Ge|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,X(ji,Ge),Ge|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,X(ji,Ge),Ge|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,X(ji,Ge),Ge|=r;return Le(t,e,i,n),e.child}function Wm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nc(t,e,n,r,i){var s=Ve(n)?pi:Oe.current;return s=es(e,s),Gi(e,i),n=Af(t,e,n,r,s,i),r=If(),t!==null&&!Ue?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,vr(t,e,i)):(te&&r&&ff(e),e.flags|=1,Le(t,e,n,i),e.child)}function Xd(t,e,n,r,i){if(Ve(n)){var s=!0;Oa(e)}else s=!1;if(Gi(e,i),e.stateNode===null)ca(t,e),wm(e,n,r),ec(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=kt(c):(c=Ve(n)?pi:Oe.current,c=es(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&qd(e,o,r,c),Nr=!1;var p=e.memoizedState;o.state=p,Fa(e,r,o,i),l=e.memoizedState,a!==r||p!==l||qe.current||Nr?(typeof d=="function"&&(Zu(e,n,d,r),l=e.memoizedState),(a=Nr||jd(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ym(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:xt(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=kt(l):(l=Ve(n)?pi:Oe.current,l=es(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&qd(e,o,r,l),Nr=!1,p=e.memoizedState,o.state=p,Fa(e,r,o,i);var w=e.memoizedState;a!==h||p!==w||qe.current||Nr?(typeof m=="function"&&(Zu(e,n,m,r),w=e.memoizedState),(c=Nr||jd(e,n,c,r,p,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return rc(t,e,n,r,s,i)}function rc(t,e,n,r,i,s){Wm(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Md(e,n,!1),vr(t,e,s);r=e.stateNode,L0.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ns(e,t.child,null,s),e.child=ns(e,null,a,s)):Le(t,e,a,s),e.memoizedState=r.state,i&&Md(e,n,!0),e.child}function Hm(t){var e=t.stateNode;e.pendingContext?Fd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fd(t,e.context,!1),wf(t,e.containerInfo)}function Zd(t,e,n,r,i){return ts(),hf(i),e.flags|=256,Le(t,e,n,r),e.child}var ic={dehydrated:null,treeContext:null,retryLane:0};function sc(t){return{baseLanes:t,cachePool:null,transitions:null}}function _m(t,e,n){var r=e.pendingProps,i=re.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),X(re,i&1),t===null)return Qu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=xl(o,r,0,null),t=hi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=sc(n),e.memoizedState=ic,t):Cf(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return B0(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=qr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=qr(a,s):(s=hi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?sc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ic,r}return s=t.child,t=s.sibling,r=qr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Cf(t,e){return e=xl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wo(t,e,n,r){return r!==null&&hf(r),ns(e,t.child,null,n),t=Cf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function B0(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=uu(Error(E(422))),Wo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=xl({mode:"visible",children:r.children},i,0,null),s=hi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ns(e,t.child,null,o),e.child.memoizedState=sc(o),e.memoizedState=ic,s);if(!(e.mode&1))return Wo(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(E(419)),r=uu(s,r,void 0),Wo(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ue||a){if(r=Te,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,yr(t,i),Lt(r,t,i,-1))}return Lf(),r=uu(Error(E(421))),Wo(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=H0.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ye=$r(i.nextSibling),Ze=e,te=!0,Pt=null,t!==null&&(ot[at++]=ar,ot[at++]=lr,ot[at++]=yi,ar=t.id,lr=t.overflow,yi=e),e=Cf(e,r.children),e.flags|=4096,e)}function eh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Xu(t.return,e,n)}function cu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Gm(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Le(t,e,r.children,n),r=re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&eh(t,n,e);else if(t.tag===19)eh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(X(re,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ma(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),cu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ma(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}cu(e,!0,n,null,s);break;case"together":cu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ca(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),wi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,n=qr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function b0(t,e,n){switch(e.tag){case 3:Hm(e),ts();break;case 5:Tm(e);break;case 1:Ve(e.type)&&Oa(e);break;case 4:wf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;X(Ba,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(X(re,re.current&1),e.flags|=128,null):n&e.child.childLanes?_m(t,e,n):(X(re,re.current&1),t=vr(t,e,n),t!==null?t.sibling:null);X(re,re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Gm(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),X(re,re.current),r)break;return null;case 22:case 23:return e.lanes=0,Km(t,e,n)}return vr(t,e,n)}var Ym,oc,Qm,Xm;Ym=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};oc=function(){};Qm=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ui(tn.current);var s=null;switch(n){case"input":i=Nu(t,i),r=Nu(t,r),s=[];break;case"select":i=oe({},i,{value:void 0}),r=oe({},r,{value:void 0}),s=[];break;case"textarea":i=Ou(t,i),r=Ou(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pa)}Lu(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Hs.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Hs.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Z("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Xm=function(t,e,n,r){n!==r&&(e.flags|=4)};function Es(t,e){if(!te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ne(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function F0(t,e,n){var r=e.pendingProps;switch(df(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(e),null;case 1:return Ve(e.type)&&Da(),Ne(e),null;case 3:return r=e.stateNode,rs(),ee(qe),ee(Oe),kf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Vo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pt!==null&&(gc(Pt),Pt=null))),oc(t,e),Ne(e),null;case 5:Sf(e);var i=ui(so.current);if(n=e.type,t!==null&&e.stateNode!=null)Qm(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(E(166));return Ne(e),null}if(t=ui(tn.current),Vo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[qt]=e,r[ro]=s,t=(e.mode&1)!==0,n){case"dialog":Z("cancel",r),Z("close",r);break;case"iframe":case"object":case"embed":Z("load",r);break;case"video":case"audio":for(i=0;i<Rs.length;i++)Z(Rs[i],r);break;case"source":Z("error",r);break;case"img":case"image":case"link":Z("error",r),Z("load",r);break;case"details":Z("toggle",r);break;case"input":ud(r,s),Z("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Z("invalid",r);break;case"textarea":fd(r,s),Z("invalid",r)}Lu(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&qo(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&qo(r.textContent,a,t),i=["children",""+a]):Hs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Z("scroll",r)}switch(n){case"input":bo(r),cd(r,s,!0);break;case"textarea":bo(r),dd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Pa)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Eg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[qt]=e,t[ro]=r,Ym(t,e,!1,!1),e.stateNode=t;e:{switch(o=Bu(n,r),n){case"dialog":Z("cancel",t),Z("close",t),i=r;break;case"iframe":case"object":case"embed":Z("load",t),i=r;break;case"video":case"audio":for(i=0;i<Rs.length;i++)Z(Rs[i],t);i=r;break;case"source":Z("error",t),i=r;break;case"img":case"image":case"link":Z("error",t),Z("load",t),i=r;break;case"details":Z("toggle",t),i=r;break;case"input":ud(t,r),i=Nu(t,r),Z("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=oe({},r,{value:void 0}),Z("invalid",t);break;case"textarea":fd(t,r),i=Ou(t,r),Z("invalid",t);break;default:i=r}Lu(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Ng(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&xg(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&_s(t,l):typeof l=="number"&&_s(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hs.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Z("scroll",t):l!=null&&Yc(t,s,l,o))}switch(n){case"input":bo(t),cd(t,r,!1);break;case"textarea":bo(t),dd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ki(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ki(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Pa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ne(e),null;case 6:if(t&&e.stateNode!=null)Xm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(E(166));if(n=ui(so.current),ui(tn.current),Vo(e)){if(r=e.stateNode,n=e.memoizedProps,r[qt]=e,(s=r.nodeValue!==n)&&(t=Ze,t!==null))switch(t.tag){case 3:qo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qo(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qt]=e,e.stateNode=r}return Ne(e),null;case 13:if(ee(re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(te&&Ye!==null&&e.mode&1&&!(e.flags&128))mm(),ts(),e.flags|=98560,s=!1;else if(s=Vo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(E(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(E(317));s[qt]=e}else ts(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ne(e),s=!1}else Pt!==null&&(gc(Pt),Pt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||re.current&1?we===0&&(we=3):Lf())),e.updateQueue!==null&&(e.flags|=4),Ne(e),null);case 4:return rs(),oc(t,e),t===null&&to(e.stateNode.containerInfo),Ne(e),null;case 10:return pf(e.type._context),Ne(e),null;case 17:return Ve(e.type)&&Da(),Ne(e),null;case 19:if(ee(re),s=e.memoizedState,s===null)return Ne(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Es(s,!1);else{if(we!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ma(t),o!==null){for(e.flags|=128,Es(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return X(re,re.current&1|2),e.child}t=t.sibling}s.tail!==null&&fe()>ss&&(e.flags|=128,r=!0,Es(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ma(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Es(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!te)return Ne(e),null}else 2*fe()-s.renderingStartTime>ss&&n!==1073741824&&(e.flags|=128,r=!0,Es(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=fe(),e.sibling=null,n=re.current,X(re,r?n&1|2:n&1),e):(Ne(e),null);case 22:case 23:return Rf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ge&1073741824&&(Ne(e),e.subtreeFlags&6&&(e.flags|=8192)):Ne(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function M0(t,e){switch(df(e),e.tag){case 1:return Ve(e.type)&&Da(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return rs(),ee(qe),ee(Oe),kf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sf(e),null;case 13:if(ee(re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));ts()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ee(re),null;case 4:return rs(),null;case 10:return pf(e.type._context),null;case 22:case 23:return Rf(),null;case 24:return null;default:return null}}var Ho=!1,Pe=!1,J0=typeof WeakSet=="function"?WeakSet:Set,R=null;function Ui(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){le(t,e,r)}else n.current=null}function ac(t,e,n){try{n()}catch(r){le(t,e,r)}}var th=!1;function $0(t,e){if(Vu=xa,t=nm(),cf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ku={focusedElem:t,selectionRange:n},xa=!1,R=e;R!==null;)if(e=R,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,R=t;else for(;R!==null;){e=R;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var I=w.memoizedProps,O=w.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?I:xt(e.type,I),O);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(T){le(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}return w=th,th=!1,w}function $s(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ac(e,n,s)}i=i.next}while(i!==r)}}function Il(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function lc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Zm(t){var e=t.alternate;e!==null&&(t.alternate=null,Zm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qt],delete e[ro],delete e[_u],delete e[k0],delete e[T0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ep(t){return t.tag===5||t.tag===3||t.tag===4}function nh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ep(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pa));else if(r!==4&&(t=t.child,t!==null))for(uc(t,e,n),t=t.sibling;t!==null;)uc(t,e,n),t=t.sibling}function cc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(cc(t,e,n),t=t.sibling;t!==null;)cc(t,e,n),t=t.sibling}var Ae=null,Nt=!1;function Ar(t,e,n){for(n=n.child;n!==null;)tp(t,e,n),n=n.sibling}function tp(t,e,n){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(pl,n)}catch{}switch(n.tag){case 5:Pe||Ui(n,e);case 6:var r=Ae,i=Nt;Ae=null,Ar(t,e,n),Ae=r,Nt=i,Ae!==null&&(Nt?(t=Ae,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ae.removeChild(n.stateNode));break;case 18:Ae!==null&&(Nt?(t=Ae,n=n.stateNode,t.nodeType===8?ru(t.parentNode,n):t.nodeType===1&&ru(t,n),Xs(t)):ru(Ae,n.stateNode));break;case 4:r=Ae,i=Nt,Ae=n.stateNode.containerInfo,Nt=!0,Ar(t,e,n),Ae=r,Nt=i;break;case 0:case 11:case 14:case 15:if(!Pe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ac(n,e,o),i=i.next}while(i!==r)}Ar(t,e,n);break;case 1:if(!Pe&&(Ui(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){le(n,e,a)}Ar(t,e,n);break;case 21:Ar(t,e,n);break;case 22:n.mode&1?(Pe=(r=Pe)||n.memoizedState!==null,Ar(t,e,n),Pe=r):Ar(t,e,n);break;default:Ar(t,e,n)}}function rh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new J0),e.forEach(function(r){var i=_0.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Et(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ae=a.stateNode,Nt=!1;break e;case 3:Ae=a.stateNode.containerInfo,Nt=!0;break e;case 4:Ae=a.stateNode.containerInfo,Nt=!0;break e}a=a.return}if(Ae===null)throw Error(E(160));tp(s,o,i),Ae=null,Nt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){le(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)np(e,t),e=e.sibling}function np(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Et(e,t),$t(t),r&4){try{$s(3,t,t.return),Il(3,t)}catch(I){le(t,t.return,I)}try{$s(5,t,t.return)}catch(I){le(t,t.return,I)}}break;case 1:Et(e,t),$t(t),r&512&&n!==null&&Ui(n,n.return);break;case 5:if(Et(e,t),$t(t),r&512&&n!==null&&Ui(n,n.return),t.flags&32){var i=t.stateNode;try{_s(i,"")}catch(I){le(t,t.return,I)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Ag(i,s),Bu(a,o);var c=Bu(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Ng(i,h):d==="dangerouslySetInnerHTML"?xg(i,h):d==="children"?_s(i,h):Yc(i,d,h,c)}switch(a){case"input":Pu(i,s);break;case"textarea":Ig(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ki(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ki(i,!!s.multiple,s.defaultValue,!0):Ki(i,!!s.multiple,s.multiple?[]:"",!1))}i[ro]=s}catch(I){le(t,t.return,I)}}break;case 6:if(Et(e,t),$t(t),r&4){if(t.stateNode===null)throw Error(E(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(I){le(t,t.return,I)}}break;case 3:if(Et(e,t),$t(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xs(e.containerInfo)}catch(I){le(t,t.return,I)}break;case 4:Et(e,t),$t(t);break;case 13:Et(e,t),$t(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Df=fe())),r&4&&rh(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Pe=(c=Pe)||d,Et(e,t),Pe=c):Et(e,t),$t(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(R=t,d=t.child;d!==null;){for(h=R=d;R!==null;){switch(p=R,m=p.child,p.tag){case 0:case 11:case 14:case 15:$s(4,p,p.return);break;case 1:Ui(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(I){le(r,n,I)}}break;case 5:Ui(p,p.return);break;case 22:if(p.memoizedState!==null){sh(h);continue}}m!==null?(m.return=p,R=m):sh(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Cg("display",o))}catch(I){le(t,t.return,I)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(I){le(t,t.return,I)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Et(e,t),$t(t),r&4&&rh(t);break;case 21:break;default:Et(e,t),$t(t)}}function $t(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ep(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_s(i,""),r.flags&=-33);var s=nh(t);cc(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=nh(t);uc(t,a,o);break;default:throw Error(E(161))}}catch(l){le(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function z0(t,e,n){R=t,rp(t)}function rp(t,e,n){for(var r=(t.mode&1)!==0;R!==null;){var i=R,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ho;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Pe;a=Ho;var c=Pe;if(Ho=o,(Pe=l)&&!c)for(R=i;R!==null;)o=R,l=o.child,o.tag===22&&o.memoizedState!==null?oh(i):l!==null?(l.return=o,R=l):oh(i);for(;s!==null;)R=s,rp(s),s=s.sibling;R=i,Ho=a,Pe=c}ih(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,R=s):ih(t)}}function ih(t){for(;R!==null;){var e=R;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pe||Il(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pe)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:xt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ud(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ud(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Xs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Pe||e.flags&512&&lc(e)}catch(p){le(e,e.return,p)}}if(e===t){R=null;break}if(n=e.sibling,n!==null){n.return=e.return,R=n;break}R=e.return}}function sh(t){for(;R!==null;){var e=R;if(e===t){R=null;break}var n=e.sibling;if(n!==null){n.return=e.return,R=n;break}R=e.return}}function oh(t){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Il(4,e)}catch(l){le(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){le(e,i,l)}}var s=e.return;try{lc(e)}catch(l){le(e,s,l)}break;case 5:var o=e.return;try{lc(e)}catch(l){le(e,o,l)}}}catch(l){le(e,e.return,l)}if(e===t){R=null;break}var a=e.sibling;if(a!==null){a.return=e.return,R=a;break}R=e.return}}var U0=Math.ceil,za=kr.ReactCurrentDispatcher,Nf=kr.ReactCurrentOwner,St=kr.ReactCurrentBatchConfig,K=0,Te=null,ge=null,Ie=0,Ge=0,ji=Zr(0),we=0,uo=null,wi=0,El=0,Pf=0,zs=null,ze=null,Df=0,ss=1/0,sn=null,Ua=!1,fc=null,Ur=null,_o=!1,Lr=null,ja=0,Us=0,dc=null,fa=-1,da=0;function Fe(){return K&6?fe():fa!==-1?fa:fa=fe()}function jr(t){return t.mode&1?K&2&&Ie!==0?Ie&-Ie:I0.transition!==null?(da===0&&(da=zg()),da):(t=G,t!==0||(t=window.event,t=t===void 0?16:Hg(t.type)),t):1}function Lt(t,e,n,r){if(50<Us)throw Us=0,dc=null,Error(E(185));To(t,n,r),(!(K&2)||t!==Te)&&(t===Te&&(!(K&2)&&(El|=n),we===4&&Dr(t,Ie)),Ke(t,r),n===1&&K===0&&!(e.mode&1)&&(ss=fe()+500,kl&&ei()))}function Ke(t,e){var n=t.callbackNode;Iv(t,e);var r=Ea(t,t===Te?Ie:0);if(r===0)n!==null&&md(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&md(n),e===1)t.tag===0?A0(ah.bind(null,t)):dm(ah.bind(null,t)),w0(function(){!(K&6)&&ei()}),n=null;else{switch(Ug(r)){case 1:n=tf;break;case 4:n=Jg;break;case 16:n=Ia;break;case 536870912:n=$g;break;default:n=Ia}n=fp(n,ip.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ip(t,e){if(fa=-1,da=0,K&6)throw Error(E(327));var n=t.callbackNode;if(Yi()&&t.callbackNode!==n)return null;var r=Ea(t,t===Te?Ie:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=qa(t,r);else{e=r;var i=K;K|=2;var s=op();(Te!==t||Ie!==e)&&(sn=null,ss=fe()+500,di(t,e));do try{V0();break}catch(a){sp(t,a)}while(!0);mf(),za.current=s,K=i,ge!==null?e=0:(Te=null,Ie=0,e=we)}if(e!==0){if(e===2&&(i=$u(t),i!==0&&(r=i,e=hc(t,i))),e===1)throw n=uo,di(t,0),Dr(t,r),Ke(t,fe()),n;if(e===6)Dr(t,r);else{if(i=t.current.alternate,!(r&30)&&!j0(i)&&(e=qa(t,r),e===2&&(s=$u(t),s!==0&&(r=s,e=hc(t,s))),e===1))throw n=uo,di(t,0),Dr(t,r),Ke(t,fe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(E(345));case 2:ii(t,ze,sn);break;case 3:if(Dr(t,r),(r&130023424)===r&&(e=Df+500-fe(),10<e)){if(Ea(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Fe(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Hu(ii.bind(null,t,ze,sn),e);break}ii(t,ze,sn);break;case 4:if(Dr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Rt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*U0(r/1960))-r,10<r){t.timeoutHandle=Hu(ii.bind(null,t,ze,sn),r);break}ii(t,ze,sn);break;case 5:ii(t,ze,sn);break;default:throw Error(E(329))}}}return Ke(t,fe()),t.callbackNode===n?ip.bind(null,t):null}function hc(t,e){var n=zs;return t.current.memoizedState.isDehydrated&&(di(t,e).flags|=256),t=qa(t,e),t!==2&&(e=ze,ze=n,e!==null&&gc(e)),t}function gc(t){ze===null?ze=t:ze.push.apply(ze,t)}function j0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ft(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dr(t,e){for(e&=~Pf,e&=~El,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Rt(e),r=1<<n;t[n]=-1,e&=~r}}function ah(t){if(K&6)throw Error(E(327));Yi();var e=Ea(t,0);if(!(e&1))return Ke(t,fe()),null;var n=qa(t,e);if(t.tag!==0&&n===2){var r=$u(t);r!==0&&(e=r,n=hc(t,r))}if(n===1)throw n=uo,di(t,0),Dr(t,e),Ke(t,fe()),n;if(n===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ii(t,ze,sn),Ke(t,fe()),null}function Of(t,e){var n=K;K|=1;try{return t(e)}finally{K=n,K===0&&(ss=fe()+500,kl&&ei())}}function Si(t){Lr!==null&&Lr.tag===0&&!(K&6)&&Yi();var e=K;K|=1;var n=St.transition,r=G;try{if(St.transition=null,G=1,t)return t()}finally{G=r,St.transition=n,K=e,!(K&6)&&ei()}}function Rf(){Ge=ji.current,ee(ji)}function di(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,v0(n)),ge!==null)for(n=ge.return;n!==null;){var r=n;switch(df(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Da();break;case 3:rs(),ee(qe),ee(Oe),kf();break;case 5:Sf(r);break;case 4:rs();break;case 13:ee(re);break;case 19:ee(re);break;case 10:pf(r.type._context);break;case 22:case 23:Rf()}n=n.return}if(Te=t,ge=t=qr(t.current,null),Ie=Ge=e,we=0,uo=null,Pf=El=wi=0,ze=zs=null,li!==null){for(e=0;e<li.length;e++)if(n=li[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}li=null}return t}function sp(t,e){do{var n=ge;try{if(mf(),la.current=$a,Ja){for(var r=se.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ja=!1}if(vi=0,ke=pe=se=null,Js=!1,oo=0,Nf.current=null,n===null||n.return===null){we=1,uo=e,ge=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ie,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=_d(o);if(m!==null){m.flags&=-257,Gd(m,o,a,s,e),m.mode&1&&Hd(s,c,e),e=m,l=c;var w=e.updateQueue;if(w===null){var I=new Set;I.add(l),e.updateQueue=I}else w.add(l);break e}else{if(!(e&1)){Hd(s,c,e),Lf();break e}l=Error(E(426))}}else if(te&&a.mode&1){var O=_d(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),Gd(O,o,a,s,e),hf(is(l,a));break e}}s=l=is(l,a),we!==4&&(we=2),zs===null?zs=[s]:zs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=jm(s,l,e);zd(s,y);break e;case 1:a=l;var g=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ur===null||!Ur.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=qm(s,a,e);zd(s,T);break e}}s=s.return}while(s!==null)}lp(n)}catch(x){e=x,ge===n&&n!==null&&(ge=n=n.return);continue}break}while(!0)}function op(){var t=za.current;return za.current=$a,t===null?$a:t}function Lf(){(we===0||we===3||we===2)&&(we=4),Te===null||!(wi&268435455)&&!(El&268435455)||Dr(Te,Ie)}function qa(t,e){var n=K;K|=2;var r=op();(Te!==t||Ie!==e)&&(sn=null,di(t,e));do try{q0();break}catch(i){sp(t,i)}while(!0);if(mf(),K=n,za.current=r,ge!==null)throw Error(E(261));return Te=null,Ie=0,we}function q0(){for(;ge!==null;)ap(ge)}function V0(){for(;ge!==null&&!mv();)ap(ge)}function ap(t){var e=cp(t.alternate,t,Ge);t.memoizedProps=t.pendingProps,e===null?lp(t):ge=e,Nf.current=null}function lp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=M0(n,e),n!==null){n.flags&=32767,ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{we=6,ge=null;return}}else if(n=F0(n,e,Ge),n!==null){ge=n;return}if(e=e.sibling,e!==null){ge=e;return}ge=e=t}while(e!==null);we===0&&(we=5)}function ii(t,e,n){var r=G,i=St.transition;try{St.transition=null,G=1,K0(t,e,n,r)}finally{St.transition=i,G=r}return null}function K0(t,e,n,r){do Yi();while(Lr!==null);if(K&6)throw Error(E(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Ev(t,s),t===Te&&(ge=Te=null,Ie=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_o||(_o=!0,fp(Ia,function(){return Yi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=St.transition,St.transition=null;var o=G;G=1;var a=K;K|=4,Nf.current=null,$0(t,n),np(n,t),f0(Ku),xa=!!Vu,Ku=Vu=null,t.current=n,z0(n),pv(),K=a,G=o,St.transition=s}else t.current=n;if(_o&&(_o=!1,Lr=t,ja=i),s=t.pendingLanes,s===0&&(Ur=null),wv(n.stateNode),Ke(t,fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ua)throw Ua=!1,t=fc,fc=null,t;return ja&1&&t.tag!==0&&Yi(),s=t.pendingLanes,s&1?t===dc?Us++:(Us=0,dc=t):Us=0,ei(),null}function Yi(){if(Lr!==null){var t=Ug(ja),e=St.transition,n=G;try{if(St.transition=null,G=16>t?16:t,Lr===null)var r=!1;else{if(t=Lr,Lr=null,ja=0,K&6)throw Error(E(331));var i=K;for(K|=4,R=t.current;R!==null;){var s=R,o=s.child;if(R.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(R=c;R!==null;){var d=R;switch(d.tag){case 0:case 11:case 15:$s(8,d,s)}var h=d.child;if(h!==null)h.return=d,R=h;else for(;R!==null;){d=R;var p=d.sibling,m=d.return;if(Zm(d),d===c){R=null;break}if(p!==null){p.return=m,R=p;break}R=m}}}var w=s.alternate;if(w!==null){var I=w.child;if(I!==null){w.child=null;do{var O=I.sibling;I.sibling=null,I=O}while(I!==null)}}R=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,R=o;else e:for(;R!==null;){if(s=R,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$s(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,R=y;break e}R=s.return}}var g=t.current;for(R=g;R!==null;){o=R;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,R=v;else e:for(o=g;R!==null;){if(a=R,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Il(9,a)}}catch(x){le(a,a.return,x)}if(a===o){R=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,R=T;break e}R=a.return}}if(K=i,ei(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(pl,t)}catch{}r=!0}return r}finally{G=n,St.transition=e}}return!1}function lh(t,e,n){e=is(n,e),e=jm(t,e,1),t=zr(t,e,1),e=Fe(),t!==null&&(To(t,1,e),Ke(t,e))}function le(t,e,n){if(t.tag===3)lh(t,t,n);else for(;e!==null;){if(e.tag===3){lh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ur===null||!Ur.has(r))){t=is(n,t),t=qm(e,t,1),e=zr(e,t,1),t=Fe(),e!==null&&(To(e,1,t),Ke(e,t));break}}e=e.return}}function W0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Fe(),t.pingedLanes|=t.suspendedLanes&n,Te===t&&(Ie&n)===n&&(we===4||we===3&&(Ie&130023424)===Ie&&500>fe()-Df?di(t,0):Pf|=n),Ke(t,e)}function up(t,e){e===0&&(t.mode&1?(e=Jo,Jo<<=1,!(Jo&130023424)&&(Jo=4194304)):e=1);var n=Fe();t=yr(t,e),t!==null&&(To(t,e,n),Ke(t,n))}function H0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),up(t,n)}function _0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(e),up(t,n)}var cp;cp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qe.current)Ue=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ue=!1,b0(t,e,n);Ue=!!(t.flags&131072)}else Ue=!1,te&&e.flags&1048576&&hm(e,La,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ca(t,e),t=e.pendingProps;var i=es(e,Oe.current);Gi(e,n),i=Af(null,e,r,t,i,n);var s=If();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ve(r)?(s=!0,Oa(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,vf(e),i.updater=Tl,e.stateNode=i,i._reactInternals=e,ec(e,r,t,n),e=rc(null,e,r,!0,s,n)):(e.tag=0,te&&s&&ff(e),Le(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ca(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Y0(r),t=xt(r,t),i){case 0:e=nc(null,e,r,t,n);break e;case 1:e=Xd(null,e,r,t,n);break e;case 11:e=Yd(null,e,r,t,n);break e;case 14:e=Qd(null,e,r,xt(r.type,t),n);break e}throw Error(E(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xt(r,i),nc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xt(r,i),Xd(t,e,r,i,n);case 3:e:{if(Hm(e),t===null)throw Error(E(387));r=e.pendingProps,s=e.memoizedState,i=s.element,ym(t,e),Fa(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=is(Error(E(423)),e),e=Zd(t,e,r,n,i);break e}else if(r!==i){i=is(Error(E(424)),e),e=Zd(t,e,r,n,i);break e}else for(Ye=$r(e.stateNode.containerInfo.firstChild),Ze=e,te=!0,Pt=null,n=km(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ts(),r===i){e=vr(t,e,n);break e}Le(t,e,r,n)}e=e.child}return e;case 5:return Tm(e),t===null&&Qu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Wu(r,i)?o=null:s!==null&&Wu(r,s)&&(e.flags|=32),Wm(t,e),Le(t,e,o,n),e.child;case 6:return t===null&&Qu(e),null;case 13:return _m(t,e,n);case 4:return wf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ns(e,null,r,n):Le(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xt(r,i),Yd(t,e,r,i,n);case 7:return Le(t,e,e.pendingProps,n),e.child;case 8:return Le(t,e,e.pendingProps.children,n),e.child;case 12:return Le(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,X(Ba,r._currentValue),r._currentValue=o,s!==null)if(Ft(s.value,o)){if(s.children===i.children&&!qe.current){e=vr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=dr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Xu(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(E(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Xu(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Le(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Gi(e,n),i=kt(i),r=r(i),e.flags|=1,Le(t,e,r,n),e.child;case 14:return r=e.type,i=xt(r,e.pendingProps),i=xt(r.type,i),Qd(t,e,r,i,n);case 15:return Vm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xt(r,i),ca(t,e),e.tag=1,Ve(r)?(t=!0,Oa(e)):t=!1,Gi(e,n),wm(e,r,i),ec(e,r,i,n),rc(null,e,r,!0,t,n);case 19:return Gm(t,e,n);case 22:return Km(t,e,n)}throw Error(E(156,e.tag))};function fp(t,e){return Mg(t,e)}function G0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yt(t,e,n,r){return new G0(t,e,n,r)}function Bf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Y0(t){if(typeof t=="function")return Bf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xc)return 11;if(t===Zc)return 14}return 2}function qr(t,e){var n=t.alternate;return n===null?(n=yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ha(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Bf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ri:return hi(n.children,i,s,e);case Qc:o=8,i|=8;break;case Iu:return t=yt(12,n,e,i|2),t.elementType=Iu,t.lanes=s,t;case Eu:return t=yt(13,n,e,i),t.elementType=Eu,t.lanes=s,t;case xu:return t=yt(19,n,e,i),t.elementType=xu,t.lanes=s,t;case Sg:return xl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vg:o=10;break e;case wg:o=9;break e;case Xc:o=11;break e;case Zc:o=14;break e;case Cr:o=16,r=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=yt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function hi(t,e,n,r){return t=yt(7,t,r,e),t.lanes=n,t}function xl(t,e,n,r){return t=yt(22,t,r,e),t.elementType=Sg,t.lanes=n,t.stateNode={isHidden:!1},t}function fu(t,e,n){return t=yt(6,t,null,e),t.lanes=n,t}function du(t,e,n){return e=yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Q0(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wl(0),this.expirationTimes=Wl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bf(t,e,n,r,i,s,o,a,l){return t=new Q0(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=yt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vf(s),t}function X0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function dp(t){if(!t)return _r;t=t._reactInternals;e:{if(Ei(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ve(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var n=t.type;if(Ve(n))return fm(t,n,e)}return e}function hp(t,e,n,r,i,s,o,a,l){return t=bf(n,r,!0,t,i,s,o,a,l),t.context=dp(null),n=t.current,r=Fe(),i=jr(n),s=dr(r,i),s.callback=e??null,zr(n,s,i),t.current.lanes=i,To(t,i,r),Ke(t,r),t}function Cl(t,e,n,r){var i=e.current,s=Fe(),o=jr(i);return n=dp(n),e.context===null?e.context=n:e.pendingContext=n,e=dr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zr(i,e,o),t!==null&&(Lt(t,i,o,s),aa(t,i,o)),o}function Va(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ff(t,e){uh(t,e),(t=t.alternate)&&uh(t,e)}function Z0(){return null}var gp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mf(t){this._internalRoot=t}Nl.prototype.render=Mf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));Cl(t,e,null,null)};Nl.prototype.unmount=Mf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Si(function(){Cl(null,t,null,null)}),e[pr]=null}};function Nl(t){this._internalRoot=t}Nl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pr.length&&e!==0&&e<Pr[n].priority;n++);Pr.splice(n,0,t),n===0&&Wg(t)}};function Jf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ch(){}function ew(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Va(o);s.call(c)}}var o=hp(e,r,t,0,null,!1,!1,"",ch);return t._reactRootContainer=o,t[pr]=o.current,to(t.nodeType===8?t.parentNode:t),Si(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Va(l);a.call(c)}}var l=bf(t,0,!1,null,null,!1,!1,"",ch);return t._reactRootContainer=l,t[pr]=l.current,to(t.nodeType===8?t.parentNode:t),Si(function(){Cl(e,l,n,r)}),l}function Dl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Va(o);a.call(l)}}Cl(e,o,t,i)}else o=ew(n,e,t,i,r);return Va(o)}jg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Os(e.pendingLanes);n!==0&&(nf(e,n|1),Ke(e,fe()),!(K&6)&&(ss=fe()+500,ei()))}break;case 13:Si(function(){var r=yr(t,1);if(r!==null){var i=Fe();Lt(r,t,1,i)}}),Ff(t,1)}};rf=function(t){if(t.tag===13){var e=yr(t,134217728);if(e!==null){var n=Fe();Lt(e,t,134217728,n)}Ff(t,134217728)}};qg=function(t){if(t.tag===13){var e=jr(t),n=yr(t,e);if(n!==null){var r=Fe();Lt(n,t,e,r)}Ff(t,e)}};Vg=function(){return G};Kg=function(t,e){var n=G;try{return G=t,e()}finally{G=n}};Fu=function(t,e,n){switch(e){case"input":if(Pu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Sl(r);if(!i)throw Error(E(90));Tg(r),Pu(r,i)}}}break;case"textarea":Ig(t,n);break;case"select":e=n.value,e!=null&&Ki(t,!!n.multiple,e,!1)}};Og=Of;Rg=Si;var tw={usingClientEntryPoint:!1,Events:[Io,Fi,Sl,Pg,Dg,Of]},xs={findFiberByHostInstance:ai,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nw={bundleType:xs.bundleType,version:xs.version,rendererPackageName:xs.rendererPackageName,rendererConfig:xs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bg(t),t===null?null:t.stateNode},findFiberByHostInstance:xs.findFiberByHostInstance||Z0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Go=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Go.isDisabled&&Go.supportsFiber)try{pl=Go.inject(nw),en=Go}catch{}}it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tw;it.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jf(e))throw Error(E(200));return X0(t,e,null,n)};it.createRoot=function(t,e){if(!Jf(t))throw Error(E(299));var n=!1,r="",i=gp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=bf(t,1,!1,null,null,n,!1,r,i),t[pr]=e.current,to(t.nodeType===8?t.parentNode:t),new Mf(e)};it.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=bg(e),t=t===null?null:t.stateNode,t};it.flushSync=function(t){return Si(t)};it.hydrate=function(t,e,n){if(!Pl(e))throw Error(E(200));return Dl(null,t,e,!0,n)};it.hydrateRoot=function(t,e,n){if(!Jf(t))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=gp;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=hp(e,null,t,1,n??null,i,!1,s,o),t[pr]=e.current,to(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Nl(e)};it.render=function(t,e,n){if(!Pl(e))throw Error(E(200));return Dl(null,t,e,!1,n)};it.unmountComponentAtNode=function(t){if(!Pl(t))throw Error(E(40));return t._reactRootContainer?(Si(function(){Dl(null,null,t,!1,function(){t._reactRootContainer=null,t[pr]=null})}),!0):!1};it.unstable_batchedUpdates=Of;it.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pl(n))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return Dl(t,e,n,!1,r)};it.version="18.2.0-next-9e3b772b8-20220608";function mp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mp)}catch(t){console.error(t)}}mp(),hg.exports=it;var rw=hg.exports,fh=rw;Tu.createRoot=fh.createRoot,Tu.hydrateRoot=fh.hydrateRoot;var _;(function(t){t[t.Canceled=1]="Canceled",t[t.Unknown=2]="Unknown",t[t.InvalidArgument=3]="InvalidArgument",t[t.DeadlineExceeded=4]="DeadlineExceeded",t[t.NotFound=5]="NotFound",t[t.AlreadyExists=6]="AlreadyExists",t[t.PermissionDenied=7]="PermissionDenied",t[t.ResourceExhausted=8]="ResourceExhausted",t[t.FailedPrecondition=9]="FailedPrecondition",t[t.Aborted=10]="Aborted",t[t.OutOfRange=11]="OutOfRange",t[t.Unimplemented=12]="Unimplemented",t[t.Internal=13]="Internal",t[t.Unavailable=14]="Unavailable",t[t.DataLoss=15]="DataLoss",t[t.Unauthenticated=16]="Unauthenticated"})(_||(_={}));function dh(t){const e=_[t];return typeof e!="string"?t.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,n=>"_"+n.toLowerCase())}class me extends Error{constructor(e,n=_.Unknown,r,i,s){super(iw(e,n)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=n,this.metadata=new Headers(r??{}),this.details=i??[],this.cause=s}static from(e,n=_.Unknown){return e instanceof me?e:e instanceof Error?e.name=="AbortError"?new me(e.message,_.Canceled):new me(e.message,n,void 0,void 0,e):new me(String(e),n,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===me.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const n="typeName"in e?{findMessage:i=>i===e.typeName?e:void 0}:e,r=[];for(const i of this.details){if("getType"in i){n.findMessage(i.getType().typeName)&&r.push(i);continue}const s=n.findMessage(i.type);if(s)try{r.push(s.fromBinary(i.value))}catch{}}return r}}function iw(t,e){return t.length?`[${dh(e)}] ${t}`:`[${dh(e)}]`}function ue(t,e){if(!t)throw new Error(e)}const sw=34028234663852886e22,ow=-34028234663852886e22,aw=4294967295,lw=2147483647,uw=-2147483648;function ga(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>lw||t<uw)throw new Error("invalid int 32: "+t)}function mc(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>aw||t<0)throw new Error("invalid uint 32: "+t)}function pp(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>sw||t<ow))throw new Error("invalid float 32: "+t)}const yp=Symbol("@bufbuild/protobuf/enum-type");function cw(t){const e=t[yp];return ue(e,"missing enum type on enum object"),e}function vp(t,e,n,r){t[yp]=wp(e,n.map(i=>({no:i.no,name:i.name,localName:t[i.no]})))}function wp(t,e,n){const r=Object.create(null),i=Object.create(null),s=[];for(const o of e){const a=Sp(o);s.push(a),r[o.name]=a,i[o.no]=a}return{typeName:t,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function fw(t,e,n){const r={};for(const i of e){const s=Sp(i);r[s.localName]=s.no,r[s.no]=s.localName}return vp(r,t,e),r}function Sp(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class D{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(n);return i.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,n){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(n);return i.readMessage(r,e,s,this),this}fromJsonString(e,n){let r;try{r=JSON.parse(e)}catch(i){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${i instanceof Error?i.message:String(i)}`)}return this.fromJson(r,n)}toBinary(e){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(e),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(e){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var n;const r=this.toJson(e);return JSON.stringify(r,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function dw(t,e,n,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),o={[s]:function(a){t.util.initFields(this),t.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(o.prototype,new D),Object.assign(o,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(a,l){return new o().fromBinary(a,l)},fromJson(a,l){return new o().fromJson(a,l)},fromJsonString(a,l){return new o().fromJsonString(a,l)},equals(a,l){return t.util.equals(o,a,l)}}),o}function hw(){let t=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,!(n&128))return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function hu(t,e,n){for(let s=0;s<28;s=s+7){const o=t>>>s,a=!(!(o>>>7)&&e==0),l=(a?o|128:o)&255;if(n.push(l),!a)return}const r=t>>>28&15|(e&7)<<4,i=!!(e>>3);if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),l=(a?o|128:o)&255;if(n.push(l),!a)return}n.push(e>>>31&1)}}const ma=4294967296;function hh(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let r=0,i=0;function s(o,a){const l=Number(t.slice(o,a));i*=n,r=r*n+l,r>=ma&&(i=i+(r/ma|0),r=r%ma)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?Tp(r,i):$f(r,i)}function gw(t,e){let n=$f(t,e);const r=n.hi&2147483648;r&&(n=Tp(n.lo,n.hi));const i=kp(n.lo,n.hi);return r?"-"+i:i}function kp(t,e){if({lo:t,hi:e}=mw(t,e),e<=2097151)return String(ma*e+t);const n=t&16777215,r=(t>>>24|e<<8)&16777215,i=e>>16&65535;let s=n+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const l=1e7;return s>=l&&(o+=Math.floor(s/l),s%=l),o>=l&&(a+=Math.floor(o/l),o%=l),a.toString()+gh(o)+gh(s)}function mw(t,e){return{lo:t>>>0,hi:e>>>0}}function $f(t,e){return{lo:t|0,hi:e|0}}function Tp(t,e){return e=~e,t?t=~t+1:e+=1,$f(t,e)}const gh=t=>{const e=String(t);return"0000000".slice(e.length)+e};function mh(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function pw(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;t&128&&n<10;n++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var ph={};function yw(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof ph!="object"||ph.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>s||c<i)throw new Error(`int64 invalid: ${l}`);return c},uParse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>a||c<o)throw new Error(`uint64 invalid: ${l}`);return c},enc(l){return t.setBigInt64(0,this.parse(l),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(l){return t.setBigInt64(0,this.uParse(l),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(l,c){return t.setInt32(0,l,!0),t.setInt32(4,c,!0),t.getBigInt64(0,!0)},uDec(l,c){return t.setInt32(0,l,!0),t.setInt32(4,c,!0),t.getBigUint64(0,!0)}}}const n=i=>ue(/^-?[0-9]+$/.test(i),`int64 invalid: ${i}`),r=i=>ue(/^[0-9]+$/.test(i),`uint64 invalid: ${i}`);return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),hh(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),hh(i)},dec(i,s){return gw(i,s)},uDec(i,s){return kp(i,s)}}}const ne=yw();var A;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(A||(A={}));var Gr;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(Gr||(Gr={}));function Ir(t,e,n){if(e===n)return!0;if(t==A.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}switch(t){case A.UINT64:case A.FIXED64:case A.INT64:case A.SFIXED64:case A.SINT64:return e==n}return!1}function os(t,e){switch(t){case A.BOOL:return!1;case A.UINT64:case A.FIXED64:case A.INT64:case A.SFIXED64:case A.SINT64:return e==0?ne.zero:"0";case A.DOUBLE:case A.FLOAT:return 0;case A.BYTES:return new Uint8Array(0);case A.STRING:return"";default:return 0}}function Ap(t,e){switch(t){case A.BOOL:return e===!1;case A.STRING:return e==="";case A.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var de;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(de||(de={}));class vw{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(mc(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return ga(e),mh(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){pp(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){mc(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){ga(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return ga(e),e=(e<<1^e>>31)>>>0,mh(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=ne.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=ne.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=ne.enc(e);return hu(n.lo,n.hi,this.buf),this}sint64(e){let n=ne.enc(e),r=n.hi>>31,i=n.lo<<1^r,s=(n.hi<<1|n.lo>>>31)^r;return hu(i,s,this.buf),this}uint64(e){let n=ne.uEnc(e);return hu(n.lo,n.hi,this.buf),this}}class ww{constructor(e,n){this.varint64=hw,this.uint32=pw,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e,n){let r=this.pos;switch(e){case de.Varint:for(;this.buf[this.pos++]&128;);break;case de.Bit64:this.pos+=4;case de.Bit32:this.pos+=4;break;case de.LengthDelimited:let i=this.uint32();this.pos+=i;break;case de.StartGroup:for(;;){const[s,o]=this.tag();if(o===de.EndGroup){if(n!==void 0&&s!==n)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return ne.dec(...this.varint64())}uint64(){return ne.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,ne.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return ne.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return ne.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function Sw(t,e,n,r){let i;return{typeName:e,extendee:n,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=e.split(".").pop(),s.jsonName=`[${e}]`,i=t.util.newFieldList([s]).list()[0]}return i},runtime:t}}function Ip(t){const e=t.field.localName,n=Object.create(null);return n[e]=kw(t),[n,()=>n[e]]}function kw(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return os(e.T,e.L);case"message":const n=e.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function Tw(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}let or="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Ol=[];for(let t=0;t<or.length;t++)Ol[or[t].charCodeAt(0)]=t;Ol[45]=or.indexOf("+");Ol[95]=or.indexOf("/");const zf={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<t.length;a++){if(s=Ol[t.charCodeAt(a)],s===void 0)switch(t[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:n[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:n[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:n[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(t){let e="",n=0,r,i=0;for(let s=0;s<t.length;s++)switch(r=t[s],n){case 0:e+=or[r>>2],i=(r&3)<<4,n=1;break;case 1:e+=or[i|r>>4],i=(r&15)<<2,n=2;break;case 2:e+=or[i|r>>6],e+=or[r&63],n=0;break}return n&&(e+=or[i],e+="=",n==1&&(e+="=")),e}};function Aw(t,e,n){xp(e,t);const r=e.runtime.bin.makeReadOptions(n),i=Tw(t.getType().runtime.bin.listUnknownFields(t),e.field),[s,o]=Ip(e);for(const a of i)e.runtime.bin.readField(s,r.readerFactory(a.data),e.field,a.wireType,r);return o()}function Iw(t,e,n,r){xp(e,t);const i=e.runtime.bin.makeReadOptions(r),s=e.runtime.bin.makeWriteOptions(r);if(Ep(t,e)){const c=t.getType().runtime.bin.listUnknownFields(t).filter(d=>d.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const d of c)t.getType().runtime.bin.onUnknownField(t,d.no,d.wireType,d.data)}const o=s.writerFactory();let a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,n,o,s);const l=i.readerFactory(o.finish());for(;l.pos<l.len;){const[c,d]=l.tag(),h=l.skip(d,c);t.getType().runtime.bin.onUnknownField(t,c,d,h)}}function Ep(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(r=>r.no==e.field.no)}function xp(t,e){ue(t.extendee.typeName==e.getType().typeName,`extension ${t.typeName} can only be applied to message ${t.extendee.typeName}`)}function Cp(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!Ap(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function yh(t,e){const n=t.localName,r=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=r?t.T.values[0].no:void 0;break;case"scalar":e[n]=r?os(t.T,t.L):void 0;break;case"message":e[n]=void 0;break}}function gi(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(D.prototype).every(r=>r in t&&typeof t[r]=="function"))return!1;const n=t.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function Np(t,e){return gi(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}A.DOUBLE,A.FLOAT,A.INT64,A.UINT64,A.INT32,A.UINT32,A.BOOL,A.STRING,A.BYTES;const vh={ignoreUnknownFields:!1},wh={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Ew(t){return t?Object.assign(Object.assign({},vh),t):vh}function xw(t){return t?Object.assign(Object.assign({},wh),t):wh}const Ka=Symbol(),pa=Symbol();function Cw(){return{makeReadOptions:Ew,makeWriteOptions:xw,readMessage(t,e,n,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${t.typeName} from JSON: ${jt(e)}`);r=r??new t;const i=new Map,s=n.typeRegistry;for(const[o,a]of Object.entries(e)){const l=t.fields.findJsonName(o);if(l){if(l.oneof){if(a===null&&l.kind=="scalar")continue;const c=i.get(l.oneof);if(c!==void 0)throw new Error(`cannot decode message ${t.typeName} from JSON: multiple keys for oneof "${l.oneof.name}" present: "${c}", "${o}"`);i.set(l.oneof,o)}Sh(r,a,l,n,t)}else{let c=!1;if(s!=null&&s.findExtension&&o.startsWith("[")&&o.endsWith("]")){const d=s.findExtension(o.substring(1,o.length-1));if(d&&d.extendee.typeName==t.typeName){c=!0;const[h,p]=Ip(d);Sh(h,a,d.field,n,d),Iw(r,d,p(),n)}}if(!c&&!n.ignoreUnknownFields)throw new Error(`cannot decode message ${t.typeName} from JSON: key "${o}" is unknown`)}}return r},writeMessage(t,e){const n=t.getType(),r={};let i;try{for(i of n.fields.byNumber()){if(!Cp(i,t)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!Pw(i))continue}const o=i.oneof?t[i.oneof.localName].value:t[i.localName],a=kh(i,o,e);a!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=a)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const o of n.runtime.bin.listUnknownFields(t)){const a=s.findExtensionFor(n.typeName,o.no);if(a&&Ep(t,a)){const l=Aw(t,a,e),c=kh(a.field,l,e);c!==void 0&&(r[a.field.jsonName]=c)}}}catch(s){const o=i?`cannot encode field ${n.typeName}.${i.name} to JSON`:`cannot encode message ${n.typeName} to JSON`,a=s instanceof Error?s.message:String(s);throw new Error(o+(a.length>0?`: ${a}`:""))}return r},readScalar(t,e,n){return js(t,e,n??Gr.BIGINT,!0)},writeScalar(t,e,n){if(e!==void 0&&(n||Ap(t,e)))return ya(t,e)},debug:jt}}function jt(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":`"${t.split('"').join('\\"')}"`;default:return String(t)}}function Sh(t,e,n,r,i){let s=n.localName;if(n.repeated){if(ue(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${n.name} from JSON: ${jt(e)}`);const o=t[s];for(const a of e){if(a===null)throw new Error(`cannot decode field ${i.typeName}.${n.name} from JSON: ${jt(a)}`);switch(n.kind){case"message":o.push(n.T.fromJson(a,r));break;case"enum":const l=gu(n.T,a,r.ignoreUnknownFields,!0);l!==pa&&o.push(l);break;case"scalar":try{o.push(js(n.T,a,n.L,!0))}catch(c){let d=`cannot decode field ${i.typeName}.${n.name} from JSON: ${jt(a)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${n.name} from JSON: ${jt(e)}`);const o=t[s];for(const[a,l]of Object.entries(e)){if(l===null)throw new Error(`cannot decode field ${i.typeName}.${n.name} from JSON: map value null`);let c;try{c=Nw(n.K,a)}catch(d){let h=`cannot decode map key for field ${i.typeName}.${n.name} from JSON: ${jt(e)}`;throw d instanceof Error&&d.message.length>0&&(h+=`: ${d.message}`),new Error(h)}switch(n.V.kind){case"message":o[c]=n.V.T.fromJson(l,r);break;case"enum":const d=gu(n.V.T,l,r.ignoreUnknownFields,!0);d!==pa&&(o[c]=d);break;case"scalar":try{o[c]=js(n.V.T,l,Gr.BIGINT,!0)}catch(h){let p=`cannot decode map value for field ${i.typeName}.${n.name} from JSON: ${jt(e)}`;throw h instanceof Error&&h.message.length>0&&(p+=`: ${h.message}`),new Error(p)}break}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:s},s="value"),n.kind){case"message":const o=n.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let a=t[s];gi(a)?a.fromJson(e,r):(t[s]=a=o.fromJson(e,r),o.fieldWrapper&&!n.oneof&&(t[s]=o.fieldWrapper.unwrapField(a)));break;case"enum":const l=gu(n.T,e,r.ignoreUnknownFields,!1);switch(l){case Ka:yh(n,t);break;case pa:break;default:t[s]=l;break}break;case"scalar":try{const c=js(n.T,e,n.L,!1);switch(c){case Ka:yh(n,t);break;default:t[s]=c;break}}catch(c){let d=`cannot decode field ${i.typeName}.${n.name} from JSON: ${jt(e)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}function Nw(t,e){if(t===A.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return js(t,e,Gr.BIGINT,!0).toString()}function js(t,e,n,r){if(e===null)return r?os(t,n):Ka;switch(t){case A.DOUBLE:case A.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return t==A.FLOAT&&pp(i),i;case A.INT32:case A.FIXED32:case A.SFIXED32:case A.SINT32:case A.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return t==A.UINT32||t==A.FIXED32?mc(s):ga(s),s;case A.INT64:case A.SFIXED64:case A.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=ne.parse(e);return n?o.toString():o;case A.FIXED64:case A.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=ne.uParse(e);return n?a.toString():a;case A.BOOL:if(typeof e!="boolean")break;return e;case A.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case A.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return zf.dec(e)}throw new Error}function gu(t,e,n,r){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:r?t.values[0].no:Ka;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=t.findName(e);if(i!==void 0)return i.no;if(n)return pa;break}throw new Error(`cannot decode enum ${t.typeName} from JSON: ${jt(e)}`)}function Pw(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function kh(t,e,n){if(t.kind=="map"){ue(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(t.V.kind){case"scalar":for(const[o,a]of i)r[o.toString()]=ya(t.V.T,a);break;case"message":for(const[o,a]of i)r[o.toString()]=a.toJson(n);break;case"enum":const s=t.V.T;for(const[o,a]of i)r[o.toString()]=mu(s,a,n.enumAsInteger);break}return n.emitDefaultValues||i.length>0?r:void 0}if(t.repeated){ue(Array.isArray(e));const r=[];switch(t.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(ya(t.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push(mu(t.T,e[i],n.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(n));break}return n.emitDefaultValues||r.length>0?r:void 0}switch(t.kind){case"scalar":return ya(t.T,e);case"enum":return mu(t.T,e,n.enumAsInteger);case"message":return Np(t.T,e).toJson(n)}}function mu(t,e,n){var r;if(ue(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const i=t.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function ya(t,e){switch(t){case A.INT32:case A.SFIXED32:case A.SINT32:case A.FIXED32:case A.UINT32:return ue(typeof e=="number"),e;case A.FLOAT:case A.DOUBLE:return ue(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case A.STRING:return ue(typeof e=="string"),e;case A.BOOL:return ue(typeof e=="boolean"),e;case A.UINT64:case A.FIXED64:case A.INT64:case A.SFIXED64:case A.SINT64:return ue(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case A.BYTES:return ue(e instanceof Uint8Array),zf.enc(e)}}const Ni=Symbol("@bufbuild/protobuf/unknown-fields"),Th={readUnknownFields:!0,readerFactory:t=>new ww(t)},Ah={writeUnknownFields:!0,writerFactory:()=>new vw};function Dw(t){return t?Object.assign(Object.assign({},Th),t):Th}function Ow(t){return t?Object.assign(Object.assign({},Ah),t):Ah}function Rw(){return{makeReadOptions:Dw,makeWriteOptions:Ow,listUnknownFields(t){var e;return(e=t[Ni])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[Ni]},writeUnknownFields(t,e){const r=t[Ni];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(t,e,n,r){const i=t;Array.isArray(i[Ni])||(i[Ni]=[]),i[Ni].push({no:e,wireType:n,data:r})},readMessage(t,e,n,r,i){const s=t.getType(),o=i?e.len:e.pos+n;let a,l;for(;e.pos<o&&([a,l]=e.tag(),!(i===!0&&l==de.EndGroup));){const c=s.fields.find(a);if(!c){const d=e.skip(l,a);r.readUnknownFields&&this.onUnknownField(t,a,l,d);continue}Ih(t,e,c,l,r)}if(i&&(l!=de.EndGroup||a!==n))throw new Error("invalid end group tag")},readField:Ih,writeMessage(t,e,n){const r=t.getType();for(const i of r.fields.byNumber()){if(!Cp(i,t)){if(i.req)throw new Error(`cannot encode field ${r.typeName}.${i.name} to binary: required field not set`);continue}const s=i.oneof?t[i.oneof.localName].value:t[i.localName];Eh(i,s,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,r){e!==void 0&&Eh(t,e,n,r)}}}function Ih(t,e,n,r,i){let{repeated:s,localName:o}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=o&&delete t.value,t.case=o,o="value"),n.kind){case"scalar":case"enum":const a=n.kind=="enum"?A.INT32:n.T;let l=Wa;if(n.kind=="scalar"&&n.L>0&&(l=Bw),s){let p=t[o];if(r==de.LengthDelimited&&a!=A.STRING&&a!=A.BYTES){let w=e.uint32()+e.pos;for(;e.pos<w;)p.push(l(e,a))}else p.push(l(e,a))}else t[o]=l(e,a);break;case"message":const c=n.T;s?t[o].push(va(e,new c,i,n)):gi(t[o])?va(e,t[o],i,n):(t[o]=va(e,new c,i,n),c.fieldWrapper&&!n.oneof&&!n.repeated&&(t[o]=c.fieldWrapper.unwrapField(t[o])));break;case"map":let[d,h]=Lw(n,e,i);t[o][d]=h;break}}function va(t,e,n,r){const i=e.getType().runtime.bin,s=r==null?void 0:r.delimited;return i.readMessage(e,t,s?r.no:t.uint32(),n,s),e}function Lw(t,e,n){const r=e.uint32(),i=e.pos+r;let s,o;for(;e.pos<i;){const[a]=e.tag();switch(a){case 1:s=Wa(e,t.K);break;case 2:switch(t.V.kind){case"scalar":o=Wa(e,t.V.T);break;case"enum":o=e.int32();break;case"message":o=va(e,new t.V.T,n,void 0);break}break}}if(s===void 0&&(s=os(t.K,Gr.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(t.V.kind){case"scalar":o=os(t.V.T,Gr.BIGINT);break;case"enum":o=t.V.T.values[0].no;break;case"message":o=new t.V.T;break}return[s,o]}function Bw(t,e){const n=Wa(t,e);return typeof n=="bigint"?n.toString():n}function Wa(t,e){switch(e){case A.STRING:return t.string();case A.BOOL:return t.bool();case A.DOUBLE:return t.double();case A.FLOAT:return t.float();case A.INT32:return t.int32();case A.INT64:return t.int64();case A.UINT64:return t.uint64();case A.FIXED64:return t.fixed64();case A.BYTES:return t.bytes();case A.FIXED32:return t.fixed32();case A.SFIXED32:return t.sfixed32();case A.SFIXED64:return t.sfixed64();case A.SINT64:return t.sint64();case A.UINT32:return t.uint32();case A.SINT32:return t.sint32()}}function Eh(t,e,n,r){ue(e!==void 0);const i=t.repeated;switch(t.kind){case"scalar":case"enum":let s=t.kind=="enum"?A.INT32:t.T;if(i)if(ue(Array.isArray(e)),t.packed)Fw(n,s,t.no,e);else for(const o of e)qs(n,s,t.no,o);else qs(n,s,t.no,e);break;case"message":if(i){ue(Array.isArray(e));for(const o of e)xh(n,r,t,o)}else xh(n,r,t,e);break;case"map":ue(typeof e=="object"&&e!=null);for(const[o,a]of Object.entries(e))bw(n,r,t,o,a);break}}function bw(t,e,n,r,i){t.tag(n.no,de.LengthDelimited),t.fork();let s=r;switch(n.K){case A.INT32:case A.FIXED32:case A.UINT32:case A.SFIXED32:case A.SINT32:s=Number.parseInt(r);break;case A.BOOL:ue(r=="true"||r=="false"),s=r=="true";break}switch(qs(t,n.K,1,s),n.V.kind){case"scalar":qs(t,n.V.T,2,i);break;case"enum":qs(t,A.INT32,2,i);break;case"message":ue(i!==void 0),t.tag(2,de.LengthDelimited).bytes(i.toBinary(e));break}t.join()}function xh(t,e,n,r){const i=Np(n.T,r);n.delimited?t.tag(n.no,de.StartGroup).raw(i.toBinary(e)).tag(n.no,de.EndGroup):t.tag(n.no,de.LengthDelimited).bytes(i.toBinary(e))}function qs(t,e,n,r){ue(r!==void 0);let[i,s]=Pp(e);t.tag(n,i)[s](r)}function Fw(t,e,n,r){if(!r.length)return;t.tag(n,de.LengthDelimited).fork();let[,i]=Pp(e);for(let s=0;s<r.length;s++)t[i](r[s]);t.join()}function Pp(t){let e=de.Varint;switch(t){case A.BYTES:case A.STRING:e=de.LengthDelimited;break;case A.DOUBLE:case A.FIXED64:case A.SFIXED64:e=de.Bit64;break;case A.FIXED32:case A.SFIXED32:case A.FLOAT:e=de.Bit32;break}const n=A[t].toLowerCase();return[e,n]}function Mw(){return{setEnumType:vp,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const r of n.fields.byMember()){const i=r.localName,s=e,o=t;if(o[i]!=null)switch(r.kind){case"oneof":const a=o[i].case;if(a===void 0)continue;const l=r.findField(a);let c=o[i].value;l&&l.kind=="message"&&!gi(c,l.T)?c=new l.T(c):l&&l.kind==="scalar"&&l.T===A.BYTES&&(c=Cs(c)),s[i]={case:a,value:c};break;case"scalar":case"enum":let d=o[i];r.T===A.BYTES&&(d=r.repeated?d.map(Cs):Cs(d)),s[i]=d;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===A.BYTES)for(const[m,w]of Object.entries(o[i]))s[i][m]=Cs(w);else Object.assign(s[i],o[i]);break;case"message":const p=r.V.T;for(const m of Object.keys(o[i])){let w=o[i][m];p.fieldWrapper||(w=new p(w)),s[i][m]=w}break}break;case"message":const h=r.T;if(r.repeated)s[i]=o[i].map(p=>gi(p,h)?p:new h(p));else{const p=o[i];h.fieldWrapper?h.typeName==="google.protobuf.BytesValue"?s[i]=Cs(p):s[i]=p:s[i]=gi(p,h)?p:new h(p)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(r=>{const i=e[r.localName],s=n[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,a)=>r.T.equals(o,s[a]));case"scalar":return i.every((o,a)=>Ir(r.T,o,s[a]));case"enum":return i.every((o,a)=>Ir(A.INT32,o,s[a]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":return r.T.equals(i,s);case"enum":return Ir(A.INT32,i,s);case"scalar":return Ir(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const o=r.findField(i.case);if(o===void 0)return!0;switch(o.kind){case"message":return o.T.equals(i.value,s.value);case"enum":return Ir(A.INT32,i.value,s.value);case"scalar":return Ir(o.T,i.value,s.value)}throw new Error(`oneof cannot contain ${o.kind}`);case"map":const a=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const l=r.V.T;return a.every(d=>l.equals(i[d],s[d]));case"enum":return a.every(d=>Ir(A.INT32,i[d],s[d]));case"scalar":const c=r.V.T;return a.every(d=>Ir(c,i[d],s[d]))}break}})},clone(t){const e=t.getType(),n=new e,r=n;for(const i of e.fields.byMember()){const s=t[i.localName];let o;if(i.repeated)o=s.map(Yo);else if(i.kind=="map"){o=r[i.localName];for(const[a,l]of Object.entries(s))o[a]=Yo(l)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:Yo(s.value)}:{case:void 0}:o=Yo(s);r[i.localName]=o}for(const i of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return n}}}function Yo(t){if(t===void 0)return t;if(gi(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function Cs(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function Jw(t,e,n){return{syntax:t,json:Cw(),bin:Rw(),util:Object.assign(Object.assign({},Mw()),{newFieldList:e,initFields:n}),makeMessageType(r,i,s){return dw(this,r,i,s)},makeEnum:fw,makeEnumType:wp,getEnumType:cw,makeExtension(r,i,s){return Sw(this,r,i,s)}}}class $w{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,e.push(n)):e.push(r)}return this.members}}function Dp(t,e){const n=Op(t);return e?n:Kw(Vw(n))}function zw(t){return Dp(t,!1)}const Uw=Op;function Op(t){let e=!1;const n=[];for(let r=0;r<t.length;r++){let i=t.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const jw=new Set(["constructor","toString","toJSON","valueOf"]),qw=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Rp=t=>`${t}$`,Vw=t=>qw.has(t)?Rp(t):t,Kw=t=>jw.has(t)?Rp(t):t;class Ww{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=zw(e)}addField(e){ue(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function Hw(t,e){var n,r,i,s,o,a;const l=[];let c;for(const d of typeof t=="function"?t():t){const h=d;if(h.localName=Dp(d.name,d.oneof!==void 0),h.jsonName=(n=d.jsonName)!==null&&n!==void 0?n:Uw(d.name),h.repeated=(r=d.repeated)!==null&&r!==void 0?r:!1,d.kind=="scalar"&&(h.L=(i=d.L)!==null&&i!==void 0?i:Gr.BIGINT),h.delimited=(s=d.delimited)!==null&&s!==void 0?s:!1,h.req=(o=d.req)!==null&&o!==void 0?o:!1,h.opt=(a=d.opt)!==null&&a!==void 0?a:!1,d.packed===void 0&&(h.packed=d.kind=="enum"||d.kind=="scalar"&&d.T!=A.BYTES&&d.T!=A.STRING),d.oneof!==void 0){const p=typeof d.oneof=="string"?d.oneof:d.oneof.name;(!c||c.name!=p)&&(c=new Ww(p)),h.oneof=c,c.addField(h)}l.push(h)}return l}const f=Jw("proto3",t=>new $w(t,e=>Hw(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,r=t;if(e.repeated){r[n]=[];continue}switch(e.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=os(e.T,e.L);break}}});var Be;(function(t){t[t.Unary=0]="Unary",t[t.ServerStreaming=1]="ServerStreaming",t[t.ClientStreaming=2]="ClientStreaming",t[t.BiDiStreaming=3]="BiDiStreaming"})(Be||(Be={}));var Ch;(function(t){t[t.NoSideEffects=1]="NoSideEffects",t[t.Idempotent=2]="Idempotent"})(Ch||(Ch={}));class De extends D{constructor(e){super(),this.seconds=ne.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${f.json.debug(e)}`);const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=ne.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return De.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new De({seconds:ne.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new De().fromBinary(e,n)}static fromJson(e,n){return new De().fromJson(e,n)}static fromJsonString(e,n){return new De().fromJsonString(e,n)}static equals(e,n){return f.util.equals(De,e,n)}}De.runtime=f;De.typeName="google.protobuf.Timestamp";De.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class ur extends D{constructor(e){super(),this.seconds=ne.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const r=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const i=Number(r[1]);if(i>315576e6||i<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);if(this.seconds=ne.parse(i),typeof r[2]=="string"){const s=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(s),(i<0||Object.is(i,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let n=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),n+="."+r,this.nanos<0&&Number(this.seconds)==0&&(n="-"+n)}return n+"s"}static fromBinary(e,n){return new ur().fromBinary(e,n)}static fromJson(e,n){return new ur().fromJson(e,n)}static fromJsonString(e,n){return new ur().fromJsonString(e,n)}static equals(e,n){return f.util.equals(ur,e,n)}}ur.runtime=f;ur.typeName="google.protobuf.Duration";ur.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Vt extends D{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){var n;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),i=(n=e==null?void 0:e.typeRegistry)===null||n===void 0?void 0:n.findMessage(r);if(!i)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let o=i.fromBinary(this.value).toJson(e);return(r.startsWith("google.protobuf.")||o===null||Array.isArray(o)||typeof o!="object")&&(o={value:o}),o["@type"]=this.typeUrl,o}fromJson(e,n){var r;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const i=e["@type"];if(typeof i!="string"||i=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const s=this.typeUrlToName(i),o=(r=n==null?void 0:n.typeRegistry)===null||r===void 0?void 0:r.findMessage(s);if(!o)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${i} is not in the type registry`);let a;if(s.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))a=o.fromJson(e.value,n);else{const l=Object.assign({},e);delete l["@type"],a=o.fromJson(l,n)}return this.packFrom(a),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const n=e.findMessage(this.typeUrlToName(this.typeUrl));if(n)return n.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const n=this.typeUrlToName(this.typeUrl);let r="";return typeof e=="string"?r=e:r=e.typeName,n===r}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const n=e.lastIndexOf("/"),r=n>=0?e.substring(n+1):e;if(!r.length)throw new Error(`invalid type url: ${e}`);return r}static pack(e){const n=new Vt;return n.packFrom(e),n}static fromBinary(e,n){return new Vt().fromBinary(e,n)}static fromJson(e,n){return new Vt().fromJson(e,n)}static fromJsonString(e,n){return new Vt().fromJsonString(e,n)}static equals(e,n){return f.util.equals(Vt,e,n)}}Vt.runtime=f;Vt.typeName="google.protobuf.Any";Vt.fields=f.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class Kt extends D{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.DOUBLE,this.value,!0)}fromJson(e,n){try{this.value=f.json.readScalar(A.DOUBLE,e)}catch(r){let i='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,n){return new Kt().fromBinary(e,n)}static fromJson(e,n){return new Kt().fromJson(e,n)}static fromJsonString(e,n){return new Kt().fromJsonString(e,n)}static equals(e,n){return f.util.equals(Kt,e,n)}}Kt.runtime=f;Kt.typeName="google.protobuf.DoubleValue";Kt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);Kt.fieldWrapper={wrapField(t){return new Kt({value:t})},unwrapField(t){return t.value}};class Wt extends D{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.FLOAT,this.value,!0)}fromJson(e,n){try{this.value=f.json.readScalar(A.FLOAT,e)}catch(r){let i='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,n){return new Wt().fromBinary(e,n)}static fromJson(e,n){return new Wt().fromJson(e,n)}static fromJsonString(e,n){return new Wt().fromJsonString(e,n)}static equals(e,n){return f.util.equals(Wt,e,n)}}Wt.runtime=f;Wt.typeName="google.protobuf.FloatValue";Wt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);Wt.fieldWrapper={wrapField(t){return new Wt({value:t})},unwrapField(t){return t.value}};class Ht extends D{constructor(e){super(),this.value=ne.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.INT64,this.value,!0)}fromJson(e,n){try{this.value=f.json.readScalar(A.INT64,e)}catch(r){let i='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,n){return new Ht().fromBinary(e,n)}static fromJson(e,n){return new Ht().fromJson(e,n)}static fromJsonString(e,n){return new Ht().fromJsonString(e,n)}static equals(e,n){return f.util.equals(Ht,e,n)}}Ht.runtime=f;Ht.typeName="google.protobuf.Int64Value";Ht.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);Ht.fieldWrapper={wrapField(t){return new Ht({value:t})},unwrapField(t){return t.value}};class _t extends D{constructor(e){super(),this.value=ne.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.UINT64,this.value,!0)}fromJson(e,n){try{this.value=f.json.readScalar(A.UINT64,e)}catch(r){let i='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,n){return new _t().fromBinary(e,n)}static fromJson(e,n){return new _t().fromJson(e,n)}static fromJsonString(e,n){return new _t().fromJsonString(e,n)}static equals(e,n){return f.util.equals(_t,e,n)}}_t.runtime=f;_t.typeName="google.protobuf.UInt64Value";_t.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);_t.fieldWrapper={wrapField(t){return new _t({value:t})},unwrapField(t){return t.value}};class Gt extends D{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.INT32,this.value,!0)}fromJson(e,n){try{this.value=f.json.readScalar(A.INT32,e)}catch(r){let i='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,n){return new Gt().fromBinary(e,n)}static fromJson(e,n){return new Gt().fromJson(e,n)}static fromJsonString(e,n){return new Gt().fromJsonString(e,n)}static equals(e,n){return f.util.equals(Gt,e,n)}}Gt.runtime=f;Gt.typeName="google.protobuf.Int32Value";Gt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);Gt.fieldWrapper={wrapField(t){return new Gt({value:t})},unwrapField(t){return t.value}};class Yt extends D{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.UINT32,this.value,!0)}fromJson(e,n){try{this.value=f.json.readScalar(A.UINT32,e)}catch(r){let i='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,n){return new Yt().fromBinary(e,n)}static fromJson(e,n){return new Yt().fromJson(e,n)}static fromJsonString(e,n){return new Yt().fromJsonString(e,n)}static equals(e,n){return f.util.equals(Yt,e,n)}}Yt.runtime=f;Yt.typeName="google.protobuf.UInt32Value";Yt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);Yt.fieldWrapper={wrapField(t){return new Yt({value:t})},unwrapField(t){return t.value}};class Qt extends D{constructor(e){super(),this.value=!1,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.BOOL,this.value,!0)}fromJson(e,n){try{this.value=f.json.readScalar(A.BOOL,e)}catch(r){let i='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,n){return new Qt().fromBinary(e,n)}static fromJson(e,n){return new Qt().fromJson(e,n)}static fromJsonString(e,n){return new Qt().fromJsonString(e,n)}static equals(e,n){return f.util.equals(Qt,e,n)}}Qt.runtime=f;Qt.typeName="google.protobuf.BoolValue";Qt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);Qt.fieldWrapper={wrapField(t){return new Qt({value:t})},unwrapField(t){return t.value}};class Qe extends D{constructor(e){super(),this.value="",f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.STRING,this.value,!0)}fromJson(e,n){try{this.value=f.json.readScalar(A.STRING,e)}catch(r){let i='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,n){return new Qe().fromBinary(e,n)}static fromJson(e,n){return new Qe().fromJson(e,n)}static fromJsonString(e,n){return new Qe().fromJsonString(e,n)}static equals(e,n){return f.util.equals(Qe,e,n)}}Qe.runtime=f;Qe.typeName="google.protobuf.StringValue";Qe.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);Qe.fieldWrapper={wrapField(t){return new Qe({value:t})},unwrapField(t){return t.value}};class Xt extends D{constructor(e){super(),this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.BYTES,this.value,!0)}fromJson(e,n){try{this.value=f.json.readScalar(A.BYTES,e)}catch(r){let i='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,n){return new Xt().fromBinary(e,n)}static fromJson(e,n){return new Xt().fromJson(e,n)}static fromJsonString(e,n){return new Xt().fromJsonString(e,n)}static equals(e,n){return f.util.equals(Xt,e,n)}}Xt.runtime=f;Xt.typeName="google.protobuf.BytesValue";Xt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);Xt.fieldWrapper={wrapField(t){return new Xt({value:t})},unwrapField(t){return t.value}};function _w(t,e,n){try{const r=zf.dec(t);return e?e.fromBinary(r,n):r}catch(r){throw me.from(r,_.DataLoss)}}function Gw(t,e){const n={};for(const[r,i]of Object.entries(t.methods)){const s=e(Object.assign(Object.assign({},i),{localName:r,service:t}));s!=null&&(n[r]=s)}return n}function Nh(t){let e,n=new Uint8Array(0);function r(i){const s=new Uint8Array(n.length+i.length);s.set(n),s.set(i,n.length),n=s}return new ReadableStream({start(){e=t.getReader()},async pull(i){let s;for(;;){if(s===void 0&&n.byteLength>=5){let l=0;for(let c=1;c<5;c++)l=(l<<8)+n[c];s={flags:n[0],length:l}}if(s!==void 0&&n.byteLength>=s.length+5)break;const a=await e.read();if(a.done)break;r(a.value)}if(s===void 0){if(n.byteLength==0){i.close();return}i.error(new me("premature end of stream",_.DataLoss));return}const o=n.subarray(5,5+s.length);n=n.subarray(5+s.length),i.enqueue({flags:s.flags,data:o})}})}function Ph(t,e){const n=new Uint8Array(e.length+5);n.set(e,5);const r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.setUint8(0,t),r.setUint32(1,e.length),n}var Yw=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}},co=function(t){return this instanceof co?(this.v=t,this):new co(t)},Qw=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(w){return Promise.resolve(w).then(m,h)}}function a(m,w){r[m]&&(i[m]=function(I){return new Promise(function(O,y){s.push([m,I,O,y])>1||l(m,I)})},w&&(i[m]=w(i[m])))}function l(m,w){try{c(r[m](w))}catch(I){p(s[0][3],I)}}function c(m){m.value instanceof co?Promise.resolve(m.value.v).then(d,h):p(s[0][2],m)}function d(m){l("next",m)}function h(m){l("throw",m)}function p(m,w){m(w),s.shift(),s.length&&l(s[0][0],s[0][1])}},Xw=function(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:co(t[i](o)),done:!1}:s?s(o):o}:s}};function Zw(t){return Qw(this,arguments,function*(){yield co(yield*Xw(Yw(t)))})}var Lp=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}},as=function(t){return this instanceof as?(this.v=t,this):new as(t)},e1=function(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:as(t[i](o)),done:!1}:s?s(o):o}:s}},t1=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(w){return Promise.resolve(w).then(m,h)}}function a(m,w){r[m]&&(i[m]=function(I){return new Promise(function(O,y){s.push([m,I,O,y])>1||l(m,I)})},w&&(i[m]=w(i[m])))}function l(m,w){try{c(r[m](w))}catch(I){p(s[0][3],I)}}function c(m){m.value instanceof as?Promise.resolve(m.value.v).then(d,h):p(s[0][2],m)}function d(m){l("next",m)}function h(m){l("throw",m)}function p(m,w){m(w),s.shift(),s.length&&l(s[0][0],s[0][1])}};function n1(t,e){return Gw(t,n=>{switch(n.kind){case Be.Unary:return r1(e,t,n);case Be.ServerStreaming:return i1(e,t,n);case Be.ClientStreaming:return s1(e,t,n);case Be.BiDiStreaming:return o1(e,t,n);default:return null}})}function r1(t,e,n){return async function(r,i){var s,o;const a=await t.unary(e,n,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);return(s=i==null?void 0:i.onHeader)===null||s===void 0||s.call(i,a.header),(o=i==null?void 0:i.onTrailer)===null||o===void 0||o.call(i,a.trailer),a.message}}function i1(t,e,n){return function(r,i){return Bp(t.stream(e,n,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,Zw([r]),i==null?void 0:i.contextValues),i)}}function s1(t,e,n){return async function(r,i){var s,o,a,l,c,d;const h=await t.stream(e,n,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);(c=i==null?void 0:i.onHeader)===null||c===void 0||c.call(i,h.header);let p;try{for(var m=!0,w=Lp(h.message),I;I=await w.next(),s=I.done,!s;m=!0)l=I.value,m=!1,p=l}catch(O){o={error:O}}finally{try{!m&&!s&&(a=w.return)&&await a.call(w)}finally{if(o)throw o.error}}if(!p)throw new me("protocol error: missing response message",_.Internal);return(d=i==null?void 0:i.onTrailer)===null||d===void 0||d.call(i,h.trailer),p}}function o1(t,e,n){return function(r,i){return Bp(t.stream(e,n,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues),i)}}function Bp(t,e){const n=function(){var r,i;return t1(this,arguments,function*(){const s=yield as(t);(r=e==null?void 0:e.onHeader)===null||r===void 0||r.call(e,s.header),yield as(yield*e1(Lp(s.message))),(i=e==null?void 0:e.onTrailer)===null||i===void 0||i.call(e,s.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>n.next()})}}function a1(...t){const e=new AbortController,n=t.filter(i=>i!==void 0).concat(e.signal);for(const i of n){if(i.aborted){r.apply(i);break}i.addEventListener("abort",r)}function r(){e.signal.aborted||e.abort(bp(this));for(const i of n)i.removeEventListener("abort",r)}return e}function l1(t){const e=new AbortController,n=()=>{e.abort(new me("the operation timed out",_.DeadlineExceeded))};let r;return t!==void 0&&(t<=0?n():r=setTimeout(n,t)),{signal:e.signal,cleanup:()=>clearTimeout(r)}}function bp(t){if(!t.aborted)return;if(t.reason!==void 0)return t.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function Dh(){return{get(t){return t.id in this?this[t.id]:t.defaultValue},set(t,e){return this[t.id]=e,this},delete(t){return delete this[t.id],this}}}const pu=128;function Oh(t){const e=new Headers,n=new TextDecoder().decode(t).split(`\r
`);for(const r of n){if(r==="")continue;const i=r.indexOf(":");if(i>0){const s=r.substring(0,i).trim(),o=r.substring(i+1).trim();e.append(s,o)}}return e}const u1="Content-Type",c1="Grpc-Timeout",Fp="Grpc-Status",Mp="Grpc-Message",f1="Grpc-Status-Details-Bin",d1="X-User-Agent",h1="X-Grpc-Web",g1="application/grpc-web+proto",m1="application/grpc-web+json";class cr extends D{constructor(e){super(),this.code=0,this.message="",this.details=[],f.util.initPartial(e,this)}static fromBinary(e,n){return new cr().fromBinary(e,n)}static fromJson(e,n){return new cr().fromJson(e,n)}static fromJsonString(e,n){return new cr().fromJsonString(e,n)}static equals(e,n){return f.util.equals(cr,e,n)}}cr.runtime=f;cr.typeName="google.rpc.Status";cr.fields=f.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:Vt,repeated:!0}]);const p1="0";function Jp(t){var e;const n=t.get(f1);if(n!=null){const i=_w(n,cr);if(i.code==0)return;const s=new me(i.message,i.code,t);return s.details=i.details.map(o=>({type:o.typeUrl.substring(o.typeUrl.lastIndexOf("/")+1),value:o.value})),s}const r=t.get(Fp);if(r!=null){if(r===p1)return;const i=parseInt(r,10);return i in _?new me(decodeURIComponent((e=t.get(Mp))!==null&&e!==void 0?e:""),i,t):new me(`invalid grpc-status: ${r}`,_.Internal,t)}}function Rh(t,e,n){const r=typeof e=="string"?e:e.typeName,i=typeof n=="string"?n:n.name;return t.toString().replace(/\/?$/,`/${r}/${i}`)}function $p(t,e){return e instanceof t?e:new t(e)}function y1(t,e){function n(r){return r.done===!0?r:{done:r.done,value:$p(t,r.value)}}return{[Symbol.asyncIterator](){const r=e[Symbol.asyncIterator](),i={next:()=>r.next().then(n)};return r.throw!==void 0&&(i.throw=s=>r.throw(s).then(n)),r.return!==void 0&&(i.return=s=>r.return(s).then(n)),i}}}function zp(t,e){var n;return(n=e==null?void 0:e.concat().reverse().reduce((r,i)=>i(r),t))!==null&&n!==void 0?n:t}function v1(t){var e;const n=Object.assign({},t);return(e=n.ignoreUnknownFields)!==null&&e!==void 0||(n.ignoreUnknownFields=!0),n}function Lh(t,e,n,r){const i=e?Bh(t.I,r):bh(t.I,n);return{parse:(e?Bh(t.O,r):bh(t.O,n)).parse,serialize:i.serialize}}function Bh(t,e){return{parse(n){try{return t.fromBinary(n,e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new me(`parse binary: ${i}`,_.InvalidArgument)}},serialize(n){try{return n.toBinary(e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new me(`serialize binary: ${i}`,_.Internal)}}}}function bh(t,e){var n,r;const i=(n=e==null?void 0:e.textEncoder)!==null&&n!==void 0?n:new TextEncoder,s=(r=e==null?void 0:e.textDecoder)!==null&&r!==void 0?r:new TextDecoder,o=v1(e);return{parse(a){try{const l=s.decode(a);return t.fromJsonString(l,o)}catch(l){throw me.from(l,_.InvalidArgument)}},serialize(a){try{const l=a.toJsonString(o);return i.encode(l)}catch(l){throw me.from(l,_.Internal)}}}}function w1(t){const e=zp(t.next,t.interceptors),[n,r,i]=Up(t),s=Object.assign(Object.assign({},t.req),{message:$p(t.req.method.I,t.req.message),signal:n});return e(s).then(o=>(i(),o),r)}function S1(t){const e=zp(t.next,t.interceptors),[n,r,i]=Up(t),s=Object.assign(Object.assign({},t.req),{message:y1(t.req.method.I,t.req.message),signal:n});let o=!1;return n.addEventListener("abort",function(){var a,l;const c=t.req.message[Symbol.asyncIterator]();o||(a=c.throw)===null||a===void 0||a.call(c,this.reason).catch(()=>{}),(l=c.return)===null||l===void 0||l.call(c).catch(()=>{})}),e(s).then(a=>Object.assign(Object.assign({},a),{message:{[Symbol.asyncIterator](){const l=a.message[Symbol.asyncIterator]();return{next(){return l.next().then(c=>(c.done==!0&&(o=!0,i()),c),r)}}}}}),r)}function Up(t){const{signal:e,cleanup:n}=l1(t.timeoutMs),r=a1(t.signal,e);return[r.signal,function(s){const o=me.from(e.aborted?bp(e):s);return r.abort(o),n(),Promise.reject(o)},function(){n(),r.abort()}]}function k1(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function Fh(t,e){const n=Jp(t);if(n)throw e.forEach((r,i)=>{n.metadata.append(i,r)}),n}function Mh(t,e,n,r){const i=new Headers(n??{});return i.set(u1,t?g1:m1),i.set(h1,"1"),i.set(d1,"connect-es/1.4.0"),e!==void 0&&i.set(c1,`${e}m`),i}function T1(t){switch(t){case 400:return _.Internal;case 401:return _.Unauthenticated;case 403:return _.PermissionDenied;case 404:return _.Unimplemented;case 429:return _.Unavailable;case 502:return _.Unavailable;case 503:return _.Unavailable;case 504:return _.Unavailable;default:return _.Unknown}}function Jh(t,e){var n;if(t>=200&&t<300){const r=Jp(e);if(r)throw r;return{foundStatus:e.has(Fp)}}throw new me(decodeURIComponent((n=e.get(Mp))!==null&&n!==void 0?n:`HTTP ${t}`),T1(t),e)}var ci=function(t){return this instanceof ci?(this.v=t,this):new ci(t)},A1=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(w){return Promise.resolve(w).then(m,h)}}function a(m,w){r[m]&&(i[m]=function(I){return new Promise(function(O,y){s.push([m,I,O,y])>1||l(m,I)})},w&&(i[m]=w(i[m])))}function l(m,w){try{c(r[m](w))}catch(I){p(s[0][3],I)}}function c(m){m.value instanceof ci?Promise.resolve(m.value.v).then(d,h):p(s[0][2],m)}function d(m){l("next",m)}function h(m){l("throw",m)}function p(m,w){m(w),s.shift(),s.length&&l(s[0][0],s[0][1])}};function I1(t){var e;k1();const n=(e=t.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(r,i,s,o,a,l,c){var d;const{serialize:h,parse:p}=Lh(i,n,t.jsonOptions,t.binaryOptions);return o=o===void 0?t.defaultTimeoutMs:o<=0?void 0:o,await w1({interceptors:t.interceptors,signal:s,timeoutMs:o,req:{stream:!1,service:r,method:i,url:Rh(t.baseUrl,r,i),init:{method:"POST",credentials:(d=t.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:Mh(n,o,a),contextValues:c??Dh(),message:l},next:async m=>{var w;const O=await((w=t.fetch)!==null&&w!==void 0?w:globalThis.fetch)(m.url,Object.assign(Object.assign({},m.init),{headers:m.header,signal:m.signal,body:Ph(0,h(m.message))}));if(Jh(O.status,O.headers),!O.body)throw"missing response body";const y=Nh(O.body).getReader();let g,v;for(;;){const T=await y.read();if(T.done)break;const{flags:x,data:N}=T.value;if(x===pu){if(g!==void 0)throw"extra trailer";g=Oh(N);continue}if(v!==void 0)throw"extra message";v=p(N)}if(g===void 0)throw"missing trailer";if(Fh(g,O.headers),v===void 0)throw"missing message";return{stream:!1,service:r,method:i,header:O.headers,message:v,trailer:g}}})},async stream(r,i,s,o,a,l,c){var d;const{serialize:h,parse:p}=Lh(i,n,t.jsonOptions,t.binaryOptions);function m(I,O,y,g){return A1(this,arguments,function*(){const T=Nh(I).getReader();if(O){if(!(yield ci(T.read())).done)throw"extra data for trailers-only";return yield ci(void 0)}let x=!1;for(;;){const N=yield ci(T.read());if(N.done)break;const{flags:P,data:B}=N.value;if((P&pu)===pu){if(x)throw"extra trailer";x=!0;const H=Oh(B);Fh(H,g),H.forEach((U,_e)=>y.set(_e,U));continue}if(x)throw"extra message";yield yield ci(p(B))}if(!x)throw"missing trailer"})}async function w(I){if(i.kind!=Be.ServerStreaming)throw"The fetch API does not support streaming request bodies";const O=await I[Symbol.asyncIterator]().next();if(O.done==!0)throw"missing request message";return Ph(0,h(O.value))}return o=o===void 0?t.defaultTimeoutMs:o<=0?void 0:o,S1({interceptors:t.interceptors,signal:s,timeoutMs:o,req:{stream:!0,service:r,method:i,url:Rh(t.baseUrl,r,i),init:{method:"POST",credentials:(d=t.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:Mh(n,o,a),contextValues:c??Dh(),message:l},next:async I=>{var O;const g=await((O=t.fetch)!==null&&O!==void 0?O:globalThis.fetch)(I.url,Object.assign(Object.assign({},I.init),{headers:I.header,signal:I.signal,body:await w(I.message)})),{foundStatus:v}=Jh(g.status,g.headers);if(!g.body)throw"missing response body";const T=new Headers;return Object.assign(Object.assign({},I),{header:g.headers,trailer:T,message:m(g.body,v,T,g.headers)})}})}}}var $=(t=>(t[t.NULL=0]="NULL",t[t.BOOLEAN=1]="BOOLEAN",t[t.INTEGER=2]="INTEGER",t[t.LONG=3]="LONG",t[t.DOUBLE=4]="DOUBLE",t[t.STRING=5]="STRING",t[t.BYTES=6]="BYTES",t[t.DATE=7]="DATE",t[t.JSON_OBJECT=8]="JSON_OBJECT",t[t.JSON_ARRAY=9]="JSON_ARRAY",t[t.TEXT=10]="TEXT",t[t.INTEGER_CNT=11]="INTEGER_CNT",t[t.LONG_CNT=12]="LONG_CNT",t[t.TREE=13]="TREE",t))($||{});f.util.setEnumType($,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var mi=(t=>(t[t.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",t[t.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",t[t.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",t[t.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",t))(mi||{});f.util.setEnumType(mi,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const on=class on extends D{constructor(n){super();u(this,"root");u(this,"presences",{});f.util.initPartial(n,this)}static fromBinary(n,r){return new on().fromBinary(n,r)}static fromJson(n,r){return new on().fromJson(n,r)}static fromJsonString(n,r){return new on().fromJsonString(n,r)}static equals(n,r){return f.util.equals(on,n,r)}};u(on,"runtime",f),u(on,"typeName","yorkie.v1.Snapshot"),u(on,"fields",f.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:He},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:jf}}]));let pc=on;var ut;let Tr=(ut=class extends D{constructor(n){super();u(this,"documentKey","");u(this,"checkpoint");u(this,"snapshot",new Uint8Array(0));u(this,"changes",[]);u(this,"minSyncedTicket");u(this,"isRemoved",!1);f.util.initPartial(n,this)}static fromBinary(n,r){return new ut().fromBinary(n,r)}static fromJson(n,r){return new ut().fromJson(n,r)}static fromJsonString(n,r){return new ut().fromJsonString(n,r)}static equals(n,r){return f.util.equals(ut,n,r)}},u(ut,"runtime",f),u(ut,"typeName","yorkie.v1.ChangePack"),u(ut,"fields",f.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:Vp},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:jp,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:b},{no:6,name:"is_removed",kind:"scalar",T:8}])),ut);var ct;let jp=(ct=class extends D{constructor(n){super();u(this,"id");u(this,"message","");u(this,"operations",[]);u(this,"presenceChange");f.util.initPartial(n,this)}static fromBinary(n,r){return new ct().fromBinary(n,r)}static fromJson(n,r){return new ct().fromJson(n,r)}static fromJsonString(n,r){return new ct().fromJsonString(n,r)}static equals(n,r){return f.util.equals(ct,n,r)}},u(ct,"runtime",f),u(ct,"typeName","yorkie.v1.Change"),u(ct,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Rl},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:Uf,repeated:!0},{no:4,name:"presence_change",kind:"message",T:go}])),ct);var ft;let Rl=(ft=class extends D{constructor(n){super();u(this,"clientSeq",0);u(this,"serverSeq",ne.zero);u(this,"lamport",ne.zero);u(this,"actorId",new Uint8Array(0));f.util.initPartial(n,this)}static fromBinary(n,r){return new ft().fromBinary(n,r)}static fromJson(n,r){return new ft().fromJson(n,r)}static fromJsonString(n,r){return new ft().fromJsonString(n,r)}static equals(n,r){return f.util.equals(ft,n,r)}},u(ft,"runtime",f),u(ft,"typeName","yorkie.v1.ChangeID"),u(ft,"fields",f.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12}])),ft);var dt;let Uf=(dt=class extends D{constructor(n){super();u(this,"body",{case:void 0});f.util.initPartial(n,this)}static fromBinary(n,r){return new dt().fromBinary(n,r)}static fromJson(n,r){return new dt().fromJson(n,r)}static fromJsonString(n,r){return new dt().fromJsonString(n,r)}static equals(n,r){return f.util.equals(dt,n,r)}},u(dt,"runtime",f),u(dt,"typeName","yorkie.v1.Operation"),u(dt,"fields",f.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:Ha,oneof:"body"},{no:2,name:"add",kind:"message",T:_a,oneof:"body"},{no:3,name:"move",kind:"message",T:Ga,oneof:"body"},{no:4,name:"remove",kind:"message",T:Ya,oneof:"body"},{no:5,name:"edit",kind:"message",T:Qa,oneof:"body"},{no:6,name:"select",kind:"message",T:yc,oneof:"body"},{no:7,name:"style",kind:"message",T:Xa,oneof:"body"},{no:8,name:"increase",kind:"message",T:Za,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:el,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:tl,oneof:"body"},{no:11,name:"array_set",kind:"message",T:vc,oneof:"body"}])),dt);const an=class an extends D{constructor(n){super();u(this,"parentCreatedAt");u(this,"key","");u(this,"value");u(this,"executedAt");f.util.initPartial(n,this)}static fromBinary(n,r){return new an().fromBinary(n,r)}static fromJson(n,r){return new an().fromJson(n,r)}static fromJsonString(n,r){return new an().fromJsonString(n,r)}static equals(n,r){return f.util.equals(an,n,r)}};u(an,"runtime",f),u(an,"typeName","yorkie.v1.Operation.Set"),u(an,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:lt},{no:4,name:"executed_at",kind:"message",T:b}]));let Ha=an;const ln=class ln extends D{constructor(n){super();u(this,"parentCreatedAt");u(this,"prevCreatedAt");u(this,"value");u(this,"executedAt");f.util.initPartial(n,this)}static fromBinary(n,r){return new ln().fromBinary(n,r)}static fromJson(n,r){return new ln().fromJson(n,r)}static fromJsonString(n,r){return new ln().fromJsonString(n,r)}static equals(n,r){return f.util.equals(ln,n,r)}};u(ln,"runtime",f),u(ln,"typeName","yorkie.v1.Operation.Add"),u(ln,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"prev_created_at",kind:"message",T:b},{no:3,name:"value",kind:"message",T:lt},{no:4,name:"executed_at",kind:"message",T:b}]));let _a=ln;const un=class un extends D{constructor(n){super();u(this,"parentCreatedAt");u(this,"prevCreatedAt");u(this,"createdAt");u(this,"executedAt");f.util.initPartial(n,this)}static fromBinary(n,r){return new un().fromBinary(n,r)}static fromJson(n,r){return new un().fromJson(n,r)}static fromJsonString(n,r){return new un().fromJsonString(n,r)}static equals(n,r){return f.util.equals(un,n,r)}};u(un,"runtime",f),u(un,"typeName","yorkie.v1.Operation.Move"),u(un,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"prev_created_at",kind:"message",T:b},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"executed_at",kind:"message",T:b}]));let Ga=un;const cn=class cn extends D{constructor(n){super();u(this,"parentCreatedAt");u(this,"createdAt");u(this,"executedAt");f.util.initPartial(n,this)}static fromBinary(n,r){return new cn().fromBinary(n,r)}static fromJson(n,r){return new cn().fromJson(n,r)}static fromJsonString(n,r){return new cn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(cn,n,r)}};u(cn,"runtime",f),u(cn,"typeName","yorkie.v1.Operation.Remove"),u(cn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"executed_at",kind:"message",T:b}]));let Ya=cn;const fn=class fn extends D{constructor(n){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"createdAtMapByActor",{});u(this,"content","");u(this,"executedAt");u(this,"attributes",{});f.util.initPartial(n,this)}static fromBinary(n,r){return new fn().fromBinary(n,r)}static fromJson(n,r){return new fn().fromJson(n,r)}static fromJsonString(n,r){return new fn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(fn,n,r)}};u(fn,"runtime",f),u(fn,"typeName","yorkie.v1.Operation.Edit"),u(fn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:wr},{no:3,name:"to",kind:"message",T:wr},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:b},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Qa=fn;const dn=class dn extends D{constructor(n){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"executedAt");f.util.initPartial(n,this)}static fromBinary(n,r){return new dn().fromBinary(n,r)}static fromJson(n,r){return new dn().fromJson(n,r)}static fromJsonString(n,r){return new dn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(dn,n,r)}};u(dn,"runtime",f),u(dn,"typeName","yorkie.v1.Operation.Select"),u(dn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:wr},{no:3,name:"to",kind:"message",T:wr},{no:4,name:"executed_at",kind:"message",T:b}]));let yc=dn;const hn=class hn extends D{constructor(n){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"attributes",{});u(this,"executedAt");u(this,"createdAtMapByActor",{});f.util.initPartial(n,this)}static fromBinary(n,r){return new hn().fromBinary(n,r)}static fromJson(n,r){return new hn().fromJson(n,r)}static fromJsonString(n,r){return new hn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(hn,n,r)}};u(hn,"runtime",f),u(hn,"typeName","yorkie.v1.Operation.Style"),u(hn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:wr},{no:3,name:"to",kind:"message",T:wr},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:b},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}}]));let Xa=hn;const gn=class gn extends D{constructor(n){super();u(this,"parentCreatedAt");u(this,"value");u(this,"executedAt");f.util.initPartial(n,this)}static fromBinary(n,r){return new gn().fromBinary(n,r)}static fromJson(n,r){return new gn().fromJson(n,r)}static fromJsonString(n,r){return new gn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(gn,n,r)}};u(gn,"runtime",f),u(gn,"typeName","yorkie.v1.Operation.Increase"),u(gn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"value",kind:"message",T:lt},{no:3,name:"executed_at",kind:"message",T:b}]));let Za=gn;const mn=class mn extends D{constructor(n){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"createdAtMapByActor",{});u(this,"contents",[]);u(this,"splitLevel",0);u(this,"executedAt");f.util.initPartial(n,this)}static fromBinary(n,r){return new mn().fromBinary(n,r)}static fromJson(n,r){return new mn().fromJson(n,r)}static fromJsonString(n,r){return new mn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(mn,n,r)}};u(mn,"runtime",f),u(mn,"typeName","yorkie.v1.Operation.TreeEdit"),u(mn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:ki},{no:3,name:"to",kind:"message",T:ki},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}},{no:5,name:"contents",kind:"message",T:cl,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:b}]));let el=mn;const pn=class pn extends D{constructor(n){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"attributes",{});u(this,"executedAt");u(this,"attributesToRemove",[]);u(this,"createdAtMapByActor",{});f.util.initPartial(n,this)}static fromBinary(n,r){return new pn().fromBinary(n,r)}static fromJson(n,r){return new pn().fromJson(n,r)}static fromJsonString(n,r){return new pn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(pn,n,r)}};u(pn,"runtime",f),u(pn,"typeName","yorkie.v1.Operation.TreeStyle"),u(pn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:ki},{no:3,name:"to",kind:"message",T:ki},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:b},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}}]));let tl=pn;const yn=class yn extends D{constructor(n){super();u(this,"parentCreatedAt");u(this,"createdAt");u(this,"value");u(this,"executedAt");f.util.initPartial(n,this)}static fromBinary(n,r){return new yn().fromBinary(n,r)}static fromJson(n,r){return new yn().fromJson(n,r)}static fromJsonString(n,r){return new yn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(yn,n,r)}};u(yn,"runtime",f),u(yn,"typeName","yorkie.v1.Operation.ArraySet"),u(yn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"value",kind:"message",T:lt},{no:4,name:"executed_at",kind:"message",T:b}]));let vc=yn;const vn=class vn extends D{constructor(n){super();u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");u(this,"type",0);u(this,"value",new Uint8Array(0));f.util.initPartial(n,this)}static fromBinary(n,r){return new vn().fromBinary(n,r)}static fromJson(n,r){return new vn().fromJson(n,r)}static fromJsonString(n,r){return new vn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(vn,n,r)}};u(vn,"runtime",f),u(vn,"typeName","yorkie.v1.JSONElementSimple"),u(vn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"moved_at",kind:"message",T:b},{no:3,name:"removed_at",kind:"message",T:b},{no:4,name:"type",kind:"enum",T:f.getEnumType($)},{no:5,name:"value",kind:"scalar",T:12}]));let lt=vn;const wn=class wn extends D{constructor(n){super();u(this,"body",{case:void 0});f.util.initPartial(n,this)}static fromBinary(n,r){return new wn().fromBinary(n,r)}static fromJson(n,r){return new wn().fromJson(n,r)}static fromJsonString(n,r){return new wn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(wn,n,r)}};u(wn,"runtime",f),u(wn,"typeName","yorkie.v1.JSONElement"),u(wn,"fields",f.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:nl,oneof:"body"},{no:2,name:"json_array",kind:"message",T:rl,oneof:"body"},{no:3,name:"primitive",kind:"message",T:il,oneof:"body"},{no:5,name:"text",kind:"message",T:sl,oneof:"body"},{no:6,name:"counter",kind:"message",T:ol,oneof:"body"},{no:7,name:"tree",kind:"message",T:al,oneof:"body"}]));let He=wn;const Sn=class Sn extends D{constructor(n){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(n,this)}static fromBinary(n,r){return new Sn().fromBinary(n,r)}static fromJson(n,r){return new Sn().fromJson(n,r)}static fromJsonString(n,r){return new Sn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Sn,n,r)}};u(Sn,"runtime",f),u(Sn,"typeName","yorkie.v1.JSONElement.JSONObject"),u(Sn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:qp,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let nl=Sn;const kn=class kn extends D{constructor(n){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(n,this)}static fromBinary(n,r){return new kn().fromBinary(n,r)}static fromJson(n,r){return new kn().fromJson(n,r)}static fromJsonString(n,r){return new kn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(kn,n,r)}};u(kn,"runtime",f),u(kn,"typeName","yorkie.v1.JSONElement.JSONArray"),u(kn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:ll,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let rl=kn;const Tn=class Tn extends D{constructor(n){super();u(this,"type",0);u(this,"value",new Uint8Array(0));u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(n,this)}static fromBinary(n,r){return new Tn().fromBinary(n,r)}static fromJson(n,r){return new Tn().fromJson(n,r)}static fromJsonString(n,r){return new Tn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Tn,n,r)}};u(Tn,"runtime",f),u(Tn,"typeName","yorkie.v1.JSONElement.Primitive"),u(Tn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType($)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"moved_at",kind:"message",T:b},{no:5,name:"removed_at",kind:"message",T:b}]));let il=Tn;const An=class An extends D{constructor(n){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(n,this)}static fromBinary(n,r){return new An().fromBinary(n,r)}static fromJson(n,r){return new An().fromJson(n,r)}static fromJsonString(n,r){return new An().fromJsonString(n,r)}static equals(n,r){return f.util.equals(An,n,r)}};u(An,"runtime",f),u(An,"typeName","yorkie.v1.JSONElement.Text"),u(An,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:ul,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let sl=An;const In=class In extends D{constructor(n){super();u(this,"type",0);u(this,"value",new Uint8Array(0));u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(n,this)}static fromBinary(n,r){return new In().fromBinary(n,r)}static fromJson(n,r){return new In().fromJson(n,r)}static fromJsonString(n,r){return new In().fromJsonString(n,r)}static equals(n,r){return f.util.equals(In,n,r)}};u(In,"runtime",f),u(In,"typeName","yorkie.v1.JSONElement.Counter"),u(In,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType($)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"moved_at",kind:"message",T:b},{no:5,name:"removed_at",kind:"message",T:b}]));let ol=In;const En=class En extends D{constructor(n){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(n,this)}static fromBinary(n,r){return new En().fromBinary(n,r)}static fromJson(n,r){return new En().fromJson(n,r)}static fromJsonString(n,r){return new En().fromJsonString(n,r)}static equals(n,r){return f.util.equals(En,n,r)}};u(En,"runtime",f),u(En,"typeName","yorkie.v1.JSONElement.Tree"),u(En,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:ho,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let al=En;var ht;let qp=(ht=class extends D{constructor(n){super();u(this,"key","");u(this,"element");f.util.initPartial(n,this)}static fromBinary(n,r){return new ht().fromBinary(n,r)}static fromJson(n,r){return new ht().fromJson(n,r)}static fromJsonString(n,r){return new ht().fromJsonString(n,r)}static equals(n,r){return f.util.equals(ht,n,r)}},u(ht,"runtime",f),u(ht,"typeName","yorkie.v1.RHTNode"),u(ht,"fields",f.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:He}])),ht);const Ut=class Ut extends D{constructor(n){super();u(this,"next");u(this,"element");f.util.initPartial(n,this)}static fromBinary(n,r){return new Ut().fromBinary(n,r)}static fromJson(n,r){return new Ut().fromJson(n,r)}static fromJsonString(n,r){return new Ut().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Ut,n,r)}};u(Ut,"runtime",f),u(Ut,"typeName","yorkie.v1.RGANode"),u(Ut,"fields",f.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:Ut},{no:2,name:"element",kind:"message",T:He}]));let ll=Ut;const xn=class xn extends D{constructor(n){super();u(this,"value","");u(this,"updatedAt");u(this,"isRemoved",!1);f.util.initPartial(n,this)}static fromBinary(n,r){return new xn().fromBinary(n,r)}static fromJson(n,r){return new xn().fromJson(n,r)}static fromJsonString(n,r){return new xn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(xn,n,r)}};u(xn,"runtime",f),u(xn,"typeName","yorkie.v1.NodeAttr"),u(xn,"fields",f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:b},{no:3,name:"is_removed",kind:"scalar",T:8}]));let ls=xn;const Cn=class Cn extends D{constructor(n){super();u(this,"id");u(this,"value","");u(this,"removedAt");u(this,"insPrevId");u(this,"attributes",{});f.util.initPartial(n,this)}static fromBinary(n,r){return new Cn().fromBinary(n,r)}static fromJson(n,r){return new Cn().fromJson(n,r)}static fromJsonString(n,r){return new Cn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Cn,n,r)}};u(Cn,"runtime",f),u(Cn,"typeName","yorkie.v1.TextNode"),u(Cn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:fo},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:b},{no:4,name:"ins_prev_id",kind:"message",T:fo},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:ls}}]));let ul=Cn;const Nn=class Nn extends D{constructor(n){super();u(this,"createdAt");u(this,"offset",0);f.util.initPartial(n,this)}static fromBinary(n,r){return new Nn().fromBinary(n,r)}static fromJson(n,r){return new Nn().fromJson(n,r)}static fromJsonString(n,r){return new Nn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Nn,n,r)}};u(Nn,"runtime",f),u(Nn,"typeName","yorkie.v1.TextNodeID"),u(Nn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5}]));let fo=Nn;const Pn=class Pn extends D{constructor(n){super();u(this,"id");u(this,"type","");u(this,"value","");u(this,"removedAt");u(this,"insPrevId");u(this,"insNextId");u(this,"depth",0);u(this,"attributes",{});f.util.initPartial(n,this)}static fromBinary(n,r){return new Pn().fromBinary(n,r)}static fromJson(n,r){return new Pn().fromJson(n,r)}static fromJsonString(n,r){return new Pn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Pn,n,r)}};u(Pn,"runtime",f),u(Pn,"typeName","yorkie.v1.TreeNode"),u(Pn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Vr},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:b},{no:5,name:"ins_prev_id",kind:"message",T:Vr},{no:6,name:"ins_next_id",kind:"message",T:Vr},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:ls}}]));let ho=Pn;const Dn=class Dn extends D{constructor(n){super();u(this,"content",[]);f.util.initPartial(n,this)}static fromBinary(n,r){return new Dn().fromBinary(n,r)}static fromJson(n,r){return new Dn().fromJson(n,r)}static fromJsonString(n,r){return new Dn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Dn,n,r)}};u(Dn,"runtime",f),u(Dn,"typeName","yorkie.v1.TreeNodes"),u(Dn,"fields",f.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:ho,repeated:!0}]));let cl=Dn;const On=class On extends D{constructor(n){super();u(this,"createdAt");u(this,"offset",0);f.util.initPartial(n,this)}static fromBinary(n,r){return new On().fromBinary(n,r)}static fromJson(n,r){return new On().fromJson(n,r)}static fromJsonString(n,r){return new On().fromJsonString(n,r)}static equals(n,r){return f.util.equals(On,n,r)}};u(On,"runtime",f),u(On,"typeName","yorkie.v1.TreeNodeID"),u(On,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5}]));let Vr=On;const Rn=class Rn extends D{constructor(n){super();u(this,"parentId");u(this,"leftSiblingId");f.util.initPartial(n,this)}static fromBinary(n,r){return new Rn().fromBinary(n,r)}static fromJson(n,r){return new Rn().fromJson(n,r)}static fromJsonString(n,r){return new Rn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Rn,n,r)}};u(Rn,"runtime",f),u(Rn,"typeName","yorkie.v1.TreePos"),u(Rn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:Vr},{no:2,name:"left_sibling_id",kind:"message",T:Vr}]));let ki=Rn;const Ln=class Ln extends D{constructor(n){super();u(this,"id","");u(this,"username","");u(this,"createdAt");f.util.initPartial(n,this)}static fromBinary(n,r){return new Ln().fromBinary(n,r)}static fromJson(n,r){return new Ln().fromJson(n,r)}static fromJsonString(n,r){return new Ln().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Ln,n,r)}};u(Ln,"runtime",f),u(Ln,"typeName","yorkie.v1.User"),u(Ln,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:De}]));let $h=Ln;const Bn=class Bn extends D{constructor(n){super();u(this,"id","");u(this,"name","");u(this,"publicKey","");u(this,"secretKey","");u(this,"authWebhookUrl","");u(this,"authWebhookMethods",[]);u(this,"clientDeactivateThreshold","");u(this,"createdAt");u(this,"updatedAt");f.util.initPartial(n,this)}static fromBinary(n,r){return new Bn().fromBinary(n,r)}static fromJson(n,r){return new Bn().fromJson(n,r)}static fromJsonString(n,r){return new Bn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Bn,n,r)}};u(Bn,"runtime",f),u(Bn,"typeName","yorkie.v1.Project"),u(Bn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:De},{no:9,name:"updated_at",kind:"message",T:De}]));let zh=Bn;const bn=class bn extends D{constructor(n){super();u(this,"name");u(this,"authWebhookUrl");u(this,"authWebhookMethods");u(this,"clientDeactivateThreshold");f.util.initPartial(n,this)}static fromBinary(n,r){return new bn().fromBinary(n,r)}static fromJson(n,r){return new bn().fromJson(n,r)}static fromJsonString(n,r){return new bn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(bn,n,r)}};u(bn,"runtime",f),u(bn,"typeName","yorkie.v1.UpdatableProjectFields"),u(bn,"fields",f.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:Qe},{no:2,name:"auth_webhook_url",kind:"message",T:Qe},{no:3,name:"auth_webhook_methods",kind:"message",T:wc},{no:4,name:"client_deactivate_threshold",kind:"message",T:Qe}]));let Uh=bn;const Fn=class Fn extends D{constructor(n){super();u(this,"methods",[]);f.util.initPartial(n,this)}static fromBinary(n,r){return new Fn().fromBinary(n,r)}static fromJson(n,r){return new Fn().fromJson(n,r)}static fromJsonString(n,r){return new Fn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Fn,n,r)}};u(Fn,"runtime",f),u(Fn,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),u(Fn,"fields",f.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let wc=Fn;const Mn=class Mn extends D{constructor(n){super();u(this,"id","");u(this,"key","");u(this,"snapshot","");u(this,"createdAt");u(this,"accessedAt");u(this,"updatedAt");f.util.initPartial(n,this)}static fromBinary(n,r){return new Mn().fromBinary(n,r)}static fromJson(n,r){return new Mn().fromJson(n,r)}static fromJsonString(n,r){return new Mn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Mn,n,r)}};u(Mn,"runtime",f),u(Mn,"typeName","yorkie.v1.DocumentSummary"),u(Mn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:De},{no:5,name:"accessed_at",kind:"message",T:De},{no:6,name:"updated_at",kind:"message",T:De}]));let jh=Mn;const Jn=class Jn extends D{constructor(n){super();u(this,"type",0);u(this,"presence");f.util.initPartial(n,this)}static fromBinary(n,r){return new Jn().fromBinary(n,r)}static fromJson(n,r){return new Jn().fromJson(n,r)}static fromJsonString(n,r){return new Jn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Jn,n,r)}};u(Jn,"runtime",f),u(Jn,"typeName","yorkie.v1.PresenceChange"),u(Jn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Ti)},{no:2,name:"presence",kind:"message",T:jf}]));let go=Jn;var Ti=(t=>(t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.PUT=1]="PUT",t[t.DELETE=2]="DELETE",t[t.CLEAR=3]="CLEAR",t))(Ti||{});f.util.setEnumType(Ti,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);var gt;let jf=(gt=class extends D{constructor(n){super();u(this,"data",{});f.util.initPartial(n,this)}static fromBinary(n,r){return new gt().fromBinary(n,r)}static fromJson(n,r){return new gt().fromJson(n,r)}static fromJsonString(n,r){return new gt().fromJsonString(n,r)}static equals(n,r){return f.util.equals(gt,n,r)}},u(gt,"runtime",f),u(gt,"typeName","yorkie.v1.Presence"),u(gt,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}])),gt);var mt;let Vp=(mt=class extends D{constructor(n){super();u(this,"serverSeq",ne.zero);u(this,"clientSeq",0);f.util.initPartial(n,this)}static fromBinary(n,r){return new mt().fromBinary(n,r)}static fromJson(n,r){return new mt().fromJson(n,r)}static fromJsonString(n,r){return new mt().fromJsonString(n,r)}static equals(n,r){return f.util.equals(mt,n,r)}},u(mt,"runtime",f),u(mt,"typeName","yorkie.v1.Checkpoint"),u(mt,"fields",f.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),mt);const $n=class $n extends D{constructor(n){super();u(this,"createdAt");u(this,"offset",0);u(this,"relativeOffset",0);f.util.initPartial(n,this)}static fromBinary(n,r){return new $n().fromBinary(n,r)}static fromJson(n,r){return new $n().fromJson(n,r)}static fromJsonString(n,r){return new $n().fromJsonString(n,r)}static equals(n,r){return f.util.equals($n,n,r)}};u($n,"runtime",f),u($n,"typeName","yorkie.v1.TextNodePos"),u($n,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let wr=$n;var pt;let b=(pt=class extends D{constructor(n){super();u(this,"lamport",ne.zero);u(this,"delimiter",0);u(this,"actorId",new Uint8Array(0));f.util.initPartial(n,this)}static fromBinary(n,r){return new pt().fromBinary(n,r)}static fromJson(n,r){return new pt().fromJson(n,r)}static fromJsonString(n,r){return new pt().fromJsonString(n,r)}static equals(n,r){return f.util.equals(pt,n,r)}},u(pt,"runtime",f),u(pt,"typeName","yorkie.v1.TimeTicket"),u(pt,"fields",f.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),pt);const zn=class zn extends D{constructor(n){super();u(this,"topic","");u(this,"payload",new Uint8Array(0));f.util.initPartial(n,this)}static fromBinary(n,r){return new zn().fromBinary(n,r)}static fromJson(n,r){return new zn().fromJson(n,r)}static fromJsonString(n,r){return new zn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(zn,n,r)}};u(zn,"runtime",f),u(zn,"typeName","yorkie.v1.DocEventBody"),u(zn,"fields",f.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let Sc=zn;const Un=class Un extends D{constructor(n){super();u(this,"type",0);u(this,"publisher","");u(this,"body");f.util.initPartial(n,this)}static fromBinary(n,r){return new Un().fromBinary(n,r)}static fromJson(n,r){return new Un().fromJson(n,r)}static fromJsonString(n,r){return new Un().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Un,n,r)}};u(Un,"runtime",f),u(Un,"typeName","yorkie.v1.DocEvent"),u(Un,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(mi)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Sc}]));let kc=Un;const jn=class jn extends D{constructor(n){super();u(this,"clientKey","");f.util.initPartial(n,this)}static fromBinary(n,r){return new jn().fromBinary(n,r)}static fromJson(n,r){return new jn().fromJson(n,r)}static fromJsonString(n,r){return new jn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(jn,n,r)}};u(jn,"runtime",f),u(jn,"typeName","yorkie.v1.ActivateClientRequest"),u(jn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9}]));let Tc=jn;const qn=class qn extends D{constructor(n){super();u(this,"clientId","");f.util.initPartial(n,this)}static fromBinary(n,r){return new qn().fromBinary(n,r)}static fromJson(n,r){return new qn().fromJson(n,r)}static fromJsonString(n,r){return new qn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(qn,n,r)}};u(qn,"runtime",f),u(qn,"typeName","yorkie.v1.ActivateClientResponse"),u(qn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Ac=qn;const Vn=class Vn extends D{constructor(n){super();u(this,"clientId","");f.util.initPartial(n,this)}static fromBinary(n,r){return new Vn().fromBinary(n,r)}static fromJson(n,r){return new Vn().fromJson(n,r)}static fromJsonString(n,r){return new Vn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Vn,n,r)}};u(Vn,"runtime",f),u(Vn,"typeName","yorkie.v1.DeactivateClientRequest"),u(Vn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Ic=Vn;const Kn=class Kn extends D{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,n){return new Kn().fromBinary(e,n)}static fromJson(e,n){return new Kn().fromJson(e,n)}static fromJsonString(e,n){return new Kn().fromJsonString(e,n)}static equals(e,n){return f.util.equals(Kn,e,n)}};u(Kn,"runtime",f),u(Kn,"typeName","yorkie.v1.DeactivateClientResponse"),u(Kn,"fields",f.util.newFieldList(()=>[]));let Ec=Kn;const Wn=class Wn extends D{constructor(n){super();u(this,"clientId","");u(this,"changePack");f.util.initPartial(n,this)}static fromBinary(n,r){return new Wn().fromBinary(n,r)}static fromJson(n,r){return new Wn().fromJson(n,r)}static fromJsonString(n,r){return new Wn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Wn,n,r)}};u(Wn,"runtime",f),u(Wn,"typeName","yorkie.v1.AttachDocumentRequest"),u(Wn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Tr}]));let xc=Wn;const Hn=class Hn extends D{constructor(n){super();u(this,"documentId","");u(this,"changePack");f.util.initPartial(n,this)}static fromBinary(n,r){return new Hn().fromBinary(n,r)}static fromJson(n,r){return new Hn().fromJson(n,r)}static fromJsonString(n,r){return new Hn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Hn,n,r)}};u(Hn,"runtime",f),u(Hn,"typeName","yorkie.v1.AttachDocumentResponse"),u(Hn,"fields",f.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Tr}]));let Cc=Hn;const _n=class _n extends D{constructor(n){super();u(this,"clientId","");u(this,"documentId","");u(this,"changePack");u(this,"removeIfNotAttached",!1);f.util.initPartial(n,this)}static fromBinary(n,r){return new _n().fromBinary(n,r)}static fromJson(n,r){return new _n().fromJson(n,r)}static fromJsonString(n,r){return new _n().fromJsonString(n,r)}static equals(n,r){return f.util.equals(_n,n,r)}};u(_n,"runtime",f),u(_n,"typeName","yorkie.v1.DetachDocumentRequest"),u(_n,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Tr},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let Nc=_n;const Gn=class Gn extends D{constructor(n){super();u(this,"changePack");f.util.initPartial(n,this)}static fromBinary(n,r){return new Gn().fromBinary(n,r)}static fromJson(n,r){return new Gn().fromJson(n,r)}static fromJsonString(n,r){return new Gn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Gn,n,r)}};u(Gn,"runtime",f),u(Gn,"typeName","yorkie.v1.DetachDocumentResponse"),u(Gn,"fields",f.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:Tr}]));let Pc=Gn;const Yn=class Yn extends D{constructor(n){super();u(this,"clientId","");u(this,"documentId","");f.util.initPartial(n,this)}static fromBinary(n,r){return new Yn().fromBinary(n,r)}static fromJson(n,r){return new Yn().fromJson(n,r)}static fromJsonString(n,r){return new Yn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Yn,n,r)}};u(Yn,"runtime",f),u(Yn,"typeName","yorkie.v1.WatchDocumentRequest"),u(Yn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let Dc=Yn;const Qn=class Qn extends D{constructor(n){super();u(this,"body",{case:void 0});f.util.initPartial(n,this)}static fromBinary(n,r){return new Qn().fromBinary(n,r)}static fromJson(n,r){return new Qn().fromJson(n,r)}static fromJsonString(n,r){return new Qn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Qn,n,r)}};u(Qn,"runtime",f),u(Qn,"typeName","yorkie.v1.WatchDocumentResponse"),u(Qn,"fields",f.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:Rc,oneof:"body"},{no:2,name:"event",kind:"message",T:kc,oneof:"body"}]));let Oc=Qn;const Xn=class Xn extends D{constructor(n){super();u(this,"clientIds",[]);f.util.initPartial(n,this)}static fromBinary(n,r){return new Xn().fromBinary(n,r)}static fromJson(n,r){return new Xn().fromJson(n,r)}static fromJsonString(n,r){return new Xn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Xn,n,r)}};u(Xn,"runtime",f),u(Xn,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),u(Xn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let Rc=Xn;const Zn=class Zn extends D{constructor(n){super();u(this,"clientId","");u(this,"documentId","");u(this,"changePack");f.util.initPartial(n,this)}static fromBinary(n,r){return new Zn().fromBinary(n,r)}static fromJson(n,r){return new Zn().fromJson(n,r)}static fromJsonString(n,r){return new Zn().fromJsonString(n,r)}static equals(n,r){return f.util.equals(Zn,n,r)}};u(Zn,"runtime",f),u(Zn,"typeName","yorkie.v1.RemoveDocumentRequest"),u(Zn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Tr}]));let Lc=Zn;const er=class er extends D{constructor(n){super();u(this,"changePack");f.util.initPartial(n,this)}static fromBinary(n,r){return new er().fromBinary(n,r)}static fromJson(n,r){return new er().fromJson(n,r)}static fromJsonString(n,r){return new er().fromJsonString(n,r)}static equals(n,r){return f.util.equals(er,n,r)}};u(er,"runtime",f),u(er,"typeName","yorkie.v1.RemoveDocumentResponse"),u(er,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Tr}]));let Bc=er;const tr=class tr extends D{constructor(n){super();u(this,"clientId","");u(this,"documentId","");u(this,"changePack");u(this,"pushOnly",!1);f.util.initPartial(n,this)}static fromBinary(n,r){return new tr().fromBinary(n,r)}static fromJson(n,r){return new tr().fromJson(n,r)}static fromJsonString(n,r){return new tr().fromJsonString(n,r)}static equals(n,r){return f.util.equals(tr,n,r)}};u(tr,"runtime",f),u(tr,"typeName","yorkie.v1.PushPullChangesRequest"),u(tr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Tr},{no:4,name:"push_only",kind:"scalar",T:8}]));let bc=tr;const nr=class nr extends D{constructor(n){super();u(this,"changePack");f.util.initPartial(n,this)}static fromBinary(n,r){return new nr().fromBinary(n,r)}static fromJson(n,r){return new nr().fromJson(n,r)}static fromJsonString(n,r){return new nr().fromJsonString(n,r)}static equals(n,r){return f.util.equals(nr,n,r)}};u(nr,"runtime",f),u(nr,"typeName","yorkie.v1.PushPullChangesResponse"),u(nr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Tr}]));let Fc=nr;const rr=class rr extends D{constructor(n){super();u(this,"clientId","");u(this,"documentId","");u(this,"topic","");u(this,"payload",new Uint8Array(0));f.util.initPartial(n,this)}static fromBinary(n,r){return new rr().fromBinary(n,r)}static fromJson(n,r){return new rr().fromJson(n,r)}static fromJsonString(n,r){return new rr().fromJsonString(n,r)}static equals(n,r){return f.util.equals(rr,n,r)}};u(rr,"runtime",f),u(rr,"typeName","yorkie.v1.BroadcastRequest"),u(rr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let Mc=rr;const ir=class ir extends D{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,n){return new ir().fromBinary(e,n)}static fromJson(e,n){return new ir().fromJson(e,n)}static fromJsonString(e,n){return new ir().fromJsonString(e,n)}static equals(e,n){return f.util.equals(ir,e,n)}};u(ir,"runtime",f),u(ir,"typeName","yorkie.v1.BroadcastResponse"),u(ir,"fields",f.util.newFieldList(()=>[]));let Jc=ir;const E1={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Tc,O:Ac,kind:Be.Unary},deactivateClient:{name:"DeactivateClient",I:Ic,O:Ec,kind:Be.Unary},attachDocument:{name:"AttachDocument",I:xc,O:Cc,kind:Be.Unary},detachDocument:{name:"DetachDocument",I:Nc,O:Pc,kind:Be.Unary},removeDocument:{name:"RemoveDocument",I:Lc,O:Bc,kind:Be.Unary},pushPullChanges:{name:"PushPullChanges",I:bc,O:Fc,kind:Be.Unary},watchDocument:{name:"WatchDocument",I:Dc,O:Oc,kind:Be.ServerStreaming},broadcast:{name:"Broadcast",I:Mc,O:Jc,kind:Be.Unary}}},x1=f.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);f.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:ur}]);f.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:C1,repeated:!0}]);const C1=f.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"QuotaFailure_Violation"});f.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:N1,repeated:!0}]);const N1=f.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});f.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:P1,repeated:!0}]);const P1=f.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"BadRequest_FieldViolation"});f.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:D1,repeated:!0}]);const D1=f.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"});f.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var S=(t=>(t.Ok="ok",t.ErrClientNotActivated="ErrClientNotActivated",t.ErrClientNotFound="ErrClientNotFound",t.ErrUnimplemented="ErrUnimplemented",t.ErrInvalidType="ErrInvalidType",t.ErrDummy="ErrDummy",t.ErrDocumentNotAttached="ErrDocumentNotAttached",t.ErrDocumentNotDetached="ErrDocumentNotDetached",t.ErrDocumentRemoved="ErrDocumentRemoved",t.ErrInvalidObjectKey="ErrInvalidObjectKey",t.ErrInvalidArgument="ErrInvalidArgument",t.ErrNotInitialized="ErrNotInitialized",t.ErrNotReady="ErrNotReady",t.ErrRefused="ErrRefused",t.ErrContextNotProvided="ErrContextNotProvided",t))(S||{});class k extends Error{constructor(n,r){super(r);u(this,"name","YorkieError");u(this,"stack");this.code=n,this.message=r,this.toString=()=>`[code=${this.code}]: ${this.message}`}}function Ct(t){if(t instanceof Map){const e=Array.from(t);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(t))}const Kp=t=>t?Object.entries(t).length===0:!0,us=t=>{const e={};for(const[n,r]of Object.entries(t))e[n]=JSON.stringify(r);return e},Qi=t=>{const e={};for(const[n,r]of Object.entries(t))e[n]=JSON.parse(r);return e};var Yr=(t=>(t.Put="put",t.Clear="clear",t))(Yr||{});class yu{constructor(e,n){u(this,"context");u(this,"presence");this.context=e,this.presence=n}set(e,n){for(const r of Object.keys(e))this.presence[r]=e[r];this.context.setPresenceChange({type:"put",presence:Ct(this.presence)}),this.context.setReversePresence(e,n)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:"clear"})}}const qf="000000000000000000000000",O1="FFFFFFFFFFFFFFFFFFFFFFFF";class et{constructor(e,n,r){u(this,"lamport");u(this,"delimiter");u(this,"actorID");this.lamport=e,this.delimiter=n,this.actorID=r}static of(e,n,r){return new et(e,n,r)}static fromStruct(e){return et.of(BigInt(e.lamport),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new et(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport>e.lamport)return 1;if(e.lamport>this.lamport)return-1;const n=this.actorID.localeCompare(e.actorID);return n!==0?n:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const Wp=0,R1=4294967295,L1=9223372036854775807n,Bt=new et(0n,Wp,qf),Vs=new et(L1,R1,O1);function Zt(t){return t.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class xo{constructor(e){u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class Kr extends xo{constructor(e){super(e)}}class Vf{constructor(e,n){u(this,"strKey");u(this,"value");this.strKey=e,this.value=n}static of(e,n){return new Vf(e,n)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class mo{constructor(){u(this,"nodeMapByKey");u(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new mo}set(e,n,r){let i;const s=this.nodeMapByKey.get(e);s!=null&&!s.isRemoved()&&s.remove(r)&&(i=s.getValue());const o=Vf.of(e,n);return this.nodeMapByCreatedAt.set(n.getCreatedAt().toIDString(),o),(s==null||r.after(s.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,o),n.setMovedAt(r)),i}delete(e,n){if(!this.nodeMapByCreatedAt.has(e.toIDString()))throw new k(S.ErrInvalidArgument,`fail to find ${e.toIDString()}`);const r=this.nodeMapByCreatedAt.get(e.toIDString());return r.remove(n),r.getValue()}subPathOf(e){const n=this.nodeMapByCreatedAt.get(e.toIDString());if(n)return n.getStrKey()}purge(e){const n=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!n)throw new k(S.ErrInvalidArgument,`fail to find ${e.getCreatedAt().toIDString()}`);const r=this.nodeMapByKey.get(n.getStrKey());n===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(n.getValue().getCreatedAt().toIDString())}deleteByKey(e,n){const r=this.nodeMapByKey.get(e);if(r!=null&&r.remove(n))return r.getValue()}has(e){const n=this.nodeMapByKey.get(e);return n==null?!1:!n.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const n=this.nodeMapByKey.get(e);if(!(!n||n.isRemoved()))return n}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class We extends Kr{constructor(n,r){super(n);u(this,"memberNodes");this.memberNodes=r}static create(n,r){if(!r)return new We(n,mo.create());const i=mo.create();for(const[s,o]of Object.entries(r))i.set(s,o.deepcopy(),o.getCreatedAt());return new We(n,i)}subPathOf(n){return this.memberNodes.subPathOf(n)}purge(n){this.memberNodes.purge(n)}set(n,r,i){return this.memberNodes.set(n,r,i)}delete(n,r){return this.memberNodes.delete(n,r)}deleteByKey(n,r){return this.memberNodes.deleteByKey(n,r)}get(n){const r=this.memberNodes.get(n);return r==null?void 0:r.getValue()}getByID(n){const r=this.memberNodes.getByID(n);return r==null?void 0:r.getValue()}has(n){return this.memberNodes.has(n)}toJSON(){const n=[];for(const[r,i]of this)n.push(`"${Zt(r)}":${i.toJSON()}`);return`{${n.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const n={};for(const[r,i]of this){const{createdAt:s,value:o,type:a}=i.toJSForTest();n[r]={key:r,createdAt:s,value:o,type:a}}return{createdAt:this.getCreatedAt().toTestString(),value:n,type:"YORKIE_OBJECT"}}getKeys(){const n=Array();for(const[r]of this)n.push(r);return n}toSortedJSON(){var i;const n=Array();for(const[s]of this)n.push(s);const r=[];for(const s of n.sort()){const o=(i=this.memberNodes.get(s))==null?void 0:i.getValue();r.push(`"${Zt(s)}":${o.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const n=We.create(this.getCreatedAt());for(const r of this.memberNodes)n.memberNodes.set(r.getStrKey(),r.getValue().deepcopy(),this.getPositionedAt());return n.remove(this.getRemovedAt()),n}getDescendants(n){for(const r of this.memberNodes){const i=r.getValue();if(n(i,this))return;i instanceof Kr&&i.getDescendants(n)}}*[Symbol.iterator](){const n=new Set;for(const r of this.memberNodes)n.has(r.getStrKey())||(n.add(r.getStrKey()),r.isRemoved()||(yield[r.getStrKey(),r.getValue()]))}}var Y=(t=>(t.Local="local",t.Remote="remote",t.UndoRedo="undoredo",t))(Y||{});class Mt{constructor(e,n){u(this,"parentCreatedAt");u(this,"executedAt");this.parentCreatedAt=e,this.executedAt=n}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new k(S.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class Hp{constructor(e){u(this,"value");u(this,"left");u(this,"right");u(this,"parent");u(this,"weight");this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class po{constructor(e){u(this,"root");this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let n=this.root;for(;;)if(n.hasLeft()&&e<=n.getLeftWeight())n=n.getLeft();else if(n.hasRight()&&n.getLeftWeight()+n.getLength()<e)e-=n.getLeftWeight()+n.getLength(),n=n.getRight();else{e-=n.getLeftWeight();break}if(e>n.getLength())throw new k(S.ErrInvalidArgument,`out of index range: pos: ${e} > node.length: ${n.getLength()}`);return this.splayNode(n),[n,e]}indexOf(e){return!e||e!==this.root&&!e.hasLinks()?-1:(this.splayNode(e),this.root.getLeftWeight())}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,n){return e?(this.splayNode(e),this.root=n,n.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(n),n.setLeft(e),e.setParent(n),e.setRight(),this.updateWeight(e),this.updateWeight(n),n):(this.root=n,n)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const n=new po(e.getLeft());n.root&&n.root.setParent();const r=new po(e.getRight());if(r.root&&r.root.setParent(),n.root){const i=n.getRightmost();n.splayNode(i),n.root.setRight(r.root),r.root&&r.root.setParent(n.root),this.root=n.root}else this.root=r.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,n){if(!n){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(n),n.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const n=[];this.traversePostorder(e.getRight(),n);for(const r of n)r.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(n=>`[${n.getWeight()},${n.getLength()}]${n.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const n of e)if(n.getWeight()!=n.getLength()+n.getLeftWeight()+n.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,n){e&&(this.traverseInorder(e.getLeft(),n),n.push(e),this.traverseInorder(e.getRight(),n))}traversePostorder(e,n){e&&(this.traversePostorder(e.getLeft(),n),this.traversePostorder(e.getRight(),n),n.push(e))}rotateLeft(e){const n=e.getParent();n.hasParent()?n===n.getParent().getLeft()?n.getParent().setLeft(e):n.getParent().setRight(e):this.root=e,e.setParent(n.getParent()),n.setRight(e.getLeft()),n.hasRight()&&n.getRight().setParent(n),e.setLeft(n),e.getLeft().setParent(e),this.updateWeight(n),this.updateWeight(e)}rotateRight(e){const n=e.getParent();n.hasParent()?n===n.getParent().getLeft()?n.getParent().setLeft(e):n.getParent().setRight(e):this.root=e,e.setParent(n.getParent()),n.setLeft(e.getRight()),n.hasLeft()&&n.getLeft().setParent(n),e.setRight(n),e.getRight().setParent(e),this.updateWeight(n),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var vt=null;try{vt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function V(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}V.prototype.__isLong__;Object.defineProperty(V.prototype,"__isLong__",{value:!0});function Re(t){return(t&&t.__isLong__)===!0}function qh(t){var e=Math.clz32(t&-t);return t?31-e:e}V.isLong=Re;var Vh={},Kh={};function xi(t,e){var n,r,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(r=Kh[t],r)?r:(n=W(t,0,!0),i&&(Kh[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(r=Vh[t],r)?r:(n=W(t,t<0?-1:0,!1),i&&(Vh[t]=n),n))}V.fromInt=xi;function wt(t,e){if(isNaN(t))return e?fr:Dt;if(e){if(t<0)return fr;if(t>=_p)return Qp}else{if(t<=-Hh)return je;if(t+1>=Hh)return Yp}return t<0?wt(-t,e).neg():W(t%cs|0,t/cs|0,e)}V.fromNumber=wt;function W(t,e,n){return new V(t,e,n)}V.fromBits=W;var fl=Math.pow;function Kf(t,e,n){if(t.length===0)throw Error("empty string");if(typeof e=="number"?(n=e,e=!1):e=!!e,t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return e?fr:Dt;if(n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return Kf(t.substring(1),e,n).neg();for(var i=wt(fl(n,8)),s=Dt,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+a),n);if(a<8){var c=wt(fl(n,a));s=s.mul(c).add(wt(l))}else s=s.mul(i),s=s.add(wt(l))}return s.unsigned=e,s}V.fromString=Kf;function Jt(t,e){return typeof t=="number"?wt(t,e):typeof t=="string"?Kf(t,e):W(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}V.fromValue=Jt;var Wh=65536,B1=1<<24,cs=Wh*Wh,_p=cs*cs,Hh=_p/2,_h=xi(B1),Dt=xi(0);V.ZERO=Dt;var fr=xi(0,!0);V.UZERO=fr;var qi=xi(1);V.ONE=qi;var Gp=xi(1,!0);V.UONE=Gp;var $c=xi(-1);V.NEG_ONE=$c;var Yp=W(-1,2147483647,!1);V.MAX_VALUE=Yp;var Qp=W(-1,-1,!0);V.MAX_UNSIGNED_VALUE=Qp;var je=W(0,-2147483648,!1);V.MIN_VALUE=je;var C=V.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low};C.toNumber=function(){return this.unsigned?(this.high>>>0)*cs+(this.low>>>0):this.high*cs+(this.low>>>0)};C.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(je)){var n=wt(e),r=this.div(n),i=r.mul(n).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=wt(fl(e,6),this.unsigned),o=this,a="";;){var l=o.div(s),c=o.sub(l.mul(s)).toInt()>>>0,d=c.toString(e);if(o=l,o.isZero())return d+a;for(;d.length<6;)d="0"+d;a=""+d+a}};C.getHighBits=function(){return this.high};C.getHighBitsUnsigned=function(){return this.high>>>0};C.getLowBits=function(){return this.low};C.getLowBitsUnsigned=function(){return this.low>>>0};C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(je)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};C.isZero=function(){return this.high===0&&this.low===0};C.eqz=C.isZero;C.isNegative=function(){return!this.unsigned&&this.high<0};C.isPositive=function(){return this.unsigned||this.high>=0};C.isOdd=function(){return(this.low&1)===1};C.isEven=function(){return(this.low&1)===0};C.equals=function(e){return Re(e)||(e=Jt(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};C.eq=C.equals;C.notEquals=function(e){return!this.eq(e)};C.neq=C.notEquals;C.ne=C.notEquals;C.lessThan=function(e){return this.comp(e)<0};C.lt=C.lessThan;C.lessThanOrEqual=function(e){return this.comp(e)<=0};C.lte=C.lessThanOrEqual;C.le=C.lessThanOrEqual;C.greaterThan=function(e){return this.comp(e)>0};C.gt=C.greaterThan;C.greaterThanOrEqual=function(e){return this.comp(e)>=0};C.gte=C.greaterThanOrEqual;C.ge=C.greaterThanOrEqual;C.compare=function(e){if(Re(e)||(e=Jt(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};C.comp=C.compare;C.negate=function(){return!this.unsigned&&this.eq(je)?je:this.not().add(qi)};C.neg=C.negate;C.add=function(e){Re(e)||(e=Jt(e));var n=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,d=0,h=0,p=0,m=0;return m+=s+c,p+=m>>>16,m&=65535,p+=i+l,h+=p>>>16,p&=65535,h+=r+a,d+=h>>>16,h&=65535,d+=n+o,d&=65535,W(p<<16|m,d<<16|h,this.unsigned)};C.subtract=function(e){return Re(e)||(e=Jt(e)),this.add(e.neg())};C.sub=C.subtract;C.multiply=function(e){if(this.isZero())return this;if(Re(e)||(e=Jt(e)),vt){var n=vt.mul(this.low,this.high,e.low,e.high);return W(n,vt.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?fr:Dt;if(this.eq(je))return e.isOdd()?je:Dt;if(e.eq(je))return this.isOdd()?je:Dt;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(_h)&&e.lt(_h))return wt(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,d=e.low&65535,h=0,p=0,m=0,w=0;return w+=o*d,m+=w>>>16,w&=65535,m+=s*d,p+=m>>>16,m&=65535,m+=o*c,p+=m>>>16,m&=65535,p+=i*d,h+=p>>>16,p&=65535,p+=s*c,h+=p>>>16,p&=65535,p+=o*l,h+=p>>>16,p&=65535,h+=r*d+i*c+s*l+o*a,h&=65535,W(m<<16|w,h<<16|p,this.unsigned)};C.mul=C.multiply;C.divide=function(e){if(Re(e)||(e=Jt(e)),e.isZero())throw Error("division by zero");if(vt){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?vt.div_u:vt.div_s)(this.low,this.high,e.low,e.high);return W(n,vt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?fr:Dt;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return fr;if(e.gt(this.shru(1)))return Gp;s=fr}else{if(this.eq(je)){if(e.eq(qi)||e.eq($c))return je;if(e.eq(je))return qi;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Dt)?e.isNegative()?qi:$c:(i=this.sub(e.mul(r)),s=r.add(i.div(e)),s)}else if(e.eq(je))return this.unsigned?fr:Dt;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=Dt}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:fl(2,a-48),c=wt(r),d=c.mul(e);d.isNegative()||d.gt(i);)r-=l,c=wt(r,this.unsigned),d=c.mul(e);c.isZero()&&(c=qi),s=s.add(c),i=i.sub(d)}return s};C.div=C.divide;C.modulo=function(e){if(Re(e)||(e=Jt(e)),vt){var n=(this.unsigned?vt.rem_u:vt.rem_s)(this.low,this.high,e.low,e.high);return W(n,vt.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};C.mod=C.modulo;C.rem=C.modulo;C.not=function(){return W(~this.low,~this.high,this.unsigned)};C.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};C.clz=C.countLeadingZeros;C.countTrailingZeros=function(){return this.low?qh(this.low):qh(this.high)+32};C.ctz=C.countTrailingZeros;C.and=function(e){return Re(e)||(e=Jt(e)),W(this.low&e.low,this.high&e.high,this.unsigned)};C.or=function(e){return Re(e)||(e=Jt(e)),W(this.low|e.low,this.high|e.high,this.unsigned)};C.xor=function(e){return Re(e)||(e=Jt(e)),W(this.low^e.low,this.high^e.high,this.unsigned)};C.shiftLeft=function(e){return Re(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?W(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):W(0,this.low<<e-32,this.unsigned)};C.shl=C.shiftLeft;C.shiftRight=function(e){return Re(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?W(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):W(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};C.shr=C.shiftRight;C.shiftRightUnsigned=function(e){return Re(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?W(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?W(this.high,0,this.unsigned):W(this.high>>>e-32,0,this.unsigned)};C.shru=C.shiftRightUnsigned;C.shr_u=C.shiftRightUnsigned;C.rotateLeft=function(e){var n;return Re(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?W(this.high,this.low,this.unsigned):e<32?(n=32-e,W(this.low<<e|this.high>>>n,this.high<<e|this.low>>>n,this.unsigned)):(e-=32,n=32-e,W(this.high<<e|this.low>>>n,this.low<<e|this.high>>>n,this.unsigned))};C.rotl=C.rotateLeft;C.rotateRight=function(e){var n;return Re(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?W(this.high,this.low,this.unsigned):e<32?(n=32-e,W(this.high<<n|this.low>>>e,this.low<<n|this.high>>>e,this.unsigned)):(e-=32,n=32-e,W(this.low<<n|this.high>>>e,this.high<<n|this.low>>>e,this.unsigned))};C.rotr=C.rotateRight;C.toSigned=function(){return this.unsigned?W(this.low,this.high,!1):this};C.toUnsigned=function(){return this.unsigned?this:W(this.low,this.high,!0)};C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};C.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};C.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};V.fromBytes=function(e,n,r){return r?V.fromBytesLE(e,n):V.fromBytesBE(e,n)};V.fromBytesLE=function(e,n){return new V(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};V.fromBytesBE=function(e,n){return new V(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};var ye=(t=>(t[t.Null=0]="Null",t[t.Boolean=1]="Boolean",t[t.Integer=2]="Integer",t[t.Long=3]="Long",t[t.Double=4]="Double",t[t.String=5]="String",t[t.Bytes=6]="Bytes",t[t.Date=7]="Date",t))(ye||{});class ie extends xo{constructor(n,r){super(r);u(this,"valueType");u(this,"value");this.valueType=ie.getPrimitiveType(n),this.value=n===void 0?null:n}static of(n,r){return new ie(n,r)}static valueFromBytes(n,r){switch(n){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const i=new DataView(r.buffer);return r.forEach(function(s,o){i.setUint8(o,s)}),i.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return V.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(V.fromBytesLE(Array.from(r),!0).toNumber());default:throw new k(S.ErrUnimplemented,`unimplemented type: ${n}`)}}toJSON(){return this.valueType===5?`"${Zt(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const n=ie.of(this.value,this.getCreatedAt());return n.setMovedAt(this.getMovedAt()),n.setRemovedAt(this.getRemovedAt()),n}getType(){return this.valueType}static getPrimitiveType(n){switch(typeof n){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(n)?2:4;case"string":return 5;case"object":if(n===null)return 0;if(n instanceof V)return 3;if(n instanceof Uint8Array)return 6;if(n instanceof Date)return 7}}static isSupport(n){return ie.getPrimitiveType(n)!==void 0}static isInteger(n){return n%1===0}isNumericType(){const n=this.valueType;return n===2||n===3||n===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const n=this.value;return new Uint8Array([n&255,n>>8&255,n>>16&255,n>>24&255])}case 4:{const n=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,n,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const n=this.value,r=V.fromNumber(n.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new k(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class dl extends Hp{constructor(n){super(n);u(this,"prev");u(this,"next");this.value=n}static createAfter(n,r){const i=new dl(r),s=n.next;return n.next=i,i.prev=n,i.next=s,s&&(s.prev=i),i}remove(n){return this.value.remove(n)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class yo{constructor(){u(this,"dummyHead");u(this,"last");u(this,"nodeMapByIndex");u(this,"nodeMapByCreatedAt");const e=ie.of(0,Bt);e.setRemovedAt(Bt),this.dummyHead=new dl(e),this.last=this.dummyHead,this.nodeMapByIndex=new po,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new yo}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,n){let r=this.nodeMapByCreatedAt.get(e.toIDString());if(!r)throw new k(S.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);for(;r.getNext()&&r.getNext().getPositionedAt().after(n);)r=r.getNext();return r}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,n,r=n.getCreatedAt()){const i=this.findNextBeforeExecutedAt(e,r),s=dl.createAfter(i,n);i===this.last&&(this.last=s),this.nodeMapByIndex.insertAfter(i,s),this.nodeMapByCreatedAt.set(s.getCreatedAt().toIDString(),s)}moveAfter(e,n,r){const i=this.nodeMapByCreatedAt.get(e.toIDString());if(!i)throw new k(S.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);const s=this.nodeMapByCreatedAt.get(n.toIDString());if(!s)throw new k(S.ErrInvalidArgument,`cant find the given node: ${n.toIDString()}`);i!==s&&(!s.getValue().getMovedAt()||r.after(s.getValue().getMovedAt()))&&(this.release(s),this.insertAfter(i.getCreatedAt(),s.getValue(),r),s.getValue().setMovedAt(r))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const n=this.nodeMapByCreatedAt.get(e.toIDString());if(n)return String(this.nodeMapByIndex.indexOf(n))}purge(e){const n=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!n)throw new k(S.ErrInvalidArgument,`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`);this.release(n)}getByIndex(e){if(e>=this.length)return;const[n,r]=this.nodeMapByIndex.find(e);let i=n;if(e===0&&n===this.dummyHead||r>0)do i&&(i=i.getNext());while(i&&i.isRemoved());return i}getPrevCreatedAt(e){let n=this.nodeMapByCreatedAt.get(e.toIDString());do n=n.getPrev();while(this.dummyHead!==n&&n.isRemoved());return n.getValue().getCreatedAt()}delete(e,n){const r=this.nodeMapByCreatedAt.get(e.toIDString()),i=r.isRemoved();return r.remove(n)&&!i&&this.nodeMapByIndex.splayNode(r),r.getValue()}deleteByIndex(e,n){const r=this.getByIndex(e);if(r)return r.remove(n)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const n of this){const r=`${n.getCreatedAt().toIDString()}:${n.getValue().toJSON()}`;n.isRemoved()?e.push(`{${r}}`):e.push(`[${r}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class tt extends Kr{constructor(n,r){super(n);u(this,"elements");this.elements=r}static create(n,r){if(!r)return new tt(n,yo.create());const i=yo.create();for(const s of r)i.insertAfter(i.getLastCreatedAt(),s.deepcopy());return new tt(n,i)}subPathOf(n){return this.elements.subPathOf(n)}purge(n){this.elements.purge(n)}insertAfter(n,r){this.elements.insertAfter(n,r)}moveAfter(n,r,i){this.elements.moveAfter(n,r,i)}get(n){const r=this.elements.getByIndex(n);return r==null?void 0:r.getValue()}getByID(n){const r=this.elements.getByID(n);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(n){return this.elements.getPrevCreatedAt(n)}delete(n,r){return this.elements.delete(n,r)}deleteByIndex(n,r){return this.elements.deleteByIndex(n,r)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const n of this.elements)n.isRemoved()||(yield n.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(n){for(const r of this.elements){const i=r.getValue();if(n(i,this))return;i instanceof Kr&&i.getDescendants(n)}}toJSON(){const n=[];for(const r of this)n.push(r.toJSON());return`[${n.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const n={};for(let r=0;r<this.length;r++){const{createdAt:i,value:s,type:o}=this.get(r).toJSForTest();n[r]={key:String(r),createdAt:i,value:s,type:o}}return{createdAt:this.getCreatedAt().toTestString(),value:n,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const n=tt.create(this.getCreatedAt());for(const r of this.elements)n.elements.insertAfter(n.getLastCreatedAt(),r.getValue().deepcopy());return n.remove(this.getRemovedAt()),n}}class Qr extends Mt{constructor(n,r,i){super(n,i);u(this,"createdAt");this.createdAt=r}static create(n,r,i){return new Qr(n,r,i)}execute(n,r){var c;const i=n.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof Kr))throw new k(S.ErrInvalidArgument,`only object and array can execute remove: ${i}`);if(r===Y.UndoRedo){let d=i.getByID(this.createdAt);for(;d;){if(d.getRemovedAt())return;d=(c=n.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.subPathOf(this.createdAt),o=this.toReverseOperation(i),a=i.delete(this.createdAt,this.getExecutedAt());return n.registerRemovedElement(a),{opInfos:i instanceof tt?[{type:"remove",path:n.createPath(this.getParentCreatedAt()),index:Number(s)}]:[{type:"remove",path:n.createPath(this.getParentCreatedAt()),key:s}],reverseOp:o}}toReverseOperation(n){if(n instanceof We){const r=n.subPathOf(this.createdAt);if(r!==void 0){const i=n.get(r);if(i!==void 0)return Ai.create(r,i.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class Ai extends Mt{constructor(n,r,i,s){super(i,s);u(this,"key");u(this,"value");this.key=n,this.value=r}static create(n,r,i,s){return new Ai(n,r,i,s)}execute(n,r){var c;const i=n.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof We))throw new k(S.ErrInvalidArgument,"fail to execute, only object can execute set");if(r===Y.UndoRedo){let d=i;for(;d;){if(d.getRemovedAt())return;d=(c=n.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.get(this.key),o=this.toReverseOperation(s),a=this.value.deepcopy(),l=i.set(this.key,a,this.getExecutedAt());return r===Y.UndoRedo&&n.findByCreatedAt(a.getCreatedAt())&&n.deregisterElement(a),n.registerElement(a,i),l&&n.registerRemovedElement(l),{opInfos:[{type:"set",path:n.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:o}}toReverseOperation(n){let r=Qr.create(this.getParentCreatedAt(),this.value.getCreatedAt());return n!==void 0&&!n.isRemoved()&&(r=Ai.create(this.key,n.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class Co extends Mt{constructor(n,r,i,s){super(n,s);u(this,"prevCreatedAt");u(this,"value");this.prevCreatedAt=r,this.value=i}static create(n,r,i,s){return new Co(n,r,i,s)}execute(n){const r=n.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof tt))throw new k(S.ErrInvalidArgument,"fail to execute, only array can execute add");const i=r,s=this.value.deepcopy();return i.insertAfter(this.prevCreatedAt,s),n.registerElement(s,i),{opInfos:[{type:"add",path:n.createPath(this.getParentCreatedAt()),index:Number(i.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class Br extends Mt{constructor(n,r,i,s){super(n,s);u(this,"prevCreatedAt");u(this,"createdAt");this.prevCreatedAt=r,this.createdAt=i}static create(n,r,i,s){return new Br(n,r,i,s)}execute(n){const r=n.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof tt))throw new k(S.ErrInvalidArgument,"fail to execute, only array can execute move");const i=r,s=Number(i.subPathOf(this.createdAt));i.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const o=Number(i.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:n.createPath(this.getParentCreatedAt()),index:o,previousIndex:s}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class fi{constructor(e,n,r,i){u(this,"key");u(this,"value");u(this,"updatedAt");u(this,"_isRemoved");this.key=e,this.value=n,this.updatedAt=r,this._isRemoved=i}static of(e,n,r,i){return new fi(e,n,r,i)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}}class Sr{constructor(){u(this,"nodeMapByKey");u(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Sr}getNodeMapByKey(){return this.nodeMapByKey}set(e,n,r){const i=this.nodeMapByKey.get(e);if(i&&i.isRemoved()&&r.after(i.getUpdatedAt())&&(this.numberOfRemovedElement-=1),i===void 0||r.after(i.getUpdatedAt())){const s=fi.of(e,n,r,!1);return this.nodeMapByKey.set(e,s),i!==void 0&&i.isRemoved()?[i,s]:[void 0,s]}return i.isRemoved()?[i,void 0]:[void 0,void 0]}setInternal(e,n,r,i){const s=fi.of(e,n,r,i);this.nodeMapByKey.set(e,s),i&&this.numberOfRemovedElement++}remove(e,n){const r=this.nodeMapByKey.get(e),i=[];if(r===void 0||n.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const a=fi.of(e,"",n,!0);return this.nodeMapByKey.set(e,a),i.push(a),i}const s=r.isRemoved();s||(this.numberOfRemovedElement+=1),s&&i.push(r);const o=fi.of(e,r.getValue(),n,!0);return this.nodeMapByKey.set(e,o),i.push(o),i}return i}has(e){if(this.nodeMapByKey.has(e)){const n=this.nodeMapByKey.get(e);return n!==void 0&&!n.isRemoved()}return!1}get(e){if(this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new Sr;for(const[,n]of this.nodeMapByKey)e.setInternal(n.getKey(),n.getValue(),n.getUpdatedAt(),n.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[n,r]of this.nodeMapByKey)r.isRemoved()||e.push(`"${Zt(n)}":"${Zt(r.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[n,r]of this.nodeMapByKey)r.isRemoved()||(e[n]=r.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const n=this.nodeMapByKey.get(e.getKey());n==null||n.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}class vo{constructor(e){u(this,"attributes");u(this,"content");this.attributes=Sr.create(),this.content=e}static create(e){return new vo(e)}get length(){return this.content.length}substring(e,n){const r=new vo(this.content.substring(e,n));return r.attributes=this.attributes.deepcopy(),r}setAttr(e,n,r){return this.attributes.set(e,n,r)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=Zt(this.content),n=this.attributes.toObject(),r=[];for(const[i,s]of Object.entries(n)){const o=JSON.parse(s),a=typeof o=="string"?`"${Zt(i)}":"${Zt(o)}"`:`"${Zt(i)}":${String(o)}`;r.push(a)}return r.sort(),r.length===0?`{"val":"${e}"}`:`{"attrs":{${r.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof fi&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const n of this.attributes)n.getRemovedAt()&&e.push({parent:this,child:n});return e}}class At extends xo{constructor(n,r){super(r);u(this,"rgaTreeSplit");this.rgaTreeSplit=n}static create(n,r){return new At(n,r)}edit(n,r,i,s,o){const a=r?vo.create(r):void 0;if(a&&s)for(const[m,w]of Object.entries(s))a.setAttr(m,w,i);const[l,c,d,h]=this.rgaTreeSplit.edit(n,i,a,o),p=h.map(m=>({...m,value:m.value?{attributes:Qi(m.value.getAttributes()),content:m.value.getContent()}:{attributes:void 0,content:""},type:"content"}));return[c,p,d,[l,l]]}setStyle(n,r,i,s){const[,o]=this.rgaTreeSplit.findNodeWithSplit(n[1],i),[,a]=this.rgaTreeSplit.findNodeWithSplit(n[0],i),l=[],c=this.rgaTreeSplit.findBetween(a,o),d=new Map,h=[];for(const m of c){const w=m.getCreatedAt().getActorID(),I=s!=null&&s.size?s.has(w)?s.get(w):Bt:Vs;if(m.canStyle(i,I)){const O=d.get(w),y=m.getCreatedAt();(!O||y.after(O))&&d.set(w,y),h.push(m)}}const p=[];for(const m of h){if(m.isRemoved())continue;const[w,I]=this.rgaTreeSplit.findIndexesFromRange(m.createPosRange());l.push({type:"style",actor:i.getActorID(),from:w,to:I,value:{attributes:Qi(r)}});for(const[O,y]of Object.entries(r)){const[g]=m.getValue().setAttr(O,y,i);g!==void 0&&p.push({parent:m.getValue(),child:g})}}return[d,p,l]}indexRangeToPosRange(n,r){const i=this.rgaTreeSplit.indexToPos(n);return n===r?[i,i]:[i,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}toJSON(){const n=[];for(const r of this.rgaTreeSplit)r.isRemoved()||n.push(r.getValue().toJSON());return`[${n.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const n=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const i=r.getValue();n.push({attributes:Qi(i.getAttributes()),content:i.getContent()})}return n}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const n=new At(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return n.remove(this.getRemovedAt()),n}findIndexesFromRange(n){return this.rgaTreeSplit.findIndexesFromRange(n)}getGCPairs(){const n=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&n.push({parent:this.rgaTreeSplit,child:r});for(const i of r.getValue().getGCPairs())n.push(i)}return n}}class No extends Mt{constructor(n,r,i,s,o,a,l){super(n,l);u(this,"fromPos");u(this,"toPos");u(this,"maxCreatedAtMapByActor");u(this,"content");u(this,"attributes");this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=s,this.content=o,this.attributes=a}static create(n,r,i,s,o,a,l){return new No(n,r,i,s,o,a,l)}execute(n){const r=n.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof At))throw new k(S.ErrInvalidArgument,"fail to execute, only Text can execute edit");const i=r,[,s,o]=i.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);for(const a of o)n.registerGCPair(a);return{opInfos:s.map(({from:a,to:l,value:c})=>({type:"edit",from:a,to:l,value:c,path:n.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const n=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.content;return`${n}.EDIT(${r},${i},${s})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Po extends Mt{constructor(n,r,i,s,o,a){super(n,a);u(this,"fromPos");u(this,"toPos");u(this,"maxCreatedAtMapByActor");u(this,"attributes");this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=s,this.attributes=o}static create(n,r,i,s,o,a){return new Po(n,r,i,s,o,a)}execute(n){const r=n.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof At))throw new k(S.ErrInvalidArgument,"fail to execute, only Text can execute edit");const i=r,[,s,o]=i.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);for(const a of s)n.registerGCPair(a);return{opInfos:o.map(({from:a,to:l,value:c})=>({type:"style",from:a,to:l,value:c,path:n.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const n=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.attributes;return`${n}.STYL(${r},${i},${JSON.stringify(s)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const b1=2,F1="root",hr="text";function Ns(t,e){let n=0;const r=t.children;for(let i=0;i<e;i++){const s=r[i];!s||s.isRemoved||(n+=s.paddedSize)}return n}class M1{constructor(e,n=[]){u(this,"type");u(this,"parent");u(this,"_children");u(this,"size");if(this.type=e,this.size=0,this._children=n,this.isText&&this._children.length>0)throw new k(S.ErrRefused,"Text node cannot have children")}updateAncestorsSize(){let e=this.parent;const n=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*n,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const n of this._children){const r=n.updateDescendantsSize();n.isRemoved||(e+=r)}return this.size+=e,this.paddedSize}get isText(){return this.type===hr}get paddedSize(){return this.size+(this.isText?0:b1)}isAncestorOf(e){return J1(this,e)}get nextSibling(){const e=this.parent.findOffset(this),n=this.parent.children[e+1];if(n)return n}get prevSibling(){const e=this.parent.findOffset(this),n=this.parent.children[e-1];if(n)return n}splitText(e,n){if(e===0||e===this.size)return;const r=this.value.slice(0,e),i=this.value.slice(e);if(!i.length)return;this.value=r;const s=this.cloneText(e+n);return s.value=i,this.parent.insertAfterInternal(s,this),s}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}append(...e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this._children.push(...e);for(const n of e)n.parent=this,n.updateAncestorsSize()}prepend(...e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this._children.unshift(...e);for(const n of e)n.parent=this}insertBefore(e,n){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(n);if(r===-1)throw new k(S.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r),e.updateAncestorsSize()}insertAfter(e,n){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(n);if(r===-1)throw new k(S.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1),e.updateAncestorsSize()}insertAt(e,n){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this.insertAtInternal(e,n),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const n=this._children.indexOf(e);if(n===-1)throw new k(S.ErrInvalidArgument,"child not found");this._children.splice(n,1),e.parent=void 0}splitElement(e,n){const r=this.cloneElement(n);this.parent.insertAfterInternal(r,this),r.updateAncestorsSize();const i=this.children.slice(0,e),s=this.children.slice(e);this._children=i,r._children=s,this.size=this._children.reduce((o,a)=>o+a.paddedSize,0),r.size=r._children.reduce((o,a)=>o+a.paddedSize,0);for(const o of r._children)o.parent=r;return r}insertAfterInternal(e,n){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(n);if(r===-1)throw new k(S.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1)}insertAtInternal(e,n){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this._children.splice(n,0,e),e.parent=this}findOffset(e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");if(e.isRemoved){const n=this._children.indexOf(e);return this.allChildren.splice(0,n).filter(i=>!i.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");let n=e;for(;n;){const r=this._children.indexOf(n);if(r!==-1)return r;n=n.parent}return-1}}function J1(t,e){if(t===e)return!1;for(;e.parent;){if(e.parent===t)return!0;e=e.parent}return!1}var he=(t=>(t.Start="Start",t.End="End",t.Text="Text",t))(he||{});function Xp(t,e,n,r){if(e>n)throw new k(S.ErrInvalidArgument,`from is greater than to: ${e} > ${n}`);if(e>t.size)throw new k(S.ErrInvalidArgument,`from is out of range: ${e} > ${t.size}`);if(n>t.size)throw new k(S.ErrInvalidArgument,`to is out of range: ${n} > ${t.size}`);if(e===n)return;let i=0;for(const s of t.children){if(e-s.paddedSize<i&&i<n){const o=s.isText?e-i:e-i-1,a=s.isText?n-i:n-i-1,l=!s.isText&&o<0,c=!s.isText&&a>s.size;(s.isText||l)&&r([s,s.isText?"Text":"Start"],c),Xp(s,Math.max(0,o),Math.min(a,s.size),r),c&&r([s,"End"],c)}i+=s.paddedSize}}function Zp(t,e,n=0){for(const r of t.children)Zp(r,e,n+1);e(t,n)}function Ll(t,e,n=0){for(const r of t._children)Ll(r,e,n+1);e(t,n)}function zc(t,e,n=!0){if(e>t.size)throw new k(S.ErrInvalidArgument,`index is out of range: ${e} > ${t.size}`);if(t.isText)return{node:t,offset:e};let r=0,i=0;for(const s of t.children){if(n&&s.isText&&s.size>=e-i)return zc(s,e-i,n);if(e===i)return{node:t,offset:r};if(!n&&s.paddedSize===e-i)return{node:t,offset:r+1};if(s.paddedSize>e-i)return zc(s,e-i-1,n);i+=s.paddedSize,r+=1}return{node:t,offset:r}}function ey(t){return t.isText||t.children.length===0?t:ey(t.children[0])}function $1(t,e){if(t.size<e)throw new k(S.ErrInvalidArgument,"unacceptable path");for(let n=0;n<t.children.length;n++){const r=t.children[n];if(r.size<e)e-=r.size;else{t=r;break}}return{node:t,offset:e}}class z1{constructor(e){u(this,"root");this.root=e}tokensBetween(e,n,r){Xp(this.root,e,n,r)}traverse(e){Zp(this.root,e,0)}traverseAll(e){Ll(this.root,e,0)}findTreePos(e,n=!0){return zc(this.root,e,n)}treePosToPath(e){const n=[];let r=e.node;if(r.isText){const i=r.parent.findOffset(r);if(i===-1)throw new k(S.ErrInvalidArgument,"invalid treePos");const s=Ns(r.parent,i);n.push(s+e.offset),r=r.parent}else if(r.hasTextChild()){const i=Ns(r,e.offset);n.push(i)}else n.push(e.offset);for(;r.parent;){const i=r.parent.findOffset(r);if(i===-1)throw new k(S.ErrInvalidArgument,"invalid treePos");n.push(i),r=r.parent}return n.reverse()}pathToIndex(e){const n=this.pathToTreePos(e);return this.indexOf(n)}pathToTreePos(e){if(!e.length)throw new k(S.ErrInvalidArgument,"unacceptable path");let n=this.root;for(let r=0;r<e.length-1;r++){const i=e[r];if(n=n.children[i],!n)throw new k(S.ErrInvalidArgument,"unacceptable path")}if(n.hasTextChild())return $1(n,e[e.length-1]);if(n.children.length<e[e.length-1])throw new k(S.ErrInvalidArgument,"unacceptable path");return{node:n,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:n,offset:r}=e;if(n.isText){if(n.size===r){const i=n.nextSibling;return i||n.parent}return n}return n.children.length===r?n:ey(n.children[r])}indexOf(e){let{node:n}=e;const{offset:r}=e;let i=0,s=1;if(n.isText){i+=r;const o=n.parent,a=o.findOffset(n);if(a===-1)throw new k(S.ErrInvalidArgument,"invalid pos");i+=Ns(o,a),n=n.parent}else i+=Ns(n,r);for(;n!=null&&n.parent;){const o=n.parent,a=o.findOffset(n);if(a===-1)throw new k(S.ErrInvalidArgument,"invalid pos");i+=Ns(o,a),s++,n=n.parent}return i+s-1}indexToPath(e){const n=this.findTreePos(e);return this.treePosToPath(n)}}const U1=(t,e)=>t===e?0:t<e?-1:1;class j1{constructor(e,n,r){u(this,"key");u(this,"value");u(this,"parent");u(this,"left");u(this,"right");u(this,"isRed");this.key=e,this.value=n,this.isRed=r}}class q1{constructor(e){u(this,"stack");this.stack=[],this.traverseInorder(e)}traverseInorder(e){e&&(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class ty{constructor(e){u(this,"root");u(this,"comparator");u(this,"counter");this.comparator=typeof e<"u"?e:U1,this.counter=0}put(e,n){return this.root=this.putInternal(e,n,this.root),this.root.isRed=!1,n}get(e){const n=this.getInternal(e,this.root);return n?n.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new q1(this.root)}values(){const e=[];for(const n of this.getIterator().stack)e.push(n.value);return e}floorEntry(e){let n=this.root;for(;n;){const r=this.comparator(e,n.key);if(r>0)if(n.right)n.right.parent=n,n=n.right;else return n;else if(r<0)if(n.left)n.left.parent=n,n=n.left;else{let i=n.parent,s=n;for(;i&&s===i.left;)s=i,i=i.parent;return i}else return n}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,n){for(;n;){const r=this.comparator(e,n.key);if(r===0)return n;r<0?n=n.left:r>0&&(n=n.right)}}putInternal(e,n,r){if(!r)return this.counter+=1,new j1(e,n,!0);const i=this.comparator(e,r.key);return i<0?r.left=this.putInternal(e,n,r.left):i>0?r.right=this.putInternal(e,n,r.right):r.value=n,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(e,n){if(this.comparator(n,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,n);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(n,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(n,e.key)===0){this.counter-=1;const r=this.min(e.right);e.value=r.value,e.key=r.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,n)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const n=e.right;return e.right=n.left,n.left=e,n.isRed=n.left.isRed,n.left.isRed=!0,n}rotateRight(e){const n=e.left;return e.left=n.right,n.right=e,n.isRed=n.right.isRed,n.right.isRed=!0,n}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class Ot{constructor(e,n){u(this,"parentID");u(this,"leftSiblingID");this.parentID=e,this.leftSiblingID=n}static of(e,n){return new Ot(e,n)}static fromTreePos(e){const{offset:n}=e;let{node:r}=e,i;return r.isText?(r.parent.children[0]===r&&n===0?i=r.parent:i=r,r=r.parent):n===0?i=r:i=r.children[n-1],Ot.of(r.id,Ee.of(i.getCreatedAt(),i.getOffset()+n))}getParentID(){return this.parentID}static fromStruct(e){return Ot.of(Ee.of(et.fromStruct(e.parentID.createdAt),e.parentID.offset),Ee.of(et.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const n=this.getParentID(),r=this.getLeftSiblingID(),i=e.findFloorNode(n);let s=e.findFloorNode(r);if(!i||!s)throw new k(S.ErrRefused,`cannot find node of CRDTTreePos(${n.toTestString()}, ${r.toTestString()})`);return!r.equals(n)&&r.getOffset()>0&&r.getOffset()===s.id.getOffset()&&s.insPrevID&&(s=e.findFloorNode(s.insPrevID)),[i,s]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class Ee{constructor(e,n){u(this,"createdAt");u(this,"offset");this.createdAt=e,this.offset=n}static of(e,n){return new Ee(e,n)}static fromStruct(e){return Ee.of(et.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,n)=>{const r=e.getCreatedAt().compare(n.getCreatedAt());return r!==0?r:e.getOffset()>n.getOffset()?1:e.getOffset()<n.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class Xe extends M1{constructor(n,r,i,s,o){super(r);u(this,"id");u(this,"removedAt");u(this,"attrs");u(this,"insPrevID");u(this,"insNextID");u(this,"_value","");this.id=n,this.removedAt=o,s&&(this.attrs=s),typeof i=="string"?this.value=i:Array.isArray(i)&&(this._children=i)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(n,r,i,s){return new Xe(n,r,i,s)}deepcopy(){var r;const n=new Xe(this.id,this.type);return n.removedAt=this.removedAt,n._value=this._value,n.size=this.size,n.attrs=(r=this.attrs)==null?void 0:r.deepcopy(),n._children=this._children.map(i=>{const s=i.deepcopy();return s.parent=n,s}),n.insPrevID=this.insPrevID,n.insNextID=this.insNextID,n}get value(){if(!this.isText)throw new k(S.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(n){if(!this.isText)throw new k(S.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=n,this.size=n.length}get isRemoved(){return!!this.removedAt}remove(n){const r=!this.removedAt;(!this.removedAt||this.removedAt.compare(n)>0)&&(this.removedAt=n),r&&this.updateAncestorsSize()}cloneText(n){return new Xe(Ee.of(this.id.getCreatedAt(),n),this.type,void 0,void 0,this.removedAt)}cloneElement(n){return new Xe(Ee.of(n(),0),this.type,void 0,void 0,this.removedAt)}split(n,r,i){const s=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,i);if(s){if(s.insPrevID=this.id,this.insNextID){const o=n.findFloorNode(this.insNextID);o.insPrevID=s.id,s.insNextID=this.insNextID}this.insNextID=s.id,n.registerNode(s)}return s}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(n,r){return!this.getCreatedAt().after(r)&&(!this.removedAt||n.after(this.removedAt))}canStyle(n,r){return this.isText?!1:!this.getCreatedAt().after(r)&&(!this.removedAt||n.after(this.removedAt))}setAttrs(n,r){this.attrs||(this.attrs=new Sr);const i=new Array;for(const[s,o]of Object.entries(n))i.push(this.attrs.set(s,o,r));return i}purge(n){this.attrs&&this.attrs.purge(n)}getGCPairs(){const n=[];if(!this.attrs)return n;for(const r of this.attrs)r.getRemovedAt()&&n.push({parent:this,child:r});return n}}function Uc(t){var n;if(t.isText){const r=t;return{type:r.type,value:r.value}}const e={type:t.type,children:t.children.map(Uc)};return t.attrs&&(e.attributes=Qi((n=t.attrs)==null?void 0:n.toObject())),e}function Wf(t){if(t.isText)return t.value;let e="";return t.attrs&&t.attrs.size()&&(e=" "+Array.from(t.attrs).filter(n=>!n.isRemoved()).sort((n,r)=>n.getKey().localeCompare(r.getKey())).map(n=>{const r=JSON.parse(n.getValue());return typeof r=="string"?`${n.getKey()}="${r}"`:`${n.getKey()}="${Zt(n.getValue())}"`}).join(" ")),`<${t.type}${e}>${t.children.map(n=>Wf(n)).join("")}</${t.type}>`}function ny(t){if(t.isText){const e=t;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:t.type,children:t.children.map(ny),size:t.size,isRemoved:t.isRemoved}}class It extends xo{constructor(n,r){super(r);u(this,"indexTree");u(this,"nodeMapByID");this.indexTree=new z1(n),this.nodeMapByID=new ty(Ee.createComparator()),this.indexTree.traverseAll(i=>{this.nodeMapByID.put(i.id,i)})}static create(n,r){return new It(n,r)}findFloorNode(n){const r=this.nodeMapByID.floorEntry(n);if(!(!r||!r.key.getCreatedAt().equals(n.getCreatedAt())))return r.value}registerNode(n){this.nodeMapByID.put(n.id,n)}findNodesAndSplitText(n,r){const[i,s]=n.toTreeNodePair(this);let o=s;const a=i===o,l=o.parent&&!a?o.parent:i;if(o.isText&&o.split(this,n.getLeftSiblingID().getOffset()-o.id.getOffset()),r){const c=l.allChildren,d=a?0:c.indexOf(o)+1;for(let h=d;h<c.length;h++){const p=c[h];if(!p.id.getCreatedAt().after(r))break;o=p}}return[l,o]}style(n,r,i,s){const[o,a]=this.findNodesAndSplitText(n[0],i),[l,c]=this.findNodesAndSplitText(n[1],i),d=[],h=r?Qi(r):{},p=new Map,m=[];return this.traverseInPosRange(o,a,l,c,([w])=>{const I=w.getCreatedAt().getActorID(),O=s?s.has(I)?s.get(I):Bt:Vs;if(w.canStyle(i,O)&&r){const y=p.get(I),g=w.getCreatedAt();(!y||g.after(y))&&p.set(I,g);const v=w.setAttrs(r,i),T=v.reduce((P,[,B])=>(B&&(P[B.getKey()]=h[B.getKey()]),P),{}),x=w.parent,N=w.prevSibling||w.parent;Object.keys(T).length>0&&d.push({type:"style",from:this.toIndex(x,N),to:this.toIndex(w,w),fromPath:this.toPath(x,N),toPath:this.toPath(w,w),actor:i.getActorID(),value:T});for(const[P]of v)P&&m.push({parent:w,child:P})}}),[p,m,d]}removeStyle(n,r,i,s){const[o,a]=this.findNodesAndSplitText(n[0],i),[l,c]=this.findNodesAndSplitText(n[1],i),d=[],h=new Map,p=[];return this.traverseInPosRange(o,a,l,c,([m])=>{const w=m.getCreatedAt().getActorID(),I=s?s.has(w)?s.get(w):Bt:Vs;if(m.canStyle(i,I)&&r){const O=h.get(w),y=m.getCreatedAt();(!O||y.after(O))&&h.set(w,y),m.attrs||(m.attrs=new Sr);for(const T of r){const x=m.attrs.remove(T,i);for(const N of x)p.push({parent:m,child:N})}const g=m.parent,v=m.prevSibling||m.parent;d.push({actor:i.getActorID(),type:"removeStyle",from:this.toIndex(g,v),to:this.toIndex(m,m),fromPath:this.toPath(g,v),toPath:this.toPath(m,m),value:r})}}),[h,p,d]}edit(n,r,i,s,o,a){const[l,c]=this.findNodesAndSplitText(n[0],s),[d,h]=this.findNodesAndSplitText(n[1],s),p=this.toIndex(l,c),m=this.toPath(l,c),w=[],I=[],O=[],y=new Map;this.traverseInPosRange(l,c,d,h,([T,x],N)=>{if(x===he.Start&&!N)for(const H of T.children)O.push(H);const P=T.getCreatedAt().getActorID(),B=a?a.has(P)?a.get(P):Bt:Vs;if(T.canDelete(s,B)||w.includes(T.parent)){const H=y.get(P),U=T.getCreatedAt();(!H||U.after(H))&&y.set(P,U),(x===he.Text||x===he.Start)&&w.push(T),I.push([T,x])}});const g=this.makeDeletionChanges(I,s),v=[];for(const T of w)T.remove(s),T.isRemoved&&v.push({parent:this,child:T});for(const T of O)T.removedAt||l.append(T);if(i>0){let T=0,x=l,N=c;for(;T<i;)x.split(this,x.findOffset(N)+1,o),N=x,x=x.parent,T++;g.push({type:"content",from:p,to:p,fromPath:m,toPath:m,actor:s.getActorID()})}if(r!=null&&r.length){const T=[];let x=c;for(const N of r)x===l?l.insertAt(N,0):l.insertAfter(N,x),x=N,Ll(N,P=>{l.isRemoved&&(P.remove(s),v.push({parent:this,child:P})),this.nodeMapByID.put(P.id,P)}),N.isRemoved||T.push(N);if(T.length){const N=T.map(P=>Uc(P));g.length&&g[g.length-1].from===p?g[g.length-1].value=N:g.push({type:"content",from:p,to:p,fromPath:m,toPath:m,actor:s.getActorID(),value:N})}}return[g,v,y]}editT(n,r,i,s,o){const a=this.findPos(n[0]),l=this.findPos(n[1]);this.edit([a,l],r,i,s,o)}move(n,r,i){throw new k(S.ErrUnimplemented,`not implemented: ${n}, ${r}, ${i}`)}purge(n){var s;(s=n.parent)==null||s.removeChild(n),this.nodeMapByID.remove(n.id);const r=n.insPrevID,i=n.insNextID;if(r){const o=this.findFloorNode(r);o.insNextID=i}if(i){const o=this.findFloorNode(i);o.insPrevID=r}n.insPrevID=void 0,n.insNextID=void 0}getGCPairs(){const n=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&n.push({parent:this,child:r});for(const i of r.getGCPairs())n.push(i)}),n}findPos(n,r=!0){const i=this.indexTree.findTreePos(n,r);return Ot.fromTreePos(i)}pathToPosRange(n){const r=this.pathToIndex(n);return[this.findPos(r),this.findPos(r+1)]}pathToPos(n){const r=this.indexTree.pathToIndex(n);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return Wf(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const n=this.indexTree.getRoot(),r=(i,s=void 0,o=void 0,a=0)=>{var m,w,I,O;let l,c,d;const h=i.isText?{node:i,offset:0}:s&&o?this.toTreePos(s,o):null;h&&(l=this.indexTree.indexOf(h),c=this.indexTree.treePosToPath(h),d=Ot.fromTreePos(h).toStruct());const p={type:i.type,parent:s==null?void 0:s.id.toTestString(),size:i.size,id:i.id.toTestString(),removedAt:(m=i.removedAt)==null?void 0:m.toTestString(),insPrev:(w=i.insPrevID)==null?void 0:w.toTestString(),insNext:(I=i.insNextID)==null?void 0:I.toTestString(),value:i.isText?i.value:void 0,isRemoved:i.isRemoved,children:[],depth:a,attributes:i.attrs?Qi((O=i.attrs)==null?void 0:O.toObject()):void 0,index:l,path:c,pos:d};for(let y=0;y<i.allChildren.length;y++){const g=y===0?i:i.allChildren[y-1];p.children.push(r(i.allChildren[y],i,g,a+1))}return p};return r(n)}getRootTreeNode(){return Uc(this.indexTree.getRoot())}toTestTreeNode(){return ny(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const n=this.getRoot();return new It(n.deepcopy(),this.getCreatedAt())}toPath(n,r){const i=this.toTreePos(n,r);return i?this.indexTree.treePosToPath(i):[]}toIndex(n,r){const i=this.toTreePos(n,r);return i?this.indexTree.indexOf(i):-1}indexToPath(n){return this.indexTree.indexToPath(n)}pathToIndex(n){return this.indexTree.pathToIndex(n)}indexRangeToPosRange(n){const r=this.findPos(n[0]);return n[0]===n[1]?[r,r]:[r,this.findPos(n[1])]}indexRangeToPosStructRange(n){const[r,i]=n,s=this.findPos(r);return r===i?[s.toStruct(),s.toStruct()]:[s.toStruct(),this.findPos(i).toStruct()]}posRangeToPathRange(n){const[r,i]=this.findNodesAndSplitText(n[0]),[s,o]=this.findNodesAndSplitText(n[1]);return[this.toPath(r,i),this.toPath(s,o)]}posRangeToIndexRange(n){const[r,i]=this.findNodesAndSplitText(n[0]),[s,o]=this.findNodesAndSplitText(n[1]);return[this.toIndex(r,i),this.toIndex(s,o)]}traverseInPosRange(n,r,i,s,o){const a=this.toIndex(n,r),l=this.toIndex(i,s);return this.indexTree.tokensBetween(a,l,o)}toTreePos(n,r){if(!n||!r)return;if(n.isRemoved){let s;for(;n.isRemoved;)s=n,n=s.parent;const o=n.findOffset(s);return{node:n,offset:o}}if(n===r)return{node:n,offset:0};let i=n.findOffset(r);if(!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize};i++}return{node:n,offset:i}}makeDeletionChanges(n,r){const i=[],s=[];let o=null,a=null;for(let l=0;l<n.length;l++){const c=n[l],d=n[l+1];o||(o=c),a=c;const h=this.findRightToken(c);(!h||!d||h[0]!==d[0]||h[1]!==d[1])&&(s.push([o,a]),o=null,a=null)}for(const l of s){const[c,d]=l,[h,p]=this.findLeftToken(c),[m,w]=d,I=p===he.Start?h:h.parent,O=w===he.Start?m:m.parent,y=this.toIndex(I,h),g=this.toIndex(O,m);y<g&&(i.length>0&&y===i[i.length-1].to?(i[i.length-1].to=g,i[i.length-1].toPath=this.toPath(O,m)):i.push({type:"content",from:y,to:g,fromPath:this.toPath(I,h),toPath:this.toPath(O,m),actor:r.getActorID()}))}return i.reverse()}findRightToken([n,r]){if(r===he.Start){const l=n.allChildren;return l.length>0?[l[0],l[0].isText?he.Text:he.Start]:[n,he.End]}const i=n.parent,s=i.allChildren,o=s.indexOf(n);if(i&&o===s.length-1)return[i,he.End];const a=s[o+1];return[a,a.isText?he.Text:he.Start]}findLeftToken([n,r]){if(r===he.End){const l=n.allChildren;if(l.length>0){const c=l[l.length-1];return[c,c.isText?he.Text:he.End]}return[n,he.Start]}const i=n.parent,s=i.allChildren,o=s.indexOf(n);if(i&&o===0)return[i,he.Start];const a=s[o-1];return[a,a.isText?he.Text:he.End]}}class Do extends Mt{constructor(n,r,i,s,o,a,l){super(n,l);u(this,"fromPos");u(this,"toPos");u(this,"contents");u(this,"splitLevel");u(this,"maxCreatedAtMapByActor");this.fromPos=r,this.toPos=i,this.contents=s,this.splitLevel=o,this.maxCreatedAtMapByActor=a}static create(n,r,i,s,o,a,l){return new Do(n,r,i,s,o,a,l)}execute(n){var l;const r=n.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof It))throw new k(S.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const i=this.getExecutedAt(),s=r,[o,a]=s.edit([this.fromPos,this.toPos],(l=this.contents)==null?void 0:l.map(c=>c.deepcopy()),this.splitLevel,i,(()=>{let c=i.getDelimiter();return this.contents!==void 0&&(c+=this.contents.length),()=>et.of(i.getLamport(),++c,i.getActorID())})(),this.maxCreatedAtMapByActor);for(const c of a)n.registerGCPair(c);return{opInfos:o.map(({from:c,to:d,value:h,splitLevel:p,fromPath:m,toPath:w})=>({type:"tree-edit",path:n.createPath(this.getParentCreatedAt()),from:c,to:d,value:h,splitLevel:p,fromPath:m,toPath:w}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const n=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,s=this.contents||[];return`${n}.EDIT(${r},${i},${s.map(o=>Wf(o)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Or{constructor(e,n,r,i){u(this,"clientSeq");u(this,"serverSeq");u(this,"lamport");u(this,"actor");this.clientSeq=e,this.serverSeq=i,this.lamport=n,this.actor=r}static of(e,n,r,i){return new Or(e,n,r,i)}next(){return new Or(this.clientSeq+1,this.lamport+1n,this.actor)}syncLamport(e){return e>this.lamport?new Or(this.clientSeq,e,this.actor):new Or(this.clientSeq,this.lamport+1n,this.actor)}createTimeTicket(e){return et.of(this.lamport,e,this.actor)}setActor(e){return new Or(this.clientSeq,this.lamport,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const V1=new Or(0,0n,qf);class fs{constructor({id:e,operations:n,presenceChange:r,message:i}){u(this,"id");u(this,"operations");u(this,"presenceChange");u(this,"message");this.id=e,this.operations=n||[],this.presenceChange=r,this.message=i}static create({id:e,operations:n,presenceChange:r,message:i}){return new fs({id:e,operations:n,presenceChange:r,message:i})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const n of this.operations)n.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,n,r){const i=[],s=[];for(const o of this.operations){const a=o.execute(e,r);if(!a)continue;const{opInfos:l,reverseOp:c}=a;i.push(...l),c&&s.unshift(c)}return this.presenceChange&&(this.presenceChange.type===Yr.Put?n.set(this.id.getActorID(),Ct(this.presenceChange.presence)):n.delete(this.id.getActorID())),{opInfos:i,reverseOps:s}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:ve.bytesToHex(ve.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>ve.bytesToHex(ve.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:n,operations:r,presenceChange:i,message:s}=e;return fs.create({id:ve.bytesToChangeID(ve.hexToBytes(n)),operations:r==null?void 0:r.map(o=>ve.bytesToOperation(ve.hexToBytes(o))),presenceChange:i,message:s})}}class Bl{constructor(e,n,r,i,s,o){u(this,"documentKey");u(this,"checkpoint");u(this,"isRemoved");u(this,"changes");u(this,"snapshot");u(this,"minSyncedTicket");this.documentKey=e,this.checkpoint=n,this.isRemoved=r,this.changes=i,this.snapshot=s,this.minSyncedTicket=o}static create(e,n,r,i,s,o){return new Bl(e,n,r,i,s,o)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}}class Xi{constructor(e,n){u(this,"serverSeq");u(this,"clientSeq");this.serverSeq=e,this.clientSeq=n}static of(e,n){return new Xi(e,n)}increaseClientSeq(e){return e===0?this:new Xi(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const n=this.serverSeq>e.serverSeq?this.serverSeq:e.serverSeq,r=Math.max(this.clientSeq,e.clientSeq);return Xi.of(n,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq==e.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const K1=new Xi(0n,0);class nn{constructor(e,n){u(this,"createdAt");u(this,"offset");this.createdAt=e,this.offset=n}static of(e,n){return new nn(e,n)}static fromStruct(e){return nn.of(et.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new nn(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const W1=nn.of(Bt,0);class bt{constructor(e,n){u(this,"id");u(this,"relativeOffset");this.id=e,this.relativeOffset=n}static of(e,n){return new bt(e,n)}static fromStruct(e){const n=nn.fromStruct(e.id);return bt.of(n,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return nn.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class Wr extends Hp{constructor(n,r,i){super(r);u(this,"id");u(this,"removedAt");u(this,"prev");u(this,"next");u(this,"insPrev");u(this,"insNext");this.id=n,this.removedAt=i}static create(n,r){return new Wr(n,r)}static createComparator(){return(n,r)=>{const i=n.getCreatedAt().compare(r.getCreatedAt());return i!==0?i:n.getOffset()>r.getOffset()?1:n.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(n){this.prev=n,n&&(n.next=this)}setNext(n){this.next=n,n&&(n.prev=this)}setInsPrev(n){this.insPrev=n,n&&(n.insNext=this)}setInsNext(n){this.insNext=n,n&&(n.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(n){return new Wr(this.id.split(n),this.splitValue(n),this.removedAt)}canDelete(n,r){const i=!this.removedAt;return!this.getCreatedAt().after(r)&&(!this.removedAt||n.after(this.removedAt))?i:!1}canStyle(n,r){return!this.getCreatedAt().after(r)&&(!this.removedAt||n.after(this.removedAt))}remove(n){this.removedAt=n}createPosRange(){return[bt.of(this.id,0),bt.of(this.id,this.getLength())]}deepcopy(){return new Wr(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(n){const r=this.value;return this.value=r.substring(0,n),r.substring(n,r.length)}toIDString(){return this.id.toIDString()}}class ds{constructor(){u(this,"head");u(this,"treeByIndex");u(this,"treeByID");this.head=Wr.create(W1),this.treeByIndex=new po,this.treeByID=new ty(Wr.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new ds}edit(e,n,r,i){const[s,o]=this.findNodeWithSplit(e[1],n),[a,l]=this.findNodeWithSplit(e[0],n),c=this.findBetween(l,o),[d,h,p]=this.deleteNodes(c,n,i),m=o?o.getID():s.getID();let w=bt.of(m,0);if(r){const O=this.posToIndex(a.createPosRange()[1],!0),y=this.insertAfter(a,Wr.create(nn.of(n,0),r));d.length&&d[d.length-1].from===O?d[d.length-1].value=r:d.push({actor:n.getActorID(),from:O,to:O,value:r}),w=bt.of(y.getID(),y.getContentLength())}const I=[];for(const[,O]of p)I.push({parent:this,child:O});return[w,h,I,d]}indexToPos(e){const[n,r]=this.treeByIndex.find(e),i=n;return bt.of(i.getID(),r)}findIndexesFromRange(e){const[n,r]=e;return[this.posToIndex(n,!1),this.posToIndex(r,!0)]}posToIndex(e,n){const r=e.getAbsoluteID(),i=n?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);if(!i)throw new k(S.ErrInvalidArgument,`the node of the given id should be found: ${r.toTestString()}`);const s=this.treeByIndex.indexOf(i),o=i.isRemoved()?0:r.getOffset()-i.getID().getOffset();return s+o}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const e=[];for(const n of this)n.isRemoved()||e.push(n.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new ds;let n=this.head.getNext(),r=e.head,i;for(;n;){if(i=e.insertAfter(r,n.deepcopy()),n.hasInsPrev()){const s=e.findNode(n.getInsPrevID());i.setInsPrev(s)}r=i,n=n.getNext()}return e}toTestString(){const e=[];let n=this.head;for(;n;)n.isRemoved()?e.push(`{${n.toTestString()}}`):e.push(`[${n.toTestString()}]`),n=n.getNext();return e.join("")}insertAfter(e,n){const r=e.getNext();return n.setPrev(e),r&&r.setPrev(n),this.treeByID.put(n.getID(),n),this.treeByIndex.insertAfter(e,n),n}findNodeWithSplit(e,n){const r=e.getAbsoluteID();let i=this.findFloorNodePreferToLeft(r);const s=r.getOffset()-i.getID().getOffset();for(this.splitNode(i,s);i.hasNext()&&i.getNext().getCreatedAt().after(n);)i=i.getNext();return[i,i.getNext()]}findFloorNodePreferToLeft(e){let n=this.findFloorNode(e);if(!n)throw new k(S.ErrInvalidArgument,`the node of the given id should be found: ${e.toTestString()}`);if(e.getOffset()>0&&n.getID().getOffset()==e.getOffset()){if(!n.hasInsPrev())return n;n=n.getInsPrev()}return n}findFloorNode(e){const n=this.treeByID.floorEntry(e);if(n&&!(!n.key.equals(e)&&!n.key.hasSameCreatedAt(e)))return n.value}findBetween(e,n){const r=[];let i=e;for(;i&&i!==n;)r.push(i),i=i.getNext();return r}splitNode(e,n){if(n>e.getContentLength())throw new k(S.ErrInvalidArgument,"offset should be less than or equal to length");if(n===0)return e;if(n===e.getContentLength())return e.getNext();const r=e.split(n);this.treeByIndex.updateWeight(r),this.insertAfter(e,r);const i=e.getInsNext();return i&&i.setInsPrev(r),r.setInsPrev(e),r}deleteNodes(e,n,r){if(!e.length)return[[],new Map,new Map];const[i,s]=this.filterNodes(e,n,r),o=new Map,a=new Map,l=this.makeChanges(s,n);for(const c of i){const d=c.getCreatedAt().getActorID();(!o.has(d)||c.getID().getCreatedAt().after(o.get(d)))&&o.set(d,c.getID().getCreatedAt()),a.set(c.getID().toIDString(),c),c.remove(n)}return this.deleteIndexNodes(s),[l,o,a]}filterNodes(e,n,r){const i=!!r,s=[],o=[],[a,l]=this.findEdgesOfCandidates(e);o.push(a);for(const c of e){const d=c.getCreatedAt().getActorID(),h=i?r.has(d)?r.get(d):Bt:Vs;c.canDelete(n,h)?s.push(c):o.push(c)}return o.push(l),[s,o]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,n){const r=[];let i,s;for(let o=0;o<e.length-1;o++){const a=e[o],l=e[o+1];a.getNext()!=l&&([i]=this.findIndexesFromRange(a.getNext().createPosRange()),l?[,s]=this.findIndexesFromRange(l.getPrev().createPosRange()):s=this.treeByIndex.length,i<s&&r.push({actor:n.getActorID(),from:i,to:s}))}return r.reverse()}deleteIndexNodes(e){for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1];r.getNext()!=i&&this.treeByIndex.deleteRange(r,i)}}purge(e){this.treeByIndex.delete(e),this.treeByID.remove(e.getID());const n=e.getPrev(),r=e.getNext(),i=e.getInsPrev(),s=e.getInsNext();n&&n.setNext(r),r&&r.setPrev(n),e.setPrev(void 0),e.setNext(void 0),i&&i.setInsNext(s),s&&s.setInsPrev(i),e.setInsPrev(void 0),e.setInsNext(void 0)}}const Gh=t=>t<0?Math.ceil(t):Math.floor(t);var rn=(t=>(t[t.IntegerCnt=0]="IntegerCnt",t[t.LongCnt=1]="LongCnt",t))(rn||{});class nt extends xo{constructor(n,r,i){super(i);u(this,"valueType");u(this,"value");switch(this.valueType=n,n){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=V.fromNumber(r).toInt():this.value=Gh(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=V.fromNumber(r):this.value=r;break;default:throw new k(S.ErrUnimplemented,`unimplemented type: ${n}`)}}static create(n,r,i){return new nt(n,r,i)}static valueFromBytes(n,r){switch(n){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return V.fromBytesLE(Array.from(r));default:throw new k(S.ErrUnimplemented,`unimplemented type: ${n}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const n=nt.create(this.valueType,this.value,this.getCreatedAt());return n.setMovedAt(this.getMovedAt()),n}getType(){return this.valueType}static getCounterType(n){switch(typeof n){case"object":return n instanceof V?1:void 0;case"number":return n>Math.pow(2,31)-1||n<-Math.pow(2,31)?1:0;default:return}}static isSupport(n){return!!nt.getCounterType(n)}static isInteger(n){return n%1===0}isNumericType(){const n=this.valueType;return n===0||n===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const n=this.value;return new Uint8Array([n&255,n>>8&255,n>>16&255,n>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new k(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(n){function r(i){if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`)}return r(this),r(n),this.valueType===1?this.value=this.value.add(n.getValue()):n.getType()===ye.Long?this.value=this.value+n.getValue().toInt():this.value=V.fromNumber(this.value+Gh(n.getValue())).toInt(),this}}class hs extends Mt{constructor(n,r,i){super(n,i);u(this,"value");this.value=r}static create(n,r,i){return new hs(n,r,i)}execute(n){const r=n.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof nt))throw new k(S.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const i=r,s=this.value.deepcopy();return i.increase(s),{opInfos:[{type:"increase",path:n.createPath(this.getParentCreatedAt()),value:s.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const n=this.value.deepcopy(),i=n.getType()===ye.Long?n.getValue().multiply(-1):n.getValue()*-1;return hs.create(this.getParentCreatedAt(),ie.of(i,n.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class gr extends Mt{constructor(n,r,i,s,o,a,l){super(n,l);u(this,"fromPos");u(this,"toPos");u(this,"maxCreatedAtMapByActor");u(this,"attributes");u(this,"attributesToRemove");this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=s,this.attributes=o,this.attributesToRemove=a}static create(n,r,i,s,o,a){return new gr(n,r,i,s,o,new Array,a)}static createTreeRemoveStyleOperation(n,r,i,s,o,a){return new gr(n,r,i,s,new Map,o,a)}execute(n){const r=n.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof It))throw new k(S.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const i=r;let s,o;if(this.attributes.size){const a={};[...this.attributes].forEach(([l,c])=>a[l]=c),[,o,s]=i.style([this.fromPos,this.toPos],a,this.getExecutedAt(),this.maxCreatedAtMapByActor)}else{const a=this.attributesToRemove;[,o,s]=i.removeStyle([this.fromPos,this.toPos],a,this.getExecutedAt(),this.maxCreatedAtMapByActor)}for(const a of o)n.registerGCPair(a);return{opInfos:s.map(({from:a,to:l,value:c,fromPath:d,toPath:h})=>({type:"tree-style",from:a,to:l,value:this.attributes.size?{attributes:c}:{attributesToRemove:c},fromPath:d,toPath:h,path:n.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const n=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${n}.STYLE(${r},${i},${Object.entries(this.attributes||{}).map(([s,o])=>`${s}:"${o}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}function H1(t){const e=new jf,n=e.data;for(const[r,i]of Object.entries(t))n[r]=JSON.stringify(i);return e}function _1(t){if(t.type===Yr.Put)return new go({type:Ti.PUT,presence:H1(t.presence)});if(t.type===Yr.Clear)return new go({type:Ti.CLEAR});throw new k(S.ErrUnimplemented,"unimplemented type")}function G1(t){return new Vp({serverSeq:t.getServerSeq(),clientSeq:t.getClientSeq()})}function ry(t){return new Rl({clientSeq:t.getClientSeq(),lamport:t.getLamport(),actorId:Zf(t.getActorID())})}function F(t){if(t)return new b({lamport:t.getLamport(),delimiter:t.getDelimiter(),actorId:Zf(t.getActorID())})}function iy(t){switch(t){case ye.Null:return $.NULL;case ye.Boolean:return $.BOOLEAN;case ye.Integer:return $.INTEGER;case ye.Long:return $.LONG;case ye.Double:return $.DOUBLE;case ye.String:return $.STRING;case ye.Bytes:return $.BYTES;case ye.Date:return $.DATE;default:throw new k(S.ErrInvalidType,`unsupported type: ${t}`)}}function sy(t){switch(t){case rn.IntegerCnt:return $.INTEGER_CNT;case rn.LongCnt:return $.LONG_CNT;default:throw new k(S.ErrInvalidType,`unsupported type: ${t}`)}}function vu(t){if(t instanceof We)return new lt({type:$.JSON_OBJECT,createdAt:F(t.getCreatedAt()),value:vy(t)});if(t instanceof tt)return new lt({type:$.JSON_ARRAY,createdAt:F(t.getCreatedAt()),value:IS(t)});if(t instanceof At)return new lt({type:$.TEXT,createdAt:F(t.getCreatedAt())});if(t instanceof ie)return new lt({type:iy(t.getType()),createdAt:F(t.getCreatedAt()),value:t.toBytes()});if(t instanceof nt)return new lt({type:sy(t.getType()),createdAt:F(t.getCreatedAt()),value:t.toBytes()});if(t instanceof It)return new lt({type:$.TREE,createdAt:F(t.getCreatedAt()),value:xS(t)});throw new k(S.ErrUnimplemented,"unimplemented element")}function Y1(t){return new fo({createdAt:F(t.getCreatedAt()),offset:t.getOffset()})}function Qo(t){return new wr({createdAt:F(t.getID().getCreatedAt()),offset:t.getID().getOffset(),relativeOffset:t.getRelativeOffset()})}function Xo(t){return new ki({parentId:Ks(t.getParentID()),leftSiblingId:Ks(t.getLeftSiblingID())})}function Ks(t){return new Vr({createdAt:F(t.getCreatedAt()),offset:t.getOffset()})}function oy(t){const e=new Uf;if(t instanceof Ai){const n=t,r=new Ha;r.parentCreatedAt=F(n.getParentCreatedAt()),r.key=n.getKey(),r.value=vu(n.getValue()),r.executedAt=F(n.getExecutedAt()),e.body.case="set",e.body.value=r}else if(t instanceof Co){const n=t,r=new _a;r.parentCreatedAt=F(n.getParentCreatedAt()),r.prevCreatedAt=F(n.getPrevCreatedAt()),r.value=vu(n.getValue()),r.executedAt=F(n.getExecutedAt()),e.body.case="add",e.body.value=r}else if(t instanceof Br){const n=t,r=new Ga;r.parentCreatedAt=F(n.getParentCreatedAt()),r.prevCreatedAt=F(n.getPrevCreatedAt()),r.createdAt=F(n.getCreatedAt()),r.executedAt=F(n.getExecutedAt()),e.body.case="move",e.body.value=r}else if(t instanceof Qr){const n=t,r=new Ya;r.parentCreatedAt=F(n.getParentCreatedAt()),r.createdAt=F(n.getCreatedAt()),r.executedAt=F(n.getExecutedAt()),e.body.case="remove",e.body.value=r}else if(t instanceof No){const n=t,r=new Qa;r.parentCreatedAt=F(n.getParentCreatedAt()),r.from=Qo(n.getFromPos()),r.to=Qo(n.getToPos());const i=r.createdAtMapByActor;for(const[o,a]of n.getMaxCreatedAtMapByActor())i[o]=F(a);r.content=n.getContent();const s=r.attributes;for(const[o,a]of n.getAttributes())s[o]=a;r.executedAt=F(n.getExecutedAt()),e.body.case="edit",e.body.value=r}else if(t instanceof Po){const n=t,r=new Xa;r.parentCreatedAt=F(n.getParentCreatedAt()),r.from=Qo(n.getFromPos()),r.to=Qo(n.getToPos());const i=r.createdAtMapByActor;for(const[o,a]of n.getMaxCreatedAtMapByActor())i[o]=F(a);const s=r.attributes;for(const[o,a]of n.getAttributes())s[o]=a;r.executedAt=F(n.getExecutedAt()),e.body.case="style",e.body.value=r}else if(t instanceof hs){const n=t,r=new Za;r.parentCreatedAt=F(n.getParentCreatedAt()),r.value=vu(n.getValue()),r.executedAt=F(n.getExecutedAt()),e.body.case="increase",e.body.value=r}else if(t instanceof Do){const n=t,r=new el,i=r.createdAtMapByActor;for(const[s,o]of n.getMaxCreatedAtMapByActor())i[s]=F(o);r.parentCreatedAt=F(n.getParentCreatedAt()),r.from=Xo(n.getFromPos()),r.to=Xo(n.getToPos()),r.contents=rS(n.getContents()),r.splitLevel=n.getSplitLevel(),r.executedAt=F(n.getExecutedAt()),e.body.case="treeEdit",e.body.value=r}else if(t instanceof gr){const n=t,r=new tl;r.parentCreatedAt=F(n.getParentCreatedAt()),r.from=Xo(n.getFromPos()),r.to=Xo(n.getToPos());const i=r.createdAtMapByActor;for(const[o,a]of n.getMaxCreatedAtMapByActor())i[o]=F(a);const s=n.getAttributesToRemove();if(s.length>0)r.attributesToRemove=s;else{const o=r.attributes;for(const[a,l]of n.getAttributes())o[a]=l}r.executedAt=F(n.getExecutedAt()),e.body.case="treeStyle",e.body.value=r}else throw new k(S.ErrUnimplemented,"unimplemented operation");return e}function Q1(t){const e=[];for(const n of t)e.push(oy(n));return e}function X1(t){const e=new jp({id:ry(t.getID()),message:t.getMessage()});return t.hasOperations()&&(e.operations=Q1(t.getOperations())),t.hasPresenceChange()&&(e.presenceChange=_1(t.getPresenceChange())),e}function Z1(t){const e=[];for(const n of t)e.push(X1(n));return e}function eS(t){const e=[];for(const n of t)e.push(new qp({key:n.getStrKey(),element:_f(n.getValue())}));return e}function tS(t){const e=[];for(const n of t)e.push(new ll({element:_f(n.getValue())}));return e}function nS(t){const e=[];for(const n of t){const r=new ul;r.id=Y1(n.getID()),r.value=n.getValue().getContent(),r.removedAt=F(n.getRemovedAt());const i=r.attributes,s=n.getValue().getAttrs();for(const o of s){const a=new ls;a.value=o.getValue(),a.updatedAt=F(o.getUpdatedAt()),i[o.getKey()]=a}e.push(r)}return e}function rS(t){const e=[];if(!t||!t.length)return e;for(const n of t)e.push(new cl({content:Hf(n)}));return e}function iS(t){const e={};for(const n of t)e[n.getKey()]=new ls({value:n.getValue(),updatedAt:F(n.getUpdatedAt()),isRemoved:n.isRemoved()});return e}function Hf(t){if(!t)return[];const e=[];return Ll(t,(n,r)=>{const i=new ho({id:Ks(n.id),type:n.type,removedAt:F(n.removedAt),depth:r});n.isText&&(i.value=n.value),n.insPrevID&&(i.insPrevId=Ks(n.insPrevID)),n.insNextID&&(i.insNextId=Ks(n.insNextID)),n.attrs&&(i.attributes=iS(n.attrs)),e.push(i)}),e}function sS(t){const e=new He;return e.body.case="jsonObject",e.body.value=new nl({nodes:eS(t.getRHT()),createdAt:F(t.getCreatedAt()),movedAt:F(t.getMovedAt()),removedAt:F(t.getRemovedAt())}),e}function ay(t){const e=new He;return e.body.case="jsonArray",e.body.value=new rl({nodes:tS(t.getElements()),createdAt:F(t.getCreatedAt()),movedAt:F(t.getMovedAt()),removedAt:F(t.getRemovedAt())}),e}function oS(t){const e=new He;return e.body.case="primitive",e.body.value=new il({type:iy(t.getType()),value:t.toBytes(),createdAt:F(t.getCreatedAt()),movedAt:F(t.getMovedAt()),removedAt:F(t.getRemovedAt())}),e}function aS(t){const e=new He;return e.body.case="text",e.body.value=new sl({nodes:nS(t.getRGATreeSplit()),createdAt:F(t.getCreatedAt()),movedAt:F(t.getMovedAt()),removedAt:F(t.getRemovedAt())}),e}function lS(t){const e=new He;return e.body.case="counter",e.body.value=new ol({type:sy(t.getType()),value:t.toBytes(),createdAt:F(t.getCreatedAt()),movedAt:F(t.getMovedAt()),removedAt:F(t.getRemovedAt())}),e}function ly(t){const e=new He;return e.body.case="tree",e.body.value=new al({nodes:Hf(t.getRoot()),createdAt:F(t.getCreatedAt()),movedAt:F(t.getMovedAt()),removedAt:F(t.getRemovedAt())}),e}function _f(t){if(t instanceof We)return sS(t);if(t instanceof tt)return ay(t);if(t instanceof ie)return oS(t);if(t instanceof At)return aS(t);if(t instanceof nt)return lS(t);if(t instanceof It)return ly(t);throw new k(S.ErrUnimplemented,"unimplemented element")}function uS(t){return new Tr({documentKey:t.getDocumentKey(),checkpoint:G1(t.getCheckpoint()),isRemoved:t.getIsRemoved(),changes:Z1(t.getChanges()),snapshot:t.getSnapshot(),minSyncedTicket:F(t.getMinSyncedTicket())})}function Yh(t){const e=t.findDetails(x1);for(const n of e)if(n.metadata.code)return n.metadata.code;return""}function uy(t){return Or.of(t.clientSeq,BigInt(t.lamport),Xf(t.actorId),BigInt(t.serverSeq))}function M(t){if(t)return et.of(BigInt(t.lamport),t.delimiter,Xf(t.actorId))}function Gf(t){const e={};return Object.entries(t.data).forEach(([n,r])=>{e[n]=JSON.parse(r)}),e}function cS(t){const e=t.type;if(e===Ti.PUT){const n=Gf(t.presence);return{type:Yr.Put,presence:n}}if(e===Ti.CLEAR)return{type:Yr.Clear};throw new k(S.ErrInvalidType,`unsupported type: ${e}`)}function fS(t){const e=new Map;return Object.entries(t).forEach(([n,r])=>{e.set(n,Gf(r))}),e}function cy(t){switch(t){case $.NULL:return ye.Null;case $.BOOLEAN:return ye.Boolean;case $.INTEGER:return ye.Integer;case $.LONG:return ye.Long;case $.DOUBLE:return ye.Double;case $.STRING:return ye.String;case $.BYTES:return ye.Bytes;case $.DATE:return ye.Date}throw new k(S.ErrUnimplemented,`unimplemented value type: ${t}`)}function hl(t){switch(t){case $.INTEGER_CNT:return rn.IntegerCnt;case $.LONG_CNT:return rn.LongCnt}throw new k(S.ErrUnimplemented,`unimplemented value type: ${t}`)}function wu(t){switch(t.type){case $.JSON_OBJECT:return t.value?yy(t.value):We.create(M(t.createdAt));case $.JSON_ARRAY:return t.value?AS(t.value):tt.create(M(t.createdAt));case $.TEXT:return At.create(ds.create(),M(t.createdAt));case $.TREE:return ES(t.value);case $.NULL:case $.BOOLEAN:case $.INTEGER:case $.LONG:case $.DOUBLE:case $.STRING:case $.BYTES:case $.DATE:return ie.of(ie.valueFromBytes(cy(t.type),t.value),M(t.createdAt));case $.INTEGER_CNT:case $.LONG_CNT:return nt.create(hl(t.type),nt.valueFromBytes(hl(t.type),t.value),M(t.createdAt))}}function Zo(t){return bt.of(nn.of(M(t.createdAt),t.offset),t.relativeOffset)}function fy(t){return nn.of(M(t.createdAt),t.offset)}function dS(t){const e=vo.create(t.value);Object.entries(t.attributes).forEach(([r,i])=>{e.setAttr(r,i.value,M(i.updatedAt))});const n=Wr.create(fy(t.id),e);return n.remove(M(t.removedAt)),n}function Pi(t){return Ot.of(Ws(t.parentId),Ws(t.leftSiblingId))}function Ws(t){return Ee.of(M(t.createdAt),t.offset)}function hS(t){if(!t.length)return;const e=[];return t.forEach(n=>{const r=Yf(n.content);e.push(r)}),e}function Yf(t){if(t.length===0)return;const e=[];for(const i of t)e.push(mS(i));const n=e[e.length-1],r=new Map;r.set(t[e.length-1].depth,e[e.length-1]);for(let i=e.length-2;i>=0;i--)r.get(t[i].depth-1).prepend(e[i]),r.set(t[i].depth,e[i]);return n.updateDescendantsSize(),It.create(n,Bt).getRoot()}function gS(t){const e=Sr.create();for(const[n,r]of Object.entries(t))e.setInternal(n,r.value,M(r.updatedAt),r.isRemoved);return e}function mS(t){const e=Ws(t.id),n=Xe.create(e,t.type),r=Object.entries(t.attributes);return n.isText?n.value=t.value:r.length&&(n.attrs=gS(t.attributes)),t.insPrevId&&(n.insPrevID=Ws(t.insPrevId)),t.insNextId&&(n.insNextID=Ws(t.insNextId)),n.removedAt=M(t.removedAt),n}function dy(t){if(t.body.case==="set"){const e=t.body.value;return Ai.create(e.key,wu(e.value),M(e.parentCreatedAt),M(e.executedAt))}else if(t.body.case==="add"){const e=t.body.value;return Co.create(M(e.parentCreatedAt),M(e.prevCreatedAt),wu(e.value),M(e.executedAt))}else if(t.body.case==="move"){const e=t.body.value;return Br.create(M(e.parentCreatedAt),M(e.prevCreatedAt),M(e.createdAt),M(e.executedAt))}else if(t.body.case==="remove"){const e=t.body.value;return Qr.create(M(e.parentCreatedAt),M(e.createdAt),M(e.executedAt))}else if(t.body.case==="edit"){const e=t.body.value,n=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,s])=>{n.set(i,M(s))});const r=new Map;return Object.entries(e.attributes).forEach(([i,s])=>{r.set(i,s)}),No.create(M(e.parentCreatedAt),Zo(e.from),Zo(e.to),n,e.content,r,M(e.executedAt))}else if(t.body.case==="style"){const e=t.body.value,n=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,s])=>{n.set(i,M(s))});const r=new Map;return Object.entries(e.attributes).forEach(([i,s])=>{r.set(i,s)}),Po.create(M(e.parentCreatedAt),Zo(e.from),Zo(e.to),n,r,M(e.executedAt))}else{if(t.body.case==="select")return;if(t.body.case==="increase"){const e=t.body.value;return hs.create(M(e.parentCreatedAt),wu(e.value),M(e.executedAt))}else if(t.body.case==="treeEdit"){const e=t.body.value,n=new Map;return Object.entries(e.createdAtMapByActor).forEach(([r,i])=>{n.set(r,M(i))}),Do.create(M(e.parentCreatedAt),Pi(e.from),Pi(e.to),hS(e.contents),e.splitLevel,n,M(e.executedAt))}else if(t.body.case==="treeStyle"){const e=t.body.value,n=new Map,r=e.attributesToRemove,i=new Map;return e!=null&&e.createdAtMapByActor&&Object.entries(e.createdAtMapByActor).forEach(([s,o])=>{i.set(s,M(o))}),(r==null?void 0:r.length)>0?gr.createTreeRemoveStyleOperation(M(e.parentCreatedAt),Pi(e.from),Pi(e.to),i,r,M(e.executedAt)):(Object.entries(e.attributes).forEach(([s,o])=>{n.set(s,o)}),gr.create(M(e.parentCreatedAt),Pi(e.from),Pi(e.to),i,n,M(e.executedAt)))}else throw new k(S.ErrUnimplemented,"unimplemented operation")}}function pS(t){const e=[];for(const n of t){const r=dy(n);r&&e.push(r)}return e}function hy(t){const e=[];for(const n of t)e.push(fs.create({id:uy(n.id),operations:pS(n.operations),presenceChange:n.presenceChange?cS(n.presenceChange):void 0,message:n.message}));return e}function yS(t){return Xi.of(BigInt(t.serverSeq),t.clientSeq)}function vS(t){return Bl.create(t.documentKey,yS(t.checkpoint),t.isRemoved,hy(t.changes),t.snapshot,M(t.minSyncedTicket))}function gy(t){const e=new mo;for(const r of t.nodes){const i=Qf(r.element);e.set(r.key,i,i.getPositionedAt())}const n=new We(M(t.createdAt),e);return n.setMovedAt(M(t.movedAt)),n.setRemovedAt(M(t.removedAt)),n}function my(t){const e=new yo;for(const r of t.nodes)e.insert(Qf(r.element));const n=new tt(M(t.createdAt),e);return n.setMovedAt(M(t.movedAt)),n.setRemovedAt(M(t.removedAt)),n}function wS(t){const e=ie.of(ie.valueFromBytes(cy(t.type),t.value),M(t.createdAt));return e.setMovedAt(M(t.movedAt)),e.setRemovedAt(M(t.removedAt)),e}function SS(t){const e=new ds;let n=e.getHead();for(const i of t.nodes){const s=e.insertAfter(n,dS(i));i.insPrevId&&s.setInsPrev(e.findNode(fy(i.insPrevId))),n=s}const r=new At(e,M(t.createdAt));return r.setMovedAt(M(t.movedAt)),r.setRemovedAt(M(t.removedAt)),r}function kS(t){const e=nt.create(hl(t.type),nt.valueFromBytes(hl(t.type),t.value),M(t.createdAt));return e.setMovedAt(M(t.movedAt)),e.setRemovedAt(M(t.removedAt)),e}function py(t){const e=Yf(t.nodes);return It.create(e,M(t.createdAt))}function Qf(t){if(t.body.case==="jsonObject")return gy(t.body.value);if(t.body.case==="jsonArray")return my(t.body.value);if(t.body.case==="primitive")return wS(t.body.value);if(t.body.case==="text")return SS(t.body.value);if(t.body.case==="counter")return kS(t.body.value);if(t.body.case==="tree")return py(t.body.value);throw new k(S.ErrUnimplemented,"unimplemented element")}function TS(t){if(!t)return{root:We.create(Bt),presences:new Map};const e=pc.fromBinary(t);return{root:Qf(e.root),presences:fS(e.presences)}}function yy(t){if(!t)throw new k(S.ErrInvalidArgument,"bytes is empty");const e=He.fromBinary(t);return gy(e.body.value)}function vy(t){return _f(t).toBinary()}function AS(t){if(!t)throw new k(S.ErrInvalidArgument,"bytes is empty");const e=He.fromBinary(t);return my(e.body.value)}function IS(t){return ay(t).toBinary()}function ES(t){if(!t)throw new k(S.ErrInvalidArgument,"bytes is empty");const e=He.fromBinary(t);return py(e.body.value)}function xS(t){return ly(t).toBinary()}function wy(t){return t?Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function Xf(t){return wy(t)}function Sy(t){return new Uint8Array(t.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Zf(t){return Sy(t)}function CS(t){const e=Rl.fromBinary(t);return uy(e)}function NS(t){const e=Uf.fromBinary(t);return dy(e)}const ve={fromPresence:Gf,toChangePack:uS,fromChangePack:vS,fromChanges:hy,toTreeNodes:Hf,fromTreeNodes:Yf,objectToBytes:vy,bytesToObject:yy,bytesToSnapshot:TS,bytesToHex:wy,hexToBytes:Sy,toHexString:Xf,toUint8Array:Zf,toOperation:oy,toChangeID:ry,PbChangeID:Rl,bytesToChangeID:CS,bytesToOperation:NS};var be=(t=>(t[t.Trivial=0]="Trivial",t[t.Debug=1]="Debug",t[t.Info=2]="Info",t[t.Warn=3]="Warn",t[t.Error=4]="Error",t[t.Fatal=5]="Fatal",t))(be||{});let si=3;function ky(t){si=t}const J={trivial:(...t)=>{si>0||typeof console<"u"&&console.log("YORKIE T:",...t)},debug:(...t)=>{si>1||typeof console<"u"&&console.log("YORKIE D:",...t)},info:(...t)=>{si>2||typeof console<"u"&&console.log("YORKIE I:",...t)},warn:(...t)=>{si>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...t):console.log("YORKIE W:",...t))},error:(...t)=>{si>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...t):console.log("YORKIE E:",...t))},fatal:(...t)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...t):console.log("YORKIE F:",...t))},isEnabled:t=>si<=t};function Ty(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}class PS{constructor(e,n,r,i,s){u(this,"reconnectStreamDelay");u(this,"doc");u(this,"docID");u(this,"syncMode");u(this,"remoteChangeEventReceived");u(this,"watchStream");u(this,"watchLoopTimerID");u(this,"watchAbortController");u(this,"unsubscribeBroadcastEvent");this.reconnectStreamDelay=e,this.doc=n,this.docID=r,this.syncMode=i,this.remoteChangeEventReceived=!1,this.unsubscribeBroadcastEvent=s}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===Sa.RealtimeSyncOff?!1:this.syncMode===Sa.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Sa.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const n=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(n,this.reconnectStreamDelay)})}catch{}};await n()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const Su=()=>{};class DS{constructor(e){u(this,"finalized",!1);u(this,"observers",[]);u(this,"finalError");try{e(this)}catch(n){this.error(n)}}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(!e)throw new k(S.ErrInvalidArgument,"missing observer");if(this.finalized)throw new k(S.ErrRefused,"observable is finalized due to previous error");typeof e=="object"?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Su),i.error===void 0&&(i.error=Su),i.complete===void 0&&(i.complete=Su);const s=Ty(),o=this.unsubscribeOne.bind(this,s);if(this.observers.push({subscriptionID:s,observer:i}),this.finalized)try{this.finalError?i.error(this.finalError):i.complete()}catch(a){J.warn(a)}return o}unsubscribeOne(e){var n;this.observers=(n=this.observers)==null?void 0:n.filter(r=>r.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e].observer)}catch(r){J.error(r)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function OS(t){const e=new DS(t);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class Vi{constructor(e,n,r,i){u(this,"id");u(this,"delimiter");u(this,"message");u(this,"root");u(this,"operations");u(this,"presenceChange");u(this,"previousPresence");u(this,"reversePresenceKeys");this.id=e,this.delimiter=Wp,this.root=n,this.operations=[],this.previousPresence=Ct(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=i}static create(e,n,r,i){return new Vi(e,n,r,i)}push(e){this.operations.push(e)}registerElement(e,n){this.root.registerElement(e,n)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getChange(){return fs.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,n){for(const r of Object.keys(e))n!=null&&n.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const n of this.reversePresenceKeys)e[n]=this.previousPresence[n];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class wo{constructor(e){u(this,"rootObject");u(this,"elementPairMapByCreatedAt");u(this,"gcElementSetByCreatedAt");u(this,"gcPairMap");this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(e,void 0),e.getDescendants(n=>{if(n.getRemovedAt()&&this.registerRemovedElement(n),n instanceof At||n instanceof It)for(const r of n.getGCPairs())this.registerGCPair(r);return!1})}static create(){return new wo(We.create(Bt))}findByCreatedAt(e){const n=this.elementPairMapByCreatedAt.get(e.toIDString());if(n)return n.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let n=this.elementPairMapByCreatedAt.get(e.toIDString());if(!n)return[];const r=[];for(;n.parent;){const i=n.element.getCreatedAt(),s=n.parent.subPathOf(i);if(s===void 0)throw new k(S.ErrInvalidArgument,`cant find the given element: ${i.toIDString()}`);r.unshift(s),n=this.elementPairMapByCreatedAt.get(n.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,n){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:n,element:e}),e instanceof Kr&&e.getDescendants((r,i)=>(this.registerElement(r,i),!1))}deregisterElement(e){let n=0;const r=i=>{const s=i.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(s),this.gcElementSetByCreatedAt.delete(s),n++};return r(e),e instanceof Kr&&e.getDescendants(i=>(r(i),!1)),n}registerRemovedElement(e){this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const n of this.gcElementSetByCreatedAt){e.add(n);const r=this.elementPairMapByCreatedAt.get(n);r.element instanceof Kr&&r.element.getDescendants(i=>(e.add(i.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}deepcopy(){return new wo(this.rootObject.deepcopy())}garbageCollect(e){let n=0;for(const r of this.gcElementSetByCreatedAt){const i=this.elementPairMapByCreatedAt.get(r);i.element.getRemovedAt()&&e.compare(i.element.getRemovedAt())>=0&&(i.parent.purge(i.element),n+=this.deregisterElement(i.element))}for(const[,r]of this.gcPairMap){const i=r.child.getRemovedAt();i!==void 0&&e.compare(i)>=0&&(r.parent.purge(r.child),this.gcPairMap.delete(r.child.toIDString()),n+=1)}return n}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}}function Ay(t,e){const n=new So(t);return new Proxy(e,n.getHandlers())}class So{constructor(e){u(this,"context");u(this,"handlers");this.context=e,this.handlers={set:(n,r,i)=>(J.isEnabled(be.Trivial)&&J.trivial(`obj[${r}]=${JSON.stringify(i)}`),So.setInternal(e,n,r,i),!0),get:(n,r)=>(J.isEnabled(be.Trivial)&&J.trivial(`obj[${r}]`),r==="getID"?()=>n.getCreatedAt():r==="toJSON"||r==="toString"?()=>n.toJSON():r==="toJS"?()=>n.toJS():r==="toJSForTest"?()=>n.toJSForTest():oi(e,n.get(r))),ownKeys:n=>n.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(n,r)=>(J.isEnabled(be.Trivial)&&J.trivial(`obj[${r}]`),So.deleteInternal(e,n,r),!0)}}static setInternal(e,n,r,i){if(r.includes("."))throw new k(S.ErrInvalidObjectKey,"key must not contain the '.'.");const s=e.issueTimeTicket(),o=gl(e,i,s),a=n.set(r,o,s);e.registerElement(o,n),a&&e.registerRemovedElement(a),e.push(Ai.create(r,o.deepcopy(),n.getCreatedAt(),s))}static buildObjectMembers(e,n){const r={};for(const[i,s]of Object.entries(n)){if(i.includes("."))throw new k(S.ErrInvalidObjectKey,"key must not contain the '.'.");const o=e.issueTimeTicket(),a=gl(e,s,o);r[i]=a}return r}static deleteInternal(e,n,r){const i=e.issueTimeTicket(),s=n.deleteByKey(r,i);s&&(e.push(Qr.create(n.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s))}getHandlers(){return this.handlers}}function RS(t,e){const n=new ae(t,e);return new Proxy(e,n.getHandlers())}function LS(t){return typeof t=="string"||t instanceof String?!isNaN(t):!1}function BS(t){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(t)}class ae{constructor(e,n){u(this,"context");u(this,"handlers");u(this,"array");this.context=e,this.array=n,this.handlers={get:(r,i,s)=>i==="getID"?()=>r.getCreatedAt():i==="getElementByID"?o=>{const a=r.getByID(o);if(!(!a||a.isRemoved()))return Er(e,a)}:i==="getElementByIndex"?o=>{const a=r.get(o);return Er(e,a)}:i==="getLast"?()=>Er(e,r.getLast()):i==="deleteByID"?o=>{const a=ae.deleteInternalByID(e,r,o);return Er(e,a)}:i==="insertAfter"?(o,a)=>{const l=ae.insertAfterInternal(e,r,o,a);return Er(e,l)}:i==="insertBefore"?(o,a)=>{const l=ae.insertBeforeInternal(e,r,o,a);return Er(e,l)}:i==="moveBefore"?(o,a)=>{ae.moveBeforeInternal(e,r,o,a)}:i==="moveAfter"?(o,a)=>{ae.moveAfterInternal(e,r,o,a)}:i==="moveFront"?o=>{ae.moveFrontInternal(e,r,o)}:i==="moveLast"?o=>{ae.moveLastInternal(e,r,o)}:LS(i)?oi(e,r.get(Number(i))):i==="push"?o=>ae.pushInternal(e,r,o):i==="splice"?(o,a,...l)=>ae.splice(e,r,o,a,...l):i==="length"?r.length:typeof i=="symbol"&&i===Symbol.iterator?ae.iteratorInternal.bind(this,e,r):i==="includes"?(o,a)=>ae.includes(e,r,o,a):i==="indexOf"?(o,a)=>ae.indexOf(e,r,o,a):i==="lastIndexOf"?(o,a)=>ae.lastIndexOf(e,r,o,a):i==="toJSForTest"?()=>r.toJSForTest():i==="toTestString"?()=>ae.toTestString(r):typeof i=="string"&&BS(i)?(...o)=>{const a=Array.from(r).map(l=>oi(e,l));return Array.prototype[i].apply(a,o)}:Reflect.get(r,i,s),deleteProperty:(r,i)=>(J.isEnabled(be.Trivial)&&J.trivial(`array[${i}]`),ae.deleteInternalByIndex(e,r,Number.parseInt(i)),!0)}}static*iteratorInternal(e,n){for(const r of n)yield Er(e,r)}static buildArrayElements(e,n){const r=[];for(const i of n){const s=e.issueTimeTicket(),o=gl(e,i,s);r.push(o)}return r}static pushInternal(e,n,r){return ae.insertAfterInternal(e,n,n.getLastCreatedAt(),r),n.length}static moveBeforeInternal(e,n,r,i){const s=e.issueTimeTicket(),o=n.getPrevCreatedAt(r);n.moveAfter(o,i,s),e.push(Br.create(n.getCreatedAt(),o,i,s))}static moveAfterInternal(e,n,r,i){const s=e.issueTimeTicket();n.moveAfter(r,i,s),e.push(Br.create(n.getCreatedAt(),r,i,s))}static moveFrontInternal(e,n,r){const i=e.issueTimeTicket(),s=n.getHead();n.moveAfter(s.getCreatedAt(),r,i),e.push(Br.create(n.getCreatedAt(),s.getCreatedAt(),r,i))}static moveLastInternal(e,n,r){const i=e.issueTimeTicket(),s=n.getLastCreatedAt();n.moveAfter(s,r,i),e.push(Br.create(n.getCreatedAt(),s,r,i))}static insertAfterInternal(e,n,r,i){const s=e.issueTimeTicket(),o=gl(e,i,s);return n.insertAfter(r,o),e.registerElement(o,n),e.push(Co.create(n.getCreatedAt(),r,o.deepcopy(),s)),o}static insertBeforeInternal(e,n,r,i){return ae.insertAfterInternal(e,n,n.getPrevCreatedAt(r),i)}static deleteInternalByIndex(e,n,r){const i=e.issueTimeTicket(),s=n.deleteByIndex(r,i);if(s)return e.push(Qr.create(n.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static deleteInternalByID(e,n,r){const i=e.issueTimeTicket(),s=n.delete(r,i);return e.push(Qr.create(n.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static splice(e,n,r,i,...s){const o=n.length,a=r>=0?Math.min(r,o):Math.max(o+r,0),l=i===void 0?o:i<0?a:Math.min(a+i,o),c=[];for(let d=a;d<l;d++){const h=ae.deleteInternalByIndex(e,n,a);if(h){const p=h.deepcopy();p.setRemovedAt(),c.push(oi(e,p))}}if(s){let d=a===0?n.getHead().getID():n.get(a-1).getID();for(const h of s)d=ae.insertAfterInternal(e,n,d,h).getID()}return c}static includes(e,n,r,i){var a;const s=n.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return!1;if(ie.isSupport(r))return Array.from(n).map(c=>oi(e,c)).includes(r,o);for(let l=o;l<s;l++)if(((a=n.get(l))==null?void 0:a.getID())===r.getID())return!0;return!1}static indexOf(e,n,r,i){var a;const s=n.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return-1;if(ie.isSupport(r))return Array.from(n).map(c=>oi(e,c)).indexOf(r,o);for(let l=o;l<s;l++)if(((a=n.get(l))==null?void 0:a.getID())===r.getID())return l;return-1}static lastIndexOf(e,n,r,i){var a;const s=n.length,o=i===void 0||i>=s?s-1:i<0?i+s:i;if(o<0)return-1;if(ie.isSupport(r))return Array.from(n).map(c=>oi(e,c)).lastIndexOf(r,o);for(let l=o;l>0;l--)if(((a=n.get(l))==null?void 0:a.getID())===r.getID())return l;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class bl{constructor(e,n){u(this,"context");u(this,"text");this.context=e,this.text=n}initialize(e,n){this.context=e,this.text=n}getID(){return this.text.getID()}edit(e,n,r,i){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");if(e>n)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const s=this.text.indexRangeToPosRange(e,n);J.isEnabled(be.Debug)&&J.debug(`EDIT: f:${e}->${s[0].toTestString()}, t:${n}->${s[1].toTestString()} c:${r}`);const o=i?us(i):void 0,a=this.context.issueTimeTicket(),[l,,c,d]=this.text.edit(s,r,a,o);for(const h of c)this.context.registerGCPair(h);return this.context.push(new No(this.text.getCreatedAt(),s[0],s[1],l,r,o?new Map(Object.entries(o)):new Map,a)),this.text.findIndexesFromRange(d)}delete(e,n){return this.edit(e,n,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,n,r){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");if(e>n)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.text.indexRangeToPosRange(e,n);J.isEnabled(be.Debug)&&J.debug(`STYL: f:${e}->${i[0].toTestString()}, t:${n}->${i[1].toTestString()} a:${JSON.stringify(r)}`);const s=us(r),o=this.context.issueTimeTicket(),[a,l]=this.text.setStyle(i,s,o);for(const c of l)this.context.registerGCPair(c);return this.context.push(new Po(this.text.getCreatedAt(),i[0],i[1],a,new Map(Object.entries(s)),o)),!0}indexRangeToPosRange(e){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");const n=this.text.indexRangeToPosRange(e[0],e[1]);return[n[0].toStruct(),n[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");const n=this.text.findIndexesFromRange([bt.fromStruct(e[0]),bt.fromStruct(e[1])]);return[n[0],n[1]]}toTestString(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,n){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(e,n)}}class Fl{constructor(e,n){u(this,"valueType");u(this,"value");u(this,"context");u(this,"counter");this.valueType=e,this.value=n}initialize(e,n){this.valueType=n.getValueType(),this.context=e,this.counter=n,this.value=n.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter)throw new k(S.ErrNotInitialized,"Counter is not initialized yet");const n=this.context.issueTimeTicket(),r=ie.of(e,n);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(hs.create(this.counter.getCreatedAt(),r,n)),this}toJSForTest(){if(!this.context||!this.counter)throw new k(S.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function ed(t,e,n){const{type:r}=t,i=n.issueTimeTicket();if(r===hr){Iy(t);const{value:s}=t,o=Xe.create(Ee.of(i,0),r,s);e.append(o)}else{const{children:s=[]}=t,{attributes:o}=t;let a;if(typeof o=="object"&&!Kp(o)){const c=us(o);a=new Sr;for(const[d,h]of Object.entries(c))a.set(d,h,i)}const l=Xe.create(Ee.of(i,0),r,void 0,a);e.append(l);for(const c of s)ed(c,l,n)}}function bS(t,e){const{type:n}=e,r=t.issueTimeTicket();let i;if(e.type===hr){const{value:s}=e;i=Xe.create(Ee.of(r,0),n,s)}else if(e){const{children:s=[]}=e,{attributes:o}=e;let a;if(typeof o=="object"&&!Kp(o)){const l=us(o);a=new Sr;for(const[c,d]of Object.entries(l))a.set(c,d,r)}i=Xe.create(Ee.of(t.issueTimeTicket(),0),n,void 0,a);for(const l of s)ed(l,i,t)}return i}function Iy(t){if(!t.value.length)throw new k(S.ErrInvalidArgument,"text node cannot have empty value");return!0}function Qh(t){if(!t.length)return!0;if(t[0].type===hr)for(const n of t){const{type:r}=n;if(r!==hr)throw new k(S.ErrInvalidArgument,"element node and text node cannot be passed together");Iy(n)}else for(const n of t){const{type:r}=n;if(r===hr)throw new k(S.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class Ml{constructor(e){u(this,"initialRoot");u(this,"context");u(this,"tree");this.initialRoot=e}initialize(e,n){this.context=e,this.tree=n}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return Xe.create(Ee.of(e.issueTimeTicket(),0),F1);const n=Xe.create(Ee.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)ed(r,n,e);return n}getSize(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,n){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new k(S.ErrInvalidArgument,"path should not be empty");const[r,i]=this.tree.pathToPosRange(e),s=this.context.issueTimeTicket(),o=n?us(n):void 0,[a]=this.tree.style([r,i],o,s);this.context.push(gr.create(this.tree.getCreatedAt(),r,i,a,o?new Map(Object.entries(o)):new Map,s))}style(e,n,r){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>n)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(n),o=this.context.issueTimeTicket(),a=r?us(r):void 0,[l,c]=this.tree.style([i,s],a,o);for(const d of c)this.context.registerGCPair(d);this.context.push(gr.create(this.tree.getCreatedAt(),i,s,l,a?new Map(Object.entries(a)):new Map,o))}removeStyle(e,n,r){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>n)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(n),o=this.context.issueTimeTicket(),[a,l]=this.tree.removeStyle([i,s],r,o);for(const c of l)this.context.registerGCPair(c);this.context.push(gr.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),i,s,a,r,o))}editInternal(e,n,r,i=0){var c;if(r.length!==0&&r[0]&&(Qh(r),r[0].type!==hr))for(const d of r){const{children:h=[]}=d;Qh(h)}const s=this.context.getLastTimeTicket();let o=new Array;if(((c=r[0])==null?void 0:c.type)===hr){let d="";for(const h of r){const{value:p}=h;d+=p}o.push(Xe.create(Ee.of(this.context.issueTimeTicket(),0),hr,d))}else o=r.map(d=>d&&bS(this.context,d)).filter(d=>d);const[,a,l]=this.tree.edit([e,n],o.length?o.map(d=>d==null?void 0:d.deepcopy()):void 0,i,s,()=>this.context.issueTimeTicket());for(const d of a)this.context.registerGCPair(d);return this.context.push(Do.create(this.tree.getCreatedAt(),e,n,o.length?o:void 0,i,l,s)),!0}editByPath(e,n,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==n.length)throw new k(S.ErrInvalidArgument,"path length should be equal");if(!e.length||!n.length)throw new k(S.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(n);return this.editInternal(s,o,r?[r]:[],i)}editBulkByPath(e,n,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==n.length)throw new k(S.ErrInvalidArgument,"path length should be equal");if(!e.length||!n.length)throw new k(S.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(n);return this.editInternal(s,o,r,i)}edit(e,n,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>n)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(n);return this.editInternal(s,o,r?[r]:[],i)}editBulk(e,n,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>n)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(n);return this.editInternal(s,o,r,i)}toXML(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");const n=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],r=this.tree.indexRangeToPosRange(n);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");const n=[Ot.fromStruct(e[0]),Ot.fromStruct(e[1])];return this.tree.posRangeToIndexRange(n)}posRangeToPathRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");const n=[Ot.fromStruct(e[0]),Ot.fromStruct(e[1])];return this.tree.posRangeToPathRange(n)}}function Xh(t,e){return Ay(t,e)}function Er(t,e){if(e){if(e instanceof ie)return e;if(e instanceof We)return Ay(t,e);if(e instanceof tt)return RS(t,e);if(e instanceof At)return new bl(t,e);if(e instanceof nt){const n=new Fl(rn.IntegerCnt,0);return n.initialize(t,e),n}else if(e instanceof It){const n=new Ml;return n.initialize(t,e),n}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function oi(t,e){const n=Er(t,e);return n instanceof ie?n.getValue():n}function gl(t,e,n){let r;if(ie.isSupport(e))r=ie.of(e,n);else if(Array.isArray(e))r=tt.create(n,ae.buildArrayElements(t,e));else if(typeof e=="object")e instanceof bl?(r=At.create(ds.create(),n),e.initialize(t,r)):e instanceof Fl?(r=nt.create(e.getValueType(),e.getValue(),n),e.initialize(t,r)):e instanceof Ml?(r=It.create(e.buildRoot(t),n),e.initialize(t,r)):r=We.create(n,So.buildObjectMembers(t,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return r}const Zh=50;class FS{constructor(){u(this,"undoStack",[]);u(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=Zh&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=Zh&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const MS="yorkie-devtools-panel",JS="yorkie-devtools-sdk";let Di="disconnected";const eg=new Map,wa=new Map;typeof window<"u"&&(window.transactionEventsByDocKey=wa);function ea(t,e){(e!=null&&e.force||Di!=="disconnected")&&window.postMessage({source:JS,...t},"*")}function $S(t){if(!t.isEnableDevtools()||typeof window>"u"||eg.has(t.getKey()))return;wa.set(t.getKey(),[]);const e=t.subscribe("all",n=>{n.some(r=>r.type!==$e.StatusChanged&&r.type!==$e.Snapshot&&r.type!==$e.LocalChange&&r.type!==$e.RemoteChange&&r.type!==$e.Initialized&&r.type!==$e.Watched&&r.type!==$e.Unwatched&&r.type!==$e.PresenceChanged)||(wa.get(t.getKey()).push(n),Di==="synced"&&ea({msg:"doc::sync::partial",docKey:t.getKey(),event:n}))});eg.set(t.getKey(),[e]),ea({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",n=>{var i;if(((i=n.data)==null?void 0:i.source)!==MS)return;switch(n.data.msg){case"devtools::connect":if(Di!=="disconnected")break;Di="connected",ea({msg:"doc::available",docKey:t.getKey()}),J.info(`[YD] Devtools connected. Doc: ${t.getKey()}`);break;case"devtools::disconnect":Di="disconnected",J.info(`[YD] Devtools disconnected. Doc: ${t.getKey()}`);break;case"devtools::subscribe":Di="synced",ea({msg:"doc::sync::full",docKey:t.getKey(),events:wa.get(t.getKey())}),J.info(`[YD] Devtools subscribed. Doc: ${t.getKey()}`);break}})}var xr=(t=>(t.Detached="detached",t.Attached="attached",t.Removed="removed",t))(xr||{}),$e=(t=>(t.StatusChanged="status-changed",t.ConnectionChanged="connection-changed",t.SyncStatusChanged="sync-status-changed",t.Snapshot="snapshot",t.LocalChange="local-change",t.RemoteChange="remote-change",t.Initialized="initialized",t.Watched="watched",t.Unwatched="unwatched",t.PresenceChanged="presence-changed",t.Broadcast="broadcast",t.LocalBroadcast="local-broadcast",t))($e||{}),jc=(t=>(t.Connected="connected",t.Disconnected="disconnected",t))(jc||{}),qc=(t=>(t.Synced="synced",t.SyncFailed="sync-failed",t))(qc||{});class Ey{constructor(e,n){u(this,"key");u(this,"status");u(this,"opts");u(this,"changeID");u(this,"checkpoint");u(this,"localChanges");u(this,"root");u(this,"clone");u(this,"eventStream");u(this,"eventStreamObserver");u(this,"onlineClients");u(this,"presences");u(this,"history");u(this,"internalHistory");u(this,"isUpdating");this.opts=n||{},this.key=e,this.status="detached",this.root=wo.create(),this.changeID=V1,this.checkpoint=K1,this.localChanges=[],this.eventStream=OS(r=>{this.eventStreamObserver=r}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new FS,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},$S(this)}update(e,n){if(this.getStatus()==="removed")throw new k(S.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),i=Vi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(r)||{},n);try{const s=Xh(i,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,e(s,new yu(i,this.clone.presences.get(r)))}catch(s){throw this.clone=void 0,s}finally{this.isUpdating=!1}if(i.hasChange()){J.isEnabled(be.Trivial)&&J.trivial(`trying to update a local change: ${this.toJSON()}`);const s=i.getChange(),{opInfos:o,reverseOps:a}=s.execute(this.root,this.presences,Y.Local),l=i.getReversePresence();l&&a.push({type:"presence",value:l}),this.localChanges.push(s),a.length>0&&this.internalHistory.pushUndo(a),o.length>0&&this.internalHistory.clearRedo(),this.changeID=s.getID();const c=[];o.length>0&&c.push({type:"local-change",source:Y.Local,value:{message:s.getMessage()||"",operations:o,actor:r,clientSeq:s.getID().getClientSeq(),serverSeq:s.getID().getServerSeq()},rawChange:this.isEnableDevtools()?s.toStruct():void 0}),s.hasPresenceChange()&&c.push({type:"presence-changed",source:Y.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(c),J.isEnabled(be.Trivial)&&J.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,n,r,i){if(typeof e=="string"){if(typeof n!="function")throw new k(S.ErrInvalidArgument,"Second argument must be a callback function");if(e==="presence"){const a=n;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="initialized"&&c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||a(c)},r,i)}if(e==="my-presence"){const a=n;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="initialized"&&c.type!=="presence-changed"||c.type==="presence-changed"&&c.value.clientID!==this.changeID.getActorID()||a(c)},r,i)}if(e==="others"){const a=n;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||c.value.clientID!==this.changeID.getActorID()&&a(c)},r,i)}if(e==="connection"){const a=n;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="connection-changed"&&a(c)},r,i)}if(e==="status"){const a=n;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="status-changed"&&a(c)},r,i)}if(e==="sync"){const a=n;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="sync-status-changed"&&a(c)},r,i)}if(e==="local-broadcast"){const a=n;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="local-broadcast"&&a(c)},r)}if(e==="broadcast"){const a=n;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="broadcast"&&a(c)},r)}if(e==="all"){const a=n;return this.eventStream.subscribe(a,r,i)}const s=e,o=n;return this.eventStream.subscribe(a=>{for(const l of a){if(l.type!=="local-change"&&l.type!=="remote-change")continue;const c=[];for(const d of l.value.operations)this.isSameElementOrChildOf(d.path,s)&&c.push(d);c.length&&o({...l,value:{...l.value,operations:c}})}},r,i)}if(typeof e=="function"){const s=e,o=n,a=r;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="snapshot"&&c.type!=="local-change"&&c.type!=="remote-change"||s(c)},o,a)}throw new k(S.ErrInvalidArgument,`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,n){if(n===e)return!0;const r=e.split(".");return n.split(".").every((s,o)=>s===r[o])}applyChangePack(e){for(e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges(),Y.Remote);this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();e.hasSnapshot()&&this.applyChanges(this.localChanges,Y.Remote),this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),this.garbageCollect(e.getMinSyncedTicket()),e.getIsRemoved()&&this.applyStatus("removed"),J.isEnabled(be.Trivial)&&J.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Ct(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),n=this.checkpoint.increaseClientSeq(e.length);return Bl.create(this.key,n,!1,e)}setActor(e){for(const n of this.localChanges)n.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Vi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return Xh(e,this.clone.root.getObject())}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,n){const{root:r,presences:i}=ve.bytesToSnapshot(n);this.root=new wo(r),this.presences=i,this.changeID=this.changeID.syncLamport(e),this.clone=void 0,this.publish([{type:"snapshot",source:Y.Remote,value:{snapshot:this.isEnableDevtools()?ve.bytesToHex(n):void 0,serverSeq:e.toString()}}])}applyChanges(e,n){J.isEnabled(be.Debug)&&J.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),J.isEnabled(be.Trivial)&&J.trivial(e.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of e)this.applyChange(r,n);J.isEnabled(be.Debug)&&J.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,n){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,n);const r=[],i=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(i)){const o=e.getPresenceChange();switch(o.type){case Yr.Put:r.push(this.presences.has(i)?{type:"presence-changed",source:n,value:{clientID:i,presence:o.presence}}:{type:"watched",source:Y.Remote,value:{clientID:i,presence:o.presence}});break;case Yr.Clear:r.push({type:"unwatched",source:Y.Remote,value:{clientID:i,presence:this.getPresence(i)}}),this.removeOnlineClient(i);break}}const{opInfos:s}=e.execute(this.root,this.presences,n);if(this.changeID=this.changeID.syncLamport(e.getID().getLamport()),s.length>0){const o=this.isEnableDevtools()?e.toStruct():void 0;r.push(n===Y.Remote?{type:"remote-change",source:n,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o}:{type:"local-change",source:n,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o})}r.length>0&&this.publish(r)}applyWatchStream(e){if(e.body.case==="initialization"){const n=e.body.value.clientIds,r=new Set;for(const i of n)i!==this.changeID.getActorID()&&r.add(i);this.setOnlineClients(r),this.publish([{type:"initialized",source:Y.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:n,publisher:r}=e.body.value,i=[];if(n===mi.DOCUMENT_WATCHED)this.addOnlineClient(r),this.hasPresence(r)&&i.push({type:"watched",source:Y.Remote,value:{clientID:r,presence:this.getPresence(r)}});else if(n===mi.DOCUMENT_UNWATCHED){const s=this.getPresence(r);this.removeOnlineClient(r),s&&i.push({type:"unwatched",source:Y.Remote,value:{clientID:r,presence:s}})}else if(n===mi.DOCUMENT_BROADCAST&&e.body.value.body){const{topic:s,payload:o}=e.body.value.body,a=new TextDecoder;i.push({type:"broadcast",value:{clientID:r,topic:s,payload:JSON.parse(a.decode(o))}})}i.length>0&&this.publish(i)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(qf),this.publish([{source:e==="removed"?Y.Remote:Y.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEvent(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:n,serverSeq:r}=e.value;if(!n)return;this.applySnapshot(BigInt(r),ve.hexToBytes(n));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const n=fs.fromStruct(e.rawChange);this.applyChange(n,e.source)}if(e.type==="initialized"){const n=new Set;for(const{clientID:r,presence:i}of e.value)n.add(r),this.presences.set(r,i);this.setOnlineClients(n);return}if(e.type==="watched"){const{clientID:n,presence:r}=e.value;this.addOnlineClient(n),this.presences.set(n,r);return}if(e.type==="unwatched"){const{clientID:n}=e.value;this.removeOnlineClient(n),this.presences.delete(n)}if(e.type==="presence-changed"){const{clientID:n,presence:r}=e.value;this.presences.set(n,r)}}applyTransactionEvent(e){for(const n of e)this.applyDocEvent(n)}getValueByPath(e){if(!e.startsWith("$"))throw new k(S.ErrInvalidArgument,'path must start with "$"');const n=e.split(".");n.shift();let r=this.getRoot();for(const i of n)if(r=r[i],r===void 0)return;return r}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?Ct(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const n=this.presences.get(e);return n?Ct(n):void 0}getPresenceForTest(e){const n=this.presences.get(e);return n?Ct(n):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:Ct(this.getMyPresence())});for(const n of this.onlineClients)this.presences.has(n)&&e.push({clientID:n,presence:Ct(this.presences.get(n))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(n=>n.clientID!==e).sort((n,r)=>n.clientID>r.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new k(S.ErrRefused,"Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new k(S.ErrRefused,"There is no operation to be undone");this.ensureClone();const n=Vi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const c of e){if(!(c instanceof Mt)){new yu(n,Ct(this.clone.presences.get(this.changeID.getActorID()))).set(c.value,{addToHistory:!0});continue}const d=n.issueTimeTicket();c.setExecutedAt(d),n.push(c)}const r=n.getChange();r.execute(this.clone.root,this.clone.presences,Y.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,Y.UndoRedo),o=n.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushRedo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const a=this.changeID.getActorID(),l=[];i.length>0&&l.push({type:"local-change",source:Y.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&l.push({type:"presence-changed",source:Y.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(l)}redo(){if(this.isUpdating)throw new k(S.ErrRefused,"Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new k(S.ErrRefused,"There is no operation to be redone");this.ensureClone();const n=Vi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const c of e){if(!(c instanceof Mt)){new yu(n,Ct(this.clone.presences.get(this.changeID.getActorID()))).set(c.value,{addToHistory:!0});continue}const d=n.issueTimeTicket();c.setExecutedAt(d),n.push(c)}const r=n.getChange();r.execute(this.clone.root,this.clone.presences,Y.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,Y.UndoRedo),o=n.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushUndo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const a=this.changeID.getActorID(),l=[];i.length>0&&l.push({type:"local-change",source:Y.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&l.push({type:"presence-changed",source:Y.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(l)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}broadcast(e,n,r){const i={type:"local-broadcast",value:{topic:e,payload:n},options:r};this.publish([i])}}function zS(t,e){return n=>async r=>(t&&r.header.set("x-api-key",t),e&&r.header.set("authorization",e),await n(r))}const US="yorkie-js-sdk",jS="0.5.2",qS="Yorkie JS SDK",VS="./src/yorkie.ts",KS={access:"public",main:"./dist/yorkie-js-sdk.js",typings:"./dist/yorkie-js-sdk.d.ts"},WS=["dist"],HS={build:"tsc && vite build","build:proto":"npx buf generate","build:docs":"typedoc","build:ghpages":"mkdir -p ghpages/examples && cp -r docs ghpages/api-reference && find ../../examples -name 'dist' -type d -exec sh -c 'cp -r {} ghpages/examples/$(basename $(dirname {}))' \\;",dev:"vite build -c vite.preview.ts && vite preview",test:"vitest run","test:watch":"vitest","test:bench":"vitest bench","test:ci":"vitest run --coverage","test:yorkie.dev":"TEST_RPC_ADDR=https://api.yorkie.dev vitest run --coverage",prepare:"pnpm build"},_S={node:">=18.0.0",npm:">=7.1.0"},GS={type:"git",url:"git+https://github.com/yorkie-team/yorkie-js-sdk.git"},YS={name:"hackerwins",email:"susukang98@gmail.com"},QS="Apache-2.0",XS={url:"https://github.com/yorkie-team/yorkie-js-sdk/issues"},ZS="https://github.com/yorkie-team/yorkie-js-sdk#readme",ek={"@buf/googleapis_googleapis.bufbuild_es":"^1.4.0-20240524201209-f0e53af8f2fc.3","@bufbuild/buf":"^1.28.1","@bufbuild/protoc-gen-es":"^1.6.0","@connectrpc/protoc-gen-connect-es":"^1.4.0","@types/google-protobuf":"^3.15.5","@types/long":"^4.0.1","@typescript-eslint/eslint-plugin":"^6.21.0","@typescript-eslint/parser":"^6.21.0","@vitest/coverage-istanbul":"^0.34.5","@vitest/coverage-v8":"^0.34.5","eslint-plugin-tsdoc":"^0.2.16",prettier:"^2.7.1","ts-node":"^10.9.1",typedoc:"^0.25.13",typescript:"^5.3.3","typescript-transform-paths":"^3.3.1",vite:"^5.0.12","vite-plugin-commonjs":"^0.10.1","vite-plugin-dts":"^3.9.1","vite-tsconfig-paths":"^4.2.1",vitest:"^0.34.5"},tk={"@bufbuild/protobuf":"^1.6.0","@connectrpc/connect":"^1.4.0","@connectrpc/connect-web":"^1.4.0",long:"^5.2.0"},tg={name:US,version:jS,description:qS,main:VS,publishConfig:KS,files:WS,scripts:HS,engines:_S,repository:GS,author:YS,license:QS,bugs:XS,homepage:ZS,devDependencies:ek,dependencies:tk};function nk(){return t=>async e=>(e.header.set("x-yorkie-user-agent",tg.name+"/"+tg.version),await t(e))}const rk=t=>{try{if(JSON.stringify(t)===void 0)return!1}catch{return!1}return!0};var Sa=(t=>(t.Manual="manual",t.Realtime="realtime",t.RealtimePushOnly="realtime-pushonly",t.RealtimeSyncOff="realtime-syncoff",t))(Sa||{});const ta={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3},ku={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class xy{constructor(e,n){u(this,"id");u(this,"key");u(this,"status");u(this,"attachmentMap");u(this,"apiKey");u(this,"conditions");u(this,"syncLoopDuration");u(this,"reconnectStreamDelay");u(this,"retrySyncLoopDelay");u(this,"rpcClient");u(this,"taskQueue");u(this,"processing",!1);n=n||ta,this.key=n.key?n.key:Ty(),this.status="deactivated",this.attachmentMap=new Map,this.apiKey=n.apiKey||"",this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=n.syncLoopDuration||ta.syncLoopDuration,this.reconnectStreamDelay=n.reconnectStreamDelay||ta.reconnectStreamDelay,this.retrySyncLoopDelay=n.retrySyncLoopDelay||ta.retrySyncLoopDelay,this.rpcClient=n1(E1,I1({baseUrl:e,interceptors:[zS(n.apiKey,n.token),nk()]})),this.taskQueue=[]}activate(){return this.isActive()?Promise.resolve():this.enqueueTask(async()=>this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status="activated",this.runSyncLoop(),J.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw J.error(`[AC] c:"${this.getKey()}" err :`,e),this.handleConnectError(e),e}))}deactivate(){return this.status==="deactivated"?Promise.resolve():this.enqueueTask(async()=>this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{this.deactivateInternal(),J.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw J.error(`[DC] c:"${this.getKey()}" err :`,e),this.handleConnectError(e),e}))}attach(e,n={}){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==xr.Detached)throw new k(S.ErrDocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((s,o)=>o.set(n.initialPresence||{}));const r=e.subscribe("local-broadcast",async s=>{var d;const{topic:o,payload:a}=s.value,l=(d=s.options)==null?void 0:d.error,c=s.options;try{await this.broadcast(e.getKey(),o,a,c)}catch(h){h instanceof Error&&(l==null||l(h))}}),i=n.syncMode??"realtime";return this.enqueueTask(async()=>this.rpcClient.attachDocument({clientId:this.id,changePack:ve.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async s=>{const o=ve.fromChangePack(s.changePack);return e.applyChangePack(o),e.getStatus()===xr.Removed||(e.applyStatus(xr.Attached),this.attachmentMap.set(e.getKey(),new PS(this.reconnectStreamDelay,e,s.documentId,i,r)),i!=="manual"&&await this.runWatchLoop(e.getKey()),J.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`)),e}).catch(s=>{throw J.error(`[AD] c:"${this.getKey()}" err :`,s),this.handleConnectError(s),s}))}detach(e,n={}){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return e.update((i,s)=>s.clear()),this.enqueueTask(async()=>this.rpcClient.detachDocument({clientId:this.id,documentId:r.docID,changePack:ve.toChangePack(e.createChangePack()),removeIfNotAttached:n.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(i=>{const s=ve.fromChangePack(i.changePack);return e.applyChangePack(s),e.getStatus()!==xr.Removed&&e.applyStatus(xr.Detached),this.detachInternal(e.getKey()),J.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(i=>{throw J.error(`[DD] c:"${this.getKey()}" err :`,i),this.handleConnectError(i),i}))}async changeSyncMode(e,n){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);const i=r.syncMode;return i===n?e:(r.changeSyncMode(n),n==="manual"?(r.cancelWatchStream(),e):(n==="realtime"&&(r.remoteChangeEventReceived=!0),i==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);if(e){const n=this.attachmentMap.get(e.getKey());if(!n)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(n,"realtime").catch(r=>{throw J.error(`[SY] c:"${this.getKey()}" err :`,r),this.handleConnectError(r),r}))}return this.enqueueTask(async()=>{const n=[];for(const[,r]of this.attachmentMap)n.push(this.syncInternal(r,r.syncMode));return Promise.all(n).catch(r=>{throw J.error(`[SY] c:"${this.getKey()}" err :`,r),this.handleConnectError(r),r})})}remove(e){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const n=this.attachmentMap.get(e.getKey());if(!n)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const r=ve.toChangePack(e.createChangePack());return r.isRemoved=!0,this.enqueueTask(async()=>this.rpcClient.removeDocument({clientId:this.id,documentId:n.docID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(i=>{const s=ve.fromChangePack(i.changePack);e.applyChangePack(s),this.detachInternal(e.getKey()),J.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(i=>{throw J.error(`[RD] c:"${this.getKey()}" err :`,i),this.handleConnectError(i),i}))}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(e){return this.conditions[e]}broadcast(e,n,r,i){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const s=this.attachmentMap.get(e);if(!s)throw new k(S.ErrDocumentNotAttached,`${e} is not attached`);if(!rk(r))throw new k(S.ErrInvalidArgument,"payload is not serializable");const o=(i==null?void 0:i.maxRetries)??ku.maxRetries,a=ku.maxBackoff;let l=0;const c=h=>Math.min(ku.initialRetryInterval*2**h,a),d=async()=>this.enqueueTask(async()=>this.rpcClient.broadcast({clientId:this.id,documentId:s.docID,topic:n,payload:new TextEncoder().encode(JSON.stringify(r))},{headers:{"x-shard-key":`${this.apiKey}/${e}`}}).then(()=>{J.info(`[BC] c:"${this.getKey()}" broadcasts d:"${e}" t:"${n}"`)}).catch(h=>{if(J.error(`[BC] c:"${this.getKey()}" err:`,h),this.handleConnectError(h))if(l<o)l++,setTimeout(()=>d(),c(l-1)),J.info(`[BC] c:"${this.getKey()}" retry attempt ${l}/${o}`);else throw J.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),h;else throw h}));return d()}runSyncLoop(){const e=()=>{if(!this.isActive()){J.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const n=[];for(const[,r]of this.attachmentMap)r.needRealtimeSync()&&(r.remoteChangeEventReceived=!1,n.push(this.syncInternal(r,r.syncMode)));Promise.all(n).then(()=>setTimeout(e,this.syncLoopDuration)).catch(r=>{J.error(`[SL] c:"${this.getKey()}" sync failed:`,r),this.handleConnectError(r)?setTimeout(e,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};J.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,e()}async runWatchLoop(e){const n=this.attachmentMap.get(e);if(!n)throw new k(S.ErrDocumentNotAttached,`${e} is not attached`);return this.conditions.WatchLoop=!0,n.runWatchLoop(r=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new k(S.ErrClientNotActivated,`${this.key} is not active`));const i=new AbortController,s=this.rpcClient.watchDocument({clientId:this.id,documentId:n.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:i.signal});return n.doc.publish([{type:$e.ConnectionChanged,value:jc.Connected}]),J.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((o,a)=>{(async()=>{try{for await(const c of s)this.handleWatchDocumentsResponse(n,c),c.body.case==="initialization"&&o([s,i])}catch(c){n.doc.resetOnlineClients(),n.doc.publish([{type:$e.Initialized,source:Y.Local,value:n.doc.getPresences()}]),n.doc.publish([{type:$e.ConnectionChanged,value:jc.Disconnected}]),J.debug(`[WD] c:"${this.getKey()}" unwatches`),this.handleConnectError(c)?r():this.conditions.WatchLoop=!1,a(c)}})()})})}handleWatchDocumentsResponse(e,n){if(n.body.case==="event"&&n.body.value.type===mi.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(n)}deactivateInternal(){this.status="deactivated";for(const[e,n]of this.attachmentMap)this.detachInternal(e),n.doc.applyStatus(xr.Detached)}detachInternal(e){const n=this.attachmentMap.get(e);n&&(n.cancelWatchStream(),n.unsubscribeBroadcastEvent(),this.attachmentMap.delete(e))}syncInternal(e,n){const{doc:r,docID:i}=e,s=r.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:i,changePack:ve.toChangePack(s),pushOnly:n==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${r.getKey()}`}}).then(o=>{const a=ve.fromChangePack(o.changePack);if(a.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return r;r.applyChangePack(a),e.doc.publish([{type:$e.SyncStatusChanged,value:qc.Synced}]),r.getStatus()===xr.Removed&&this.detachInternal(r.getKey());const l=r.getKey(),c=a.getChangeSize();return J.info(`[PP] c:"${this.getKey()}" sync d:"${l}", push:${s.getChangeSize()} pull:${c} cp:${a.getCheckpoint().toTestString()}`),r}).catch(o=>{throw r.publish([{type:$e.SyncStatusChanged,value:qc.SyncFailed}]),J.error(`[PP] c:"${this.getKey()}" err :`,o),o})}handleConnectError(e){return e instanceof me?e.code===_.Canceled||e.code===_.Unknown||e.code===_.ResourceExhausted||e.code===_.Unavailable?!0:((Yh(e)===S.ErrClientNotActivated||Yh(e)===S.ErrClientNotFound)&&this.deactivateInternal(),!1):!1}enqueueTask(e){return new Promise((n,r)=>{this.taskQueue.push(()=>e().then(n).catch(r)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{J.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}const ng={Client:xy,Document:Ey,Primitive:ie,Text:bl,Counter:Fl,Tree:Ml,LogLevel:be,setLogLevel:ky,IntType:rn.IntegerCnt,LongType:rn.LongCnt};typeof globalThis<"u"&&(globalThis.yorkie={Client:xy,Document:Ey,Primitive:ie,Text:bl,Counter:Fl,Tree:Ml,LogLevel:be,setLogLevel:ky,IntType:rn.IntegerCnt,LongType:rn.LongCnt});var Cy={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var r=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var o=typeof s;if(o==="string"||o==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=n.apply(null,s);a&&r.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){r.push(s.toString());continue}for(var l in s)e.call(s,l)&&s[l]&&r.push(l)}}}return r.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Cy);var ik=Cy.exports;const td=Ry(ik);function Ny(t){const[e,n]=br.useState(t.text||"");return Q.jsx("input",{className:td({edit:t.editing,"new-todo":t.newTodo}),type:"text",placeholder:t.placeholder,value:e,onBlur:r=>{t.newTodo||t.onSave(r.target.value)},onChange:r=>{n(r.target.value)},onKeyDown:r=>{const i=r.target;r.which===13&&(t.onSave(i.value.trim()),t.newTodo&&n(""))}})}function sk(t){return Q.jsxs("header",{className:"header",children:[Q.jsx("h1",{children:"todos"}),Q.jsx(Ny,{newTodo:!0,onSave:e=>{e.length!==0&&t.addTodo(e)},placeholder:"What needs to be done?"})]})}function ok(t){const[e,n]=br.useState(!1),{todo:r,completeTodo:i,editTodo:s,deleteTodo:o}=t;return Q.jsx("li",{className:td({completed:r.completed,editing:e}),children:e?Q.jsx(Ny,{text:r.text,editing:e,onSave:a=>{a.length===0?o(r.id):s(r.id,a),n(!1)}}):Q.jsxs("div",{className:"view",children:[Q.jsx("input",{id:`item-input-${r.id}`,className:"toggle",type:"checkbox",checked:r.completed,onChange:()=>i(r.id)}),Q.jsx("label",{htmlFor:`item-input-${r.id}`,onDoubleClick:()=>n(!0),children:r.text}),Q.jsx("button",{type:"button","aria-label":"Delete",className:"destroy",onClick:()=>o(r.id)})]})})}const ak={SHOW_ALL:"All",SHOW_ACTIVE:"Active",SHOW_COMPLETED:"Completed"};function lk(t){const{activeCount:e,completedCount:n,filter:r,onClearCompleted:i,onShow:s}=t;return Q.jsxs("footer",{className:"footer",children:[Q.jsxs("span",{className:"todo-count",children:[Q.jsx("strong",{children:e||"No"}),"",e===1?"item":"items"," left"]}),Q.jsx("ul",{className:"filters",children:["SHOW_ALL","SHOW_ACTIVE","SHOW_COMPLETED"].map(o=>Q.jsx("li",{children:Q.jsx("button",{type:"button",className:td({selected:o===r}),style:{cursor:"pointer"},onClick:()=>s(o),children:ak[o]})},o))}),!!n&&Q.jsx("button",{type:"button",className:"clear-completed",onClick:i,children:"Clear completed"})]})}const uk={SHOW_ALL:t=>!0,SHOW_ACTIVE:t=>!t.completed,SHOW_COMPLETED:t=>t.completed};function ck(t){const[e,n]=br.useState("SHOW_ALL"),{todos:r,actions:i}=t,s=r.filter(uk[e]),o=r.reduce((l,c)=>c.completed?l+1:l,0),a=r.length-o;return r.length===0?null:Q.jsxs("section",{className:"main",children:[Q.jsx("input",{className:"toggle-all",type:"checkbox",defaultChecked:o===r.length,onChange:i.completeAll}),Q.jsx("ul",{className:"todo-list",children:s.map(l=>Q.jsx(ok,{todo:l,editTodo:i.editTodo,deleteTodo:i.deleteTodo,completeTodo:i.completeTodo},l.id))}),Q.jsx(lk,{completedCount:o,activeCount:a,filter:e,onClearCompleted:()=>i.clearCompleted(),onShow:n})]})}const fk=[{id:0,text:"Yorkie JS SDK",completed:!1},{id:1,text:"Garbage collection",completed:!1},{id:2,text:"RichText datatype",completed:!1}];function dk(){const[t]=br.useState(()=>new ng.Document(`react-todomvc-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`)),[e,n]=br.useState([]),r={addTodo:i=>{t==null||t.update(s=>{s.todos.push({id:s.todos.reduce((o,a)=>Math.max(a.id,o),-1)+1,completed:!1,text:i})})},deleteTodo:i=>{t==null||t.update(s=>{let o;for(const a of s.todos)if(a.id===i){o=a;break}o&&s.todos.deleteByID(o.getID())})},editTodo:(i,s)=>{t==null||t.update(o=>{let a;for(const l of o.todos)if(l.id===i){a=l;break}a&&(a.text=s)})},completeTodo:i=>{t==null||t.update(s=>{let o;for(const a of s.todos)if(a.id===i){o=a;break}o&&(o.completed=!o.completed)})},clearCompleted:()=>{t==null||t.update(i=>{for(const s of i.todos)if(s.completed){const o=s;i.todos.deleteByID(o.getID())}},"")}};return br.useEffect(()=>{const i=new ng.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"});async function s(o,a){await i.activate(),await i.attach(o),o.update(l=>{l.todos||(l.todos=fk)},"create default todos if not exists"),o.subscribe(l=>{a(o.getRoot().todos)}),a(o.getRoot().todos)}s(t,o=>{n(o)})},[]),Q.jsxs("div",{className:"App",children:[Q.jsx(sk,{addTodo:r.addTodo}),Q.jsx(ck,{todos:e,actions:r})]})}Tu.createRoot(document.getElementById("root")).render(Q.jsx(dk,{}));
