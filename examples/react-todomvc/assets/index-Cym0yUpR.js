var sb=Object.defineProperty;var ob=(n,t,e)=>t in n?sb(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var l=(n,t,e)=>ob(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();function Qy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var _y={exports:{}},lc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lb=Symbol.for("react.transitional.element"),ub=Symbol.for("react.fragment");function Wy(n,t,e){var i=null;if(e!==void 0&&(i=""+e),t.key!==void 0&&(i=""+t.key),"key"in t){e={};for(var r in t)r!=="key"&&(e[r]=t[r])}else e=t;return t=e.ref,{$$typeof:lb,type:n,key:i,ref:t!==void 0?t:null,props:e}}lc.Fragment=ub;lc.jsx=Wy;lc.jsxs=Wy;_y.exports=lc;var W=_y.exports,tp={exports:{}},uc={},ep={exports:{}},np={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(R,$){var j=R.length;R.push($);t:for(;0<j;){var At=j-1>>>1,Ut=R[At];if(0<r(Ut,$))R[At]=$,R[j]=Ut,j=At;else break t}}function e(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var $=R[0],j=R.pop();if(j!==$){R[0]=j;t:for(var At=0,Ut=R.length,ml=Ut>>>1;At<ml;){var yl=2*(At+1)-1,Mc=R[yl],ta=yl+1,pl=R[ta];if(0>r(Mc,j))ta<Ut&&0>r(pl,Mc)?(R[At]=pl,R[ta]=j,At=ta):(R[At]=Mc,R[yl]=j,At=yl);else if(ta<Ut&&0>r(pl,j))R[At]=pl,R[ta]=j,At=ta;else break t}}return $}function r(R,$){var j=R.sortIndex-$.sortIndex;return j!==0?j:R.id-$.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var u=[],c=[],h=1,m=null,d=3,g=!1,T=!1,A=!1,x=!1,p=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;function w(R){for(var $=e(c);$!==null;){if($.callback===null)i(c);else if($.startTime<=R)i(c),$.sortIndex=$.expirationTime,t(u,$);else break;$=e(c)}}function k(R){if(A=!1,w(R),!T)if(e(u)!==null)T=!0,I||(I=!0,fe());else{var $=e(c);$!==null&&zc(k,$.startTime-R)}}var I=!1,C=-1,B=5,P=-1;function J(){return x?!0:!(n.unstable_now()-P<B)}function Ht(){if(x=!1,I){var R=n.unstable_now();P=R;var $=!0;try{t:{T=!1,A&&(A=!1,y(C),C=-1),g=!0;var j=d;try{e:{for(w(R),m=e(u);m!==null&&!(m.expirationTime>R&&J());){var At=m.callback;if(typeof At=="function"){m.callback=null,d=m.priorityLevel;var Ut=At(m.expirationTime<=R);if(R=n.unstable_now(),typeof Ut=="function"){m.callback=Ut,w(R),$=!0;break e}m===e(u)&&i(u),w(R)}else i(u);m=e(u)}if(m!==null)$=!0;else{var ml=e(c);ml!==null&&zc(k,ml.startTime-R),$=!1}}break t}finally{m=null,d=j,g=!1}$=void 0}}finally{$?fe():I=!1}}}var fe;if(typeof v=="function")fe=function(){v(Ht)};else if(typeof MessageChannel<"u"){var Wr=new MessageChannel,ab=Wr.port2;Wr.port1.onmessage=Ht,fe=function(){ab.postMessage(null)}}else fe=function(){p(Ht,0)};function zc(R,$){C=p(function(){R(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(R){R.callback=null},n.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<R?Math.floor(1e3/R):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_next=function(R){switch(d){case 1:case 2:case 3:var $=3;break;default:$=d}var j=d;d=$;try{return R()}finally{d=j}},n.unstable_requestPaint=function(){x=!0},n.unstable_runWithPriority=function(R,$){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var j=d;d=R;try{return $()}finally{d=j}},n.unstable_scheduleCallback=function(R,$,j){var At=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?At+j:At):j=At,R){case 1:var Ut=-1;break;case 2:Ut=250;break;case 5:Ut=1073741823;break;case 4:Ut=1e4;break;default:Ut=5e3}return Ut=j+Ut,R={id:h++,callback:$,priorityLevel:R,startTime:j,expirationTime:Ut,sortIndex:-1},j>At?(R.sortIndex=j,t(c,R),e(u)===null&&R===e(c)&&(A?(y(C),C=-1):A=!0,zc(k,j-At))):(R.sortIndex=Ut,t(u,R),T||g||(T=!0,I||(I=!0,fe()))),R},n.unstable_shouldYield=J,n.unstable_wrapCallback=function(R){var $=d;return function(){var j=d;d=$;try{return R.apply(this,arguments)}finally{d=j}}}})(np);ep.exports=np;var cb=ep.exports,ip={exports:{}},V={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var od=Symbol.for("react.transitional.element"),fb=Symbol.for("react.portal"),hb=Symbol.for("react.fragment"),db=Symbol.for("react.strict_mode"),gb=Symbol.for("react.profiler"),mb=Symbol.for("react.consumer"),yb=Symbol.for("react.context"),pb=Symbol.for("react.forward_ref"),vb=Symbol.for("react.suspense"),Sb=Symbol.for("react.memo"),rp=Symbol.for("react.lazy"),Og=Symbol.iterator;function bb(n){return n===null||typeof n!="object"?null:(n=Og&&n[Og]||n["@@iterator"],typeof n=="function"?n:null)}var ap={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sp=Object.assign,op={};function Bs(n,t,e){this.props=n,this.context=t,this.refs=op,this.updater=e||ap}Bs.prototype.isReactComponent={};Bs.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};Bs.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function lp(){}lp.prototype=Bs.prototype;function ld(n,t,e){this.props=n,this.context=t,this.refs=op,this.updater=e||ap}var ud=ld.prototype=new lp;ud.constructor=ld;sp(ud,Bs.prototype);ud.isPureReactComponent=!0;var kg=Array.isArray,mt={H:null,A:null,T:null,S:null,V:null},up=Object.prototype.hasOwnProperty;function cd(n,t,e,i,r,a){return e=a.ref,{$$typeof:od,type:n,key:t,ref:e!==void 0?e:null,props:a}}function Tb(n,t){return cd(n.type,t,void 0,void 0,void 0,n.props)}function fd(n){return typeof n=="object"&&n!==null&&n.$$typeof===od}function wb(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var Cg=/\/+/g;function Uc(n,t){return typeof n=="object"&&n!==null&&n.key!=null?wb(""+n.key):t.toString(36)}function Ig(){}function Ab(n){switch(n.status){case"fulfilled":return n.value;case"rejected":throw n.reason;default:switch(typeof n.status=="string"?n.then(Ig,Ig):(n.status="pending",n.then(function(t){n.status==="pending"&&(n.status="fulfilled",n.value=t)},function(t){n.status==="pending"&&(n.status="rejected",n.reason=t)})),n.status){case"fulfilled":return n.value;case"rejected":throw n.reason}}throw n}function Ua(n,t,e,i,r){var a=typeof n;(a==="undefined"||a==="boolean")&&(n=null);var s=!1;if(n===null)s=!0;else switch(a){case"bigint":case"string":case"number":s=!0;break;case"object":switch(n.$$typeof){case od:case fb:s=!0;break;case rp:return s=n._init,Ua(s(n._payload),t,e,i,r)}}if(s)return r=r(n),s=i===""?"."+Uc(n,0):i,kg(r)?(e="",s!=null&&(e=s.replace(Cg,"$&/")+"/"),Ua(r,t,e,"",function(c){return c})):r!=null&&(fd(r)&&(r=Tb(r,e+(r.key==null||n&&n.key===r.key?"":(""+r.key).replace(Cg,"$&/")+"/")+s)),t.push(r)),1;s=0;var o=i===""?".":i+":";if(kg(n))for(var u=0;u<n.length;u++)i=n[u],a=o+Uc(i,u),s+=Ua(i,t,e,a,r);else if(u=bb(n),typeof u=="function")for(n=u.call(n),u=0;!(i=n.next()).done;)i=i.value,a=o+Uc(i,u++),s+=Ua(i,t,e,a,r);else if(a==="object"){if(typeof n.then=="function")return Ua(Ab(n),t,e,i,r);throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return s}function vl(n,t,e){if(n==null)return n;var i=[],r=0;return Ua(n,i,"","",function(a){return t.call(e,a,r++)}),i}function Eb(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var Bg=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Nb(){}V.Children={map:vl,forEach:function(n,t,e){vl(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return vl(n,function(){t++}),t},toArray:function(n){return vl(n,function(t){return t})||[]},only:function(n){if(!fd(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};V.Component=Bs;V.Fragment=hb;V.Profiler=gb;V.PureComponent=ld;V.StrictMode=db;V.Suspense=vb;V.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=mt;V.__COMPILER_RUNTIME={__proto__:null,c:function(n){return mt.H.useMemoCache(n)}};V.cache=function(n){return function(){return n.apply(null,arguments)}};V.cloneElement=function(n,t,e){if(n==null)throw Error("The argument must be a React element, but you passed "+n+".");var i=sp({},n.props),r=n.key,a=void 0;if(t!=null)for(s in t.ref!==void 0&&(a=void 0),t.key!==void 0&&(r=""+t.key),t)!up.call(t,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&t.ref===void 0||(i[s]=t[s]);var s=arguments.length-2;if(s===1)i.children=e;else if(1<s){for(var o=Array(s),u=0;u<s;u++)o[u]=arguments[u+2];i.children=o}return cd(n.type,r,void 0,void 0,a,i)};V.createContext=function(n){return n={$$typeof:yb,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null},n.Provider=n,n.Consumer={$$typeof:mb,_context:n},n};V.createElement=function(n,t,e){var i,r={},a=null;if(t!=null)for(i in t.key!==void 0&&(a=""+t.key),t)up.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var s=arguments.length-2;if(s===1)r.children=e;else if(1<s){for(var o=Array(s),u=0;u<s;u++)o[u]=arguments[u+2];r.children=o}if(n&&n.defaultProps)for(i in s=n.defaultProps,s)r[i]===void 0&&(r[i]=s[i]);return cd(n,a,void 0,void 0,null,r)};V.createRef=function(){return{current:null}};V.forwardRef=function(n){return{$$typeof:pb,render:n}};V.isValidElement=fd;V.lazy=function(n){return{$$typeof:rp,_payload:{_status:-1,_result:n},_init:Eb}};V.memo=function(n,t){return{$$typeof:Sb,type:n,compare:t===void 0?null:t}};V.startTransition=function(n){var t=mt.T,e={};mt.T=e;try{var i=n(),r=mt.S;r!==null&&r(e,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Nb,Bg)}catch(a){Bg(a)}finally{mt.T=t}};V.unstable_useCacheRefresh=function(){return mt.H.useCacheRefresh()};V.use=function(n){return mt.H.use(n)};V.useActionState=function(n,t,e){return mt.H.useActionState(n,t,e)};V.useCallback=function(n,t){return mt.H.useCallback(n,t)};V.useContext=function(n){return mt.H.useContext(n)};V.useDebugValue=function(){};V.useDeferredValue=function(n,t){return mt.H.useDeferredValue(n,t)};V.useEffect=function(n,t,e){var i=mt.H;if(typeof e=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(n,t)};V.useId=function(){return mt.H.useId()};V.useImperativeHandle=function(n,t,e){return mt.H.useImperativeHandle(n,t,e)};V.useInsertionEffect=function(n,t){return mt.H.useInsertionEffect(n,t)};V.useLayoutEffect=function(n,t){return mt.H.useLayoutEffect(n,t)};V.useMemo=function(n,t){return mt.H.useMemo(n,t)};V.useOptimistic=function(n,t){return mt.H.useOptimistic(n,t)};V.useReducer=function(n,t,e){return mt.H.useReducer(n,t,e)};V.useRef=function(n){return mt.H.useRef(n)};V.useState=function(n){return mt.H.useState(n)};V.useSyncExternalStore=function(n,t,e){return mt.H.useSyncExternalStore(n,t,e)};V.useTransition=function(){return mt.H.useTransition()};V.version="19.1.0";ip.exports=V;var ct=ip.exports,cp={exports:{}},ee={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xb=ct;function fp(n){var t="https://react.dev/errors/"+n;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var e=2;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e])}return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Sr(){}var te={d:{f:Sr,r:function(){throw Error(fp(522))},D:Sr,C:Sr,L:Sr,m:Sr,X:Sr,S:Sr,M:Sr},p:0,findDOMNode:null},Db=Symbol.for("react.portal");function Ob(n,t,e){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Db,key:i==null?null:""+i,children:n,containerInfo:t,implementation:e}}var no=xb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function cc(n,t){if(n==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}ee.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te;ee.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(fp(299));return Ob(n,t,null,e)};ee.flushSync=function(n){var t=no.T,e=te.p;try{if(no.T=null,te.p=2,n)return n()}finally{no.T=t,te.p=e,te.d.f()}};ee.preconnect=function(n,t){typeof n=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,te.d.C(n,t))};ee.prefetchDNS=function(n){typeof n=="string"&&te.d.D(n)};ee.preinit=function(n,t){if(typeof n=="string"&&t&&typeof t.as=="string"){var e=t.as,i=cc(e,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,a=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;e==="style"?te.d.S(n,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:a}):e==="script"&&te.d.X(n,{crossOrigin:i,integrity:r,fetchPriority:a,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};ee.preinitModule=function(n,t){if(typeof n=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var e=cc(t.as,t.crossOrigin);te.d.M(n,{crossOrigin:e,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&te.d.M(n)};ee.preload=function(n,t){if(typeof n=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var e=t.as,i=cc(e,t.crossOrigin);te.d.L(n,e,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};ee.preloadModule=function(n,t){if(typeof n=="string")if(t){var e=cc(t.as,t.crossOrigin);te.d.m(n,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:e,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else te.d.m(n)};ee.requestFormReset=function(n){te.d.r(n)};ee.unstable_batchedUpdates=function(n,t){return n(t)};ee.useFormState=function(n,t,e){return no.H.useFormState(n,t,e)};ee.useFormStatus=function(){return no.H.useHostTransitionStatus()};ee.version="19.1.0";function hp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hp)}catch(n){console.error(n)}}hp(),cp.exports=ee;var kb=cp.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mt=cb,dp=ct,Cb=kb;function N(n){var t="https://react.dev/errors/"+n;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var e=2;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e])}return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function gp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Fo(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function mp(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function Rg(n){if(Fo(n)!==n)throw Error(N(188))}function Ib(n){var t=n.alternate;if(!t){if(t=Fo(n),t===null)throw Error(N(188));return t!==n?null:n}for(var e=n,i=t;;){var r=e.return;if(r===null)break;var a=r.alternate;if(a===null){if(i=r.return,i!==null){e=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===e)return Rg(r),n;if(a===i)return Rg(r),t;a=a.sibling}throw Error(N(188))}if(e.return!==i.return)e=r,i=a;else{for(var s=!1,o=r.child;o;){if(o===e){s=!0,e=r,i=a;break}if(o===i){s=!0,i=r,e=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===e){s=!0,e=a,i=r;break}if(o===i){s=!0,i=a,e=r;break}o=o.sibling}if(!s)throw Error(N(189))}}if(e.alternate!==i)throw Error(N(190))}if(e.tag!==3)throw Error(N(188));return e.stateNode.current===e?n:t}function yp(n){var t=n.tag;if(t===5||t===26||t===27||t===6)return n;for(n=n.child;n!==null;){if(t=yp(n),t!==null)return t;n=n.sibling}return null}var ht=Object.assign,Bb=Symbol.for("react.element"),Sl=Symbol.for("react.transitional.element"),Fs=Symbol.for("react.portal"),Va=Symbol.for("react.fragment"),pp=Symbol.for("react.strict_mode"),Nf=Symbol.for("react.profiler"),Rb=Symbol.for("react.provider"),vp=Symbol.for("react.consumer"),Wi=Symbol.for("react.context"),hd=Symbol.for("react.forward_ref"),xf=Symbol.for("react.suspense"),Df=Symbol.for("react.suspense_list"),dd=Symbol.for("react.memo"),Er=Symbol.for("react.lazy"),Of=Symbol.for("react.activity"),zb=Symbol.for("react.memo_cache_sentinel"),zg=Symbol.iterator;function qs(n){return n===null||typeof n!="object"?null:(n=zg&&n[zg]||n["@@iterator"],typeof n=="function"?n:null)}var Mb=Symbol.for("react.client.reference");function kf(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Mb?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Va:return"Fragment";case Nf:return"Profiler";case pp:return"StrictMode";case xf:return"Suspense";case Df:return"SuspenseList";case Of:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case Fs:return"Portal";case Wi:return(n.displayName||"Context")+".Provider";case vp:return(n._context.displayName||"Context")+".Consumer";case hd:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case dd:return t=n.displayName||null,t!==null?t:kf(n.type)||"Memo";case Er:t=n._payload,n=n._init;try{return kf(n(t))}catch{}}return null}var Zs=Array.isArray,q=dp.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et=Cb.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ca={pending:!1,data:null,method:null,action:null},Cf=[],Ka=-1;function kn(n){return{current:n}}function Pt(n){0>Ka||(n.current=Cf[Ka],Cf[Ka]=null,Ka--)}function yt(n,t){Ka++,Cf[Ka]=n.current,n.current=t}var bn=kn(null),No=kn(null),Mr=kn(null),au=kn(null);function su(n,t){switch(yt(Mr,t),yt(No,n),yt(bn,null),t.nodeType){case 9:case 11:n=(n=t.documentElement)&&(n=n.namespaceURI)?qm(n):0;break;default:if(n=t.tagName,t=t.namespaceURI)t=qm(t),n=M0(t,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Pt(bn),yt(bn,n)}function fs(){Pt(bn),Pt(No),Pt(Mr)}function If(n){n.memoizedState!==null&&yt(au,n);var t=bn.current,e=M0(t,n.type);t!==e&&(yt(No,n),yt(bn,e))}function ou(n){No.current===n&&(Pt(bn),Pt(No)),au.current===n&&(Pt(au),Mo._currentValue=ca)}var Bf=Object.prototype.hasOwnProperty,gd=Mt.unstable_scheduleCallback,Lc=Mt.unstable_cancelCallback,Ub=Mt.unstable_shouldYield,Lb=Mt.unstable_requestPaint,Tn=Mt.unstable_now,Jb=Mt.unstable_getCurrentPriorityLevel,Sp=Mt.unstable_ImmediatePriority,bp=Mt.unstable_UserBlockingPriority,lu=Mt.unstable_NormalPriority,qb=Mt.unstable_LowPriority,Tp=Mt.unstable_IdlePriority,Pb=Mt.log,Hb=Mt.unstable_setDisableYieldValue,Zo=null,ve=null;function Cr(n){if(typeof Pb=="function"&&Hb(n),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(Zo,n)}catch{}}var Se=Math.clz32?Math.clz32:jb,Vb=Math.log,Kb=Math.LN2;function jb(n){return n>>>=0,n===0?32:31-(Vb(n)/Kb|0)|0}var bl=256,Tl=4194304;function na(n){var t=n&42;if(t!==0)return t;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function fc(n,t,e){var i=n.pendingLanes;if(i===0)return 0;var r=0,a=n.suspendedLanes,s=n.pingedLanes;n=n.warmLanes;var o=i&134217727;return o!==0?(i=o&~a,i!==0?r=na(i):(s&=o,s!==0?r=na(s):e||(e=o&~n,e!==0&&(r=na(e))))):(o=i&~a,o!==0?r=na(o):s!==0?r=na(s):e||(e=i&~n,e!==0&&(r=na(e)))),r===0?0:t!==0&&t!==r&&!(t&a)&&(a=r&-r,e=t&-t,a>=e||a===32&&(e&4194048)!==0)?t:r}function Qo(n,t){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&t)===0}function $b(n,t){switch(n){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wp(){var n=bl;return bl<<=1,!(bl&4194048)&&(bl=256),n}function Ap(){var n=Tl;return Tl<<=1,!(Tl&62914560)&&(Tl=4194304),n}function Jc(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function _o(n,t){n.pendingLanes|=t,t!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Gb(n,t,e,i,r,a){var s=n.pendingLanes;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=e,n.entangledLanes&=e,n.errorRecoveryDisabledLanes&=e,n.shellSuspendCounter=0;var o=n.entanglements,u=n.expirationTimes,c=n.hiddenUpdates;for(e=s&~e;0<e;){var h=31-Se(e),m=1<<h;o[h]=0,u[h]=-1;var d=c[h];if(d!==null)for(c[h]=null,h=0;h<d.length;h++){var g=d[h];g!==null&&(g.lane&=-536870913)}e&=~m}i!==0&&Ep(n,i,0),a!==0&&r===0&&n.tag!==0&&(n.suspendedLanes|=a&~(s&~t))}function Ep(n,t,e){n.pendingLanes|=t,n.suspendedLanes&=~t;var i=31-Se(t);n.entangledLanes|=t,n.entanglements[i]=n.entanglements[i]|1073741824|e&4194090}function Np(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var i=31-Se(e),r=1<<i;r&t|n[i]&t&&(n[i]|=t),e&=~r}}function md(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function yd(n){return n&=-n,2<n?8<n?n&134217727?32:268435456:8:2}function xp(){var n=et.p;return n!==0?n:(n=window.event,n===void 0?32:$0(n.type))}function Yb(n,t){var e=et.p;try{return et.p=n,t()}finally{et.p=e}}var Zr=Math.random().toString(36).slice(2),Xt="__reactFiber$"+Zr,le="__reactProps$"+Zr,Rs="__reactContainer$"+Zr,Rf="__reactEvents$"+Zr,Xb="__reactListeners$"+Zr,Fb="__reactHandles$"+Zr,Mg="__reactResources$"+Zr,Wo="__reactMarker$"+Zr;function pd(n){delete n[Xt],delete n[le],delete n[Rf],delete n[Xb],delete n[Fb]}function ja(n){var t=n[Xt];if(t)return t;for(var e=n.parentNode;e;){if(t=e[Rs]||e[Xt]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=Vm(n);n!==null;){if(e=n[Xt])return e;n=Vm(n)}return t}n=e,e=n.parentNode}return null}function zs(n){if(n=n[Xt]||n[Rs]){var t=n.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return n}return null}function Qs(n){var t=n.tag;if(t===5||t===26||t===27||t===6)return n.stateNode;throw Error(N(33))}function es(n){var t=n[Mg];return t||(t=n[Mg]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Jt(n){n[Wo]=!0}var Dp=new Set,Op={};function xa(n,t){hs(n,t),hs(n+"Capture",t)}function hs(n,t){for(Op[n]=t,n=0;n<t.length;n++)Dp.add(t[n])}var Zb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ug={},Lg={};function Qb(n){return Bf.call(Lg,n)?!0:Bf.call(Ug,n)?!1:Zb.test(n)?Lg[n]=!0:(Ug[n]=!0,!1)}function Pl(n,t,e){if(Qb(t))if(e===null)n.removeAttribute(t);else{switch(typeof e){case"undefined":case"function":case"symbol":n.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){n.removeAttribute(t);return}}n.setAttribute(t,""+e)}}function wl(n,t,e){if(e===null)n.removeAttribute(t);else{switch(typeof e){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(t);return}n.setAttribute(t,""+e)}}function In(n,t,e,i){if(i===null)n.removeAttribute(e);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(e);return}n.setAttributeNS(t,e,""+i)}}var qc,Jg;function La(n){if(qc===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);qc=t&&t[1]||"",Jg=-1<e.stack.indexOf(`
    at`)?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qc+n+Jg}var Pc=!1;function Hc(n,t){if(!n||Pc)return"";Pc=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(g){var d=g}Reflect.construct(n,[],m)}else{try{m.call()}catch(g){d=g}n.call(m.prototype)}}else{try{throw Error()}catch(g){d=g}(m=n())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(g){if(g&&d&&typeof g.stack=="string")return[g.stack,d.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=i.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var u=s.split(`
`),c=o.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===c.length)for(i=u.length-1,r=c.length-1;1<=i&&0<=r&&u[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==c[r]){var h=`
`+u[i].replace(" at new "," at ");return n.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",n.displayName)),h}while(1<=i&&0<=r);break}}}finally{Pc=!1,Error.prepareStackTrace=e}return(e=n?n.displayName||n.name:"")?La(e):""}function _b(n){switch(n.tag){case 26:case 27:case 5:return La(n.type);case 16:return La("Lazy");case 13:return La("Suspense");case 19:return La("SuspenseList");case 0:case 15:return Hc(n.type,!1);case 11:return Hc(n.type.render,!1);case 1:return Hc(n.type,!0);case 31:return La("Activity");default:return""}}function qg(n){try{var t="";do t+=_b(n),n=n.return;while(n);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}function xe(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function kp(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Wb(n){var t=kp(n)?"checked":"value",e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),i=""+n[t];if(!n.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var r=e.get,a=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return r.call(this)},set:function(s){i=""+s,a.call(this,s)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function uu(n){n._valueTracker||(n._valueTracker=Wb(n))}function Cp(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),i="";return n&&(i=kp(n)?n.checked?"true":"false":n.value),n=i,n!==e?(t.setValue(n),!0):!1}function cu(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var tT=/[\n"\\]/g;function qe(n){return n.replace(tT,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function zf(n,t,e,i,r,a,s,o){n.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?n.type=s:n.removeAttribute("type"),t!=null?s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+xe(t)):n.value!==""+xe(t)&&(n.value=""+xe(t)):s!=="submit"&&s!=="reset"||n.removeAttribute("value"),t!=null?Mf(n,s,xe(t)):e!=null?Mf(n,s,xe(e)):i!=null&&n.removeAttribute("value"),r==null&&a!=null&&(n.defaultChecked=!!a),r!=null&&(n.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?n.name=""+xe(o):n.removeAttribute("name")}function Ip(n,t,e,i,r,a,s,o){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(n.type=a),t!=null||e!=null){if(!(a!=="submit"&&a!=="reset"||t!=null))return;e=e!=null?""+xe(e):"",t=t!=null?""+xe(t):e,o||t===n.value||(n.value=t),n.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,n.checked=o?n.checked:!!i,n.defaultChecked=!!i,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(n.name=s)}function Mf(n,t,e){t==="number"&&cu(n.ownerDocument)===n||n.defaultValue===""+e||(n.defaultValue=""+e)}function ns(n,t,e,i){if(n=n.options,t){t={};for(var r=0;r<e.length;r++)t["$"+e[r]]=!0;for(e=0;e<n.length;e++)r=t.hasOwnProperty("$"+n[e].value),n[e].selected!==r&&(n[e].selected=r),r&&i&&(n[e].defaultSelected=!0)}else{for(e=""+xe(e),t=null,r=0;r<n.length;r++){if(n[r].value===e){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}t!==null||n[r].disabled||(t=n[r])}t!==null&&(t.selected=!0)}}function Bp(n,t,e){if(t!=null&&(t=""+xe(t),t!==n.value&&(n.value=t),e==null)){n.defaultValue!==t&&(n.defaultValue=t);return}n.defaultValue=e!=null?""+xe(e):""}function Rp(n,t,e,i){if(t==null){if(i!=null){if(e!=null)throw Error(N(92));if(Zs(i)){if(1<i.length)throw Error(N(93));i=i[0]}e=i}e==null&&(e=""),t=e}e=xe(t),n.defaultValue=e,i=n.textContent,i===e&&i!==""&&i!==null&&(n.value=i)}function ds(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var eT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pg(n,t,e){var i=t.indexOf("--")===0;e==null||typeof e=="boolean"||e===""?i?n.setProperty(t,""):t==="float"?n.cssFloat="":n[t]="":i?n.setProperty(t,e):typeof e!="number"||e===0||eT.has(t)?t==="float"?n.cssFloat=e:n[t]=(""+e).trim():n[t]=e+"px"}function zp(n,t,e){if(t!=null&&typeof t!="object")throw Error(N(62));if(n=n.style,e!=null){for(var i in e)!e.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&e[r]!==i&&Pg(n,r,i)}else for(var a in t)t.hasOwnProperty(a)&&Pg(n,a,t[a])}function vd(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),iT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hl(n){return iT.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Uf=null;function Sd(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var $a=null,is=null;function Hg(n){var t=zs(n);if(t&&(n=t.stateNode)){var e=n[le]||null;t:switch(n=t.stateNode,t.type){case"input":if(zf(n,e.value,e.defaultValue,e.defaultValue,e.checked,e.defaultChecked,e.type,e.name),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll('input[name="'+qe(""+t)+'"][type="radio"]'),t=0;t<e.length;t++){var i=e[t];if(i!==n&&i.form===n.form){var r=i[le]||null;if(!r)throw Error(N(90));zf(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<e.length;t++)i=e[t],i.form===n.form&&Cp(i)}break t;case"textarea":Bp(n,e.value,e.defaultValue);break t;case"select":t=e.value,t!=null&&ns(n,!!e.multiple,t,!1)}}}var Vc=!1;function Mp(n,t,e){if(Vc)return n(t,e);Vc=!0;try{var i=n(t);return i}finally{if(Vc=!1,($a!==null||is!==null)&&(Tc(),$a&&(t=$a,n=is,is=$a=null,Hg(t),n)))for(t=0;t<n.length;t++)Hg(n[t])}}function xo(n,t){var e=n.stateNode;if(e===null)return null;var i=e[le]||null;if(i===null)return null;e=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(N(231,t,typeof e));return e}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lf=!1;if(fr)try{var Ps={};Object.defineProperty(Ps,"passive",{get:function(){Lf=!0}}),window.addEventListener("test",Ps,Ps),window.removeEventListener("test",Ps,Ps)}catch{Lf=!1}var Ir=null,bd=null,Vl=null;function Up(){if(Vl)return Vl;var n,t=bd,e=t.length,i,r="value"in Ir?Ir.value:Ir.textContent,a=r.length;for(n=0;n<e&&t[n]===r[n];n++);var s=e-n;for(i=1;i<=s&&t[e-i]===r[a-i];i++);return Vl=r.slice(n,1<i?1-i:void 0)}function Kl(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function Al(){return!0}function Vg(){return!1}function ce(n){function t(e,i,r,a,s){this._reactName=e,this._targetInst=r,this.type=i,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(e=n[o],this[o]=e?e(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Al:Vg,this.isPropagationStopped=Vg,this}return ht(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=Al)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=Al)},persist:function(){},isPersistent:Al}),t}var Da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hc=ce(Da),tl=ht({},Da,{view:0,detail:0}),rT=ce(tl),Kc,jc,Hs,dc=ht({},tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Td,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Hs&&(Hs&&n.type==="mousemove"?(Kc=n.screenX-Hs.screenX,jc=n.screenY-Hs.screenY):jc=Kc=0,Hs=n),Kc)},movementY:function(n){return"movementY"in n?n.movementY:jc}}),Kg=ce(dc),aT=ht({},dc,{dataTransfer:0}),sT=ce(aT),oT=ht({},tl,{relatedTarget:0}),$c=ce(oT),lT=ht({},Da,{animationName:0,elapsedTime:0,pseudoElement:0}),uT=ce(lT),cT=ht({},Da,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),fT=ce(cT),hT=ht({},Da,{data:0}),jg=ce(hT),dT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yT(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=mT[n])?!!t[n]:!1}function Td(){return yT}var pT=ht({},tl,{key:function(n){if(n.key){var t=dT[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=Kl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?gT[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Td,charCode:function(n){return n.type==="keypress"?Kl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Kl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),vT=ce(pT),ST=ht({},dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$g=ce(ST),bT=ht({},tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Td}),TT=ce(bT),wT=ht({},Da,{propertyName:0,elapsedTime:0,pseudoElement:0}),AT=ce(wT),ET=ht({},dc,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),NT=ce(ET),xT=ht({},Da,{newState:0,oldState:0}),DT=ce(xT),OT=[9,13,27,32],wd=fr&&"CompositionEvent"in window,io=null;fr&&"documentMode"in document&&(io=document.documentMode);var kT=fr&&"TextEvent"in window&&!io,Lp=fr&&(!wd||io&&8<io&&11>=io),Gg=" ",Yg=!1;function Jp(n,t){switch(n){case"keyup":return OT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ga=!1;function CT(n,t){switch(n){case"compositionend":return qp(t);case"keypress":return t.which!==32?null:(Yg=!0,Gg);case"textInput":return n=t.data,n===Gg&&Yg?null:n;default:return null}}function IT(n,t){if(Ga)return n==="compositionend"||!wd&&Jp(n,t)?(n=Up(),Vl=bd=Ir=null,Ga=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lp&&t.locale!=="ko"?null:t.data;default:return null}}var BT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xg(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!BT[n.type]:t==="textarea"}function Pp(n,t,e,i){$a?is?is.push(i):is=[i]:$a=i,t=Ou(t,"onChange"),0<t.length&&(e=new hc("onChange","change",null,e,i),n.push({event:e,listeners:t}))}var ro=null,Do=null;function RT(n){B0(n,0)}function gc(n){var t=Qs(n);if(Cp(t))return n}function Fg(n,t){if(n==="change")return t}var Hp=!1;if(fr){var Gc;if(fr){var Yc="oninput"in document;if(!Yc){var Zg=document.createElement("div");Zg.setAttribute("oninput","return;"),Yc=typeof Zg.oninput=="function"}Gc=Yc}else Gc=!1;Hp=Gc&&(!document.documentMode||9<document.documentMode)}function Qg(){ro&&(ro.detachEvent("onpropertychange",Vp),Do=ro=null)}function Vp(n){if(n.propertyName==="value"&&gc(Do)){var t=[];Pp(t,Do,n,Sd(n)),Mp(RT,t)}}function zT(n,t,e){n==="focusin"?(Qg(),ro=t,Do=e,ro.attachEvent("onpropertychange",Vp)):n==="focusout"&&Qg()}function MT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return gc(Do)}function UT(n,t){if(n==="click")return gc(t)}function LT(n,t){if(n==="input"||n==="change")return gc(t)}function JT(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var we=typeof Object.is=="function"?Object.is:JT;function Oo(n,t){if(we(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(i=0;i<e.length;i++){var r=e[i];if(!Bf.call(t,r)||!we(n[r],t[r]))return!1}return!0}function _g(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Wg(n,t){var e=_g(n);n=0;for(var i;e;){if(e.nodeType===3){if(i=n+e.textContent.length,n<=t&&i>=t)return{node:e,offset:t-n};n=i}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=_g(e)}}function Kp(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?Kp(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function jp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var t=cu(n.document);t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=cu(n.document)}return t}function Ad(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}var qT=fr&&"documentMode"in document&&11>=document.documentMode,Ya=null,Jf=null,ao=null,qf=!1;function tm(n,t,e){var i=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;qf||Ya==null||Ya!==cu(i)||(i=Ya,"selectionStart"in i&&Ad(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ao&&Oo(ao,i)||(ao=i,i=Ou(Jf,"onSelect"),0<i.length&&(t=new hc("onSelect","select",null,t,e),n.push({event:t,listeners:i}),t.target=Ya)))}function ea(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var Xa={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionrun:ea("Transition","TransitionRun"),transitionstart:ea("Transition","TransitionStart"),transitioncancel:ea("Transition","TransitionCancel"),transitionend:ea("Transition","TransitionEnd")},Xc={},$p={};fr&&($p=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function Oa(n){if(Xc[n])return Xc[n];if(!Xa[n])return n;var t=Xa[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in $p)return Xc[n]=t[e];return n}var Gp=Oa("animationend"),Yp=Oa("animationiteration"),Xp=Oa("animationstart"),PT=Oa("transitionrun"),HT=Oa("transitionstart"),VT=Oa("transitioncancel"),Fp=Oa("transitionend"),Zp=new Map,Pf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pf.push("scrollEnd");function on(n,t){Zp.set(n,t),xa(t,[n])}var em=new WeakMap;function Pe(n,t){if(typeof n=="object"&&n!==null){var e=em.get(n);return e!==void 0?e:(t={value:n,source:t,stack:qg(t)},em.set(n,t),t)}return{value:n,source:t,stack:qg(t)}}var Ne=[],Fa=0,Ed=0;function mc(){for(var n=Fa,t=Ed=Fa=0;t<n;){var e=Ne[t];Ne[t++]=null;var i=Ne[t];Ne[t++]=null;var r=Ne[t];Ne[t++]=null;var a=Ne[t];if(Ne[t++]=null,i!==null&&r!==null){var s=i.pending;s===null?r.next=r:(r.next=s.next,s.next=r),i.pending=r}a!==0&&Qp(e,r,a)}}function yc(n,t,e,i){Ne[Fa++]=n,Ne[Fa++]=t,Ne[Fa++]=e,Ne[Fa++]=i,Ed|=i,n.lanes|=i,n=n.alternate,n!==null&&(n.lanes|=i)}function Nd(n,t,e,i){return yc(n,t,e,i),fu(n)}function Ms(n,t){return yc(n,null,null,t),fu(n)}function Qp(n,t,e){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e);for(var r=!1,a=n.return;a!==null;)a.childLanes|=e,i=a.alternate,i!==null&&(i.childLanes|=e),a.tag===22&&(n=a.stateNode,n===null||n._visibility&1||(r=!0)),n=a,a=a.return;return n.tag===3?(a=n.stateNode,r&&t!==null&&(r=31-Se(e),n=a.hiddenUpdates,i=n[r],i===null?n[r]=[t]:i.push(t),t.lane=e|536870912),a):null}function fu(n){if(50<yo)throw yo=0,oh=null,Error(N(185));for(var t=n.return;t!==null;)n=t,t=n.return;return n.tag===3?n.stateNode:null}var Za={};function KT(n,t,e,i){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function me(n,t,e,i){return new KT(n,t,e,i)}function xd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function or(n,t){var e=n.alternate;return e===null?(e=me(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&65011712,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e.refCleanup=n.refCleanup,e}function _p(n,t){n.flags&=65011714;var e=n.alternate;return e===null?(n.childLanes=0,n.lanes=t,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.type=e.type,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n}function jl(n,t,e,i,r,a){var s=0;if(i=n,typeof n=="function")xd(n)&&(s=1);else if(typeof n=="string")s=$w(n,e,bn.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case Of:return n=me(31,e,t,r),n.elementType=Of,n.lanes=a,n;case Va:return fa(e.children,r,a,t);case pp:s=8,r|=24;break;case Nf:return n=me(12,e,t,r|2),n.elementType=Nf,n.lanes=a,n;case xf:return n=me(13,e,t,r),n.elementType=xf,n.lanes=a,n;case Df:return n=me(19,e,t,r),n.elementType=Df,n.lanes=a,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Rb:case Wi:s=10;break t;case vp:s=9;break t;case hd:s=11;break t;case dd:s=14;break t;case Er:s=16,i=null;break t}s=29,e=Error(N(130,n===null?"null":typeof n,"")),i=null}return t=me(s,e,t,r),t.elementType=n,t.type=i,t.lanes=a,t}function fa(n,t,e,i){return n=me(7,n,i,t),n.lanes=e,n}function Fc(n,t,e){return n=me(6,n,null,t),n.lanes=e,n}function Zc(n,t,e){return t=me(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}var Qa=[],_a=0,hu=null,du=0,De=[],Oe=0,ha=null,tr=1,er="";function ia(n,t){Qa[_a++]=du,Qa[_a++]=hu,hu=n,du=t}function Wp(n,t,e){De[Oe++]=tr,De[Oe++]=er,De[Oe++]=ha,ha=n;var i=tr;n=er;var r=32-Se(i)-1;i&=~(1<<r),e+=1;var a=32-Se(t)+r;if(30<a){var s=r-r%5;a=(i&(1<<s)-1).toString(32),i>>=s,r-=s,tr=1<<32-Se(t)+r|e<<r|i,er=a+n}else tr=1<<a|e<<r|i,er=n}function Dd(n){n.return!==null&&(ia(n,1),Wp(n,1,0))}function Od(n){for(;n===hu;)hu=Qa[--_a],Qa[_a]=null,du=Qa[--_a],Qa[_a]=null;for(;n===ha;)ha=De[--Oe],De[Oe]=null,er=De[--Oe],De[Oe]=null,tr=De[--Oe],De[Oe]=null}var Wt=null,bt=null,tt=!1,da=null,hn=!1,Hf=Error(N(519));function va(n){var t=Error(N(418,""));throw ko(Pe(t,n)),Hf}function nm(n){var t=n.stateNode,e=n.type,i=n.memoizedProps;switch(t[Xt]=n,t[le]=i,e){case"dialog":G("cancel",t),G("close",t);break;case"iframe":case"object":case"embed":G("load",t);break;case"video":case"audio":for(e=0;e<Bo.length;e++)G(Bo[e],t);break;case"source":G("error",t);break;case"img":case"image":case"link":G("error",t),G("load",t);break;case"details":G("toggle",t);break;case"input":G("invalid",t),Ip(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),uu(t);break;case"select":G("invalid",t);break;case"textarea":G("invalid",t),Rp(t,i.value,i.defaultValue,i.children),uu(t)}e=i.children,typeof e!="string"&&typeof e!="number"&&typeof e!="bigint"||t.textContent===""+e||i.suppressHydrationWarning===!0||z0(t.textContent,e)?(i.popover!=null&&(G("beforetoggle",t),G("toggle",t)),i.onScroll!=null&&G("scroll",t),i.onScrollEnd!=null&&G("scrollend",t),i.onClick!=null&&(t.onclick=Ec),t=!0):t=!1,t||va(n)}function im(n){for(Wt=n.return;Wt;)switch(Wt.tag){case 5:case 13:hn=!1;return;case 27:case 3:hn=!0;return;default:Wt=Wt.return}}function Vs(n){if(n!==Wt)return!1;if(!tt)return im(n),tt=!0,!1;var t=n.tag,e;if((e=t!==3&&t!==27)&&((e=t===5)&&(e=n.type,e=!(e!=="form"&&e!=="button")||dh(n.type,n.memoizedProps)),e=!e),e&&bt&&va(n),im(n),t===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(N(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8)if(e=n.data,e==="/$"){if(t===0){bt=an(n.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++;n=n.nextSibling}bt=null}}else t===27?(t=bt,Qr(n.type)?(n=yh,yh=null,bt=n):bt=t):bt=Wt?an(n.stateNode.nextSibling):null;return!0}function el(){bt=Wt=null,tt=!1}function rm(){var n=da;return n!==null&&(re===null?re=n:re.push.apply(re,n),da=null),n}function ko(n){da===null?da=[n]:da.push(n)}var Vf=kn(null),ka=null,nr=null;function xr(n,t,e){yt(Vf,t._currentValue),t._currentValue=e}function lr(n){n._currentValue=Vf.current,Pt(Vf)}function Kf(n,t,e){for(;n!==null;){var i=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),n===e)break;n=n.return}}function jf(n,t,e,i){var r=n.child;for(r!==null&&(r.return=n);r!==null;){var a=r.dependencies;if(a!==null){var s=r.child;a=a.firstContext;t:for(;a!==null;){var o=a;a=r;for(var u=0;u<t.length;u++)if(o.context===t[u]){a.lanes|=e,o=a.alternate,o!==null&&(o.lanes|=e),Kf(a.return,e,n),i||(s=null);break t}a=o.next}}else if(r.tag===18){if(s=r.return,s===null)throw Error(N(341));s.lanes|=e,a=s.alternate,a!==null&&(a.lanes|=e),Kf(s,e,n),s=null}else s=r.child;if(s!==null)s.return=r;else for(s=r;s!==null;){if(s===n){s=null;break}if(r=s.sibling,r!==null){r.return=s.return,s=r;break}s=s.return}r=s}}function nl(n,t,e,i){n=null;for(var r=t,a=!1;r!==null;){if(!a){if(r.flags&524288)a=!0;else if(r.flags&262144)break}if(r.tag===10){var s=r.alternate;if(s===null)throw Error(N(387));if(s=s.memoizedProps,s!==null){var o=r.type;we(r.pendingProps.value,s.value)||(n!==null?n.push(o):n=[o])}}else if(r===au.current){if(s=r.alternate,s===null)throw Error(N(387));s.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(n!==null?n.push(Mo):n=[Mo])}r=r.return}n!==null&&jf(t,n,e,i),t.flags|=262144}function gu(n){for(n=n.firstContext;n!==null;){if(!we(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Sa(n){ka=n,nr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ft(n){return tv(ka,n)}function El(n,t){return ka===null&&Sa(n),tv(n,t)}function tv(n,t){var e=t._currentValue;if(t={context:t,memoizedValue:e,next:null},nr===null){if(n===null)throw Error(N(308));nr=t,n.dependencies={lanes:0,firstContext:t},n.flags|=524288}else nr=nr.next=t;return e}var jT=typeof AbortController<"u"?AbortController:function(){var n=[],t=this.signal={aborted:!1,addEventListener:function(e,i){n.push(i)}};this.abort=function(){t.aborted=!0,n.forEach(function(e){return e()})}},$T=Mt.unstable_scheduleCallback,GT=Mt.unstable_NormalPriority,Rt={$$typeof:Wi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kd(){return{controller:new jT,data:new Map,refCount:0}}function il(n){n.refCount--,n.refCount===0&&$T(GT,function(){n.controller.abort()})}var so=null,$f=0,gs=0,rs=null;function YT(n,t){if(so===null){var e=so=[];$f=0,gs=_d(),rs={status:"pending",value:void 0,then:function(i){e.push(i)}}}return $f++,t.then(am,am),t}function am(){if(--$f===0&&so!==null){rs!==null&&(rs.status="fulfilled");var n=so;so=null,gs=0,rs=null;for(var t=0;t<n.length;t++)(0,n[t])()}}function XT(n,t){var e=[],i={status:"pending",value:null,reason:null,then:function(r){e.push(r)}};return n.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<e.length;r++)(0,e[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<e.length;r++)(0,e[r])(void 0)}),i}var sm=q.S;q.S=function(n,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&YT(n,t),sm!==null&&sm(n,t)};var ga=kn(null);function Cd(){var n=ga.current;return n!==null?n:ft.pooledCache}function $l(n,t){t===null?yt(ga,ga.current):yt(ga,t.pool)}function ev(){var n=Cd();return n===null?null:{parent:Rt._currentValue,pool:n}}var rl=Error(N(460)),nv=Error(N(474)),pc=Error(N(542)),Gf={then:function(){}};function om(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Nl(){}function iv(n,t,e){switch(e=n[e],e===void 0?n.push(t):e!==t&&(t.then(Nl,Nl),t=e),t.status){case"fulfilled":return t.value;case"rejected":throw n=t.reason,um(n),n;default:if(typeof t.status=="string")t.then(Nl,Nl);else{if(n=ft,n!==null&&100<n.shellSuspendCounter)throw Error(N(482));n=t,n.status="pending",n.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw n=t.reason,um(n),n}throw oo=t,rl}}var oo=null;function lm(){if(oo===null)throw Error(N(459));var n=oo;return oo=null,n}function um(n){if(n===rl||n===pc)throw Error(N(483))}var Nr=!1;function Id(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yf(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ur(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Lr(n,t,e){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,rt&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=fu(n),Qp(n,null,e),t}return yc(n,i,t,e),fu(n)}function lo(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194048)!==0)){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,Np(n,e)}}function Qc(n,t){var e=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,e===i)){var r=null,a=null;if(e=e.firstBaseUpdate,e!==null){do{var s={lane:e.lane,tag:e.tag,payload:e.payload,callback:null,next:null};a===null?r=a=s:a=a.next=s,e=e.next}while(e!==null);a===null?r=a=t:a=a.next=t}else r=a=t;e={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,callbacks:i.callbacks},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}var Xf=!1;function uo(){if(Xf){var n=rs;if(n!==null)throw n}}function co(n,t,e,i){Xf=!1;var r=n.updateQueue;Nr=!1;var a=r.firstBaseUpdate,s=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var u=o,c=u.next;u.next=null,s===null?a=c:s.next=c,s=u;var h=n.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==s&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=u))}if(a!==null){var m=r.baseState;s=0,h=c=u=null,o=a;do{var d=o.lane&-536870913,g=d!==o.lane;if(g?(Q&d)===d:(i&d)===d){d!==0&&d===gs&&(Xf=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});t:{var T=n,A=o;d=t;var x=e;switch(A.tag){case 1:if(T=A.payload,typeof T=="function"){m=T.call(x,m,d);break t}m=T;break t;case 3:T.flags=T.flags&-65537|128;case 0:if(T=A.payload,d=typeof T=="function"?T.call(x,m,d):T,d==null)break t;m=ht({},m,d);break t;case 2:Nr=!0}}d=o.callback,d!==null&&(n.flags|=64,g&&(n.flags|=8192),g=r.callbacks,g===null?r.callbacks=[d]:g.push(d))}else g={lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=g,u=m):h=h.next=g,s|=d;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;g=o,o=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);h===null&&(u=m),r.baseState=u,r.firstBaseUpdate=c,r.lastBaseUpdate=h,a===null&&(r.shared.lanes=0),Xr|=s,n.lanes=s,n.memoizedState=m}}function rv(n,t){if(typeof n!="function")throw Error(N(191,n));n.call(t)}function av(n,t){var e=n.callbacks;if(e!==null)for(n.callbacks=null,n=0;n<e.length;n++)rv(e[n],t)}var ms=kn(null),mu=kn(0);function cm(n,t){n=gr,yt(mu,n),yt(ms,t),gr=n|t.baseLanes}function Ff(){yt(mu,gr),yt(ms,ms.current)}function Bd(){gr=mu.current,Pt(ms),Pt(mu)}var Gr=0,K=null,st=null,kt=null,yu=!1,as=!1,ba=!1,pu=0,Co=0,ss=null,FT=0;function Et(){throw Error(N(321))}function Rd(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!we(n[e],t[e]))return!1;return!0}function zd(n,t,e,i,r,a){return Gr=a,K=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,q.H=n===null||n.memoizedState===null?Uv:Lv,ba=!1,a=e(i,r),ba=!1,as&&(a=ov(t,e,i,r)),sv(n),a}function sv(n){q.H=vu;var t=st!==null&&st.next!==null;if(Gr=0,kt=st=K=null,yu=!1,Co=0,ss=null,t)throw Error(N(300));n===null||qt||(n=n.dependencies,n!==null&&gu(n)&&(qt=!0))}function ov(n,t,e,i){K=n;var r=0;do{if(as&&(ss=null),Co=0,as=!1,25<=r)throw Error(N(301));if(r+=1,kt=st=null,n.updateQueue!=null){var a=n.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}q.H=nw,a=t(e,i)}while(as);return a}function ZT(){var n=q.H,t=n.useState()[0];return t=typeof t.then=="function"?al(t):t,n=n.useState()[0],(st!==null?st.memoizedState:null)!==n&&(K.flags|=1024),t}function Md(){var n=pu!==0;return pu=0,n}function Ud(n,t,e){t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~e}function Ld(n){if(yu){for(n=n.memoizedState;n!==null;){var t=n.queue;t!==null&&(t.pending=null),n=n.next}yu=!1}Gr=0,kt=st=K=null,as=!1,Co=pu=0,ss=null}function ne(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?K.memoizedState=kt=n:kt=kt.next=n,kt}function Ct(){if(st===null){var n=K.alternate;n=n!==null?n.memoizedState:null}else n=st.next;var t=kt===null?K.memoizedState:kt.next;if(t!==null)kt=t,st=n;else{if(n===null)throw K.alternate===null?Error(N(467)):Error(N(310));st=n,n={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},kt===null?K.memoizedState=kt=n:kt=kt.next=n}return kt}function Jd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function al(n){var t=Co;return Co+=1,ss===null&&(ss=[]),n=iv(ss,n,t),t=K,(kt===null?t.memoizedState:kt.next)===null&&(t=t.alternate,q.H=t===null||t.memoizedState===null?Uv:Lv),n}function vc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return al(n);if(n.$$typeof===Wi)return Ft(n)}throw Error(N(438,String(n)))}function qd(n){var t=null,e=K.updateQueue;if(e!==null&&(t=e.memoCache),t==null){var i=K.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),e===null&&(e=Jd(),K.updateQueue=e),e.memoCache=t,e=t.data[t.index],e===void 0)for(e=t.data[t.index]=Array(n),i=0;i<n;i++)e[i]=zb;return t.index++,e}function hr(n,t){return typeof t=="function"?t(n):t}function Gl(n){var t=Ct();return Pd(t,st,n)}function Pd(n,t,e){var i=n.queue;if(i===null)throw Error(N(311));i.lastRenderedReducer=e;var r=n.baseQueue,a=i.pending;if(a!==null){if(r!==null){var s=r.next;r.next=a.next,a.next=s}t.baseQueue=r=a,i.pending=null}if(a=n.baseState,r===null)n.memoizedState=a;else{t=r.next;var o=s=null,u=null,c=t,h=!1;do{var m=c.lane&-536870913;if(m!==c.lane?(Q&m)===m:(Gr&m)===m){var d=c.revertLane;if(d===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),m===gs&&(h=!0);else if((Gr&d)===d){c=c.next,d===gs&&(h=!0);continue}else m={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(o=u=m,s=a):u=u.next=m,K.lanes|=d,Xr|=d;m=c.action,ba&&e(a,m),a=c.hasEagerState?c.eagerState:e(a,m)}else d={lane:m,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(o=u=d,s=a):u=u.next=d,K.lanes|=m,Xr|=m;c=c.next}while(c!==null&&c!==t);if(u===null?s=a:u.next=o,!we(a,n.memoizedState)&&(qt=!0,h&&(e=rs,e!==null)))throw e;n.memoizedState=a,n.baseState=s,n.baseQueue=u,i.lastRenderedState=a}return r===null&&(i.lanes=0),[n.memoizedState,i.dispatch]}function _c(n){var t=Ct(),e=t.queue;if(e===null)throw Error(N(311));e.lastRenderedReducer=n;var i=e.dispatch,r=e.pending,a=t.memoizedState;if(r!==null){e.pending=null;var s=r=r.next;do a=n(a,s.action),s=s.next;while(s!==r);we(a,t.memoizedState)||(qt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),e.lastRenderedState=a}return[a,i]}function lv(n,t,e){var i=K,r=Ct(),a=tt;if(a){if(e===void 0)throw Error(N(407));e=e()}else e=t();var s=!we((st||r).memoizedState,e);s&&(r.memoizedState=e,qt=!0),r=r.queue;var o=fv.bind(null,i,r,n);if(sl(2048,8,o,[n]),r.getSnapshot!==t||s||kt!==null&&kt.memoizedState.tag&1){if(i.flags|=2048,ys(9,Sc(),cv.bind(null,i,r,e,t),null),ft===null)throw Error(N(349));a||Gr&124||uv(i,t,e)}return e}function uv(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=K.updateQueue,t===null?(t=Jd(),K.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function cv(n,t,e,i){t.value=e,t.getSnapshot=i,hv(t)&&dv(n)}function fv(n,t,e){return e(function(){hv(t)&&dv(n)})}function hv(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!we(n,e)}catch{return!0}}function dv(n){var t=Ms(n,2);t!==null&&Te(t,n,2)}function Zf(n){var t=ne();if(typeof n=="function"){var e=n;if(n=e(),ba){Cr(!0);try{e()}finally{Cr(!1)}}}return t.memoizedState=t.baseState=n,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:n},t}function gv(n,t,e,i){return n.baseState=e,Pd(n,st,typeof i=="function"?i:hr)}function QT(n,t,e,i,r){if(bc(n))throw Error(N(485));if(n=t.action,n!==null){var a={payload:r,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){a.listeners.push(s)}};q.T!==null?e(!0):a.isTransition=!1,i(a),e=t.pending,e===null?(a.next=t.pending=a,mv(t,a)):(a.next=e.next,t.pending=e.next=a)}}function mv(n,t){var e=t.action,i=t.payload,r=n.state;if(t.isTransition){var a=q.T,s={};q.T=s;try{var o=e(r,i),u=q.S;u!==null&&u(s,o),fm(n,t,o)}catch(c){Qf(n,t,c)}finally{q.T=a}}else try{a=e(r,i),fm(n,t,a)}catch(c){Qf(n,t,c)}}function fm(n,t,e){e!==null&&typeof e=="object"&&typeof e.then=="function"?e.then(function(i){hm(n,t,i)},function(i){return Qf(n,t,i)}):hm(n,t,e)}function hm(n,t,e){t.status="fulfilled",t.value=e,yv(t),n.state=e,t=n.pending,t!==null&&(e=t.next,e===t?n.pending=null:(e=e.next,t.next=e,mv(n,e)))}function Qf(n,t,e){var i=n.pending;if(n.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=e,yv(t),t=t.next;while(t!==i)}n.action=null}function yv(n){n=n.listeners;for(var t=0;t<n.length;t++)(0,n[t])()}function pv(n,t){return t}function dm(n,t){if(tt){var e=ft.formState;if(e!==null){t:{var i=K;if(tt){if(bt){e:{for(var r=bt,a=hn;r.nodeType!==8;){if(!a){r=null;break e}if(r=an(r.nextSibling),r===null){r=null;break e}}a=r.data,r=a==="F!"||a==="F"?r:null}if(r){bt=an(r.nextSibling),i=r.data==="F!";break t}}va(i)}i=!1}i&&(t=e[0])}}return e=ne(),e.memoizedState=e.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pv,lastRenderedState:t},e.queue=i,e=Rv.bind(null,K,i),i.dispatch=e,i=Zf(!1),a=jd.bind(null,K,!1,i.queue),i=ne(),r={state:t,dispatch:null,action:n,pending:null},i.queue=r,e=QT.bind(null,K,r,a,e),r.dispatch=e,i.memoizedState=n,[t,e,!1]}function gm(n){var t=Ct();return vv(t,st,n)}function vv(n,t,e){if(t=Pd(n,t,pv)[0],n=Gl(hr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=al(t)}catch(s){throw s===rl?pc:s}else i=t;t=Ct();var r=t.queue,a=r.dispatch;return e!==t.memoizedState&&(K.flags|=2048,ys(9,Sc(),_T.bind(null,r,e),null)),[i,a,n]}function _T(n,t){n.action=t}function mm(n){var t=Ct(),e=st;if(e!==null)return vv(t,e,n);Ct(),t=t.memoizedState,e=Ct();var i=e.queue.dispatch;return e.memoizedState=n,[t,i,!1]}function ys(n,t,e,i){return n={tag:n,create:e,deps:i,inst:t,next:null},t=K.updateQueue,t===null&&(t=Jd(),K.updateQueue=t),e=t.lastEffect,e===null?t.lastEffect=n.next=n:(i=e.next,e.next=n,n.next=i,t.lastEffect=n),n}function Sc(){return{destroy:void 0,resource:void 0}}function Sv(){return Ct().memoizedState}function Yl(n,t,e,i){var r=ne();i=i===void 0?null:i,K.flags|=n,r.memoizedState=ys(1|t,Sc(),e,i)}function sl(n,t,e,i){var r=Ct();i=i===void 0?null:i;var a=r.memoizedState.inst;st!==null&&i!==null&&Rd(i,st.memoizedState.deps)?r.memoizedState=ys(t,a,e,i):(K.flags|=n,r.memoizedState=ys(1|t,a,e,i))}function ym(n,t){Yl(8390656,8,n,t)}function bv(n,t){sl(2048,8,n,t)}function Tv(n,t){return sl(4,2,n,t)}function wv(n,t){return sl(4,4,n,t)}function Av(n,t){if(typeof t=="function"){n=n();var e=t(n);return function(){typeof e=="function"?e():t(null)}}if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function Ev(n,t,e){e=e!=null?e.concat([n]):null,sl(4,4,Av.bind(null,t,n),e)}function Hd(){}function Nv(n,t){var e=Ct();t=t===void 0?null:t;var i=e.memoizedState;return t!==null&&Rd(t,i[1])?i[0]:(e.memoizedState=[n,t],n)}function xv(n,t){var e=Ct();t=t===void 0?null:t;var i=e.memoizedState;if(t!==null&&Rd(t,i[1]))return i[0];if(i=n(),ba){Cr(!0);try{n()}finally{Cr(!1)}}return e.memoizedState=[i,t],i}function Vd(n,t,e){return e===void 0||Gr&1073741824?n.memoizedState=t:(n.memoizedState=e,n=y0(),K.lanes|=n,Xr|=n,e)}function Dv(n,t,e,i){return we(e,t)?e:ms.current!==null?(n=Vd(n,e,i),we(n,t)||(qt=!0),n):Gr&42?(n=y0(),K.lanes|=n,Xr|=n,t):(qt=!0,n.memoizedState=e)}function Ov(n,t,e,i,r){var a=et.p;et.p=a!==0&&8>a?a:8;var s=q.T,o={};q.T=o,jd(n,!1,t,e);try{var u=r(),c=q.S;if(c!==null&&c(o,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=XT(u,i);fo(n,t,h,be(n))}else fo(n,t,i,be(n))}catch(m){fo(n,t,{then:function(){},status:"rejected",reason:m},be())}finally{et.p=a,q.T=s}}function WT(){}function _f(n,t,e,i){if(n.tag!==5)throw Error(N(476));var r=kv(n).queue;Ov(n,r,t,ca,e===null?WT:function(){return Cv(n),e(i)})}function kv(n){var t=n.memoizedState;if(t!==null)return t;t={memoizedState:ca,baseState:ca,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:ca},next:null};var e={};return t.next={memoizedState:e,baseState:e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:e},next:null},n.memoizedState=t,n=n.alternate,n!==null&&(n.memoizedState=t),t}function Cv(n){var t=kv(n).next.queue;fo(n,t,{},be())}function Kd(){return Ft(Mo)}function Iv(){return Ct().memoizedState}function Bv(){return Ct().memoizedState}function tw(n){for(var t=n.return;t!==null;){switch(t.tag){case 24:case 3:var e=be();n=Ur(e);var i=Lr(t,n,e);i!==null&&(Te(i,t,e),lo(i,t,e)),t={cache:kd()},n.payload=t;return}t=t.return}}function ew(n,t,e){var i=be();e={lane:i,revertLane:0,action:e,hasEagerState:!1,eagerState:null,next:null},bc(n)?zv(t,e):(e=Nd(n,t,e,i),e!==null&&(Te(e,n,i),Mv(e,t,i)))}function Rv(n,t,e){var i=be();fo(n,t,e,i)}function fo(n,t,e,i){var r={lane:i,revertLane:0,action:e,hasEagerState:!1,eagerState:null,next:null};if(bc(n))zv(t,r);else{var a=n.alternate;if(n.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,e);if(r.hasEagerState=!0,r.eagerState=o,we(o,s))return yc(n,t,r,0),ft===null&&mc(),!1}catch{}finally{}if(e=Nd(n,t,r,i),e!==null)return Te(e,n,i),Mv(e,t,i),!0}return!1}function jd(n,t,e,i){if(i={lane:2,revertLane:_d(),action:i,hasEagerState:!1,eagerState:null,next:null},bc(n)){if(t)throw Error(N(479))}else t=Nd(n,e,i,2),t!==null&&Te(t,n,2)}function bc(n){var t=n.alternate;return n===K||t!==null&&t===K}function zv(n,t){as=yu=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function Mv(n,t,e){if(e&4194048){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,Np(n,e)}}var vu={readContext:Ft,use:vc,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et},Uv={readContext:Ft,use:vc,useCallback:function(n,t){return ne().memoizedState=[n,t===void 0?null:t],n},useContext:Ft,useEffect:ym,useImperativeHandle:function(n,t,e){e=e!=null?e.concat([n]):null,Yl(4194308,4,Av.bind(null,t,n),e)},useLayoutEffect:function(n,t){return Yl(4194308,4,n,t)},useInsertionEffect:function(n,t){Yl(4,2,n,t)},useMemo:function(n,t){var e=ne();t=t===void 0?null:t;var i=n();if(ba){Cr(!0);try{n()}finally{Cr(!1)}}return e.memoizedState=[i,t],i},useReducer:function(n,t,e){var i=ne();if(e!==void 0){var r=e(t);if(ba){Cr(!0);try{e(t)}finally{Cr(!1)}}}else r=t;return i.memoizedState=i.baseState=r,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},i.queue=n,n=n.dispatch=ew.bind(null,K,n),[i.memoizedState,n]},useRef:function(n){var t=ne();return n={current:n},t.memoizedState=n},useState:function(n){n=Zf(n);var t=n.queue,e=Rv.bind(null,K,t);return t.dispatch=e,[n.memoizedState,e]},useDebugValue:Hd,useDeferredValue:function(n,t){var e=ne();return Vd(e,n,t)},useTransition:function(){var n=Zf(!1);return n=Ov.bind(null,K,n.queue,!0,!1),ne().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,t,e){var i=K,r=ne();if(tt){if(e===void 0)throw Error(N(407));e=e()}else{if(e=t(),ft===null)throw Error(N(349));Q&124||uv(i,t,e)}r.memoizedState=e;var a={value:e,getSnapshot:t};return r.queue=a,ym(fv.bind(null,i,a,n),[n]),i.flags|=2048,ys(9,Sc(),cv.bind(null,i,a,e,t),null),e},useId:function(){var n=ne(),t=ft.identifierPrefix;if(tt){var e=er,i=tr;e=(i&~(1<<32-Se(i)-1)).toString(32)+e,t="«"+t+"R"+e,e=pu++,0<e&&(t+="H"+e.toString(32)),t+="»"}else e=FT++,t="«"+t+"r"+e.toString(32)+"»";return n.memoizedState=t},useHostTransitionStatus:Kd,useFormState:dm,useActionState:dm,useOptimistic:function(n){var t=ne();t.memoizedState=t.baseState=n;var e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=e,t=jd.bind(null,K,!0,e),e.dispatch=t,[n,t]},useMemoCache:qd,useCacheRefresh:function(){return ne().memoizedState=tw.bind(null,K)}},Lv={readContext:Ft,use:vc,useCallback:Nv,useContext:Ft,useEffect:bv,useImperativeHandle:Ev,useInsertionEffect:Tv,useLayoutEffect:wv,useMemo:xv,useReducer:Gl,useRef:Sv,useState:function(){return Gl(hr)},useDebugValue:Hd,useDeferredValue:function(n,t){var e=Ct();return Dv(e,st.memoizedState,n,t)},useTransition:function(){var n=Gl(hr)[0],t=Ct().memoizedState;return[typeof n=="boolean"?n:al(n),t]},useSyncExternalStore:lv,useId:Iv,useHostTransitionStatus:Kd,useFormState:gm,useActionState:gm,useOptimistic:function(n,t){var e=Ct();return gv(e,st,n,t)},useMemoCache:qd,useCacheRefresh:Bv},nw={readContext:Ft,use:vc,useCallback:Nv,useContext:Ft,useEffect:bv,useImperativeHandle:Ev,useInsertionEffect:Tv,useLayoutEffect:wv,useMemo:xv,useReducer:_c,useRef:Sv,useState:function(){return _c(hr)},useDebugValue:Hd,useDeferredValue:function(n,t){var e=Ct();return st===null?Vd(e,n,t):Dv(e,st.memoizedState,n,t)},useTransition:function(){var n=_c(hr)[0],t=Ct().memoizedState;return[typeof n=="boolean"?n:al(n),t]},useSyncExternalStore:lv,useId:Iv,useHostTransitionStatus:Kd,useFormState:mm,useActionState:mm,useOptimistic:function(n,t){var e=Ct();return st!==null?gv(e,st,n,t):(e.baseState=n,[n,e.queue.dispatch])},useMemoCache:qd,useCacheRefresh:Bv},os=null,Io=0;function xl(n){var t=Io;return Io+=1,os===null&&(os=[]),iv(os,n,t)}function Ks(n,t){t=t.props.ref,n.ref=t!==void 0?t:null}function Dl(n,t){throw t.$$typeof===Bb?Error(N(525)):(n=Object.prototype.toString.call(t),Error(N(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)))}function pm(n){var t=n._init;return t(n._payload)}function Jv(n){function t(p,y){if(n){var v=p.deletions;v===null?(p.deletions=[y],p.flags|=16):v.push(y)}}function e(p,y){if(!n)return null;for(;y!==null;)t(p,y),y=y.sibling;return null}function i(p){for(var y=new Map;p!==null;)p.key!==null?y.set(p.key,p):y.set(p.index,p),p=p.sibling;return y}function r(p,y){return p=or(p,y),p.index=0,p.sibling=null,p}function a(p,y,v){return p.index=v,n?(v=p.alternate,v!==null?(v=v.index,v<y?(p.flags|=67108866,y):v):(p.flags|=67108866,y)):(p.flags|=1048576,y)}function s(p){return n&&p.alternate===null&&(p.flags|=67108866),p}function o(p,y,v,w){return y===null||y.tag!==6?(y=Fc(v,p.mode,w),y.return=p,y):(y=r(y,v),y.return=p,y)}function u(p,y,v,w){var k=v.type;return k===Va?h(p,y,v.props.children,w,v.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Er&&pm(k)===y.type)?(y=r(y,v.props),Ks(y,v),y.return=p,y):(y=jl(v.type,v.key,v.props,null,p.mode,w),Ks(y,v),y.return=p,y)}function c(p,y,v,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Zc(v,p.mode,w),y.return=p,y):(y=r(y,v.children||[]),y.return=p,y)}function h(p,y,v,w,k){return y===null||y.tag!==7?(y=fa(v,p.mode,w,k),y.return=p,y):(y=r(y,v),y.return=p,y)}function m(p,y,v){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=Fc(""+y,p.mode,v),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Sl:return v=jl(y.type,y.key,y.props,null,p.mode,v),Ks(v,y),v.return=p,v;case Fs:return y=Zc(y,p.mode,v),y.return=p,y;case Er:var w=y._init;return y=w(y._payload),m(p,y,v)}if(Zs(y)||qs(y))return y=fa(y,p.mode,v,null),y.return=p,y;if(typeof y.then=="function")return m(p,xl(y),v);if(y.$$typeof===Wi)return m(p,El(p,y),v);Dl(p,y)}return null}function d(p,y,v,w){var k=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return k!==null?null:o(p,y,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Sl:return v.key===k?u(p,y,v,w):null;case Fs:return v.key===k?c(p,y,v,w):null;case Er:return k=v._init,v=k(v._payload),d(p,y,v,w)}if(Zs(v)||qs(v))return k!==null?null:h(p,y,v,w,null);if(typeof v.then=="function")return d(p,y,xl(v),w);if(v.$$typeof===Wi)return d(p,y,El(p,v),w);Dl(p,v)}return null}function g(p,y,v,w,k){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return p=p.get(v)||null,o(y,p,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Sl:return p=p.get(w.key===null?v:w.key)||null,u(y,p,w,k);case Fs:return p=p.get(w.key===null?v:w.key)||null,c(y,p,w,k);case Er:var I=w._init;return w=I(w._payload),g(p,y,v,w,k)}if(Zs(w)||qs(w))return p=p.get(v)||null,h(y,p,w,k,null);if(typeof w.then=="function")return g(p,y,v,xl(w),k);if(w.$$typeof===Wi)return g(p,y,v,El(y,w),k);Dl(y,w)}return null}function T(p,y,v,w){for(var k=null,I=null,C=y,B=y=0,P=null;C!==null&&B<v.length;B++){C.index>B?(P=C,C=null):P=C.sibling;var J=d(p,C,v[B],w);if(J===null){C===null&&(C=P);break}n&&C&&J.alternate===null&&t(p,C),y=a(J,y,B),I===null?k=J:I.sibling=J,I=J,C=P}if(B===v.length)return e(p,C),tt&&ia(p,B),k;if(C===null){for(;B<v.length;B++)C=m(p,v[B],w),C!==null&&(y=a(C,y,B),I===null?k=C:I.sibling=C,I=C);return tt&&ia(p,B),k}for(C=i(C);B<v.length;B++)P=g(C,p,B,v[B],w),P!==null&&(n&&P.alternate!==null&&C.delete(P.key===null?B:P.key),y=a(P,y,B),I===null?k=P:I.sibling=P,I=P);return n&&C.forEach(function(Ht){return t(p,Ht)}),tt&&ia(p,B),k}function A(p,y,v,w){if(v==null)throw Error(N(151));for(var k=null,I=null,C=y,B=y=0,P=null,J=v.next();C!==null&&!J.done;B++,J=v.next()){C.index>B?(P=C,C=null):P=C.sibling;var Ht=d(p,C,J.value,w);if(Ht===null){C===null&&(C=P);break}n&&C&&Ht.alternate===null&&t(p,C),y=a(Ht,y,B),I===null?k=Ht:I.sibling=Ht,I=Ht,C=P}if(J.done)return e(p,C),tt&&ia(p,B),k;if(C===null){for(;!J.done;B++,J=v.next())J=m(p,J.value,w),J!==null&&(y=a(J,y,B),I===null?k=J:I.sibling=J,I=J);return tt&&ia(p,B),k}for(C=i(C);!J.done;B++,J=v.next())J=g(C,p,B,J.value,w),J!==null&&(n&&J.alternate!==null&&C.delete(J.key===null?B:J.key),y=a(J,y,B),I===null?k=J:I.sibling=J,I=J);return n&&C.forEach(function(fe){return t(p,fe)}),tt&&ia(p,B),k}function x(p,y,v,w){if(typeof v=="object"&&v!==null&&v.type===Va&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Sl:t:{for(var k=v.key;y!==null;){if(y.key===k){if(k=v.type,k===Va){if(y.tag===7){e(p,y.sibling),w=r(y,v.props.children),w.return=p,p=w;break t}}else if(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Er&&pm(k)===y.type){e(p,y.sibling),w=r(y,v.props),Ks(w,v),w.return=p,p=w;break t}e(p,y);break}else t(p,y);y=y.sibling}v.type===Va?(w=fa(v.props.children,p.mode,w,v.key),w.return=p,p=w):(w=jl(v.type,v.key,v.props,null,p.mode,w),Ks(w,v),w.return=p,p=w)}return s(p);case Fs:t:{for(k=v.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){e(p,y.sibling),w=r(y,v.children||[]),w.return=p,p=w;break t}else{e(p,y);break}else t(p,y);y=y.sibling}w=Zc(v,p.mode,w),w.return=p,p=w}return s(p);case Er:return k=v._init,v=k(v._payload),x(p,y,v,w)}if(Zs(v))return T(p,y,v,w);if(qs(v)){if(k=qs(v),typeof k!="function")throw Error(N(150));return v=k.call(v),A(p,y,v,w)}if(typeof v.then=="function")return x(p,y,xl(v),w);if(v.$$typeof===Wi)return x(p,y,El(p,v),w);Dl(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint"?(v=""+v,y!==null&&y.tag===6?(e(p,y.sibling),w=r(y,v),w.return=p,p=w):(e(p,y),w=Fc(v,p.mode,w),w.return=p,p=w),s(p)):e(p,y)}return function(p,y,v,w){try{Io=0;var k=x(p,y,v,w);return os=null,k}catch(C){if(C===rl||C===pc)throw C;var I=me(29,C,null,p.mode);return I.lanes=w,I.return=p,I}finally{}}}var ps=Jv(!0),qv=Jv(!1),Ye=kn(null),wn=null;function Dr(n){var t=n.alternate;yt(zt,zt.current&1),yt(Ye,n),wn===null&&(t===null||ms.current!==null||t.memoizedState!==null)&&(wn=n)}function Pv(n){if(n.tag===22){if(yt(zt,zt.current),yt(Ye,n),wn===null){var t=n.alternate;t!==null&&t.memoizedState!==null&&(wn=n)}}else Or()}function Or(){yt(zt,zt.current),yt(Ye,Ye.current)}function ir(n){Pt(Ye),wn===n&&(wn=null),Pt(zt)}var zt=kn(0);function Su(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||mh(e)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Wc(n,t,e,i){t=n.memoizedState,e=e(i,t),e=e==null?t:ht({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var Wf={enqueueSetState:function(n,t,e){n=n._reactInternals;var i=be(),r=Ur(i);r.payload=t,e!=null&&(r.callback=e),t=Lr(n,r,i),t!==null&&(Te(t,n,i),lo(t,n,i))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var i=be(),r=Ur(i);r.tag=1,r.payload=t,e!=null&&(r.callback=e),t=Lr(n,r,i),t!==null&&(Te(t,n,i),lo(t,n,i))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=be(),i=Ur(e);i.tag=2,t!=null&&(i.callback=t),t=Lr(n,i,e),t!==null&&(Te(t,n,e),lo(t,n,e))}};function vm(n,t,e,i,r,a,s){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,a,s):t.prototype&&t.prototype.isPureReactComponent?!Oo(e,i)||!Oo(r,a):!0}function Sm(n,t,e,i){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,i),t.state!==n&&Wf.enqueueReplaceState(t,t.state,null)}function Ta(n,t){var e=t;if("ref"in t){e={};for(var i in t)i!=="ref"&&(e[i]=t[i])}if(n=n.defaultProps){e===t&&(e=ht({},e));for(var r in n)e[r]===void 0&&(e[r]=n[r])}return e}var bu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Hv(n){bu(n)}function Vv(n){console.error(n)}function Kv(n){bu(n)}function Tu(n,t){try{var e=n.onUncaughtError;e(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function bm(n,t,e){try{var i=n.onCaughtError;i(e.value,{componentStack:e.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function th(n,t,e){return e=Ur(e),e.tag=3,e.payload={element:null},e.callback=function(){Tu(n,t)},e}function jv(n){return n=Ur(n),n.tag=3,n}function $v(n,t,e,i){var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=i.value;n.payload=function(){return r(a)},n.callback=function(){bm(t,e,i)}}var s=e.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){bm(t,e,i),typeof r!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function iw(n,t,e,i,r){if(e.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=e.alternate,t!==null&&nl(t,e,r,!0),e=Ye.current,e!==null){switch(e.tag){case 13:return wn===null?lh():e.alternate===null&&Tt===0&&(Tt=3),e.flags&=-257,e.flags|=65536,e.lanes=r,i===Gf?e.flags|=16384:(t=e.updateQueue,t===null?e.updateQueue=new Set([i]):t.add(i),ff(n,i,r)),!1;case 22:return e.flags|=65536,i===Gf?e.flags|=16384:(t=e.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},e.updateQueue=t):(e=t.retryQueue,e===null?t.retryQueue=new Set([i]):e.add(i)),ff(n,i,r)),!1}throw Error(N(435,e.tag))}return ff(n,i,r),lh(),!1}if(tt)return t=Ye.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==Hf&&(n=Error(N(422),{cause:i}),ko(Pe(n,e)))):(i!==Hf&&(t=Error(N(423),{cause:i}),ko(Pe(t,e))),n=n.current.alternate,n.flags|=65536,r&=-r,n.lanes|=r,i=Pe(i,e),r=th(n.stateNode,i,r),Qc(n,r),Tt!==4&&(Tt=2)),!1;var a=Error(N(520),{cause:i});if(a=Pe(a,e),mo===null?mo=[a]:mo.push(a),Tt!==4&&(Tt=2),t===null)return!0;i=Pe(i,e),e=t;do{switch(e.tag){case 3:return e.flags|=65536,n=r&-r,e.lanes|=n,n=th(e.stateNode,i,n),Qc(e,n),!1;case 1:if(t=e.type,a=e.stateNode,(e.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(Jr===null||!Jr.has(a))))return e.flags|=65536,r&=-r,e.lanes|=r,r=jv(r),$v(r,n,e,i),Qc(e,r),!1}e=e.return}while(e!==null);return!1}var Gv=Error(N(461)),qt=!1;function Vt(n,t,e,i){t.child=n===null?qv(t,null,e,i):ps(t,n.child,e,i)}function Tm(n,t,e,i,r){e=e.render;var a=t.ref;if("ref"in i){var s={};for(var o in i)o!=="ref"&&(s[o]=i[o])}else s=i;return Sa(t),i=zd(n,t,e,s,a,r),o=Md(),n!==null&&!qt?(Ud(n,t,r),dr(n,t,r)):(tt&&o&&Dd(t),t.flags|=1,Vt(n,t,i,r),t.child)}function wm(n,t,e,i,r){if(n===null){var a=e.type;return typeof a=="function"&&!xd(a)&&a.defaultProps===void 0&&e.compare===null?(t.tag=15,t.type=a,Yv(n,t,a,i,r)):(n=jl(e.type,null,i,t,t.mode,r),n.ref=t.ref,n.return=t,t.child=n)}if(a=n.child,!$d(n,r)){var s=a.memoizedProps;if(e=e.compare,e=e!==null?e:Oo,e(s,i)&&n.ref===t.ref)return dr(n,t,r)}return t.flags|=1,n=or(a,i),n.ref=t.ref,n.return=t,t.child=n}function Yv(n,t,e,i,r){if(n!==null){var a=n.memoizedProps;if(Oo(a,i)&&n.ref===t.ref)if(qt=!1,t.pendingProps=i=a,$d(n,r))n.flags&131072&&(qt=!0);else return t.lanes=n.lanes,dr(n,t,r)}return eh(n,t,e,i,r)}function Xv(n,t,e){var i=t.pendingProps,r=i.children,a=n!==null?n.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=a!==null?a.baseLanes|e:e,n!==null){for(r=t.child=n.child,a=0;r!==null;)a=a|r.lanes|r.childLanes,r=r.sibling;t.childLanes=a&~i}else t.childLanes=0,t.child=null;return Am(n,t,i,e)}if(e&536870912)t.memoizedState={baseLanes:0,cachePool:null},n!==null&&$l(t,a!==null?a.cachePool:null),a!==null?cm(t,a):Ff(),Pv(t);else return t.lanes=t.childLanes=536870912,Am(n,t,a!==null?a.baseLanes|e:e,e)}else a!==null?($l(t,a.cachePool),cm(t,a),Or(),t.memoizedState=null):(n!==null&&$l(t,null),Ff(),Or());return Vt(n,t,r,e),t.child}function Am(n,t,e,i){var r=Cd();return r=r===null?null:{parent:Rt._currentValue,pool:r},t.memoizedState={baseLanes:e,cachePool:r},n!==null&&$l(t,null),Ff(),Pv(t),n!==null&&nl(n,t,i,!0),null}function Xl(n,t){var e=t.ref;if(e===null)n!==null&&n.ref!==null&&(t.flags|=4194816);else{if(typeof e!="function"&&typeof e!="object")throw Error(N(284));(n===null||n.ref!==e)&&(t.flags|=4194816)}}function eh(n,t,e,i,r){return Sa(t),e=zd(n,t,e,i,void 0,r),i=Md(),n!==null&&!qt?(Ud(n,t,r),dr(n,t,r)):(tt&&i&&Dd(t),t.flags|=1,Vt(n,t,e,r),t.child)}function Em(n,t,e,i,r,a){return Sa(t),t.updateQueue=null,e=ov(t,i,e,r),sv(n),i=Md(),n!==null&&!qt?(Ud(n,t,a),dr(n,t,a)):(tt&&i&&Dd(t),t.flags|=1,Vt(n,t,e,a),t.child)}function Nm(n,t,e,i,r){if(Sa(t),t.stateNode===null){var a=Za,s=e.contextType;typeof s=="object"&&s!==null&&(a=Ft(s)),a=new e(i,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Wf,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=i,a.state=t.memoizedState,a.refs={},Id(t),s=e.contextType,a.context=typeof s=="object"&&s!==null?Ft(s):Za,a.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Wc(t,e,s,i),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&Wf.enqueueReplaceState(a,a.state,null),co(t,i,a,r),uo(),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(n===null){a=t.stateNode;var o=t.memoizedProps,u=Ta(e,o);a.props=u;var c=a.context,h=e.contextType;s=Za,typeof h=="object"&&h!==null&&(s=Ft(h));var m=e.getDerivedStateFromProps;h=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function",o=t.pendingProps!==o,h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o||c!==s)&&Sm(t,a,i,s),Nr=!1;var d=t.memoizedState;a.state=d,co(t,i,a,r),uo(),c=t.memoizedState,o||d!==c||Nr?(typeof m=="function"&&(Wc(t,e,m,i),c=t.memoizedState),(u=Nr||vm(t,e,u,i,d,c,s))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),a.props=i,a.state=c,a.context=s,i=u):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Yf(n,t),s=t.memoizedProps,h=Ta(e,s),a.props=h,m=t.pendingProps,d=a.context,c=e.contextType,u=Za,typeof c=="object"&&c!==null&&(u=Ft(c)),o=e.getDerivedStateFromProps,(c=typeof o=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==m||d!==u)&&Sm(t,a,i,u),Nr=!1,d=t.memoizedState,a.state=d,co(t,i,a,r),uo();var g=t.memoizedState;s!==m||d!==g||Nr||n!==null&&n.dependencies!==null&&gu(n.dependencies)?(typeof o=="function"&&(Wc(t,e,o,i),g=t.memoizedState),(h=Nr||vm(t,e,h,i,d,g,u)||n!==null&&n.dependencies!==null&&gu(n.dependencies))?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,g,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,g,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),a.props=i,a.state=g,a.context=u,i=h):(typeof a.componentDidUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(t.flags|=1024),i=!1)}return a=i,Xl(n,t),i=(t.flags&128)!==0,a||i?(a=t.stateNode,e=i&&typeof e.getDerivedStateFromError!="function"?null:a.render(),t.flags|=1,n!==null&&i?(t.child=ps(t,n.child,null,r),t.child=ps(t,null,e,r)):Vt(n,t,e,r),t.memoizedState=a.state,n=t.child):n=dr(n,t,r),n}function xm(n,t,e,i){return el(),t.flags|=256,Vt(n,t,e,i),t.child}var tf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ef(n){return{baseLanes:n,cachePool:ev()}}function nf(n,t,e){return n=n!==null?n.childLanes&~e:0,t&&(n|=He),n}function Fv(n,t,e){var i=t.pendingProps,r=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=n!==null&&n.memoizedState===null?!1:(zt.current&2)!==0),s&&(r=!0,t.flags&=-129),s=(t.flags&32)!==0,t.flags&=-33,n===null){if(tt){if(r?Dr(t):Or(),tt){var o=bt,u;if(u=o){t:{for(u=o,o=hn;u.nodeType!==8;){if(!o){o=null;break t}if(u=an(u.nextSibling),u===null){o=null;break t}}o=u}o!==null?(t.memoizedState={dehydrated:o,treeContext:ha!==null?{id:tr,overflow:er}:null,retryLane:536870912,hydrationErrors:null},u=me(18,null,null,0),u.stateNode=o,u.return=t,t.child=u,Wt=t,bt=null,u=!0):u=!1}u||va(t)}if(o=t.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return mh(o)?t.lanes=32:t.lanes=536870912,null;ir(t)}return o=i.children,i=i.fallback,r?(Or(),r=t.mode,o=wu({mode:"hidden",children:o},r),i=fa(i,r,e,null),o.return=t,i.return=t,o.sibling=i,t.child=o,r=t.child,r.memoizedState=ef(e),r.childLanes=nf(n,s,e),t.memoizedState=tf,i):(Dr(t),nh(t,o))}if(u=n.memoizedState,u!==null&&(o=u.dehydrated,o!==null)){if(a)t.flags&256?(Dr(t),t.flags&=-257,t=rf(n,t,e)):t.memoizedState!==null?(Or(),t.child=n.child,t.flags|=128,t=null):(Or(),r=i.fallback,o=t.mode,i=wu({mode:"visible",children:i.children},o),r=fa(r,o,e,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,ps(t,n.child,null,e),i=t.child,i.memoizedState=ef(e),i.childLanes=nf(n,s,e),t.memoizedState=tf,t=r);else if(Dr(t),mh(o)){if(s=o.nextSibling&&o.nextSibling.dataset,s)var c=s.dgst;s=c,i=Error(N(419)),i.stack="",i.digest=s,ko({value:i,source:null,stack:null}),t=rf(n,t,e)}else if(qt||nl(n,t,e,!1),s=(e&n.childLanes)!==0,qt||s){if(s=ft,s!==null&&(i=e&-e,i=i&42?1:md(i),i=i&(s.suspendedLanes|e)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,Ms(n,i),Te(s,n,i),Gv;o.data==="$?"||lh(),t=rf(n,t,e)}else o.data==="$?"?(t.flags|=192,t.child=n.child,t=null):(n=u.treeContext,bt=an(o.nextSibling),Wt=t,tt=!0,da=null,hn=!1,n!==null&&(De[Oe++]=tr,De[Oe++]=er,De[Oe++]=ha,tr=n.id,er=n.overflow,ha=t),t=nh(t,i.children),t.flags|=4096);return t}return r?(Or(),r=i.fallback,o=t.mode,u=n.child,c=u.sibling,i=or(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,c!==null?r=or(c,r):(r=fa(r,o,e,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,o=n.child.memoizedState,o===null?o=ef(e):(u=o.cachePool,u!==null?(c=Rt._currentValue,u=u.parent!==c?{parent:c,pool:c}:u):u=ev(),o={baseLanes:o.baseLanes|e,cachePool:u}),r.memoizedState=o,r.childLanes=nf(n,s,e),t.memoizedState=tf,i):(Dr(t),e=n.child,n=e.sibling,e=or(e,{mode:"visible",children:i.children}),e.return=t,e.sibling=null,n!==null&&(s=t.deletions,s===null?(t.deletions=[n],t.flags|=16):s.push(n)),t.child=e,t.memoizedState=null,e)}function nh(n,t){return t=wu({mode:"visible",children:t},n.mode),t.return=n,n.child=t}function wu(n,t){return n=me(22,n,null,t),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function rf(n,t,e){return ps(t,n.child,null,e),n=nh(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function Dm(n,t,e){n.lanes|=t;var i=n.alternate;i!==null&&(i.lanes|=t),Kf(n.return,t,e)}function af(n,t,e,i,r){var a=n.memoizedState;a===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:e,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=e,a.tailMode=r)}function Zv(n,t,e){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(Vt(n,t,i.children,e),i=zt.current,i&2)i=i&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Dm(n,e,t);else if(n.tag===19)Dm(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}switch(yt(zt,i),r){case"forwards":for(e=t.child,r=null;e!==null;)n=e.alternate,n!==null&&Su(n)===null&&(r=e),e=e.sibling;e=r,e===null?(r=t.child,t.child=null):(r=e.sibling,e.sibling=null),af(t,!1,r,e,a);break;case"backwards":for(e=null,r=t.child,t.child=null;r!==null;){if(n=r.alternate,n!==null&&Su(n)===null){t.child=r;break}n=r.sibling,r.sibling=e,e=r,r=n}af(t,!0,e,null,a);break;case"together":af(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function dr(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),Xr|=t.lanes,!(e&t.childLanes))if(n!==null){if(nl(n,t,e,!1),(e&t.childLanes)===0)return null}else return null;if(n!==null&&t.child!==n.child)throw Error(N(153));if(t.child!==null){for(n=t.child,e=or(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=or(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function $d(n,t){return n.lanes&t?!0:(n=n.dependencies,!!(n!==null&&gu(n)))}function rw(n,t,e){switch(t.tag){case 3:su(t,t.stateNode.containerInfo),xr(t,Rt,n.memoizedState.cache),el();break;case 27:case 5:If(t);break;case 4:su(t,t.stateNode.containerInfo);break;case 10:xr(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Dr(t),t.flags|=128,null):e&t.child.childLanes?Fv(n,t,e):(Dr(t),n=dr(n,t,e),n!==null?n.sibling:null);Dr(t);break;case 19:var r=(n.flags&128)!==0;if(i=(e&t.childLanes)!==0,i||(nl(n,t,e,!1),i=(e&t.childLanes)!==0),r){if(i)return Zv(n,t,e);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),yt(zt,zt.current),i)break;return null;case 22:case 23:return t.lanes=0,Xv(n,t,e);case 24:xr(t,Rt,n.memoizedState.cache)}return dr(n,t,e)}function Qv(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps)qt=!0;else{if(!$d(n,e)&&!(t.flags&128))return qt=!1,rw(n,t,e);qt=!!(n.flags&131072)}else qt=!1,tt&&t.flags&1048576&&Wp(t,du,t.index);switch(t.lanes=0,t.tag){case 16:t:{n=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")xd(i)?(n=Ta(i,n),t.tag=1,t=Nm(null,t,i,n,e)):(t.tag=0,t=eh(null,t,i,n,e));else{if(i!=null){if(r=i.$$typeof,r===hd){t.tag=11,t=Tm(null,t,i,n,e);break t}else if(r===dd){t.tag=14,t=wm(null,t,i,n,e);break t}}throw t=kf(i)||i,Error(N(306,t,""))}}return t;case 0:return eh(n,t,t.type,t.pendingProps,e);case 1:return i=t.type,r=Ta(i,t.pendingProps),Nm(n,t,i,r,e);case 3:t:{if(su(t,t.stateNode.containerInfo),n===null)throw Error(N(387));i=t.pendingProps;var a=t.memoizedState;r=a.element,Yf(n,t),co(t,i,null,e);var s=t.memoizedState;if(i=s.cache,xr(t,Rt,i),i!==a.cache&&jf(t,[Rt],e,!0),uo(),i=s.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=xm(n,t,i,e);break t}else if(i!==r){r=Pe(Error(N(424)),t),ko(r),t=xm(n,t,i,e);break t}else{switch(n=t.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(bt=an(n.firstChild),Wt=t,tt=!0,da=null,hn=!0,e=qv(t,null,i,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling}else{if(el(),i===r){t=dr(n,t,e);break t}Vt(n,t,i,e)}t=t.child}return t;case 26:return Xl(n,t),n===null?(e=jm(t.type,null,t.pendingProps,null))?t.memoizedState=e:tt||(e=t.type,n=t.pendingProps,i=ku(Mr.current).createElement(e),i[Xt]=t,i[le]=n,Gt(i,e,n),Jt(i),t.stateNode=i):t.memoizedState=jm(t.type,n.memoizedProps,t.pendingProps,n.memoizedState),null;case 27:return If(t),n===null&&tt&&(i=t.stateNode=L0(t.type,t.pendingProps,Mr.current),Wt=t,hn=!0,r=bt,Qr(t.type)?(yh=r,bt=an(i.firstChild)):bt=r),Vt(n,t,t.pendingProps.children,e),Xl(n,t),n===null&&(t.flags|=4194304),t.child;case 5:return n===null&&tt&&((r=i=bt)&&(i=Bw(i,t.type,t.pendingProps,hn),i!==null?(t.stateNode=i,Wt=t,bt=an(i.firstChild),hn=!1,r=!0):r=!1),r||va(t)),If(t),r=t.type,a=t.pendingProps,s=n!==null?n.memoizedProps:null,i=a.children,dh(r,a)?i=null:s!==null&&dh(r,s)&&(t.flags|=32),t.memoizedState!==null&&(r=zd(n,t,ZT,null,null,e),Mo._currentValue=r),Xl(n,t),Vt(n,t,i,e),t.child;case 6:return n===null&&tt&&((n=e=bt)&&(e=Rw(e,t.pendingProps,hn),e!==null?(t.stateNode=e,Wt=t,bt=null,n=!0):n=!1),n||va(t)),null;case 13:return Fv(n,t,e);case 4:return su(t,t.stateNode.containerInfo),i=t.pendingProps,n===null?t.child=ps(t,null,i,e):Vt(n,t,i,e),t.child;case 11:return Tm(n,t,t.type,t.pendingProps,e);case 7:return Vt(n,t,t.pendingProps,e),t.child;case 8:return Vt(n,t,t.pendingProps.children,e),t.child;case 12:return Vt(n,t,t.pendingProps.children,e),t.child;case 10:return i=t.pendingProps,xr(t,t.type,i.value),Vt(n,t,i.children,e),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Sa(t),r=Ft(r),i=i(r),t.flags|=1,Vt(n,t,i,e),t.child;case 14:return wm(n,t,t.type,t.pendingProps,e);case 15:return Yv(n,t,t.type,t.pendingProps,e);case 19:return Zv(n,t,e);case 31:return i=t.pendingProps,e=t.mode,i={mode:i.mode,children:i.children},n===null?(e=wu(i,e),e.ref=t.ref,t.child=e,e.return=t,t=e):(e=or(n.child,i),e.ref=t.ref,t.child=e,e.return=t,t=e),t;case 22:return Xv(n,t,e);case 24:return Sa(t),i=Ft(Rt),n===null?(r=Cd(),r===null&&(r=ft,a=kd(),r.pooledCache=a,a.refCount++,a!==null&&(r.pooledCacheLanes|=e),r=a),t.memoizedState={parent:i,cache:r},Id(t),xr(t,Rt,r)):(n.lanes&e&&(Yf(n,t),co(t,null,null,e),uo()),r=n.memoizedState,a=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),xr(t,Rt,i)):(i=a.cache,xr(t,Rt,i),i!==r.cache&&jf(t,[Rt],e,!0))),Vt(n,t,t.pendingProps.children,e),t.child;case 29:throw t.pendingProps}throw Error(N(156,t.tag))}function Bn(n){n.flags|=4}function Om(n,t){if(t.type!=="stylesheet"||t.state.loading&4)n.flags&=-16777217;else if(n.flags|=16777216,!P0(t)){if(t=Ye.current,t!==null&&((Q&4194048)===Q?wn!==null:(Q&62914560)!==Q&&!(Q&536870912)||t!==wn))throw oo=Gf,nv;n.flags|=8192}}function Ol(n,t){t!==null&&(n.flags|=4),n.flags&16384&&(t=n.tag!==22?Ap():536870912,n.lanes|=t,vs|=t)}function js(n,t){if(!tt)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function pt(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,i=0;if(t)for(var r=n.child;r!==null;)e|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)e|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=e,t}function aw(n,t,e){var i=t.pendingProps;switch(Od(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(t),null;case 1:return pt(t),null;case 3:return e=t.stateNode,i=null,n!==null&&(i=n.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),lr(Rt),fs(),e.pendingContext&&(e.context=e.pendingContext,e.pendingContext=null),(n===null||n.child===null)&&(Vs(t)?Bn(t):n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,rm())),pt(t),null;case 26:return e=t.memoizedState,n===null?(Bn(t),e!==null?(pt(t),Om(t,e)):(pt(t),t.flags&=-16777217)):e?e!==n.memoizedState?(Bn(t),pt(t),Om(t,e)):(pt(t),t.flags&=-16777217):(n.memoizedProps!==i&&Bn(t),pt(t),t.flags&=-16777217),null;case 27:ou(t),e=Mr.current;var r=t.type;if(n!==null&&t.stateNode!=null)n.memoizedProps!==i&&Bn(t);else{if(!i){if(t.stateNode===null)throw Error(N(166));return pt(t),null}n=bn.current,Vs(t)?nm(t):(n=L0(r,i,e),t.stateNode=n,Bn(t))}return pt(t),null;case 5:if(ou(t),e=t.type,n!==null&&t.stateNode!=null)n.memoizedProps!==i&&Bn(t);else{if(!i){if(t.stateNode===null)throw Error(N(166));return pt(t),null}if(n=bn.current,Vs(t))nm(t);else{switch(r=ku(Mr.current),n){case 1:n=r.createElementNS("http://www.w3.org/2000/svg",e);break;case 2:n=r.createElementNS("http://www.w3.org/1998/Math/MathML",e);break;default:switch(e){case"svg":n=r.createElementNS("http://www.w3.org/2000/svg",e);break;case"math":n=r.createElementNS("http://www.w3.org/1998/Math/MathML",e);break;case"script":n=r.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?n.multiple=!0:i.size&&(n.size=i.size);break;default:n=typeof i.is=="string"?r.createElement(e,{is:i.is}):r.createElement(e)}}n[Xt]=t,n[le]=i;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)n.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=n;t:switch(Gt(n,e,i),e){case"button":case"input":case"select":case"textarea":n=!!i.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&Bn(t)}}return pt(t),t.flags&=-16777217,null;case 6:if(n&&t.stateNode!=null)n.memoizedProps!==i&&Bn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(N(166));if(n=Mr.current,Vs(t)){if(n=t.stateNode,e=t.memoizedProps,i=null,r=Wt,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}n[Xt]=t,n=!!(n.nodeValue===e||i!==null&&i.suppressHydrationWarning===!0||z0(n.nodeValue,e)),n||va(t)}else n=ku(n).createTextNode(i),n[Xt]=t,t.stateNode=n}return pt(t),null;case 13:if(i=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(r=Vs(t),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(N(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(N(317));r[Xt]=t}else el(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pt(t),r=!1}else r=rm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(ir(t),t):(ir(t),null)}if(ir(t),t.flags&128)return t.lanes=e,t;if(e=i!==null,n=n!==null&&n.memoizedState!==null,e){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var a=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==r&&(i.flags|=2048)}return e!==n&&e&&(t.child.flags|=8192),Ol(t,t.updateQueue),pt(t),null;case 4:return fs(),n===null&&Wd(t.stateNode.containerInfo),pt(t),null;case 10:return lr(t.type),pt(t),null;case 19:if(Pt(zt),r=t.memoizedState,r===null)return pt(t),null;if(i=(t.flags&128)!==0,a=r.rendering,a===null)if(i)js(r,!1);else{if(Tt!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(a=Su(n),a!==null){for(t.flags|=128,js(r,!1),n=a.updateQueue,t.updateQueue=n,Ol(t,n),t.subtreeFlags=0,n=e,e=t.child;e!==null;)_p(e,n),e=e.sibling;return yt(zt,zt.current&1|2),t.child}n=n.sibling}r.tail!==null&&Tn()>Eu&&(t.flags|=128,i=!0,js(r,!1),t.lanes=4194304)}else{if(!i)if(n=Su(a),n!==null){if(t.flags|=128,i=!0,n=n.updateQueue,t.updateQueue=n,Ol(t,n),js(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!tt)return pt(t),null}else 2*Tn()-r.renderingStartTime>Eu&&e!==536870912&&(t.flags|=128,i=!0,js(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(n=r.last,n!==null?n.sibling=a:t.child=a,r.last=a)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Tn(),t.sibling=null,n=zt.current,yt(zt,i?n&1|2:n&1),t):(pt(t),null);case 22:case 23:return ir(t),Bd(),i=t.memoizedState!==null,n!==null?n.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?e&536870912&&!(t.flags&128)&&(pt(t),t.subtreeFlags&6&&(t.flags|=8192)):pt(t),e=t.updateQueue,e!==null&&Ol(t,e.retryQueue),e=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==e&&(t.flags|=2048),n!==null&&Pt(ga),null;case 24:return e=null,n!==null&&(e=n.memoizedState.cache),t.memoizedState.cache!==e&&(t.flags|=2048),lr(Rt),pt(t),null;case 25:return null;case 30:return null}throw Error(N(156,t.tag))}function sw(n,t){switch(Od(t),t.tag){case 1:return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return lr(Rt),fs(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 26:case 27:case 5:return ou(t),null;case 13:if(ir(t),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(N(340));el()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return Pt(zt),null;case 4:return fs(),null;case 10:return lr(t.type),null;case 22:case 23:return ir(t),Bd(),n!==null&&Pt(ga),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 24:return lr(Rt),null;case 25:return null;default:return null}}function _v(n,t){switch(Od(t),t.tag){case 3:lr(Rt),fs();break;case 26:case 27:case 5:ou(t);break;case 4:fs();break;case 13:ir(t);break;case 19:Pt(zt);break;case 10:lr(t.type);break;case 22:case 23:ir(t),Bd(),n!==null&&Pt(ga);break;case 24:lr(Rt)}}function ol(n,t){try{var e=t.updateQueue,i=e!==null?e.lastEffect:null;if(i!==null){var r=i.next;e=r;do{if((e.tag&n)===n){i=void 0;var a=e.create,s=e.inst;i=a(),s.destroy=i}e=e.next}while(e!==r)}}catch(o){ut(t,t.return,o)}}function Yr(n,t,e){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var a=r.next;i=a;do{if((i.tag&n)===n){var s=i.inst,o=s.destroy;if(o!==void 0){s.destroy=void 0,r=t;var u=e,c=o;try{c()}catch(h){ut(r,u,h)}}}i=i.next}while(i!==a)}}catch(h){ut(t,t.return,h)}}function Wv(n){var t=n.updateQueue;if(t!==null){var e=n.stateNode;try{av(t,e)}catch(i){ut(n,n.return,i)}}}function t0(n,t,e){e.props=Ta(n.type,n.memoizedProps),e.state=n.memoizedState;try{e.componentWillUnmount()}catch(i){ut(n,t,i)}}function ho(n,t){try{var e=n.ref;if(e!==null){switch(n.tag){case 26:case 27:case 5:var i=n.stateNode;break;case 30:i=n.stateNode;break;default:i=n.stateNode}typeof e=="function"?n.refCleanup=e(i):e.current=i}}catch(r){ut(n,t,r)}}function gn(n,t){var e=n.ref,i=n.refCleanup;if(e!==null)if(typeof i=="function")try{i()}catch(r){ut(n,t,r)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof e=="function")try{e(null)}catch(r){ut(n,t,r)}else e.current=null}function e0(n){var t=n.type,e=n.memoizedProps,i=n.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":e.autoFocus&&i.focus();break t;case"img":e.src?i.src=e.src:e.srcSet&&(i.srcset=e.srcSet)}}catch(r){ut(n,n.return,r)}}function sf(n,t,e){try{var i=n.stateNode;Dw(i,n.type,e,t),i[le]=t}catch(r){ut(n,n.return,r)}}function n0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Qr(n.type)||n.tag===4}function of(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||n0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Qr(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ih(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e).insertBefore(n,t):(t=e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,t.appendChild(n),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=Ec));else if(i!==4&&(i===27&&Qr(n.type)&&(e=n.stateNode,t=null),n=n.child,n!==null))for(ih(n,t,e),n=n.sibling;n!==null;)ih(n,t,e),n=n.sibling}function Au(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(i!==4&&(i===27&&Qr(n.type)&&(e=n.stateNode),n=n.child,n!==null))for(Au(n,t,e),n=n.sibling;n!==null;)Au(n,t,e),n=n.sibling}function i0(n){var t=n.stateNode,e=n.memoizedProps;try{for(var i=n.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Gt(t,i,e),t[Xt]=n,t[le]=e}catch(a){ut(n,n.return,a)}}var Zi=!1,xt=!1,lf=!1,km=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function ow(n,t){if(n=n.containerInfo,fh=Ru,n=jp(n),Ad(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var i=e.getSelection&&e.getSelection();if(i&&i.rangeCount!==0){e=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{e.nodeType,a.nodeType}catch{e=null;break t}var s=0,o=-1,u=-1,c=0,h=0,m=n,d=null;e:for(;;){for(var g;m!==e||r!==0&&m.nodeType!==3||(o=s+r),m!==a||i!==0&&m.nodeType!==3||(u=s+i),m.nodeType===3&&(s+=m.nodeValue.length),(g=m.firstChild)!==null;)d=m,m=g;for(;;){if(m===n)break e;if(d===e&&++c===r&&(o=s),d===a&&++h===i&&(u=s),(g=m.nextSibling)!==null)break;m=d,d=m.parentNode}m=g}e=o===-1||u===-1?null:{start:o,end:u}}else e=null}e=e||{start:0,end:0}}else e=null;for(hh={focusedElem:n,selectionRange:e},Ru=!1,Lt=t;Lt!==null;)if(t=Lt,n=t.child,(t.subtreeFlags&1024)!==0&&n!==null)n.return=t,Lt=n;else for(;Lt!==null;){switch(t=Lt,a=t.alternate,n=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(n&1024&&a!==null){n=void 0,e=t,r=a.memoizedProps,a=a.memoizedState,i=e.stateNode;try{var T=Ta(e.type,r,e.elementType===e.type);n=i.getSnapshotBeforeUpdate(T,a),i.__reactInternalSnapshotBeforeUpdate=n}catch(A){ut(e,e.return,A)}}break;case 3:if(n&1024){if(n=t.stateNode.containerInfo,e=n.nodeType,e===9)gh(n);else if(e===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":gh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(n&1024)throw Error(N(163))}if(n=t.sibling,n!==null){n.return=t.return,Lt=n;break}Lt=t.return}}function r0(n,t,e){var i=e.flags;switch(e.tag){case 0:case 11:case 15:br(n,e),i&4&&ol(5,e);break;case 1:if(br(n,e),i&4)if(n=e.stateNode,t===null)try{n.componentDidMount()}catch(s){ut(e,e.return,s)}else{var r=Ta(e.type,t.memoizedProps);t=t.memoizedState;try{n.componentDidUpdate(r,t,n.__reactInternalSnapshotBeforeUpdate)}catch(s){ut(e,e.return,s)}}i&64&&Wv(e),i&512&&ho(e,e.return);break;case 3:if(br(n,e),i&64&&(n=e.updateQueue,n!==null)){if(t=null,e.child!==null)switch(e.child.tag){case 27:case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}try{av(n,t)}catch(s){ut(e,e.return,s)}}break;case 27:t===null&&i&4&&i0(e);case 26:case 5:br(n,e),t===null&&i&4&&e0(e),i&512&&ho(e,e.return);break;case 12:br(n,e);break;case 13:br(n,e),i&4&&o0(n,e),i&64&&(n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(e=yw.bind(null,e),zw(n,e))));break;case 22:if(i=e.memoizedState!==null||Zi,!i){t=t!==null&&t.memoizedState!==null||xt,r=Zi;var a=xt;Zi=i,(xt=t)&&!a?wr(n,e,(e.subtreeFlags&8772)!==0):br(n,e),Zi=r,xt=a}break;case 30:break;default:br(n,e)}}function a0(n){var t=n.alternate;t!==null&&(n.alternate=null,a0(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&pd(t)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var dt=null,ie=!1;function Rn(n,t,e){for(e=e.child;e!==null;)s0(n,t,e),e=e.sibling}function s0(n,t,e){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(Zo,e)}catch{}switch(e.tag){case 26:xt||gn(e,t),Rn(n,t,e),e.memoizedState?e.memoizedState.count--:e.stateNode&&(e=e.stateNode,e.parentNode.removeChild(e));break;case 27:xt||gn(e,t);var i=dt,r=ie;Qr(e.type)&&(dt=e.stateNode,ie=!1),Rn(n,t,e),po(e.stateNode),dt=i,ie=r;break;case 5:xt||gn(e,t);case 6:if(i=dt,r=ie,dt=null,Rn(n,t,e),dt=i,ie=r,dt!==null)if(ie)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(e.stateNode)}catch(a){ut(e,t,a)}else try{dt.removeChild(e.stateNode)}catch(a){ut(e,t,a)}break;case 18:dt!==null&&(ie?(n=dt,Hm(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.stateNode),Jo(n)):Hm(dt,e.stateNode));break;case 4:i=dt,r=ie,dt=e.stateNode.containerInfo,ie=!0,Rn(n,t,e),dt=i,ie=r;break;case 0:case 11:case 14:case 15:xt||Yr(2,e,t),xt||Yr(4,e,t),Rn(n,t,e);break;case 1:xt||(gn(e,t),i=e.stateNode,typeof i.componentWillUnmount=="function"&&t0(e,t,i)),Rn(n,t,e);break;case 21:Rn(n,t,e);break;case 22:xt=(i=xt)||e.memoizedState!==null,Rn(n,t,e),xt=i;break;default:Rn(n,t,e)}}function o0(n,t){if(t.memoizedState===null&&(n=t.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Jo(n)}catch(e){ut(t,t.return,e)}}function lw(n){switch(n.tag){case 13:case 19:var t=n.stateNode;return t===null&&(t=n.stateNode=new km),t;case 22:return n=n.stateNode,t=n._retryCache,t===null&&(t=n._retryCache=new km),t;default:throw Error(N(435,n.tag))}}function uf(n,t){var e=lw(n);t.forEach(function(i){var r=pw.bind(null,n,i);e.has(i)||(e.add(i),i.then(r,r))})}function he(n,t){var e=t.deletions;if(e!==null)for(var i=0;i<e.length;i++){var r=e[i],a=n,s=t,o=s;t:for(;o!==null;){switch(o.tag){case 27:if(Qr(o.type)){dt=o.stateNode,ie=!1;break t}break;case 5:dt=o.stateNode,ie=!1;break t;case 3:case 4:dt=o.stateNode.containerInfo,ie=!0;break t}o=o.return}if(dt===null)throw Error(N(160));s0(a,s,r),dt=null,ie=!1,a=r.alternate,a!==null&&(a.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)l0(t,n),t=t.sibling}var We=null;function l0(n,t){var e=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:he(t,n),de(n),i&4&&(Yr(3,n,n.return),ol(3,n),Yr(5,n,n.return));break;case 1:he(t,n),de(n),i&512&&(xt||e===null||gn(e,e.return)),i&64&&Zi&&(n=n.updateQueue,n!==null&&(i=n.callbacks,i!==null&&(e=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=e===null?i:e.concat(i))));break;case 26:var r=We;if(he(t,n),de(n),i&512&&(xt||e===null||gn(e,e.return)),i&4){var a=e!==null?e.memoizedState:null;if(i=n.memoizedState,e===null)if(i===null)if(n.stateNode===null){t:{i=n.type,e=n.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":a=r.getElementsByTagName("title")[0],(!a||a[Wo]||a[Xt]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=r.createElement(i),r.head.insertBefore(a,r.querySelector("head > title"))),Gt(a,i,e),a[Xt]=n,Jt(a),i=a;break t;case"link":var s=Gm("link","href",r).get(i+(e.href||""));if(s){for(var o=0;o<s.length;o++)if(a=s[o],a.getAttribute("href")===(e.href==null||e.href===""?null:e.href)&&a.getAttribute("rel")===(e.rel==null?null:e.rel)&&a.getAttribute("title")===(e.title==null?null:e.title)&&a.getAttribute("crossorigin")===(e.crossOrigin==null?null:e.crossOrigin)){s.splice(o,1);break e}}a=r.createElement(i),Gt(a,i,e),r.head.appendChild(a);break;case"meta":if(s=Gm("meta","content",r).get(i+(e.content||""))){for(o=0;o<s.length;o++)if(a=s[o],a.getAttribute("content")===(e.content==null?null:""+e.content)&&a.getAttribute("name")===(e.name==null?null:e.name)&&a.getAttribute("property")===(e.property==null?null:e.property)&&a.getAttribute("http-equiv")===(e.httpEquiv==null?null:e.httpEquiv)&&a.getAttribute("charset")===(e.charSet==null?null:e.charSet)){s.splice(o,1);break e}}a=r.createElement(i),Gt(a,i,e),r.head.appendChild(a);break;default:throw Error(N(468,i))}a[Xt]=n,Jt(a),i=a}n.stateNode=i}else Ym(r,n.type,n.stateNode);else n.stateNode=$m(r,i,n.memoizedProps);else a!==i?(a===null?e.stateNode!==null&&(e=e.stateNode,e.parentNode.removeChild(e)):a.count--,i===null?Ym(r,n.type,n.stateNode):$m(r,i,n.memoizedProps)):i===null&&n.stateNode!==null&&sf(n,n.memoizedProps,e.memoizedProps)}break;case 27:he(t,n),de(n),i&512&&(xt||e===null||gn(e,e.return)),e!==null&&i&4&&sf(n,n.memoizedProps,e.memoizedProps);break;case 5:if(he(t,n),de(n),i&512&&(xt||e===null||gn(e,e.return)),n.flags&32){r=n.stateNode;try{ds(r,"")}catch(g){ut(n,n.return,g)}}i&4&&n.stateNode!=null&&(r=n.memoizedProps,sf(n,r,e!==null?e.memoizedProps:r)),i&1024&&(lf=!0);break;case 6:if(he(t,n),de(n),i&4){if(n.stateNode===null)throw Error(N(162));i=n.memoizedProps,e=n.stateNode;try{e.nodeValue=i}catch(g){ut(n,n.return,g)}}break;case 3:if(Ql=null,r=We,We=Cu(t.containerInfo),he(t,n),We=r,de(n),i&4&&e!==null&&e.memoizedState.isDehydrated)try{Jo(t.containerInfo)}catch(g){ut(n,n.return,g)}lf&&(lf=!1,u0(n));break;case 4:i=We,We=Cu(n.stateNode.containerInfo),he(t,n),de(n),We=i;break;case 12:he(t,n),de(n);break;case 13:he(t,n),de(n),n.child.flags&8192&&n.memoizedState!==null!=(e!==null&&e.memoizedState!==null)&&(Zd=Tn()),i&4&&(i=n.updateQueue,i!==null&&(n.updateQueue=null,uf(n,i)));break;case 22:r=n.memoizedState!==null;var u=e!==null&&e.memoizedState!==null,c=Zi,h=xt;if(Zi=c||r,xt=h||u,he(t,n),xt=h,Zi=c,de(n),i&8192)t:for(t=n.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(e===null||u||Zi||xt||ra(n)),e=null,t=n;;){if(t.tag===5||t.tag===26){if(e===null){u=e=t;try{if(a=u.stateNode,r)s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=u.stateNode;var m=u.memoizedProps.style,d=m!=null&&m.hasOwnProperty("display")?m.display:null;o.style.display=d==null||typeof d=="boolean"?"":(""+d).trim()}}catch(g){ut(u,u.return,g)}}}else if(t.tag===6){if(e===null){u=t;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(g){ut(u,u.return,g)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===n)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;e===t&&(e=null),t=t.return}e===t&&(e=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=n.updateQueue,i!==null&&(e=i.retryQueue,e!==null&&(i.retryQueue=null,uf(n,e))));break;case 19:he(t,n),de(n),i&4&&(i=n.updateQueue,i!==null&&(n.updateQueue=null,uf(n,i)));break;case 30:break;case 21:break;default:he(t,n),de(n)}}function de(n){var t=n.flags;if(t&2){try{for(var e,i=n.return;i!==null;){if(n0(i)){e=i;break}i=i.return}if(e==null)throw Error(N(160));switch(e.tag){case 27:var r=e.stateNode,a=of(n);Au(n,a,r);break;case 5:var s=e.stateNode;e.flags&32&&(ds(s,""),e.flags&=-33);var o=of(n);Au(n,o,s);break;case 3:case 4:var u=e.stateNode.containerInfo,c=of(n);ih(n,c,u);break;default:throw Error(N(161))}}catch(h){ut(n,n.return,h)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function u0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var t=n;u0(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),n=n.sibling}}function br(n,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)r0(n,t.alternate,t),t=t.sibling}function ra(n){for(n=n.child;n!==null;){var t=n;switch(t.tag){case 0:case 11:case 14:case 15:Yr(4,t,t.return),ra(t);break;case 1:gn(t,t.return);var e=t.stateNode;typeof e.componentWillUnmount=="function"&&t0(t,t.return,e),ra(t);break;case 27:po(t.stateNode);case 26:case 5:gn(t,t.return),ra(t);break;case 22:t.memoizedState===null&&ra(t);break;case 30:ra(t);break;default:ra(t)}n=n.sibling}}function wr(n,t,e){for(e=e&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=n,a=t,s=a.flags;switch(a.tag){case 0:case 11:case 15:wr(r,a,e),ol(4,a);break;case 1:if(wr(r,a,e),i=a,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){ut(i,i.return,c)}if(i=a,r=i.updateQueue,r!==null){var o=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)rv(u[r],o)}catch(c){ut(i,i.return,c)}}e&&s&64&&Wv(a),ho(a,a.return);break;case 27:i0(a);case 26:case 5:wr(r,a,e),e&&i===null&&s&4&&e0(a),ho(a,a.return);break;case 12:wr(r,a,e);break;case 13:wr(r,a,e),e&&s&4&&o0(r,a);break;case 22:a.memoizedState===null&&wr(r,a,e),ho(a,a.return);break;case 30:break;default:wr(r,a,e)}t=t.sibling}}function Gd(n,t){var e=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==e&&(n!=null&&n.refCount++,e!=null&&il(e))}function Yd(n,t){n=null,t.alternate!==null&&(n=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==n&&(t.refCount++,n!=null&&il(n))}function un(n,t,e,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)c0(n,t,e,i),t=t.sibling}function c0(n,t,e,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:un(n,t,e,i),r&2048&&ol(9,t);break;case 1:un(n,t,e,i);break;case 3:un(n,t,e,i),r&2048&&(n=null,t.alternate!==null&&(n=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==n&&(t.refCount++,n!=null&&il(n)));break;case 12:if(r&2048){un(n,t,e,i),n=t.stateNode;try{var a=t.memoizedProps,s=a.id,o=a.onPostCommit;typeof o=="function"&&o(s,t.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(u){ut(t,t.return,u)}}else un(n,t,e,i);break;case 13:un(n,t,e,i);break;case 23:break;case 22:a=t.stateNode,s=t.alternate,t.memoizedState!==null?a._visibility&2?un(n,t,e,i):go(n,t):a._visibility&2?un(n,t,e,i):(a._visibility|=2,Ja(n,t,e,i,(t.subtreeFlags&10256)!==0)),r&2048&&Gd(s,t);break;case 24:un(n,t,e,i),r&2048&&Yd(t.alternate,t);break;default:un(n,t,e,i)}}function Ja(n,t,e,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var a=n,s=t,o=e,u=i,c=s.flags;switch(s.tag){case 0:case 11:case 15:Ja(a,s,o,u,r),ol(8,s);break;case 23:break;case 22:var h=s.stateNode;s.memoizedState!==null?h._visibility&2?Ja(a,s,o,u,r):go(a,s):(h._visibility|=2,Ja(a,s,o,u,r)),r&&c&2048&&Gd(s.alternate,s);break;case 24:Ja(a,s,o,u,r),r&&c&2048&&Yd(s.alternate,s);break;default:Ja(a,s,o,u,r)}t=t.sibling}}function go(n,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var e=n,i=t,r=i.flags;switch(i.tag){case 22:go(e,i),r&2048&&Gd(i.alternate,i);break;case 24:go(e,i),r&2048&&Yd(i.alternate,i);break;default:go(e,i)}t=t.sibling}}var _s=8192;function Ia(n){if(n.subtreeFlags&_s)for(n=n.child;n!==null;)f0(n),n=n.sibling}function f0(n){switch(n.tag){case 26:Ia(n),n.flags&_s&&n.memoizedState!==null&&Yw(We,n.memoizedState,n.memoizedProps);break;case 5:Ia(n);break;case 3:case 4:var t=We;We=Cu(n.stateNode.containerInfo),Ia(n),We=t;break;case 22:n.memoizedState===null&&(t=n.alternate,t!==null&&t.memoizedState!==null?(t=_s,_s=16777216,Ia(n),_s=t):Ia(n));break;default:Ia(n)}}function h0(n){var t=n.alternate;if(t!==null&&(n=t.child,n!==null)){t.child=null;do t=n.sibling,n.sibling=null,n=t;while(n!==null)}}function $s(n){var t=n.deletions;if(n.flags&16){if(t!==null)for(var e=0;e<t.length;e++){var i=t[e];Lt=i,g0(i,n)}h0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)d0(n),n=n.sibling}function d0(n){switch(n.tag){case 0:case 11:case 15:$s(n),n.flags&2048&&Yr(9,n,n.return);break;case 3:$s(n);break;case 12:$s(n);break;case 22:var t=n.stateNode;n.memoizedState!==null&&t._visibility&2&&(n.return===null||n.return.tag!==13)?(t._visibility&=-3,Fl(n)):$s(n);break;default:$s(n)}}function Fl(n){var t=n.deletions;if(n.flags&16){if(t!==null)for(var e=0;e<t.length;e++){var i=t[e];Lt=i,g0(i,n)}h0(n)}for(n=n.child;n!==null;){switch(t=n,t.tag){case 0:case 11:case 15:Yr(8,t,t.return),Fl(t);break;case 22:e=t.stateNode,e._visibility&2&&(e._visibility&=-3,Fl(t));break;default:Fl(t)}n=n.sibling}}function g0(n,t){for(;Lt!==null;){var e=Lt;switch(e.tag){case 0:case 11:case 15:Yr(8,e,t);break;case 23:case 22:if(e.memoizedState!==null&&e.memoizedState.cachePool!==null){var i=e.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:il(e.memoizedState.cache)}if(i=e.child,i!==null)i.return=e,Lt=i;else t:for(e=n;Lt!==null;){i=Lt;var r=i.sibling,a=i.return;if(a0(i),i===e){Lt=null;break t}if(r!==null){r.return=a,Lt=r;break t}Lt=a}}}var uw={getCacheForType:function(n){var t=Ft(Rt),e=t.data.get(n);return e===void 0&&(e=n(),t.data.set(n,e)),e}},cw=typeof WeakMap=="function"?WeakMap:Map,rt=0,ft=null,Y=null,Q=0,it=0,ge=null,Br=!1,Us=!1,Xd=!1,gr=0,Tt=0,Xr=0,ma=0,Fd=0,He=0,vs=0,mo=null,re=null,rh=!1,Zd=0,Eu=1/0,Nu=null,Jr=null,jt=0,qr=null,Ss=null,ls=0,ah=0,sh=null,m0=null,yo=0,oh=null;function be(){if(rt&2&&Q!==0)return Q&-Q;if(q.T!==null){var n=gs;return n!==0?n:_d()}return xp()}function y0(){He===0&&(He=!(Q&536870912)||tt?wp():536870912);var n=Ye.current;return n!==null&&(n.flags|=32),He}function Te(n,t,e){(n===ft&&(it===2||it===9)||n.cancelPendingCommit!==null)&&(bs(n,0),Rr(n,Q,He,!1)),_o(n,e),(!(rt&2)||n!==ft)&&(n===ft&&(!(rt&2)&&(ma|=e),Tt===4&&Rr(n,Q,He,!1)),Cn(n))}function p0(n,t,e){if(rt&6)throw Error(N(327));var i=!e&&(t&124)===0&&(t&n.expiredLanes)===0||Qo(n,t),r=i?dw(n,t):cf(n,t,!0),a=i;do{if(r===0){Us&&!i&&Rr(n,t,0,!1);break}else{if(e=n.current.alternate,a&&!fw(e)){r=cf(n,t,!1),a=!1;continue}if(r===2){if(a=t,n.errorRecoveryDisabledLanes&a)var s=0;else s=n.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){t=s;t:{var o=n;r=mo;var u=o.current.memoizedState.isDehydrated;if(u&&(bs(o,s).flags|=256),s=cf(o,s,!1),s!==2){if(Xd&&!u){o.errorRecoveryDisabledLanes|=a,ma|=a,r=4;break t}a=re,re=r,a!==null&&(re===null?re=a:re.push.apply(re,a))}r=s}if(a=!1,r!==2)continue}}if(r===1){bs(n,0),Rr(n,t,0,!0);break}t:{switch(i=n,a=r,a){case 0:case 1:throw Error(N(345));case 4:if((t&4194048)!==t)break;case 6:Rr(i,t,He,!Br);break t;case 2:re=null;break;case 3:case 5:break;default:throw Error(N(329))}if((t&62914560)===t&&(r=Zd+300-Tn(),10<r)){if(Rr(i,t,He,!Br),fc(i,0,!0)!==0)break t;i.timeoutHandle=U0(Cm.bind(null,i,e,re,Nu,rh,t,He,ma,vs,Br,a,2,-0,0),r);break t}Cm(i,e,re,Nu,rh,t,He,ma,vs,Br,a,0,-0,0)}}break}while(!0);Cn(n)}function Cm(n,t,e,i,r,a,s,o,u,c,h,m,d,g){if(n.timeoutHandle=-1,m=t.subtreeFlags,(m&8192||(m&16785408)===16785408)&&(zo={stylesheets:null,count:0,unsuspend:Gw},f0(t),m=Xw(),m!==null)){n.cancelPendingCommit=m(Bm.bind(null,n,t,a,e,i,r,s,o,u,h,1,d,g)),Rr(n,a,s,!c);return}Bm(n,t,a,e,i,r,s,o,u)}function fw(n){for(var t=n;;){var e=t.tag;if((e===0||e===11||e===15)&&t.flags&16384&&(e=t.updateQueue,e!==null&&(e=e.stores,e!==null)))for(var i=0;i<e.length;i++){var r=e[i],a=r.getSnapshot;r=r.value;try{if(!we(a(),r))return!1}catch{return!1}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Rr(n,t,e,i){t&=~Fd,t&=~ma,n.suspendedLanes|=t,n.pingedLanes&=~t,i&&(n.warmLanes|=t),i=n.expirationTimes;for(var r=t;0<r;){var a=31-Se(r),s=1<<a;i[a]=-1,r&=~s}e!==0&&Ep(n,e,t)}function Tc(){return rt&6?!0:(ll(0),!1)}function Qd(){if(Y!==null){if(it===0)var n=Y.return;else n=Y,nr=ka=null,Ld(n),os=null,Io=0,n=Y;for(;n!==null;)_v(n.alternate,n),n=n.return;Y=null}}function bs(n,t){var e=n.timeoutHandle;e!==-1&&(n.timeoutHandle=-1,kw(e)),e=n.cancelPendingCommit,e!==null&&(n.cancelPendingCommit=null,e()),Qd(),ft=n,Y=e=or(n.current,null),Q=t,it=0,ge=null,Br=!1,Us=Qo(n,t),Xd=!1,vs=He=Fd=ma=Xr=Tt=0,re=mo=null,rh=!1,t&8&&(t|=t&32);var i=n.entangledLanes;if(i!==0)for(n=n.entanglements,i&=t;0<i;){var r=31-Se(i),a=1<<r;t|=n[r],i&=~a}return gr=t,mc(),e}function v0(n,t){K=null,q.H=vu,t===rl||t===pc?(t=lm(),it=3):t===nv?(t=lm(),it=4):it=t===Gv?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ge=t,Y===null&&(Tt=1,Tu(n,Pe(t,n.current)))}function S0(){var n=q.H;return q.H=vu,n===null?vu:n}function b0(){var n=q.A;return q.A=uw,n}function lh(){Tt=4,Br||(Q&4194048)!==Q&&Ye.current!==null||(Us=!0),!(Xr&134217727)&&!(ma&134217727)||ft===null||Rr(ft,Q,He,!1)}function cf(n,t,e){var i=rt;rt|=2;var r=S0(),a=b0();(ft!==n||Q!==t)&&(Nu=null,bs(n,t)),t=!1;var s=Tt;t:do try{if(it!==0&&Y!==null){var o=Y,u=ge;switch(it){case 8:Qd(),s=6;break t;case 3:case 2:case 9:case 6:Ye.current===null&&(t=!0);var c=it;if(it=0,ge=null,Wa(n,o,u,c),e&&Us){s=0;break t}break;default:c=it,it=0,ge=null,Wa(n,o,u,c)}}hw(),s=Tt;break}catch(h){v0(n,h)}while(!0);return t&&n.shellSuspendCounter++,nr=ka=null,rt=i,q.H=r,q.A=a,Y===null&&(ft=null,Q=0,mc()),s}function hw(){for(;Y!==null;)T0(Y)}function dw(n,t){var e=rt;rt|=2;var i=S0(),r=b0();ft!==n||Q!==t?(Nu=null,Eu=Tn()+500,bs(n,t)):Us=Qo(n,t);t:do try{if(it!==0&&Y!==null){t=Y;var a=ge;e:switch(it){case 1:it=0,ge=null,Wa(n,t,a,1);break;case 2:case 9:if(om(a)){it=0,ge=null,Im(t);break}t=function(){it!==2&&it!==9||ft!==n||(it=7),Cn(n)},a.then(t,t);break t;case 3:it=7;break t;case 4:it=5;break t;case 7:om(a)?(it=0,ge=null,Im(t)):(it=0,ge=null,Wa(n,t,a,7));break;case 5:var s=null;switch(Y.tag){case 26:s=Y.memoizedState;case 5:case 27:var o=Y;if(!s||P0(s)){it=0,ge=null;var u=o.sibling;if(u!==null)Y=u;else{var c=o.return;c!==null?(Y=c,wc(c)):Y=null}break e}}it=0,ge=null,Wa(n,t,a,5);break;case 6:it=0,ge=null,Wa(n,t,a,6);break;case 8:Qd(),Tt=6;break t;default:throw Error(N(462))}}gw();break}catch(h){v0(n,h)}while(!0);return nr=ka=null,q.H=i,q.A=r,rt=e,Y!==null?0:(ft=null,Q=0,mc(),Tt)}function gw(){for(;Y!==null&&!Ub();)T0(Y)}function T0(n){var t=Qv(n.alternate,n,gr);n.memoizedProps=n.pendingProps,t===null?wc(n):Y=t}function Im(n){var t=n,e=t.alternate;switch(t.tag){case 15:case 0:t=Em(e,t,t.pendingProps,t.type,void 0,Q);break;case 11:t=Em(e,t,t.pendingProps,t.type.render,t.ref,Q);break;case 5:Ld(t);default:_v(e,t),t=Y=_p(t,gr),t=Qv(e,t,gr)}n.memoizedProps=n.pendingProps,t===null?wc(n):Y=t}function Wa(n,t,e,i){nr=ka=null,Ld(t),os=null,Io=0;var r=t.return;try{if(iw(n,r,t,e,Q)){Tt=1,Tu(n,Pe(e,n.current)),Y=null;return}}catch(a){if(r!==null)throw Y=r,a;Tt=1,Tu(n,Pe(e,n.current)),Y=null;return}t.flags&32768?(tt||i===1?n=!0:Us||Q&536870912?n=!1:(Br=n=!0,(i===2||i===9||i===3||i===6)&&(i=Ye.current,i!==null&&i.tag===13&&(i.flags|=16384))),w0(t,n)):wc(t)}function wc(n){var t=n;do{if(t.flags&32768){w0(t,Br);return}n=t.return;var e=aw(t.alternate,t,gr);if(e!==null){Y=e;return}if(t=t.sibling,t!==null){Y=t;return}Y=t=n}while(t!==null);Tt===0&&(Tt=5)}function w0(n,t){do{var e=sw(n.alternate,n);if(e!==null){e.flags&=32767,Y=e;return}if(e=n.return,e!==null&&(e.flags|=32768,e.subtreeFlags=0,e.deletions=null),!t&&(n=n.sibling,n!==null)){Y=n;return}Y=n=e}while(n!==null);Tt=6,Y=null}function Bm(n,t,e,i,r,a,s,o,u){n.cancelPendingCommit=null;do Ac();while(jt!==0);if(rt&6)throw Error(N(327));if(t!==null){if(t===n.current)throw Error(N(177));if(a=t.lanes|t.childLanes,a|=Ed,Gb(n,e,a,s,o,u),n===ft&&(Y=ft=null,Q=0),Ss=t,qr=n,ls=e,ah=a,sh=r,m0=i,t.subtreeFlags&10256||t.flags&10256?(n.callbackNode=null,n.callbackPriority=0,vw(lu,function(){return D0(),null})):(n.callbackNode=null,n.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=q.T,q.T=null,r=et.p,et.p=2,s=rt,rt|=4;try{ow(n,t,e)}finally{rt=s,et.p=r,q.T=i}}jt=1,A0(),E0(),N0()}}function A0(){if(jt===1){jt=0;var n=qr,t=Ss,e=(t.flags&13878)!==0;if(t.subtreeFlags&13878||e){e=q.T,q.T=null;var i=et.p;et.p=2;var r=rt;rt|=4;try{l0(t,n);var a=hh,s=jp(n.containerInfo),o=a.focusedElem,u=a.selectionRange;if(s!==o&&o&&o.ownerDocument&&Kp(o.ownerDocument.documentElement,o)){if(u!==null&&Ad(o)){var c=u.start,h=u.end;if(h===void 0&&(h=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(h,o.value.length);else{var m=o.ownerDocument||document,d=m&&m.defaultView||window;if(d.getSelection){var g=d.getSelection(),T=o.textContent.length,A=Math.min(u.start,T),x=u.end===void 0?A:Math.min(u.end,T);!g.extend&&A>x&&(s=x,x=A,A=s);var p=Wg(o,A),y=Wg(o,x);if(p&&y&&(g.rangeCount!==1||g.anchorNode!==p.node||g.anchorOffset!==p.offset||g.focusNode!==y.node||g.focusOffset!==y.offset)){var v=m.createRange();v.setStart(p.node,p.offset),g.removeAllRanges(),A>x?(g.addRange(v),g.extend(y.node,y.offset)):(v.setEnd(y.node,y.offset),g.addRange(v))}}}}for(m=[],g=o;g=g.parentNode;)g.nodeType===1&&m.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<m.length;o++){var w=m[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}Ru=!!fh,hh=fh=null}finally{rt=r,et.p=i,q.T=e}}n.current=t,jt=2}}function E0(){if(jt===2){jt=0;var n=qr,t=Ss,e=(t.flags&8772)!==0;if(t.subtreeFlags&8772||e){e=q.T,q.T=null;var i=et.p;et.p=2;var r=rt;rt|=4;try{r0(n,t.alternate,t)}finally{rt=r,et.p=i,q.T=e}}jt=3}}function N0(){if(jt===4||jt===3){jt=0,Lb();var n=qr,t=Ss,e=ls,i=m0;t.subtreeFlags&10256||t.flags&10256?jt=5:(jt=0,Ss=qr=null,x0(n,n.pendingLanes));var r=n.pendingLanes;if(r===0&&(Jr=null),yd(e),t=t.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(Zo,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=q.T,r=et.p,et.p=2,q.T=null;try{for(var a=n.onRecoverableError,s=0;s<i.length;s++){var o=i[s];a(o.value,{componentStack:o.stack})}}finally{q.T=t,et.p=r}}ls&3&&Ac(),Cn(n),r=n.pendingLanes,e&4194090&&r&42?n===oh?yo++:(yo=0,oh=n):yo=0,ll(0)}}function x0(n,t){(n.pooledCacheLanes&=t)===0&&(t=n.pooledCache,t!=null&&(n.pooledCache=null,il(t)))}function Ac(n){return A0(),E0(),N0(),D0()}function D0(){if(jt!==5)return!1;var n=qr,t=ah;ah=0;var e=yd(ls),i=q.T,r=et.p;try{et.p=32>e?32:e,q.T=null,e=sh,sh=null;var a=qr,s=ls;if(jt=0,Ss=qr=null,ls=0,rt&6)throw Error(N(331));var o=rt;if(rt|=4,d0(a.current),c0(a,a.current,s,e),rt=o,ll(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(Zo,a)}catch{}return!0}finally{et.p=r,q.T=i,x0(n,t)}}function Rm(n,t,e){t=Pe(e,t),t=th(n.stateNode,t,2),n=Lr(n,t,2),n!==null&&(_o(n,2),Cn(n))}function ut(n,t,e){if(n.tag===3)Rm(n,n,e);else for(;t!==null;){if(t.tag===3){Rm(t,n,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Jr===null||!Jr.has(i))){n=Pe(e,n),e=jv(2),i=Lr(t,e,2),i!==null&&($v(e,i,t,n),_o(i,2),Cn(i));break}}t=t.return}}function ff(n,t,e){var i=n.pingCache;if(i===null){i=n.pingCache=new cw;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(e)||(Xd=!0,r.add(e),n=mw.bind(null,n,t,e),t.then(n,n))}function mw(n,t,e){var i=n.pingCache;i!==null&&i.delete(t),n.pingedLanes|=n.suspendedLanes&e,n.warmLanes&=~e,ft===n&&(Q&e)===e&&(Tt===4||Tt===3&&(Q&62914560)===Q&&300>Tn()-Zd?!(rt&2)&&bs(n,0):Fd|=e,vs===Q&&(vs=0)),Cn(n)}function O0(n,t){t===0&&(t=Ap()),n=Ms(n,t),n!==null&&(_o(n,t),Cn(n))}function yw(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),O0(n,e)}function pw(n,t){var e=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(e=r.retryLane);break;case 19:i=n.stateNode;break;case 22:i=n.stateNode._retryCache;break;default:throw Error(N(314))}i!==null&&i.delete(t),O0(n,e)}function vw(n,t){return gd(n,t)}var xu=null,qa=null,uh=!1,Du=!1,hf=!1,ya=0;function Cn(n){n!==qa&&n.next===null&&(qa===null?xu=qa=n:qa=qa.next=n),Du=!0,uh||(uh=!0,bw())}function ll(n,t){if(!hf&&Du){hf=!0;do for(var e=!1,i=xu;i!==null;){if(n!==0){var r=i.pendingLanes;if(r===0)var a=0;else{var s=i.suspendedLanes,o=i.pingedLanes;a=(1<<31-Se(42|n)+1)-1,a&=r&~(s&~o),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(e=!0,zm(i,a))}else a=Q,a=fc(i,i===ft?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(a&3)||Qo(i,a)||(e=!0,zm(i,a));i=i.next}while(e);hf=!1}}function Sw(){k0()}function k0(){Du=uh=!1;var n=0;ya!==0&&(Ow()&&(n=ya),ya=0);for(var t=Tn(),e=null,i=xu;i!==null;){var r=i.next,a=C0(i,t);a===0?(i.next=null,e===null?xu=r:e.next=r,r===null&&(qa=e)):(e=i,(n!==0||a&3)&&(Du=!0)),i=r}ll(n)}function C0(n,t){for(var e=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,a=n.pendingLanes&-62914561;0<a;){var s=31-Se(a),o=1<<s,u=r[s];u===-1?(!(o&e)||o&i)&&(r[s]=$b(o,t)):u<=t&&(n.expiredLanes|=o),a&=~o}if(t=ft,e=Q,e=fc(n,n===t?e:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),i=n.callbackNode,e===0||n===t&&(it===2||it===9)||n.cancelPendingCommit!==null)return i!==null&&i!==null&&Lc(i),n.callbackNode=null,n.callbackPriority=0;if(!(e&3)||Qo(n,e)){if(t=e&-e,t===n.callbackPriority)return t;switch(i!==null&&Lc(i),yd(e)){case 2:case 8:e=bp;break;case 32:e=lu;break;case 268435456:e=Tp;break;default:e=lu}return i=I0.bind(null,n),e=gd(e,i),n.callbackPriority=t,n.callbackNode=e,t}return i!==null&&i!==null&&Lc(i),n.callbackPriority=2,n.callbackNode=null,2}function I0(n,t){if(jt!==0&&jt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var e=n.callbackNode;if(Ac()&&n.callbackNode!==e)return null;var i=Q;return i=fc(n,n===ft?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),i===0?null:(p0(n,i,t),C0(n,Tn()),n.callbackNode!=null&&n.callbackNode===e?I0.bind(null,n):null)}function zm(n,t){if(Ac())return null;p0(n,t,!0)}function bw(){Cw(function(){rt&6?gd(Sp,Sw):k0()})}function _d(){return ya===0&&(ya=wp()),ya}function Mm(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Hl(""+n)}function Um(n,t){var e=t.ownerDocument.createElement("input");return e.name=t.name,e.value=t.value,n.id&&e.setAttribute("form",n.id),t.parentNode.insertBefore(e,t),n=new FormData(n),e.parentNode.removeChild(e),n}function Tw(n,t,e,i,r){if(t==="submit"&&e&&e.stateNode===r){var a=Mm((r[le]||null).action),s=i.submitter;s&&(t=(t=s[le]||null)?Mm(t.formAction):s.getAttribute("formAction"),t!==null&&(a=t,s=null));var o=new hc("action","action",null,i,r);n.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(ya!==0){var u=s?Um(r,s):new FormData(r);_f(e,{pending:!0,data:u,method:r.method,action:a},null,u)}}else typeof a=="function"&&(o.preventDefault(),u=s?Um(r,s):new FormData(r),_f(e,{pending:!0,data:u,method:r.method,action:a},a,u))},currentTarget:r}]})}}for(var df=0;df<Pf.length;df++){var gf=Pf[df],ww=gf.toLowerCase(),Aw=gf[0].toUpperCase()+gf.slice(1);on(ww,"on"+Aw)}on(Gp,"onAnimationEnd");on(Yp,"onAnimationIteration");on(Xp,"onAnimationStart");on("dblclick","onDoubleClick");on("focusin","onFocus");on("focusout","onBlur");on(PT,"onTransitionRun");on(HT,"onTransitionStart");on(VT,"onTransitionCancel");on(Fp,"onTransitionEnd");hs("onMouseEnter",["mouseout","mouseover"]);hs("onMouseLeave",["mouseout","mouseover"]);hs("onPointerEnter",["pointerout","pointerover"]);hs("onPointerLeave",["pointerout","pointerover"]);xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xa("onBeforeInput",["compositionend","keypress","textInput","paste"]);xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ew=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bo));function B0(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var i=n[e],r=i.event;i=i.listeners;t:{var a=void 0;if(t)for(var s=i.length-1;0<=s;s--){var o=i[s],u=o.instance,c=o.currentTarget;if(o=o.listener,u!==a&&r.isPropagationStopped())break t;a=o,r.currentTarget=c;try{a(r)}catch(h){bu(h)}r.currentTarget=null,a=u}else for(s=0;s<i.length;s++){if(o=i[s],u=o.instance,c=o.currentTarget,o=o.listener,u!==a&&r.isPropagationStopped())break t;a=o,r.currentTarget=c;try{a(r)}catch(h){bu(h)}r.currentTarget=null,a=u}}}}function G(n,t){var e=t[Rf];e===void 0&&(e=t[Rf]=new Set);var i=n+"__bubble";e.has(i)||(R0(t,n,2,!1),e.add(i))}function mf(n,t,e){var i=0;t&&(i|=4),R0(e,n,i,t)}var kl="_reactListening"+Math.random().toString(36).slice(2);function Wd(n){if(!n[kl]){n[kl]=!0,Dp.forEach(function(e){e!=="selectionchange"&&(Ew.has(e)||mf(e,!1,n),mf(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[kl]||(t[kl]=!0,mf("selectionchange",!1,t))}}function R0(n,t,e,i){switch($0(t)){case 2:var r=Qw;break;case 8:r=_w;break;default:r=ig}e=r.bind(null,t,e,n),r=void 0,!Lf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(t,e,{capture:!0,passive:r}):n.addEventListener(t,e,!0):r!==void 0?n.addEventListener(t,e,{passive:r}):n.addEventListener(t,e,!1)}function yf(n,t,e,i,r){var a=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var o=i.stateNode.containerInfo;if(o===r)break;if(s===4)for(s=i.return;s!==null;){var u=s.tag;if((u===3||u===4)&&s.stateNode.containerInfo===r)return;s=s.return}for(;o!==null;){if(s=ja(o),s===null)return;if(u=s.tag,u===5||u===6||u===26||u===27){i=a=s;continue t}o=o.parentNode}}i=i.return}Mp(function(){var c=a,h=Sd(e),m=[];t:{var d=Zp.get(n);if(d!==void 0){var g=hc,T=n;switch(n){case"keypress":if(Kl(e)===0)break t;case"keydown":case"keyup":g=vT;break;case"focusin":T="focus",g=$c;break;case"focusout":T="blur",g=$c;break;case"beforeblur":case"afterblur":g=$c;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Kg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=sT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=TT;break;case Gp:case Yp:case Xp:g=uT;break;case Fp:g=AT;break;case"scroll":case"scrollend":g=rT;break;case"wheel":g=NT;break;case"copy":case"cut":case"paste":g=fT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=$g;break;case"toggle":case"beforetoggle":g=DT}var A=(t&4)!==0,x=!A&&(n==="scroll"||n==="scrollend"),p=A?d!==null?d+"Capture":null:d;A=[];for(var y=c,v;y!==null;){var w=y;if(v=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||v===null||p===null||(w=xo(y,p),w!=null&&A.push(Ro(y,w,v))),x)break;y=y.return}0<A.length&&(d=new g(d,T,null,e,h),m.push({event:d,listeners:A}))}}if(!(t&7)){t:{if(d=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",d&&e!==Uf&&(T=e.relatedTarget||e.fromElement)&&(ja(T)||T[Rs]))break t;if((g||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,g?(T=e.relatedTarget||e.toElement,g=c,T=T?ja(T):null,T!==null&&(x=Fo(T),A=T.tag,T!==x||A!==5&&A!==27&&A!==6)&&(T=null)):(g=null,T=c),g!==T)){if(A=Kg,w="onMouseLeave",p="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(A=$g,w="onPointerLeave",p="onPointerEnter",y="pointer"),x=g==null?d:Qs(g),v=T==null?d:Qs(T),d=new A(w,y+"leave",g,e,h),d.target=x,d.relatedTarget=v,w=null,ja(h)===c&&(A=new A(p,y+"enter",T,e,h),A.target=v,A.relatedTarget=x,w=A),x=w,g&&T)e:{for(A=g,p=T,y=0,v=A;v;v=Ba(v))y++;for(v=0,w=p;w;w=Ba(w))v++;for(;0<y-v;)A=Ba(A),y--;for(;0<v-y;)p=Ba(p),v--;for(;y--;){if(A===p||p!==null&&A===p.alternate)break e;A=Ba(A),p=Ba(p)}A=null}else A=null;g!==null&&Lm(m,d,g,A,!1),T!==null&&x!==null&&Lm(m,x,T,A,!0)}}t:{if(d=c?Qs(c):window,g=d.nodeName&&d.nodeName.toLowerCase(),g==="select"||g==="input"&&d.type==="file")var k=Fg;else if(Xg(d))if(Hp)k=LT;else{k=MT;var I=zT}else g=d.nodeName,!g||g.toLowerCase()!=="input"||d.type!=="checkbox"&&d.type!=="radio"?c&&vd(c.elementType)&&(k=Fg):k=UT;if(k&&(k=k(n,c))){Pp(m,k,e,h);break t}I&&I(n,d,c),n==="focusout"&&c&&d.type==="number"&&c.memoizedProps.value!=null&&Mf(d,"number",d.value)}switch(I=c?Qs(c):window,n){case"focusin":(Xg(I)||I.contentEditable==="true")&&(Ya=I,Jf=c,ao=null);break;case"focusout":ao=Jf=Ya=null;break;case"mousedown":qf=!0;break;case"contextmenu":case"mouseup":case"dragend":qf=!1,tm(m,e,h);break;case"selectionchange":if(qT)break;case"keydown":case"keyup":tm(m,e,h)}var C;if(wd)t:{switch(n){case"compositionstart":var B="onCompositionStart";break t;case"compositionend":B="onCompositionEnd";break t;case"compositionupdate":B="onCompositionUpdate";break t}B=void 0}else Ga?Jp(n,e)&&(B="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(B="onCompositionStart");B&&(Lp&&e.locale!=="ko"&&(Ga||B!=="onCompositionStart"?B==="onCompositionEnd"&&Ga&&(C=Up()):(Ir=h,bd="value"in Ir?Ir.value:Ir.textContent,Ga=!0)),I=Ou(c,B),0<I.length&&(B=new jg(B,n,null,e,h),m.push({event:B,listeners:I}),C?B.data=C:(C=qp(e),C!==null&&(B.data=C)))),(C=kT?CT(n,e):IT(n,e))&&(B=Ou(c,"onBeforeInput"),0<B.length&&(I=new jg("onBeforeInput","beforeinput",null,e,h),m.push({event:I,listeners:B}),I.data=C)),Tw(m,n,c,e,h)}B0(m,t)})}function Ro(n,t,e){return{instance:n,listener:t,currentTarget:e}}function Ou(n,t){for(var e=t+"Capture",i=[];n!==null;){var r=n,a=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||a===null||(r=xo(n,e),r!=null&&i.unshift(Ro(n,r,a)),r=xo(n,t),r!=null&&i.push(Ro(n,r,a))),n.tag===3)return i;n=n.return}return[]}function Ba(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Lm(n,t,e,i,r){for(var a=t._reactName,s=[];e!==null&&e!==i;){var o=e,u=o.alternate,c=o.stateNode;if(o=o.tag,u!==null&&u===i)break;o!==5&&o!==26&&o!==27||c===null||(u=c,r?(c=xo(e,a),c!=null&&s.unshift(Ro(e,c,u))):r||(c=xo(e,a),c!=null&&s.push(Ro(e,c,u)))),e=e.return}s.length!==0&&n.push({event:t,listeners:s})}var Nw=/\r\n?/g,xw=/\u0000|\uFFFD/g;function Jm(n){return(typeof n=="string"?n:""+n).replace(Nw,`
`).replace(xw,"")}function z0(n,t){return t=Jm(t),Jm(n)===t}function Ec(){}function at(n,t,e,i,r,a){switch(e){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ds(n,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ds(n,""+i);break;case"className":wl(n,"class",i);break;case"tabIndex":wl(n,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":wl(n,e,i);break;case"style":zp(n,i,a);break;case"data":if(t!=="object"){wl(n,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||e!=="href")){n.removeAttribute(e);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){n.removeAttribute(e);break}i=Hl(""+i),n.setAttribute(e,i);break;case"action":case"formAction":if(typeof i=="function"){n.setAttribute(e,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(e==="formAction"?(t!=="input"&&at(n,t,"name",r.name,r,null),at(n,t,"formEncType",r.formEncType,r,null),at(n,t,"formMethod",r.formMethod,r,null),at(n,t,"formTarget",r.formTarget,r,null)):(at(n,t,"encType",r.encType,r,null),at(n,t,"method",r.method,r,null),at(n,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){n.removeAttribute(e);break}i=Hl(""+i),n.setAttribute(e,i);break;case"onClick":i!=null&&(n.onclick=Ec);break;case"onScroll":i!=null&&G("scroll",n);break;case"onScrollEnd":i!=null&&G("scrollend",n);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(N(61));if(e=i.__html,e!=null){if(r.children!=null)throw Error(N(60));n.innerHTML=e}}break;case"multiple":n.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":n.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){n.removeAttribute("xlink:href");break}e=Hl(""+i),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(e,""+i):n.removeAttribute(e);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(e,""):n.removeAttribute(e);break;case"capture":case"download":i===!0?n.setAttribute(e,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(e,i):n.removeAttribute(e);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?n.setAttribute(e,i):n.removeAttribute(e);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?n.removeAttribute(e):n.setAttribute(e,i);break;case"popover":G("beforetoggle",n),G("toggle",n),Pl(n,"popover",i);break;case"xlinkActuate":In(n,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":In(n,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":In(n,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":In(n,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":In(n,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":In(n,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":In(n,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":In(n,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":In(n,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Pl(n,"is",i);break;case"innerText":case"textContent":break;default:(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(e=nT.get(e)||e,Pl(n,e,i))}}function ch(n,t,e,i,r,a){switch(e){case"style":zp(n,i,a);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(N(61));if(e=i.__html,e!=null){if(r.children!=null)throw Error(N(60));n.innerHTML=e}}break;case"children":typeof i=="string"?ds(n,i):(typeof i=="number"||typeof i=="bigint")&&ds(n,""+i);break;case"onScroll":i!=null&&G("scroll",n);break;case"onScrollEnd":i!=null&&G("scrollend",n);break;case"onClick":i!=null&&(n.onclick=Ec);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Op.hasOwnProperty(e))t:{if(e[0]==="o"&&e[1]==="n"&&(r=e.endsWith("Capture"),t=e.slice(2,r?e.length-7:void 0),a=n[le]||null,a=a!=null?a[e]:null,typeof a=="function"&&n.removeEventListener(t,a,r),typeof i=="function")){typeof a!="function"&&a!==null&&(e in n?n[e]=null:n.hasAttribute(e)&&n.removeAttribute(e)),n.addEventListener(t,i,r);break t}e in n?n[e]=i:i===!0?n.setAttribute(e,""):Pl(n,e,i)}}}function Gt(n,t,e){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":G("error",n),G("load",n);var i=!1,r=!1,a;for(a in e)if(e.hasOwnProperty(a)){var s=e[a];if(s!=null)switch(a){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(N(137,t));default:at(n,t,a,s,e,null)}}r&&at(n,t,"srcSet",e.srcSet,e,null),i&&at(n,t,"src",e.src,e,null);return;case"input":G("invalid",n);var o=a=s=r=null,u=null,c=null;for(i in e)if(e.hasOwnProperty(i)){var h=e[i];if(h!=null)switch(i){case"name":r=h;break;case"type":s=h;break;case"checked":u=h;break;case"defaultChecked":c=h;break;case"value":a=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(N(137,t));break;default:at(n,t,i,h,e,null)}}Ip(n,a,o,u,c,s,r,!1),uu(n);return;case"select":G("invalid",n),i=s=a=null;for(r in e)if(e.hasOwnProperty(r)&&(o=e[r],o!=null))switch(r){case"value":a=o;break;case"defaultValue":s=o;break;case"multiple":i=o;default:at(n,t,r,o,e,null)}t=a,e=s,n.multiple=!!i,t!=null?ns(n,!!i,t,!1):e!=null&&ns(n,!!i,e,!0);return;case"textarea":G("invalid",n),a=r=i=null;for(s in e)if(e.hasOwnProperty(s)&&(o=e[s],o!=null))switch(s){case"value":i=o;break;case"defaultValue":r=o;break;case"children":a=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(N(91));break;default:at(n,t,s,o,e,null)}Rp(n,i,r,a),uu(n);return;case"option":for(u in e)if(e.hasOwnProperty(u)&&(i=e[u],i!=null))switch(u){case"selected":n.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:at(n,t,u,i,e,null)}return;case"dialog":G("beforetoggle",n),G("toggle",n),G("cancel",n),G("close",n);break;case"iframe":case"object":G("load",n);break;case"video":case"audio":for(i=0;i<Bo.length;i++)G(Bo[i],n);break;case"image":G("error",n),G("load",n);break;case"details":G("toggle",n);break;case"embed":case"source":case"link":G("error",n),G("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in e)if(e.hasOwnProperty(c)&&(i=e[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(N(137,t));default:at(n,t,c,i,e,null)}return;default:if(vd(t)){for(h in e)e.hasOwnProperty(h)&&(i=e[h],i!==void 0&&ch(n,t,h,i,e,void 0));return}}for(o in e)e.hasOwnProperty(o)&&(i=e[o],i!=null&&at(n,t,o,i,e,null))}function Dw(n,t,e,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,a=null,s=null,o=null,u=null,c=null,h=null;for(g in e){var m=e[g];if(e.hasOwnProperty(g)&&m!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":u=m;default:i.hasOwnProperty(g)||at(n,t,g,null,i,m)}}for(var d in i){var g=i[d];if(m=e[d],i.hasOwnProperty(d)&&(g!=null||m!=null))switch(d){case"type":a=g;break;case"name":r=g;break;case"checked":c=g;break;case"defaultChecked":h=g;break;case"value":s=g;break;case"defaultValue":o=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(N(137,t));break;default:g!==m&&at(n,t,d,g,i,m)}}zf(n,s,o,u,c,h,a,r);return;case"select":g=s=o=d=null;for(a in e)if(u=e[a],e.hasOwnProperty(a)&&u!=null)switch(a){case"value":break;case"multiple":g=u;default:i.hasOwnProperty(a)||at(n,t,a,null,i,u)}for(r in i)if(a=i[r],u=e[r],i.hasOwnProperty(r)&&(a!=null||u!=null))switch(r){case"value":d=a;break;case"defaultValue":o=a;break;case"multiple":s=a;default:a!==u&&at(n,t,r,a,i,u)}t=o,e=s,i=g,d!=null?ns(n,!!e,d,!1):!!i!=!!e&&(t!=null?ns(n,!!e,t,!0):ns(n,!!e,e?[]:"",!1));return;case"textarea":g=d=null;for(o in e)if(r=e[o],e.hasOwnProperty(o)&&r!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:at(n,t,o,null,i,r)}for(s in i)if(r=i[s],a=e[s],i.hasOwnProperty(s)&&(r!=null||a!=null))switch(s){case"value":d=r;break;case"defaultValue":g=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(N(91));break;default:r!==a&&at(n,t,s,r,i,a)}Bp(n,d,g);return;case"option":for(var T in e)if(d=e[T],e.hasOwnProperty(T)&&d!=null&&!i.hasOwnProperty(T))switch(T){case"selected":n.selected=!1;break;default:at(n,t,T,null,i,d)}for(u in i)if(d=i[u],g=e[u],i.hasOwnProperty(u)&&d!==g&&(d!=null||g!=null))switch(u){case"selected":n.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:at(n,t,u,d,i,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var A in e)d=e[A],e.hasOwnProperty(A)&&d!=null&&!i.hasOwnProperty(A)&&at(n,t,A,null,i,d);for(c in i)if(d=i[c],g=e[c],i.hasOwnProperty(c)&&d!==g&&(d!=null||g!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(N(137,t));break;default:at(n,t,c,d,i,g)}return;default:if(vd(t)){for(var x in e)d=e[x],e.hasOwnProperty(x)&&d!==void 0&&!i.hasOwnProperty(x)&&ch(n,t,x,void 0,i,d);for(h in i)d=i[h],g=e[h],!i.hasOwnProperty(h)||d===g||d===void 0&&g===void 0||ch(n,t,h,d,i,g);return}}for(var p in e)d=e[p],e.hasOwnProperty(p)&&d!=null&&!i.hasOwnProperty(p)&&at(n,t,p,null,i,d);for(m in i)d=i[m],g=e[m],!i.hasOwnProperty(m)||d===g||d==null&&g==null||at(n,t,m,d,i,g)}var fh=null,hh=null;function ku(n){return n.nodeType===9?n:n.ownerDocument}function qm(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function M0(n,t){if(n===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&t==="foreignObject"?0:n}function dh(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pf=null;function Ow(){var n=window.event;return n&&n.type==="popstate"?n===pf?!1:(pf=n,!0):(pf=null,!1)}var U0=typeof setTimeout=="function"?setTimeout:void 0,kw=typeof clearTimeout=="function"?clearTimeout:void 0,Pm=typeof Promise=="function"?Promise:void 0,Cw=typeof queueMicrotask=="function"?queueMicrotask:typeof Pm<"u"?function(n){return Pm.resolve(null).then(n).catch(Iw)}:U0;function Iw(n){setTimeout(function(){throw n})}function Qr(n){return n==="head"}function Hm(n,t){var e=t,i=0,r=0;do{var a=e.nextSibling;if(n.removeChild(e),a&&a.nodeType===8)if(e=a.data,e==="/$"){if(0<i&&8>i){e=i;var s=n.ownerDocument;if(e&1&&po(s.documentElement),e&2&&po(s.body),e&4)for(e=s.head,po(e),s=e.firstChild;s;){var o=s.nextSibling,u=s.nodeName;s[Wo]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&s.rel.toLowerCase()==="stylesheet"||e.removeChild(s),s=o}}if(r===0){n.removeChild(a),Jo(t);return}r--}else e==="$"||e==="$?"||e==="$!"?r++:i=e.charCodeAt(0)-48;else i=0;e=a}while(e);Jo(t)}function gh(n){var t=n.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var e=t;switch(t=t.nextSibling,e.nodeName){case"HTML":case"HEAD":case"BODY":gh(e),pd(e);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(e.rel.toLowerCase()==="stylesheet")continue}n.removeChild(e)}}function Bw(n,t,e,i){for(;n.nodeType===1;){var r=e;if(n.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(i){if(!n[Wo])switch(t){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(a=n.getAttribute("rel"),a==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(a!==r.rel||n.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||n.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||n.getAttribute("title")!==(r.title==null?null:r.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(a=n.getAttribute("src"),(a!==(r.src==null?null:r.src)||n.getAttribute("type")!==(r.type==null?null:r.type)||n.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&a&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(t==="input"&&n.type==="hidden"){var a=r.name==null?null:""+r.name;if(r.type==="hidden"&&n.getAttribute("name")===a)return n}else return n;if(n=an(n.nextSibling),n===null)break}return null}function Rw(n,t,e){if(t==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!e||(n=an(n.nextSibling),n===null))return null;return n}function mh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function zw(n,t){var e=n.ownerDocument;if(n.data!=="$?"||e.readyState==="complete")t();else{var i=function(){t(),e.removeEventListener("DOMContentLoaded",i)};e.addEventListener("DOMContentLoaded",i),n._reactRetry=i}}function an(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return n}var yh=null;function Vm(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return n;t--}else e==="/$"&&t++}n=n.previousSibling}return null}function L0(n,t,e){switch(t=ku(e),n){case"html":if(n=t.documentElement,!n)throw Error(N(452));return n;case"head":if(n=t.head,!n)throw Error(N(453));return n;case"body":if(n=t.body,!n)throw Error(N(454));return n;default:throw Error(N(451))}}function po(n){for(var t=n.attributes;t.length;)n.removeAttributeNode(t[0]);pd(n)}var Xe=new Map,Km=new Set;function Cu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var pr=et.d;et.d={f:Mw,r:Uw,D:Lw,C:Jw,L:qw,m:Pw,X:Vw,S:Hw,M:Kw};function Mw(){var n=pr.f(),t=Tc();return n||t}function Uw(n){var t=zs(n);t!==null&&t.tag===5&&t.type==="form"?Cv(t):pr.r(n)}var Ls=typeof document>"u"?null:document;function J0(n,t,e){var i=Ls;if(i&&typeof t=="string"&&t){var r=qe(t);r='link[rel="'+n+'"][href="'+r+'"]',typeof e=="string"&&(r+='[crossorigin="'+e+'"]'),Km.has(r)||(Km.add(r),n={rel:n,crossOrigin:e,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),Gt(t,"link",n),Jt(t),i.head.appendChild(t)))}}function Lw(n){pr.D(n),J0("dns-prefetch",n,null)}function Jw(n,t){pr.C(n,t),J0("preconnect",n,t)}function qw(n,t,e){pr.L(n,t,e);var i=Ls;if(i&&n&&t){var r='link[rel="preload"][as="'+qe(t)+'"]';t==="image"&&e&&e.imageSrcSet?(r+='[imagesrcset="'+qe(e.imageSrcSet)+'"]',typeof e.imageSizes=="string"&&(r+='[imagesizes="'+qe(e.imageSizes)+'"]')):r+='[href="'+qe(n)+'"]';var a=r;switch(t){case"style":a=Ts(n);break;case"script":a=Js(n)}Xe.has(a)||(n=ht({rel:"preload",href:t==="image"&&e&&e.imageSrcSet?void 0:n,as:t},e),Xe.set(a,n),i.querySelector(r)!==null||t==="style"&&i.querySelector(ul(a))||t==="script"&&i.querySelector(cl(a))||(t=i.createElement("link"),Gt(t,"link",n),Jt(t),i.head.appendChild(t)))}}function Pw(n,t){pr.m(n,t);var e=Ls;if(e&&n){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+qe(i)+'"][href="'+qe(n)+'"]',a=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Js(n)}if(!Xe.has(a)&&(n=ht({rel:"modulepreload",href:n},t),Xe.set(a,n),e.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(e.querySelector(cl(a)))return}i=e.createElement("link"),Gt(i,"link",n),Jt(i),e.head.appendChild(i)}}}function Hw(n,t,e){pr.S(n,t,e);var i=Ls;if(i&&n){var r=es(i).hoistableStyles,a=Ts(n);t=t||"default";var s=r.get(a);if(!s){var o={loading:0,preload:null};if(s=i.querySelector(ul(a)))o.loading=5;else{n=ht({rel:"stylesheet",href:n,"data-precedence":t},e),(e=Xe.get(a))&&tg(n,e);var u=s=i.createElement("link");Jt(u),Gt(u,"link",n),u._p=new Promise(function(c,h){u.onload=c,u.onerror=h}),u.addEventListener("load",function(){o.loading|=1}),u.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Zl(s,t,i)}s={type:"stylesheet",instance:s,count:1,state:o},r.set(a,s)}}}function Vw(n,t){pr.X(n,t);var e=Ls;if(e&&n){var i=es(e).hoistableScripts,r=Js(n),a=i.get(r);a||(a=e.querySelector(cl(r)),a||(n=ht({src:n,async:!0},t),(t=Xe.get(r))&&eg(n,t),a=e.createElement("script"),Jt(a),Gt(a,"link",n),e.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(r,a))}}function Kw(n,t){pr.M(n,t);var e=Ls;if(e&&n){var i=es(e).hoistableScripts,r=Js(n),a=i.get(r);a||(a=e.querySelector(cl(r)),a||(n=ht({src:n,async:!0,type:"module"},t),(t=Xe.get(r))&&eg(n,t),a=e.createElement("script"),Jt(a),Gt(a,"link",n),e.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(r,a))}}function jm(n,t,e,i){var r=(r=Mr.current)?Cu(r):null;if(!r)throw Error(N(446));switch(n){case"meta":case"title":return null;case"style":return typeof e.precedence=="string"&&typeof e.href=="string"?(t=Ts(e.href),e=es(r).hoistableStyles,i=e.get(t),i||(i={type:"style",instance:null,count:0,state:null},e.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(e.rel==="stylesheet"&&typeof e.href=="string"&&typeof e.precedence=="string"){n=Ts(e.href);var a=es(r).hoistableStyles,s=a.get(n);if(s||(r=r.ownerDocument||r,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(n,s),(a=r.querySelector(ul(n)))&&!a._p&&(s.instance=a,s.state.loading=5),Xe.has(n)||(e={rel:"preload",as:"style",href:e.href,crossOrigin:e.crossOrigin,integrity:e.integrity,media:e.media,hrefLang:e.hrefLang,referrerPolicy:e.referrerPolicy},Xe.set(n,e),a||jw(r,n,e,s.state))),t&&i===null)throw Error(N(528,""));return s}if(t&&i!==null)throw Error(N(529,""));return null;case"script":return t=e.async,e=e.src,typeof e=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Js(e),e=es(r).hoistableScripts,i=e.get(t),i||(i={type:"script",instance:null,count:0,state:null},e.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(N(444,n))}}function Ts(n){return'href="'+qe(n)+'"'}function ul(n){return'link[rel="stylesheet"]['+n+"]"}function q0(n){return ht({},n,{"data-precedence":n.precedence,precedence:null})}function jw(n,t,e,i){n.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=n.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Gt(t,"link",e),Jt(t),n.head.appendChild(t))}function Js(n){return'[src="'+qe(n)+'"]'}function cl(n){return"script[async]"+n}function $m(n,t,e){if(t.count++,t.instance===null)switch(t.type){case"style":var i=n.querySelector('style[data-href~="'+qe(e.href)+'"]');if(i)return t.instance=i,Jt(i),i;var r=ht({},e,{"data-href":e.href,"data-precedence":e.precedence,href:null,precedence:null});return i=(n.ownerDocument||n).createElement("style"),Jt(i),Gt(i,"style",r),Zl(i,e.precedence,n),t.instance=i;case"stylesheet":r=Ts(e.href);var a=n.querySelector(ul(r));if(a)return t.state.loading|=4,t.instance=a,Jt(a),a;i=q0(e),(r=Xe.get(r))&&tg(i,r),a=(n.ownerDocument||n).createElement("link"),Jt(a);var s=a;return s._p=new Promise(function(o,u){s.onload=o,s.onerror=u}),Gt(a,"link",i),t.state.loading|=4,Zl(a,e.precedence,n),t.instance=a;case"script":return a=Js(e.src),(r=n.querySelector(cl(a)))?(t.instance=r,Jt(r),r):(i=e,(r=Xe.get(a))&&(i=ht({},e),eg(i,r)),n=n.ownerDocument||n,r=n.createElement("script"),Jt(r),Gt(r,"link",i),n.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(N(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,Zl(i,e.precedence,n));return t.instance}function Zl(n,t,e){for(var i=e.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,a=r,s=0;s<i.length;s++){var o=i[s];if(o.dataset.precedence===t)a=o;else if(a!==r)break}a?a.parentNode.insertBefore(n,a.nextSibling):(t=e.nodeType===9?e.head:e,t.insertBefore(n,t.firstChild))}function tg(n,t){n.crossOrigin==null&&(n.crossOrigin=t.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=t.referrerPolicy),n.title==null&&(n.title=t.title)}function eg(n,t){n.crossOrigin==null&&(n.crossOrigin=t.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=t.referrerPolicy),n.integrity==null&&(n.integrity=t.integrity)}var Ql=null;function Gm(n,t,e){if(Ql===null){var i=new Map,r=Ql=new Map;r.set(e,i)}else r=Ql,i=r.get(e),i||(i=new Map,r.set(e,i));if(i.has(n))return i;for(i.set(n,null),e=e.getElementsByTagName(n),r=0;r<e.length;r++){var a=e[r];if(!(a[Wo]||a[Xt]||n==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var s=a.getAttribute(t)||"";s=n+s;var o=i.get(s);o?o.push(a):i.set(s,[a])}}return i}function Ym(n,t,e){n=n.ownerDocument||n,n.head.insertBefore(e,t==="title"?n.querySelector("head > title"):null)}function $w(n,t,e){if(e===1||t.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return n=t.disabled,typeof t.precedence=="string"&&n==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function P0(n){return!(n.type==="stylesheet"&&!(n.state.loading&3))}var zo=null;function Gw(){}function Yw(n,t,e){if(zo===null)throw Error(N(475));var i=zo;if(t.type==="stylesheet"&&(typeof e.media!="string"||matchMedia(e.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=Ts(e.href),a=n.querySelector(ul(r));if(a){n=a._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(i.count++,i=Iu.bind(i),n.then(i,i)),t.state.loading|=4,t.instance=a,Jt(a);return}a=n.ownerDocument||n,e=q0(e),(r=Xe.get(r))&&tg(e,r),a=a.createElement("link"),Jt(a);var s=a;s._p=new Promise(function(o,u){s.onload=o,s.onerror=u}),Gt(a,"link",e),t.instance=a}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,n),(n=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Iu.bind(i),n.addEventListener("load",t),n.addEventListener("error",t))}}function Xw(){if(zo===null)throw Error(N(475));var n=zo;return n.stylesheets&&n.count===0&&ph(n,n.stylesheets),0<n.count?function(t){var e=setTimeout(function(){if(n.stylesheets&&ph(n,n.stylesheets),n.unsuspend){var i=n.unsuspend;n.unsuspend=null,i()}},6e4);return n.unsuspend=t,function(){n.unsuspend=null,clearTimeout(e)}}:null}function Iu(){if(this.count--,this.count===0){if(this.stylesheets)ph(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Bu=null;function ph(n,t){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Bu=new Map,t.forEach(Fw,n),Bu=null,Iu.call(n))}function Fw(n,t){if(!(t.state.loading&4)){var e=Bu.get(n);if(e)var i=e.get(null);else{e=new Map,Bu.set(n,e);for(var r=n.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<r.length;a++){var s=r[a];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(e.set(s.dataset.precedence,s),i=s)}i&&e.set(null,i)}r=t.instance,s=r.getAttribute("data-precedence"),a=e.get(s)||i,a===i&&e.set(null,r),e.set(s,r),this.count++,i=Iu.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),a?a.parentNode.insertBefore(r,a.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(r,n.firstChild)),t.state.loading|=4}}var Mo={$$typeof:Wi,Provider:null,Consumer:null,_currentValue:ca,_currentValue2:ca,_threadCount:0};function Zw(n,t,e,i,r,a,s,o){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jc(0),this.hiddenUpdates=Jc(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function H0(n,t,e,i,r,a,s,o,u,c,h,m){return n=new Zw(n,t,e,s,o,u,c,m),t=1,a===!0&&(t|=24),a=me(3,null,null,t),n.current=a,a.stateNode=n,t=kd(),t.refCount++,n.pooledCache=t,t.refCount++,a.memoizedState={element:i,isDehydrated:e,cache:t},Id(a),n}function V0(n){return n?(n=Za,n):Za}function K0(n,t,e,i,r,a){r=V0(r),i.context===null?i.context=r:i.pendingContext=r,i=Ur(t),i.payload={element:e},a=a===void 0?null:a,a!==null&&(i.callback=a),e=Lr(n,i,t),e!==null&&(Te(e,n,t),lo(e,n,t))}function Xm(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function ng(n,t){Xm(n,t),(n=n.alternate)&&Xm(n,t)}function j0(n){if(n.tag===13){var t=Ms(n,67108864);t!==null&&Te(t,n,67108864),ng(n,67108864)}}var Ru=!0;function Qw(n,t,e,i){var r=q.T;q.T=null;var a=et.p;try{et.p=2,ig(n,t,e,i)}finally{et.p=a,q.T=r}}function _w(n,t,e,i){var r=q.T;q.T=null;var a=et.p;try{et.p=8,ig(n,t,e,i)}finally{et.p=a,q.T=r}}function ig(n,t,e,i){if(Ru){var r=vh(i);if(r===null)yf(n,t,i,zu,e),Fm(n,i);else if(t1(r,n,t,e,i))i.stopPropagation();else if(Fm(n,i),t&4&&-1<Ww.indexOf(n)){for(;r!==null;){var a=zs(r);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var s=na(a.pendingLanes);if(s!==0){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var u=1<<31-Se(s);o.entanglements[1]|=u,s&=~u}Cn(a),!(rt&6)&&(Eu=Tn()+500,ll(0))}}break;case 13:o=Ms(a,2),o!==null&&Te(o,a,2),Tc(),ng(a,2)}if(a=vh(i),a===null&&yf(n,t,i,zu,e),a===r)break;r=a}r!==null&&i.stopPropagation()}else yf(n,t,i,null,e)}}function vh(n){return n=Sd(n),rg(n)}var zu=null;function rg(n){if(zu=null,n=ja(n),n!==null){var t=Fo(n);if(t===null)n=null;else{var e=t.tag;if(e===13){if(n=mp(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null)}}return zu=n,null}function $0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Jb()){case Sp:return 2;case bp:return 8;case lu:case qb:return 32;case Tp:return 268435456;default:return 32}default:return 32}}var Sh=!1,Pr=null,Hr=null,Vr=null,Uo=new Map,Lo=new Map,kr=[],Ww="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fm(n,t){switch(n){case"focusin":case"focusout":Pr=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":Uo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lo.delete(t.pointerId)}}function Gs(n,t,e,i,r,a){return n===null||n.nativeEvent!==a?(n={blockedOn:t,domEventName:e,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},t!==null&&(t=zs(t),t!==null&&j0(t)),n):(n.eventSystemFlags|=i,t=n.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),n)}function t1(n,t,e,i,r){switch(t){case"focusin":return Pr=Gs(Pr,n,t,e,i,r),!0;case"dragenter":return Hr=Gs(Hr,n,t,e,i,r),!0;case"mouseover":return Vr=Gs(Vr,n,t,e,i,r),!0;case"pointerover":var a=r.pointerId;return Uo.set(a,Gs(Uo.get(a)||null,n,t,e,i,r)),!0;case"gotpointercapture":return a=r.pointerId,Lo.set(a,Gs(Lo.get(a)||null,n,t,e,i,r)),!0}return!1}function G0(n){var t=ja(n.target);if(t!==null){var e=Fo(t);if(e!==null){if(t=e.tag,t===13){if(t=mp(e),t!==null){n.blockedOn=t,Yb(n.priority,function(){if(e.tag===13){var i=be();i=md(i);var r=Ms(e,i);r!==null&&Te(r,e,i),ng(e,i)}});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function _l(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=vh(n.nativeEvent);if(e===null){e=n.nativeEvent;var i=new e.constructor(e.type,e);Uf=i,e.target.dispatchEvent(i),Uf=null}else return t=zs(e),t!==null&&j0(t),n.blockedOn=e,!1;t.shift()}return!0}function Zm(n,t,e){_l(n)&&e.delete(t)}function e1(){Sh=!1,Pr!==null&&_l(Pr)&&(Pr=null),Hr!==null&&_l(Hr)&&(Hr=null),Vr!==null&&_l(Vr)&&(Vr=null),Uo.forEach(Zm),Lo.forEach(Zm)}function Cl(n,t){n.blockedOn===t&&(n.blockedOn=null,Sh||(Sh=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,e1)))}var Il=null;function Qm(n){Il!==n&&(Il=n,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,function(){Il===n&&(Il=null);for(var t=0;t<n.length;t+=3){var e=n[t],i=n[t+1],r=n[t+2];if(typeof i!="function"){if(rg(i||e)===null)continue;break}var a=zs(e);a!==null&&(n.splice(t,3),t-=3,_f(a,{pending:!0,data:r,method:e.method,action:i},i,r))}}))}function Jo(n){function t(u){return Cl(u,n)}Pr!==null&&Cl(Pr,n),Hr!==null&&Cl(Hr,n),Vr!==null&&Cl(Vr,n),Uo.forEach(t),Lo.forEach(t);for(var e=0;e<kr.length;e++){var i=kr[e];i.blockedOn===n&&(i.blockedOn=null)}for(;0<kr.length&&(e=kr[0],e.blockedOn===null);)G0(e),e.blockedOn===null&&kr.shift();if(e=(n.ownerDocument||n).$$reactFormReplay,e!=null)for(i=0;i<e.length;i+=3){var r=e[i],a=e[i+1],s=r[le]||null;if(typeof a=="function")s||Qm(e);else if(s){var o=null;if(a&&a.hasAttribute("formAction")){if(r=a,s=a[le]||null)o=s.formAction;else if(rg(r)!==null)continue}else o=s.action;typeof o=="function"?e[i+1]=o:(e.splice(i,3),i-=3),Qm(e)}}}function ag(n){this._internalRoot=n}Nc.prototype.render=ag.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(N(409));var e=t.current,i=be();K0(e,i,n,t,null,null)};Nc.prototype.unmount=ag.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;K0(n.current,2,null,n,null,null),Tc(),t[Rs]=null}};function Nc(n){this._internalRoot=n}Nc.prototype.unstable_scheduleHydration=function(n){if(n){var t=xp();n={blockedOn:null,target:n,priority:t};for(var e=0;e<kr.length&&t!==0&&t<kr[e].priority;e++);kr.splice(e,0,n),e===0&&G0(n)}};var _m=dp.version;if(_m!=="19.1.0")throw Error(N(527,_m,"19.1.0"));et.findDOMNode=function(n){var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(N(188)):(n=Object.keys(n).join(","),Error(N(268,n)));return n=Ib(t),n=n!==null?yp(n):null,n=n===null?null:n.stateNode,n};var n1={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{Zo=Bl.inject(n1),ve=Bl}catch{}}uc.createRoot=function(n,t){if(!gp(n))throw Error(N(299));var e=!1,i="",r=Hv,a=Vv,s=Kv,o=null;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(s=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(o=t.unstable_transitionCallbacks)),t=H0(n,1,!1,null,null,e,i,r,a,s,o,null),n[Rs]=t.current,Wd(n),new ag(t)};uc.hydrateRoot=function(n,t,e){if(!gp(n))throw Error(N(299));var i=!1,r="",a=Hv,s=Vv,o=Kv,u=null,c=null;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onUncaughtError!==void 0&&(a=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(u=e.unstable_transitionCallbacks),e.formState!==void 0&&(c=e.formState)),t=H0(n,1,!0,t,e??null,i,r,a,s,o,u,c),t.context=V0(null),e=t.current,i=be(),i=md(i),r=Ur(i),r.callback=null,Lr(e,r,i),e=i,t.current.lanes=e,_o(t,e),Cn(t),n[Rs]=t.current,Wd(n),new Nc(t)};uc.version="19.1.0";function Y0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Y0)}catch(n){console.error(n)}}Y0(),tp.exports=uc;var i1=tp.exports;const r1=Qy(i1),a1=n=>{const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},e=/[&<>"'/]/gi;return n.replace(e,i=>t[i])};function X0({onSave:n,placeholder:t}){const[e,i]=ct.useState("");return W.jsx("input",{className:"new-todo",type:"text",placeholder:t,value:e,onChange:r=>{i(r.target.value)},onKeyDown:r=>{r.key==="Enter"&&(n(a1(e.trim())),i(""))}})}function s1({dispatch:n}){const t=e=>{n({type:"ADDED_TODO",payload:{text:e}})};return W.jsxs("header",{className:"header",children:[W.jsx("h1",{children:"todos"}),W.jsx(X0,{onSave:e=>{e.length!==0&&t(e)},placeholder:"What needs to be done?"})]})}var F0={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var t={}.hasOwnProperty;function e(){for(var a="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(a=r(a,i(o)))}return a}function i(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return e.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var s="";for(var o in a)t.call(a,o)&&a[o]&&(s=r(s,o));return s}function r(a,s){return s?a?a+" "+s:a+s:a}n.exports?(e.default=e,n.exports=e):window.classNames=e})()})(F0);var o1=F0.exports;const Z0=Qy(o1),Wm={SHOW_ALL:"All",SHOW_ACTIVE:"Active",SHOW_COMPLETED:"Completed"};function l1({completedCount:n,activeCount:t,filter:e,onClearCompleted:i,onShow:r}){return W.jsxs("footer",{className:"footer",children:[W.jsxs("span",{className:"todo-count",children:[W.jsx("strong",{children:t||"No"})," ",t===1?"item":"items"," left"]}),W.jsx("ul",{className:"filters",children:Object.keys(Wm).map(a=>W.jsx("li",{children:W.jsx("button",{type:"button",className:Z0({selected:a===e}),style:{cursor:"pointer"},onClick:()=>r(a),children:Wm[a]})},a))}),!!n&&W.jsx("button",{type:"button",className:"clear-completed",onClick:i,children:"Clear completed"})]})}function u1({todo:n,dispatch:t}){const[e,i]=ct.useState(!1),r=o=>{t({type:"DELETED_TODO",payload:{id:o}})},a=(o,u)=>{t({type:"EDITED_TODO",payload:{id:o,text:u}})},s=o=>{t({type:"COMPLETED_TODO",payload:{id:o}})};return W.jsx("li",{className:Z0({completed:n.completed,editing:e}),children:e?W.jsx(X0,{editing:e,onSave:o=>{o.length===0?r(n.id):a(n.id,o),i(!1)}}):W.jsxs("div",{className:"view",children:[W.jsx("input",{id:`item-input-${n.id}`,className:"toggle",type:"checkbox",checked:n.completed,onChange:()=>s(n.id)}),W.jsx("label",{htmlFor:`item-input-${n.id}`,onDoubleClick:()=>i(!0),children:n.text}),W.jsx("button",{type:"button","aria-label":"Delete",className:"destroy",onClick:()=>r(n.id)})]})})}const c1={SHOW_ALL:()=>!0,SHOW_ACTIVE:n=>!n.completed,SHOW_COMPLETED:n=>n.completed};function f1({todos:n,dispatch:t}){const[e,i]=ct.useState("SHOW_ALL"),r=n.filter(c1[e]),a=n.filter(c=>c.completed).length,s=n.length-a,o=()=>t({type:"CLEARED_COMPLETED"}),u=()=>t({type:"TOGGLED_ALL"});return n.length===0?null:W.jsxs("section",{className:"main",children:[r.length>0?W.jsxs("div",{className:"toggle-all-container",children:[W.jsx("input",{className:"toggle-all",type:"checkbox",id:"toggle-all",checked:a===n.length,onChange:u}),W.jsx("label",{className:"toggle-all-label",htmlFor:"toggle-all",children:"Mark all as complete"})]}):null,W.jsx("ul",{className:"todo-list",children:r.map(c=>W.jsx(u1,{todo:c,dispatch:t},c.id))}),W.jsx(l1,{completedCount:a,activeCount:s,filter:e,onClearCompleted:o,onShow:i})]})}function h1(n,t){switch(t.type){case"ADDED_TODO":{const{text:e}=t.payload;n.todos.push({id:crypto.randomUUID(),completed:!1,text:e});break}case"DELETED_TODO":{const{id:e}=t.payload;n.todos=n.todos.filter(i=>i.id!==e);break}case"EDITED_TODO":{const{id:e,text:i}=t.payload;n.todos.forEach(r=>{r.id===e&&(r.text=i)});break}case"COMPLETED_TODO":{const{id:e}=t.payload;n.todos.forEach(i=>{i.id===e&&(i.completed=!i.completed)});break}case"CLEARED_COMPLETED":{n.todos=n.todos.filter(e=>!e.completed);break}case"TOGGLED_ALL":{const e=n.todos.every(i=>i.completed);n.todos.forEach(i=>{i.completed=!e});break}}}var X;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(X||(X={}));function ty(n){const t=X[n];return typeof t!="string"?n.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,e=>"_"+e.toLowerCase())}class ot extends Error{constructor(t,e=X.Unknown,i,r,a){super(d1(t,e)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=t,this.code=e,this.metadata=new Headers(i??{}),this.details=r??[],this.cause=a}static from(t,e=X.Unknown){return t instanceof ot?t:t instanceof Error?t.name=="AbortError"?new ot(t.message,X.Canceled):new ot(t.message,e,void 0,void 0,t):new ot(String(t),e,void 0,void 0,t)}static[Symbol.hasInstance](t){return t instanceof Error?Object.getPrototypeOf(t)===ot.prototype?!0:t.name==="ConnectError"&&"code"in t&&typeof t.code=="number"&&"metadata"in t&&"details"in t&&Array.isArray(t.details)&&"rawMessage"in t&&typeof t.rawMessage=="string"&&"cause"in t:!1}findDetails(t){const e="typeName"in t?{findMessage:r=>r===t.typeName?t:void 0}:t,i=[];for(const r of this.details){if("getType"in r){e.findMessage(r.getType().typeName)&&i.push(r);continue}const a=e.findMessage(r.type);if(a)try{i.push(a.fromBinary(r.value))}catch{}}return i}}function d1(n,t){return n.length?`[${ty(t)}] ${n}`:`[${ty(t)}]`}function wt(n,t){if(!n)throw new Error(t)}const g1=34028234663852886e22,m1=-34028234663852886e22,y1=4294967295,p1=2147483647,v1=-2147483648;function Wl(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>p1||n<v1)throw new Error("invalid int 32: "+n)}function bh(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>y1||n<0)throw new Error("invalid uint 32: "+n)}function Q0(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>g1||n<m1))throw new Error("invalid float 32: "+n)}const _0=Symbol("@bufbuild/protobuf/enum-type");function S1(n){const t=n[_0];return wt(t,"missing enum type on enum object"),t}function W0(n,t,e,i){n[_0]=tS(t,e.map(r=>({no:r.no,name:r.name,localName:n[r.no]})))}function tS(n,t,e){const i=Object.create(null),r=Object.create(null),a=[];for(const s of t){const o=eS(s);a.push(o),i[s.name]=o,r[s.no]=o}return{typeName:n,values:a,findName(s){return i[s]},findNumber(s){return r[s]}}}function b1(n,t,e){const i={};for(const r of t){const a=eS(r);i[a.localName]=a.no,i[a.no]=a.localName}return W0(i,n,t),i}function eS(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class O{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,e){const i=this.getType(),r=i.runtime.bin,a=r.makeReadOptions(e);return r.readMessage(this,a.readerFactory(t),t.byteLength,a),this}fromJson(t,e){const i=this.getType(),r=i.runtime.json,a=r.makeReadOptions(e);return r.readMessage(i,t,a,this),this}fromJsonString(t,e){let i;try{i=JSON.parse(t)}catch(r){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${r instanceof Error?r.message:String(r)}`)}return this.fromJson(i,e)}toBinary(t){const e=this.getType(),i=e.runtime.bin,r=i.makeWriteOptions(t),a=r.writerFactory();return i.writeMessage(this,a,r),a.finish()}toJson(t){const e=this.getType(),i=e.runtime.json,r=i.makeWriteOptions(t);return i.writeMessage(this,r)}toJsonString(t){var e;const i=this.toJson(t);return JSON.stringify(i,null,(e=t==null?void 0:t.prettySpaces)!==null&&e!==void 0?e:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function T1(n,t,e,i){var r;const a=(r=i==null?void 0:i.localName)!==null&&r!==void 0?r:t.substring(t.lastIndexOf(".")+1),s={[a]:function(o){n.util.initFields(this),n.util.initPartial(o,this)}}[a];return Object.setPrototypeOf(s.prototype,new O),Object.assign(s,{runtime:n,typeName:t,fields:n.util.newFieldList(e),fromBinary(o,u){return new s().fromBinary(o,u)},fromJson(o,u){return new s().fromJson(o,u)},fromJsonString(o,u){return new s().fromJsonString(o,u)},equals(o,u){return n.util.equals(s,o,u)}}),s}function w1(){let n=0,t=0;for(let i=0;i<28;i+=7){let r=this.buf[this.pos++];if(n|=(r&127)<<i,!(r&128))return this.assertBounds(),[n,t]}let e=this.buf[this.pos++];if(n|=(e&15)<<28,t=(e&112)>>4,!(e&128))return this.assertBounds(),[n,t];for(let i=3;i<=31;i+=7){let r=this.buf[this.pos++];if(t|=(r&127)<<i,!(r&128))return this.assertBounds(),[n,t]}throw new Error("invalid varint")}function vf(n,t,e){for(let a=0;a<28;a=a+7){const s=n>>>a,o=!(!(s>>>7)&&t==0),u=(o?s|128:s)&255;if(e.push(u),!o)return}const i=n>>>28&15|(t&7)<<4,r=!!(t>>3);if(e.push((r?i|128:i)&255),!!r){for(let a=3;a<31;a=a+7){const s=t>>>a,o=!!(s>>>7),u=(o?s|128:s)&255;if(e.push(u),!o)return}e.push(t>>>31&1)}}const tu=4294967296;function ey(n){const t=n[0]==="-";t&&(n=n.slice(1));const e=1e6;let i=0,r=0;function a(s,o){const u=Number(n.slice(s,o));r*=e,i=i*e+u,i>=tu&&(r=r+(i/tu|0),i=i%tu)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),t?iS(i,r):sg(i,r)}function A1(n,t){let e=sg(n,t);const i=e.hi&2147483648;i&&(e=iS(e.lo,e.hi));const r=nS(e.lo,e.hi);return i?"-"+r:r}function nS(n,t){if({lo:n,hi:t}=E1(n,t),t<=2097151)return String(tu*t+n);const e=n&16777215,i=(n>>>24|t<<8)&16777215,r=t>>16&65535;let a=e+i*6777216+r*6710656,s=i+r*8147497,o=r*2;const u=1e7;return a>=u&&(s+=Math.floor(a/u),a%=u),s>=u&&(o+=Math.floor(s/u),s%=u),o.toString()+ny(s)+ny(a)}function E1(n,t){return{lo:n>>>0,hi:t>>>0}}function sg(n,t){return{lo:n|0,hi:t|0}}function iS(n,t){return t=~t,n?n=~n+1:t+=1,sg(n,t)}const ny=n=>{const t=String(n);return"0000000".slice(t.length)+t};function iy(n,t){if(n>=0){for(;n>127;)t.push(n&127|128),n=n>>>7;t.push(n)}else{for(let e=0;e<9;e++)t.push(n&127|128),n=n>>7;t.push(1)}}function N1(){let n=this.buf[this.pos++],t=n&127;if(!(n&128))return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<7,!(n&128))return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<14,!(n&128))return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<21,!(n&128))return this.assertBounds(),t;n=this.buf[this.pos++],t|=(n&15)<<28;for(let e=5;n&128&&e<10;e++)n=this.buf[this.pos++];if(n&128)throw new Error("invalid varint");return this.assertBounds(),t>>>0}var ry={};function x1(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof ry!="object"||ry.BUF_BIGINT_DISABLE!=="1")){const r=BigInt("-9223372036854775808"),a=BigInt("9223372036854775807"),s=BigInt("0"),o=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(u){const c=typeof u=="bigint"?u:BigInt(u);if(c>a||c<r)throw new Error(`int64 invalid: ${u}`);return c},uParse(u){const c=typeof u=="bigint"?u:BigInt(u);if(c>o||c<s)throw new Error(`uint64 invalid: ${u}`);return c},enc(u){return n.setBigInt64(0,this.parse(u),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(u){return n.setBigInt64(0,this.uParse(u),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(u,c){return n.setInt32(0,u,!0),n.setInt32(4,c,!0),n.getBigInt64(0,!0)},uDec(u,c){return n.setInt32(0,u,!0),n.setInt32(4,c,!0),n.getBigUint64(0,!0)}}}const e=r=>wt(/^-?[0-9]+$/.test(r),`int64 invalid: ${r}`),i=r=>wt(/^[0-9]+$/.test(r),`uint64 invalid: ${r}`);return{zero:"0",supported:!1,parse(r){return typeof r!="string"&&(r=r.toString()),e(r),r},uParse(r){return typeof r!="string"&&(r=r.toString()),i(r),r},enc(r){return typeof r!="string"&&(r=r.toString()),e(r),ey(r)},uEnc(r){return typeof r!="string"&&(r=r.toString()),i(r),ey(r)},dec(r,a){return A1(r,a)},uDec(r,a){return nS(r,a)}}}const Z=x1();var E;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(E||(E={}));var Fr;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(Fr||(Fr={}));function Tr(n,t,e){if(t===e)return!0;if(n==E.BYTES){if(!(t instanceof Uint8Array)||!(e instanceof Uint8Array)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}switch(n){case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return t==e}return!1}function ws(n,t){switch(n){case E.BOOL:return!1;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return t==0?Z.zero:"0";case E.DOUBLE:case E.FLOAT:return 0;case E.BYTES:return new Uint8Array(0);case E.STRING:return"";default:return 0}}function rS(n,t){switch(n){case E.BOOL:return t===!1;case E.STRING:return t==="";case E.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}var Dt;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(Dt||(Dt={}));class D1{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let r=0;r<this.chunks.length;r++)t+=this.chunks[r].length;let e=new Uint8Array(t),i=0;for(let r=0;r<this.chunks.length;r++)e.set(this.chunks[r],i),i+=this.chunks[r].length;return this.chunks=[],e}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),e=this.stack.pop();if(!e)throw new Error("invalid state, fork stack empty");return this.chunks=e.chunks,this.buf=e.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,e){return this.uint32((t<<3|e)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(bh(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return Wl(t),iy(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let e=this.textEncoder.encode(t);return this.uint32(e.byteLength),this.raw(e)}float(t){Q0(t);let e=new Uint8Array(4);return new DataView(e.buffer).setFloat32(0,t,!0),this.raw(e)}double(t){let e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,t,!0),this.raw(e)}fixed32(t){bh(t);let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t,!0),this.raw(e)}sfixed32(t){Wl(t);let e=new Uint8Array(4);return new DataView(e.buffer).setInt32(0,t,!0),this.raw(e)}sint32(t){return Wl(t),t=(t<<1^t>>31)>>>0,iy(t,this.buf),this}sfixed64(t){let e=new Uint8Array(8),i=new DataView(e.buffer),r=Z.enc(t);return i.setInt32(0,r.lo,!0),i.setInt32(4,r.hi,!0),this.raw(e)}fixed64(t){let e=new Uint8Array(8),i=new DataView(e.buffer),r=Z.uEnc(t);return i.setInt32(0,r.lo,!0),i.setInt32(4,r.hi,!0),this.raw(e)}int64(t){let e=Z.enc(t);return vf(e.lo,e.hi,this.buf),this}sint64(t){let e=Z.enc(t),i=e.hi>>31,r=e.lo<<1^i,a=(e.hi<<1|e.lo>>>31)^i;return vf(r,a,this.buf),this}uint64(t){let e=Z.uEnc(t);return vf(e.lo,e.hi,this.buf),this}}class O1{constructor(t,e){this.varint64=w1,this.uint32=N1,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=e??new TextDecoder}tag(){let t=this.uint32(),e=t>>>3,i=t&7;if(e<=0||i<0||i>5)throw new Error("illegal tag: field no "+e+" wire type "+i);return[e,i]}skip(t,e){let i=this.pos;switch(t){case Dt.Varint:for(;this.buf[this.pos++]&128;);break;case Dt.Bit64:this.pos+=4;case Dt.Bit32:this.pos+=4;break;case Dt.LengthDelimited:let r=this.uint32();this.pos+=r;break;case Dt.StartGroup:for(;;){const[a,s]=this.tag();if(s===Dt.EndGroup){if(e!==void 0&&a!==e)throw new Error("invalid end group tag");break}this.skip(s,a)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return Z.dec(...this.varint64())}uint64(){return Z.uDec(...this.varint64())}sint64(){let[t,e]=this.varint64(),i=-(t&1);return t=(t>>>1|(e&1)<<31)^i,e=e>>>1^i,Z.dec(t,e)}bool(){let[t,e]=this.varint64();return t!==0||e!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Z.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Z.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),e=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(e,e+t)}string(){return this.textDecoder.decode(this.bytes())}}function k1(n,t,e,i){let r;return{typeName:t,extendee:e,get field(){if(!r){const a=typeof i=="function"?i():i;a.name=t.split(".").pop(),a.jsonName=`[${t}]`,r=n.util.newFieldList([a]).list()[0]}return r},runtime:n}}function aS(n){const t=n.field.localName,e=Object.create(null);return e[t]=C1(n),[e,()=>e[t]]}function C1(n){const t=n.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return ws(t.T,t.L);case"message":const e=t.T,i=new e;return e.fieldWrapper?e.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}function I1(n,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let e=n.length-1;e>=0;--e)if(n[e].no==t.no)return[n[e]];return[]}return n.filter(e=>e.no===t.no)}let Qi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),xc=[];for(let n=0;n<Qi.length;n++)xc[Qi[n].charCodeAt(0)]=n;xc[45]=Qi.indexOf("+");xc[95]=Qi.indexOf("/");const og={dec(n){let t=n.length*3/4;n[n.length-2]=="="?t-=2:n[n.length-1]=="="&&(t-=1);let e=new Uint8Array(t),i=0,r=0,a,s=0;for(let o=0;o<n.length;o++){if(a=xc[n.charCodeAt(o)],a===void 0)switch(n[o]){case"=":r=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:s=a,r=1;break;case 1:e[i++]=s<<2|(a&48)>>4,s=a,r=2;break;case 2:e[i++]=(s&15)<<4|(a&60)>>2,s=a,r=3;break;case 3:e[i++]=(s&3)<<6|a,r=0;break}}if(r==1)throw Error("invalid base64 string.");return e.subarray(0,i)},enc(n){let t="",e=0,i,r=0;for(let a=0;a<n.length;a++)switch(i=n[a],e){case 0:t+=Qi[i>>2],r=(i&3)<<4,e=1;break;case 1:t+=Qi[r|i>>4],r=(i&15)<<2,e=2;break;case 2:t+=Qi[r|i>>6],t+=Qi[i&63],e=0;break}return e&&(t+=Qi[r],t+="=",e==1&&(t+="=")),t}};function B1(n,t,e){oS(t,n);const i=t.runtime.bin.makeReadOptions(e),r=I1(n.getType().runtime.bin.listUnknownFields(n),t.field),[a,s]=aS(t);for(const o of r)t.runtime.bin.readField(a,i.readerFactory(o.data),t.field,o.wireType,i);return s()}function R1(n,t,e,i){oS(t,n);const r=t.runtime.bin.makeReadOptions(i),a=t.runtime.bin.makeWriteOptions(i);if(sS(n,t)){const c=n.getType().runtime.bin.listUnknownFields(n).filter(h=>h.no!=t.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const h of c)n.getType().runtime.bin.onUnknownField(n,h.no,h.wireType,h.data)}const s=a.writerFactory();let o=t.field;!o.opt&&!o.repeated&&(o.kind=="enum"||o.kind=="scalar")&&(o=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(o,e,s,a);const u=r.readerFactory(s.finish());for(;u.pos<u.len;){const[c,h]=u.tag(),m=u.skip(h,c);n.getType().runtime.bin.onUnknownField(n,c,h,m)}}function sS(n,t){const e=n.getType();return t.extendee.typeName===e.typeName&&!!e.runtime.bin.listUnknownFields(n).find(i=>i.no==t.field.no)}function oS(n,t){wt(n.extendee.typeName==t.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function lS(n,t){const e=n.localName;if(n.repeated)return t[e].length>0;if(n.oneof)return t[n.oneof.localName].case===e;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?t[e]!==void 0:n.kind=="enum"?t[e]!==n.T.values[0].no:!rS(n.T,t[e]);case"message":return t[e]!==void 0;case"map":return Object.keys(t[e]).length>0}}function ay(n,t){const e=n.localName,i=!n.opt&&!n.req;if(n.repeated)t[e]=[];else if(n.oneof)t[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":t[e]={};break;case"enum":t[e]=i?n.T.values[0].no:void 0;break;case"scalar":t[e]=i?ws(n.T,n.L):void 0;break;case"message":t[e]=void 0;break}}function _i(n,t){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(O.prototype).every(i=>i in n&&typeof n[i]=="function"))return!1;const e=n.getType();return e===null||typeof e!="function"||!("typeName"in e)||typeof e.typeName!="string"?!1:t===void 0?!0:e.typeName==t.typeName}function uS(n,t){return _i(t)||!n.fieldWrapper?t:n.fieldWrapper.wrapField(t)}E.DOUBLE,E.FLOAT,E.INT64,E.UINT64,E.INT32,E.UINT32,E.BOOL,E.STRING,E.BYTES;const sy={ignoreUnknownFields:!1},oy={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function z1(n){return n?Object.assign(Object.assign({},sy),n):sy}function M1(n){return n?Object.assign(Object.assign({},oy),n):oy}const Mu=Symbol(),eu=Symbol();function U1(){return{makeReadOptions:z1,makeWriteOptions:M1,readMessage(n,t,e,i){if(t==null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${fn(t)}`);i=i??new n;const r=new Map,a=e.typeRegistry;for(const[s,o]of Object.entries(t)){const u=n.fields.findJsonName(s);if(u){if(u.oneof){if(o===null&&u.kind=="scalar")continue;const c=r.get(u.oneof);if(c!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${u.oneof.name}" present: "${c}", "${s}"`);r.set(u.oneof,s)}ly(i,o,u,e,n)}else{let c=!1;if(a!=null&&a.findExtension&&s.startsWith("[")&&s.endsWith("]")){const h=a.findExtension(s.substring(1,s.length-1));if(h&&h.extendee.typeName==n.typeName){c=!0;const[m,d]=aS(h);ly(m,o,h.field,e,h),R1(i,h,d(),e)}}if(!c&&!e.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${s}" is unknown`)}}return i},writeMessage(n,t){const e=n.getType(),i={};let r;try{for(r of e.fields.byNumber()){if(!lS(r,n)){if(r.req)throw"required field not set";if(!t.emitDefaultValues||!J1(r))continue}const s=r.oneof?n[r.oneof.localName].value:n[r.localName],o=uy(r,s,t);o!==void 0&&(i[t.useProtoFieldName?r.name:r.jsonName]=o)}const a=t.typeRegistry;if(a!=null&&a.findExtensionFor)for(const s of e.runtime.bin.listUnknownFields(n)){const o=a.findExtensionFor(e.typeName,s.no);if(o&&sS(n,o)){const u=B1(n,o,t),c=uy(o.field,u,t);c!==void 0&&(i[o.field.jsonName]=c)}}}catch(a){const s=r?`cannot encode field ${e.typeName}.${r.name} to JSON`:`cannot encode message ${e.typeName} to JSON`,o=a instanceof Error?a.message:String(a);throw new Error(s+(o.length>0?`: ${o}`:""))}return i},readScalar(n,t,e){return vo(n,t,e??Fr.BIGINT,!0)},writeScalar(n,t,e){if(t!==void 0&&(e||rS(n,t)))return nu(n,t)},debug:fn}}function fn(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function ly(n,t,e,i,r){let a=e.localName;if(e.repeated){if(wt(e.kind!="map"),t===null)return;if(!Array.isArray(t))throw new Error(`cannot decode field ${r.typeName}.${e.name} from JSON: ${fn(t)}`);const s=n[a];for(const o of t){if(o===null)throw new Error(`cannot decode field ${r.typeName}.${e.name} from JSON: ${fn(o)}`);switch(e.kind){case"message":s.push(e.T.fromJson(o,i));break;case"enum":const u=Sf(e.T,o,i.ignoreUnknownFields,!0);u!==eu&&s.push(u);break;case"scalar":try{s.push(vo(e.T,o,e.L,!0))}catch(c){let h=`cannot decode field ${r.typeName}.${e.name} from JSON: ${fn(o)}`;throw c instanceof Error&&c.message.length>0&&(h+=`: ${c.message}`),new Error(h)}break}}}else if(e.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error(`cannot decode field ${r.typeName}.${e.name} from JSON: ${fn(t)}`);const s=n[a];for(const[o,u]of Object.entries(t)){if(u===null)throw new Error(`cannot decode field ${r.typeName}.${e.name} from JSON: map value null`);let c;try{c=L1(e.K,o)}catch(h){let m=`cannot decode map key for field ${r.typeName}.${e.name} from JSON: ${fn(t)}`;throw h instanceof Error&&h.message.length>0&&(m+=`: ${h.message}`),new Error(m)}switch(e.V.kind){case"message":s[c]=e.V.T.fromJson(u,i);break;case"enum":const h=Sf(e.V.T,u,i.ignoreUnknownFields,!0);h!==eu&&(s[c]=h);break;case"scalar":try{s[c]=vo(e.V.T,u,Fr.BIGINT,!0)}catch(m){let d=`cannot decode map value for field ${r.typeName}.${e.name} from JSON: ${fn(t)}`;throw m instanceof Error&&m.message.length>0&&(d+=`: ${m.message}`),new Error(d)}break}}}else switch(e.oneof&&(n=n[e.oneof.localName]={case:a},a="value"),e.kind){case"message":const s=e.T;if(t===null&&s.typeName!="google.protobuf.Value")return;let o=n[a];_i(o)?o.fromJson(t,i):(n[a]=o=s.fromJson(t,i),s.fieldWrapper&&!e.oneof&&(n[a]=s.fieldWrapper.unwrapField(o)));break;case"enum":const u=Sf(e.T,t,i.ignoreUnknownFields,!1);switch(u){case Mu:ay(e,n);break;case eu:break;default:n[a]=u;break}break;case"scalar":try{const c=vo(e.T,t,e.L,!1);switch(c){case Mu:ay(e,n);break;default:n[a]=c;break}}catch(c){let h=`cannot decode field ${r.typeName}.${e.name} from JSON: ${fn(t)}`;throw c instanceof Error&&c.message.length>0&&(h+=`: ${c.message}`),new Error(h)}break}}function L1(n,t){if(n===E.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1;break}return vo(n,t,Fr.BIGINT,!0).toString()}function vo(n,t,e,i){if(t===null)return i?ws(n,e):Mu;switch(n){case E.DOUBLE:case E.FLOAT:if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const r=Number(t);if(Number.isNaN(r)||!Number.isFinite(r))break;return n==E.FLOAT&&Q0(r),r;case E.INT32:case E.FIXED32:case E.SFIXED32:case E.SINT32:case E.UINT32:let a;if(typeof t=="number"?a=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(a=Number(t)),a===void 0)break;return n==E.UINT32||n==E.FIXED32?bh(a):Wl(a),a;case E.INT64:case E.SFIXED64:case E.SINT64:if(typeof t!="number"&&typeof t!="string")break;const s=Z.parse(t);return e?s.toString():s;case E.FIXED64:case E.UINT64:if(typeof t!="number"&&typeof t!="string")break;const o=Z.uParse(t);return e?o.toString():o;case E.BOOL:if(typeof t!="boolean")break;return t;case E.STRING:if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case E.BYTES:if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return og.dec(t)}throw new Error}function Sf(n,t,e,i){if(t===null)return n.typeName=="google.protobuf.NullValue"?0:i?n.values[0].no:Mu;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const r=n.findName(t);if(r!==void 0)return r.no;if(e)return eu;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${fn(t)}`)}function J1(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function uy(n,t,e){if(n.kind=="map"){wt(typeof t=="object"&&t!=null);const i={},r=Object.entries(t);switch(n.V.kind){case"scalar":for(const[s,o]of r)i[s.toString()]=nu(n.V.T,o);break;case"message":for(const[s,o]of r)i[s.toString()]=o.toJson(e);break;case"enum":const a=n.V.T;for(const[s,o]of r)i[s.toString()]=bf(a,o,e.enumAsInteger);break}return e.emitDefaultValues||r.length>0?i:void 0}if(n.repeated){wt(Array.isArray(t));const i=[];switch(n.kind){case"scalar":for(let r=0;r<t.length;r++)i.push(nu(n.T,t[r]));break;case"enum":for(let r=0;r<t.length;r++)i.push(bf(n.T,t[r],e.enumAsInteger));break;case"message":for(let r=0;r<t.length;r++)i.push(t[r].toJson(e));break}return e.emitDefaultValues||i.length>0?i:void 0}switch(n.kind){case"scalar":return nu(n.T,t);case"enum":return bf(n.T,t,e.enumAsInteger);case"message":return uS(n.T,t).toJson(e)}}function bf(n,t,e){var i;if(wt(typeof t=="number"),n.typeName=="google.protobuf.NullValue")return null;if(e)return t;const r=n.findNumber(t);return(i=r==null?void 0:r.name)!==null&&i!==void 0?i:t}function nu(n,t){switch(n){case E.INT32:case E.SFIXED32:case E.SINT32:case E.FIXED32:case E.UINT32:return wt(typeof t=="number"),t;case E.FLOAT:case E.DOUBLE:return wt(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case E.STRING:return wt(typeof t=="string"),t;case E.BOOL:return wt(typeof t=="boolean"),t;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return wt(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),t.toString();case E.BYTES:return wt(t instanceof Uint8Array),og.enc(t)}}const Ra=Symbol("@bufbuild/protobuf/unknown-fields"),cy={readUnknownFields:!0,readerFactory:n=>new O1(n)},fy={writeUnknownFields:!0,writerFactory:()=>new D1};function q1(n){return n?Object.assign(Object.assign({},cy),n):cy}function P1(n){return n?Object.assign(Object.assign({},fy),n):fy}function H1(){return{makeReadOptions:q1,makeWriteOptions:P1,listUnknownFields(n){var t;return(t=n[Ra])!==null&&t!==void 0?t:[]},discardUnknownFields(n){delete n[Ra]},writeUnknownFields(n,t){const i=n[Ra];if(i)for(const r of i)t.tag(r.no,r.wireType).raw(r.data)},onUnknownField(n,t,e,i){const r=n;Array.isArray(r[Ra])||(r[Ra]=[]),r[Ra].push({no:t,wireType:e,data:i})},readMessage(n,t,e,i,r){const a=n.getType(),s=r?t.len:t.pos+e;let o,u;for(;t.pos<s&&([o,u]=t.tag(),!(r===!0&&u==Dt.EndGroup));){const c=a.fields.find(o);if(!c){const h=t.skip(u,o);i.readUnknownFields&&this.onUnknownField(n,o,u,h);continue}hy(n,t,c,u,i)}if(r&&(u!=Dt.EndGroup||o!==e))throw new Error("invalid end group tag")},readField:hy,writeMessage(n,t,e){const i=n.getType();for(const r of i.fields.byNumber()){if(!lS(r,n)){if(r.req)throw new Error(`cannot encode field ${i.typeName}.${r.name} to binary: required field not set`);continue}const a=r.oneof?n[r.oneof.localName].value:n[r.localName];dy(r,a,t,e)}return e.writeUnknownFields&&this.writeUnknownFields(n,t),t},writeField(n,t,e,i){t!==void 0&&dy(n,t,e,i)}}}function hy(n,t,e,i,r){let{repeated:a,localName:s}=e;switch(e.oneof&&(n=n[e.oneof.localName],n.case!=s&&delete n.value,n.case=s,s="value"),e.kind){case"scalar":case"enum":const o=e.kind=="enum"?E.INT32:e.T;let u=Uu;if(e.kind=="scalar"&&e.L>0&&(u=K1),a){let d=n[s];if(i==Dt.LengthDelimited&&o!=E.STRING&&o!=E.BYTES){let T=t.uint32()+t.pos;for(;t.pos<T;)d.push(u(t,o))}else d.push(u(t,o))}else n[s]=u(t,o);break;case"message":const c=e.T;a?n[s].push(iu(t,new c,r,e)):_i(n[s])?iu(t,n[s],r,e):(n[s]=iu(t,new c,r,e),c.fieldWrapper&&!e.oneof&&!e.repeated&&(n[s]=c.fieldWrapper.unwrapField(n[s])));break;case"map":let[h,m]=V1(e,t,r);n[s][h]=m;break}}function iu(n,t,e,i){const r=t.getType().runtime.bin,a=i==null?void 0:i.delimited;return r.readMessage(t,n,a?i.no:n.uint32(),e,a),t}function V1(n,t,e){const i=t.uint32(),r=t.pos+i;let a,s;for(;t.pos<r;){const[o]=t.tag();switch(o){case 1:a=Uu(t,n.K);break;case 2:switch(n.V.kind){case"scalar":s=Uu(t,n.V.T);break;case"enum":s=t.int32();break;case"message":s=iu(t,new n.V.T,e,void 0);break}break}}if(a===void 0&&(a=ws(n.K,Fr.BIGINT)),typeof a!="string"&&typeof a!="number"&&(a=a.toString()),s===void 0)switch(n.V.kind){case"scalar":s=ws(n.V.T,Fr.BIGINT);break;case"enum":s=n.V.T.values[0].no;break;case"message":s=new n.V.T;break}return[a,s]}function K1(n,t){const e=Uu(n,t);return typeof e=="bigint"?e.toString():e}function Uu(n,t){switch(t){case E.STRING:return n.string();case E.BOOL:return n.bool();case E.DOUBLE:return n.double();case E.FLOAT:return n.float();case E.INT32:return n.int32();case E.INT64:return n.int64();case E.UINT64:return n.uint64();case E.FIXED64:return n.fixed64();case E.BYTES:return n.bytes();case E.FIXED32:return n.fixed32();case E.SFIXED32:return n.sfixed32();case E.SFIXED64:return n.sfixed64();case E.SINT64:return n.sint64();case E.UINT32:return n.uint32();case E.SINT32:return n.sint32()}}function dy(n,t,e,i){wt(t!==void 0);const r=n.repeated;switch(n.kind){case"scalar":case"enum":let a=n.kind=="enum"?E.INT32:n.T;if(r)if(wt(Array.isArray(t)),n.packed)$1(e,a,n.no,t);else for(const s of t)So(e,a,n.no,s);else So(e,a,n.no,t);break;case"message":if(r){wt(Array.isArray(t));for(const s of t)gy(e,i,n,s)}else gy(e,i,n,t);break;case"map":wt(typeof t=="object"&&t!=null);for(const[s,o]of Object.entries(t))j1(e,i,n,s,o);break}}function j1(n,t,e,i,r){n.tag(e.no,Dt.LengthDelimited),n.fork();let a=i;switch(e.K){case E.INT32:case E.FIXED32:case E.UINT32:case E.SFIXED32:case E.SINT32:a=Number.parseInt(i);break;case E.BOOL:wt(i=="true"||i=="false"),a=i=="true";break}switch(So(n,e.K,1,a),e.V.kind){case"scalar":So(n,e.V.T,2,r);break;case"enum":So(n,E.INT32,2,r);break;case"message":wt(r!==void 0),n.tag(2,Dt.LengthDelimited).bytes(r.toBinary(t));break}n.join()}function gy(n,t,e,i){const r=uS(e.T,i);e.delimited?n.tag(e.no,Dt.StartGroup).raw(r.toBinary(t)).tag(e.no,Dt.EndGroup):n.tag(e.no,Dt.LengthDelimited).bytes(r.toBinary(t))}function So(n,t,e,i){wt(i!==void 0);let[r,a]=cS(t);n.tag(e,r)[a](i)}function $1(n,t,e,i){if(!i.length)return;n.tag(e,Dt.LengthDelimited).fork();let[,r]=cS(t);for(let a=0;a<i.length;a++)n[r](i[a]);n.join()}function cS(n){let t=Dt.Varint;switch(n){case E.BYTES:case E.STRING:t=Dt.LengthDelimited;break;case E.DOUBLE:case E.FIXED64:case E.SFIXED64:t=Dt.Bit64;break;case E.FIXED32:case E.SFIXED32:case E.FLOAT:t=Dt.Bit32;break}const e=E[n].toLowerCase();return[t,e]}function G1(){return{setEnumType:W0,initPartial(n,t){if(n===void 0)return;const e=t.getType();for(const i of e.fields.byMember()){const r=i.localName,a=t,s=n;if(s[r]!=null)switch(i.kind){case"oneof":const o=s[r].case;if(o===void 0)continue;const u=i.findField(o);let c=s[r].value;u&&u.kind=="message"&&!_i(c,u.T)?c=new u.T(c):u&&u.kind==="scalar"&&u.T===E.BYTES&&(c=Ys(c)),a[r]={case:o,value:c};break;case"scalar":case"enum":let h=s[r];i.T===E.BYTES&&(h=i.repeated?h.map(Ys):Ys(h)),a[r]=h;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===E.BYTES)for(const[g,T]of Object.entries(s[r]))a[r][g]=Ys(T);else Object.assign(a[r],s[r]);break;case"message":const d=i.V.T;for(const g of Object.keys(s[r])){let T=s[r][g];d.fieldWrapper||(T=new d(T)),a[r][g]=T}break}break;case"message":const m=i.T;if(i.repeated)a[r]=s[r].map(d=>_i(d,m)?d:new m(d));else{const d=s[r];m.fieldWrapper?m.typeName==="google.protobuf.BytesValue"?a[r]=Ys(d):a[r]=d:a[r]=_i(d,m)?d:new m(d)}break}}},equals(n,t,e){return t===e?!0:!t||!e?!1:n.fields.byMember().every(i=>{const r=t[i.localName],a=e[i.localName];if(i.repeated){if(r.length!==a.length)return!1;switch(i.kind){case"message":return r.every((s,o)=>i.T.equals(s,a[o]));case"scalar":return r.every((s,o)=>Tr(i.T,s,a[o]));case"enum":return r.every((s,o)=>Tr(E.INT32,s,a[o]))}throw new Error(`repeated cannot contain ${i.kind}`)}switch(i.kind){case"message":let s=r,o=a;return i.T.fieldWrapper&&(s!==void 0&&!_i(s)&&(s=i.T.fieldWrapper.wrapField(s)),o!==void 0&&!_i(o)&&(o=i.T.fieldWrapper.wrapField(o))),i.T.equals(s,o);case"enum":return Tr(E.INT32,r,a);case"scalar":return Tr(i.T,r,a);case"oneof":if(r.case!==a.case)return!1;const u=i.findField(r.case);if(u===void 0)return!0;switch(u.kind){case"message":return u.T.equals(r.value,a.value);case"enum":return Tr(E.INT32,r.value,a.value);case"scalar":return Tr(u.T,r.value,a.value)}throw new Error(`oneof cannot contain ${u.kind}`);case"map":const c=Object.keys(r).concat(Object.keys(a));switch(i.V.kind){case"message":const h=i.V.T;return c.every(d=>h.equals(r[d],a[d]));case"enum":return c.every(d=>Tr(E.INT32,r[d],a[d]));case"scalar":const m=i.V.T;return c.every(d=>Tr(m,r[d],a[d]))}break}})},clone(n){const t=n.getType(),e=new t,i=e;for(const r of t.fields.byMember()){const a=n[r.localName];let s;if(r.repeated)s=a.map(Rl);else if(r.kind=="map"){s=i[r.localName];for(const[o,u]of Object.entries(a))s[o]=Rl(u)}else r.kind=="oneof"?s=r.findField(a.case)?{case:a.case,value:Rl(a.value)}:{case:void 0}:s=Rl(a);i[r.localName]=s}for(const r of t.runtime.bin.listUnknownFields(n))t.runtime.bin.onUnknownField(i,r.no,r.wireType,r.data);return e}}}function Rl(n){if(n===void 0)return n;if(_i(n))return n.clone();if(n instanceof Uint8Array){const t=new Uint8Array(n.byteLength);return t.set(n),t}return n}function Ys(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function Y1(n,t,e){return{syntax:n,json:U1(),bin:H1(),util:Object.assign(Object.assign({},G1()),{newFieldList:t,initFields:e}),makeMessageType(i,r,a){return T1(this,i,r,a)},makeEnum:b1,makeEnumType:tS,getEnumType:S1,makeExtension(i,r,a){return k1(this,i,r,a)}}}class X1{constructor(t,e){this._fields=t,this._normalizer=e}findJsonName(t){if(!this.jsonNames){const e={};for(const i of this.list())e[i.jsonName]=e[i.name]=i;this.jsonNames=e}return this.jsonNames[t]}find(t){if(!this.numbers){const e={};for(const i of this.list())e[i.no]=i;this.numbers=e}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,e)=>t.no-e.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let e;for(const i of this.list())i.oneof?i.oneof!==e&&(e=i.oneof,t.push(e)):t.push(i)}return this.members}}function fS(n,t){const e=hS(n);return t?e:tA(W1(e))}function F1(n){return fS(n,!1)}const Z1=hS;function hS(n){let t=!1;const e=[];for(let i=0;i<n.length;i++){let r=n.charAt(i);switch(r){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.push(r),t=!1;break;default:t&&(t=!1,r=r.toUpperCase()),e.push(r);break}}return e.join("")}const Q1=new Set(["constructor","toString","toJSON","valueOf"]),_1=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),dS=n=>`${n}$`,W1=n=>_1.has(n)?dS(n):n,tA=n=>Q1.has(n)?dS(n):n;class eA{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=F1(t)}addField(t){wt(t.oneof===this,`field ${t.name} not one of ${this.name}`),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[t]}}function nA(n,t){var e,i,r,a,s,o;const u=[];let c;for(const h of typeof n=="function"?n():n){const m=h;if(m.localName=fS(h.name,h.oneof!==void 0),m.jsonName=(e=h.jsonName)!==null&&e!==void 0?e:Z1(h.name),m.repeated=(i=h.repeated)!==null&&i!==void 0?i:!1,h.kind=="scalar"&&(m.L=(r=h.L)!==null&&r!==void 0?r:Fr.BIGINT),m.delimited=(a=h.delimited)!==null&&a!==void 0?a:!1,m.req=(s=h.req)!==null&&s!==void 0?s:!1,m.opt=(o=h.opt)!==null&&o!==void 0?o:!1,h.packed===void 0&&(m.packed=h.kind=="enum"||h.kind=="scalar"&&h.T!=E.BYTES&&h.T!=E.STRING),h.oneof!==void 0){const d=typeof h.oneof=="string"?h.oneof:h.oneof.name;(!c||c.name!=d)&&(c=new eA(d)),m.oneof=c,c.addField(m)}u.push(m)}return u}const f=Y1("proto3",n=>new X1(n,t=>nA(t)),n=>{for(const t of n.getType().fields.byMember()){if(t.opt)continue;const e=t.localName,i=n;if(t.repeated){i[e]=[];continue}switch(t.kind){case"oneof":i[e]={case:void 0};break;case"enum":i[e]=0;break;case"map":i[e]={};break;case"scalar":i[e]=ws(t.T,t.L);break}}});var It;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(It||(It={}));var my;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(my||(my={}));class Kt extends O{constructor(t){super(),this.seconds=Z.zero,this.nanos=0,f.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${f.json.debug(t)}`);const i=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const r=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(r))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Z.parse(r/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(t){const e=Number(this.seconds)*1e3;if(e<Date.parse("0001-01-01T00:00:00Z")||e>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const r=(this.nanos+1e9).toString().substring(1);r.substring(3)==="000000"?i="."+r.substring(0,3)+"Z":r.substring(6)==="000"?i="."+r.substring(0,6)+"Z":i="."+r+"Z"}return new Date(e).toISOString().replace(".000Z",i)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Kt.fromDate(new Date)}static fromDate(t){const e=t.getTime();return new Kt({seconds:Z.parse(Math.floor(e/1e3)),nanos:e%1e3*1e6})}static fromBinary(t,e){return new Kt().fromBinary(t,e)}static fromJson(t,e){return new Kt().fromJson(t,e)}static fromJsonString(t,e){return new Kt().fromJsonString(t,e)}static equals(t,e){return f.util.equals(Kt,t,e)}}Kt.runtime=f;Kt.typeName="google.protobuf.Timestamp";Kt.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class rr extends O{constructor(t){super(),this.seconds=Z.zero,this.nanos=0,f.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(t)}`);const i=t.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(i===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(t)}`);const r=Number(i[1]);if(r>315576e6||r<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(t)}`);if(this.seconds=Z.parse(r),typeof i[2]=="string"){const a=i[2]+"0".repeat(9-i[2].length);this.nanos=parseInt(a),(r<0||Object.is(r,-0))&&(this.nanos=-this.nanos)}return this}toJson(t){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let e=this.seconds.toString();if(this.nanos!==0){let i=Math.abs(this.nanos).toString();i="0".repeat(9-i.length)+i,i.substring(3)==="000000"?i=i.substring(0,3):i.substring(6)==="000"&&(i=i.substring(0,6)),e+="."+i,this.nanos<0&&Number(this.seconds)==0&&(e="-"+e)}return e+"s"}static fromBinary(t,e){return new rr().fromBinary(t,e)}static fromJson(t,e){return new rr().fromJson(t,e)}static fromJsonString(t,e){return new rr().fromJsonString(t,e)}static equals(t,e){return f.util.equals(rr,t,e)}}rr.runtime=f;rr.typeName="google.protobuf.Duration";rr.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class dn extends O{constructor(t){super(),this.typeUrl="",this.value=new Uint8Array(0),f.util.initPartial(t,this)}toJson(t){var e;if(this.typeUrl==="")return{};const i=this.typeUrlToName(this.typeUrl),r=(e=t==null?void 0:t.typeRegistry)===null||e===void 0?void 0:e.findMessage(i);if(!r)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let s=r.fromBinary(this.value).toJson(t);return(i.startsWith("google.protobuf.")||s===null||Array.isArray(s)||typeof s!="object")&&(s={value:s}),s["@type"]=this.typeUrl,s}fromJson(t,e){var i;if(t===null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${t===null?"null":Array.isArray(t)?"array":typeof t}`);if(Object.keys(t).length==0)return this;const r=t["@type"];if(typeof r!="string"||r=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const a=this.typeUrlToName(r),s=(i=e==null?void 0:e.typeRegistry)===null||i===void 0?void 0:i.findMessage(a);if(!s)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${r} is not in the type registry`);let o;if(a.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(t,"value"))o=s.fromJson(t.value,e);else{const u=Object.assign({},t);delete u["@type"],o=s.fromJson(u,e)}return this.packFrom(o),this}packFrom(t){this.value=t.toBinary(),this.typeUrl=this.typeNameToUrl(t.getType().typeName)}unpackTo(t){return this.is(t.getType())?(t.fromBinary(this.value),!0):!1}unpack(t){if(this.typeUrl==="")return;const e=t.findMessage(this.typeUrlToName(this.typeUrl));if(e)return e.fromBinary(this.value)}is(t){if(this.typeUrl==="")return!1;const e=this.typeUrlToName(this.typeUrl);let i="";return typeof t=="string"?i=t:i=t.typeName,e===i}typeNameToUrl(t){return`type.googleapis.com/${t}`}typeUrlToName(t){if(!t.length)throw new Error(`invalid type url: ${t}`);const e=t.lastIndexOf("/"),i=e>=0?t.substring(e+1):t;if(!i.length)throw new Error(`invalid type url: ${t}`);return i}static pack(t){const e=new dn;return e.packFrom(t),e}static fromBinary(t,e){return new dn().fromBinary(t,e)}static fromJson(t,e){return new dn().fromJson(t,e)}static fromJsonString(t,e){return new dn().fromJsonString(t,e)}static equals(t,e){return f.util.equals(dn,t,e)}}dn.runtime=f;dn.typeName="google.protobuf.Any";dn.fields=f.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class mn extends O{constructor(t){super(),this.value=0,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.DOUBLE,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.DOUBLE,t)}catch(i){let r='cannot decode message google.protobuf.DoubleValue from JSON"';throw i instanceof Error&&i.message.length>0&&(r+=`: ${i.message}`),new Error(r)}return this}static fromBinary(t,e){return new mn().fromBinary(t,e)}static fromJson(t,e){return new mn().fromJson(t,e)}static fromJsonString(t,e){return new mn().fromJsonString(t,e)}static equals(t,e){return f.util.equals(mn,t,e)}}mn.runtime=f;mn.typeName="google.protobuf.DoubleValue";mn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);mn.fieldWrapper={wrapField(n){return new mn({value:n})},unwrapField(n){return n.value}};class yn extends O{constructor(t){super(),this.value=0,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.FLOAT,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.FLOAT,t)}catch(i){let r='cannot decode message google.protobuf.FloatValue from JSON"';throw i instanceof Error&&i.message.length>0&&(r+=`: ${i.message}`),new Error(r)}return this}static fromBinary(t,e){return new yn().fromBinary(t,e)}static fromJson(t,e){return new yn().fromJson(t,e)}static fromJsonString(t,e){return new yn().fromJsonString(t,e)}static equals(t,e){return f.util.equals(yn,t,e)}}yn.runtime=f;yn.typeName="google.protobuf.FloatValue";yn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);yn.fieldWrapper={wrapField(n){return new yn({value:n})},unwrapField(n){return n.value}};class Ve extends O{constructor(t){super(),this.value=Z.zero,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.INT64,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.INT64,t)}catch(i){let r='cannot decode message google.protobuf.Int64Value from JSON"';throw i instanceof Error&&i.message.length>0&&(r+=`: ${i.message}`),new Error(r)}return this}static fromBinary(t,e){return new Ve().fromBinary(t,e)}static fromJson(t,e){return new Ve().fromJson(t,e)}static fromJsonString(t,e){return new Ve().fromJsonString(t,e)}static equals(t,e){return f.util.equals(Ve,t,e)}}Ve.runtime=f;Ve.typeName="google.protobuf.Int64Value";Ve.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);Ve.fieldWrapper={wrapField(n){return new Ve({value:n})},unwrapField(n){return n.value}};class Ke extends O{constructor(t){super(),this.value=Z.zero,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.UINT64,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.UINT64,t)}catch(i){let r='cannot decode message google.protobuf.UInt64Value from JSON"';throw i instanceof Error&&i.message.length>0&&(r+=`: ${i.message}`),new Error(r)}return this}static fromBinary(t,e){return new Ke().fromBinary(t,e)}static fromJson(t,e){return new Ke().fromJson(t,e)}static fromJsonString(t,e){return new Ke().fromJsonString(t,e)}static equals(t,e){return f.util.equals(Ke,t,e)}}Ke.runtime=f;Ke.typeName="google.protobuf.UInt64Value";Ke.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);Ke.fieldWrapper={wrapField(n){return new Ke({value:n})},unwrapField(n){return n.value}};class ye extends O{constructor(t){super(),this.value=0,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.INT32,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.INT32,t)}catch(i){let r='cannot decode message google.protobuf.Int32Value from JSON"';throw i instanceof Error&&i.message.length>0&&(r+=`: ${i.message}`),new Error(r)}return this}static fromBinary(t,e){return new ye().fromBinary(t,e)}static fromJson(t,e){return new ye().fromJson(t,e)}static fromJsonString(t,e){return new ye().fromJsonString(t,e)}static equals(t,e){return f.util.equals(ye,t,e)}}ye.runtime=f;ye.typeName="google.protobuf.Int32Value";ye.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);ye.fieldWrapper={wrapField(n){return new ye({value:n})},unwrapField(n){return n.value}};class pn extends O{constructor(t){super(),this.value=0,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.UINT32,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.UINT32,t)}catch(i){let r='cannot decode message google.protobuf.UInt32Value from JSON"';throw i instanceof Error&&i.message.length>0&&(r+=`: ${i.message}`),new Error(r)}return this}static fromBinary(t,e){return new pn().fromBinary(t,e)}static fromJson(t,e){return new pn().fromJson(t,e)}static fromJsonString(t,e){return new pn().fromJsonString(t,e)}static equals(t,e){return f.util.equals(pn,t,e)}}pn.runtime=f;pn.typeName="google.protobuf.UInt32Value";pn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);pn.fieldWrapper={wrapField(n){return new pn({value:n})},unwrapField(n){return n.value}};class tn extends O{constructor(t){super(),this.value=!1,f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.BOOL,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.BOOL,t)}catch(i){let r='cannot decode message google.protobuf.BoolValue from JSON"';throw i instanceof Error&&i.message.length>0&&(r+=`: ${i.message}`),new Error(r)}return this}static fromBinary(t,e){return new tn().fromBinary(t,e)}static fromJson(t,e){return new tn().fromJson(t,e)}static fromJsonString(t,e){return new tn().fromJsonString(t,e)}static equals(t,e){return f.util.equals(tn,t,e)}}tn.runtime=f;tn.typeName="google.protobuf.BoolValue";tn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);tn.fieldWrapper={wrapField(n){return new tn({value:n})},unwrapField(n){return n.value}};class Ot extends O{constructor(t){super(),this.value="",f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.STRING,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.STRING,t)}catch(i){let r='cannot decode message google.protobuf.StringValue from JSON"';throw i instanceof Error&&i.message.length>0&&(r+=`: ${i.message}`),new Error(r)}return this}static fromBinary(t,e){return new Ot().fromBinary(t,e)}static fromJson(t,e){return new Ot().fromJson(t,e)}static fromJsonString(t,e){return new Ot().fromJsonString(t,e)}static equals(t,e){return f.util.equals(Ot,t,e)}}Ot.runtime=f;Ot.typeName="google.protobuf.StringValue";Ot.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);Ot.fieldWrapper={wrapField(n){return new Ot({value:n})},unwrapField(n){return n.value}};class vn extends O{constructor(t){super(),this.value=new Uint8Array(0),f.util.initPartial(t,this)}toJson(t){return f.json.writeScalar(E.BYTES,this.value,!0)}fromJson(t,e){try{this.value=f.json.readScalar(E.BYTES,t)}catch(i){let r='cannot decode message google.protobuf.BytesValue from JSON"';throw i instanceof Error&&i.message.length>0&&(r+=`: ${i.message}`),new Error(r)}return this}static fromBinary(t,e){return new vn().fromBinary(t,e)}static fromJson(t,e){return new vn().fromJson(t,e)}static fromJsonString(t,e){return new vn().fromJsonString(t,e)}static equals(t,e){return f.util.equals(vn,t,e)}}vn.runtime=f;vn.typeName="google.protobuf.BytesValue";vn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);vn.fieldWrapper={wrapField(n){return new vn({value:n})},unwrapField(n){return n.value}};function iA(n,t,e){try{const i=og.dec(n);return t?t.fromBinary(i,e):i}catch(i){throw ot.from(i,X.DataLoss)}}function rA(n,t){const e={};for(const[i,r]of Object.entries(n.methods)){const a=t(Object.assign(Object.assign({},r),{localName:i,service:n}));a!=null&&(e[i]=a)}return e}const yy=1;function py(n){let t,e=new Uint8Array(0);function i(r){const a=new Uint8Array(e.length+r.length);a.set(e),a.set(r,e.length),e=a}return new ReadableStream({start(){t=n.getReader()},async pull(r){let a;for(;;){if(a===void 0&&e.byteLength>=5){let u=0;for(let c=1;c<5;c++)u=(u<<8)+e[c];a={flags:e[0],length:u}}if(a!==void 0&&e.byteLength>=a.length+5)break;const o=await t.read();if(o.done)break;i(o.value)}if(a===void 0){if(e.byteLength==0){r.close();return}r.error(new ot("premature end of stream",X.DataLoss));return}const s=e.subarray(5,5+a.length);e=e.subarray(5+a.length),r.enqueue({flags:a.flags,data:s})}})}function vy(n,t){const e=new Uint8Array(t.length+5);e.set(t,5);const i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setUint8(0,n),i.setUint32(1,t.length),e}var aA=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(a){e[a]=n[a]&&function(s){return new Promise(function(o,u){s=n[a](s),r(o,u,s.done,s.value)})}}function r(a,s,o,u){Promise.resolve(u).then(function(c){a({value:c,done:o})},s)}},qo=function(n){return this instanceof qo?(this.v=n,this):new qo(n)},sA=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,a=[];return r={},o("next"),o("throw"),o("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(T){return Promise.resolve(T).then(g,m)}}function o(g,T){i[g]&&(r[g]=function(A){return new Promise(function(x,p){a.push([g,A,x,p])>1||u(g,A)})},T&&(r[g]=T(r[g])))}function u(g,T){try{c(i[g](T))}catch(A){d(a[0][3],A)}}function c(g){g.value instanceof qo?Promise.resolve(g.value.v).then(h,m):d(a[0][2],g)}function h(g){u("next",g)}function m(g){u("throw",g)}function d(g,T){g(T),a.shift(),a.length&&u(a[0][0],a[0][1])}},oA=function(n){var t,e;return t={},i("next"),i("throw",function(r){throw r}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(r,a){t[r]=n[r]?function(s){return(e=!e)?{value:qo(n[r](s)),done:!1}:a?a(s):s}:a}};function lA(n){return sA(this,arguments,function*(){yield qo(yield*oA(aA(n)))})}var gS=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(a){e[a]=n[a]&&function(s){return new Promise(function(o,u){s=n[a](s),r(o,u,s.done,s.value)})}}function r(a,s,o,u){Promise.resolve(u).then(function(c){a({value:c,done:o})},s)}},As=function(n){return this instanceof As?(this.v=n,this):new As(n)},uA=function(n){var t,e;return t={},i("next"),i("throw",function(r){throw r}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(r,a){t[r]=n[r]?function(s){return(e=!e)?{value:As(n[r](s)),done:!1}:a?a(s):s}:a}},cA=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,a=[];return r={},o("next"),o("throw"),o("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(T){return Promise.resolve(T).then(g,m)}}function o(g,T){i[g]&&(r[g]=function(A){return new Promise(function(x,p){a.push([g,A,x,p])>1||u(g,A)})},T&&(r[g]=T(r[g])))}function u(g,T){try{c(i[g](T))}catch(A){d(a[0][3],A)}}function c(g){g.value instanceof As?Promise.resolve(g.value.v).then(h,m):d(a[0][2],g)}function h(g){u("next",g)}function m(g){u("throw",g)}function d(g,T){g(T),a.shift(),a.length&&u(a[0][0],a[0][1])}};function fA(n,t){return rA(n,e=>{switch(e.kind){case It.Unary:return hA(t,n,e);case It.ServerStreaming:return dA(t,n,e);case It.ClientStreaming:return gA(t,n,e);case It.BiDiStreaming:return mA(t,n,e);default:return null}})}function hA(n,t,e){return async function(i,r){var a,s;const o=await n.unary(t,e,r==null?void 0:r.signal,r==null?void 0:r.timeoutMs,r==null?void 0:r.headers,i,r==null?void 0:r.contextValues);return(a=r==null?void 0:r.onHeader)===null||a===void 0||a.call(r,o.header),(s=r==null?void 0:r.onTrailer)===null||s===void 0||s.call(r,o.trailer),o.message}}function dA(n,t,e){return function(i,r){return mS(n.stream(t,e,r==null?void 0:r.signal,r==null?void 0:r.timeoutMs,r==null?void 0:r.headers,lA([i]),r==null?void 0:r.contextValues),r)}}function gA(n,t,e){return async function(i,r){var a,s,o,u,c,h;const m=await n.stream(t,e,r==null?void 0:r.signal,r==null?void 0:r.timeoutMs,r==null?void 0:r.headers,i,r==null?void 0:r.contextValues);(c=r==null?void 0:r.onHeader)===null||c===void 0||c.call(r,m.header);let d,g=0;try{for(var T=!0,A=gS(m.message),x;x=await A.next(),a=x.done,!a;T=!0)u=x.value,T=!1,d=u,g++}catch(p){s={error:p}}finally{try{!T&&!a&&(o=A.return)&&await o.call(A)}finally{if(s)throw s.error}}if(!d)throw new ot("protocol error: missing response message",X.Unimplemented);if(g>1)throw new ot("protocol error: received extra messages for client streaming method",X.Unimplemented);return(h=r==null?void 0:r.onTrailer)===null||h===void 0||h.call(r,m.trailer),d}}function mA(n,t,e){return function(i,r){return mS(n.stream(t,e,r==null?void 0:r.signal,r==null?void 0:r.timeoutMs,r==null?void 0:r.headers,i,r==null?void 0:r.contextValues),r)}}function mS(n,t){const e=function(){return cA(this,arguments,function*(){var i,r;const a=yield As(n);(i=t==null?void 0:t.onHeader)===null||i===void 0||i.call(t,a.header),yield As(yield*uA(gS(a.message))),(r=t==null?void 0:t.onTrailer)===null||r===void 0||r.call(t,a.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>e.next()})}}function yA(...n){const t=new AbortController,e=n.filter(r=>r!==void 0).concat(t.signal);for(const r of e){if(r.aborted){i.apply(r);break}r.addEventListener("abort",i)}function i(){t.signal.aborted||t.abort(yS(this));for(const r of e)r.removeEventListener("abort",i)}return t}function pA(n){const t=new AbortController,e=()=>{t.abort(new ot("the operation timed out",X.DeadlineExceeded))};let i;return n!==void 0&&(n<=0?e():i=setTimeout(e,n)),{signal:t.signal,cleanup:()=>clearTimeout(i)}}function yS(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const t=new Error("This operation was aborted");return t.name="AbortError",t}function Sy(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,t){return this[n.id]=t,this},delete(n){return delete this[n.id],this}}}const Tf=128;function by(n){const t=new Headers,e=new TextDecoder().decode(n).split(`\r
`);for(const i of e){if(i==="")continue;const r=i.indexOf(":");if(r>0){const a=i.substring(0,r).trim(),s=i.substring(r+1).trim();t.append(a,s)}}return t}const vA="Content-Type",SA="Grpc-Timeout",Es="Grpc-Status",pS="Grpc-Message",bA="Grpc-Status-Details-Bin",TA="X-User-Agent",wA="X-Grpc-Web",AA="application/grpc-web+proto",EA="application/grpc-web+json";class ar extends O{constructor(t){super(),this.code=0,this.message="",this.details=[],f.util.initPartial(t,this)}static fromBinary(t,e){return new ar().fromBinary(t,e)}static fromJson(t,e){return new ar().fromJson(t,e)}static fromJsonString(t,e){return new ar().fromJsonString(t,e)}static equals(t,e){return f.util.equals(ar,t,e)}}ar.runtime=f;ar.typeName="google.rpc.Status";ar.fields=f.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:dn,repeated:!0}]);const NA="0";function vS(n){var t;const e=n.get(bA);if(e!=null){const r=iA(e,ar);if(r.code==0)return;const a=new ot(r.message,r.code,n);return a.details=r.details.map(s=>({type:s.typeUrl.substring(s.typeUrl.lastIndexOf("/")+1),value:s.value})),a}const i=n.get(Es);if(i!=null){if(i===NA)return;const r=parseInt(i,10);return r in X?new ot(decodeURIComponent((t=n.get(pS))!==null&&t!==void 0?t:""),r,n):new ot(`invalid grpc-status: ${i}`,X.Internal,n)}}function Ty(n,t,e){const i=typeof t=="string"?t:t.typeName,r=typeof e=="string"?e:e.name;return n.toString().replace(/\/?$/,`/${i}/${r}`)}function SS(n,t){return t instanceof n?t:new n(t)}function xA(n,t){function e(i){return i.done===!0?i:{done:i.done,value:SS(n,i.value)}}return{[Symbol.asyncIterator](){const i=t[Symbol.asyncIterator](),r={next:()=>i.next().then(e)};return i.throw!==void 0&&(r.throw=a=>i.throw(a).then(e)),i.return!==void 0&&(r.return=a=>i.return(a).then(e)),r}}}function bS(n,t){var e;return(e=t==null?void 0:t.concat().reverse().reduce((i,r)=>r(i),n))!==null&&e!==void 0?e:n}function DA(n){var t;const e=Object.assign({},n);return(t=e.ignoreUnknownFields)!==null&&t!==void 0||(e.ignoreUnknownFields=!0),e}function wy(n,t,e,i){const r=t?Ay(n.I,i):Ey(n.I,e);return{parse:(t?Ay(n.O,i):Ey(n.O,e)).parse,serialize:r.serialize}}function Ay(n,t){return{parse(e){try{return n.fromBinary(e,t)}catch(i){const r=i instanceof Error?i.message:String(i);throw new ot(`parse binary: ${r}`,X.Internal)}},serialize(e){try{return e.toBinary(t)}catch(i){const r=i instanceof Error?i.message:String(i);throw new ot(`serialize binary: ${r}`,X.Internal)}}}}function Ey(n,t){var e,i;const r=(e=t==null?void 0:t.textEncoder)!==null&&e!==void 0?e:new TextEncoder,a=(i=t==null?void 0:t.textDecoder)!==null&&i!==void 0?i:new TextDecoder,s=DA(t);return{parse(o){try{const u=a.decode(o);return n.fromJsonString(u,s)}catch(u){throw ot.from(u,X.InvalidArgument)}},serialize(o){try{const u=o.toJsonString(s);return r.encode(u)}catch(u){throw ot.from(u,X.Internal)}}}}function OA(n){const t=bS(n.next,n.interceptors),[e,i,r]=TS(n),a=Object.assign(Object.assign({},n.req),{message:SS(n.req.method.I,n.req.message),signal:e});return t(a).then(s=>(r(),s),i)}function kA(n){const t=bS(n.next,n.interceptors),[e,i,r]=TS(n),a=Object.assign(Object.assign({},n.req),{message:xA(n.req.method.I,n.req.message),signal:e});let s=!1;return e.addEventListener("abort",function(){var o,u;const c=n.req.message[Symbol.asyncIterator]();s||(o=c.throw)===null||o===void 0||o.call(c,this.reason).catch(()=>{}),(u=c.return)===null||u===void 0||u.call(c).catch(()=>{})}),t(a).then(o=>Object.assign(Object.assign({},o),{message:{[Symbol.asyncIterator](){const u=o.message[Symbol.asyncIterator]();return{next(){return u.next().then(c=>(c.done==!0&&(s=!0,r()),c),i)}}}}}),i)}function TS(n){const{signal:t,cleanup:e}=pA(n.timeoutMs),i=yA(n.signal,t);return[i.signal,function(a){const s=ot.from(t.aborted?yS(t):a);return i.abort(s),e(),Promise.reject(s)},function(){e(),i.abort()}]}function CA(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function Ny(n,t){const e=vS(n);if(e)throw t.forEach((i,r)=>{e.metadata.append(r,i)}),e;if(!t.has(Es)&&!n.has(Es))throw new ot("protocol error: missing status",X.Internal)}function xy(n,t,e,i){const r=new Headers(e??{});return r.set(vA,n?AA:EA),r.set(wA,"1"),r.set(TA,"connect-es/1.6.1"),t!==void 0&&r.set(SA,`${t}m`),r}function IA(n){switch(n){case 400:return X.Internal;case 401:return X.Unauthenticated;case 403:return X.PermissionDenied;case 404:return X.Unimplemented;case 429:return X.Unavailable;case 502:return X.Unavailable;case 503:return X.Unavailable;case 504:return X.Unavailable;default:return X.Unknown}}function Dy(n,t){var e;if(n>=200&&n<300)return{foundStatus:t.has(Es),headerError:vS(t)};throw new ot(decodeURIComponent((e=t.get(pS))!==null&&e!==void 0?e:`HTTP ${n}`),IA(n),t)}var la=function(n){return this instanceof la?(this.v=n,this):new la(n)},BA=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,a=[];return r={},o("next"),o("throw"),o("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(T){return Promise.resolve(T).then(g,m)}}function o(g,T){i[g]&&(r[g]=function(A){return new Promise(function(x,p){a.push([g,A,x,p])>1||u(g,A)})},T&&(r[g]=T(r[g])))}function u(g,T){try{c(i[g](T))}catch(A){d(a[0][3],A)}}function c(g){g.value instanceof la?Promise.resolve(g.value.v).then(h,m):d(a[0][2],g)}function h(g){u("next",g)}function m(g){u("throw",g)}function d(g,T){g(T),a.shift(),a.length&&u(a[0][0],a[0][1])}};function RA(n){var t;CA();const e=(t=n.useBinaryFormat)!==null&&t!==void 0?t:!0;return{async unary(i,r,a,s,o,u,c){var h;const{serialize:m,parse:d}=wy(r,e,n.jsonOptions,n.binaryOptions);return s=s===void 0?n.defaultTimeoutMs:s<=0?void 0:s,await OA({interceptors:n.interceptors,signal:a,timeoutMs:s,req:{stream:!1,service:i,method:r,url:Ty(n.baseUrl,i,r),init:{method:"POST",credentials:(h=n.credentials)!==null&&h!==void 0?h:"same-origin",redirect:"error",mode:"cors"},header:xy(e,s,o),contextValues:c??Sy(),message:u},next:async g=>{var T;const x=await((T=n.fetch)!==null&&T!==void 0?T:globalThis.fetch)(g.url,Object.assign(Object.assign({},g.init),{headers:g.header,signal:g.signal,body:vy(0,m(g.message))})),{headerError:p}=Dy(x.status,x.headers);if(!x.body)throw p!==void 0?p:"missing response body";const y=py(x.body).getReader();let v,w;for(;;){const k=await y.read();if(k.done)break;const{flags:I,data:C}=k.value;if((I&yy)===yy)throw new ot("protocol error: received unsupported compressed output",X.Internal);if(I===Tf){if(v!==void 0)throw"extra trailer";v=by(C);continue}if(w!==void 0)throw new ot("extra message",X.Unimplemented);w=d(C)}if(v===void 0)throw p!==void 0?p:new ot("missing trailer",x.headers.has(Es)?X.Unimplemented:X.Unknown);if(Ny(v,x.headers),w===void 0)throw new ot("missing message",v.has(Es)?X.Unimplemented:X.Unknown);return{stream:!1,service:i,method:r,header:x.headers,message:w,trailer:v}}})},async stream(i,r,a,s,o,u,c){var h;const{serialize:m,parse:d}=wy(r,e,n.jsonOptions,n.binaryOptions);function g(A,x,p,y,v){return BA(this,arguments,function*(){const k=py(A).getReader();if(x){if(!(yield la(k.read())).done)throw"extra data for trailers-only";return yield la(void 0)}let I=!1;for(;;){const C=yield la(k.read());if(C.done)break;const{flags:B,data:P}=C.value;if((B&Tf)===Tf){if(I)throw"extra trailer";I=!0;const J=by(P);Ny(J,y),J.forEach((Ht,fe)=>p.set(fe,Ht));continue}if(I)throw"extra message";yield yield la(d(P))}if("throwIfAborted"in v&&v.throwIfAborted(),!I)throw"missing trailer"})}async function T(A){if(r.kind!=It.ServerStreaming)throw"The fetch API does not support streaming request bodies";const x=await A[Symbol.asyncIterator]().next();if(x.done==!0)throw"missing request message";return vy(0,m(x.value))}return s=s===void 0?n.defaultTimeoutMs:s<=0?void 0:s,kA({interceptors:n.interceptors,signal:a,timeoutMs:s,req:{stream:!0,service:i,method:r,url:Ty(n.baseUrl,i,r),init:{method:"POST",credentials:(h=n.credentials)!==null&&h!==void 0?h:"same-origin",redirect:"error",mode:"cors"},header:xy(e,s,o),contextValues:c??Sy(),message:u},next:async A=>{var x;const y=await((x=n.fetch)!==null&&x!==void 0?x:globalThis.fetch)(A.url,Object.assign(Object.assign({},A.init),{headers:A.header,signal:A.signal,body:await T(A.message)})),{foundStatus:v,headerError:w}=Dy(y.status,y.headers);if(w!=null)throw w;if(!y.body)throw"missing response body";const k=new Headers;return Object.assign(Object.assign({},A),{header:y.headers,trailer:k,message:g(y.body,v,k,y.headers,A.signal)})}})}}}var H=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))(H||{});f.util.setEnumType(H,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var pa=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(pa||{});f.util.setEnumType(pa,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const zn=class zn extends O{constructor(e){super();l(this,"root");l(this,"presences",{});f.util.initPartial(e,this)}static fromBinary(e,i){return new zn().fromBinary(e,i)}static fromJson(e,i){return new zn().fromJson(e,i)}static fromJsonString(e,i){return new zn().fromJsonString(e,i)}static equals(e,i){return f.util.equals(zn,e,i)}};l(zn,"runtime",f),l(zn,"typeName","yorkie.v1.Snapshot"),l(zn,"fields",f.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:ue},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:kc}}]));let Th=zn;var Ce;let vr=(Ce=class extends O{constructor(e){super();l(this,"documentKey","");l(this,"checkpoint");l(this,"snapshot",new Uint8Array(0));l(this,"changes",[]);l(this,"minSyncedTicket");l(this,"isRemoved",!1);l(this,"versionVector");f.util.initPartial(e,this)}static fromBinary(e,i){return new Ce().fromBinary(e,i)}static fromJson(e,i){return new Ce().fromJson(e,i)}static fromJsonString(e,i){return new Ce().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Ce,e,i)}},l(Ce,"runtime",f),l(Ce,"typeName","yorkie.v1.ChangePack"),l(Ce,"fields",f.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:ES},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:wS,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:M},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:Oc}])),Ce);var Ie;let wS=(Ie=class extends O{constructor(e){super();l(this,"id");l(this,"message","");l(this,"operations",[]);l(this,"presenceChange");f.util.initPartial(e,this)}static fromBinary(e,i){return new Ie().fromBinary(e,i)}static fromJson(e,i){return new Ie().fromJson(e,i)}static fromJsonString(e,i){return new Ie().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Ie,e,i)}},l(Ie,"runtime",f),l(Ie,"typeName","yorkie.v1.Change"),l(Ie,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Dc},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:lg,repeated:!0},{no:4,name:"presence_change",kind:"message",T:Vo}])),Ie);var Be;let Dc=(Be=class extends O{constructor(e){super();l(this,"clientSeq",0);l(this,"serverSeq",Z.zero);l(this,"lamport",Z.zero);l(this,"actorId",new Uint8Array(0));l(this,"versionVector");f.util.initPartial(e,this)}static fromBinary(e,i){return new Be().fromBinary(e,i)}static fromJson(e,i){return new Be().fromJson(e,i)}static fromJsonString(e,i){return new Be().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Be,e,i)}},l(Be,"runtime",f),l(Be,"typeName","yorkie.v1.ChangeID"),l(Be,"fields",f.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:Oc}])),Be);var Re;let Oc=(Re=class extends O{constructor(e){super();l(this,"vector",{});f.util.initPartial(e,this)}static fromBinary(e,i){return new Re().fromBinary(e,i)}static fromJson(e,i){return new Re().fromJson(e,i)}static fromJsonString(e,i){return new Re().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Re,e,i)}},l(Re,"runtime",f),l(Re,"typeName","yorkie.v1.VersionVector"),l(Re,"fields",f.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),Re);var ze;let lg=(ze=class extends O{constructor(e){super();l(this,"body",{case:void 0});f.util.initPartial(e,this)}static fromBinary(e,i){return new ze().fromBinary(e,i)}static fromJson(e,i){return new ze().fromJson(e,i)}static fromJsonString(e,i){return new ze().fromJsonString(e,i)}static equals(e,i){return f.util.equals(ze,e,i)}},l(ze,"runtime",f),l(ze,"typeName","yorkie.v1.Operation"),l(ze,"fields",f.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:Lu,oneof:"body"},{no:2,name:"add",kind:"message",T:Ju,oneof:"body"},{no:3,name:"move",kind:"message",T:qu,oneof:"body"},{no:4,name:"remove",kind:"message",T:Pu,oneof:"body"},{no:5,name:"edit",kind:"message",T:Hu,oneof:"body"},{no:7,name:"style",kind:"message",T:Vu,oneof:"body"},{no:8,name:"increase",kind:"message",T:Ku,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:ju,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:$u,oneof:"body"},{no:11,name:"array_set",kind:"message",T:Gu,oneof:"body"}])),ze);const Mn=class Mn extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"key","");l(this,"value");l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,i){return new Mn().fromBinary(e,i)}static fromJson(e,i){return new Mn().fromJson(e,i)}static fromJsonString(e,i){return new Mn().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Mn,e,i)}};l(Mn,"runtime",f),l(Mn,"typeName","yorkie.v1.Operation.Set"),l(Mn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:ke},{no:4,name:"executed_at",kind:"message",T:M}]));let Lu=Mn;const Un=class Un extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"prevCreatedAt");l(this,"value");l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,i){return new Un().fromBinary(e,i)}static fromJson(e,i){return new Un().fromJson(e,i)}static fromJsonString(e,i){return new Un().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Un,e,i)}};l(Un,"runtime",f),l(Un,"typeName","yorkie.v1.Operation.Add"),l(Un,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"prev_created_at",kind:"message",T:M},{no:3,name:"value",kind:"message",T:ke},{no:4,name:"executed_at",kind:"message",T:M}]));let Ju=Un;const Ln=class Ln extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"prevCreatedAt");l(this,"createdAt");l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,i){return new Ln().fromBinary(e,i)}static fromJson(e,i){return new Ln().fromJson(e,i)}static fromJsonString(e,i){return new Ln().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Ln,e,i)}};l(Ln,"runtime",f),l(Ln,"typeName","yorkie.v1.Operation.Move"),l(Ln,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"prev_created_at",kind:"message",T:M},{no:3,name:"created_at",kind:"message",T:M},{no:4,name:"executed_at",kind:"message",T:M}]));let qu=Ln;const Jn=class Jn extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"createdAt");l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,i){return new Jn().fromBinary(e,i)}static fromJson(e,i){return new Jn().fromJson(e,i)}static fromJsonString(e,i){return new Jn().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Jn,e,i)}};l(Jn,"runtime",f),l(Jn,"typeName","yorkie.v1.Operation.Remove"),l(Jn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"executed_at",kind:"message",T:M}]));let Pu=Jn;const qn=class qn extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"createdAtMapByActor",{});l(this,"content","");l(this,"executedAt");l(this,"attributes",{});f.util.initPartial(e,this)}static fromBinary(e,i){return new qn().fromBinary(e,i)}static fromJson(e,i){return new qn().fromJson(e,i)}static fromJsonString(e,i){return new qn().fromJsonString(e,i)}static equals(e,i){return f.util.equals(qn,e,i)}};l(qn,"runtime",f),l(qn,"typeName","yorkie.v1.Operation.Edit"),l(qn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:Ea},{no:3,name:"to",kind:"message",T:Ea},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:M},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Hu=qn;const Pn=class Pn extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"attributes",{});l(this,"executedAt");l(this,"createdAtMapByActor",{});f.util.initPartial(e,this)}static fromBinary(e,i){return new Pn().fromBinary(e,i)}static fromJson(e,i){return new Pn().fromJson(e,i)}static fromJsonString(e,i){return new Pn().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Pn,e,i)}};l(Pn,"runtime",f),l(Pn,"typeName","yorkie.v1.Operation.Style"),l(Pn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:Ea},{no:3,name:"to",kind:"message",T:Ea},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:M},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}}]));let Vu=Pn;const Hn=class Hn extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"value");l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,i){return new Hn().fromBinary(e,i)}static fromJson(e,i){return new Hn().fromJson(e,i)}static fromJsonString(e,i){return new Hn().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Hn,e,i)}};l(Hn,"runtime",f),l(Hn,"typeName","yorkie.v1.Operation.Increase"),l(Hn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"value",kind:"message",T:ke},{no:3,name:"executed_at",kind:"message",T:M}]));let Ku=Hn;const Vn=class Vn extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"createdAtMapByActor",{});l(this,"contents",[]);l(this,"splitLevel",0);l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,i){return new Vn().fromBinary(e,i)}static fromJson(e,i){return new Vn().fromJson(e,i)}static fromJsonString(e,i){return new Vn().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Vn,e,i)}};l(Vn,"runtime",f),l(Vn,"typeName","yorkie.v1.Operation.TreeEdit"),l(Vn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:wa},{no:3,name:"to",kind:"message",T:wa},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}},{no:5,name:"contents",kind:"message",T:ec,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:M}]));let ju=Vn;const Kn=class Kn extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"attributes",{});l(this,"executedAt");l(this,"attributesToRemove",[]);l(this,"createdAtMapByActor",{});f.util.initPartial(e,this)}static fromBinary(e,i){return new Kn().fromBinary(e,i)}static fromJson(e,i){return new Kn().fromJson(e,i)}static fromJsonString(e,i){return new Kn().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Kn,e,i)}};l(Kn,"runtime",f),l(Kn,"typeName","yorkie.v1.Operation.TreeStyle"),l(Kn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:wa},{no:3,name:"to",kind:"message",T:wa},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:M},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}}]));let $u=Kn;const jn=class jn extends O{constructor(e){super();l(this,"parentCreatedAt");l(this,"createdAt");l(this,"value");l(this,"executedAt");f.util.initPartial(e,this)}static fromBinary(e,i){return new jn().fromBinary(e,i)}static fromJson(e,i){return new jn().fromJson(e,i)}static fromJsonString(e,i){return new jn().fromJsonString(e,i)}static equals(e,i){return f.util.equals(jn,e,i)}};l(jn,"runtime",f),l(jn,"typeName","yorkie.v1.Operation.ArraySet"),l(jn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"value",kind:"message",T:ke},{no:4,name:"executed_at",kind:"message",T:M}]));let Gu=jn;const $n=class $n extends O{constructor(e){super();l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");l(this,"type",0);l(this,"value",new Uint8Array(0));f.util.initPartial(e,this)}static fromBinary(e,i){return new $n().fromBinary(e,i)}static fromJson(e,i){return new $n().fromJson(e,i)}static fromJsonString(e,i){return new $n().fromJsonString(e,i)}static equals(e,i){return f.util.equals($n,e,i)}};l($n,"runtime",f),l($n,"typeName","yorkie.v1.JSONElementSimple"),l($n,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"moved_at",kind:"message",T:M},{no:3,name:"removed_at",kind:"message",T:M},{no:4,name:"type",kind:"enum",T:f.getEnumType(H)},{no:5,name:"value",kind:"scalar",T:12}]));let ke=$n;const Gn=class Gn extends O{constructor(e){super();l(this,"body",{case:void 0});f.util.initPartial(e,this)}static fromBinary(e,i){return new Gn().fromBinary(e,i)}static fromJson(e,i){return new Gn().fromJson(e,i)}static fromJsonString(e,i){return new Gn().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Gn,e,i)}};l(Gn,"runtime",f),l(Gn,"typeName","yorkie.v1.JSONElement"),l(Gn,"fields",f.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:Yu,oneof:"body"},{no:2,name:"json_array",kind:"message",T:Xu,oneof:"body"},{no:3,name:"primitive",kind:"message",T:Fu,oneof:"body"},{no:5,name:"text",kind:"message",T:Zu,oneof:"body"},{no:6,name:"counter",kind:"message",T:Qu,oneof:"body"},{no:7,name:"tree",kind:"message",T:_u,oneof:"body"}]));let ue=Gn;const Yn=class Yn extends O{constructor(e){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(e,this)}static fromBinary(e,i){return new Yn().fromBinary(e,i)}static fromJson(e,i){return new Yn().fromJson(e,i)}static fromJsonString(e,i){return new Yn().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Yn,e,i)}};l(Yn,"runtime",f),l(Yn,"typeName","yorkie.v1.JSONElement.JSONObject"),l(Yn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:AS,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}]));let Yu=Yn;const Xn=class Xn extends O{constructor(e){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(e,this)}static fromBinary(e,i){return new Xn().fromBinary(e,i)}static fromJson(e,i){return new Xn().fromJson(e,i)}static fromJsonString(e,i){return new Xn().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Xn,e,i)}};l(Xn,"runtime",f),l(Xn,"typeName","yorkie.v1.JSONElement.JSONArray"),l(Xn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Wu,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}]));let Xu=Xn;const Fn=class Fn extends O{constructor(e){super();l(this,"type",0);l(this,"value",new Uint8Array(0));l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(e,this)}static fromBinary(e,i){return new Fn().fromBinary(e,i)}static fromJson(e,i){return new Fn().fromJson(e,i)}static fromJsonString(e,i){return new Fn().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Fn,e,i)}};l(Fn,"runtime",f),l(Fn,"typeName","yorkie.v1.JSONElement.Primitive"),l(Fn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(H)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:M},{no:4,name:"moved_at",kind:"message",T:M},{no:5,name:"removed_at",kind:"message",T:M}]));let Fu=Fn;const Zn=class Zn extends O{constructor(e){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(e,this)}static fromBinary(e,i){return new Zn().fromBinary(e,i)}static fromJson(e,i){return new Zn().fromJson(e,i)}static fromJsonString(e,i){return new Zn().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Zn,e,i)}};l(Zn,"runtime",f),l(Zn,"typeName","yorkie.v1.JSONElement.Text"),l(Zn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:tc,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}]));let Zu=Zn;const Qn=class Qn extends O{constructor(e){super();l(this,"type",0);l(this,"value",new Uint8Array(0));l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(e,this)}static fromBinary(e,i){return new Qn().fromBinary(e,i)}static fromJson(e,i){return new Qn().fromJson(e,i)}static fromJsonString(e,i){return new Qn().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Qn,e,i)}};l(Qn,"runtime",f),l(Qn,"typeName","yorkie.v1.JSONElement.Counter"),l(Qn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(H)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:M},{no:4,name:"moved_at",kind:"message",T:M},{no:5,name:"removed_at",kind:"message",T:M}]));let Qu=Qn;const _n=class _n extends O{constructor(e){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(e,this)}static fromBinary(e,i){return new _n().fromBinary(e,i)}static fromJson(e,i){return new _n().fromJson(e,i)}static fromJsonString(e,i){return new _n().fromJsonString(e,i)}static equals(e,i){return f.util.equals(_n,e,i)}};l(_n,"runtime",f),l(_n,"typeName","yorkie.v1.JSONElement.Tree"),l(_n,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Ho,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}]));let _u=_n;var Me;let AS=(Me=class extends O{constructor(e){super();l(this,"key","");l(this,"element");f.util.initPartial(e,this)}static fromBinary(e,i){return new Me().fromBinary(e,i)}static fromJson(e,i){return new Me().fromJson(e,i)}static fromJsonString(e,i){return new Me().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Me,e,i)}},l(Me,"runtime",f),l(Me,"typeName","yorkie.v1.RHTNode"),l(Me,"fields",f.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:ue}])),Me);const cn=class cn extends O{constructor(e){super();l(this,"next");l(this,"element");f.util.initPartial(e,this)}static fromBinary(e,i){return new cn().fromBinary(e,i)}static fromJson(e,i){return new cn().fromJson(e,i)}static fromJsonString(e,i){return new cn().fromJsonString(e,i)}static equals(e,i){return f.util.equals(cn,e,i)}};l(cn,"runtime",f),l(cn,"typeName","yorkie.v1.RGANode"),l(cn,"fields",f.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:cn},{no:2,name:"element",kind:"message",T:ue}]));let Wu=cn;const Wn=class Wn extends O{constructor(e){super();l(this,"value","");l(this,"updatedAt");l(this,"isRemoved",!1);f.util.initPartial(e,this)}static fromBinary(e,i){return new Wn().fromBinary(e,i)}static fromJson(e,i){return new Wn().fromJson(e,i)}static fromJsonString(e,i){return new Wn().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Wn,e,i)}};l(Wn,"runtime",f),l(Wn,"typeName","yorkie.v1.NodeAttr"),l(Wn,"fields",f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:M},{no:3,name:"is_removed",kind:"scalar",T:8}]));let Ns=Wn;const ti=class ti extends O{constructor(e){super();l(this,"id");l(this,"value","");l(this,"removedAt");l(this,"insPrevId");l(this,"attributes",{});f.util.initPartial(e,this)}static fromBinary(e,i){return new ti().fromBinary(e,i)}static fromJson(e,i){return new ti().fromJson(e,i)}static fromJsonString(e,i){return new ti().fromJsonString(e,i)}static equals(e,i){return f.util.equals(ti,e,i)}};l(ti,"runtime",f),l(ti,"typeName","yorkie.v1.TextNode"),l(ti,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Po},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:M},{no:4,name:"ins_prev_id",kind:"message",T:Po},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Ns}}]));let tc=ti;const ei=class ei extends O{constructor(e){super();l(this,"createdAt");l(this,"offset",0);f.util.initPartial(e,this)}static fromBinary(e,i){return new ei().fromBinary(e,i)}static fromJson(e,i){return new ei().fromJson(e,i)}static fromJsonString(e,i){return new ei().fromJsonString(e,i)}static equals(e,i){return f.util.equals(ei,e,i)}};l(ei,"runtime",f),l(ei,"typeName","yorkie.v1.TextNodeID"),l(ei,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"offset",kind:"scalar",T:5}]));let Po=ei;const ni=class ni extends O{constructor(e){super();l(this,"id");l(this,"type","");l(this,"value","");l(this,"removedAt");l(this,"insPrevId");l(this,"insNextId");l(this,"depth",0);l(this,"attributes",{});f.util.initPartial(e,this)}static fromBinary(e,i){return new ni().fromBinary(e,i)}static fromJson(e,i){return new ni().fromJson(e,i)}static fromJsonString(e,i){return new ni().fromJsonString(e,i)}static equals(e,i){return f.util.equals(ni,e,i)}};l(ni,"runtime",f),l(ni,"typeName","yorkie.v1.TreeNode"),l(ni,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Kr},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:M},{no:5,name:"ins_prev_id",kind:"message",T:Kr},{no:6,name:"ins_next_id",kind:"message",T:Kr},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Ns}}]));let Ho=ni;const ii=class ii extends O{constructor(e){super();l(this,"content",[]);f.util.initPartial(e,this)}static fromBinary(e,i){return new ii().fromBinary(e,i)}static fromJson(e,i){return new ii().fromJson(e,i)}static fromJsonString(e,i){return new ii().fromJsonString(e,i)}static equals(e,i){return f.util.equals(ii,e,i)}};l(ii,"runtime",f),l(ii,"typeName","yorkie.v1.TreeNodes"),l(ii,"fields",f.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:Ho,repeated:!0}]));let ec=ii;const ri=class ri extends O{constructor(e){super();l(this,"createdAt");l(this,"offset",0);f.util.initPartial(e,this)}static fromBinary(e,i){return new ri().fromBinary(e,i)}static fromJson(e,i){return new ri().fromJson(e,i)}static fromJsonString(e,i){return new ri().fromJsonString(e,i)}static equals(e,i){return f.util.equals(ri,e,i)}};l(ri,"runtime",f),l(ri,"typeName","yorkie.v1.TreeNodeID"),l(ri,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"offset",kind:"scalar",T:5}]));let Kr=ri;const ai=class ai extends O{constructor(e){super();l(this,"parentId");l(this,"leftSiblingId");f.util.initPartial(e,this)}static fromBinary(e,i){return new ai().fromBinary(e,i)}static fromJson(e,i){return new ai().fromJson(e,i)}static fromJsonString(e,i){return new ai().fromJsonString(e,i)}static equals(e,i){return f.util.equals(ai,e,i)}};l(ai,"runtime",f),l(ai,"typeName","yorkie.v1.TreePos"),l(ai,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:Kr},{no:2,name:"left_sibling_id",kind:"message",T:Kr}]));let wa=ai;const si=class si extends O{constructor(e){super();l(this,"id","");l(this,"authProvider","");l(this,"username","");l(this,"createdAt");f.util.initPartial(e,this)}static fromBinary(e,i){return new si().fromBinary(e,i)}static fromJson(e,i){return new si().fromJson(e,i)}static fromJsonString(e,i){return new si().fromJsonString(e,i)}static equals(e,i){return f.util.equals(si,e,i)}};l(si,"runtime",f),l(si,"typeName","yorkie.v1.User"),l(si,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"auth_provider",kind:"scalar",T:9},{no:3,name:"username",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Kt}]));let Oy=si;const oi=class oi extends O{constructor(e){super();l(this,"id","");l(this,"name","");l(this,"publicKey","");l(this,"secretKey","");l(this,"authWebhookUrl","");l(this,"authWebhookMethods",[]);l(this,"authWebhookMaxRetries",Z.zero);l(this,"authWebhookMinWaitInterval","");l(this,"authWebhookMaxWaitInterval","");l(this,"authWebhookRequestTimeout","");l(this,"eventWebhookUrl","");l(this,"eventWebhookEvents",[]);l(this,"eventWebhookMaxRetries",Z.zero);l(this,"eventWebhookMinWaitInterval","");l(this,"eventWebhookMaxWaitInterval","");l(this,"eventWebhookRequestTimeout","");l(this,"clientDeactivateThreshold","");l(this,"snapshotThreshold",Z.zero);l(this,"snapshotInterval",Z.zero);l(this,"maxSubscribersPerDocument",0);l(this,"maxAttachmentsPerDocument",0);l(this,"maxSizePerDocument",0);l(this,"removeOnDetach",!1);l(this,"allowedOrigins",[]);l(this,"createdAt");l(this,"updatedAt");f.util.initPartial(e,this)}static fromBinary(e,i){return new oi().fromBinary(e,i)}static fromJson(e,i){return new oi().fromJson(e,i)}static fromJsonString(e,i){return new oi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(oi,e,i)}};l(oi,"runtime",f),l(oi,"typeName","yorkie.v1.Project"),l(oi,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:17,name:"auth_webhook_max_retries",kind:"scalar",T:4},{no:18,name:"auth_webhook_min_wait_interval",kind:"scalar",T:9},{no:19,name:"auth_webhook_max_wait_interval",kind:"scalar",T:9},{no:20,name:"auth_webhook_request_timeout",kind:"scalar",T:9},{no:7,name:"event_webhook_url",kind:"scalar",T:9},{no:8,name:"event_webhook_events",kind:"scalar",T:9,repeated:!0},{no:21,name:"event_webhook_max_retries",kind:"scalar",T:4},{no:22,name:"event_webhook_min_wait_interval",kind:"scalar",T:9},{no:23,name:"event_webhook_max_wait_interval",kind:"scalar",T:9},{no:24,name:"event_webhook_request_timeout",kind:"scalar",T:9},{no:9,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:25,name:"snapshot_threshold",kind:"scalar",T:3},{no:26,name:"snapshot_interval",kind:"scalar",T:3},{no:10,name:"max_subscribers_per_document",kind:"scalar",T:5},{no:11,name:"max_attachments_per_document",kind:"scalar",T:5},{no:15,name:"max_size_per_document",kind:"scalar",T:5},{no:16,name:"remove_on_detach",kind:"scalar",T:8},{no:14,name:"allowed_origins",kind:"scalar",T:9,repeated:!0},{no:12,name:"created_at",kind:"message",T:Kt},{no:13,name:"updated_at",kind:"message",T:Kt}]));let ky=oi;const li=class li extends O{constructor(e){super();l(this,"timestamp",Z.zero);l(this,"value",0);f.util.initPartial(e,this)}static fromBinary(e,i){return new li().fromBinary(e,i)}static fromJson(e,i){return new li().fromJson(e,i)}static fromJsonString(e,i){return new li().fromJsonString(e,i)}static equals(e,i){return f.util.equals(li,e,i)}};l(li,"runtime",f),l(li,"typeName","yorkie.v1.MetricPoint"),l(li,"fields",f.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"value",kind:"scalar",T:5}]));let Cy=li;const ui=class ui extends O{constructor(e){super();l(this,"name");l(this,"authWebhookUrl");l(this,"authWebhookMethods");l(this,"authWebhookMaxRetries");l(this,"authWebhookMinWaitInterval");l(this,"authWebhookMaxWaitInterval");l(this,"authWebhookRequestTimeout");l(this,"eventWebhookUrl");l(this,"eventWebhookEvents");l(this,"eventWebhookMaxRetries");l(this,"eventWebhookMinWaitInterval");l(this,"eventWebhookMaxWaitInterval");l(this,"eventWebhookRequestTimeout");l(this,"snapshotThreshold");l(this,"snapshotInterval");l(this,"clientDeactivateThreshold");l(this,"maxSubscribersPerDocument");l(this,"maxAttachmentsPerDocument");l(this,"maxSizePerDocument");l(this,"removeOnDetach");l(this,"allowedOrigins");f.util.initPartial(e,this)}static fromBinary(e,i){return new ui().fromBinary(e,i)}static fromJson(e,i){return new ui().fromJson(e,i)}static fromJsonString(e,i){return new ui().fromJsonString(e,i)}static equals(e,i){return f.util.equals(ui,e,i)}};l(ui,"runtime",f),l(ui,"typeName","yorkie.v1.UpdatableProjectFields"),l(ui,"fields",f.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:Ot},{no:2,name:"auth_webhook_url",kind:"message",T:Ot},{no:3,name:"auth_webhook_methods",kind:"message",T:wh},{no:12,name:"auth_webhook_max_retries",kind:"message",T:Ke},{no:13,name:"auth_webhook_min_wait_interval",kind:"message",T:Ot},{no:14,name:"auth_webhook_max_wait_interval",kind:"message",T:Ot},{no:15,name:"auth_webhook_request_timeout",kind:"message",T:Ot},{no:4,name:"event_webhook_url",kind:"message",T:Ot},{no:5,name:"event_webhook_events",kind:"message",T:Ah},{no:16,name:"event_webhook_max_retries",kind:"message",T:Ke},{no:17,name:"event_webhook_min_wait_interval",kind:"message",T:Ot},{no:18,name:"event_webhook_max_wait_interval",kind:"message",T:Ot},{no:19,name:"event_webhook_request_timeout",kind:"message",T:Ot},{no:20,name:"snapshot_threshold",kind:"message",T:Ve},{no:21,name:"snapshot_interval",kind:"message",T:Ve},{no:6,name:"client_deactivate_threshold",kind:"message",T:Ot},{no:7,name:"max_subscribers_per_document",kind:"message",T:ye},{no:8,name:"max_attachments_per_document",kind:"message",T:ye},{no:10,name:"max_size_per_document",kind:"message",T:ye},{no:11,name:"remove_on_detach",kind:"message",T:tn},{no:9,name:"allowed_origins",kind:"message",T:Eh}]));let Iy=ui;const ci=class ci extends O{constructor(e){super();l(this,"methods",[]);f.util.initPartial(e,this)}static fromBinary(e,i){return new ci().fromBinary(e,i)}static fromJson(e,i){return new ci().fromJson(e,i)}static fromJsonString(e,i){return new ci().fromJsonString(e,i)}static equals(e,i){return f.util.equals(ci,e,i)}};l(ci,"runtime",f),l(ci,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),l(ci,"fields",f.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let wh=ci;const fi=class fi extends O{constructor(e){super();l(this,"events",[]);f.util.initPartial(e,this)}static fromBinary(e,i){return new fi().fromBinary(e,i)}static fromJson(e,i){return new fi().fromJson(e,i)}static fromJsonString(e,i){return new fi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(fi,e,i)}};l(fi,"runtime",f),l(fi,"typeName","yorkie.v1.UpdatableProjectFields.EventWebhookEvents"),l(fi,"fields",f.util.newFieldList(()=>[{no:1,name:"events",kind:"scalar",T:9,repeated:!0}]));let Ah=fi;const hi=class hi extends O{constructor(e){super();l(this,"origins",[]);f.util.initPartial(e,this)}static fromBinary(e,i){return new hi().fromBinary(e,i)}static fromJson(e,i){return new hi().fromJson(e,i)}static fromJsonString(e,i){return new hi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(hi,e,i)}};l(hi,"runtime",f),l(hi,"typeName","yorkie.v1.UpdatableProjectFields.AllowedOrigins"),l(hi,"fields",f.util.newFieldList(()=>[{no:1,name:"origins",kind:"scalar",T:9,repeated:!0}]));let Eh=hi;const di=class di extends O{constructor(e){super();l(this,"id","");l(this,"key","");l(this,"root","");l(this,"attachedClients",0);l(this,"documentSize");l(this,"schemaKey","");l(this,"presences",{});l(this,"createdAt");l(this,"accessedAt");l(this,"updatedAt");f.util.initPartial(e,this)}static fromBinary(e,i){return new di().fromBinary(e,i)}static fromJson(e,i){return new di().fromJson(e,i)}static fromJsonString(e,i){return new di().fromJsonString(e,i)}static equals(e,i){return f.util.equals(di,e,i)}};l(di,"runtime",f),l(di,"typeName","yorkie.v1.DocumentSummary"),l(di,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"root",kind:"scalar",T:9},{no:7,name:"attached_clients",kind:"scalar",T:5},{no:8,name:"document_size",kind:"message",T:Oh},{no:9,name:"schema_key",kind:"scalar",T:9},{no:10,name:"presences",kind:"map",K:9,V:{kind:"message",T:kc}},{no:4,name:"created_at",kind:"message",T:Kt},{no:5,name:"accessed_at",kind:"message",T:Kt},{no:6,name:"updated_at",kind:"message",T:Kt}]));let By=di;const gi=class gi extends O{constructor(e){super();l(this,"type",0);l(this,"presence");f.util.initPartial(e,this)}static fromBinary(e,i){return new gi().fromBinary(e,i)}static fromJson(e,i){return new gi().fromJson(e,i)}static fromJsonString(e,i){return new gi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(gi,e,i)}};l(gi,"runtime",f),l(gi,"typeName","yorkie.v1.PresenceChange"),l(gi,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Aa)},{no:2,name:"presence",kind:"message",T:kc}]));let Vo=gi;var Aa=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(Aa||{});f.util.setEnumType(Aa,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);var Ue;let kc=(Ue=class extends O{constructor(e){super();l(this,"data",{});f.util.initPartial(e,this)}static fromBinary(e,i){return new Ue().fromBinary(e,i)}static fromJson(e,i){return new Ue().fromJson(e,i)}static fromJsonString(e,i){return new Ue().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Ue,e,i)}},l(Ue,"runtime",f),l(Ue,"typeName","yorkie.v1.Presence"),l(Ue,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}])),Ue);var Le;let ES=(Le=class extends O{constructor(e){super();l(this,"serverSeq",Z.zero);l(this,"clientSeq",0);f.util.initPartial(e,this)}static fromBinary(e,i){return new Le().fromBinary(e,i)}static fromJson(e,i){return new Le().fromJson(e,i)}static fromJsonString(e,i){return new Le().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Le,e,i)}},l(Le,"runtime",f),l(Le,"typeName","yorkie.v1.Checkpoint"),l(Le,"fields",f.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),Le);const mi=class mi extends O{constructor(e){super();l(this,"createdAt");l(this,"offset",0);l(this,"relativeOffset",0);f.util.initPartial(e,this)}static fromBinary(e,i){return new mi().fromBinary(e,i)}static fromJson(e,i){return new mi().fromJson(e,i)}static fromJsonString(e,i){return new mi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(mi,e,i)}};l(mi,"runtime",f),l(mi,"typeName","yorkie.v1.TextNodePos"),l(mi,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let Ea=mi;var Je;let M=(Je=class extends O{constructor(e){super();l(this,"lamport",Z.zero);l(this,"delimiter",0);l(this,"actorId",new Uint8Array(0));f.util.initPartial(e,this)}static fromBinary(e,i){return new Je().fromBinary(e,i)}static fromJson(e,i){return new Je().fromJson(e,i)}static fromJsonString(e,i){return new Je().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Je,e,i)}},l(Je,"runtime",f),l(Je,"typeName","yorkie.v1.TimeTicket"),l(Je,"fields",f.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),Je);const yi=class yi extends O{constructor(e){super();l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(e,this)}static fromBinary(e,i){return new yi().fromBinary(e,i)}static fromJson(e,i){return new yi().fromJson(e,i)}static fromJsonString(e,i){return new yi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(yi,e,i)}};l(yi,"runtime",f),l(yi,"typeName","yorkie.v1.DocEventBody"),l(yi,"fields",f.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let Nh=yi;const pi=class pi extends O{constructor(e){super();l(this,"type",0);l(this,"publisher","");l(this,"body");f.util.initPartial(e,this)}static fromBinary(e,i){return new pi().fromBinary(e,i)}static fromJson(e,i){return new pi().fromJson(e,i)}static fromJsonString(e,i){return new pi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(pi,e,i)}};l(pi,"runtime",f),l(pi,"typeName","yorkie.v1.DocEvent"),l(pi,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(pa)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Nh}]));let xh=pi;const vi=class vi extends O{constructor(e){super();l(this,"type",0);l(this,"count",Z.zero);l(this,"seq",Z.zero);f.util.initPartial(e,this)}static fromBinary(e,i){return new vi().fromBinary(e,i)}static fromJson(e,i){return new vi().fromJson(e,i)}static fromJsonString(e,i){return new vi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(vi,e,i)}};l(vi,"runtime",f),l(vi,"typeName","yorkie.v1.PresenceEvent"),l(vi,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(ug)},{no:2,name:"count",kind:"scalar",T:3},{no:3,name:"seq",kind:"scalar",T:3}]));let Dh=vi;var ug=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.COUNT_CHANGED=1]="COUNT_CHANGED",n))(ug||{});f.util.setEnumType(ug,"yorkie.v1.PresenceEvent.Type",[{no:0,name:"TYPE_UNSPECIFIED"},{no:1,name:"TYPE_COUNT_CHANGED"}]);const Si=class Si extends O{constructor(e){super();l(this,"data",0);l(this,"meta",0);f.util.initPartial(e,this)}static fromBinary(e,i){return new Si().fromBinary(e,i)}static fromJson(e,i){return new Si().fromJson(e,i)}static fromJsonString(e,i){return new Si().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Si,e,i)}};l(Si,"runtime",f),l(Si,"typeName","yorkie.v1.DataSize"),l(Si,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"scalar",T:5},{no:2,name:"meta",kind:"scalar",T:5}]));let nc=Si;const bi=class bi extends O{constructor(e){super();l(this,"live");l(this,"gc");f.util.initPartial(e,this)}static fromBinary(e,i){return new bi().fromBinary(e,i)}static fromJson(e,i){return new bi().fromJson(e,i)}static fromJsonString(e,i){return new bi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(bi,e,i)}};l(bi,"runtime",f),l(bi,"typeName","yorkie.v1.DocSize"),l(bi,"fields",f.util.newFieldList(()=>[{no:1,name:"live",kind:"message",T:nc},{no:2,name:"gc",kind:"message",T:nc}]));let Oh=bi;const Ti=class Ti extends O{constructor(e){super();l(this,"id","");l(this,"name","");l(this,"version",0);l(this,"body","");l(this,"rules",[]);l(this,"createdAt");f.util.initPartial(e,this)}static fromBinary(e,i){return new Ti().fromBinary(e,i)}static fromJson(e,i){return new Ti().fromJson(e,i)}static fromJsonString(e,i){return new Ti().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Ti,e,i)}};l(Ti,"runtime",f),l(Ti,"typeName","yorkie.v1.Schema"),l(Ti,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"version",kind:"scalar",T:5},{no:4,name:"body",kind:"scalar",T:9},{no:5,name:"rules",kind:"message",T:ic,repeated:!0},{no:6,name:"created_at",kind:"message",T:Kt}]));let Ry=Ti;const wi=class wi extends O{constructor(e){super();l(this,"path","");l(this,"type","");f.util.initPartial(e,this)}static fromBinary(e,i){return new wi().fromBinary(e,i)}static fromJson(e,i){return new wi().fromJson(e,i)}static fromJsonString(e,i){return new wi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(wi,e,i)}};l(wi,"runtime",f),l(wi,"typeName","yorkie.v1.Rule"),l(wi,"fields",f.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:9},{no:2,name:"type",kind:"scalar",T:9}]));let ic=wi;const Ai=class Ai extends O{constructor(e){super();l(this,"clientKey","");l(this,"metadata",{});f.util.initPartial(e,this)}static fromBinary(e,i){return new Ai().fromBinary(e,i)}static fromJson(e,i){return new Ai().fromJson(e,i)}static fromJsonString(e,i){return new Ai().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Ai,e,i)}};l(Ai,"runtime",f),l(Ai,"typeName","yorkie.v1.ActivateClientRequest"),l(Ai,"fields",f.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let kh=Ai;const Ei=class Ei extends O{constructor(e){super();l(this,"clientId","");f.util.initPartial(e,this)}static fromBinary(e,i){return new Ei().fromBinary(e,i)}static fromJson(e,i){return new Ei().fromJson(e,i)}static fromJsonString(e,i){return new Ei().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Ei,e,i)}};l(Ei,"runtime",f),l(Ei,"typeName","yorkie.v1.ActivateClientResponse"),l(Ei,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Ch=Ei;const Ni=class Ni extends O{constructor(e){super();l(this,"clientId","");l(this,"synchronous",!1);f.util.initPartial(e,this)}static fromBinary(e,i){return new Ni().fromBinary(e,i)}static fromJson(e,i){return new Ni().fromJson(e,i)}static fromJsonString(e,i){return new Ni().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Ni,e,i)}};l(Ni,"runtime",f),l(Ni,"typeName","yorkie.v1.DeactivateClientRequest"),l(Ni,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"synchronous",kind:"scalar",T:8}]));let Ih=Ni;const xi=class xi extends O{constructor(t){super(),f.util.initPartial(t,this)}static fromBinary(t,e){return new xi().fromBinary(t,e)}static fromJson(t,e){return new xi().fromJson(t,e)}static fromJsonString(t,e){return new xi().fromJsonString(t,e)}static equals(t,e){return f.util.equals(xi,t,e)}};l(xi,"runtime",f),l(xi,"typeName","yorkie.v1.DeactivateClientResponse"),l(xi,"fields",f.util.newFieldList(()=>[]));let Bh=xi;const Di=class Di extends O{constructor(e){super();l(this,"clientId","");l(this,"changePack");l(this,"schemaKey","");f.util.initPartial(e,this)}static fromBinary(e,i){return new Di().fromBinary(e,i)}static fromJson(e,i){return new Di().fromJson(e,i)}static fromJsonString(e,i){return new Di().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Di,e,i)}};l(Di,"runtime",f),l(Di,"typeName","yorkie.v1.AttachDocumentRequest"),l(Di,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:vr},{no:3,name:"schema_key",kind:"scalar",T:9}]));let Rh=Di;const Oi=class Oi extends O{constructor(e){super();l(this,"documentId","");l(this,"changePack");l(this,"maxSizePerDocument",0);l(this,"schemaRules",[]);f.util.initPartial(e,this)}static fromBinary(e,i){return new Oi().fromBinary(e,i)}static fromJson(e,i){return new Oi().fromJson(e,i)}static fromJsonString(e,i){return new Oi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Oi,e,i)}};l(Oi,"runtime",f),l(Oi,"typeName","yorkie.v1.AttachDocumentResponse"),l(Oi,"fields",f.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:vr},{no:3,name:"max_size_per_document",kind:"scalar",T:5},{no:4,name:"schema_rules",kind:"message",T:ic,repeated:!0}]));let zh=Oi;const ki=class ki extends O{constructor(e){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");l(this,"removeIfNotAttached",!1);f.util.initPartial(e,this)}static fromBinary(e,i){return new ki().fromBinary(e,i)}static fromJson(e,i){return new ki().fromJson(e,i)}static fromJsonString(e,i){return new ki().fromJsonString(e,i)}static equals(e,i){return f.util.equals(ki,e,i)}};l(ki,"runtime",f),l(ki,"typeName","yorkie.v1.DetachDocumentRequest"),l(ki,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:vr},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let Mh=ki;const Ci=class Ci extends O{constructor(e){super();l(this,"changePack");f.util.initPartial(e,this)}static fromBinary(e,i){return new Ci().fromBinary(e,i)}static fromJson(e,i){return new Ci().fromJson(e,i)}static fromJsonString(e,i){return new Ci().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Ci,e,i)}};l(Ci,"runtime",f),l(Ci,"typeName","yorkie.v1.DetachDocumentResponse"),l(Ci,"fields",f.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:vr}]));let Uh=Ci;const Ii=class Ii extends O{constructor(e){super();l(this,"clientId","");l(this,"documentId","");f.util.initPartial(e,this)}static fromBinary(e,i){return new Ii().fromBinary(e,i)}static fromJson(e,i){return new Ii().fromJson(e,i)}static fromJsonString(e,i){return new Ii().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Ii,e,i)}};l(Ii,"runtime",f),l(Ii,"typeName","yorkie.v1.WatchDocumentRequest"),l(Ii,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let Lh=Ii;const Bi=class Bi extends O{constructor(e){super();l(this,"body",{case:void 0});f.util.initPartial(e,this)}static fromBinary(e,i){return new Bi().fromBinary(e,i)}static fromJson(e,i){return new Bi().fromJson(e,i)}static fromJsonString(e,i){return new Bi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Bi,e,i)}};l(Bi,"runtime",f),l(Bi,"typeName","yorkie.v1.WatchDocumentResponse"),l(Bi,"fields",f.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:qh,oneof:"body"},{no:2,name:"event",kind:"message",T:xh,oneof:"body"}]));let Jh=Bi;const Ri=class Ri extends O{constructor(e){super();l(this,"clientIds",[]);f.util.initPartial(e,this)}static fromBinary(e,i){return new Ri().fromBinary(e,i)}static fromJson(e,i){return new Ri().fromJson(e,i)}static fromJsonString(e,i){return new Ri().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Ri,e,i)}};l(Ri,"runtime",f),l(Ri,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),l(Ri,"fields",f.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let qh=Ri;const zi=class zi extends O{constructor(e){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");f.util.initPartial(e,this)}static fromBinary(e,i){return new zi().fromBinary(e,i)}static fromJson(e,i){return new zi().fromJson(e,i)}static fromJsonString(e,i){return new zi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(zi,e,i)}};l(zi,"runtime",f),l(zi,"typeName","yorkie.v1.RemoveDocumentRequest"),l(zi,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:vr}]));let Ph=zi;const Mi=class Mi extends O{constructor(e){super();l(this,"changePack");f.util.initPartial(e,this)}static fromBinary(e,i){return new Mi().fromBinary(e,i)}static fromJson(e,i){return new Mi().fromJson(e,i)}static fromJsonString(e,i){return new Mi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Mi,e,i)}};l(Mi,"runtime",f),l(Mi,"typeName","yorkie.v1.RemoveDocumentResponse"),l(Mi,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:vr}]));let Hh=Mi;const Ui=class Ui extends O{constructor(e){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");l(this,"pushOnly",!1);f.util.initPartial(e,this)}static fromBinary(e,i){return new Ui().fromBinary(e,i)}static fromJson(e,i){return new Ui().fromJson(e,i)}static fromJsonString(e,i){return new Ui().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Ui,e,i)}};l(Ui,"runtime",f),l(Ui,"typeName","yorkie.v1.PushPullChangesRequest"),l(Ui,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:vr},{no:4,name:"push_only",kind:"scalar",T:8}]));let Vh=Ui;const Li=class Li extends O{constructor(e){super();l(this,"changePack");f.util.initPartial(e,this)}static fromBinary(e,i){return new Li().fromBinary(e,i)}static fromJson(e,i){return new Li().fromJson(e,i)}static fromJsonString(e,i){return new Li().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Li,e,i)}};l(Li,"runtime",f),l(Li,"typeName","yorkie.v1.PushPullChangesResponse"),l(Li,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:vr}]));let Kh=Li;const Ji=class Ji extends O{constructor(e){super();l(this,"clientId","");l(this,"documentId","");l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(e,this)}static fromBinary(e,i){return new Ji().fromBinary(e,i)}static fromJson(e,i){return new Ji().fromJson(e,i)}static fromJsonString(e,i){return new Ji().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Ji,e,i)}};l(Ji,"runtime",f),l(Ji,"typeName","yorkie.v1.BroadcastRequest"),l(Ji,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let jh=Ji;const qi=class qi extends O{constructor(t){super(),f.util.initPartial(t,this)}static fromBinary(t,e){return new qi().fromBinary(t,e)}static fromJson(t,e){return new qi().fromJson(t,e)}static fromJsonString(t,e){return new qi().fromJsonString(t,e)}static equals(t,e){return f.util.equals(qi,t,e)}};l(qi,"runtime",f),l(qi,"typeName","yorkie.v1.BroadcastResponse"),l(qi,"fields",f.util.newFieldList(()=>[]));let $h=qi;const Pi=class Pi extends O{constructor(e){super();l(this,"clientId","");l(this,"presenceKey","");f.util.initPartial(e,this)}static fromBinary(e,i){return new Pi().fromBinary(e,i)}static fromJson(e,i){return new Pi().fromJson(e,i)}static fromJsonString(e,i){return new Pi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Pi,e,i)}};l(Pi,"runtime",f),l(Pi,"typeName","yorkie.v1.AttachPresenceRequest"),l(Pi,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"presence_key",kind:"scalar",T:9}]));let Gh=Pi;const Hi=class Hi extends O{constructor(e){super();l(this,"presenceId","");l(this,"count",Z.zero);f.util.initPartial(e,this)}static fromBinary(e,i){return new Hi().fromBinary(e,i)}static fromJson(e,i){return new Hi().fromJson(e,i)}static fromJsonString(e,i){return new Hi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Hi,e,i)}};l(Hi,"runtime",f),l(Hi,"typeName","yorkie.v1.AttachPresenceResponse"),l(Hi,"fields",f.util.newFieldList(()=>[{no:1,name:"presence_id",kind:"scalar",T:9},{no:2,name:"count",kind:"scalar",T:3}]));let Yh=Hi;const Vi=class Vi extends O{constructor(e){super();l(this,"clientId","");l(this,"presenceId","");l(this,"presenceKey","");f.util.initPartial(e,this)}static fromBinary(e,i){return new Vi().fromBinary(e,i)}static fromJson(e,i){return new Vi().fromJson(e,i)}static fromJsonString(e,i){return new Vi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Vi,e,i)}};l(Vi,"runtime",f),l(Vi,"typeName","yorkie.v1.DetachPresenceRequest"),l(Vi,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"presence_id",kind:"scalar",T:9},{no:3,name:"presence_key",kind:"scalar",T:9}]));let Xh=Vi;const Ki=class Ki extends O{constructor(e){super();l(this,"count",Z.zero);f.util.initPartial(e,this)}static fromBinary(e,i){return new Ki().fromBinary(e,i)}static fromJson(e,i){return new Ki().fromJson(e,i)}static fromJsonString(e,i){return new Ki().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Ki,e,i)}};l(Ki,"runtime",f),l(Ki,"typeName","yorkie.v1.DetachPresenceResponse"),l(Ki,"fields",f.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3}]));let Fh=Ki;const ji=class ji extends O{constructor(e){super();l(this,"clientId","");l(this,"presenceId","");l(this,"presenceKey","");f.util.initPartial(e,this)}static fromBinary(e,i){return new ji().fromBinary(e,i)}static fromJson(e,i){return new ji().fromJson(e,i)}static fromJsonString(e,i){return new ji().fromJsonString(e,i)}static equals(e,i){return f.util.equals(ji,e,i)}};l(ji,"runtime",f),l(ji,"typeName","yorkie.v1.RefreshPresenceRequest"),l(ji,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"presence_id",kind:"scalar",T:9},{no:3,name:"presence_key",kind:"scalar",T:9}]));let Zh=ji;const $i=class $i extends O{constructor(e){super();l(this,"count",Z.zero);f.util.initPartial(e,this)}static fromBinary(e,i){return new $i().fromBinary(e,i)}static fromJson(e,i){return new $i().fromJson(e,i)}static fromJsonString(e,i){return new $i().fromJsonString(e,i)}static equals(e,i){return f.util.equals($i,e,i)}};l($i,"runtime",f),l($i,"typeName","yorkie.v1.RefreshPresenceResponse"),l($i,"fields",f.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3}]));let Qh=$i;const Gi=class Gi extends O{constructor(e){super();l(this,"clientId","");l(this,"presenceKey","");f.util.initPartial(e,this)}static fromBinary(e,i){return new Gi().fromBinary(e,i)}static fromJson(e,i){return new Gi().fromJson(e,i)}static fromJsonString(e,i){return new Gi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Gi,e,i)}};l(Gi,"runtime",f),l(Gi,"typeName","yorkie.v1.WatchPresenceRequest"),l(Gi,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"presence_key",kind:"scalar",T:9}]));let _h=Gi;const Yi=class Yi extends O{constructor(e){super();l(this,"body",{case:void 0});f.util.initPartial(e,this)}static fromBinary(e,i){return new Yi().fromBinary(e,i)}static fromJson(e,i){return new Yi().fromJson(e,i)}static fromJsonString(e,i){return new Yi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Yi,e,i)}};l(Yi,"runtime",f),l(Yi,"typeName","yorkie.v1.WatchPresenceResponse"),l(Yi,"fields",f.util.newFieldList(()=>[{no:1,name:"initialized",kind:"message",T:td,oneof:"body"},{no:2,name:"event",kind:"message",T:Dh,oneof:"body"}]));let Wh=Yi;const Xi=class Xi extends O{constructor(e){super();l(this,"count",Z.zero);l(this,"seq",Z.zero);f.util.initPartial(e,this)}static fromBinary(e,i){return new Xi().fromBinary(e,i)}static fromJson(e,i){return new Xi().fromJson(e,i)}static fromJsonString(e,i){return new Xi().fromJsonString(e,i)}static equals(e,i){return f.util.equals(Xi,e,i)}};l(Xi,"runtime",f),l(Xi,"typeName","yorkie.v1.WatchPresenceInitialized"),l(Xi,"fields",f.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3},{no:2,name:"seq",kind:"scalar",T:3}]));let td=Xi;const zA={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:kh,O:Ch,kind:It.Unary},deactivateClient:{name:"DeactivateClient",I:Ih,O:Bh,kind:It.Unary},attachDocument:{name:"AttachDocument",I:Rh,O:zh,kind:It.Unary},detachDocument:{name:"DetachDocument",I:Mh,O:Uh,kind:It.Unary},removeDocument:{name:"RemoveDocument",I:Ph,O:Hh,kind:It.Unary},pushPullChanges:{name:"PushPullChanges",I:Vh,O:Kh,kind:It.Unary},watchDocument:{name:"WatchDocument",I:Lh,O:Jh,kind:It.ServerStreaming},broadcast:{name:"Broadcast",I:jh,O:$h,kind:It.Unary},attachPresence:{name:"AttachPresence",I:Gh,O:Yh,kind:It.Unary},detachPresence:{name:"DetachPresence",I:Xh,O:Fh,kind:It.Unary},refreshPresence:{name:"RefreshPresence",I:Zh,O:Qh,kind:It.Unary},watchPresence:{name:"WatchPresence",I:_h,O:Wh,kind:It.ServerStreaming}}},MA=f.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);f.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:rr}]);f.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:UA,repeated:!0}]);const UA=f.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"api_service",kind:"scalar",T:9},{no:4,name:"quota_metric",kind:"scalar",T:9},{no:5,name:"quota_id",kind:"scalar",T:9},{no:6,name:"quota_dimensions",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:7,name:"quota_value",kind:"scalar",T:3},{no:8,name:"future_quota_value",kind:"scalar",T:3,opt:!0}],{localName:"QuotaFailure_Violation"});f.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:LA,repeated:!0}]);const LA=f.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});f.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:JA,repeated:!0}]);const JA=f.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9},{no:4,name:"localized_message",kind:"message",T:PA}],{localName:"BadRequest_FieldViolation"});f.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:qA,repeated:!0}]);const qA=f.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"}),PA=f.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var S=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrDocumentNotAttached="ErrDocumentNotAttached",n.ErrDocumentNotDetached="ErrDocumentNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrDocumentSizeExceedsLimit="ErrDocumentSizeExceedsLimit",n.ErrDocumentSchemaValidationFailed="ErrDocumentSchemaValidationFailed",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n.ErrTooManySubscribers="ErrTooManySubscribers",n.ErrTooManyAttachments="ErrTooManyAttachments",n))(S||{});class b extends Error{constructor(e,i){super(i);l(this,"name","YorkieError");l(this,"stack");this.code=e,this.message=i,this.toString=()=>`[code=${this.code}]: ${this.message}`}}var xn=(n=>(n.Put="put",n.Clear="clear",n))(xn||{});const cg="000000000000000000000000",An=24;class Ge{constructor(t,e,i){l(this,"lamport");l(this,"delimiter");l(this,"actorID");this.lamport=t,this.delimiter=e,this.actorID=i}static of(t,e,i){return new Ge(t,e,i)}static fromStruct(t){return Ge.of(BigInt(t.lamport),t.delimiter,t.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(t){return new Ge(this.lamport,this.delimiter,t)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(t){return this.compare(t)>0}equals(t){return this.compare(t)===0}compare(t){if(this.lamport>t.lamport)return 1;if(t.lamport>this.lamport)return-1;const e=this.actorID.localeCompare(t.actorID);return e!==0?e:this.delimiter>t.delimiter?1:t.delimiter>this.delimiter?-1:0}}const ed=0n,NS=0,nd=9223372036854775807n,xs=new Ge(ed,NS,cg);function Sn(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(t){switch(t){case'"':case"\\":return"\\"+t;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return t}})}class fl{constructor(t){l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");this.createdAt=t}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setCreatedAt(t){this.createdAt=t}setMovedAt(t){return!this.movedAt||t&&t.after(this.movedAt)?(this.movedAt=t,!0):!1}setRemovedAt(t){this.removedAt=t}remove(t){return t&&t.after(this.createdAt)&&(!this.removedAt||t.after(this.removedAt))?(this.removedAt=t,!0):!1}isRemoved(){return!!this.removedAt}getMetaUsage(){let t=0;return this.getCreatedAt()&&(t+=An),this.getMovedAt()&&(t+=An),this.getRemovedAt()&&(t+=An),t}}class jr extends fl{constructor(t){super(t)}}class fg{constructor(t,e){l(this,"strKey");l(this,"value");this.strKey=t,this.value=e}static of(t,e){return new fg(t,e)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(t){return this.value.remove(t)}}class Ko{constructor(){l(this,"nodeMapByKey");l(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new Ko}set(t,e,i){let r;const a=this.nodeMapByKey.get(t);a&&!a.isRemoved()&&a.remove(i)&&(r=a.getValue());const s=fg.of(t,e);return this.nodeMapByCreatedAt.set(e.getCreatedAt().toIDString(),s),(!a||i.after(a.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(t,s),e.setMovedAt(i)),r}delete(t,e){if(!this.nodeMapByCreatedAt.has(t.toIDString()))throw new b(S.ErrInvalidArgument,`fail to find ${t.toIDString()}`);const i=this.nodeMapByCreatedAt.get(t.toIDString());return i.remove(e),i.getValue()}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return e.getStrKey()}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new b(S.ErrInvalidArgument,`fail to find ${t.getCreatedAt().toIDString()}`);const i=this.nodeMapByKey.get(e.getStrKey());e===i&&this.nodeMapByKey.delete(i.getStrKey()),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}deleteByKey(t,e){const i=this.nodeMapByKey.get(t);if(i&&i.remove(e))return i.getValue()}has(t){const e=this.nodeMapByKey.get(t);return e?!e.isRemoved():!1}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}get(t){const e=this.nodeMapByKey.get(t);if(!(!e||e.isRemoved()))return e}*[Symbol.iterator](){for(const[,t]of this.nodeMapByKey)yield t}}class Zt extends jr{constructor(e,i){super(e);l(this,"memberNodes");this.memberNodes=i}static create(e,i){if(!i)return new Zt(e,Ko.create());const r=Ko.create();for(const[a,s]of Object.entries(i))r.set(a,s.deepcopy(),s.getCreatedAt());return new Zt(e,r)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,i,r){return this.memberNodes.set(e,i,r)}delete(e,i){return this.memberNodes.delete(e,i)}deleteByKey(e,i){return this.memberNodes.deleteByKey(e,i)}get(e){const i=this.memberNodes.get(e);return i==null?void 0:i.getValue()}getByID(e){const i=this.memberNodes.getByID(e);return i==null?void 0:i.getValue()}has(e){return this.memberNodes.has(e)}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const[i,r]of this)e.push(`"${Sn(i)}":${r.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[i,r]of this){const{createdAt:a,value:s,type:o}=r.toJSForTest();e[i]={key:i,createdAt:a,value:s,type:o}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[i]of this)e.push(i);return e}toSortedJSON(){var r;const e=Array();for(const[a]of this)e.push(a);const i=[];for(const a of e.sort()){const s=(r=this.memberNodes.get(a))==null?void 0:r.getValue();i.push(`"${Sn(a)}":${s.toSortedJSON()}`)}return`{${i.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=Zt.create(this.getCreatedAt());for(const i of this.memberNodes)e.memberNodes.set(i.getStrKey(),i.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const i of this.memberNodes){const r=i.getValue();if(e(r,this))return;r instanceof jr&&r.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const i of this.memberNodes)e.has(i.getStrKey())||(e.add(i.getStrKey()),i.isRemoved()||(yield[i.getStrKey(),i.getValue()]))}}var gt=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(gt||{});class ln{constructor(t,e){l(this,"parentCreatedAt");l(this,"executedAt");this.parentCreatedAt=t,this.executedAt=e}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new b(S.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(t){this.executedAt&&(this.executedAt=this.executedAt.setActor(t))}setExecutedAt(t){this.executedAt=t}}class xS{constructor(t){l(this,"value");l(this,"left");l(this,"right");l(this,"parent");l(this,"weight");this.value=t,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(t){this.left=t}setRight(t){this.right=t}setParent(t){this.parent=t}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(t){this.weight+=t}initWeight(){this.weight=this.getLength()}}class jo{constructor(t){l(this,"root");this.root=t}get length(){return this.root?this.root.getWeight():0}find(t){if(!this.root||t<0)return[void 0,0];let e=this.root;for(;;)if(e.hasLeft()&&t<=e.getLeftWeight())e=e.getLeft();else if(e.hasRight()&&e.getLeftWeight()+e.getLength()<t)t-=e.getLeftWeight()+e.getLength(),e=e.getRight();else{t-=e.getLeftWeight();break}if(t>e.getLength())throw new b(S.ErrInvalidArgument,`out of index range: pos: ${t} > node.length: ${e.getLength()}`);return this.splayNode(e),[e,t]}indexOf(t){return!t||t!==this.root&&!t.hasLinks()?-1:(this.splayNode(t),this.root.getLeftWeight())}getRoot(){return this.root}insert(t){return this.insertAfter(this.root,t)}insertAfter(t,e){return t?(this.splayNode(t),this.root=e,e.setRight(t.getRight()),t.hasRight()&&t.getRight().setParent(e),e.setLeft(t),t.setParent(e),t.setRight(),this.updateWeight(t),this.updateWeight(e),e):(this.root=e,e)}updateWeight(t){t.initWeight(),t.hasLeft()&&t.increaseWeight(t.getLeftWeight()),t.hasRight()&&t.increaseWeight(t.getRightWeight())}updateTreeWeight(t){for(;t;)this.updateWeight(t),t=t.getParent()}splayNode(t){if(t)for(;;)if(this.isLeftChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t),this.rotateLeft(t);else if(this.isLeftChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t.getParent()),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t.getParent()),this.rotateLeft(t);else{this.isLeftChild(t)?this.rotateRight(t):this.isRightChild(t)&&this.rotateLeft(t),this.updateWeight(t);return}}delete(t){this.splayNode(t);const e=new jo(t.getLeft());e.root&&e.root.setParent();const i=new jo(t.getRight());if(i.root&&i.root.setParent(),e.root){const r=e.getRightmost();e.splayNode(r),e.root.setRight(i.root),i.root&&i.root.setParent(e.root),this.root=e.root}else this.root=i.root;t.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(t,e){if(!e){this.splayNode(t),this.cutOffRight(t);return}this.splayNode(t),this.splayNode(e),e.getLeft()!=t&&this.rotateRight(t),this.cutOffRight(t)}cutOffRight(t){const e=[];this.traversePostorder(t.getRight(),e);for(const i of e)i.initWeight();this.updateTreeWeight(t)}toTestString(){const t=[];return this.traverseInorder(this.root,t),t.map(e=>`[${e.getWeight()},${e.getLength()}]${e.getValue()||""}`).join("")}checkWeight(){const t=[];this.traverseInorder(this.root,t);for(const e of t)if(e.getWeight()!=e.getLength()+e.getLeftWeight()+e.getRightWeight())return!1;return!0}getRightmost(){let t=this.root;for(;t.hasRight();)t=t.getRight();return t}traverseInorder(t,e){t&&(this.traverseInorder(t.getLeft(),e),e.push(t),this.traverseInorder(t.getRight(),e))}traversePostorder(t,e){t&&(this.traversePostorder(t.getLeft(),e),this.traversePostorder(t.getRight(),e),e.push(t))}rotateLeft(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setRight(t.getLeft()),e.hasRight()&&e.getRight().setParent(e),t.setLeft(e),t.getLeft().setParent(t),this.updateWeight(e),this.updateWeight(t)}rotateRight(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setLeft(t.getRight()),e.hasLeft()&&e.getLeft().setParent(e),t.setRight(e),t.getRight().setParent(t),this.updateWeight(e),this.updateWeight(t)}isLeftChild(t){return t&&t.hasParent()?t.getParent().getLeft()===t:!1}isRightChild(t){return t&&t.hasParent()?t.getParent().getRight()===t:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var je=null;try{je=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function F(n,t,e){this.low=n|0,this.high=t|0,this.unsigned=!!e}F.prototype.__isLong__;Object.defineProperty(F.prototype,"__isLong__",{value:!0});function _t(n){return(n&&n.__isLong__)===!0}function zy(n){var t=Math.clz32(n&-n);return n?31-t:t}F.isLong=_t;var My={},Uy={};function Ca(n,t){var e,i,r;return t?(n>>>=0,(r=0<=n&&n<256)&&(i=Uy[n],i)?i:(e=_(n,0,!0),r&&(Uy[n]=e),e)):(n|=0,(r=-128<=n&&n<128)&&(i=My[n],i)?i:(e=_(n,n<0?-1:0,!1),r&&(My[n]=e),e))}F.fromInt=Ca;function $e(n,t){if(isNaN(n))return t?sr:en;if(t){if(n<0)return sr;if(n>=DS)return CS}else{if(n<=-Jy)return se;if(n+1>=Jy)return kS}return n<0?$e(-n,t).neg():_(n%Ds|0,n/Ds|0,t)}F.fromNumber=$e;function _(n,t,e){return new F(n,t,e)}F.fromBits=_;var rc=Math.pow;function hg(n,t,e){if(n.length===0)throw Error("empty string");if(typeof t=="number"?(e=t,t=!1):t=!!t,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return t?sr:en;if(e=e||10,e<2||36<e)throw RangeError("radix");var i;if((i=n.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return hg(n.substring(1),t,e).neg();for(var r=$e(rc(e,8)),a=en,s=0;s<n.length;s+=8){var o=Math.min(8,n.length-s),u=parseInt(n.substring(s,s+o),e);if(o<8){var c=$e(rc(e,o));a=a.mul(c).add($e(u))}else a=a.mul(r),a=a.add($e(u))}return a.unsigned=t,a}F.fromString=hg;function Fe(n,t){return typeof n=="number"?$e(n,t):typeof n=="string"?hg(n,t):_(n.low,n.high,typeof t=="boolean"?t:n.unsigned)}F.fromValue=Fe;var Ly=65536,HA=1<<24,Ds=Ly*Ly,DS=Ds*Ds,Jy=DS/2,qy=Ca(HA),en=Ca(0);F.ZERO=en;var sr=Ca(0,!0);F.UZERO=sr;var ts=Ca(1);F.ONE=ts;var OS=Ca(1,!0);F.UONE=OS;var id=Ca(-1);F.NEG_ONE=id;var kS=_(-1,2147483647,!1);F.MAX_VALUE=kS;var CS=_(-1,-1,!0);F.MAX_UNSIGNED_VALUE=CS;var se=_(0,-2147483648,!1);F.MIN_VALUE=se;var D=F.prototype;D.toInt=function(){return this.unsigned?this.low>>>0:this.low};D.toNumber=function(){return this.unsigned?(this.high>>>0)*Ds+(this.low>>>0):this.high*Ds+(this.low>>>0)};D.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(se)){var e=$e(t),i=this.div(e),r=i.mul(e).sub(this);return i.toString(t)+r.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var a=$e(rc(t,6),this.unsigned),s=this,o="";;){var u=s.div(a),c=s.sub(u.mul(a)).toInt()>>>0,h=c.toString(t);if(s=u,s.isZero())return h+o;for(;h.length<6;)h="0"+h;o=""+h+o}};D.getHighBits=function(){return this.high};D.getHighBitsUnsigned=function(){return this.high>>>0};D.getLowBits=function(){return this.low};D.getLowBitsUnsigned=function(){return this.low>>>0};D.getNumBitsAbs=function(){if(this.isNegative())return this.eq(se)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1};D.isSafeInteger=function(){var t=this.high>>21;return t?this.unsigned?!1:t===-1&&!(this.low===0&&this.high===-2097152):!0};D.isZero=function(){return this.high===0&&this.low===0};D.eqz=D.isZero;D.isNegative=function(){return!this.unsigned&&this.high<0};D.isPositive=function(){return this.unsigned||this.high>=0};D.isOdd=function(){return(this.low&1)===1};D.isEven=function(){return(this.low&1)===0};D.equals=function(t){return _t(t)||(t=Fe(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};D.eq=D.equals;D.notEquals=function(t){return!this.eq(t)};D.neq=D.notEquals;D.ne=D.notEquals;D.lessThan=function(t){return this.comp(t)<0};D.lt=D.lessThan;D.lessThanOrEqual=function(t){return this.comp(t)<=0};D.lte=D.lessThanOrEqual;D.le=D.lessThanOrEqual;D.greaterThan=function(t){return this.comp(t)>0};D.gt=D.greaterThan;D.greaterThanOrEqual=function(t){return this.comp(t)>=0};D.gte=D.greaterThanOrEqual;D.ge=D.greaterThanOrEqual;D.compare=function(t){if(_t(t)||(t=Fe(t)),this.eq(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};D.comp=D.compare;D.negate=function(){return!this.unsigned&&this.eq(se)?se:this.not().add(ts)};D.neg=D.negate;D.add=function(t){_t(t)||(t=Fe(t));var e=this.high>>>16,i=this.high&65535,r=this.low>>>16,a=this.low&65535,s=t.high>>>16,o=t.high&65535,u=t.low>>>16,c=t.low&65535,h=0,m=0,d=0,g=0;return g+=a+c,d+=g>>>16,g&=65535,d+=r+u,m+=d>>>16,d&=65535,m+=i+o,h+=m>>>16,m&=65535,h+=e+s,h&=65535,_(d<<16|g,h<<16|m,this.unsigned)};D.subtract=function(t){return _t(t)||(t=Fe(t)),this.add(t.neg())};D.sub=D.subtract;D.multiply=function(t){if(this.isZero())return this;if(_t(t)||(t=Fe(t)),je){var e=je.mul(this.low,this.high,t.low,t.high);return _(e,je.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?sr:en;if(this.eq(se))return t.isOdd()?se:en;if(t.eq(se))return this.isOdd()?se:en;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(qy)&&t.lt(qy))return $e(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,r=this.high&65535,a=this.low>>>16,s=this.low&65535,o=t.high>>>16,u=t.high&65535,c=t.low>>>16,h=t.low&65535,m=0,d=0,g=0,T=0;return T+=s*h,g+=T>>>16,T&=65535,g+=a*h,d+=g>>>16,g&=65535,g+=s*c,d+=g>>>16,g&=65535,d+=r*h,m+=d>>>16,d&=65535,d+=a*c,m+=d>>>16,d&=65535,d+=s*u,m+=d>>>16,d&=65535,m+=i*h+r*c+a*u+s*o,m&=65535,_(g<<16|T,m<<16|d,this.unsigned)};D.mul=D.multiply;D.divide=function(t){if(_t(t)||(t=Fe(t)),t.isZero())throw Error("division by zero");if(je){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?je.div_u:je.div_s)(this.low,this.high,t.low,t.high);return _(e,je.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?sr:en;var i,r,a;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return sr;if(t.gt(this.shru(1)))return OS;a=sr}else{if(this.eq(se)){if(t.eq(ts)||t.eq(id))return se;if(t.eq(se))return ts;var s=this.shr(1);return i=s.div(t).shl(1),i.eq(en)?t.isNegative()?ts:id:(r=this.sub(t.mul(i)),a=i.add(r.div(t)),a)}else if(t.eq(se))return this.unsigned?sr:en;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();a=en}for(r=this;r.gte(t);){i=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(i)/Math.LN2),u=o<=48?1:rc(2,o-48),c=$e(i),h=c.mul(t);h.isNegative()||h.gt(r);)i-=u,c=$e(i,this.unsigned),h=c.mul(t);c.isZero()&&(c=ts),a=a.add(c),r=r.sub(h)}return a};D.div=D.divide;D.modulo=function(t){if(_t(t)||(t=Fe(t)),je){var e=(this.unsigned?je.rem_u:je.rem_s)(this.low,this.high,t.low,t.high);return _(e,je.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};D.mod=D.modulo;D.rem=D.modulo;D.not=function(){return _(~this.low,~this.high,this.unsigned)};D.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};D.clz=D.countLeadingZeros;D.countTrailingZeros=function(){return this.low?zy(this.low):zy(this.high)+32};D.ctz=D.countTrailingZeros;D.and=function(t){return _t(t)||(t=Fe(t)),_(this.low&t.low,this.high&t.high,this.unsigned)};D.or=function(t){return _t(t)||(t=Fe(t)),_(this.low|t.low,this.high|t.high,this.unsigned)};D.xor=function(t){return _t(t)||(t=Fe(t)),_(this.low^t.low,this.high^t.high,this.unsigned)};D.shiftLeft=function(t){return _t(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?_(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):_(0,this.low<<t-32,this.unsigned)};D.shl=D.shiftLeft;D.shiftRight=function(t){return _t(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?_(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):_(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};D.shr=D.shiftRight;D.shiftRightUnsigned=function(t){return _t(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?_(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?_(this.high,0,this.unsigned):_(this.high>>>t-32,0,this.unsigned)};D.shru=D.shiftRightUnsigned;D.shr_u=D.shiftRightUnsigned;D.rotateLeft=function(t){var e;return _t(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?_(this.high,this.low,this.unsigned):t<32?(e=32-t,_(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,_(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))};D.rotl=D.rotateLeft;D.rotateRight=function(t){var e;return _t(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?_(this.high,this.low,this.unsigned):t<32?(e=32-t,_(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,_(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))};D.rotr=D.rotateRight;D.toSigned=function(){return this.unsigned?_(this.low,this.high,!1):this};D.toUnsigned=function(){return this.unsigned?this:_(this.low,this.high,!0)};D.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};D.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};D.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};F.fromBytes=function(t,e,i){return i?F.fromBytesLE(t,e):F.fromBytesBE(t,e)};F.fromBytesLE=function(t,e){return new F(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)};F.fromBytesBE=function(t,e){return new F(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};typeof BigInt=="function"&&(F.fromBigInt=function(t,e){var i=Number(BigInt.asIntN(32,t)),r=Number(BigInt.asIntN(32,t>>BigInt(32)));return _(i,r,e)},F.fromValue=function(t,e){return typeof t=="bigint"?F.fromBigInt(t,e):Fe(t,e)},D.toBigInt=function(){var t=BigInt(this.low>>>0),e=BigInt(this.unsigned?this.high>>>0:this.high);return e<<BigInt(32)|t});var lt=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(lt||{});class vt extends fl{constructor(e,i){super(i);l(this,"valueType");l(this,"value");this.valueType=vt.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,i){return new vt(e,i)}static valueFromBytes(e,i){switch(e){case 0:return null;case 1:return!!i[0];case 2:return i[0]|i[1]<<8|i[2]<<16|i[3]<<24;case 4:{const r=new DataView(i.buffer);return i.forEach(function(a,s){r.setUint8(s,a)}),r.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(i);case 3:return F.fromBytesLE(Array.from(i));case 6:return i;case 7:return new Date(F.fromBytesLE(Array.from(i),!0).toNumber());default:throw new b(S.ErrUnimplemented,`unimplemented type: ${e}`)}}getValueSize(){switch(this.valueType){case 0:return 8;case 1:return 4;case 2:return 4;case 3:return 8;case 4:return 8;case 5:return this.value.length*2;case 6:return this.value.length;case 7:return 8;default:throw new b(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}getDataSize(){return{data:this.getValueSize(),meta:this.getMetaUsage()}}toJSON(){return this.valueType===5?`"${Sn(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=vt.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof F)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return vt.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,i=new Uint8Array(8);return new DataView(i.buffer).setFloat64(0,e,!0),i}case 5:return new TextEncoder().encode(this.value);case 3:{const i=this.value.toBytesLE();return Uint8Array.from(i)}case 6:return this.value;case 7:{const e=this.value,i=F.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(i)}default:throw new b(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class ac extends xS{constructor(e){super(e);l(this,"prev");l(this,"next");l(this,"movedFrom");this.value=e}static createAfter(e,i){const r=new ac(i),a=e.next;return e.next=r,r.prev=e,r.next=a,a&&(a.prev=r),r}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getMovedFrom(){return this.movedFrom}setMovedFrom(e){this.movedFrom=e}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class $o{constructor(){l(this,"dummyHead");l(this,"last");l(this,"nodeMapByIndex");l(this,"nodeMapByCreatedAt");const t=vt.of(0,xs);t.setRemovedAt(xs),this.dummyHead=new ac(t),this.last=this.dummyHead,this.nodeMapByIndex=new jo,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new $o}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(t,e){let i=this.nodeMapByCreatedAt.get(t.toIDString());if(!i)throw new b(S.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);for(;i.getValue().getMovedAt()&&i.getValue().getMovedAt().after(e)&&i.getMovedFrom();)i=i.getMovedFrom();for(;i.getNext()&&i.getNext().getPositionedAt().after(e);)i=i.getNext();return i}release(t){this.last===t&&(this.last=t.getPrev()),t.release(),this.nodeMapByIndex.delete(t),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}insertAfter(t,e,i=e.getCreatedAt()){const r=this.findNextBeforeExecutedAt(t,i),a=ac.createAfter(r,e);return r===this.last&&(this.last=a),this.nodeMapByIndex.insertAfter(r,a),this.nodeMapByCreatedAt.set(a.getCreatedAt().toIDString(),a),a}moveAfter(t,e,i){let r=this.nodeMapByCreatedAt.get(t.toIDString());if(!r)throw new b(S.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);let a=this.nodeMapByCreatedAt.get(e.toIDString());if(!a)throw new b(S.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);if(r!==a&&i.after(a.getPositionedAt())){const s=a.getPrev();let o=a.getNext();for(this.release(a),a=this.insertAfter(r.getCreatedAt(),a.getValue(),i),a.getValue().setMovedAt(i),a.setMovedFrom(s);o&&o.getPositionedAt().after(i);)r=a,a=o,o=a.getNext(),this.release(a),a=this.insertAfter(r.getCreatedAt(),a.getValue(),i),a.getValue().setMovedAt(i),a.setMovedFrom(s)}}insert(t){this.insertAfter(this.last.getCreatedAt(),t)}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return String(this.nodeMapByIndex.indexOf(e))}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new b(S.ErrInvalidArgument,`fail to find the given createdAt: ${t.getCreatedAt().toIDString()}`);this.release(e)}getByIndex(t){if(t>=this.length)return;const[e,i]=this.nodeMapByIndex.find(t);let r=e;if(t===0&&e===this.dummyHead||i>0)do r&&(r=r.getNext());while(r&&r.isRemoved());return r}getPrevCreatedAt(t){let e=this.nodeMapByCreatedAt.get(t.toIDString());do e=e.getPrev();while(this.dummyHead!==e&&e.isRemoved());return e.getValue().getCreatedAt()}delete(t,e){const i=this.nodeMapByCreatedAt.get(t.toIDString()),r=i.isRemoved();return i.remove(e)&&!r&&this.nodeMapByIndex.splayNode(i),i.getValue()}set(t,e,i){const r=this.nodeMapByCreatedAt.get(t.toIDString());if(!r)throw new b(S.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);return this.insertAfter(r.getCreatedAt(),e,i),this.delete(t,i)}deleteByIndex(t,e){const i=this.getByIndex(t);if(i)return i.remove(e)&&this.nodeMapByIndex.splayNode(i),i.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const t=[];for(const e of this){const i=`${e.getCreatedAt().toIDString()}:${e.getValue().toJSON()}`;e.isRemoved()?t.push(`{${i}}`):t.push(`[${i}]`)}return t.join("")}*[Symbol.iterator](){let t=this.dummyHead.getNext();for(;t;)yield t,t=t.getNext()}}class Qt extends jr{constructor(e,i){super(e);l(this,"elements");this.elements=i}static create(e,i){if(!i)return new Qt(e,$o.create());const r=$o.create();for(const a of i)r.insertAfter(r.getLastCreatedAt(),a.deepcopy());return new Qt(e,r)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,i,r){this.elements.insertAfter(e,i,r)}moveAfter(e,i,r){this.elements.moveAfter(e,i,r)}get(e){const i=this.elements.getByIndex(e);return i==null?void 0:i.getValue()}getByID(e){const i=this.elements.getByID(e);return i==null?void 0:i.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,i){return this.elements.delete(e,i)}deleteByIndex(e,i){return this.elements.deleteByIndex(e,i)}set(e,i,r){return this.elements.set(e,i,r)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const i of this.elements){const r=i.getValue();if(e(r,this))return;r instanceof jr&&r.getDescendants(e)}}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const i of this)e.push(i.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let i=0;i<this.length;i++){const{createdAt:r,value:a,type:s}=this.get(i).toJSForTest();e[i]={key:String(i),createdAt:r,value:a,type:s}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=Qt.create(this.getCreatedAt());for(const i of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),i.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class _r extends ln{constructor(e,i,r,a){super(e,a);l(this,"prevCreatedAt");l(this,"value");this.prevCreatedAt=i,this.value=r}static create(e,i,r,a){return new _r(e,i,r,a)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof Qt))throw new b(S.ErrInvalidArgument,"fail to execute, only array can execute add");const r=i,a=this.value.deepcopy();return r.insertAfter(this.prevCreatedAt,a,this.getExecutedAt()),e.registerElement(a,r),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(r.subPathOf(this.getEffectedCreatedAt()))}],reverseOp:this.toReverseOperation()}}toReverseOperation(){return Dn.create(this.getParentCreatedAt(),this.value.getCreatedAt())}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}setPrevCreatedAt(e){this.prevCreatedAt=e}}class Dn extends ln{constructor(e,i,r){super(e,r);l(this,"createdAt");this.createdAt=i}static create(e,i,r){return new Dn(e,i,r)}execute(e,i){var c;const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof jr))throw new b(S.ErrInvalidArgument,`only object and array can execute remove: ${r}`);if(i===gt.UndoRedo){let h=r.getByID(this.createdAt);for(;h;){if(h.getRemovedAt())return;h=(c=e.findElementPairByCreatedAt(h.getCreatedAt()))==null?void 0:c.parent}}const a=r.subPathOf(this.createdAt),s=this.toReverseOperation(r),o=r.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(o),{opInfos:r instanceof Qt?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(a)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:a}],reverseOp:s}}toReverseOperation(e){if(e instanceof Qt){const i=e.getByID(this.createdAt);if(i!==void 0){const r=e.getPrevCreatedAt(this.createdAt);return _r.create(this.getParentCreatedAt(),r,i.deepcopy())}}if(e instanceof Zt){const i=e.subPathOf(this.createdAt);if(i!==void 0){const r=e.get(i);if(r!==void 0)return Na.create(i,r.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}setCreatedAt(e){this.createdAt=e}}class Na extends ln{constructor(e,i,r,a){super(r,a);l(this,"key");l(this,"value");this.key=e,this.value=i}static create(e,i,r,a){return new Na(e,i,r,a)}execute(e,i){var c;const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Zt))throw new b(S.ErrInvalidArgument,"fail to execute, only object can execute set");if(i===gt.UndoRedo){let h=r;for(;h;){if(h.getRemovedAt())return;h=(c=e.findElementPairByCreatedAt(h.getCreatedAt()))==null?void 0:c.parent}}const a=r.get(this.key),s=this.toReverseOperation(a),o=this.value.deepcopy(),u=r.set(this.key,o,this.getExecutedAt());return i===gt.UndoRedo&&e.findByCreatedAt(o.getCreatedAt())&&e.deregisterElement(o),e.registerElement(o,r),u&&e.registerRemovedElement(u),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:s}}toReverseOperation(e){let i=Dn.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(i=Na.create(this.key,e.deepcopy(),this.getParentCreatedAt())),i}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class nn extends ln{constructor(e,i,r,a){super(e,a);l(this,"prevCreatedAt");l(this,"createdAt");this.prevCreatedAt=i,this.createdAt=r}static create(e,i,r,a){return new nn(e,i,r,a)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof Qt))throw new b(S.ErrInvalidArgument,"fail to execute, only array can execute move");const r=i,a=this.toReverseOperation(r),s=Number(r.subPathOf(this.createdAt));r.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const o=Number(r.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:o,previousIndex:s}],reverseOp:a}}toReverseOperation(e){const i=e.getPrevCreatedAt(this.createdAt);return nn.create(this.getParentCreatedAt(),i,this.createdAt)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}setPrevCreatedAt(e){this.prevCreatedAt=e}setCreatedAt(e){this.createdAt=e}}class zr{constructor(t,e,i,r){l(this,"key");l(this,"value");l(this,"updatedAt");l(this,"_isRemoved");this.key=t,this.value=e,this.updatedAt=i,this._isRemoved=r}static of(t,e,i,r){return new zr(t,e,i,r)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}getDataSize(){return{data:(this.key.length+this.value.length)*2,meta:An}}}class mr{constructor(){l(this,"nodeMapByKey");l(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new mr}getNodeMapByKey(){return this.nodeMapByKey}set(t,e,i){const r=this.nodeMapByKey.get(t);if(r&&r.isRemoved()&&i.after(r.getUpdatedAt())&&(this.numberOfRemovedElement-=1),r===void 0||i.after(r.getUpdatedAt())){const a=zr.of(t,e,i,!1);return this.nodeMapByKey.set(t,a),r!==void 0&&r.isRemoved()?[r,a]:[void 0,a]}return r.isRemoved()?[r,void 0]:[void 0,void 0]}setInternal(t,e,i,r){const a=zr.of(t,e,i,r);this.nodeMapByKey.set(t,a),r&&this.numberOfRemovedElement++}remove(t,e){const i=this.nodeMapByKey.get(t),r=[];if(i===void 0||e.after(i.getUpdatedAt())){if(i===void 0){this.numberOfRemovedElement+=1;const o=zr.of(t,"",e,!0);return this.nodeMapByKey.set(t,o),r.push(o),r}const a=i.isRemoved();a||(this.numberOfRemovedElement+=1),a&&r.push(i);const s=zr.of(t,i.getValue(),e,!0);return this.nodeMapByKey.set(t,s),r.push(s),r}return r}has(t){if(this.nodeMapByKey.has(t)){const e=this.nodeMapByKey.get(t);return e!==void 0&&!e.isRemoved()}return!1}get(t){if(this.nodeMapByKey.has(t))return this.nodeMapByKey.get(t).getValue()}deepcopy(){const t=new mr;for(const[,e]of this.nodeMapByKey)t.setInternal(e.getKey(),e.getValue(),e.getUpdatedAt(),e.isRemoved());return t}toJSON(){if(!this.size())return"{}";const t=[];for(const[e,i]of this.nodeMapByKey)i.isRemoved()||t.push(`"${Sn(e)}":"${Sn(i.getValue())}"`);return`{${t.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const t={};for(const[e,i]of this.nodeMapByKey)i.isRemoved()||(t[e]=i.getValue());return t}*[Symbol.iterator](){for(const[,t]of this.nodeMapByKey)yield t}purge(t){const e=this.nodeMapByKey.get(t.getKey());e==null||e.toIDString()!=t.toIDString()||(this.nodeMapByKey.delete(t.getKey()),this.numberOfRemovedElement--)}}function Qe(n){if(n instanceof Map){const t=Array.from(n);return new Map(JSON.parse(JSON.stringify(t)))}return JSON.parse(JSON.stringify(n))}const IS=n=>n?Object.entries(n).length===0:!0,Os=n=>{const t={};for(const[e,i]of Object.entries(n))t[e]=JSON.stringify(i);return t},ur=n=>{const t={};for(const[e,i]of Object.entries(n))t[e]=JSON.parse(i);return t};function VA(n){return n?Py(n.live)+Py(n.gc):0}function Py(n){return n.data+n.meta}function $t(n,...t){for(const e of t)n.data+=e.data,n.meta+=e.meta}function ua(n,t){n.data-=t.data,n.meta-=t.meta}class Go{constructor(t){l(this,"attributes");l(this,"content");this.attributes=mr.create(),this.content=t}static create(t){return new Go(t)}get length(){return this.content.length}substring(t,e){const i=new Go(this.content.substring(t,e));return i.attributes=this.attributes.deepcopy(),i}setAttr(t,e,i){return this.attributes.set(t,e,i)}getAttrs(){return this.attributes}toString(){return this.content}getDataSize(){const t={data:0,meta:0};t.data+=this.content.length*2;for(const e of this.attributes){const i=e.getDataSize();t.meta+=i.meta,t.data+=i.data}return t}toJSON(){const t=Sn(this.content),e=this.attributes.toObject(),i=[];for(const[r,a]of Object.entries(e)){const s=JSON.parse(a),o=typeof s=="string"?`"${Sn(r)}":"${Sn(s)}"`:`"${Sn(r)}":${String(s)}`;i.push(o)}return i.sort(),i.length===0?`{"val":"${t}"}`:`{"attrs":{${i.join(",")}},"val":"${t}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(t){this.attributes&&t instanceof zr&&this.attributes.purge(t)}getGCPairs(){const t=[];for(const e of this.attributes)e.getRemovedAt()&&t.push({parent:this,child:e});return t}}class Ae extends fl{constructor(e,i){super(i);l(this,"rgaTreeSplit");this.rgaTreeSplit=e}static create(e,i){return new Ae(e,i)}edit(e,i,r,a,s){const o=i?Go.create(i):void 0;if(o&&a)for(const[g,T]of Object.entries(a))o.setAttr(g,T,r);const[u,c,h,m]=this.rgaTreeSplit.edit(e,r,o,s);return[m.map(g=>({...g,value:g.value?{attributes:ur(g.value.getAttributes()),content:g.value.getContent()}:{attributes:void 0,content:""},type:"content"})),c,h,[u,u]]}setStyle(e,i,r,a){const s={data:0,meta:0},[,o,u]=this.rgaTreeSplit.findNodeWithSplit(e[1],r),[,c,h]=this.rgaTreeSplit.findNodeWithSplit(e[0],r);$t(s,o,c);const m=[],d=this.rgaTreeSplit.findBetween(h,u),g=[];for(const A of d){const x=A.getCreatedAt().getActorID();let p=nd;a!=null&&(p=a.get(x)?a.get(x):0n),A.canStyle(r,p)&&g.push(A)}const T=[];for(const A of g){if(A.isRemoved())continue;const[x,p]=this.rgaTreeSplit.findIndexesFromRange(A.createPosRange());m.push({type:"style",actor:r.getActorID(),from:x,to:p,value:{attributes:ur(i)}});for(const[y,v]of Object.entries(i)){const[w]=A.getValue().setAttr(y,v,r);w!==void 0&&T.push({parent:A.getValue(),child:w});const k=A.getValue().getAttrs().getNodeMapByKey().get(y);k!==void 0&&$t(s,k.getDataSize())}}return[T,s,m]}indexRangeToPosRange(e,i){const r=this.rgaTreeSplit.indexToPos(e);return e===i?[r,r]:[r,this.rgaTreeSplit.indexToPos(i)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}getDataSize(){const e={data:0,meta:0};for(const i of this.rgaTreeSplit){if(i.isRemoved())continue;const r=i.getDataSize();e.data+=r.data,e.meta+=r.meta}return{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){const e=[];for(const i of this.rgaTreeSplit)i.isRemoved()||e.push(i.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const i of this.rgaTreeSplit)if(!i.isRemoved()){const r=i.getValue();e.push({attributes:ur(r.getAttributes()),content:r.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new Ae(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const i of this.rgaTreeSplit){i.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:i});for(const r of i.getValue().getGCPairs())e.push(r)}return e}}class hl extends ln{constructor(e,i,r,a,s,o){super(e,o);l(this,"fromPos");l(this,"toPos");l(this,"content");l(this,"attributes");this.fromPos=i,this.toPos=r,this.content=a,this.attributes=s}static create(e,i,r,a,s,o){return new hl(e,i,r,a,s,o)}execute(e,i,r){const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Ae))throw new b(S.ErrInvalidArgument,"fail to execute, only Text can execute edit");const s=a,[o,u,c]=s.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),r);e.acc(c);for(const h of u)e.registerGCPair(h);return{opInfos:o.map(({from:h,to:m,value:d})=>({type:"edit",from:h,to:m,value:d,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=this.fromPos.toTestString(),r=this.toPos.toTestString(),a=this.content;return`${e}.EDIT(${i},${r},${a})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}}class dl extends ln{constructor(e,i,r,a,s){super(e,s);l(this,"fromPos");l(this,"toPos");l(this,"attributes");this.fromPos=i,this.toPos=r,this.attributes=a}static create(e,i,r,a,s){return new dl(e,i,r,a,s)}execute(e,i,r){const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Ae))throw new b(S.ErrInvalidArgument,"fail to execute, only Text can execute edit");const s=a,[o,u,c]=s.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),r);e.acc(u);for(const h of o)e.registerGCPair(h);return{opInfos:c.map(({from:h,to:m,value:d})=>({type:"style",from:h,to:m,value:d,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=this.fromPos.toTestString(),r=this.toPos.toTestString(),a=this.attributes;return`${e}.STYL(${i},${r},${JSON.stringify(a)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}const KA=2,jA="root",En="text";function Xs(n,t,e=!1){let i=0;const r=e?n.allChildren:n.children;for(let a=0;a<t;a++){const s=r[a];!s||!e&&s.isRemoved||(i+=s.paddedSize(e))}return i}class $A{constructor(t,e=[]){l(this,"type");l(this,"parent");l(this,"_children");l(this,"visibleSize");l(this,"totalSize");if(this.type=t,this.visibleSize=0,this.totalSize=0,this._children=e,this.isText&&this._children.length>0)throw new b(S.ErrRefused,"Text node cannot have children")}updateAncestorsSize(t,e=!1){let i=this.parent;for(;i;){if(e)i.totalSize+=t;else if(i.visibleSize+=t,i.isRemoved)break;i=i.parent}}updateDescendantsSize(t=!1){let e=0;for(const i of this._children){const r=i.updateDescendantsSize(t);!t&&i.isRemoved||(e+=r)}return t?this.totalSize+=e:this.visibleSize+=e,this.paddedSize(t)}get isText(){return this.type===En}paddedSize(t=!1){let e=this.visibleSize;return t&&(e=this.totalSize),this.isText||(e+=KA),e}isAncestorOf(t){return GA(this,t)}get nextSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t+1];if(e)return e}get prevSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t-1];if(e)return e}splitText(t,e){const i={data:0,meta:0};if(t===0||t===this.visibleSize)return[void 0,i];const r=this.value.slice(0,t),a=this.value.slice(t);if(!a.length)return[void 0,i];const s=this.getDataSize();this.value=r;const o=this.cloneText(t+e);return o.value=a,this.parent.insertAfterInternal(o,this),$t(i,this.getDataSize(),o.getDataSize()),ua(i,s),[o,i]}get children(){return this._children.filter(t=>!t.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(t=>t.isText)}getChildrenText(){return this.isText?this.value:this.hasTextChild()?this.children.map(t=>t.value).join(""):""}append(...t){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");this._children.push(...t);for(const e of t)e.parent=this,e.updateAncestorsSize(e.paddedSize()),e.updateAncestorsSize(e.paddedSize(!0),!0)}prepend(...t){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");this._children.unshift(...t);for(const e of t)e.parent=this}insertBefore(t,e){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");const i=this._children.indexOf(e);if(i===-1)throw new b(S.ErrInvalidArgument,"child not found");this.insertAtInternal(t,i),t.updateAncestorsSize(t.paddedSize()),t.updateAncestorsSize(t.paddedSize(!0),!0)}insertAfter(t,e){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");const i=this._children.indexOf(e);if(i===-1)throw new b(S.ErrInvalidArgument,"child not found");this.insertAtInternal(t,i+1),t.updateAncestorsSize(t.paddedSize()),t.updateAncestorsSize(t.paddedSize(!0),!0)}insertAt(t,e){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");this.insertAtInternal(t,e),t.updateAncestorsSize(t.paddedSize()),t.updateAncestorsSize(t.paddedSize(!0),!0)}removeChild(t){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");const e=this._children.indexOf(t);if(e===-1)throw new b(S.ErrInvalidArgument,"child not found");this._children.splice(e,1),t.updateAncestorsSize(-t.paddedSize(!0),!0),t.parent=void 0}splitElement(t,e){const i={data:0,meta:0},r=this.getDataSize(),a=this.cloneElement(e);this.parent.insertAfterInternal(a,this),a.updateAncestorsSize(a.paddedSize()),a.updateAncestorsSize(a.paddedSize(!0),!0);const s=this.children.slice(0,t),o=this.children.slice(t);this._children=s,a._children=o,this.visibleSize=this._children.reduce((u,c)=>u+c.paddedSize(),0),this.totalSize=this._children.reduce((u,c)=>u+c.paddedSize(!0),0),a.visibleSize=a._children.reduce((u,c)=>u+c.paddedSize(!0),0),a.totalSize=a._children.reduce((u,c)=>u+c.paddedSize(!0),0);for(const u of a._children)u.parent=a;return $t(i,this.getDataSize(),a.getDataSize()),ua(i,r),[a,i]}insertAfterInternal(t,e){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");const i=this._children.indexOf(e);if(i===-1)throw new b(S.ErrInvalidArgument,"child not found");this.insertAtInternal(t,i+1)}insertAtInternal(t,e){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");this._children.splice(e,0,t),t.parent=this}findOffset(t,e=!1){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");if(e)return this._children.indexOf(t);if(t.isRemoved){const i=this._children.indexOf(t);return this.allChildren.splice(0,i).filter(a=>!a.isRemoved).length}return this.children.indexOf(t)}findBranchOffset(t){if(this.isText)throw new b(S.ErrRefused,"Text node cannot have children");let e=t;for(;e;){const i=this._children.indexOf(e);if(i!==-1)return i;e=e.parent}return-1}}function GA(n,t){if(n===t)return!1;for(;t.parent;){if(t.parent===n)return!0;t=t.parent}return!1}var Nt=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(Nt||{});function BS(n,t,e,i,r=!1){if(t>e)throw new b(S.ErrInvalidArgument,`from is greater than to: ${t} > ${e}`);const a=r?n.totalSize:n.visibleSize;if(t>a)throw new b(S.ErrInvalidArgument,`from is out of range: ${t} > ${a}`);if(e>a)throw new b(S.ErrInvalidArgument,`to is out of range: ${e} > ${a}`);if(t===e)return;let s=0;const o=r?n._children:n.children;for(const u of o){if(t-u.paddedSize(r)<s&&s<e){const c=u.isText?t-s:t-s-1,h=u.isText?e-s:e-s-1,m=r?u.totalSize:u.visibleSize,d=!u.isText&&c<0,g=!u.isText&&h>m;(u.isText||d)&&i([u,u.isText?"Text":"Start"],g),BS(u,Math.max(0,c),Math.min(h,m),i,r),g&&i([u,"End"],g)}s+=u.paddedSize(r)}}function RS(n,t,e=0){for(const i of n.children)RS(i,t,e+1);t(n,e)}function Cc(n,t,e=0){for(const i of n._children)Cc(i,t,e+1);t(n,e)}function rd(n,t,e=!0){if(t>n.visibleSize)throw new b(S.ErrInvalidArgument,`index is out of range: ${t} > ${n.visibleSize}`);if(n.isText)return{node:n,offset:t};let i=0,r=0;for(const a of n.children){if(e&&a.isText&&a.visibleSize>=t-r)return rd(a,t-r,e);if(t===r)return{node:n,offset:i};if(!e&&a.paddedSize()===t-r)return{node:n,offset:i+1};if(a.paddedSize()>t-r)return rd(a,t-r-1,e);r+=a.paddedSize(),i+=1}return{node:n,offset:i}}function zS(n){return n.isText||n.children.length===0?n:zS(n.children[0])}function YA(n,t){if(n.visibleSize<t)throw new b(S.ErrInvalidArgument,"unacceptable path");for(let e=0;e<n.children.length;e++){const i=n.children[e];if(i.visibleSize<t)t-=i.visibleSize;else{n=i;break}}return{node:n,offset:t}}class XA{constructor(t){l(this,"root");this.root=t}tokensBetween(t,e,i,r=!1){BS(this.root,t,e,i,r)}traverse(t){RS(this.root,t,0)}traverseAll(t){Cc(this.root,t,0)}findTreePos(t,e=!0){return rd(this.root,t,e)}treePosToPath(t){const e=[];let i=t.node;if(i.isText){const r=i.parent.findOffset(i);if(r===-1)throw new b(S.ErrInvalidArgument,"invalid treePos");const a=Xs(i.parent,r);e.push(a+t.offset),i=i.parent}else if(i.hasTextChild()){const r=Xs(i,t.offset);e.push(r)}else e.push(t.offset);for(;i.parent;){const r=i.parent.findOffset(i);if(r===-1)throw new b(S.ErrInvalidArgument,"invalid treePos");e.push(r),i=i.parent}return e.reverse()}pathToIndex(t){const e=this.pathToTreePos(t);return this.indexOf(e)}pathToTreePos(t){if(!t.length)throw new b(S.ErrInvalidArgument,"unacceptable path");let e=this.root;for(let i=0;i<t.length-1;i++){const r=t[i];if(e=e.children[r],!e)throw new b(S.ErrInvalidArgument,"unacceptable path")}if(e.hasTextChild())return YA(e,t[t.length-1]);if(e.children.length<t[t.length-1])throw new b(S.ErrInvalidArgument,"unacceptable path");return{node:e,offset:t[t.length-1]}}getRoot(){return this.root}get size(){return this.root.visibleSize}findPostorderRight(t){const{node:e,offset:i}=t;if(e.isText){if(e.visibleSize===i){const r=e.nextSibling;return r||e.parent}return e}return e.children.length===i?e:zS(e.children[i])}indexOf(t,e=!1){let{node:i}=t;const{offset:r}=t;let a=0,s=1;if(i.isText){a+=r;const o=i.parent,u=o.findOffset(i,e);if(u===-1)throw new b(S.ErrInvalidArgument,"invalid pos");a+=Xs(o,u,e),i=i.parent}else a+=Xs(i,r,e);for(;i!=null&&i.parent;){const o=i.parent,u=o.findOffset(i,e);if(u===-1)throw new b(S.ErrInvalidArgument,"invalid pos");a+=Xs(o,u,e),s++,i=i.parent}return a+s-1}indexToPath(t){const e=this.findTreePos(t);return this.treePosToPath(e)}}const FA=(n,t)=>n===t?0:n<t?-1:1;class ZA{constructor(t,e,i){l(this,"key");l(this,"value");l(this,"parent");l(this,"left");l(this,"right");l(this,"isRed");this.key=t,this.value=e,this.isRed=i}}class QA{constructor(t){l(this,"stack");this.stack=[],this.traverseInorder(t)}traverseInorder(t){t&&(this.traverseInorder(t.left),this.stack.push({key:t.key,value:t.value}),this.traverseInorder(t.right))}}class MS{constructor(t){l(this,"root");l(this,"comparator");l(this,"counter");this.comparator=typeof t<"u"?t:FA,this.counter=0}put(t,e){return this.root=this.putInternal(t,e,this.root),this.root.isRed=!1,e}get(t){const e=this.getInternal(t,this.root);return e?e.value:void 0}remove(t){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,t),this.root&&(this.root.isRed=!1)}getIterator(){return new QA(this.root)}values(){const t=[];for(const e of this.getIterator().stack)t.push(e.value);return t}floorEntry(t){let e=this.root;for(;e;){const i=this.comparator(t,e.key);if(i>0)if(e.right)e.right.parent=e,e=e.right;else return e;else if(i<0)if(e.left)e.left.parent=e,e=e.left;else{let r=e.parent,a=e;for(;r&&a===r.left;)a=r,r=r.parent;return r}else return e}}lastEntry(){if(!this.root)return this.root;let t=this.root;for(;t.right;)t=t.right;return t}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(t,e){for(;e;){const i=this.comparator(t,e.key);if(i===0)return e;i<0?e=e.left:i>0&&(e=e.right)}}putInternal(t,e,i){if(!i)return this.counter+=1,new ZA(t,e,!0);const r=this.comparator(t,i.key);return r<0?i.left=this.putInternal(t,e,i.left):r>0?i.right=this.putInternal(t,e,i.right):i.value=e,this.isRed(i.right)&&!this.isRed(i.left)&&(i=this.rotateLeft(i)),this.isRed(i.left)&&this.isRed(i.left.left)&&(i=this.rotateRight(i)),this.isRed(i.left)&&this.isRed(i.right)&&this.flipColors(i),i}removeInternal(t,e){if(this.comparator(e,t.key)<0)!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeInternal(t.left,e);else{if(this.isRed(t.left)&&(t=this.rotateRight(t)),this.comparator(e,t.key)===0&&!t.right){this.counter-=1;return}if(!this.isRed(t.right)&&!this.isRed(t.right.left)&&(t=this.moveRedRight(t)),this.comparator(e,t.key)===0){this.counter-=1;const i=this.min(t.right);t.value=i.value,t.key=i.key,t.right=this.removeMin(t.right)}else t.right=this.removeInternal(t.right,e)}return this.fixUp(t)}min(t){return t.left?this.min(t.left):t}removeMin(t){if(t.left)return!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeMin(t.left),this.fixUp(t)}fixUp(t){return this.isRed(t.right)&&(t=this.rotateLeft(t)),this.isRed(t.left)&&this.isRed(t.left.left)&&(t=this.rotateRight(t)),this.isRed(t.left)&&this.isRed(t.right)&&this.flipColors(t),t}moveRedLeft(t){return this.flipColors(t),this.isRed(t.right.left)&&(t.right=this.rotateRight(t.right),t=this.rotateLeft(t),this.flipColors(t)),t}moveRedRight(t){return this.flipColors(t),this.isRed(t.left.left)&&(t=this.rotateRight(t),this.flipColors(t)),t}isRed(t){return t&&t.isRed}rotateLeft(t){const e=t.right;return t.right=e.left,e.left=t,e.isRed=e.left.isRed,e.left.isRed=!0,e}rotateRight(t){const e=t.left;return t.left=e.right,e.right=t,e.isRed=e.right.isRed,e.right.isRed=!0,e}flipColors(t){t.isRed=!t.isRed,t.left.isRed=!t.left.isRed,t.right.isRed=!t.right.isRed}}class rn{constructor(t,e){l(this,"parentID");l(this,"leftSiblingID");this.parentID=t,this.leftSiblingID=e}static of(t,e){return new rn(t,e)}static fromTreePos(t){const{offset:e}=t;let{node:i}=t,r;return i.isText?(i.parent.children[0]===i&&e===0?r=i.parent:r=i,i=i.parent):e===0?r=i:r=i.children[e-1],rn.of(i.id,Yt.of(r.getCreatedAt(),r.getOffset()+e))}getParentID(){return this.parentID}static fromStruct(t){return rn.of(Yt.of(Ge.fromStruct(t.parentID.createdAt),t.parentID.offset),Yt.of(Ge.fromStruct(t.leftSiblingID.createdAt),t.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(t){const e=this.getParentID(),i=this.getLeftSiblingID(),r=t.findFloorNode(e);let a=t.findFloorNode(i);if(!r||!a)throw new b(S.ErrRefused,`cannot find node of CRDTTreePos(${e.toTestString()}, ${i.toTestString()})`);return!i.equals(e)&&i.getOffset()>0&&i.getOffset()===a.id.getOffset()&&a.insPrevID&&(a=t.findFloorNode(a.insPrevID)),[r,a]}getLeftSiblingID(){return this.leftSiblingID}equals(t){return this.getParentID().getCreatedAt().equals(t.getParentID().getCreatedAt())&&this.getParentID().getOffset()===t.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(t.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===t.getLeftSiblingID().getOffset()}}class Yt{constructor(t,e){l(this,"createdAt");l(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new Yt(t,e)}static fromStruct(t){return Yt.of(Ge.fromStruct(t.createdAt),t.offset)}static createComparator(){return(t,e)=>{const i=t.getCreatedAt().compare(e.getCreatedAt());return i!==0?i:t.getOffset()>e.getOffset()?1:t.getOffset()<e.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}getOffset(){return this.offset}setOffset(t){this.offset=t}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class pe extends $A{constructor(e,i,r,a,s){super(i);l(this,"id");l(this,"removedAt");l(this,"attrs");l(this,"insPrevID");l(this,"insNextID");l(this,"_value","");this.id=e,this.removedAt=s,a&&(this.attrs=a),typeof r=="string"?this.value=r:Array.isArray(r)&&(this._children=r)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,i,r,a){return new pe(e,i,r,a)}deepcopy(){var i;const e=new pe(this.id,this.type);return e.removedAt=this.removedAt,e._value=this._value,e.visibleSize=this.visibleSize,e.totalSize=this.totalSize,e.attrs=(i=this.attrs)==null?void 0:i.deepcopy(),e._children=this._children.map(r=>{const a=r.deepcopy();return a.parent=e,a}),e.insPrevID=this.insPrevID,e.insNextID=this.insNextID,e}get value(){if(!this.isText)throw new b(S.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new b(S.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=e,this.visibleSize=e.length,this.totalSize=e.length}get isRemoved(){return!!this.removedAt}remove(e){return this.removedAt?(e.after(this.removedAt)&&(this.removedAt=e),!1):(this.removedAt=e,this.updateAncestorsSize(-this.paddedSize()),!0)}cloneText(e){return new pe(Yt.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new pe(Yt.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,i,r){const[a,s]=this.isText?this.splitText(i,this.id.getOffset()):this.splitElement(i,r);if(a){if(a.insPrevID=this.id,this.insNextID){const o=e.findFloorNode(this.insNextID);o.insPrevID=a.id,a.insNextID=this.insNextID}this.insNextID=a.id,e.registerNode(a)}return[a,s]}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,i,r){return i?!!(!this.removedAt||!r&&(e!=null&&e.after(this.removedAt))):!1}canStyle(e,i){return this.isText?!1:this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,i){this.attrs||(this.attrs=new mr);const r=[];for(const[a,s]of Object.entries(e))r.push(this.attrs.set(a,s,i));return r}purge(e){this.attrs&&this.attrs.purge(e)}getDataSize(){const e={data:0,meta:0};if(this.isText&&(e.data+=this.visibleSize*2),this.id&&(e.meta+=An),this.removedAt&&(e.meta+=An),this.attrs)for(const i of this.attrs){if(i.getRemovedAt())continue;const r=i.getDataSize();e.meta+=r.meta,e.data+=r.data}return e}getGCPairs(){const e=[];if(!this.attrs)return e;for(const i of this.attrs)i.getRemovedAt()&&e.push({parent:this,child:i});return e}}function ad(n){var e;if(n.isText){const i=n;return{type:i.type,value:i.value}}const t={type:n.type,children:n.children.map(ad)};return n.attrs&&(t.attributes=ur((e=n.attrs)==null?void 0:e.toObject())),t}function dg(n){if(n.isText)return n.value;let t="";return n.attrs&&n.attrs.size()&&(t=" "+Array.from(n.attrs).filter(e=>!e.isRemoved()).sort((e,i)=>e.getKey().localeCompare(i.getKey())).map(e=>{const i=JSON.parse(e.getValue());return typeof i=="string"?`${e.getKey()}="${i}"`:`${e.getKey()}="${Sn(e.getValue())}"`}).join(" ")),`<${n.type}${t}>${n.children.map(e=>dg(e)).join("")}</${n.type}>`}function US(n){if(n.isText){const t=n;return{type:t.type,value:t.value,visibleSize:t.visibleSize,isRemoved:t.isRemoved}}return{type:n.type,children:n.children.map(US),visibleSize:n.visibleSize,isRemoved:n.isRemoved}}class Ee extends fl{constructor(e,i){super(i);l(this,"indexTree");l(this,"nodeMapByID");this.indexTree=new XA(e),this.nodeMapByID=new MS(Yt.createComparator()),this.indexTree.traverseAll(r=>{this.nodeMapByID.put(r.id,r)})}static create(e,i){return new Ee(e,i)}findFloorNode(e){const i=this.nodeMapByID.floorEntry(e);if(!(!i||!i.key.getCreatedAt().equals(e.getCreatedAt())))return i.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,i){let r={data:0,meta:0};const[a,s]=e.toTreeNodePair(this);let o=s;const u=a===o,c=o.parent&&!u?o.parent:a;if(o.isText){const[,h]=o.split(this,e.getLeftSiblingID().getOffset()-o.id.getOffset());r=h}if(i){const h=c.allChildren,m=u?0:h.indexOf(o)+1;for(let d=m;d<h.length;d++){const g=h[d];if(!g.id.getCreatedAt().after(i))break;o=g}}return[[c,o],r]}style(e,i,r,a){const s={data:0,meta:0},[[o,u],c]=this.findNodesAndSplitText(e[0],r),[[h,m],d]=this.findNodesAndSplitText(e[1],r);$t(s,d,c);const g=[],T=i?ur(i):{},A=[];return this.traverseInPosRange(o,u,h,m,([x,p])=>{var w;const y=x.getCreatedAt().getActorID();let v=nd;if(a!=null&&(v=a.get(y)?a.get(y):0n),x.canStyle(r,v)&&i){const k=x.setAttrs(i,r),I=k.reduce((P,[,J])=>(J&&(P[J.getKey()]=T[J.getKey()]),P),{}),C=x.parent,B=x.prevSibling||x.parent;Object.keys(I).length>0&&g.push({type:"style",from:this.toIndex(C,B),to:this.toIndex(x,x),fromPath:this.toPath(C,B),toPath:this.toPath(x,x),actor:r.getActorID(),value:I});for(const[P]of k)P&&A.push({parent:x,child:P});for(const[P]of Object.entries(T)){const J=(w=x.attrs)==null?void 0:w.getNodeMapByKey().get(P);J!==void 0&&p!==Nt.End&&$t(s,J.getDataSize())}}}),[A,g,s]}removeStyle(e,i,r,a){const s={data:0,meta:0},[[o,u],c]=this.findNodesAndSplitText(e[0],r),[[h,m],d]=this.findNodesAndSplitText(e[1],r);$t(s,d,c);const g=[],T=[];return this.traverseInPosRange(o,u,h,m,([A])=>{const x=A.getCreatedAt().getActorID();let p=nd;if(a!=null&&(p=a.get(x)?a.get(x):0n),A.canStyle(r,p)&&i){A.attrs||(A.attrs=new mr);for(const w of i){const k=A.attrs.remove(w,r);for(const I of k)T.push({parent:A,child:I})}const y=A.parent,v=A.prevSibling||A.parent;g.push({actor:r.getActorID(),type:"removeStyle",from:this.toIndex(y,v),to:this.toIndex(A,A),fromPath:this.toPath(y,v),toPath:this.toPath(A,A),value:i})}}),[T,g,s]}edit(e,i,r,a,s,o){const u={data:0,meta:0},[[c,h],m]=this.findNodesAndSplitText(e[0],a),[[d,g],T]=this.findNodesAndSplitText(e[1],a);$t(u,T,m);const A=this.toIndex(c,h),x=this.toPath(c,h),p=[],y=[],v=[];this.traverseInPosRange(c,h,d,g,([I,C],B)=>{if(C===Nt.Start&&!B)for(const Wr of I.children)v.push(Wr);const P=o===void 0;let J=!1;const Ht=o==null?void 0:o.get(I.id.getCreatedAt().getActorID());J=P||Ht!==void 0&&Ht>=I.id.getCreatedAt().getLamport();let fe=!1;if(I.removedAt){const Wr=o==null?void 0:o.get(I.removedAt.getActorID());fe=P||Wr!==void 0&&Wr>=I.removedAt.getLamport()}(I.canDelete(a,J,fe)||p.includes(I.parent))&&((C===Nt.Text||C===Nt.Start)&&p.push(I),y.push([I,C]))},!0);const w=this.makeDeletionChanges(y,a),k=[];for(const I of p)I.remove(a),I.isRemoved&&k.push({parent:this,child:I});for(const I of v)I.removedAt||c.append(I);if(r>0){let I=0,C=c,B=h;for(;I<r;)C.split(this,C.findOffset(B)+1,s),B=C,C=C.parent,I++;w.push({type:"content",from:A,to:A,fromPath:x,toPath:x,actor:a.getActorID()})}if(i!=null&&i.length){const I=[];let C=h;for(const B of i)C===c?c.insertAt(B,0):c.insertAfter(B,C),C=B,Cc(B,P=>{c.isRemoved?(P.remove(a),k.push({parent:this,child:P})):$t(u,P.getDataSize()),this.nodeMapByID.put(P.id,P)}),B.isRemoved||I.push(B);if(I.length){const B=I.map(P=>ad(P));w.length&&w[w.length-1].from===A?w[w.length-1].value=B:w.push({type:"content",from:A,to:A,fromPath:x,toPath:x,actor:a.getActorID(),value:B})}}return[w,k,u]}editT(e,i,r,a,s){const o=this.findPos(e[0]),u=this.findPos(e[1]);return this.edit([o,u],i,r,a,s)}move(e,i,r){throw new b(S.ErrUnimplemented,`not implemented: ${e}, ${i}, ${r}`)}pathToTreePos(e){return this.indexTree.pathToTreePos(e)}purge(e){var a;(a=e.parent)==null||a.removeChild(e),this.nodeMapByID.remove(e.id);const i=e.insPrevID,r=e.insNextID;if(i){const s=this.findFloorNode(i);s.insNextID=r}if(r){const s=this.findFloorNode(r);s.insPrevID=i}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(i=>{i.getRemovedAt()&&e.push({parent:this,child:i});for(const r of i.getGCPairs())e.push(r)}),e}findPos(e,i=!0){const r=this.indexTree.findTreePos(e,i);return rn.fromTreePos(r)}pathToPosRange(e){const i=this.pathToIndex(e);return[this.findPos(i),this.findPos(i+1)]}pathToPos(e){const i=this.indexTree.pathToIndex(e);return this.findPos(i)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return dg(this.indexTree.getRoot())}getDataSize(){const e={data:0,meta:0};return this.indexTree.traverse(i=>{if(i.getRemovedAt())return;const r=i.getDataSize();e.data+=r.data,e.meta+=r.meta}),{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),i=(r,a=void 0,s=void 0,o=0)=>{var g,T,A,x;let u,c,h;const m=r.isText?{node:r,offset:0}:a&&s?this.toTreePos(a,s):null;m&&(u=this.indexTree.indexOf(m),c=this.indexTree.treePosToPath(m),h=rn.fromTreePos(m).toStruct());const d={type:r.type,parent:a==null?void 0:a.id.toTestString(),size:r.visibleSize,id:r.id.toTestString(),removedAt:(g=r.removedAt)==null?void 0:g.toTestString(),insPrev:(T=r.insPrevID)==null?void 0:T.toTestString(),insNext:(A=r.insNextID)==null?void 0:A.toTestString(),value:r.isText?r.value:void 0,isRemoved:r.isRemoved,children:[],depth:o,attributes:r.attrs?ur((x=r.attrs)==null?void 0:x.toObject()):void 0,index:u,path:c,pos:h};for(let p=0;p<r.allChildren.length;p++){const y=p===0?r:r.allChildren[p-1];d.children.push(i(r.allChildren[p],r,y,o+1))}return d};return i(e)}getRootTreeNode(){return ad(this.indexTree.getRoot())}toTestTreeNode(){return US(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new Ee(e.deepcopy(),this.getCreatedAt())}toPath(e,i){const r=this.toTreePos(e,i);return r?this.indexTree.treePosToPath(r):[]}toIndex(e,i,r=!1){const a=this.toTreePos(e,i,r);return a?this.indexTree.indexOf(a,r):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const i=this.findPos(e[0]);return e[0]===e[1]?[i,i]:[i,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[i,r]=e,a=this.findPos(i);return i===r?[a.toStruct(),a.toStruct()]:[a.toStruct(),this.findPos(r).toStruct()]}posRangeToPathRange(e){const[[i,r]]=this.findNodesAndSplitText(e[0]),[[a,s]]=this.findNodesAndSplitText(e[1]);return[this.toPath(i,r),this.toPath(a,s)]}posRangeToIndexRange(e){const[[i,r]]=this.findNodesAndSplitText(e[0]),[[a,s]]=this.findNodesAndSplitText(e[1]);return[this.toIndex(i,r),this.toIndex(a,s)]}traverseInPosRange(e,i,r,a,s,o=!1){const u=this.toIndex(e,i,o),c=this.toIndex(r,a,o);this.indexTree.tokensBetween(u,c,s,o)}toTreePos(e,i,r=!1){if(!e||!i)return;if(!r&&e.isRemoved){let s;for(;e.isRemoved;)s=e,e=s.parent;const o=e.findOffset(s,r);return{node:e,offset:o}}if(e===i)return{node:e,offset:0};let a=e.findOffset(i,r);if(r||!i.isRemoved){if(i.isText)return{node:i,offset:i.paddedSize(r)};a++}return{node:e,offset:a}}makeDeletionChanges(e,i){const r=[],a=[];let s=null,o=null;for(let u=0;u<e.length;u++){const c=e[u],h=e[u+1];s||(s=c),o=c;const m=this.findRightToken(c);(!m||!h||m[0]!==h[0]||m[1]!==h[1])&&(a.push([s,o]),s=null,o=null)}for(const u of a){const[c,h]=u,[m,d]=this.findLeftToken(c),[g,T]=h,A=d===Nt.Start?m:m.parent,x=T===Nt.Start?g:g.parent,p=this.toIndex(A,m),y=this.toIndex(x,g);p<y&&(r.length>0&&p===r[r.length-1].to?(r[r.length-1].to=y,r[r.length-1].toPath=this.toPath(x,g)):r.push({type:"content",from:p,to:y,fromPath:this.toPath(A,m),toPath:this.toPath(x,g),actor:i.getActorID()}))}return r.reverse()}findRightToken([e,i]){if(i===Nt.Start){const u=e.allChildren;return u.length>0?[u[0],u[0].isText?Nt.Text:Nt.Start]:[e,Nt.End]}const r=e.parent,a=r.allChildren,s=a.indexOf(e);if(r&&s===a.length-1)return[r,Nt.End];const o=a[s+1];return[o,o.isText?Nt.Text:Nt.Start]}findLeftToken([e,i]){if(i===Nt.End){const u=e.allChildren;if(u.length>0){const c=u[u.length-1];return[c,c.isText?Nt.Text:Nt.End]}return[e,Nt.Start]}const r=e.parent,a=r.allChildren,s=a.indexOf(e);if(r&&s===0)return[r,Nt.Start];const o=a[s-1];return[o,o.isText?Nt.Text:Nt.End]}}class gl extends ln{constructor(e,i,r,a,s,o){super(e,o);l(this,"fromPos");l(this,"toPos");l(this,"contents");l(this,"splitLevel");this.fromPos=i,this.toPos=r,this.contents=a,this.splitLevel=s}static create(e,i,r,a,s,o){return new gl(e,i,r,a,s,o)}execute(e,i,r){var m;const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Ee))throw new b(S.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const s=this.getExecutedAt(),o=a,[u,c,h]=o.edit([this.fromPos,this.toPos],(m=this.contents)==null?void 0:m.map(d=>d.deepcopy()),this.splitLevel,s,(()=>{let d=s.getDelimiter();return this.contents!==void 0&&(d+=this.contents.length),()=>Ge.of(s.getLamport(),++d,s.getActorID())})(),r);e.acc(h);for(const d of c)e.registerGCPair(d);return{opInfos:u.map(({from:d,to:g,value:T,splitLevel:A,fromPath:x,toPath:p})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:d,to:g,value:T,splitLevel:A,fromPath:x,toPath:p}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,r=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,a=this.contents||[];return`${e}.EDIT(${i},${r},${a.map(s=>dg(s)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}}class us{constructor(t){l(this,"vector");this.vector=t||new Map}set(t,e){this.vector.set(t,e)}unset(t){this.vector.delete(t)}get(t){return this.vector.get(t)}has(t){return this.vector.has(t)}maxLamport(){let t=BigInt(0);for(const[,e]of this)e>t&&(t=e);return t}max(t){const e=new Map;for(const[i,r]of t){const a=this.vector.get(i),s=a&&a>r?a:r;e.set(i,s)}for(const[i,r]of this){const a=t.get(i),s=a&&a>r?a:r;e.set(i,s)}return new us(e)}afterOrEqual(t){const e=this.vector.get(t.getActorID());return e===void 0?!1:e>=t.getLamport()}deepcopy(){const t=new Map;for(const[e,i]of this.vector)t.set(e,i);return new us(t)}filter(t){const e=new Map;for(const[i]of t){const r=this.vector.get(i);r!==void 0&&e.set(i,r)}return new us(e)}size(){return this.vector.size}*[Symbol.iterator](){for(const[t,e]of this.vector)yield[t,e]}}const LS=new us(new Map);class _e{constructor(t,e,i,r,a){l(this,"clientSeq");l(this,"serverSeq");l(this,"actor");l(this,"lamport");l(this,"versionVector");this.clientSeq=t,this.serverSeq=a,this.lamport=e,this.versionVector=r,this.actor=i}hasClocks(){return this.versionVector.size()>0&&this.lamport!=ed}static of(t,e,i,r,a){return new _e(t,e,i,r,a)}next(t=!1){if(t)return new _e(this.clientSeq+1,this.lamport,this.actor,LS,ed);const e=this.versionVector.deepcopy();return e.set(this.actor,this.lamport+1n),new _e(this.clientSeq+1,this.lamport+1n,this.actor,e)}syncClocks(t){if(!t.hasClocks())return this;const e=t.lamport>this.lamport?t.lamport+1n:this.lamport+1n,i=this.versionVector.max(t.versionVector),r=new _e(this.clientSeq,e,this.actor,i);return r.versionVector.set(this.actor,e),r}setClocks(t,e){const i=t>this.lamport?t+1n:this.lamport+1n,r=this.versionVector.max(e);return r.set(this.actor,i),_e.of(this.clientSeq,i,this.actor,r)}createTimeTicket(t){return Ge.of(this.lamport,t,this.actor)}setActor(t){return new _e(this.clientSeq,this.lamport,t,this.versionVector,this.serverSeq)}setLamport(t){return new _e(this.clientSeq,t,this.actor,this.versionVector,this.serverSeq)}setVersionVector(t){return new _e(this.clientSeq,this.lamport,this.actor,t,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const _A=new _e(0,0n,cg,LS);class ks{constructor({id:t,operations:e,presenceChange:i,message:r}){l(this,"id");l(this,"operations");l(this,"presenceChange");l(this,"message");this.id=t,this.operations=e||[],this.presenceChange=i,this.message=r}static create({id:t,operations:e,presenceChange:i,message:r}){return new ks({id:t,operations:e,presenceChange:i,message:r})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(t){for(const e of this.operations)e.setActor(t);this.id=this.id.setActor(t)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(t,e,i){const r=[],a=[];for(const s of this.operations){const o=s.execute(t,i,this.id.getVersionVector());if(!o)continue;const{opInfos:u,reverseOp:c}=o;r.push(...u),c&&a.unshift(c)}return this.presenceChange&&(this.presenceChange.type===xn.Put?e.set(this.id.getActorID(),Qe(this.presenceChange.presence)):e.delete(this.id.getActorID())),{opInfos:r,reverseOps:a}}toTestString(){return`${this.operations.map(t=>t.toTestString()).join(",")}`}toStruct(){return{changeID:St.bytesToHex(St.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(t=>St.bytesToHex(St.toOperation(t).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(t){const{changeID:e,operations:i,presenceChange:r,message:a}=t;return ks.create({id:St.bytesToChangeID(St.hexToBytes(e)),operations:i==null?void 0:i.map(s=>St.bytesToOperation(St.hexToBytes(s))),presenceChange:r,message:a})}}class Ic{constructor(t,e,i,r,a,s){l(this,"documentKey");l(this,"checkpoint");l(this,"isRemoved");l(this,"changes");l(this,"snapshot");l(this,"versionVector");this.documentKey=t,this.checkpoint=e,this.isRemoved=i,this.changes=r,this.snapshot=s,this.versionVector=a}static create(t,e,i,r,a,s){return new Ic(t,e,i,r,a,s)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getVersionVector(){return this.versionVector}}class cs{constructor(t,e){l(this,"serverSeq");l(this,"clientSeq");this.serverSeq=t,this.clientSeq=e}static of(t,e){return new cs(t,e)}increaseClientSeq(t){return t===0?this:new cs(this.serverSeq,this.clientSeq+t)}forward(t){if(this.equals(t))return this;const e=this.serverSeq>t.serverSeq?this.serverSeq:t.serverSeq,i=Math.max(this.clientSeq,t.clientSeq);return cs.of(e,i)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(t){return this.clientSeq===t.clientSeq&&this.serverSeq==t.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const WA=new cs(0n,0);class Nn{constructor(t,e){l(this,"createdAt");l(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new Nn(t,e)}static fromStruct(t){return Nn.of(Ge.fromStruct(t.createdAt),t.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}hasSameCreatedAt(t){return this.createdAt.compare(t.createdAt)===0}split(t){return new Nn(this.createdAt,this.offset+t)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const tE=Nn.of(xs,0);class sn{constructor(t,e){l(this,"id");l(this,"relativeOffset");this.id=t,this.relativeOffset=e}static of(t,e){return new sn(t,e)}static fromStruct(t){const e=Nn.fromStruct(t.id);return sn.of(e,t.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return Nn.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(t){return this.id.equals(t.id)?this.relativeOffset===t.relativeOffset:!1}}class $r extends xS{constructor(e,i,r){super(i);l(this,"id");l(this,"removedAt");l(this,"prev");l(this,"next");l(this,"insPrev");l(this,"insNext");this.id=e,this.removedAt=r}static create(e,i){return new $r(e,i)}static createComparator(){return(e,i)=>{const r=e.getCreatedAt().compare(i.getCreatedAt());return r!==0?r:e.getOffset()>i.getOffset()?1:e.getOffset()<i.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new $r(this.id.split(e),this.splitValue(e),this.removedAt)}canRemove(e,i,r){return i?!!(!this.removedAt||!r&&(e!=null&&e.after(this.removedAt))):!1}canStyle(e,i){return this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))}setRemovedAt(e){this.removedAt=e}remove(e){if(!this.removedAt){this.removedAt=e;return}e.after(this.removedAt)&&(this.removedAt=e)}createPosRange(){return[sn.of(this.id,0),sn.of(this.id,this.getLength())]}getDataSize(){const e=this.value.getDataSize();return this.id&&(e.meta+=An),this.removedAt&&(e.meta+=An),e}deepcopy(){return new $r(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const i=this.value;return this.value=i.substring(0,e),i.substring(e,i.length)}toIDString(){return this.id.toIDString()}}class Cs{constructor(){l(this,"head");l(this,"treeByIndex");l(this,"treeByID");this.head=$r.create(tE),this.treeByIndex=new jo,this.treeByID=new MS($r.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Cs}edit(t,e,i,r){const a={data:0,meta:0},[s,o,u]=this.findNodeWithSplit(t[1],e),[c,h,m]=this.findNodeWithSplit(t[0],e);$t(a,o,h);const d=this.findBetween(m,u),[g,T]=this.deleteNodes(d,e,r),A=u?u.getID():s.getID();let x=sn.of(A,0);if(i){const y=this.posToIndex(c.createPosRange()[1],!0),v=this.insertAfter(c,$r.create(Nn.of(e,0),i));$t(a,v.getDataSize()),g.length&&g[g.length-1].from===y?g[g.length-1].value=i:g.push({actor:e.getActorID(),from:y,to:y,value:i}),x=sn.of(v.getID(),v.getContentLength())}const p=[];for(const[,y]of T)p.push({parent:this,child:y});return[x,p,a,g]}indexToPos(t){const[e,i]=this.treeByIndex.find(t),r=e;return sn.of(r.getID(),i)}findIndexesFromRange(t){const[e,i]=t;return[this.posToIndex(e,!1),this.posToIndex(i,!0)]}posToIndex(t,e){const i=t.getAbsoluteID(),r=e?this.findFloorNodePreferToLeft(i):this.findFloorNode(i);if(!r)throw new b(S.ErrInvalidArgument,`the node of the given id should be found: ${i.toTestString()}`);const a=this.treeByIndex.indexOf(r),s=r.isRemoved()?0:i.getOffset()-r.getID().getOffset();return a+s}findNode(t){return this.findFloorNode(t)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const t=[];for(const e of this)e.isRemoved()||t.push(e.getValue());return t.join("")}*[Symbol.iterator](){let t=this.head.getNext();for(;t;)yield t,t=t.getNext()}getHead(){return this.head}deepcopy(){const t=new Cs;let e=this.head.getNext(),i=t.head,r;for(;e;){if(r=t.insertAfter(i,e.deepcopy()),e.hasInsPrev()){const a=t.findNode(e.getInsPrevID());r.setInsPrev(a)}i=r,e=e.getNext()}return t}toTestString(){const t=[];let e=this.head;for(;e;)e.isRemoved()?t.push(`{${e.toTestString()}}`):t.push(`[${e.toTestString()}]`),e=e.getNext();return t.join("")}insertAfter(t,e){const i=t.getNext();return e.setPrev(t),i&&i.setPrev(e),this.treeByID.put(e.getID(),e),this.treeByIndex.insertAfter(t,e),e}findNodeWithSplit(t,e){const i=t.getAbsoluteID();let r=this.findFloorNodePreferToLeft(i);const a=i.getOffset()-r.getID().getOffset(),[,s]=this.splitNode(r,a);for(;r.hasNext()&&r.getNext().getCreatedAt().after(e);)r=r.getNext();return[r,s,r.getNext()]}findFloorNodePreferToLeft(t){let e=this.findFloorNode(t);if(!e)throw new b(S.ErrInvalidArgument,`the node of the given id should be found: ${t.toTestString()}`);if(t.getOffset()>0&&e.getID().getOffset()==t.getOffset()){if(!e.hasInsPrev())return e;e=e.getInsPrev()}return e}findFloorNode(t){const e=this.treeByID.floorEntry(t);if(e&&!(!e.key.equals(t)&&!e.key.hasSameCreatedAt(t)))return e.value}findBetween(t,e){const i=[];let r=t;for(;r&&r!==e;)i.push(r),r=r.getNext();return i}splitNode(t,e){const i={data:0,meta:0};if(e>t.getContentLength())throw new b(S.ErrInvalidArgument,"offset should be less than or equal to length");if(e===0)return[t,i];if(e===t.getContentLength())return[t.getNext(),i];const r=t.getDataSize(),a=t.split(e);this.treeByIndex.updateWeight(a),this.insertAfter(t,a);const s=t.getInsNext();return s&&s.setInsPrev(a),a.setInsPrev(t),$t(i,t.getDataSize(),a.getDataSize()),ua(i,r),[a,i]}deleteNodes(t,e,i){if(!t.length)return[[],new Map];const r=i===void 0||i.size()===0,a=[],s=[],[o,u]=this.findEdgesOfCandidates(t);s.push(o);for(const m of t){let d=!1;if(r)d=!0;else{const T=i==null?void 0:i.get(m.getCreatedAt().getActorID());T&&T>=m.getCreatedAt().getLamport()&&(d=!0)}let g=!1;if(m.getRemovedAt()){const T=i==null?void 0:i.get(m.getRemovedAt().getActorID());(r||T&&T>=m.getRemovedAt().getLamport())&&(g=!0)}m.canRemove(e,d,g)?a.push(m):s.push(m)}s.push(u);const c=this.makeChanges(s,e),h=new Map;for(const m of a)h.set(m.getID().toIDString(),m),m.remove(e);return this.deleteIndexNodes(s),[c,h]}findEdgesOfCandidates(t){return[t[0].getPrev(),t[t.length-1].getNext()]}makeChanges(t,e){const i=[];let r,a;for(let s=0;s<t.length-1;s++){const o=t[s],u=t[s+1];o.getNext()!=u&&([r]=this.findIndexesFromRange(o.getNext().createPosRange()),u?[,a]=this.findIndexesFromRange(u.getPrev().createPosRange()):a=this.treeByIndex.length,r<a&&i.push({actor:e.getActorID(),from:r,to:a}))}return i.reverse()}deleteIndexNodes(t){for(let e=0;e<t.length-1;e++){const i=t[e],r=t[e+1];i.getNext()!=r&&this.treeByIndex.deleteRange(i,r)}}purge(t){this.treeByIndex.delete(t),this.treeByID.remove(t.getID());const e=t.getPrev(),i=t.getNext(),r=t.getInsPrev(),a=t.getInsNext();e&&e.setNext(i),i&&i.setPrev(e),t.setPrev(void 0),t.setNext(void 0),r&&r.setInsNext(a),a&&a.setInsPrev(r),t.setInsPrev(void 0),t.setInsNext(void 0)}}const Hy=n=>n<0?Math.ceil(n):Math.floor(n);var On=(n=>(n[n.Int=0]="Int",n[n.Long=1]="Long",n))(On||{});class oe extends fl{constructor(e,i,r){super(r);l(this,"valueType");l(this,"value");switch(this.valueType=e,e){case 0:typeof i=="number"?i>Math.pow(2,31)-1||i<-Math.pow(2,31)?this.value=F.fromNumber(i).toInt():this.value=Hy(i):this.value=i.toInt();break;case 1:typeof i=="number"?this.value=F.fromNumber(i):this.value=i;break;default:throw new b(S.ErrUnimplemented,`unimplemented type: ${e}`)}}static create(e,i,r){return new oe(e,i,r)}static valueFromBytes(e,i){switch(e){case 0:return i[0]|i[1]<<8|i[2]<<16|i[3]<<24;case 1:return F.fromBytesLE(Array.from(i));default:throw new b(S.ErrUnimplemented,`unimplemented type: ${e}`)}}getDataSize(){return{data:this.valueType===0?4:8,meta:this.getMetaUsage()}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=oe.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof F?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!oe.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const i=this.value.toBytesLE();return Uint8Array.from(i)}default:throw new b(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function i(r){if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`)}return i(this),i(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===lt.Long?this.value=this.value+e.getValue().toInt():this.value=F.fromNumber(this.value+Hy(e.getValue())).toInt(),this}}class Is extends ln{constructor(e,i,r){super(e,r);l(this,"value");this.value=i}static create(e,i,r){return new Is(e,i,r)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof oe))throw new b(S.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const r=i,a=this.value.deepcopy();return r.increase(a),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:a.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),r=e.getType()===lt.Long?e.getValue().multiply(-1):e.getValue()*-1;return Is.create(this.getParentCreatedAt(),vt.of(r,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class cr extends ln{constructor(e,i,r,a,s,o){super(e,o);l(this,"fromPos");l(this,"toPos");l(this,"attributes");l(this,"attributesToRemove");this.fromPos=i,this.toPos=r,this.attributes=a,this.attributesToRemove=s}static create(e,i,r,a,s){return new cr(e,i,r,a,[],s)}static createTreeRemoveStyleOperation(e,i,r,a,s){return new cr(e,i,r,new Map,a,s)}execute(e,i,r){const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Ee))throw new b(S.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const s=a;let o,u,c={data:0,meta:0};if(this.attributes.size){const h={};[...this.attributes].forEach(([m,d])=>h[m]=d),[u,o,c]=s.style([this.fromPos,this.toPos],h,this.getExecutedAt(),r)}else{const h=this.attributesToRemove;[u,o,c]=s.removeStyle([this.fromPos,this.toPos],h,this.getExecutedAt(),r)}e.acc(c);for(const h of u)e.registerGCPair(h);return{opInfos:o.map(({from:h,to:m,value:d,fromPath:g,toPath:T})=>({type:"tree-style",from:h,to:m,value:this.attributes.size?{attributes:d}:{attributesToRemove:d},fromPath:g,toPath:T,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,r=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${i},${r},${Object.entries(this.attributes||{}).map(([a,s])=>`${a}:"${s}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}class yr extends ln{constructor(e,i,r,a){super(e,a);l(this,"createdAt");l(this,"value");this.createdAt=i,this.value=r}static create(e,i,r,a){return new yr(e,i,r,a)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new b(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof Qt))throw new b(S.ErrInvalidArgument,"fail to execute, only array can execute set");const r=i.getByID(this.createdAt).deepcopy(),a=this.toReverseOperation(this.value,r),s=this.value.deepcopy();return i.insertAfter(this.createdAt,s,this.getExecutedAt()),i.delete(this.createdAt,this.getExecutedAt()),e.registerElement(s),{opInfos:[{type:"array-set",path:e.createPath(this.getParentCreatedAt())}],reverseOp:a}}toReverseOperation(e,i){return yr.create(this.getParentCreatedAt(),e.getCreatedAt(),i)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ARRAY_SET.${this.createdAt.toTestString()}=${this.value.toSortedJSON()}`}getCreatedAt(){return this.createdAt}getValue(){return this.value}setCreatedAt(e){this.createdAt=e}}function eE(n){const t=new kc,e=t.data;for(const[i,r]of Object.entries(n))e[i]=JSON.stringify(r);return t}function nE(n){if(n.type===xn.Put)return new Vo({type:Aa.PUT,presence:eE(n.presence)});if(n.type===xn.Clear)return new Vo({type:Aa.CLEAR});throw new b(S.ErrUnimplemented,"unimplemented type")}function iE(n){return new ES({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function JS(n){return new Dc({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:Rc(n.getActorID()),versionVector:gg(n.getVersionVector())})}function U(n){if(n)return new M({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:Rc(n.getActorID())})}function gg(n){if(!n)return;const t=new Oc;for(const[e,i]of n){const r=qE(Rc(e));t.vector[r]=BigInt(i.toString())}return t}function qS(n){switch(n){case lt.Null:return H.NULL;case lt.Boolean:return H.BOOLEAN;case lt.Integer:return H.INTEGER;case lt.Long:return H.LONG;case lt.Double:return H.DOUBLE;case lt.String:return H.STRING;case lt.Bytes:return H.BYTES;case lt.Date:return H.DATE;default:throw new b(S.ErrInvalidType,`unsupported type: ${n}`)}}function PS(n){switch(n){case On.Int:return H.INTEGER_CNT;case On.Long:return H.LONG_CNT;default:throw new b(S.ErrInvalidType,`unsupported type: ${n}`)}}function zl(n){if(n instanceof Zt)return new ke({type:H.JSON_OBJECT,createdAt:U(n.getCreatedAt()),value:WS(n)});if(n instanceof Qt)return new ke({type:H.JSON_ARRAY,createdAt:U(n.getCreatedAt()),value:ME(n)});if(n instanceof Ae)return new ke({type:H.TEXT,createdAt:U(n.getCreatedAt())});if(n instanceof vt)return new ke({type:qS(n.getType()),createdAt:U(n.getCreatedAt()),value:n.toBytes()});if(n instanceof oe)return new ke({type:PS(n.getType()),createdAt:U(n.getCreatedAt()),value:n.toBytes()});if(n instanceof Ee)return new ke({type:H.TREE,createdAt:U(n.getCreatedAt()),value:LE(n)});throw new b(S.ErrUnimplemented,"unimplemented element")}function rE(n){return new Po({createdAt:U(n.getCreatedAt()),offset:n.getOffset()})}function Ml(n){return new Ea({createdAt:U(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function Ul(n){return new wa({parentId:bo(n.getParentID()),leftSiblingId:bo(n.getLeftSiblingID())})}function bo(n){return new Kr({createdAt:U(n.getCreatedAt()),offset:n.getOffset()})}function HS(n){const t=new lg;if(n instanceof Na){const e=n,i=new Lu;i.parentCreatedAt=U(e.getParentCreatedAt()),i.key=e.getKey(),i.value=zl(e.getValue()),i.executedAt=U(e.getExecutedAt()),t.body.case="set",t.body.value=i}else if(n instanceof _r){const e=n,i=new Ju;i.parentCreatedAt=U(e.getParentCreatedAt()),i.prevCreatedAt=U(e.getPrevCreatedAt()),i.value=zl(e.getValue()),i.executedAt=U(e.getExecutedAt()),t.body.case="add",t.body.value=i}else if(n instanceof nn){const e=n,i=new qu;i.parentCreatedAt=U(e.getParentCreatedAt()),i.prevCreatedAt=U(e.getPrevCreatedAt()),i.createdAt=U(e.getCreatedAt()),i.executedAt=U(e.getExecutedAt()),t.body.case="move",t.body.value=i}else if(n instanceof Dn){const e=n,i=new Pu;i.parentCreatedAt=U(e.getParentCreatedAt()),i.createdAt=U(e.getCreatedAt()),i.executedAt=U(e.getExecutedAt()),t.body.case="remove",t.body.value=i}else if(n instanceof hl){const e=n,i=new Hu;i.parentCreatedAt=U(e.getParentCreatedAt()),i.from=Ml(e.getFromPos()),i.to=Ml(e.getToPos()),i.content=e.getContent();const r=i.attributes;for(const[a,s]of e.getAttributes())r[a]=s;i.executedAt=U(e.getExecutedAt()),t.body.case="edit",t.body.value=i}else if(n instanceof dl){const e=n,i=new Vu;i.parentCreatedAt=U(e.getParentCreatedAt()),i.from=Ml(e.getFromPos()),i.to=Ml(e.getToPos());const r=i.attributes;for(const[a,s]of e.getAttributes())r[a]=s;i.executedAt=U(e.getExecutedAt()),t.body.case="style",t.body.value=i}else if(n instanceof Is){const e=n,i=new Ku;i.parentCreatedAt=U(e.getParentCreatedAt()),i.value=zl(e.getValue()),i.executedAt=U(e.getExecutedAt()),t.body.case="increase",t.body.value=i}else if(n instanceof gl){const e=n,i=new ju;i.parentCreatedAt=U(e.getParentCreatedAt()),i.from=Ul(e.getFromPos()),i.to=Ul(e.getToPos()),i.contents=fE(e.getContents()),i.splitLevel=e.getSplitLevel(),i.executedAt=U(e.getExecutedAt()),t.body.case="treeEdit",t.body.value=i}else if(n instanceof cr){const e=n,i=new $u;i.parentCreatedAt=U(e.getParentCreatedAt()),i.from=Ul(e.getFromPos()),i.to=Ul(e.getToPos());const r=e.getAttributesToRemove();if(r.length>0)i.attributesToRemove=r;else{const a=i.attributes;for(const[s,o]of e.getAttributes())a[s]=o}i.executedAt=U(e.getExecutedAt()),t.body.case="treeStyle",t.body.value=i}else if(n instanceof yr){const e=n,i=new Gu;i.parentCreatedAt=U(e.getParentCreatedAt()),i.createdAt=U(e.getCreatedAt()),i.value=zl(e.getValue()),i.executedAt=U(e.getExecutedAt()),t.body.case="arraySet",t.body.value=i}else throw new b(S.ErrUnimplemented,"unimplemented operation");return t}function aE(n){const t=[];for(const e of n)t.push(HS(e));return t}function sE(n){const t=new wS({id:JS(n.getID()),message:n.getMessage()});return n.hasOperations()&&(t.operations=aE(n.getOperations())),n.hasPresenceChange()&&(t.presenceChange=nE(n.getPresenceChange())),t}function oE(n){const t=[];for(const e of n)t.push(sE(e));return t}function lE(n){const t=[];for(const e of n)t.push(new AS({key:e.getStrKey(),element:yg(e.getValue())}));return t}function uE(n){const t=[];for(const e of n)t.push(new Wu({element:yg(e.getValue())}));return t}function cE(n){const t=[];for(const e of n){const i=new tc;i.id=rE(e.getID()),i.value=e.getValue().getContent(),i.removedAt=U(e.getRemovedAt());const r=i.attributes,a=e.getValue().getAttrs();for(const s of a){const o=new Ns;o.value=s.getValue(),o.updatedAt=U(s.getUpdatedAt()),r[s.getKey()]=o}t.push(i)}return t}function fE(n){const t=[];if(!n||!n.length)return t;for(const e of n)t.push(new ec({content:mg(e)}));return t}function hE(n){const t={};for(const e of n)t[e.getKey()]=new Ns({value:e.getValue(),updatedAt:U(e.getUpdatedAt()),isRemoved:e.isRemoved()});return t}function mg(n){if(!n)return[];const t=[];return Cc(n,(e,i)=>{const r=new Ho({id:bo(e.id),type:e.type,removedAt:U(e.removedAt),depth:i});e.isText&&(r.value=e.value),e.insPrevID&&(r.insPrevId=bo(e.insPrevID)),e.insNextID&&(r.insNextId=bo(e.insNextID)),e.attrs&&(r.attributes=hE(e.attrs)),t.push(r)}),t}function dE(n){const t=new ue;return t.body.case="jsonObject",t.body.value=new Yu({nodes:lE(n.getRHT()),createdAt:U(n.getCreatedAt()),movedAt:U(n.getMovedAt()),removedAt:U(n.getRemovedAt())}),t}function VS(n){const t=new ue;return t.body.case="jsonArray",t.body.value=new Xu({nodes:uE(n.getElements()),createdAt:U(n.getCreatedAt()),movedAt:U(n.getMovedAt()),removedAt:U(n.getRemovedAt())}),t}function gE(n){const t=new ue;return t.body.case="primitive",t.body.value=new Fu({type:qS(n.getType()),value:n.toBytes(),createdAt:U(n.getCreatedAt()),movedAt:U(n.getMovedAt()),removedAt:U(n.getRemovedAt())}),t}function mE(n){const t=new ue;return t.body.case="text",t.body.value=new Zu({nodes:cE(n.getRGATreeSplit()),createdAt:U(n.getCreatedAt()),movedAt:U(n.getMovedAt()),removedAt:U(n.getRemovedAt())}),t}function yE(n){const t=new ue;return t.body.case="counter",t.body.value=new Qu({type:PS(n.getType()),value:n.toBytes(),createdAt:U(n.getCreatedAt()),movedAt:U(n.getMovedAt()),removedAt:U(n.getRemovedAt())}),t}function KS(n){const t=new ue;return t.body.case="tree",t.body.value=new _u({nodes:mg(n.getRoot()),createdAt:U(n.getCreatedAt()),movedAt:U(n.getMovedAt()),removedAt:U(n.getRemovedAt())}),t}function yg(n){if(n instanceof Zt)return dE(n);if(n instanceof Qt)return VS(n);if(n instanceof vt)return gE(n);if(n instanceof Ae)return mE(n);if(n instanceof oe)return yE(n);if(n instanceof Ee)return KS(n);throw new b(S.ErrUnimplemented,"unimplemented element")}function pE(n){return new vr({documentKey:n.getDocumentKey(),checkpoint:iE(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:oE(n.getChanges()),snapshot:n.getSnapshot(),versionVector:gg(n.getVersionVector())})}function Ws(n){if(!(n instanceof ot))return{};const t=n.findDetails(MA);for(const e of t)return e.metadata;return{}}function Pa(n){return Ws(n).code??""}function wf(n,t){return n instanceof ot&&Pa(n)===t}function jS(n){return _e.of(n.clientSeq,BigInt(n.lamport),Tg(n.actorId),pg(n.versionVector),BigInt(n.serverSeq))}function pg(n){if(!n)return;const t=new us;return Object.entries(n.vector).forEach(([e,i])=>{const r=Bc(JE(e));t.set(r,BigInt(i.toString()))}),t}function L(n){if(n)return Ge.of(BigInt(n.lamport),n.delimiter,Tg(n.actorId))}function vg(n){const t={};return Object.entries(n.data).forEach(([e,i])=>{t[e]=JSON.parse(i)}),t}function vE(n){const t=n.type;if(t===Aa.PUT){const e=vg(n.presence);return{type:xn.Put,presence:e}}if(t===Aa.CLEAR)return{type:xn.Clear};throw new b(S.ErrInvalidType,`unsupported type: ${t}`)}function SE(n){const t=new Map;return Object.entries(n).forEach(([e,i])=>{t.set(e,vg(i))}),t}function $S(n){switch(n){case H.NULL:return lt.Null;case H.BOOLEAN:return lt.Boolean;case H.INTEGER:return lt.Integer;case H.LONG:return lt.Long;case H.DOUBLE:return lt.Double;case H.STRING:return lt.String;case H.BYTES:return lt.Bytes;case H.DATE:return lt.Date}throw new b(S.ErrUnimplemented,`unimplemented value type: ${n}`)}function sc(n){switch(n){case H.INTEGER_CNT:return On.Int;case H.LONG_CNT:return On.Long}throw new b(S.ErrUnimplemented,`unimplemented value type: ${n}`)}function Ll(n){switch(n.type){case H.JSON_OBJECT:return n.value?_S(n.value):Zt.create(L(n.createdAt));case H.JSON_ARRAY:return n.value?zE(n.value):Qt.create(L(n.createdAt));case H.TEXT:return Ae.create(Cs.create(),L(n.createdAt));case H.TREE:return UE(n.value);case H.NULL:case H.BOOLEAN:case H.INTEGER:case H.LONG:case H.DOUBLE:case H.STRING:case H.BYTES:case H.DATE:return vt.of(vt.valueFromBytes($S(n.type),n.value),L(n.createdAt));case H.INTEGER_CNT:case H.LONG_CNT:return oe.create(sc(n.type),oe.valueFromBytes(sc(n.type),n.value),L(n.createdAt))}}function Jl(n){return sn.of(Nn.of(L(n.createdAt),n.offset),n.relativeOffset)}function GS(n){return Nn.of(L(n.createdAt),n.offset)}function bE(n){const t=Go.create(n.value);Object.entries(n.attributes).forEach(([i,r])=>{t.setAttr(i,r.value,L(r.updatedAt))});const e=$r.create(GS(n.id),t);return e.setRemovedAt(L(n.removedAt)),e}function za(n){return rn.of(To(n.parentId),To(n.leftSiblingId))}function To(n){return Yt.of(L(n.createdAt),n.offset)}function TE(n){if(!n.length)return;const t=[];return n.forEach(e=>{const i=Sg(e.content);t.push(i)}),t}function Sg(n){if(n.length===0)return;const t=[];for(const r of n)t.push(AE(r));const e=t[t.length-1],i=new Map;i.set(n[t.length-1].depth,t[t.length-1]);for(let r=t.length-2;r>=0;r--)i.get(n[r].depth-1).prepend(t[r]),i.set(n[r].depth,t[r]);return e.updateDescendantsSize(),e.updateDescendantsSize(!0),Ee.create(e,xs).getRoot()}function wE(n){const t=mr.create();for(const[e,i]of Object.entries(n))t.setInternal(e,i.value,L(i.updatedAt),i.isRemoved);return t}function AE(n){const t=To(n.id),e=pe.create(t,n.type),i=Object.entries(n.attributes);return e.isText?e.value=n.value:i.length&&(e.attrs=wE(n.attributes)),n.insPrevId&&(e.insPrevID=To(n.insPrevId)),n.insNextId&&(e.insNextID=To(n.insNextId)),e.removedAt=L(n.removedAt),e}function YS(n){if(n.body.case==="set"){const t=n.body.value;return Na.create(t.key,Ll(t.value),L(t.parentCreatedAt),L(t.executedAt))}else if(n.body.case==="add"){const t=n.body.value;return _r.create(L(t.parentCreatedAt),L(t.prevCreatedAt),Ll(t.value),L(t.executedAt))}else if(n.body.case==="move"){const t=n.body.value;return nn.create(L(t.parentCreatedAt),L(t.prevCreatedAt),L(t.createdAt),L(t.executedAt))}else if(n.body.case==="remove"){const t=n.body.value;return Dn.create(L(t.parentCreatedAt),L(t.createdAt),L(t.executedAt))}else if(n.body.case==="edit"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([i,r])=>{e.set(i,r)}),hl.create(L(t.parentCreatedAt),Jl(t.from),Jl(t.to),t.content,e,L(t.executedAt))}else if(n.body.case==="style"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([i,r])=>{e.set(i,r)}),dl.create(L(t.parentCreatedAt),Jl(t.from),Jl(t.to),e,L(t.executedAt))}else if(n.body.case==="increase"){const t=n.body.value;return Is.create(L(t.parentCreatedAt),Ll(t.value),L(t.executedAt))}else if(n.body.case==="treeEdit"){const t=n.body.value;return gl.create(L(t.parentCreatedAt),za(t.from),za(t.to),TE(t.contents),t.splitLevel,L(t.executedAt))}else if(n.body.case==="treeStyle"){const t=n.body.value,e=new Map,i=t.attributesToRemove;return(i==null?void 0:i.length)>0?cr.createTreeRemoveStyleOperation(L(t.parentCreatedAt),za(t.from),za(t.to),i,L(t.executedAt)):(Object.entries(t.attributes).forEach(([r,a])=>{e.set(r,a)}),cr.create(L(t.parentCreatedAt),za(t.from),za(t.to),e,L(t.executedAt)))}else if(n.body.case==="arraySet"){const t=n.body.value;return yr.create(L(t.parentCreatedAt),L(t.createdAt),Ll(t.value),L(t.executedAt))}else throw new b(S.ErrUnimplemented,"unimplemented operation")}function EE(n){const t=[];for(const e of n){const i=YS(e);i&&t.push(i)}return t}function XS(n){const t=[];for(const e of n)t.push(ks.create({id:jS(e.id),operations:EE(e.operations),presenceChange:e.presenceChange?vE(e.presenceChange):void 0,message:e.message}));return t}function NE(n){return cs.of(BigInt(n.serverSeq),n.clientSeq)}function xE(n){return Ic.create(n.documentKey,NE(n.checkpoint),n.isRemoved,XS(n.changes),pg(n.versionVector),n.snapshot)}function FS(n){const t=new Ko;for(const i of n.nodes){const r=bg(i.element);t.set(i.key,r,r.getPositionedAt())}const e=new Zt(L(n.createdAt),t);return e.setMovedAt(L(n.movedAt)),e.setRemovedAt(L(n.removedAt)),e}function ZS(n){const t=new $o;for(const i of n.nodes)t.insert(bg(i.element));const e=new Qt(L(n.createdAt),t);return e.setMovedAt(L(n.movedAt)),e.setRemovedAt(L(n.removedAt)),e}function DE(n){const t=vt.of(vt.valueFromBytes($S(n.type),n.value),L(n.createdAt));return t.setMovedAt(L(n.movedAt)),t.setRemovedAt(L(n.removedAt)),t}function OE(n){const t=new Cs;let e=t.getHead();for(const r of n.nodes){const a=t.insertAfter(e,bE(r));r.insPrevId&&a.setInsPrev(t.findNode(GS(r.insPrevId))),e=a}const i=new Ae(t,L(n.createdAt));return i.setMovedAt(L(n.movedAt)),i.setRemovedAt(L(n.removedAt)),i}function kE(n){const t=oe.create(sc(n.type),oe.valueFromBytes(sc(n.type),n.value),L(n.createdAt));return t.setMovedAt(L(n.movedAt)),t.setRemovedAt(L(n.removedAt)),t}function QS(n){const t=Sg(n.nodes);return Ee.create(t,L(n.createdAt))}function bg(n){if(n.body.case==="jsonObject")return FS(n.body.value);if(n.body.case==="jsonArray")return ZS(n.body.value);if(n.body.case==="primitive")return DE(n.body.value);if(n.body.case==="text")return OE(n.body.value);if(n.body.case==="counter")return kE(n.body.value);if(n.body.case==="tree")return QS(n.body.value);throw new b(S.ErrUnimplemented,"unimplemented element")}function CE(n){return n.map(t=>({path:t.path,type:t.type}))}function IE(n){if(!n)return{root:Zt.create(xs),presences:new Map};const t=Th.fromBinary(n);return{root:bg(t.root),presences:SE(t.presences)}}function BE(n){const t=gg(n);return Bc(t.toBinary())}function RE(n){const t=wg(n),e=Oc.fromBinary(t);return pg(e)}function _S(n){if(!n)throw new b(S.ErrInvalidArgument,"bytes is empty");const t=ue.fromBinary(n);return FS(t.body.value)}function WS(n){return yg(n).toBinary()}function zE(n){if(!n)throw new b(S.ErrInvalidArgument,"bytes is empty");const t=ue.fromBinary(n);return ZS(t.body.value)}function ME(n){return VS(n).toBinary()}function UE(n){if(!n)throw new b(S.ErrInvalidArgument,"bytes is empty");const t=ue.fromBinary(n);return QS(t.body.value)}function LE(n){return KS(n).toBinary()}function Bc(n){return n?Array.from(n).map(t=>t.toString(16).padStart(2,"0")).join(""):""}function Tg(n){return Bc(n)}function wg(n){return new Uint8Array(n.match(/.{1,2}/g).map(t=>parseInt(t,16)))}function JE(n){if(typeof window<"u"&&typeof window.atob=="function"){const t=window.atob(n),e=t.length,i=new Uint8Array(e);for(let r=0;r<e;r++)i[r]=t.charCodeAt(r);return i}else if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u"){const t=globalThis.Buffer;return new Uint8Array(t.from(n,"base64"))}else throw new Error("No base64 decoder available")}function Rc(n){return wg(n)}function qE(n){if(typeof window<"u"&&typeof window.btoa=="function"){let t="";for(let e=0;e<n.byteLength;e++)t+=String.fromCharCode(n[e]);return window.btoa(t)}else{if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u")return globalThis.Buffer.from(n).toString("base64");throw new Error("No base64 encoder available")}}function PE(n){const t=Dc.fromBinary(n);return jS(t)}function HE(n){const t=lg.fromBinary(n);return YS(t)}const St={fromPresence:vg,toChangePack:pE,fromChangePack:xE,fromChanges:XS,toTreeNodes:mg,fromTreeNodes:Sg,objectToBytes:WS,bytesToObject:_S,bytesToSnapshot:IE,bytesToHex:Bc,hexToBytes:wg,toHexString:Tg,toUint8Array:Rc,toOperation:HS,toChangeID:JS,PbChangeID:Dc,bytesToChangeID:PE,bytesToOperation:HE,versionVectorToHex:BE,hexToVersionVector:RE,fromSchemaRules:CE};var ae=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(ae||{});let aa=3;function VE(n){aa=n}const z={trivial:(...n)=>{aa>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{aa>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{aa>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{aa>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{aa>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>aa<=n};function tb(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const t=Math.random()*16|0;return(n==="x"?t:t&3|8).toString(16)})}const Af=()=>{};class KE{constructor(t){l(this,"finalized",!1);l(this,"observers",[]);l(this,"finalError");try{t(this)}catch(e){this.error(e)}}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(!t)throw new b(S.ErrInvalidArgument,"missing observer");if(this.finalized)throw new b(S.ErrRefused,"observable is finalized due to previous error");typeof t=="object"?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=Af),r.error===void 0&&(r.error=Af),r.complete===void 0&&(r.complete=Af);const a=tb(),s=this.unsubscribeOne.bind(this,a);if(this.observers.push({subscriptionID:a,observer:r}),this.finalized)try{this.finalError?r.error(this.finalError):r.complete()}catch(o){z.warn(o)}return s}unsubscribeOne(t){var e;this.observers=(e=this.observers)==null?void 0:e.filter(i=>i.subscriptionID!==t)}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t].observer)}catch(i){z.error(i)}}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.observers=void 0)}}function eb(n){const t=new KE(n);return{subscribe:t.subscribe.bind(t),getProxy:()=>t}}class wo{constructor(t,e,i,r){l(this,"prevID");l(this,"nextID");l(this,"delimiter");l(this,"message");l(this,"root");l(this,"operations");l(this,"presenceChange");l(this,"previousPresence");l(this,"reversePresenceKeys");this.prevID=t,this.nextID=t.next(),this.delimiter=NS,this.root=e,this.operations=[],this.previousPresence=Qe(i),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=r}static create(t,e,i,r){return new wo(t,e,i,r)}push(t){this.operations.push(t)}registerElement(t,e){this.root.registerElement(t,e)}registerRemovedElement(t){this.root.registerRemovedElement(t)}registerGCPair(t){this.root.registerGCPair(t)}getNextID(){return this.isPresenceOnlyChange()?this.prevID.next(!0).setLamport(this.prevID.getLamport()).setVersionVector(this.prevID.getVersionVector()):this.nextID}toChange(){const t=this.isPresenceOnlyChange()?this.prevID.next(!0):this.nextID;return ks.create({id:t,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}isPresenceOnlyChange(){return this.operations.length===0}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(t){this.presenceChange=t}setReversePresence(t,e){for(const i of Object.keys(t))e!=null&&e.addToHistory?this.reversePresenceKeys.add(i):this.reversePresenceKeys.delete(i)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const t={};for(const e of this.reversePresenceKeys)t[e]=this.previousPresence[e];return t}issueTimeTicket(){return this.delimiter+=1,this.nextID.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.nextID.createTimeTicket(this.delimiter)}acc(t){this.root.acc(t)}}function nb(n,t){const e=new Yo(n);return new Proxy(t,e.getHandlers())}class Yo{constructor(t){l(this,"context");l(this,"handlers");this.context=t,this.handlers={set:(e,i,r)=>(z.isEnabled(ae.Trivial)&&z.trivial(`obj[${i}]=${JSON.stringify(r)}`),Yo.setInternal(t,e,i,r),!0),get:(e,i)=>(z.isEnabled(ae.Trivial)&&z.trivial(`obj[${i}]`),i==="getID"?()=>e.getCreatedAt():i==="toJSON"||i==="toString"?()=>e.toJSON():i==="toJS"?()=>e.toJS():i==="toJSForTest"?()=>e.toJSForTest():sa(t,e.get(i))),ownKeys:e=>e.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(e,i)=>(z.isEnabled(ae.Trivial)&&z.trivial(`obj[${i}]`),Yo.deleteInternal(t,e,i),!0)}}static setInternal(t,e,i,r){if(i.includes("."))throw new b(S.ErrInvalidObjectKey,"key must not contain the '.'.");const a=t.issueTimeTicket(),s=Ao(t,r,a),o=e.set(i,s,a);t.registerElement(s,e),o&&t.registerRemovedElement(o),t.push(Na.create(i,s.deepcopy(),e.getCreatedAt(),a))}static buildObjectMembers(t,e){const i={};for(const[r,a]of Object.entries(e)){if(r.includes("."))throw new b(S.ErrInvalidObjectKey,"key must not contain the '.'.");const s=t.issueTimeTicket(),o=Ao(t,a,s);i[r]=o}return i}static deleteInternal(t,e,i){const r=t.issueTimeTicket(),a=e.deleteByKey(i,r);a&&(t.push(Dn.create(e.getCreatedAt(),a.getCreatedAt(),r)),t.registerRemovedElement(a))}getHandlers(){return this.handlers}}function jE(n,t){const e=new nt(n,t);return new Proxy(t,e.getHandlers())}function Vy(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function $E(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class nt{constructor(t,e){l(this,"context");l(this,"handlers");l(this,"array");this.context=t,this.array=e,this.handlers={get:(i,r,a)=>r==="getID"?()=>i.getCreatedAt():r==="getElementByID"?s=>{const o=i.getByID(s);if(!(!o||o.isRemoved()))return Ze(t,o)}:r==="getElementByIndex"?s=>{const o=i.get(s);return Ze(t,o)}:r==="getLast"?()=>Ze(t,i.getLast()):r==="delete"?s=>{const o=nt.deleteInternalByIndex(t,i,s);return Ze(t,o)}:r==="deleteByID"?s=>{const o=nt.deleteInternalByID(t,i,s);return Ze(t,o)}:r==="insertAfter"?(s,o)=>{const u=nt.insertAfterInternal(t,i,s,o);return Ze(t,u)}:r==="insertIntegerAfter"?(s,o)=>{const u=nt.insertIntegerAfterInternal(t,i,s,o);return Ze(t,u)}:r==="insertBefore"?(s,o)=>{const u=nt.insertBeforeInternal(t,i,s,o);return Ze(t,u)}:r==="setValue"?(s,o)=>{const u=nt.setValueInternal(t,i,s,o);return Ze(t,u)}:r==="moveBefore"?(s,o)=>{nt.moveBeforeInternal(t,i,s,o)}:r==="moveAfter"?(s,o)=>{nt.moveAfterInternal(t,i,s,o)}:r==="moveAfterByIndex"?(s,o)=>{nt.moveAfterByIndexInternal(t,i,s,o)}:r==="moveFront"?s=>{nt.moveFrontInternal(t,i,s)}:r==="moveLast"?s=>{nt.moveLastInternal(t,i,s)}:Vy(r)?sa(t,i.get(Number(r))):r==="push"?s=>nt.pushInternal(t,i,s):r==="splice"?(s,o,...u)=>nt.splice(t,i,s,o,...u):r==="length"?i.length:typeof r=="symbol"&&r===Symbol.iterator?nt.iteratorInternal.bind(this,t,i):r==="includes"?(s,o)=>nt.includes(t,i,s,o):r==="indexOf"?(s,o)=>nt.indexOf(t,i,s,o):r==="lastIndexOf"?(s,o)=>nt.lastIndexOf(t,i,s,o):r==="toJSForTest"?()=>i.toJSForTest():r==="toTestString"?()=>nt.toTestString(i):typeof r=="string"&&$E(r)?(...s)=>{const o=Array.from(i).map(u=>sa(t,u));return Array.prototype[r].apply(o,s)}:Reflect.get(i,r,a),set:(i,r,a)=>{if(Vy(r)){const s=Number(r);return nt.setValueInternal(t,i,s,a),!0}return Reflect.set(i,r,a)},deleteProperty:(i,r)=>(z.isEnabled(ae.Trivial)&&z.trivial(`array[${r}]`),nt.deleteInternalByIndex(t,i,Number.parseInt(r)),!0)}}static*iteratorInternal(t,e){for(const i of e)yield Ze(t,i)}static buildArrayElements(t,e){const i=[];for(const r of e){const a=t.issueTimeTicket(),s=Ao(t,r,a);i.push(s)}return i}static pushInternal(t,e,i){return nt.insertAfterInternal(t,e,e.getLastCreatedAt(),i),e.length}static moveBeforeInternal(t,e,i,r){const a=t.issueTimeTicket(),s=e.getPrevCreatedAt(i);e.moveAfter(s,r,a),t.push(nn.create(e.getCreatedAt(),s,r,a))}static moveAfterInternal(t,e,i,r){const a=t.issueTimeTicket();t.push(nn.create(e.getCreatedAt(),i,r,a)),e.moveAfter(i,r,a)}static moveAfterByIndexInternal(t,e,i,r){const a=e.get(i);if(!a)throw new b(S.ErrInvalidArgument,`index out of bounds: ${i}`);const s=e.get(r);if(!s)throw new b(S.ErrInvalidArgument,`index out of bounds: ${r}`);nt.moveAfterInternal(t,e,a.getCreatedAt(),s.getCreatedAt())}static moveFrontInternal(t,e,i){const r=t.issueTimeTicket(),a=e.getHead();e.moveAfter(a.getCreatedAt(),i,r),t.push(nn.create(e.getCreatedAt(),a.getCreatedAt(),i,r))}static moveLastInternal(t,e,i){const r=t.issueTimeTicket(),a=e.getLastCreatedAt();e.moveAfter(a,i,r),t.push(nn.create(e.getCreatedAt(),a,i,r))}static insertAfterInternal(t,e,i,r){const a=t.issueTimeTicket(),s=Ao(t,r,a);return e.insertAfter(i,s),t.registerElement(s,e),t.push(_r.create(e.getCreatedAt(),i,s.deepcopy(),a)),s}static insertIntegerAfterInternal(t,e,i,r){const a=e.get(i);if(!a)throw new b(S.ErrInvalidArgument,`index out of bounds: ${i}`);return nt.insertAfterInternal(t,e,a.getCreatedAt(),r),e}static insertBeforeInternal(t,e,i,r){return nt.insertAfterInternal(t,e,e.getPrevCreatedAt(i),r)}static setValueInternal(t,e,i,r){const a=e.get(i);if(!a)throw new b(S.ErrInvalidArgument,`index out of bounds: ${i}`);return nt.setByIndexInternal(t,e,a.getCreatedAt(),r),e}static setByIndexInternal(t,e,i,r){const a=t.issueTimeTicket(),s=Ao(t,r,a),o=s.deepcopy();return t.push(yr.create(e.getCreatedAt(),i,o,a)),e.set(i,s,a),t.registerElement(s,e),s}static deleteInternalByIndex(t,e,i){const r=t.issueTimeTicket(),a=e.deleteByIndex(i,r);if(a)return t.push(Dn.create(e.getCreatedAt(),a.getCreatedAt(),r)),t.registerRemovedElement(a),a}static deleteInternalByID(t,e,i){const r=t.issueTimeTicket(),a=e.delete(i,r);return t.push(Dn.create(e.getCreatedAt(),a.getCreatedAt(),r)),t.registerRemovedElement(a),a}static splice(t,e,i,r,...a){const s=e.length,o=i>=0?Math.min(i,s):Math.max(s+i,0),u=r===void 0?s:r<0?o:Math.min(o+r,s),c=[];for(let h=o;h<u;h++){const m=nt.deleteInternalByIndex(t,e,o);if(m){const d=m.deepcopy();d.setRemovedAt(),c.push(sa(t,d))}}if(a){let h=o===0?e.getHead().getID():e.get(o-1).getID();for(const m of a)h=nt.insertAfterInternal(t,e,h,m).getID()}return c}static includes(t,e,i,r){var o;const a=e.length,s=r===void 0?0:r<0?Math.max(r+a,0):r;if(s>=a)return!1;if(vt.isSupport(i))return Array.from(e).map(c=>sa(t,c)).includes(i,s);for(let u=s;u<a;u++)if(((o=e.get(u))==null?void 0:o.getID())===i.getID())return!0;return!1}static indexOf(t,e,i,r){var o;const a=e.length,s=r===void 0?0:r<0?Math.max(r+a,0):r;if(s>=a)return-1;if(vt.isSupport(i))return Array.from(e).map(c=>sa(t,c)).indexOf(i,s);for(let u=s;u<a;u++)if(((o=e.get(u))==null?void 0:o.getID())===i.getID())return u;return-1}static lastIndexOf(t,e,i,r){var o;const a=e.length,s=r===void 0||r>=a?a-1:r<0?r+a:r;if(s<0)return-1;if(vt.isSupport(i))return Array.from(e).map(c=>sa(t,c)).lastIndexOf(i,s);for(let u=s;u>0;u--)if(((o=e.get(u))==null?void 0:o.getID())===i.getID())return u;return-1}static toTestString(t){return t.toTestString()}getHandlers(){return this.handlers}}class Ag{constructor(t,e){l(this,"context");l(this,"text");this.context=t,this.text=e}initialize(t,e){this.context=t,this.text=e}getID(){return this.text.getID()}edit(t,e,i,r){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new b(S.ErrInvalidArgument,"from should be less than or equal to to");const a=this.text.indexRangeToPosRange(t,e);z.isEnabled(ae.Debug)&&z.debug(`EDIT: f:${t}->${a[0].toTestString()}, t:${e}->${a[1].toTestString()} c:${i}`);const s=r?Os(r):void 0,o=this.context.issueTimeTicket(),[,u,c,h]=this.text.edit(a,i,o,s);this.context.acc(c);for(const m of u)this.context.registerGCPair(m);return this.context.push(new hl(this.text.getCreatedAt(),a[0],a[1],i,s?new Map(Object.entries(s)):new Map,o)),this.text.findIndexesFromRange(h)}delete(t,e){return this.edit(t,e,"")}empty(){return this.edit(0,this.length,"")}setStyle(t,e,i){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new b(S.ErrInvalidArgument,"from should be less than or equal to to");const r=this.text.indexRangeToPosRange(t,e);z.isEnabled(ae.Debug)&&z.debug(`STYL: f:${t}->${r[0].toTestString()}, t:${e}->${r[1].toTestString()} a:${JSON.stringify(i)}`);const a=Os(i),s=this.context.issueTimeTicket(),[o,u]=this.text.setStyle(r,a,s);this.context.acc(u);for(const c of o)this.context.registerGCPair(c);return this.context.push(new dl(this.text.getCreatedAt(),r[0],r[1],new Map(Object.entries(a)),s)),!0}indexRangeToPosRange(t){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");const e=this.text.indexRangeToPosRange(t[0],t[1]);return[e[0].toStruct(),e[1].toStruct()]}posRangeToIndexRange(t){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");const e=this.text.findIndexesFromRange([sn.fromStruct(t[0]),sn.fromStruct(t[1])]);return[e[0],e[1]]}toTestString(){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(t,e){if(!this.context||!this.text)throw new b(S.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(t,e)}}class Eg{constructor(t,e){l(this,"valueType");l(this,"value");l(this,"context");l(this,"counter");this.valueType=t,this.value=e}initialize(t,e){this.valueType=e.getValueType(),this.context=t,this.counter=e,this.value=e.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(t){if(!this.context||!this.counter)throw new b(S.ErrNotInitialized,"Counter is not initialized yet");const e=this.context.issueTimeTicket(),i=vt.of(t,e);if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`);return this.counter.increase(i),this.context.push(Is.create(this.counter.getCreatedAt(),i,e)),this}toJSForTest(){if(!this.context||!this.counter)throw new b(S.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function Ng(n){if(n.isText)return{type:n.type,value:n.value};const t={type:n.type,children:n.children.map(e=>Ng(e))};return n.attrs&&(t.attributes=ur(n.attrs.toObject())),t}function GE(n,t){const e={type:n.isText?n.parent.type:n.type,children:n.isText?n.parent.getChildrenText().length===t?[]:[{type:En,value:n.parent.getChildrenText().slice(t)}]:n.children.slice(t).map(i=>Ng(i))};return n.attrs?e.attributes=ur(n.attrs.toObject()):n.isText&&n.parent.attrs&&(e.attributes=ur(n.parent.attrs.toObject())),e}function YE(n,t){const{node:e}=n,i=[...t].slice(0,-1),r=e.isText?e.parent.getChildrenText().length:e.children.length,a=[...i,r],s=[...i],o=[];s[s.length-1]+=1,t.every((c,h)=>c===a[h])||o.push({fromPath:[...t],toPath:a});const u=GE(e,t[t.length-1]);return u&&o.push({fromPath:s,toPath:s,content:u}),o}function XE(n,t){const{node:e,offset:i}=n,r=e.children[i],a=e.children[i-1],{children:s}=r,o=[...t].slice(0,-1),u=[{fromPath:[...t],toPath:[...o,i+1]}];if(!r.children.length)return u;const c=[...o,i-1,a.hasTextChild()?a.getChildrenText().length:a.children.length],h=s.map(m=>Ng(m));return u.push({fromPath:c,toPath:c,content:h}),u}function xg(n,t,e){const{type:i}=n,r=e.issueTimeTicket();if(i===En){ib(n);const{value:a}=n,s=pe.create(Yt.of(r,0),i,a);t.append(s)}else{const{children:a=[]}=n,{attributes:s}=n;let o;if(typeof s=="object"&&!IS(s)){const c=Os(s);o=new mr;for(const[h,m]of Object.entries(c))o.set(h,m,r)}const u=pe.create(Yt.of(r,0),i,void 0,o);t.append(u);for(const c of a)xg(c,u,e)}}function FE(n,t){const{type:e}=t,i=n.issueTimeTicket();let r;if(t.type===En){const{value:a}=t;r=pe.create(Yt.of(i,0),e,a)}else if(t){const{children:a=[]}=t,{attributes:s}=t;let o;if(typeof s=="object"&&!IS(s)){const u=Os(s);o=new mr;for(const[c,h]of Object.entries(u))o.set(c,h,i)}r=pe.create(Yt.of(n.issueTimeTicket(),0),e,void 0,o);for(const u of a)xg(u,r,n)}return r}function ib(n){if(!n.value.length)throw new b(S.ErrInvalidArgument,"text node cannot have empty value");return!0}function Ky(n){if(!n.length)return!0;if(n[0].type===En)for(const e of n){const{type:i}=e;if(i!==En)throw new b(S.ErrInvalidArgument,"element node and text node cannot be passed together");ib(e)}else for(const e of n){const{type:i}=e;if(i===En)throw new b(S.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class Dg{constructor(t){l(this,"initialRoot");l(this,"context");l(this,"tree");this.initialRoot=t}initialize(t,e){this.context=t,this.tree=e}getID(){return this.tree.getID()}buildRoot(t){if(!this.initialRoot)return pe.create(Yt.of(t.issueTimeTicket(),0),jA);const e=pe.create(Yt.of(t.issueTimeTicket(),0),this.initialRoot.type);for(const i of this.initialRoot.children)xg(i,e,t);return e}getSize(){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}splitByPath(t){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new b(S.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t),i=YE(e,t);for(const r of i){const{fromPath:a,toPath:s,content:o}=r,u=this.tree.pathToPos(a),c=this.tree.pathToPos(s);this.editInternal(u,c,o?[o]:[],0)}}mergeByPath(t){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new b(S.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t);if(e.node.isText)throw new b(S.ErrInvalidArgument,"text node cannot be merged");const i=XE(e,t);for(const r of i){const{fromPath:a,toPath:s,content:o}=r,u=this.tree.pathToPos(a),c=this.tree.pathToPos(s);this.editInternal(u,c,o??[],0)}}styleByPath(t,e){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new b(S.ErrInvalidArgument,"path should not be empty");const[i,r]=this.tree.pathToPosRange(t),a=this.context.issueTimeTicket(),s=e?Os(e):void 0,[o,,u]=this.tree.style([i,r],s,a);this.context.acc(u);for(const c of o)this.context.registerGCPair(c);this.context.push(cr.create(this.tree.getCreatedAt(),i,r,s?new Map(Object.entries(s)):new Map,a))}style(t,e,i){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new b(S.ErrInvalidArgument,"from should be less than or equal to to");const r=this.tree.findPos(t),a=this.tree.findPos(e),s=this.context.issueTimeTicket(),o=i?Os(i):void 0,[u,,c]=this.tree.style([r,a],o,s);this.context.acc(c);for(const h of u)this.context.registerGCPair(h);this.context.push(cr.create(this.tree.getCreatedAt(),r,a,o?new Map(Object.entries(o)):new Map,s))}removeStyle(t,e,i){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new b(S.ErrInvalidArgument,"from should be less than or equal to to");const r=this.tree.findPos(t),a=this.tree.findPos(e),s=this.context.issueTimeTicket(),[o,,u]=this.tree.removeStyle([r,a],i,s);this.context.acc(u);for(const c of o)this.context.registerGCPair(c);this.context.push(cr.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),r,a,i,s))}editInternal(t,e,i,r=0){var c;if(i.length!==0&&i[0]&&(Ky(i),i[0].type!==En))for(const h of i){const{children:m=[]}=h;Ky(m)}const a=this.context.getLastTimeTicket();let s=new Array;if(((c=i[0])==null?void 0:c.type)===En){let h="";for(const m of i){const{value:d}=m;h+=d}s.push(pe.create(Yt.of(this.context.issueTimeTicket(),0),En,h))}else s=i.map(h=>h&&FE(this.context,h)).filter(h=>h);const[,o,u]=this.tree.edit([t,e],s.length?s.map(h=>h==null?void 0:h.deepcopy()):void 0,r,a,()=>this.context.issueTimeTicket());this.context.acc(u);for(const h of o)this.context.registerGCPair(h);return this.context.push(gl.create(this.tree.getCreatedAt(),t,e,s.length?s:void 0,r,a)),!0}editByPath(t,e,i,r=0){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new b(S.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new b(S.ErrInvalidArgument,"path should not be empty");const a=this.tree.pathToPos(t),s=this.tree.pathToPos(e);return this.editInternal(a,s,i?[i]:[],r)}editBulkByPath(t,e,i,r=0){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new b(S.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new b(S.ErrInvalidArgument,"path should not be empty");const a=this.tree.pathToPos(t),s=this.tree.pathToPos(e);return this.editInternal(a,s,i,r)}edit(t,e,i,r=0){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new b(S.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),s=this.tree.findPos(e);return this.editInternal(a,s,i?[i]:[],r)}editBulk(t,e,i,r=0){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new b(S.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),s=this.tree.findPos(e);return this.editInternal(a,s,i,r)}toXML(){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(t){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(t)}pathToIndex(t){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(t)}pathRangeToPosRange(t){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");const e=[this.tree.pathToIndex(t[0]),this.tree.pathToIndex(t[1])],i=this.tree.indexRangeToPosRange(e);return[i[0].toStruct(),i[1].toStruct()]}indexRangeToPosRange(t){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(t)}posRangeToIndexRange(t){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");const e=[rn.fromStruct(t[0]),rn.fromStruct(t[1])];return this.tree.posRangeToIndexRange(e)}posRangeToPathRange(t){if(!this.context||!this.tree)throw new b(S.ErrNotInitialized,"Tree is not initialized yet");const e=[rn.fromStruct(t[0]),rn.fromStruct(t[1])];return this.tree.posRangeToPathRange(e)}}function jy(n,t){return nb(n,t)}function Ze(n,t){if(t){if(t instanceof vt)return t;if(t instanceof Zt)return nb(n,t);if(t instanceof Qt)return jE(n,t);if(t instanceof Ae)return new Ag(n,t);if(t instanceof oe){const e=new Eg(On.Int,0);return e.initialize(n,t),e}else if(t instanceof Ee){const e=new Dg;return e.initialize(n,t),e}}else return;throw new TypeError(`Unsupported type of element: ${typeof t}`)}function sa(n,t){const e=Ze(n,t);return e instanceof vt?e.getValue():e}function Ao(n,t,e){let i;if(vt.isSupport(t))i=vt.of(t,e);else if(Array.isArray(t))i=Qt.create(e,nt.buildArrayElements(n,t));else if(typeof t=="object")t instanceof Ag?(i=Ae.create(Cs.create(),e),t.initialize(n,i)):t instanceof Eg?(i=oe.create(t.getValueType(),t.getValue(),e),t.initialize(n,i)):t instanceof Dg?(i=Ee.create(t.buildRoot(n),e),t.initialize(n,i)):i=Zt.create(e,Yo.buildObjectMembers(n,t));else throw new TypeError(`Unsupported type of value: ${typeof t}`);return i}class Xo{constructor(t){l(this,"rootObject");l(this,"elementPairMapByCreatedAt");l(this,"gcElementSetByCreatedAt");l(this,"gcPairMap");l(this,"docSize");this.rootObject=t,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.docSize={live:{data:0,meta:0},gc:{data:0,meta:0}},this.registerElement(t,void 0),t.getDescendants(e=>{if(e.getRemovedAt()&&this.registerRemovedElement(e),e instanceof Ae||e instanceof Ee)for(const i of e.getGCPairs())this.registerGCPair(i);return!1})}static create(){return new Xo(Zt.create(xs))}findByCreatedAt(t){const e=this.elementPairMapByCreatedAt.get(t.toIDString());if(e)return e.element}findElementPairByCreatedAt(t){return this.elementPairMapByCreatedAt.get(t.toIDString())}createSubPaths(t){let e=this.elementPairMapByCreatedAt.get(t.toIDString());if(!e)return[];const i=[];for(;e.parent;){const r=e.element.getCreatedAt(),a=e.parent.subPathOf(r);if(a===void 0)throw new b(S.ErrInvalidArgument,`cant find the given element: ${r.toIDString()}`);i.unshift(a),e=this.elementPairMapByCreatedAt.get(e.parent.getCreatedAt().toIDString())}return i.unshift("$"),i}createPath(t){return this.createSubPaths(t).join(".")}registerElement(t,e){this.elementPairMapByCreatedAt.set(t.getCreatedAt().toIDString(),{parent:e,element:t}),$t(this.docSize.live,t.getDataSize()),t instanceof jr&&t.getDescendants((i,r)=>(this.elementPairMapByCreatedAt.set(i.getCreatedAt().toIDString(),{parent:r,element:i}),$t(this.docSize.live,i.getDataSize()),!1))}deregisterElement(t){let e=0;const i=r=>{const a=r.getCreatedAt().toIDString();ua(this.docSize.gc,r.getDataSize()),this.elementPairMapByCreatedAt.delete(a),this.gcElementSetByCreatedAt.delete(a),e++};return i(t),t instanceof jr&&t.getDescendants(r=>(i(r),!1)),e}registerRemovedElement(t){$t(this.docSize.gc,t.getDataSize()),ua(this.docSize.live,t.getDataSize()),this.docSize.live.meta+=An,this.gcElementSetByCreatedAt.add(t.getCreatedAt().toIDString())}registerGCPair(t){if(this.gcPairMap.get(t.child.toIDString())){this.gcPairMap.delete(t.child.toIDString());return}this.gcPairMap.set(t.child.toIDString(),t);const i=this.gcPairMap.get(t.child.toIDString()).child.getDataSize();$t(this.docSize.gc,i),ua(this.docSize.live,i),t.child instanceof zr||(this.docSize.live.meta+=An)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const t=new Set;for(const e of this.gcElementSetByCreatedAt){t.add(e);const i=this.elementPairMapByCreatedAt.get(e);i.element instanceof jr&&i.element.getDescendants(r=>(t.add(r.getCreatedAt().toIDString()),!1))}return t.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}getDocSize(){return this.docSize}deepcopy(){return new Xo(this.rootObject.deepcopy())}garbageCollect(t){let e=0;for(const i of this.gcElementSetByCreatedAt){const r=this.elementPairMapByCreatedAt.get(i),a=r.element.getRemovedAt();a&&(t!=null&&t.afterOrEqual(a))&&(r.parent.purge(r.element),e+=this.deregisterElement(r.element))}for(const[,i]of this.gcPairMap){const r=i.child.getRemovedAt();r&&(t!=null&&t.afterOrEqual(r))&&(i.parent.purge(i.child),ua(this.docSize.gc,i.child.getDataSize()),this.gcPairMap.delete(i.child.toIDString()),e+=1)}return e}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}acc(t){$t(this.docSize.live,t)}}class $y{constructor(t,e){l(this,"context");l(this,"presence");this.context=t,this.presence=e}set(t,e){for(const i of Object.keys(t))this.presence[i]=t[i];this.context.setPresenceChange({type:xn.Put,presence:Qe(this.presence)}),this.context.setReversePresence(t,e)}get(t){return this.presence[t]}clear(){this.presence={},this.context.setPresenceChange({type:xn.Clear})}}const Gy=50;class ZE{constructor(){l(this,"undoStack",[]);l(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(t){this.undoStack.length>=Gy&&this.undoStack.shift(),this.undoStack.push(t)}popUndo(){return this.undoStack.pop()}pushRedo(t){this.redoStack.length>=Gy&&this.redoStack.shift(),this.redoStack.push(t)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}reconcileCreatedAt(t,e){const i=r=>{for(const a of r)for(const s of a)(s instanceof yr||s instanceof Dn||s instanceof nn)&&s.getCreatedAt()===t&&s.setCreatedAt(e),(s instanceof _r||s instanceof nn)&&s.getPrevCreatedAt()===t&&s.setPrevCreatedAt(e)};i(this.undoStack),i(this.redoStack)}}function QE(n,t){const e=[];for(const i of t){const r=_E(n,i.path),a=WE(r,i);if(!a.valid)for(const s of a.errors||[])e.push(s)}return{valid:e.length===0,errors:e}}function _E(n,t){if(!t.startsWith("$"))throw new Error(`Path must start with $, got ${t}`);const e=t.split(".");let i=n;for(let r=1;r<e.length;r++){const a=e[r];if(!(i instanceof Zt))return;i=i.get(a)}return i}function WE(n,t){switch(t.type){case"string":case"boolean":case"integer":case"double":case"long":case"date":case"bytes":case"null":return eN(n,t);case"object":if(!(n instanceof Zt))return{valid:!1,errors:[{path:t.path,message:`expected object at path ${t.path}`}]};break;case"array":if(!(n instanceof Qt))return{valid:!1,errors:[{path:t.path,message:`expected array at path ${t.path}`}]};break;case"yorkie.Text":if(!(n instanceof Ae))return{valid:!1,errors:[{path:t.path,message:`expected yorkie.Text at path ${t.path}`}]};break;case"yorkie.Tree":if(!(n instanceof Ee))return{valid:!1,errors:[{path:t.path,message:`expected yorkie.Tree at path ${t.path}`}]};break;case"yorkie.Counter":if(!(n instanceof oe))return{valid:!1,errors:[{path:t.path,message:`expected yorkie.Counter at path ${t.path}`}]};break;default:throw new Error(`Unknown rule type: ${t.type}`)}return{valid:!0}}function tN(n){switch(n){case"null":return lt.Null;case"boolean":return lt.Boolean;case"integer":return lt.Integer;case"long":return lt.Long;case"double":return lt.Double;case"string":return lt.String;case"bytes":return lt.Bytes;case"date":return lt.Date;default:throw new Error(`Unknown primitive type: ${n}`)}}function eN(n,t){return n instanceof vt&&n.getType()===tN(t.type)?{valid:!0}:{valid:!1,errors:[{path:t.path,message:`expected ${t.type} at path ${t.path}`}]}}const nN="yorkie-devtools-panel",iN="yorkie-devtools-sdk";function rN(n){return[Bt.StatusChanged,Bt.Snapshot,Bt.LocalChange,Bt.RemoteChange,Bt.Initialized,Bt.Watched,Bt.Unwatched,Bt.PresenceChanged].includes(n.type)}function aN(n){return n.every(rN)}let Ha="disconnected";const Yy=new Map,ru=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=ru);function ql(n,t){(t!=null&&t.force||Ha!=="disconnected")&&window.postMessage({source:iN,...n},"*")}function sN(n){if(!n.isEnableDevtools()||typeof window>"u"||Yy.has(n.getKey()))return;ru.set(n.getKey(),[]);const t=n.subscribe("all",e=>{aN(e)&&(ru.get(n.getKey()).push(e),Ha==="synced"&&ql({msg:"doc::sync::partial",docKey:n.getKey(),event:e}))});Yy.set(n.getKey(),[t]),ql({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",e=>{var r;if(((r=e.data)==null?void 0:r.source)!==nN)return;switch(e.data.msg){case"devtools::connect":if(Ha!=="disconnected")break;Ha="connected",ql({msg:"doc::available",docKey:n.getKey()}),z.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":Ha="disconnected",z.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":Ha="synced",ql({msg:"doc::sync::full",docKey:n.getKey(),events:ru.get(n.getKey())}),z.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var Ar=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(Ar||{}),Bt=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(Bt||{}),Eo=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(Eo||{}),sd=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(sd||{});class Fi{constructor(t,e){l(this,"key");l(this,"status");l(this,"opts");l(this,"maxSizeLimit");l(this,"schemaRules");l(this,"changeID");l(this,"checkpoint");l(this,"localChanges");l(this,"root");l(this,"presences");l(this,"clone");l(this,"internalHistory");l(this,"isUpdating");l(this,"onlineClients");l(this,"eventStream");l(this,"eventStreamObserver");l(this,"history");this.key=t,this.status="detached",this.opts=e||{},this.maxSizeLimit=0,this.schemaRules=[],this.changeID=_A,this.checkpoint=WA,this.localChanges=[],this.root=Xo.create(),this.presences=new Map,this.onlineClients=new Set,this.internalHistory=new ZE,this.isUpdating=!1,this.eventStream=eb(i=>this.eventStreamObserver=i),this.history={canUndo:()=>this.internalHistory.hasUndo()&&!this.isUpdating,canRedo:()=>this.internalHistory.hasRedo()&&!this.isUpdating,undo:()=>this.executeUndoRedo(!0),redo:()=>this.executeUndoRedo(!1)},sN(this)}update(t,e){var o,u,c;if(this.getStatus()==="removed")throw new b(S.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const i=this.changeID.getActorID(),r=wo.create(this.changeID,this.clone.root,this.clone.presences.get(i)||{},e);try{const h=jy(r,this.clone.root.getObject());this.presences.has(i)||this.clone.presences.set(i,{}),this.isUpdating=!0,t(h,new $y(r,this.clone.presences.get(i)))}catch(h){throw this.clone=void 0,h}finally{this.isUpdating=!1}const a=this.getSchemaRules();if(!r.isPresenceOnlyChange()&&a.length){const h=QE((o=this.clone)==null?void 0:o.root.getObject(),a);if(!h.valid)throw this.clone=void 0,new b(S.ErrDocumentSchemaValidationFailed,`schema validation failed: ${(u=h.errors)==null?void 0:u.map(m=>m.message).join(", ")}`)}const s=VA((c=this.clone)==null?void 0:c.root.getDocSize());if(!r.isPresenceOnlyChange()&&this.maxSizeLimit>0&&this.maxSizeLimit<s)throw this.clone=void 0,new b(S.ErrDocumentSizeExceedsLimit,`document size exceeded: ${s} > ${this.maxSizeLimit}`);if(r.hasChange()){z.isEnabled(ae.Trivial)&&z.trivial(`trying to update a local change: ${this.toJSON()}`);const h=r.toChange(),{opInfos:m,reverseOps:d}=h.execute(this.root,this.presences,gt.Local);for(const A of h.getOperations())A instanceof yr&&this.internalHistory.reconcileCreatedAt(A.getCreatedAt(),A.getValue().getCreatedAt());const g=r.getReversePresence();g&&d.push({type:"presence",value:g}),this.localChanges.push(h),d.length&&this.internalHistory.pushUndo(d),m.length&&this.internalHistory.clearRedo(),this.changeID=r.getNextID();const T=[];m.length&&T.push({type:"local-change",source:gt.Local,value:{message:h.getMessage()||"",operations:m,actor:i,clientSeq:h.getID().getClientSeq(),serverSeq:h.getID().getServerSeq()},rawChange:this.isEnableDevtools()?h.toStruct():void 0}),h.hasPresenceChange()&&T.push({type:"presence-changed",source:gt.Local,value:{clientID:i,presence:this.getPresence(i)}}),this.publish(T),z.isEnabled(ae.Trivial)&&z.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(t,e,i,r){if(typeof t=="string"){if(typeof e!="function")throw new b(S.ErrInvalidArgument,"Second argument must be a callback function");if(t==="presence"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="initialized"&&c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||o(c)},i,r)}if(t==="my-presence"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="initialized"&&c.type!=="presence-changed"||c.type==="presence-changed"&&c.value.clientID!==this.changeID.getActorID()||o(c)},i,r)}if(t==="others"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||c.value.clientID!==this.changeID.getActorID()&&o(c)},i,r)}if(t==="connection"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="connection-changed"&&o(c)},i,r)}if(t==="status"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="status-changed"&&o(c)},i,r)}if(t==="sync"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="sync-status-changed"&&o(c)},i,r)}if(t==="local-broadcast"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="local-broadcast"&&o(c)},i)}if(t==="broadcast"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="broadcast"&&o(c)},i)}if(t==="auth-error"){const o=e;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="auth-error"&&o(c)},i)}if(t==="all"){const o=e;return this.eventStream.subscribe(o,i,r)}const a=t,s=e;return this.eventStream.subscribe(o=>{for(const u of o){if(u.type!=="local-change"&&u.type!=="remote-change")continue;const c=[];for(const h of u.value.operations)this.isSameElementOrChildOf(h.path,a)&&c.push(h);c.length&&s({...u,value:{...u.value,operations:c}})}},i,r)}if(typeof t=="function"){const a=t,s=e,o=i;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="snapshot"&&c.type!=="local-change"&&c.type!=="remote-change"||a(c)},s,o)}throw new b(S.ErrInvalidArgument,`"${t}" is not a valid`)}publish(t){this.eventStreamObserver&&this.eventStreamObserver.next(t)}applyChangePack(t){t.hasSnapshot()?this.applySnapshot(t.getCheckpoint().getServerSeq(),t.getVersionVector(),t.getSnapshot(),t.getCheckpoint().getClientSeq()):(this.applyChanges(t.getChanges(),gt.Remote),this.removePushedLocalChanges(t.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(t.getCheckpoint()),t.hasSnapshot()||this.garbageCollect(t.getVersionVector()),t.getIsRemoved()&&this.applyStatus("removed"),z.isEnabled(ae.Trivial)&&z.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Qe(this.presences)})}createChangePack(){const t=Array.from(this.localChanges),e=this.checkpoint.increaseClientSeq(t.length);return Ic.create(this.key,e,!1,t,this.getVersionVector())}setActor(t){for(const e of this.localChanges)e.setActor(t);this.changeID=this.changeID.setActor(t)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getClone(){return this.clone}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const t=wo.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return jy(t,this.clone.root.getObject())}getDocSize(){return this.root.getDocSize()}getMaxSizePerDocument(){return this.maxSizeLimit}setMaxSizePerDocument(t){this.maxSizeLimit=t}getSchemaRules(){return this.schemaRules}setSchemaRules(t){this.schemaRules=t}garbageCollect(t){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(t),this.root.garbageCollect(t))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(t,e,i,r=-1){const{root:a,presences:s}=St.bytesToSnapshot(i);this.root=new Xo(a),this.presences=s,this.changeID=this.changeID.setClocks(e.maxLamport(),e),this.clone=void 0,this.removePushedLocalChanges(r),this.applyChanges(this.localChanges,gt.Local),this.publish([{type:"snapshot",source:gt.Remote,value:{serverSeq:t.toString(),snapshot:this.isEnableDevtools()?St.bytesToHex(i):void 0,snapshotVector:St.versionVectorToHex(e)}}])}applyChanges(t,e){z.isEnabled(ae.Debug)&&z.debug(`trying to apply ${t.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),z.isEnabled(ae.Trivial)&&z.trivial(t.map(i=>`${i.getID().toTestString()}	${i.toTestString()}`).join(`
`));for(const i of t)this.applyChange(i,e);z.isEnabled(ae.Debug)&&z.debug(`after appling ${t.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(t,e){this.ensureClone(),t.execute(this.clone.root,this.clone.presences,e);const i=[],r=t.getID().getActorID();if(t.hasPresenceChange()&&this.onlineClients.has(r)){const s=t.getPresenceChange();switch(s.type){case xn.Put:i.push(this.presences.has(r)?{type:"presence-changed",source:e,value:{clientID:r,presence:s.presence}}:{type:"watched",source:gt.Remote,value:{clientID:r,presence:s.presence}});break;case xn.Clear:i.push({type:"unwatched",source:gt.Remote,value:{clientID:r,presence:this.getPresence(r)}}),this.removeOnlineClient(r);break}}const{opInfos:a}=t.execute(this.root,this.presences,e);if(this.changeID=this.changeID.syncClocks(t.getID()),a.length){const s=this.isEnableDevtools()?t.toStruct():void 0;i.push(e===gt.Remote?{type:"remote-change",source:e,value:{actor:r,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:a},rawChange:s}:{type:"local-change",source:e,value:{actor:r,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:a},rawChange:s})}i.length&&this.publish(i)}applyWatchStream(t){if(t.body.case==="initialization"){const e=t.body.value.clientIds,i=new Set;for(const r of e)r!==this.changeID.getActorID()&&i.add(r);this.setOnlineClients(i),this.publish([{type:"initialized",source:gt.Local,value:this.getPresences()}]);return}if(t.body.case==="event"){const{type:e,publisher:i}=t.body.value,r=[];if(e===pa.DOCUMENT_WATCHED){if(this.onlineClients.has(i)&&this.hasPresence(i))return;this.addOnlineClient(i),this.hasPresence(i)&&r.push({type:"watched",source:gt.Remote,value:{clientID:i,presence:this.getPresence(i)}})}else if(e===pa.DOCUMENT_UNWATCHED){const a=this.getPresence(i);this.removeOnlineClient(i),a&&r.push({type:"unwatched",source:gt.Remote,value:{clientID:i,presence:a}})}else if(e===pa.DOCUMENT_BROADCAST&&t.body.value.body){const{topic:a,payload:s}=t.body.value.body,o=new TextDecoder;r.push({type:"broadcast",value:{clientID:i,topic:a,payload:JSON.parse(o.decode(s))}})}r.length&&this.publish(r)}}applyStatus(t){this.status=t,t==="detached"&&this.setActor(cg),this.publish([{source:t==="removed"?gt.Remote:gt.Local,type:"status-changed",value:t==="attached"?{status:t,actorID:this.changeID.getActorID()}:{status:t}}])}applyDocEventsForReplay(t){for(const e of t){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);continue}if(e.type==="snapshot"){const{snapshot:i,serverSeq:r,snapshotVector:a}=e.value;if(!i)continue;this.applySnapshot(BigInt(r),St.hexToVersionVector(a),St.hexToBytes(i));continue}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)continue;const i=ks.fromStruct(e.rawChange);this.applyChange(i,e.source)}if(e.type==="initialized"){const i=new Set;for(const{clientID:r,presence:a}of e.value)i.add(r),this.presences.set(r,a);this.setOnlineClients(i)}else if(e.type==="watched"){const{clientID:i,presence:r}=e.value;this.addOnlineClient(i),this.presences.set(i,r)}else if(e.type==="unwatched"){const{clientID:i}=e.value;this.removeOnlineClient(i),this.presences.delete(i)}else if(e.type==="presence-changed"){const{clientID:i,presence:r}=e.value;this.presences.set(i,r)}}}getValueByPath(t){if(!t.startsWith("$"))throw new b(S.ErrInvalidArgument,'path must start with "$"');const e=t.split(".");e.shift();let i=this.getRoot();for(const r of e)if(i=i[r],!i)return;return i}setOnlineClients(t){this.onlineClients=t}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(t){this.onlineClients.add(t)}removeOnlineClient(t){this.onlineClients.delete(t)}hasPresence(t){return this.presences.has(t)}getMyPresence(){if(this.status!=="attached")return{};const t=this.presences.get(this.changeID.getActorID());return t?Qe(t):{}}getOthersPresences(){const t=[],e=this.changeID.getActorID();for(const i of this.onlineClients)i!==e&&this.presences.has(i)&&t.push({clientID:i,presence:Qe(this.presences.get(i))});return t}getPresence(t){if(t===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(t))return;const e=this.presences.get(t);return e?Qe(e):void 0}getPresences(){const t=[];t.push({clientID:this.changeID.getActorID(),presence:Qe(this.getMyPresence())});for(const e of this.onlineClients)this.presences.has(e)&&t.push({clientID:e,presence:Qe(this.presences.get(e))});return t}getPresenceForTest(t){const e=this.presences.get(t);return e?Qe(e):void 0}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const t=this.getChangeID().getActorID();return this.getPresences().filter(e=>e.clientID!==t).sort((e,i)=>e.clientID>i.clientID?1:-1)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}broadcast(t,e,i){this.publish([{type:"local-broadcast",value:{topic:t,payload:e},options:i}])}getVersionVector(){return this.changeID.getVersionVector()}isSameElementOrChildOf(t,e){if(e===t)return!0;const i=t.split(".");return e.split(".").every((r,a)=>r===i[a])}removePushedLocalChanges(t){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>t);)this.localChanges.shift()}executeUndoRedo(t){if(this.isUpdating)throw new b(S.ErrRefused,`${t?"Undo":"Redo"} is not allowed during an update`);const e=t?this.internalHistory.popUndo():this.internalHistory.popRedo();if(!e)throw new b(S.ErrRefused,`There is no operation to be ${t?"undone":"redone"}`);this.ensureClone();const i=wo.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const h of e){if(!(h instanceof ln)){new $y(i,Qe(this.clone.presences.get(this.changeID.getActorID()))).set(h.value,{addToHistory:!0});continue}const m=i.issueTimeTicket();if(h.setExecutedAt(m),h instanceof yr){const d=h.getCreatedAt();h.getValue().setCreatedAt(m),this.internalHistory.reconcileCreatedAt(d,m)}else if(h instanceof _r){const d=h.getValue().getCreatedAt();h.getValue().setCreatedAt(m),this.internalHistory.reconcileCreatedAt(d,m)}i.push(h)}const r=i.toChange();r.execute(this.clone.root,this.clone.presences,gt.UndoRedo);const{opInfos:a,reverseOps:s}=r.execute(this.root,this.presences,gt.UndoRedo),o=i.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length&&(t?this.internalHistory.pushRedo(s):this.internalHistory.pushUndo(s)),!r.hasPresenceChange()&&!a.length)return;this.localChanges.push(r),this.changeID=i.getNextID();const u=this.changeID.getActorID(),c=[];a.length&&c.push({type:"local-change",source:gt.UndoRedo,value:{message:r.getMessage()||"",operations:a,actor:u,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&c.push({type:"presence-changed",source:gt.UndoRedo,value:{clientID:u,presence:this.getPresence(u)}}),this.publish(c)}}class Xy{constructor(t,e,i,r,a){l(this,"resource");l(this,"resourceID");l(this,"syncMode");l(this,"changeEventReceived");l(this,"lastHeartbeatTime");l(this,"reconnectStreamDelay");l(this,"cancelled");l(this,"watchStream");l(this,"watchLoopTimerID");l(this,"watchAbortController");l(this,"unsubscribeBroadcastEvent");this.reconnectStreamDelay=t,this.resource=e,this.resourceID=i,this.syncMode=r,this.changeEventReceived=r!==void 0?!1:void 0,this.lastHeartbeatTime=Date.now(),this.cancelled=!1,this.unsubscribeBroadcastEvent=a}changeSyncMode(t){this.syncMode=t}needRealtimeSync(){return this.syncMode===eo.RealtimeSyncOff?!1:this.syncMode===eo.RealtimePushOnly?this.resource.hasLocalChanges():this.syncMode!==eo.Manual&&(this.resource.hasLocalChanges()||(this.changeEventReceived??!1))}needSync(t){return this.resource instanceof Fi?this.needRealtimeSync():this.syncMode===eo.Manual?!1:Date.now()-this.lastHeartbeatTime>=t}updateHeartbeatTime(){this.lastHeartbeatTime=Date.now()}async runWatchLoop(t){const e=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await t(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.cancelled||(this.watchLoopTimerID=setTimeout(e,this.reconnectStreamDelay))})}catch{}};await e()}cancelWatchStream(){this.cancelled=!0,this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}function oN(n,t){let e=t;return{authInterceptor:a=>async s=>(n&&s.header.set("x-api-key",n),e&&s.header.set("authorization",e),await a(s)),setToken:a=>{e=a}}}const lN="@yorkie-js/sdk",uN="0.6.34",Fy={name:lN,version:uN};function cN(n){return t=>async e=>(n?e.header.set("x-yorkie-user-agent",n):e.header.set("x-yorkie-user-agent",Fy.name+"/"+Fy.version),await t(e))}const fN=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var to=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(to||{}),oc=(n=>(n.Changed="changed",n.Initialized="initialized",n))(oc||{});class oa{constructor(t){l(this,"key");l(this,"status");l(this,"actorID");l(this,"presenceID");l(this,"count");l(this,"seq");l(this,"eventStream");l(this,"eventStreamObserver");this.key=t,this.status="detached",this.count=0,this.seq=0,this.eventStream=eb(e=>this.eventStreamObserver=e)}getKey(){return this.key}getStatus(){return this.status}applyStatus(t){this.status=t}isAttached(){return this.status==="attached"}getActorID(){return this.actorID}setActor(t){this.actorID=t}getPresenceID(){return this.presenceID}setPresenceID(t){this.presenceID=t}getCount(){return this.count}updateCount(t,e){return e===0||e>this.seq?(this.count=t,this.seq=e,!0):!1}hasLocalChanges(){return!1}subscribe(t){return this.eventStream.subscribe(t)}publish(t){this.eventStreamObserver&&this.eventStreamObserver.next(t)}}var eo=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(eo||{});const Ma={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3,presenceHeartbeatInterval:3e4},Ef={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class rb{constructor(t){l(this,"id");l(this,"key");l(this,"metadata");l(this,"status");l(this,"attachmentMap");l(this,"apiKey");l(this,"authTokenInjector");l(this,"conditions");l(this,"syncLoopDuration");l(this,"reconnectStreamDelay");l(this,"retrySyncLoopDelay");l(this,"presenceHeartbeatInterval");l(this,"rpcClient");l(this,"setAuthToken");l(this,"taskQueue");l(this,"processing",!1);l(this,"keepalive",!1);t=t||Ma;const e=t.rpcAddr||Ma.rpcAddr;this.key=t.key||tb(),this.metadata=t.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.authTokenInjector=t.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=t.syncLoopDuration??Ma.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay??Ma.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay??Ma.retrySyncLoopDelay,this.presenceHeartbeatInterval=t.presenceHeartbeatInterval??Ma.presenceHeartbeatInterval;const{authInterceptor:i,setToken:r}=oN(this.apiKey);this.setAuthToken=r,this.rpcClient=fA(zA,RA({baseUrl:e,interceptors:[i,cN(t==null?void 0:t.userAgent)],fetch:(a,s)=>fetch(a,{...s,keepalive:this.keepalive})})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const t=await this.authTokenInjector();this.setAuthToken(t)}return this.enqueueTask(async()=>{try{const t=await this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}});this.id=t.clientId,this.status="activated",this.runSyncLoop(),z.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`),typeof window<"u"&&window.addEventListener("beforeunload",async()=>{await this.deactivate({keepalive:!0})})}catch(t){throw z.error(`[AC] c:"${this.getKey()}" err :`,t),await this.handleConnectError(t),t}})}deactivate(t={keepalive:!1,synchronous:!1}){if(this.status==="deactivated")return Promise.resolve();const e=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id,synchronous:t.synchronous},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}}),this.deactivateInternal(),z.info(`[DC] c"${this.getKey()}" deactivated`)}catch(i){throw z.error(`[DC] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}};if(t.keepalive){this.keepalive=!0;const i=e();return this.keepalive=!1,i}return this.enqueueTask(e)}has(t){return this.attachmentMap.has(t)}attach(t,e){return t instanceof oa?this.attachPresence(t,e):this.attachDocument(t,e)}attachDocument(t,e={}){if(!this.isActive())throw new b(S.ErrClientNotActivated,`${this.key} is not active`);if(t.getStatus()!==Ar.Detached)throw new b(S.ErrDocumentNotDetached,`${t.getKey()} is not detached`);t.setActor(this.id),t.update((a,s)=>s.set(e.initialPresence||{}));const i=t.subscribe("local-broadcast",async a=>{var h;const{topic:s,payload:o}=a.value,u=(h=a.options)==null?void 0:h.error,c=a.options;try{await this.broadcast(t.getKey(),s,o,c)}catch(m){m instanceof Error&&(u==null||u(m))}}),r=e.syncMode??"realtime";return this.enqueueTask(async()=>{try{const a=await this.rpcClient.attachDocument({clientId:this.id,changePack:St.toChangePack(t.createChangePack()),schemaKey:e.schema},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}});(a.maxSizePerDocument??0)>0&&t.setMaxSizePerDocument(a.maxSizePerDocument),a.schemaRules.length>0&&t.setSchemaRules(St.fromSchemaRules(a.schemaRules));const o=St.fromChangePack(a.changePack);if(t.applyChangePack(o),t.getStatus()===Ar.Removed)return t;t.applyStatus(Ar.Attached),this.attachmentMap.set(t.getKey(),new Xy(this.reconnectStreamDelay,t,a.documentId,r,i)),r!=="manual"&&await this.runWatchLoop(t.getKey()),z.info(`[AD] c:"${this.getKey()}" attaches d:"${t.getKey()}"`);const u=t.getRootObject();if(e.initialRoot){const c=e.initialRoot;t.update(h=>{for(const[m,d]of Object.entries(c))if(!u.has(m)){const g=m;h[g]=d}})}return t}catch(a){throw z.error(`[AD] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}})}detach(t,e){return t instanceof oa?this.detachPresence(t):this.detachDocument(t,e)}detachDocument(t,e={keepalive:!1}){if(!this.isActive())throw new b(S.ErrClientNotActivated,`${this.key} is not active`);const i=this.attachmentMap.get(t.getKey());if(!i)throw new b(S.ErrDocumentNotAttached,`${t.getKey()} is not attached`);t.update((a,s)=>s.clear());const r=async()=>{try{const a=await this.rpcClient.detachDocument({clientId:this.id,documentId:i.resourceID,changePack:St.toChangePack(t.createChangePack()),removeIfNotAttached:e.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),s=St.fromChangePack(a.changePack);return t.applyChangePack(s),t.getStatus()!==Ar.Removed&&t.applyStatus(Ar.Detached),this.detachInternal(t.getKey()),z.info(`[DD] c:"${this.getKey()}" detaches d:"${t.getKey()}"`),t}catch(a){throw z.error(`[DD] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}};if(e.keepalive){this.keepalive=!0;const a=r();return this.keepalive=!1,a}return this.enqueueTask(r)}async attachPresence(t,e={}){if(!this.isActive())throw new b(S.ErrClientNotActivated,`${this.key} is not active`);if(t.getStatus()!==to.Detached)throw new b(S.ErrDocumentNotDetached,`${t.getKey()} is not detached`);t.setActor(this.id);const i=async()=>{try{const r=await this.rpcClient.attachPresence({clientId:this.id,presenceKey:t.getKey()},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}});t.setPresenceID(r.presenceId),t.updateCount(Number(r.count),0),t.applyStatus(to.Attached);const a=e.isRealtime!==!1?"realtime":"manual",s=new Xy(this.reconnectStreamDelay,t,r.presenceId,a);return this.attachmentMap.set(t.getKey(),s),a==="realtime"&&await this.runWatchLoop(t.getKey()),z.info(`[AP] c:"${this.getKey()}" attaches p:"${t.getKey()}" mode:${a} count:${t.getCount()}`),t}catch(r){throw z.error(`[AP] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};return this.enqueueTask(i)}async detachPresence(t){if(!this.isActive())throw new b(S.ErrClientNotActivated,`${this.key} is not active`);if(!this.attachmentMap.has(t.getKey()))throw new b(S.ErrDocumentNotAttached,`${t.getKey()} is not attached`);const e=async()=>{try{const i=await this.rpcClient.detachPresence({clientId:this.id,presenceId:t.getPresenceID(),presenceKey:t.getKey()},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}});return t.updateCount(Number(i.count),0),t.applyStatus(to.Detached),this.detachInternal(t.getKey()),z.info(`[DP] c:"${this.getKey()}" detaches p:"${t.getKey()}" count:${t.getCount()}`),t}catch(i){throw z.error(`[DP] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}};return this.enqueueTask(e)}async changeSyncMode(t,e){if(!this.isActive())throw new b(S.ErrClientNotActivated,`${this.key} is not active`);const i=this.attachmentMap.get(t.getKey());if(!i)throw new b(S.ErrDocumentNotAttached,`${t.getKey()} is not attached`);const r=i.syncMode;return r===e?t:(i.changeSyncMode(e),e==="manual"?(i.cancelWatchStream(),t):(e==="realtime"&&(i.changeEventReceived=!0),r==="manual"&&await this.runWatchLoop(t.getKey()),t))}sync(t){if(!this.isActive())throw new b(S.ErrClientNotActivated,`${this.key} is not active`);if(t instanceof oa){const e=this.attachmentMap.get(t.getKey());if(!e)throw new b(S.ErrDocumentNotAttached,`${t.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(e).catch(async i=>{throw z.error(`[SY] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}))}if(t instanceof Fi){const e=this.attachmentMap.get(t.getKey());if(!e)throw new b(S.ErrDocumentNotAttached,`${t.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(e,"realtime").catch(async i=>{throw z.error(`[SY] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}))}return this.enqueueTask(async()=>{const e=[];for(const[,i]of this.attachmentMap)i.syncMode!==void 0&&i.resource instanceof Fi&&e.push(this.syncInternal(i,i.syncMode));return Promise.all(e).catch(async i=>{throw z.error(`[SY] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i})})}remove(t){if(!this.isActive())throw new b(S.ErrClientNotActivated,`${this.key} is not active`);const e=this.attachmentMap.get(t.getKey());if(!e)throw new b(S.ErrDocumentNotAttached,`${t.getKey()} is not attached`);t.setActor(this.id);const i=St.toChangePack(t.createChangePack());return i.isRemoved=!0,this.enqueueTask(async()=>{try{const r=await this.rpcClient.removeDocument({clientId:this.id,documentId:e.resourceID,changePack:i},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),a=St.fromChangePack(r.changePack);t.applyChangePack(a),this.detachInternal(t.getKey()),z.info(`[RD] c:"${this.getKey()}" removes d:"${t.getKey()}"`)}catch(r){throw z.error(`[RD] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(t){return this.conditions[t]}broadcast(t,e,i,r){if(!this.isActive())throw new b(S.ErrClientNotActivated,`${this.key} is not active`);const a=this.attachmentMap.get(t);if(!a)throw new b(S.ErrDocumentNotAttached,`${t} is not attached`);if(!fN(i))throw new b(S.ErrInvalidArgument,"payload is not serializable");const s=(r==null?void 0:r.maxRetries)??Ef.maxRetries,o=Ef.maxBackoff;let u=0;const c=m=>Math.min(Ef.initialRetryInterval*2**m,o),h=async()=>this.enqueueTask(async()=>{try{await this.rpcClient.broadcast({clientId:this.id,documentId:a.resourceID,topic:e,payload:new TextEncoder().encode(JSON.stringify(i))},{headers:{"x-shard-key":`${this.apiKey}/${t}`}}),z.info(`[BC] c:"${this.getKey()}" broadcasts d:"${t}" t:"${e}"`)}catch(m){if(z.error(`[BC] c:"${this.getKey()}" err:`,m),await this.handleConnectError(m))if(wf(m,S.ErrUnauthenticated)&&a.resource instanceof Fi&&a.resource.publish([{type:Bt.AuthError,value:{reason:Ws(m).reason,method:"Broadcast"}}]),u<s)u++,setTimeout(()=>h(),c(u-1)),z.info(`[BC] c:"${this.getKey()}" retry attempt ${u}/${s}`);else throw z.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),m;else throw m}});return h()}runSyncLoop(){const t=async()=>{if(!this.isActive()){z.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}try{await this.enqueueTask(async()=>{const e=[];for(const[,i]of this.attachmentMap)i.needSync(this.presenceHeartbeatInterval)&&(i.changeEventReceived!==void 0&&(i.changeEventReceived=!1),e.push(this.syncInternal(i,i.syncMode).catch(r=>{throw wf(r,S.ErrUnauthenticated)&&i.resource.publish([{type:Bt.AuthError,value:{reason:Ws(r).reason,method:"PushPull"}}]),r})));await Promise.all(e),setTimeout(t,this.syncLoopDuration)})}catch(e){z.error(`[SL] c:"${this.getKey()}" sync failed:`,e),await this.handleConnectError(e)?setTimeout(t,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1}};z.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,t()}async runWatchLoop(t){const e=this.attachmentMap.get(t);if(!e)throw new b(S.ErrDocumentNotAttached,`${t} is not attached`);return this.conditions.WatchLoop=!0,e.runWatchLoop(i=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new b(S.ErrClientNotActivated,`${this.key} is not active`));if(!this.attachmentMap.has(t))return this.conditions.WatchLoop=!1,Promise.reject(new b(S.ErrDocumentNotAttached,`${t} is not attached`));const r=new AbortController;return e.resource instanceof Fi?this.createDocumentWatchStream(e,t,r,i):e.resource instanceof oa?this.createPresenceWatchStream(e,t,r,i):Promise.reject(new b(S.ErrClientNotActivated,`Unknown resource type for ${t}`))})}createDocumentWatchStream(t,e,i,r){const a=this.rpcClient.watchDocument({clientId:this.id,documentId:t.resourceID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:i.signal});return t.resource.publish([{type:Bt.ConnectionChanged,value:Eo.Connected}]),z.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),t.changeEventReceived!==void 0&&(t.changeEventReceived=!0),new Promise((s,o)=>{(async()=>{try{for await(const c of a)this.handleWatchDocumentResponse(t,c),c.body.case==="initialization"&&s([a,i]);t.resource.resetOnlineClients(),t.resource.publish([{type:Bt.Initialized,source:gt.Local,value:t.resource.getPresences()}]),t.resource.publish([{type:Bt.ConnectionChanged,value:Eo.Disconnected}]),z.debug(`[WD] c:"${this.getKey()}" unwatches (stream ended)`),r()}catch(c){t.resource.resetOnlineClients(),t.resource.publish([{type:Bt.Initialized,source:gt.Local,value:t.resource.getPresences()}]),t.resource.publish([{type:Bt.ConnectionChanged,value:Eo.Disconnected}]),z.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(c)?(wf(c,S.ErrUnauthenticated)&&t.resource.publish([{type:Bt.AuthError,value:{reason:Ws(c).reason,method:"WatchDocument"}}]),r()):this.conditions.WatchLoop=!1,o(c)}})()})}createPresenceWatchStream(t,e,i,r){const a=this.rpcClient.watchPresence({clientId:this.id,presenceKey:e},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:i.signal});return z.info(`[WP] c:"${this.getKey()}" watches p:"${e}"`),new Promise((s,o)=>{(async()=>{try{let c=!0;for await(const h of a)this.handleWatchPresenceResponse(t,h),c&&(c=!1,s([a,i]));z.debug(`[WP] c:"${this.getKey()}" p:"${e}" stream ended`),r()}catch(c){if(c instanceof Error&&c.name==="AbortError"){z.debug(`[WP] c:"${this.getKey()}" p:"${e}" stream aborted`);return}z.debug(`[WP] c:"${this.getKey()}" p:"${e}" err:`,c),await this.handleConnectError(c)?r():this.conditions.WatchLoop=!1,o(c)}})()})}handleWatchPresenceResponse(t,e){if(e.body.case==="initialized"){const{count:i,seq:r}=e.body.value;t.resource.updateCount(Number(i),Number(r))&&t.resource.publish({type:oc.Initialized,count:Number(i)})}else if(e.body.case==="event"){const{count:i,seq:r}=e.body.value;t.resource.updateCount(Number(i),Number(r))&&t.resource.publish({type:oc.Changed,count:Number(i)})}}handleWatchDocumentResponse(t,e){if(e.body.case==="event"&&e.body.value.type===pa.DOCUMENT_CHANGED){t.changeEventReceived!==void 0&&(t.changeEventReceived=!0);return}t.resource.applyWatchStream(e)}deactivateInternal(){this.status="deactivated";for(const[t,e]of this.attachmentMap)this.detachInternal(t),e.resource instanceof Fi?e.resource.applyStatus(Ar.Detached):e.resource instanceof oa&&e.resource.applyStatus(to.Detached)}detachInternal(t){var i;const e=this.attachmentMap.get(t);e&&(e.cancelWatchStream(),e.resource instanceof Fi&&e.resource.resetOnlineClients(),(i=e.unsubscribeBroadcastEvent)==null||i.call(e),this.attachmentMap.delete(t))}async syncInternal(t,e){const{resource:i}=t;if(i instanceof oa){try{const o=await this.rpcClient.refreshPresence({clientId:this.id,presenceId:i.getPresenceID(),presenceKey:i.getKey()},{headers:{"x-shard-key":`${this.apiKey}/${i.getKey()}`}});i.updateCount(Number(o.count),0),t.updateHeartbeatTime(),z.debug(`[RP] c:"${this.getKey()}" refreshes p:"${i.getKey()}" mode:${t.syncMode}`)}catch(o){throw z.error(`[RP] c:"${this.getKey()}" err :`,o),o}return i}const r=i,{resourceID:a}=t,s=r.createChangePack();try{const o=await this.rpcClient.pushPullChanges({clientId:this.id,documentId:a,changePack:St.toChangePack(s),pushOnly:e==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${r.getKey()}`}}),u=St.fromChangePack(o.changePack);if(u.hasChanges()&&(t.syncMode==="realtime-pushonly"||t.syncMode==="realtime-syncoff"))return r;r.applyChangePack(u),t.resource.publish([{type:Bt.SyncStatusChanged,value:sd.Synced}]),r.getStatus()===Ar.Removed&&this.detachInternal(r.getKey());const c=r.getKey(),h=u.getChangeSize();return z.info(`[PP] c:"${this.getKey()}" sync d:"${c}", push:${s.getChangeSize()} pull:${h} cp:${u.getCheckpoint().toTestString()}`),r}catch(o){throw r.publish([{type:Bt.SyncStatusChanged,value:sd.SyncFailed}]),z.error(`[PP] c:"${this.getKey()}" err :`,o),o}}async handleConnectError(t){if(!(t instanceof ot))return!1;if(t.code===X.Canceled||t.code===X.Unknown||t.code===X.ResourceExhausted||t.code===X.Unavailable)return!0;if(Pa(t)===S.ErrUnauthenticated){if(this.authTokenInjector){const e=await this.authTokenInjector(Ws(t).reason);this.setAuthToken(e)}return!0}return Pa(t)===S.ErrTooManySubscribers?(z.error(`[WD] c:"${this.getKey()}" err :`,t.rawMessage),!0):(Pa(t)===S.ErrTooManyAttachments||(Pa(t)===S.ErrClientNotActivated||Pa(t)===S.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(t){return new Promise((e,i)=>{this.taskQueue.push(()=>t().then(e).catch(i)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{z.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}On.Int,On.Long;typeof globalThis<"u"&&(globalThis.yorkie={Client:rb,Document:Fi,Primitive:vt,Text:Ag,Counter:Eg,Tree:Dg,Presence:oa,PresenceEventType:oc,LogLevel:ae,setLogLevel:VE,IntType:On.Int,LongType:On.Long});const hN="@yorkie-js/react",dN="0.6.34",Zy={name:hN,version:dN};ct.createContext({client:void 0,loading:!0,error:void 0});function gN(n){const[t,e]=ct.useState(void 0),[i,r]=ct.useState(!0),[a,s]=ct.useState(void 0),[o,u]=ct.useState(!1);return ct.useEffect(()=>{u(!0)},[]),ct.useEffect(()=>{r(!0),s(void 0);async function c(){if(o)try{const h=new rb(n);await h.activate(),e(h)}catch(h){s(h instanceof Error?h:new Error("Failed to activate client"))}finally{r(!1)}}return c(),()=>{t!=null&&t.isActive()&&t.deactivate({keepalive:!0})}},[n.apiKey,n.rpcAddr,o]),{client:t,loading:i,error:a}}function mN(n){const t=new Set;let e=n;const i=()=>{t.forEach(u=>u(e))};return{subscribe:u=>(t.add(u),()=>t.delete(u)),getSnapshot:()=>e,setState:u=>{const c=e;e=typeof u=="function"?u(c):u,c!==e&&i()},destroy:()=>{t.clear()}}}const yN=n=>mN(n);function pN(n,t,e=Object.is){const i=ct.useRef(t),r=ct.useRef(e),a=ct.useRef(void 0);i.current=t,r.current=e;const s=()=>{const o=n.getSnapshot(),u=i.current?i.current(o):o;return a.current!==void 0&&r.current(a.current,u)?a.current:(a.current=u,u)};return ct.useSyncExternalStore(n.subscribe,s,s)}function vN(n,t,e,i,r,a,s){const o=ct.useRef(r),u=ct.useRef(a),[c,h]=ct.useState(!1);ct.useEffect(()=>{h(!0)},[]),ct.useEffect(()=>{if(e){s.setState(T=>({...T,loading:!1,error:e}));return}if(!n||t||!c){s.setState(T=>({...T,loading:!0}));return}s.setState(T=>({...T,loading:!0,error:void 0}));const m=new Fi(i),d=[];d.push(m.subscribe(()=>{s.setState(T=>({...T,root:m.getRoot()}))})),d.push(m.subscribe("presence",()=>{s.setState(T=>({...T,presences:m.getPresences()}))})),d.push(m.subscribe("connection",T=>{s.setState(A=>({...A,connection:T.value}))}));async function g(){try{await(n==null?void 0:n.attach(m,{initialRoot:o.current,initialPresence:u.current}));const T=A=>{try{m.update(A)}catch(x){s.setState(p=>({...p,error:x instanceof Error?x:new Error("Failed to update document")}))}};s.setState(A=>({...A,doc:m,root:m.getRoot(),presences:m.getPresences(),update:T}))}catch(T){s.setState(A=>({...A,error:T instanceof Error?T:new Error("Failed to attach document")}))}finally{s.setState(T=>({...T,loading:!1}))}}return g(),()=>{n&&n.has(i)&&n.detach(m);for(const T of d)T()}},[n,t,e,i,s,c])}ct.createContext(void 0);function SN(n,t,e){const i=ct.useRef(void 0);i.current||(i.current=yN({doc:void 0,root:(e==null?void 0:e.initialRoot)??{},presences:[],connection:Eo.Disconnected,update:()=>{},loading:!0,error:void 0}));const r=i.current,a=ct.useMemo(()=>({apiKey:n,userAgent:Zy.name+"/"+Zy.version,...e}),[n,e]),{client:s,loading:o,error:u}=gN(a);vN(s,o,u,t,(e==null?void 0:e.initialRoot)??{},(e==null?void 0:e.initialPresence)??{},r);const c=pN(r);return{root:c.root,presences:c.presences,connection:c.connection,update:c.update,loading:c.loading,error:c.error}}function bN(n){const{root:t,update:e,loading:i,error:r}=SN("D6sd9E5ehtXBssmeRZ4QQP",`react-todomvc-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`,{initialRoot:n}),a=ct.useCallback(s=>{e(o=>{h1(o,s)})},[e]);return{root:t,dispatch:a,loading:i,error:r}}const TN={todos:[{id:crypto.randomUUID(),text:"Yorkie JS SDK",completed:!1},{id:crypto.randomUUID(),text:"Garbage collection",completed:!1},{id:crypto.randomUUID(),text:"RichText datatype",completed:!1}]};function wN(){const{root:n,dispatch:t,loading:e,error:i}=bN(TN);return e?W.jsx("div",{children:"Loading..."}):i?W.jsxs("div",{children:["Error: ",i.message]}):W.jsxs("div",{className:"App",children:[W.jsx(s1,{dispatch:t}),W.jsx(f1,{todos:n.todos,dispatch:t})]})}r1.createRoot(document.getElementById("root")).render(W.jsx(ct.StrictMode,{children:W.jsx(wN,{})}));
