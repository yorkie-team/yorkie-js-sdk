var Fy=Object.defineProperty;var My=(n,e,t)=>e in n?Fy(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var u=(n,e,t)=>My(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function Jy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var fg={exports:{}},wl={},dg={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eo=Symbol.for("react.element"),$y=Symbol.for("react.portal"),zy=Symbol.for("react.fragment"),Uy=Symbol.for("react.strict_mode"),jy=Symbol.for("react.profiler"),Vy=Symbol.for("react.provider"),qy=Symbol.for("react.context"),Ky=Symbol.for("react.forward_ref"),Wy=Symbol.for("react.suspense"),Hy=Symbol.for("react.memo"),_y=Symbol.for("react.lazy"),dd=Symbol.iterator;function Gy(n){return n===null||typeof n!="object"?null:(n=dd&&n[dd]||n["@@iterator"],typeof n=="function"?n:null)}var hg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gg=Object.assign,mg={};function vs(n,e,t){this.props=n,this.context=e,this.refs=mg,this.updater=t||hg}vs.prototype.isReactComponent={};vs.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};vs.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function pg(){}pg.prototype=vs.prototype;function Yc(n,e,t){this.props=n,this.context=e,this.refs=mg,this.updater=t||hg}var Qc=Yc.prototype=new pg;Qc.constructor=Yc;gg(Qc,vs.prototype);Qc.isPureReactComponent=!0;var hd=Array.isArray,yg=Object.prototype.hasOwnProperty,Xc={current:null},vg={key:!0,ref:!0,__self:!0,__source:!0};function wg(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)yg.call(e,r)&&!vg.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Eo,type:n,key:s,ref:o,props:i,_owner:Xc.current}}function Yy(n,e){return{$$typeof:Eo,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Zc(n){return typeof n=="object"&&n!==null&&n.$$typeof===Eo}function Qy(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var gd=/\/+/g;function Hl(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Qy(""+n.key):e.toString(36)}function oa(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Eo:case $y:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Hl(o,0):r,hd(i)?(t="",n!=null&&(t=n.replace(gd,"$&/")+"/"),oa(i,e,t,"",function(c){return c})):i!=null&&(Zc(i)&&(i=Yy(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(gd,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",hd(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Hl(s,a);o+=oa(s,e,t,l,i)}else if(l=Gy(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Hl(s,a++),o+=oa(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Mo(n,e,t){if(n==null)return n;var r=[],i=0;return oa(n,r,"","",function(s){return e.call(t,s,i++)}),r}function Xy(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var $e={current:null},aa={transition:null},Zy={ReactCurrentDispatcher:$e,ReactCurrentBatchConfig:aa,ReactCurrentOwner:Xc};V.Children={map:Mo,forEach:function(n,e,t){Mo(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Mo(n,function(){e++}),e},toArray:function(n){return Mo(n,function(e){return e})||[]},only:function(n){if(!Zc(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};V.Component=vs;V.Fragment=zy;V.Profiler=jy;V.PureComponent=Yc;V.StrictMode=Uy;V.Suspense=Wy;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zy;V.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=gg({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Xc.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)yg.call(e,l)&&!vg.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Eo,type:n.type,key:i,ref:s,props:r,_owner:o}};V.createContext=function(n){return n={$$typeof:qy,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Vy,_context:n},n.Consumer=n};V.createElement=wg;V.createFactory=function(n){var e=wg.bind(null,n);return e.type=n,e};V.createRef=function(){return{current:null}};V.forwardRef=function(n){return{$$typeof:Ky,render:n}};V.isValidElement=Zc;V.lazy=function(n){return{$$typeof:_y,_payload:{_status:-1,_result:n},_init:Xy}};V.memo=function(n,e){return{$$typeof:Hy,type:n,compare:e===void 0?null:e}};V.startTransition=function(n){var e=aa.transition;aa.transition={};try{n()}finally{aa.transition=e}};V.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};V.useCallback=function(n,e){return $e.current.useCallback(n,e)};V.useContext=function(n){return $e.current.useContext(n)};V.useDebugValue=function(){};V.useDeferredValue=function(n){return $e.current.useDeferredValue(n)};V.useEffect=function(n,e){return $e.current.useEffect(n,e)};V.useId=function(){return $e.current.useId()};V.useImperativeHandle=function(n,e,t){return $e.current.useImperativeHandle(n,e,t)};V.useInsertionEffect=function(n,e){return $e.current.useInsertionEffect(n,e)};V.useLayoutEffect=function(n,e){return $e.current.useLayoutEffect(n,e)};V.useMemo=function(n,e){return $e.current.useMemo(n,e)};V.useReducer=function(n,e,t){return $e.current.useReducer(n,e,t)};V.useRef=function(n){return $e.current.useRef(n)};V.useState=function(n){return $e.current.useState(n)};V.useSyncExternalStore=function(n,e,t){return $e.current.useSyncExternalStore(n,e,t)};V.useTransition=function(){return $e.current.useTransition()};V.version="18.2.0";dg.exports=V;var Mr=dg.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev=Mr,tv=Symbol.for("react.element"),nv=Symbol.for("react.fragment"),rv=Object.prototype.hasOwnProperty,iv=ev.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sv={key:!0,ref:!0,__self:!0,__source:!0};function Sg(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)rv.call(e,r)&&!sv.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:tv,type:n,key:s,ref:o,props:i,_owner:iv.current}}wl.Fragment=nv;wl.jsx=Sg;wl.jsxs=Sg;fg.exports=wl;var Q=fg.exports,Nu={},kg={exports:{}},rt={},Tg={exports:{}},Ag={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(B,U){var j=B.length;B.push(U);e:for(;0<j;){var fe=j-1>>>1,ke=B[fe];if(0<i(ke,U))B[fe]=U,B[j]=ke,j=fe;else break e}}function t(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var U=B[0],j=B.pop();if(j!==U){B[0]=j;e:for(var fe=0,ke=B.length,bo=ke>>>1;fe<bo;){var ri=2*(fe+1)-1,Wl=B[ri],ii=ri+1,Fo=B[ii];if(0>i(Wl,j))ii<ke&&0>i(Fo,Wl)?(B[fe]=Fo,B[ii]=j,fe=ii):(B[fe]=Wl,B[ri]=j,fe=ri);else if(ii<ke&&0>i(Fo,j))B[fe]=Fo,B[ii]=j,fe=ii;else break e}}return U}function i(B,U){var j=B.sortIndex-U.sortIndex;return j!==0?j:B.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,m=3,y=!1,w=!1,T=!1,P=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(B){for(var U=t(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=B)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=t(c)}}function I(B){if(T=!1,v(B),!w)if(t(l)!==null)w=!0,ql(E);else{var U=t(c);U!==null&&Kl(I,U.startTime-B)}}function E(B,U){w=!1,T&&(T=!1,p(R),R=-1),y=!0;var j=m;try{for(v(U),h=t(l);h!==null&&(!(h.expirationTime>U)||B&&!Se());){var fe=h.callback;if(typeof fe=="function"){h.callback=null,m=h.priorityLevel;var ke=fe(h.expirationTime<=U);U=n.unstable_now(),typeof ke=="function"?h.callback=ke:h===t(l)&&r(l),v(U)}else r(l);h=t(l)}if(h!==null)var bo=!0;else{var ri=t(c);ri!==null&&Kl(I,ri.startTime-U),bo=!1}return bo}finally{h=null,m=j,y=!1}}var N=!1,D=null,R=-1,q=5,$=-1;function Se(){return!(n.unstable_now()-$<q)}function Er(){if(D!==null){var B=n.unstable_now();$=B;var U=!0;try{U=D(!0,B)}finally{U?ks():(N=!1,D=null)}}else N=!1}var ks;if(typeof g=="function")ks=function(){g(Er)};else if(typeof MessageChannel<"u"){var fd=new MessageChannel,by=fd.port2;fd.port1.onmessage=Er,ks=function(){by.postMessage(null)}}else ks=function(){P(Er,0)};function ql(B){D=B,N||(N=!0,ks())}function Kl(B,U){R=P(function(){B(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){w||y||(w=!0,ql(E))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(B){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var j=m;m=U;try{return B()}finally{m=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,U){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var j=m;m=B;try{return U()}finally{m=j}},n.unstable_scheduleCallback=function(B,U,j){var fe=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?fe+j:fe):j=fe,B){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=j+ke,B={id:d++,callback:U,priorityLevel:B,startTime:j,expirationTime:ke,sortIndex:-1},j>fe?(B.sortIndex=j,e(c,B),t(l)===null&&B===t(c)&&(T?(p(R),R=-1):T=!0,Kl(I,j-fe))):(B.sortIndex=ke,e(l,B),w||y||(w=!0,ql(E))),B},n.unstable_shouldYield=Se,n.unstable_wrapCallback=function(B){var U=m;return function(){var j=m;m=U;try{return B.apply(this,arguments)}finally{m=j}}}})(Ag);Tg.exports=Ag;var ov=Tg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig=Mr,nt=ov;function x(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Eg=new Set,Qs={};function xi(n,e){rs(n,e),rs(n+"Capture",e)}function rs(n,e){for(Qs[n]=e,n=0;n<e.length;n++)Eg.add(e[n])}var yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pu=Object.prototype.hasOwnProperty,av=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,md={},pd={};function lv(n){return Pu.call(pd,n)?!0:Pu.call(md,n)?!1:av.test(n)?pd[n]=!0:(md[n]=!0,!1)}function uv(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function cv(n,e,t,r){if(e===null||typeof e>"u"||uv(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ze(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ne[n]=new ze(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ne[e]=new ze(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ne[n]=new ze(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ne[n]=new ze(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ne[n]=new ze(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ne[n]=new ze(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ne[n]=new ze(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ne[n]=new ze(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ne[n]=new ze(n,5,!1,n.toLowerCase(),null,!1,!1)});var ef=/[\-:]([a-z])/g;function tf(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(ef,tf);Ne[e]=new ze(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(ef,tf);Ne[e]=new ze(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(ef,tf);Ne[e]=new ze(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ne[n]=new ze(n,1,!1,n.toLowerCase(),null,!1,!1)});Ne.xlinkHref=new ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ne[n]=new ze(n,1,!1,n.toLowerCase(),null,!0,!0)});function nf(n,e,t,r){var i=Ne.hasOwnProperty(e)?Ne[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cv(e,t,i,r)&&(t=null),r||i===null?lv(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Ar=Ig.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jo=Symbol.for("react.element"),Bi=Symbol.for("react.portal"),bi=Symbol.for("react.fragment"),rf=Symbol.for("react.strict_mode"),Du=Symbol.for("react.profiler"),xg=Symbol.for("react.provider"),Cg=Symbol.for("react.context"),sf=Symbol.for("react.forward_ref"),Ou=Symbol.for("react.suspense"),Ru=Symbol.for("react.suspense_list"),of=Symbol.for("react.memo"),Dr=Symbol.for("react.lazy"),Ng=Symbol.for("react.offscreen"),yd=Symbol.iterator;function Ts(n){return n===null||typeof n!="object"?null:(n=yd&&n[yd]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Object.assign,_l;function Rs(n){if(_l===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);_l=e&&e[1]||""}return`
`+_l+n}var Gl=!1;function Yl(n,e){if(!n||Gl)return"";Gl=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Gl=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Rs(n):""}function fv(n){switch(n.tag){case 5:return Rs(n.type);case 16:return Rs("Lazy");case 13:return Rs("Suspense");case 19:return Rs("SuspenseList");case 0:case 2:case 15:return n=Yl(n.type,!1),n;case 11:return n=Yl(n.type.render,!1),n;case 1:return n=Yl(n.type,!0),n;default:return""}}function Lu(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case bi:return"Fragment";case Bi:return"Portal";case Du:return"Profiler";case rf:return"StrictMode";case Ou:return"Suspense";case Ru:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Cg:return(n.displayName||"Context")+".Consumer";case xg:return(n._context.displayName||"Context")+".Provider";case sf:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case of:return e=n.displayName||null,e!==null?e:Lu(n.type)||"Memo";case Dr:e=n._payload,n=n._init;try{return Lu(n(e))}catch{}}return null}function dv(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lu(e);case 8:return e===rf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Pg(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hv(n){var e=Pg(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function $o(n){n._valueTracker||(n._valueTracker=hv(n))}function Dg(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Pg(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Ea(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Bu(n,e){var t=e.checked;return ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function vd(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Gr(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Og(n,e){e=e.checked,e!=null&&nf(n,"checked",e,!1)}function bu(n,e){Og(n,e);var t=Gr(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Fu(n,e.type,t):e.hasOwnProperty("defaultValue")&&Fu(n,e.type,Gr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function wd(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Fu(n,e,t){(e!=="number"||Ea(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Ls=Array.isArray;function _i(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Gr(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Mu(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(x(91));return ae({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Sd(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(x(92));if(Ls(t)){if(1<t.length)throw Error(x(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Gr(t)}}function Rg(n,e){var t=Gr(e.value),r=Gr(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function kd(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Lg(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ju(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Lg(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var zo,Bg=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(zo=zo||document.createElement("div"),zo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zo.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Xs(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gv=["Webkit","ms","Moz","O"];Object.keys(Ms).forEach(function(n){gv.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ms[e]=Ms[n]})});function bg(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ms.hasOwnProperty(n)&&Ms[n]?(""+e).trim():e+"px"}function Fg(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=bg(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var mv=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $u(n,e){if(e){if(mv[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(x(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(x(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(x(61))}if(e.style!=null&&typeof e.style!="object")throw Error(x(62))}}function zu(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uu=null;function af(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ju=null,Gi=null,Yi=null;function Td(n){if(n=No(n)){if(typeof ju!="function")throw Error(x(280));var e=n.stateNode;e&&(e=Il(e),ju(n.stateNode,n.type,e))}}function Mg(n){Gi?Yi?Yi.push(n):Yi=[n]:Gi=n}function Jg(){if(Gi){var n=Gi,e=Yi;if(Yi=Gi=null,Td(n),e)for(n=0;n<e.length;n++)Td(e[n])}}function $g(n,e){return n(e)}function zg(){}var Ql=!1;function Ug(n,e,t){if(Ql)return n(e,t);Ql=!0;try{return $g(n,e,t)}finally{Ql=!1,(Gi!==null||Yi!==null)&&(zg(),Jg())}}function Zs(n,e){var t=n.stateNode;if(t===null)return null;var r=Il(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(x(231,e,typeof t));return t}var Vu=!1;if(yr)try{var As={};Object.defineProperty(As,"passive",{get:function(){Vu=!0}}),window.addEventListener("test",As,As),window.removeEventListener("test",As,As)}catch{Vu=!1}function pv(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var Js=!1,xa=null,Ca=!1,qu=null,yv={onError:function(n){Js=!0,xa=n}};function vv(n,e,t,r,i,s,o,a,l){Js=!1,xa=null,pv.apply(yv,arguments)}function wv(n,e,t,r,i,s,o,a,l){if(vv.apply(this,arguments),Js){if(Js){var c=xa;Js=!1,xa=null}else throw Error(x(198));Ca||(Ca=!0,qu=c)}}function Ci(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function jg(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Ad(n){if(Ci(n)!==n)throw Error(x(188))}function Sv(n){var e=n.alternate;if(!e){if(e=Ci(n),e===null)throw Error(x(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Ad(i),n;if(s===r)return Ad(i),e;s=s.sibling}throw Error(x(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(x(189))}}if(t.alternate!==r)throw Error(x(190))}if(t.tag!==3)throw Error(x(188));return t.stateNode.current===t?n:e}function Vg(n){return n=Sv(n),n!==null?qg(n):null}function qg(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=qg(n);if(e!==null)return e;n=n.sibling}return null}var Kg=nt.unstable_scheduleCallback,Id=nt.unstable_cancelCallback,kv=nt.unstable_shouldYield,Tv=nt.unstable_requestPaint,he=nt.unstable_now,Av=nt.unstable_getCurrentPriorityLevel,lf=nt.unstable_ImmediatePriority,Wg=nt.unstable_UserBlockingPriority,Na=nt.unstable_NormalPriority,Iv=nt.unstable_LowPriority,Hg=nt.unstable_IdlePriority,Sl=null,tn=null;function Ev(n){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Sl,n,void 0,(n.current.flags&128)===128)}catch{}}var Lt=Math.clz32?Math.clz32:Nv,xv=Math.log,Cv=Math.LN2;function Nv(n){return n>>>=0,n===0?32:31-(xv(n)/Cv|0)|0}var Uo=64,jo=4194304;function Bs(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Pa(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Bs(a):(s&=o,s!==0&&(r=Bs(s)))}else o=t&~i,o!==0?r=Bs(o):s!==0&&(r=Bs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Lt(e),i=1<<t,r|=n[t],e&=~i;return r}function Pv(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dv(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Lt(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=Pv(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Ku(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function _g(){var n=Uo;return Uo<<=1,!(Uo&4194240)&&(Uo=64),n}function Xl(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function xo(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Lt(e),n[e]=t}function Ov(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Lt(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function uf(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Lt(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var G=0;function Gg(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Yg,cf,Qg,Xg,Zg,Wu=!1,Vo=[],Jr=null,$r=null,zr=null,eo=new Map,to=new Map,Rr=[],Rv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ed(n,e){switch(n){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":eo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":to.delete(e.pointerId)}}function Is(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=No(e),e!==null&&cf(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function Lv(n,e,t,r,i){switch(e){case"focusin":return Jr=Is(Jr,n,e,t,r,i),!0;case"dragenter":return $r=Is($r,n,e,t,r,i),!0;case"mouseover":return zr=Is(zr,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return eo.set(s,Is(eo.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,to.set(s,Is(to.get(s)||null,n,e,t,r,i)),!0}return!1}function em(n){var e=ui(n.target);if(e!==null){var t=Ci(e);if(t!==null){if(e=t.tag,e===13){if(e=jg(t),e!==null){n.blockedOn=e,Zg(n.priority,function(){Qg(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function la(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Hu(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Uu=r,t.target.dispatchEvent(r),Uu=null}else return e=No(t),e!==null&&cf(e),n.blockedOn=t,!1;e.shift()}return!0}function xd(n,e,t){la(n)&&t.delete(e)}function Bv(){Wu=!1,Jr!==null&&la(Jr)&&(Jr=null),$r!==null&&la($r)&&($r=null),zr!==null&&la(zr)&&(zr=null),eo.forEach(xd),to.forEach(xd)}function Es(n,e){n.blockedOn===e&&(n.blockedOn=null,Wu||(Wu=!0,nt.unstable_scheduleCallback(nt.unstable_NormalPriority,Bv)))}function no(n){function e(i){return Es(i,n)}if(0<Vo.length){Es(Vo[0],n);for(var t=1;t<Vo.length;t++){var r=Vo[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Jr!==null&&Es(Jr,n),$r!==null&&Es($r,n),zr!==null&&Es(zr,n),eo.forEach(e),to.forEach(e),t=0;t<Rr.length;t++)r=Rr[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Rr.length&&(t=Rr[0],t.blockedOn===null);)em(t),t.blockedOn===null&&Rr.shift()}var Qi=Ar.ReactCurrentBatchConfig,Da=!0;function bv(n,e,t,r){var i=G,s=Qi.transition;Qi.transition=null;try{G=1,ff(n,e,t,r)}finally{G=i,Qi.transition=s}}function Fv(n,e,t,r){var i=G,s=Qi.transition;Qi.transition=null;try{G=4,ff(n,e,t,r)}finally{G=i,Qi.transition=s}}function ff(n,e,t,r){if(Da){var i=Hu(n,e,t,r);if(i===null)lu(n,e,r,Oa,t),Ed(n,r);else if(Lv(i,n,e,t,r))r.stopPropagation();else if(Ed(n,r),e&4&&-1<Rv.indexOf(n)){for(;i!==null;){var s=No(i);if(s!==null&&Yg(s),s=Hu(n,e,t,r),s===null&&lu(n,e,r,Oa,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else lu(n,e,r,null,t)}}var Oa=null;function Hu(n,e,t,r){if(Oa=null,n=af(r),n=ui(n),n!==null)if(e=Ci(n),e===null)n=null;else if(t=e.tag,t===13){if(n=jg(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Oa=n,null}function tm(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Av()){case lf:return 1;case Wg:return 4;case Na:case Iv:return 16;case Hg:return 536870912;default:return 16}default:return 16}}var Br=null,df=null,ua=null;function nm(){if(ua)return ua;var n,e=df,t=e.length,r,i="value"in Br?Br.value:Br.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return ua=i.slice(n,1<r?1-r:void 0)}function ca(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function qo(){return!0}function Cd(){return!1}function it(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?qo:Cd,this.isPropagationStopped=Cd,this}return ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=qo)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=qo)},persist:function(){},isPersistent:qo}),e}var ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hf=it(ws),Co=ae({},ws,{view:0,detail:0}),Mv=it(Co),Zl,eu,xs,kl=ae({},Co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gf,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xs&&(xs&&n.type==="mousemove"?(Zl=n.screenX-xs.screenX,eu=n.screenY-xs.screenY):eu=Zl=0,xs=n),Zl)},movementY:function(n){return"movementY"in n?n.movementY:eu}}),Nd=it(kl),Jv=ae({},kl,{dataTransfer:0}),$v=it(Jv),zv=ae({},Co,{relatedTarget:0}),tu=it(zv),Uv=ae({},ws,{animationName:0,elapsedTime:0,pseudoElement:0}),jv=it(Uv),Vv=ae({},ws,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),qv=it(Vv),Kv=ae({},ws,{data:0}),Pd=it(Kv),Wv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_v={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gv(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=_v[n])?!!e[n]:!1}function gf(){return Gv}var Yv=ae({},Co,{key:function(n){if(n.key){var e=Wv[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=ca(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Hv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gf,charCode:function(n){return n.type==="keypress"?ca(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ca(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Qv=it(Yv),Xv=ae({},kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dd=it(Xv),Zv=ae({},Co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gf}),e0=it(Zv),t0=ae({},ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),n0=it(t0),r0=ae({},kl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),i0=it(r0),s0=[9,13,27,32],mf=yr&&"CompositionEvent"in window,$s=null;yr&&"documentMode"in document&&($s=document.documentMode);var o0=yr&&"TextEvent"in window&&!$s,rm=yr&&(!mf||$s&&8<$s&&11>=$s),Od=" ",Rd=!1;function im(n,e){switch(n){case"keyup":return s0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fi=!1;function a0(n,e){switch(n){case"compositionend":return sm(e);case"keypress":return e.which!==32?null:(Rd=!0,Od);case"textInput":return n=e.data,n===Od&&Rd?null:n;default:return null}}function l0(n,e){if(Fi)return n==="compositionend"||!mf&&im(n,e)?(n=nm(),ua=df=Br=null,Fi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rm&&e.locale!=="ko"?null:e.data;default:return null}}var u0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ld(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!u0[n.type]:e==="textarea"}function om(n,e,t,r){Mg(r),e=Ra(e,"onChange"),0<e.length&&(t=new hf("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var zs=null,ro=null;function c0(n){ym(n,0)}function Tl(n){var e=$i(n);if(Dg(e))return n}function f0(n,e){if(n==="change")return e}var am=!1;if(yr){var nu;if(yr){var ru="oninput"in document;if(!ru){var Bd=document.createElement("div");Bd.setAttribute("oninput","return;"),ru=typeof Bd.oninput=="function"}nu=ru}else nu=!1;am=nu&&(!document.documentMode||9<document.documentMode)}function bd(){zs&&(zs.detachEvent("onpropertychange",lm),ro=zs=null)}function lm(n){if(n.propertyName==="value"&&Tl(ro)){var e=[];om(e,ro,n,af(n)),Ug(c0,e)}}function d0(n,e,t){n==="focusin"?(bd(),zs=e,ro=t,zs.attachEvent("onpropertychange",lm)):n==="focusout"&&bd()}function h0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Tl(ro)}function g0(n,e){if(n==="click")return Tl(e)}function m0(n,e){if(n==="input"||n==="change")return Tl(e)}function p0(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Mt=typeof Object.is=="function"?Object.is:p0;function io(n,e){if(Mt(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Pu.call(e,i)||!Mt(n[i],e[i]))return!1}return!0}function Fd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Md(n,e){var t=Fd(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Fd(t)}}function um(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?um(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function cm(){for(var n=window,e=Ea();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Ea(n.document)}return e}function pf(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function y0(n){var e=cm(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&um(t.ownerDocument.documentElement,t)){if(r!==null&&pf(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=Md(t,s);var o=Md(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var v0=yr&&"documentMode"in document&&11>=document.documentMode,Mi=null,_u=null,Us=null,Gu=!1;function Jd(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Gu||Mi==null||Mi!==Ea(r)||(r=Mi,"selectionStart"in r&&pf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Us&&io(Us,r)||(Us=r,r=Ra(_u,"onSelect"),0<r.length&&(e=new hf("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Mi)))}function Ko(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Ji={animationend:Ko("Animation","AnimationEnd"),animationiteration:Ko("Animation","AnimationIteration"),animationstart:Ko("Animation","AnimationStart"),transitionend:Ko("Transition","TransitionEnd")},iu={},fm={};yr&&(fm=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function Al(n){if(iu[n])return iu[n];if(!Ji[n])return n;var e=Ji[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in fm)return iu[n]=e[t];return n}var dm=Al("animationend"),hm=Al("animationiteration"),gm=Al("animationstart"),mm=Al("transitionend"),pm=new Map,$d="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ei(n,e){pm.set(n,e),xi(e,[n])}for(var su=0;su<$d.length;su++){var ou=$d[su],w0=ou.toLowerCase(),S0=ou[0].toUpperCase()+ou.slice(1);ei(w0,"on"+S0)}ei(dm,"onAnimationEnd");ei(hm,"onAnimationIteration");ei(gm,"onAnimationStart");ei("dblclick","onDoubleClick");ei("focusin","onFocus");ei("focusout","onBlur");ei(mm,"onTransitionEnd");rs("onMouseEnter",["mouseout","mouseover"]);rs("onMouseLeave",["mouseout","mouseover"]);rs("onPointerEnter",["pointerout","pointerover"]);rs("onPointerLeave",["pointerout","pointerover"]);xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xi("onBeforeInput",["compositionend","keypress","textInput","paste"]);xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k0=new Set("cancel close invalid load scroll toggle".split(" ").concat(bs));function zd(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,wv(r,e,void 0,n),n.currentTarget=null}function ym(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;zd(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;zd(i,a,c),s=l}}}if(Ca)throw n=qu,Ca=!1,qu=null,n}function Z(n,e){var t=e[ec];t===void 0&&(t=e[ec]=new Set);var r=n+"__bubble";t.has(r)||(vm(e,n,2,!1),t.add(r))}function au(n,e,t){var r=0;e&&(r|=4),vm(t,n,r,e)}var Wo="_reactListening"+Math.random().toString(36).slice(2);function so(n){if(!n[Wo]){n[Wo]=!0,Eg.forEach(function(t){t!=="selectionchange"&&(k0.has(t)||au(t,!1,n),au(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Wo]||(e[Wo]=!0,au("selectionchange",!1,e))}}function vm(n,e,t,r){switch(tm(e)){case 1:var i=bv;break;case 4:i=Fv;break;default:i=ff}t=i.bind(null,e,t,n),i=void 0,!Vu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function lu(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ui(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Ug(function(){var c=s,d=af(t),h=[];e:{var m=pm.get(n);if(m!==void 0){var y=hf,w=n;switch(n){case"keypress":if(ca(t)===0)break e;case"keydown":case"keyup":y=Qv;break;case"focusin":w="focus",y=tu;break;case"focusout":w="blur",y=tu;break;case"beforeblur":case"afterblur":y=tu;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=$v;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=e0;break;case dm:case hm:case gm:y=jv;break;case mm:y=n0;break;case"scroll":y=Mv;break;case"wheel":y=i0;break;case"copy":case"cut":case"paste":y=qv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Dd}var T=(e&4)!==0,P=!T&&n==="scroll",p=T?m!==null?m+"Capture":null:m;T=[];for(var g=c,v;g!==null;){v=g;var I=v.stateNode;if(v.tag===5&&I!==null&&(v=I,p!==null&&(I=Zs(g,p),I!=null&&T.push(oo(g,I,v)))),P)break;g=g.return}0<T.length&&(m=new y(m,w,null,t,d),h.push({event:m,listeners:T}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",y=n==="mouseout"||n==="pointerout",m&&t!==Uu&&(w=t.relatedTarget||t.fromElement)&&(ui(w)||w[vr]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(w=t.relatedTarget||t.toElement,y=c,w=w?ui(w):null,w!==null&&(P=Ci(w),w!==P||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=c),y!==w)){if(T=Nd,I="onMouseLeave",p="onMouseEnter",g="mouse",(n==="pointerout"||n==="pointerover")&&(T=Dd,I="onPointerLeave",p="onPointerEnter",g="pointer"),P=y==null?m:$i(y),v=w==null?m:$i(w),m=new T(I,g+"leave",y,t,d),m.target=P,m.relatedTarget=v,I=null,ui(d)===c&&(T=new T(p,g+"enter",w,t,d),T.target=v,T.relatedTarget=P,I=T),P=I,y&&w)t:{for(T=y,p=w,g=0,v=T;v;v=Pi(v))g++;for(v=0,I=p;I;I=Pi(I))v++;for(;0<g-v;)T=Pi(T),g--;for(;0<v-g;)p=Pi(p),v--;for(;g--;){if(T===p||p!==null&&T===p.alternate)break t;T=Pi(T),p=Pi(p)}T=null}else T=null;y!==null&&Ud(h,m,y,T,!1),w!==null&&P!==null&&Ud(h,P,w,T,!0)}}e:{if(m=c?$i(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var E=f0;else if(Ld(m))if(am)E=m0;else{E=h0;var N=d0}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(E=g0);if(E&&(E=E(n,c))){om(h,E,t,d);break e}N&&N(n,m,c),n==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&Fu(m,"number",m.value)}switch(N=c?$i(c):window,n){case"focusin":(Ld(N)||N.contentEditable==="true")&&(Mi=N,_u=c,Us=null);break;case"focusout":Us=_u=Mi=null;break;case"mousedown":Gu=!0;break;case"contextmenu":case"mouseup":case"dragend":Gu=!1,Jd(h,t,d);break;case"selectionchange":if(v0)break;case"keydown":case"keyup":Jd(h,t,d)}var D;if(mf)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Fi?im(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(rm&&t.locale!=="ko"&&(Fi||R!=="onCompositionStart"?R==="onCompositionEnd"&&Fi&&(D=nm()):(Br=d,df="value"in Br?Br.value:Br.textContent,Fi=!0)),N=Ra(c,R),0<N.length&&(R=new Pd(R,n,null,t,d),h.push({event:R,listeners:N}),D?R.data=D:(D=sm(t),D!==null&&(R.data=D)))),(D=o0?a0(n,t):l0(n,t))&&(c=Ra(c,"onBeforeInput"),0<c.length&&(d=new Pd("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:c}),d.data=D))}ym(h,e)})}function oo(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Ra(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Zs(n,t),s!=null&&r.unshift(oo(n,s,i)),s=Zs(n,e),s!=null&&r.push(oo(n,s,i))),n=n.return}return r}function Pi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Ud(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Zs(t,s),l!=null&&o.unshift(oo(t,l,a))):i||(l=Zs(t,s),l!=null&&o.push(oo(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var T0=/\r\n?/g,A0=/\u0000|\uFFFD/g;function jd(n){return(typeof n=="string"?n:""+n).replace(T0,`
`).replace(A0,"")}function Ho(n,e,t){if(e=jd(e),jd(n)!==e&&t)throw Error(x(425))}function La(){}var Yu=null,Qu=null;function Xu(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zu=typeof setTimeout=="function"?setTimeout:void 0,I0=typeof clearTimeout=="function"?clearTimeout:void 0,Vd=typeof Promise=="function"?Promise:void 0,E0=typeof queueMicrotask=="function"?queueMicrotask:typeof Vd<"u"?function(n){return Vd.resolve(null).then(n).catch(x0)}:Zu;function x0(n){setTimeout(function(){throw n})}function uu(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),no(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);no(e)}function Ur(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function qd(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ss=Math.random().toString(36).slice(2),qt="__reactFiber$"+Ss,ao="__reactProps$"+Ss,vr="__reactContainer$"+Ss,ec="__reactEvents$"+Ss,C0="__reactListeners$"+Ss,N0="__reactHandles$"+Ss;function ui(n){var e=n[qt];if(e)return e;for(var t=n.parentNode;t;){if(e=t[vr]||t[qt]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=qd(n);n!==null;){if(t=n[qt])return t;n=qd(n)}return e}n=t,t=n.parentNode}return null}function No(n){return n=n[qt]||n[vr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function $i(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(x(33))}function Il(n){return n[ao]||null}var tc=[],zi=-1;function ti(n){return{current:n}}function ee(n){0>zi||(n.current=tc[zi],tc[zi]=null,zi--)}function X(n,e){zi++,tc[zi]=n.current,n.current=e}var Yr={},Le=ti(Yr),qe=ti(!1),vi=Yr;function is(n,e){var t=n.type.contextTypes;if(!t)return Yr;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ke(n){return n=n.childContextTypes,n!=null}function Ba(){ee(qe),ee(Le)}function Kd(n,e,t){if(Le.current!==Yr)throw Error(x(168));X(Le,e),X(qe,t)}function wm(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(x(108,dv(n)||"Unknown",i));return ae({},t,r)}function ba(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Yr,vi=Le.current,X(Le,n),X(qe,qe.current),!0}function Wd(n,e,t){var r=n.stateNode;if(!r)throw Error(x(169));t?(n=wm(n,e,vi),r.__reactInternalMemoizedMergedChildContext=n,ee(qe),ee(Le),X(Le,n)):ee(qe),X(qe,t)}var or=null,El=!1,cu=!1;function Sm(n){or===null?or=[n]:or.push(n)}function P0(n){El=!0,Sm(n)}function ni(){if(!cu&&or!==null){cu=!0;var n=0,e=G;try{var t=or;for(G=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}or=null,El=!1}catch(i){throw or!==null&&(or=or.slice(n+1)),Kg(lf,ni),i}finally{G=e,cu=!1}}return null}var Ui=[],ji=0,Fa=null,Ma=0,st=[],ot=0,wi=null,ur=1,cr="";function si(n,e){Ui[ji++]=Ma,Ui[ji++]=Fa,Fa=n,Ma=e}function km(n,e,t){st[ot++]=ur,st[ot++]=cr,st[ot++]=wi,wi=n;var r=ur;n=cr;var i=32-Lt(r)-1;r&=~(1<<i),t+=1;var s=32-Lt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ur=1<<32-Lt(e)+i|t<<i|r,cr=s+n}else ur=1<<s|t<<i|r,cr=n}function yf(n){n.return!==null&&(si(n,1),km(n,1,0))}function vf(n){for(;n===Fa;)Fa=Ui[--ji],Ui[ji]=null,Ma=Ui[--ji],Ui[ji]=null;for(;n===wi;)wi=st[--ot],st[ot]=null,cr=st[--ot],st[ot]=null,ur=st[--ot],st[ot]=null}var Ze=null,Ye=null,te=!1,Dt=null;function Tm(n,e){var t=yt(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Hd(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ze=n,Ye=Ur(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ze=n,Ye=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=wi!==null?{id:ur,overflow:cr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=yt(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ze=n,Ye=null,!0):!1;default:return!1}}function nc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function rc(n){if(te){var e=Ye;if(e){var t=e;if(!Hd(n,e)){if(nc(n))throw Error(x(418));e=Ur(t.nextSibling);var r=Ze;e&&Hd(n,e)?Tm(r,t):(n.flags=n.flags&-4097|2,te=!1,Ze=n)}}else{if(nc(n))throw Error(x(418));n.flags=n.flags&-4097|2,te=!1,Ze=n}}}function _d(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ze=n}function _o(n){if(n!==Ze)return!1;if(!te)return _d(n),te=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Xu(n.type,n.memoizedProps)),e&&(e=Ye)){if(nc(n))throw Am(),Error(x(418));for(;e;)Tm(n,e),e=Ur(e.nextSibling)}if(_d(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(x(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Ye=Ur(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Ye=null}}else Ye=Ze?Ur(n.stateNode.nextSibling):null;return!0}function Am(){for(var n=Ye;n;)n=Ur(n.nextSibling)}function ss(){Ye=Ze=null,te=!1}function wf(n){Dt===null?Dt=[n]:Dt.push(n)}var D0=Ar.ReactCurrentBatchConfig;function Ct(n,e){if(n&&n.defaultProps){e=ae({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Ja=ti(null),$a=null,Vi=null,Sf=null;function kf(){Sf=Vi=$a=null}function Tf(n){var e=Ja.current;ee(Ja),n._currentValue=e}function ic(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Xi(n,e){$a=n,Sf=Vi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(je=!0),n.firstContext=null)}function Tt(n){var e=n._currentValue;if(Sf!==n)if(n={context:n,memoizedValue:e,next:null},Vi===null){if($a===null)throw Error(x(308));Vi=n,$a.dependencies={lanes:0,firstContext:n}}else Vi=Vi.next=n;return e}var ci=null;function Af(n){ci===null?ci=[n]:ci.push(n)}function Im(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Af(e)):(t.next=i.next,i.next=t),e.interleaved=t,wr(n,r)}function wr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Or=!1;function If(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Em(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function gr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function jr(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,W&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,wr(n,t)}return i=r.interleaved,i===null?(e.next=e,Af(r)):(e.next=i.next,i.next=e),r.interleaved=e,wr(n,t)}function fa(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,uf(n,t)}}function Gd(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function za(n,e,t,r){var i=n.updateQueue;Or=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var m=a.lane,y=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=n,T=a;switch(m=e,y=t,T.tag){case 1:if(w=T.payload,typeof w=="function"){h=w.call(y,h,m);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=T.payload,m=typeof w=="function"?w.call(y,h,m):w,m==null)break e;h=ae({},h,m);break e;case 2:Or=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,l=h):d=d.next=y,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ki|=o,n.lanes=o,n.memoizedState=h}}function Yd(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(x(191,i));i.call(r)}}}var xm=new Ig.Component().refs;function sc(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:ae({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var xl={isMounted:function(n){return(n=n._reactInternals)?Ci(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Je(),i=qr(n),s=gr(r,i);s.payload=e,t!=null&&(s.callback=t),e=jr(n,s,i),e!==null&&(Bt(e,n,i,r),fa(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Je(),i=qr(n),s=gr(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=jr(n,s,i),e!==null&&(Bt(e,n,i,r),fa(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Je(),r=qr(n),i=gr(t,r);i.tag=2,e!=null&&(i.callback=e),e=jr(n,i,r),e!==null&&(Bt(e,n,r,t),fa(e,n,r))}};function Qd(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!io(t,r)||!io(i,s):!0}function Cm(n,e,t){var r=!1,i=Yr,s=e.contextType;return typeof s=="object"&&s!==null?s=Tt(s):(i=Ke(e)?vi:Le.current,r=e.contextTypes,s=(r=r!=null)?is(n,i):Yr),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xl,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function Xd(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&xl.enqueueReplaceState(e,e.state,null)}function oc(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=xm,If(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Tt(s):(s=Ke(e)?vi:Le.current,i.context=is(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(sc(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xl.enqueueReplaceState(i,i.state,null),za(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Cs(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(x(309));var r=t.stateNode}if(!r)throw Error(x(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===xm&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(x(284));if(!t._owner)throw Error(x(290,n))}return n}function Go(n,e){throw n=Object.prototype.toString.call(e),Error(x(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Zd(n){var e=n._init;return e(n._payload)}function Nm(n){function e(p,g){if(n){var v=p.deletions;v===null?(p.deletions=[g],p.flags|=16):v.push(g)}}function t(p,g){if(!n)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function r(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function i(p,g){return p=Kr(p,g),p.index=0,p.sibling=null,p}function s(p,g,v){return p.index=v,n?(v=p.alternate,v!==null?(v=v.index,v<g?(p.flags|=2,g):v):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return n&&p.alternate===null&&(p.flags|=2),p}function a(p,g,v,I){return g===null||g.tag!==6?(g=yu(v,p.mode,I),g.return=p,g):(g=i(g,v),g.return=p,g)}function l(p,g,v,I){var E=v.type;return E===bi?d(p,g,v.props.children,I,v.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Dr&&Zd(E)===g.type)?(I=i(g,v.props),I.ref=Cs(p,g,v),I.return=p,I):(I=ya(v.type,v.key,v.props,null,p.mode,I),I.ref=Cs(p,g,v),I.return=p,I)}function c(p,g,v,I){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=vu(v,p.mode,I),g.return=p,g):(g=i(g,v.children||[]),g.return=p,g)}function d(p,g,v,I,E){return g===null||g.tag!==7?(g=mi(v,p.mode,I,E),g.return=p,g):(g=i(g,v),g.return=p,g)}function h(p,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=yu(""+g,p.mode,v),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Jo:return v=ya(g.type,g.key,g.props,null,p.mode,v),v.ref=Cs(p,null,g),v.return=p,v;case Bi:return g=vu(g,p.mode,v),g.return=p,g;case Dr:var I=g._init;return h(p,I(g._payload),v)}if(Ls(g)||Ts(g))return g=mi(g,p.mode,v,null),g.return=p,g;Go(p,g)}return null}function m(p,g,v,I){var E=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return E!==null?null:a(p,g,""+v,I);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Jo:return v.key===E?l(p,g,v,I):null;case Bi:return v.key===E?c(p,g,v,I):null;case Dr:return E=v._init,m(p,g,E(v._payload),I)}if(Ls(v)||Ts(v))return E!==null?null:d(p,g,v,I,null);Go(p,v)}return null}function y(p,g,v,I,E){if(typeof I=="string"&&I!==""||typeof I=="number")return p=p.get(v)||null,a(g,p,""+I,E);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Jo:return p=p.get(I.key===null?v:I.key)||null,l(g,p,I,E);case Bi:return p=p.get(I.key===null?v:I.key)||null,c(g,p,I,E);case Dr:var N=I._init;return y(p,g,v,N(I._payload),E)}if(Ls(I)||Ts(I))return p=p.get(v)||null,d(g,p,I,E,null);Go(g,I)}return null}function w(p,g,v,I){for(var E=null,N=null,D=g,R=g=0,q=null;D!==null&&R<v.length;R++){D.index>R?(q=D,D=null):q=D.sibling;var $=m(p,D,v[R],I);if($===null){D===null&&(D=q);break}n&&D&&$.alternate===null&&e(p,D),g=s($,g,R),N===null?E=$:N.sibling=$,N=$,D=q}if(R===v.length)return t(p,D),te&&si(p,R),E;if(D===null){for(;R<v.length;R++)D=h(p,v[R],I),D!==null&&(g=s(D,g,R),N===null?E=D:N.sibling=D,N=D);return te&&si(p,R),E}for(D=r(p,D);R<v.length;R++)q=y(D,p,R,v[R],I),q!==null&&(n&&q.alternate!==null&&D.delete(q.key===null?R:q.key),g=s(q,g,R),N===null?E=q:N.sibling=q,N=q);return n&&D.forEach(function(Se){return e(p,Se)}),te&&si(p,R),E}function T(p,g,v,I){var E=Ts(v);if(typeof E!="function")throw Error(x(150));if(v=E.call(v),v==null)throw Error(x(151));for(var N=E=null,D=g,R=g=0,q=null,$=v.next();D!==null&&!$.done;R++,$=v.next()){D.index>R?(q=D,D=null):q=D.sibling;var Se=m(p,D,$.value,I);if(Se===null){D===null&&(D=q);break}n&&D&&Se.alternate===null&&e(p,D),g=s(Se,g,R),N===null?E=Se:N.sibling=Se,N=Se,D=q}if($.done)return t(p,D),te&&si(p,R),E;if(D===null){for(;!$.done;R++,$=v.next())$=h(p,$.value,I),$!==null&&(g=s($,g,R),N===null?E=$:N.sibling=$,N=$);return te&&si(p,R),E}for(D=r(p,D);!$.done;R++,$=v.next())$=y(D,p,R,$.value,I),$!==null&&(n&&$.alternate!==null&&D.delete($.key===null?R:$.key),g=s($,g,R),N===null?E=$:N.sibling=$,N=$);return n&&D.forEach(function(Er){return e(p,Er)}),te&&si(p,R),E}function P(p,g,v,I){if(typeof v=="object"&&v!==null&&v.type===bi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Jo:e:{for(var E=v.key,N=g;N!==null;){if(N.key===E){if(E=v.type,E===bi){if(N.tag===7){t(p,N.sibling),g=i(N,v.props.children),g.return=p,p=g;break e}}else if(N.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Dr&&Zd(E)===N.type){t(p,N.sibling),g=i(N,v.props),g.ref=Cs(p,N,v),g.return=p,p=g;break e}t(p,N);break}else e(p,N);N=N.sibling}v.type===bi?(g=mi(v.props.children,p.mode,I,v.key),g.return=p,p=g):(I=ya(v.type,v.key,v.props,null,p.mode,I),I.ref=Cs(p,g,v),I.return=p,p=I)}return o(p);case Bi:e:{for(N=v.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){t(p,g.sibling),g=i(g,v.children||[]),g.return=p,p=g;break e}else{t(p,g);break}else e(p,g);g=g.sibling}g=vu(v,p.mode,I),g.return=p,p=g}return o(p);case Dr:return N=v._init,P(p,g,N(v._payload),I)}if(Ls(v))return w(p,g,v,I);if(Ts(v))return T(p,g,v,I);Go(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(t(p,g.sibling),g=i(g,v),g.return=p,p=g):(t(p,g),g=yu(v,p.mode,I),g.return=p,p=g),o(p)):t(p,g)}return P}var os=Nm(!0),Pm=Nm(!1),Po={},nn=ti(Po),lo=ti(Po),uo=ti(Po);function fi(n){if(n===Po)throw Error(x(174));return n}function Ef(n,e){switch(X(uo,e),X(lo,n),X(nn,Po),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ju(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Ju(e,n)}ee(nn),X(nn,e)}function as(){ee(nn),ee(lo),ee(uo)}function Dm(n){fi(uo.current);var e=fi(nn.current),t=Ju(e,n.type);e!==t&&(X(lo,n),X(nn,t))}function xf(n){lo.current===n&&(ee(nn),ee(lo))}var ie=ti(0);function Ua(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fu=[];function Cf(){for(var n=0;n<fu.length;n++)fu[n]._workInProgressVersionPrimary=null;fu.length=0}var da=Ar.ReactCurrentDispatcher,du=Ar.ReactCurrentBatchConfig,Si=0,oe=null,ye=null,Te=null,ja=!1,js=!1,co=0,O0=0;function Pe(){throw Error(x(321))}function Nf(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Mt(n[t],e[t]))return!1;return!0}function Pf(n,e,t,r,i,s){if(Si=s,oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,da.current=n===null||n.memoizedState===null?b0:F0,n=t(r,i),js){s=0;do{if(js=!1,co=0,25<=s)throw Error(x(301));s+=1,Te=ye=null,e.updateQueue=null,da.current=M0,n=t(r,i)}while(js)}if(da.current=Va,e=ye!==null&&ye.next!==null,Si=0,Te=ye=oe=null,ja=!1,e)throw Error(x(300));return n}function Df(){var n=co!==0;return co=0,n}function Ut(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?oe.memoizedState=Te=n:Te=Te.next=n,Te}function At(){if(ye===null){var n=oe.alternate;n=n!==null?n.memoizedState:null}else n=ye.next;var e=Te===null?oe.memoizedState:Te.next;if(e!==null)Te=e,ye=n;else{if(n===null)throw Error(x(310));ye=n,n={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},Te===null?oe.memoizedState=Te=n:Te=Te.next=n}return Te}function fo(n,e){return typeof e=="function"?e(n):e}function hu(n){var e=At(),t=e.queue;if(t===null)throw Error(x(311));t.lastRenderedReducer=n;var r=ye,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Si&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,oe.lanes|=d,ki|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Mt(r,e.memoizedState)||(je=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,oe.lanes|=s,ki|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function gu(n){var e=At(),t=e.queue;if(t===null)throw Error(x(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Mt(s,e.memoizedState)||(je=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function Om(){}function Rm(n,e){var t=oe,r=At(),i=e(),s=!Mt(r.memoizedState,i);if(s&&(r.memoizedState=i,je=!0),r=r.queue,Of(bm.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Te!==null&&Te.memoizedState.tag&1){if(t.flags|=2048,ho(9,Bm.bind(null,t,r,i,e),void 0,null),Ae===null)throw Error(x(349));Si&30||Lm(t,e,i)}return i}function Lm(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Bm(n,e,t,r){e.value=t,e.getSnapshot=r,Fm(e)&&Mm(n)}function bm(n,e,t){return t(function(){Fm(e)&&Mm(n)})}function Fm(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Mt(n,t)}catch{return!0}}function Mm(n){var e=wr(n,1);e!==null&&Bt(e,n,1,-1)}function eh(n){var e=Ut();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:n},e.queue=n,n=n.dispatch=B0.bind(null,oe,n),[e.memoizedState,n]}function ho(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function Jm(){return At().memoizedState}function ha(n,e,t,r){var i=Ut();oe.flags|=n,i.memoizedState=ho(1|e,t,void 0,r===void 0?null:r)}function Cl(n,e,t,r){var i=At();r=r===void 0?null:r;var s=void 0;if(ye!==null){var o=ye.memoizedState;if(s=o.destroy,r!==null&&Nf(r,o.deps)){i.memoizedState=ho(e,t,s,r);return}}oe.flags|=n,i.memoizedState=ho(1|e,t,s,r)}function th(n,e){return ha(8390656,8,n,e)}function Of(n,e){return Cl(2048,8,n,e)}function $m(n,e){return Cl(4,2,n,e)}function zm(n,e){return Cl(4,4,n,e)}function Um(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function jm(n,e,t){return t=t!=null?t.concat([n]):null,Cl(4,4,Um.bind(null,e,n),t)}function Rf(){}function Vm(n,e){var t=At();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Nf(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function qm(n,e){var t=At();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Nf(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function Km(n,e,t){return Si&21?(Mt(t,e)||(t=_g(),oe.lanes|=t,ki|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,je=!0),n.memoizedState=t)}function R0(n,e){var t=G;G=t!==0&&4>t?t:4,n(!0);var r=du.transition;du.transition={};try{n(!1),e()}finally{G=t,du.transition=r}}function Wm(){return At().memoizedState}function L0(n,e,t){var r=qr(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},Hm(n))_m(e,t);else if(t=Im(n,e,t,r),t!==null){var i=Je();Bt(t,n,r,i),Gm(t,e,r)}}function B0(n,e,t){var r=qr(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(Hm(n))_m(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Mt(a,o)){var l=e.interleaved;l===null?(i.next=i,Af(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=Im(n,e,i,r),t!==null&&(i=Je(),Bt(t,n,r,i),Gm(t,e,r))}}function Hm(n){var e=n.alternate;return n===oe||e!==null&&e===oe}function _m(n,e){js=ja=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Gm(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,uf(n,t)}}var Va={readContext:Tt,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useInsertionEffect:Pe,useLayoutEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useMutableSource:Pe,useSyncExternalStore:Pe,useId:Pe,unstable_isNewReconciler:!1},b0={readContext:Tt,useCallback:function(n,e){return Ut().memoizedState=[n,e===void 0?null:e],n},useContext:Tt,useEffect:th,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ha(4194308,4,Um.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ha(4194308,4,n,e)},useInsertionEffect:function(n,e){return ha(4,2,n,e)},useMemo:function(n,e){var t=Ut();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Ut();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=L0.bind(null,oe,n),[r.memoizedState,n]},useRef:function(n){var e=Ut();return n={current:n},e.memoizedState=n},useState:eh,useDebugValue:Rf,useDeferredValue:function(n){return Ut().memoizedState=n},useTransition:function(){var n=eh(!1),e=n[0];return n=R0.bind(null,n[1]),Ut().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=oe,i=Ut();if(te){if(t===void 0)throw Error(x(407));t=t()}else{if(t=e(),Ae===null)throw Error(x(349));Si&30||Lm(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,th(bm.bind(null,r,s,n),[n]),r.flags|=2048,ho(9,Bm.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Ut(),e=Ae.identifierPrefix;if(te){var t=cr,r=ur;t=(r&~(1<<32-Lt(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=co++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=O0++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},F0={readContext:Tt,useCallback:Vm,useContext:Tt,useEffect:Of,useImperativeHandle:jm,useInsertionEffect:$m,useLayoutEffect:zm,useMemo:qm,useReducer:hu,useRef:Jm,useState:function(){return hu(fo)},useDebugValue:Rf,useDeferredValue:function(n){var e=At();return Km(e,ye.memoizedState,n)},useTransition:function(){var n=hu(fo)[0],e=At().memoizedState;return[n,e]},useMutableSource:Om,useSyncExternalStore:Rm,useId:Wm,unstable_isNewReconciler:!1},M0={readContext:Tt,useCallback:Vm,useContext:Tt,useEffect:Of,useImperativeHandle:jm,useInsertionEffect:$m,useLayoutEffect:zm,useMemo:qm,useReducer:gu,useRef:Jm,useState:function(){return gu(fo)},useDebugValue:Rf,useDeferredValue:function(n){var e=At();return ye===null?e.memoizedState=n:Km(e,ye.memoizedState,n)},useTransition:function(){var n=gu(fo)[0],e=At().memoizedState;return[n,e]},useMutableSource:Om,useSyncExternalStore:Rm,useId:Wm,unstable_isNewReconciler:!1};function ls(n,e){try{var t="",r=e;do t+=fv(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function mu(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function ac(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var J0=typeof WeakMap=="function"?WeakMap:Map;function Ym(n,e,t){t=gr(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Ka||(Ka=!0,yc=r),ac(n,e)},t}function Qm(n,e,t){t=gr(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){ac(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){ac(n,e),typeof r!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function nh(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new J0;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=X0.bind(null,n,e,t),e.then(n,n))}function rh(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function ih(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=gr(-1,1),e.tag=2,jr(t,e,1))),t.lanes|=1),n)}var $0=Ar.ReactCurrentOwner,je=!1;function be(n,e,t,r){e.child=n===null?Pm(e,null,t,r):os(e,n.child,t,r)}function sh(n,e,t,r,i){t=t.render;var s=e.ref;return Xi(e,i),r=Pf(n,e,t,r,s,i),t=Df(),n!==null&&!je?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Sr(n,e,i)):(te&&t&&yf(e),e.flags|=1,be(n,e,r,i),e.child)}function oh(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!zf(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,Xm(n,e,s,r,i)):(n=ya(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:io,t(o,r)&&n.ref===e.ref)return Sr(n,e,i)}return e.flags|=1,n=Kr(s,r),n.ref=e.ref,n.return=e,e.child=n}function Xm(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(io(s,r)&&n.ref===e.ref)if(je=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(je=!0);else return e.lanes=n.lanes,Sr(n,e,i)}return lc(n,e,t,r,i)}function Zm(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},X(Ki,Ge),Ge|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,X(Ki,Ge),Ge|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,X(Ki,Ge),Ge|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,X(Ki,Ge),Ge|=r;return be(n,e,i,t),e.child}function ep(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function lc(n,e,t,r,i){var s=Ke(t)?vi:Le.current;return s=is(e,s),Xi(e,i),t=Pf(n,e,t,r,s,i),r=Df(),n!==null&&!je?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Sr(n,e,i)):(te&&r&&yf(e),e.flags|=1,be(n,e,t,i),e.child)}function ah(n,e,t,r,i){if(Ke(t)){var s=!0;ba(e)}else s=!1;if(Xi(e,i),e.stateNode===null)ga(n,e),Cm(e,t,r),oc(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Tt(c):(c=Ke(t)?vi:Le.current,c=is(e,c));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Xd(e,o,r,c),Or=!1;var m=e.memoizedState;o.state=m,za(e,r,o,i),l=e.memoizedState,a!==r||m!==l||qe.current||Or?(typeof d=="function"&&(sc(e,t,d,r),l=e.memoizedState),(a=Or||Qd(e,t,a,r,m,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Em(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ct(e.type,a),o.props=c,h=e.pendingProps,m=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Tt(l):(l=Ke(t)?vi:Le.current,l=is(e,l));var y=t.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==l)&&Xd(e,o,r,l),Or=!1,m=e.memoizedState,o.state=m,za(e,r,o,i);var w=e.memoizedState;a!==h||m!==w||qe.current||Or?(typeof y=="function"&&(sc(e,t,y,r),w=e.memoizedState),(c=Or||Qd(e,t,c,r,m,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),r=!1)}return uc(n,e,t,r,s,i)}function uc(n,e,t,r,i,s){ep(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Wd(e,t,!1),Sr(n,e,s);r=e.stateNode,$0.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=os(e,n.child,null,s),e.child=os(e,null,a,s)):be(n,e,a,s),e.memoizedState=r.state,i&&Wd(e,t,!0),e.child}function tp(n){var e=n.stateNode;e.pendingContext?Kd(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Kd(n,e.context,!1),Ef(n,e.containerInfo)}function lh(n,e,t,r,i){return ss(),wf(i),e.flags|=256,be(n,e,t,r),e.child}var cc={dehydrated:null,treeContext:null,retryLane:0};function fc(n){return{baseLanes:n,cachePool:null,transitions:null}}function np(n,e,t){var r=e.pendingProps,i=ie.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),X(ie,i&1),n===null)return rc(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Dl(o,r,0,null),n=mi(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=fc(t),e.memoizedState=cc,n):Lf(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return z0(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Kr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Kr(a,s):(s=mi(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?fc(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=cc,r}return s=n.child,n=s.sibling,r=Kr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Lf(n,e){return e=Dl({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Yo(n,e,t,r){return r!==null&&wf(r),os(e,n.child,null,t),n=Lf(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function z0(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=mu(Error(x(422))),Yo(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Dl({mode:"visible",children:r.children},i,0,null),s=mi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&os(e,n.child,null,o),e.child.memoizedState=fc(o),e.memoizedState=cc,s);if(!(e.mode&1))return Yo(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(x(419)),r=mu(s,r,void 0),Yo(n,e,o,r)}if(a=(o&n.childLanes)!==0,je||a){if(r=Ae,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,wr(n,i),Bt(r,n,i,-1))}return $f(),r=mu(Error(x(421))),Yo(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=Z0.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Ye=Ur(i.nextSibling),Ze=e,te=!0,Dt=null,n!==null&&(st[ot++]=ur,st[ot++]=cr,st[ot++]=wi,ur=n.id,cr=n.overflow,wi=e),e=Lf(e,r.children),e.flags|=4096,e)}function uh(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),ic(n.return,e,t)}function pu(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function rp(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(be(n,e,r.children,t),r=ie.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&uh(n,t,e);else if(n.tag===19)uh(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(X(ie,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Ua(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),pu(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Ua(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}pu(e,!0,t,null,s);break;case"together":pu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ga(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Sr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),ki|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(x(153));if(e.child!==null){for(n=e.child,t=Kr(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Kr(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function U0(n,e,t){switch(e.tag){case 3:tp(e),ss();break;case 5:Dm(e);break;case 1:Ke(e.type)&&ba(e);break;case 4:Ef(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;X(Ja,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(X(ie,ie.current&1),e.flags|=128,null):t&e.child.childLanes?np(n,e,t):(X(ie,ie.current&1),n=Sr(n,e,t),n!==null?n.sibling:null);X(ie,ie.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return rp(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),X(ie,ie.current),r)break;return null;case 22:case 23:return e.lanes=0,Zm(n,e,t)}return Sr(n,e,t)}var ip,dc,sp,op;ip=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};dc=function(){};sp=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,fi(nn.current);var s=null;switch(t){case"input":i=Bu(n,i),r=Bu(n,r),s=[];break;case"select":i=ae({},i,{value:void 0}),r=ae({},r,{value:void 0}),s=[];break;case"textarea":i=Mu(n,i),r=Mu(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=La)}$u(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Qs.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Qs.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Z("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};op=function(n,e,t,r){t!==r&&(e.flags|=4)};function Ns(n,e){if(!te)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function De(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function j0(n,e,t){var r=e.pendingProps;switch(vf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(e),null;case 1:return Ke(e.type)&&Ba(),De(e),null;case 3:return r=e.stateNode,as(),ee(qe),ee(Le),Cf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(_o(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dt!==null&&(Sc(Dt),Dt=null))),dc(n,e),De(e),null;case 5:xf(e);var i=fi(uo.current);if(t=e.type,n!==null&&e.stateNode!=null)sp(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(x(166));return De(e),null}if(n=fi(nn.current),_o(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[qt]=e,r[ao]=s,n=(e.mode&1)!==0,t){case"dialog":Z("cancel",r),Z("close",r);break;case"iframe":case"object":case"embed":Z("load",r);break;case"video":case"audio":for(i=0;i<bs.length;i++)Z(bs[i],r);break;case"source":Z("error",r);break;case"img":case"image":case"link":Z("error",r),Z("load",r);break;case"details":Z("toggle",r);break;case"input":vd(r,s),Z("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Z("invalid",r);break;case"textarea":Sd(r,s),Z("invalid",r)}$u(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ho(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ho(r.textContent,a,n),i=["children",""+a]):Qs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Z("scroll",r)}switch(t){case"input":$o(r),wd(r,s,!0);break;case"textarea":$o(r),kd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=La)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Lg(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[qt]=e,n[ao]=r,ip(n,e,!1,!1),e.stateNode=n;e:{switch(o=zu(t,r),t){case"dialog":Z("cancel",n),Z("close",n),i=r;break;case"iframe":case"object":case"embed":Z("load",n),i=r;break;case"video":case"audio":for(i=0;i<bs.length;i++)Z(bs[i],n);i=r;break;case"source":Z("error",n),i=r;break;case"img":case"image":case"link":Z("error",n),Z("load",n),i=r;break;case"details":Z("toggle",n),i=r;break;case"input":vd(n,r),i=Bu(n,r),Z("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=ae({},r,{value:void 0}),Z("invalid",n);break;case"textarea":Sd(n,r),i=Mu(n,r),Z("invalid",n);break;default:i=r}$u(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Fg(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Bg(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Xs(n,l):typeof l=="number"&&Xs(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qs.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Z("scroll",n):l!=null&&nf(n,s,l,o))}switch(t){case"input":$o(n),wd(n,r,!1);break;case"textarea":$o(n),kd(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Gr(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?_i(n,!!r.multiple,s,!1):r.defaultValue!=null&&_i(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=La)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return De(e),null;case 6:if(n&&e.stateNode!=null)op(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(x(166));if(t=fi(uo.current),fi(nn.current),_o(e)){if(r=e.stateNode,t=e.memoizedProps,r[qt]=e,(s=r.nodeValue!==t)&&(n=Ze,n!==null))switch(n.tag){case 3:Ho(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ho(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[qt]=e,e.stateNode=r}return De(e),null;case 13:if(ee(ie),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(te&&Ye!==null&&e.mode&1&&!(e.flags&128))Am(),ss(),e.flags|=98560,s=!1;else if(s=_o(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(x(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(x(317));s[qt]=e}else ss(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;De(e),s=!1}else Dt!==null&&(Sc(Dt),Dt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||ie.current&1?we===0&&(we=3):$f())),e.updateQueue!==null&&(e.flags|=4),De(e),null);case 4:return as(),dc(n,e),n===null&&so(e.stateNode.containerInfo),De(e),null;case 10:return Tf(e.type._context),De(e),null;case 17:return Ke(e.type)&&Ba(),De(e),null;case 19:if(ee(ie),s=e.memoizedState,s===null)return De(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ns(s,!1);else{if(we!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Ua(n),o!==null){for(e.flags|=128,Ns(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return X(ie,ie.current&1|2),e.child}n=n.sibling}s.tail!==null&&he()>us&&(e.flags|=128,r=!0,Ns(s,!1),e.lanes=4194304)}else{if(!r)if(n=Ua(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ns(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!te)return De(e),null}else 2*he()-s.renderingStartTime>us&&t!==1073741824&&(e.flags|=128,r=!0,Ns(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=he(),e.sibling=null,t=ie.current,X(ie,r?t&1|2:t&1),e):(De(e),null);case 22:case 23:return Jf(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ge&1073741824&&(De(e),e.subtreeFlags&6&&(e.flags|=8192)):De(e),null;case 24:return null;case 25:return null}throw Error(x(156,e.tag))}function V0(n,e){switch(vf(e),e.tag){case 1:return Ke(e.type)&&Ba(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return as(),ee(qe),ee(Le),Cf(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return xf(e),null;case 13:if(ee(ie),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(x(340));ss()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ee(ie),null;case 4:return as(),null;case 10:return Tf(e.type._context),null;case 22:case 23:return Jf(),null;case 24:return null;default:return null}}var Qo=!1,Oe=!1,q0=typeof WeakSet=="function"?WeakSet:Set,L=null;function qi(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){ue(n,e,r)}else t.current=null}function hc(n,e,t){try{t()}catch(r){ue(n,e,r)}}var ch=!1;function K0(n,e){if(Yu=Da,n=cm(),pf(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=n,m=null;t:for(;;){for(var y;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)m=h,h=y;for(;;){if(h===n)break t;if(m===t&&++c===i&&(a=o),m===s&&++d===r&&(l=o),(y=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=y}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Qu={focusedElem:n,selectionRange:t},Da=!1,L=e;L!==null;)if(e=L,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,L=n;else for(;L!==null;){e=L;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var T=w.memoizedProps,P=w.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?T:Ct(e.type,T),P);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(x(163))}}catch(I){ue(e,e.return,I)}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}return w=ch,ch=!1,w}function Vs(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&hc(e,t,s)}i=i.next}while(i!==r)}}function Nl(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function gc(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function ap(n){var e=n.alternate;e!==null&&(n.alternate=null,ap(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[qt],delete e[ao],delete e[ec],delete e[C0],delete e[N0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function lp(n){return n.tag===5||n.tag===3||n.tag===4}function fh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||lp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function mc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=La));else if(r!==4&&(n=n.child,n!==null))for(mc(n,e,t),n=n.sibling;n!==null;)mc(n,e,t),n=n.sibling}function pc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(pc(n,e,t),n=n.sibling;n!==null;)pc(n,e,t),n=n.sibling}var Ie=null,Pt=!1;function xr(n,e,t){for(t=t.child;t!==null;)up(n,e,t),t=t.sibling}function up(n,e,t){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Sl,t)}catch{}switch(t.tag){case 5:Oe||qi(t,e);case 6:var r=Ie,i=Pt;Ie=null,xr(n,e,t),Ie=r,Pt=i,Ie!==null&&(Pt?(n=Ie,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ie.removeChild(t.stateNode));break;case 18:Ie!==null&&(Pt?(n=Ie,t=t.stateNode,n.nodeType===8?uu(n.parentNode,t):n.nodeType===1&&uu(n,t),no(n)):uu(Ie,t.stateNode));break;case 4:r=Ie,i=Pt,Ie=t.stateNode.containerInfo,Pt=!0,xr(n,e,t),Ie=r,Pt=i;break;case 0:case 11:case 14:case 15:if(!Oe&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&hc(t,e,o),i=i.next}while(i!==r)}xr(n,e,t);break;case 1:if(!Oe&&(qi(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){ue(t,e,a)}xr(n,e,t);break;case 21:xr(n,e,t);break;case 22:t.mode&1?(Oe=(r=Oe)||t.memoizedState!==null,xr(n,e,t),Oe=r):xr(n,e,t);break;default:xr(n,e,t)}}function dh(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new q0),e.forEach(function(r){var i=ew.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function xt(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ie=a.stateNode,Pt=!1;break e;case 3:Ie=a.stateNode.containerInfo,Pt=!0;break e;case 4:Ie=a.stateNode.containerInfo,Pt=!0;break e}a=a.return}if(Ie===null)throw Error(x(160));up(s,o,i),Ie=null,Pt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ue(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cp(e,n),e=e.sibling}function cp(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(xt(e,n),zt(n),r&4){try{Vs(3,n,n.return),Nl(3,n)}catch(T){ue(n,n.return,T)}try{Vs(5,n,n.return)}catch(T){ue(n,n.return,T)}}break;case 1:xt(e,n),zt(n),r&512&&t!==null&&qi(t,t.return);break;case 5:if(xt(e,n),zt(n),r&512&&t!==null&&qi(t,t.return),n.flags&32){var i=n.stateNode;try{Xs(i,"")}catch(T){ue(n,n.return,T)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Og(i,s),zu(a,o);var c=zu(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Fg(i,h):d==="dangerouslySetInnerHTML"?Bg(i,h):d==="children"?Xs(i,h):nf(i,d,h,c)}switch(a){case"input":bu(i,s);break;case"textarea":Rg(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?_i(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?_i(i,!!s.multiple,s.defaultValue,!0):_i(i,!!s.multiple,s.multiple?[]:"",!1))}i[ao]=s}catch(T){ue(n,n.return,T)}}break;case 6:if(xt(e,n),zt(n),r&4){if(n.stateNode===null)throw Error(x(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(T){ue(n,n.return,T)}}break;case 3:if(xt(e,n),zt(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{no(e.containerInfo)}catch(T){ue(n,n.return,T)}break;case 4:xt(e,n),zt(n);break;case 13:xt(e,n),zt(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ff=he())),r&4&&dh(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Oe=(c=Oe)||d,xt(e,n),Oe=c):xt(e,n),zt(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(L=n,d=n.child;d!==null;){for(h=L=d;L!==null;){switch(m=L,y=m.child,m.tag){case 0:case 11:case 14:case 15:Vs(4,m,m.return);break;case 1:qi(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){r=m,t=m.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(T){ue(r,t,T)}}break;case 5:qi(m,m.return);break;case 22:if(m.memoizedState!==null){gh(h);continue}}y!==null?(y.return=m,L=y):gh(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=bg("display",o))}catch(T){ue(n,n.return,T)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(T){ue(n,n.return,T)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:xt(e,n),zt(n),r&4&&dh(n);break;case 21:break;default:xt(e,n),zt(n)}}function zt(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(lp(t)){var r=t;break e}t=t.return}throw Error(x(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Xs(i,""),r.flags&=-33);var s=fh(n);pc(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=fh(n);mc(n,a,o);break;default:throw Error(x(161))}}catch(l){ue(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function W0(n,e,t){L=n,fp(n)}function fp(n,e,t){for(var r=(n.mode&1)!==0;L!==null;){var i=L,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Qo;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Oe;a=Qo;var c=Oe;if(Qo=o,(Oe=l)&&!c)for(L=i;L!==null;)o=L,l=o.child,o.tag===22&&o.memoizedState!==null?mh(i):l!==null?(l.return=o,L=l):mh(i);for(;s!==null;)L=s,fp(s),s=s.sibling;L=i,Qo=a,Oe=c}hh(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,L=s):hh(n)}}function hh(n){for(;L!==null;){var e=L;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Oe||Nl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Oe)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Ct(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Yd(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Yd(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&no(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(x(163))}Oe||e.flags&512&&gc(e)}catch(m){ue(e,e.return,m)}}if(e===n){L=null;break}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}}function gh(n){for(;L!==null;){var e=L;if(e===n){L=null;break}var t=e.sibling;if(t!==null){t.return=e.return,L=t;break}L=e.return}}function mh(n){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Nl(4,e)}catch(l){ue(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ue(e,i,l)}}var s=e.return;try{gc(e)}catch(l){ue(e,s,l)}break;case 5:var o=e.return;try{gc(e)}catch(l){ue(e,o,l)}}}catch(l){ue(e,e.return,l)}if(e===n){L=null;break}var a=e.sibling;if(a!==null){a.return=e.return,L=a;break}L=e.return}}var H0=Math.ceil,qa=Ar.ReactCurrentDispatcher,Bf=Ar.ReactCurrentOwner,St=Ar.ReactCurrentBatchConfig,W=0,Ae=null,pe=null,xe=0,Ge=0,Ki=ti(0),we=0,go=null,ki=0,Pl=0,bf=0,qs=null,Ue=null,Ff=0,us=1/0,on=null,Ka=!1,yc=null,Vr=null,Xo=!1,br=null,Wa=0,Ks=0,vc=null,ma=-1,pa=0;function Je(){return W&6?he():ma!==-1?ma:ma=he()}function qr(n){return n.mode&1?W&2&&xe!==0?xe&-xe:D0.transition!==null?(pa===0&&(pa=_g()),pa):(n=G,n!==0||(n=window.event,n=n===void 0?16:tm(n.type)),n):1}function Bt(n,e,t,r){if(50<Ks)throw Ks=0,vc=null,Error(x(185));xo(n,t,r),(!(W&2)||n!==Ae)&&(n===Ae&&(!(W&2)&&(Pl|=t),we===4&&Lr(n,xe)),We(n,r),t===1&&W===0&&!(e.mode&1)&&(us=he()+500,El&&ni()))}function We(n,e){var t=n.callbackNode;Dv(n,e);var r=Pa(n,n===Ae?xe:0);if(r===0)t!==null&&Id(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Id(t),e===1)n.tag===0?P0(ph.bind(null,n)):Sm(ph.bind(null,n)),E0(function(){!(W&6)&&ni()}),t=null;else{switch(Gg(r)){case 1:t=lf;break;case 4:t=Wg;break;case 16:t=Na;break;case 536870912:t=Hg;break;default:t=Na}t=wp(t,dp.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function dp(n,e){if(ma=-1,pa=0,W&6)throw Error(x(327));var t=n.callbackNode;if(Zi()&&n.callbackNode!==t)return null;var r=Pa(n,n===Ae?xe:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Ha(n,r);else{e=r;var i=W;W|=2;var s=gp();(Ae!==n||xe!==e)&&(on=null,us=he()+500,gi(n,e));do try{Y0();break}catch(a){hp(n,a)}while(!0);kf(),qa.current=s,W=i,pe!==null?e=0:(Ae=null,xe=0,e=we)}if(e!==0){if(e===2&&(i=Ku(n),i!==0&&(r=i,e=wc(n,i))),e===1)throw t=go,gi(n,0),Lr(n,r),We(n,he()),t;if(e===6)Lr(n,r);else{if(i=n.current.alternate,!(r&30)&&!_0(i)&&(e=Ha(n,r),e===2&&(s=Ku(n),s!==0&&(r=s,e=wc(n,s))),e===1))throw t=go,gi(n,0),Lr(n,r),We(n,he()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(x(345));case 2:oi(n,Ue,on);break;case 3:if(Lr(n,r),(r&130023424)===r&&(e=Ff+500-he(),10<e)){if(Pa(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Je(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Zu(oi.bind(null,n,Ue,on),e);break}oi(n,Ue,on);break;case 4:if(Lr(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Lt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=he()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*H0(r/1960))-r,10<r){n.timeoutHandle=Zu(oi.bind(null,n,Ue,on),r);break}oi(n,Ue,on);break;case 5:oi(n,Ue,on);break;default:throw Error(x(329))}}}return We(n,he()),n.callbackNode===t?dp.bind(null,n):null}function wc(n,e){var t=qs;return n.current.memoizedState.isDehydrated&&(gi(n,e).flags|=256),n=Ha(n,e),n!==2&&(e=Ue,Ue=t,e!==null&&Sc(e)),n}function Sc(n){Ue===null?Ue=n:Ue.push.apply(Ue,n)}function _0(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Mt(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Lr(n,e){for(e&=~bf,e&=~Pl,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Lt(e),r=1<<t;n[t]=-1,e&=~r}}function ph(n){if(W&6)throw Error(x(327));Zi();var e=Pa(n,0);if(!(e&1))return We(n,he()),null;var t=Ha(n,e);if(n.tag!==0&&t===2){var r=Ku(n);r!==0&&(e=r,t=wc(n,r))}if(t===1)throw t=go,gi(n,0),Lr(n,e),We(n,he()),t;if(t===6)throw Error(x(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,oi(n,Ue,on),We(n,he()),null}function Mf(n,e){var t=W;W|=1;try{return n(e)}finally{W=t,W===0&&(us=he()+500,El&&ni())}}function Ti(n){br!==null&&br.tag===0&&!(W&6)&&Zi();var e=W;W|=1;var t=St.transition,r=G;try{if(St.transition=null,G=1,n)return n()}finally{G=r,St.transition=t,W=e,!(W&6)&&ni()}}function Jf(){Ge=Ki.current,ee(Ki)}function gi(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,I0(t)),pe!==null)for(t=pe.return;t!==null;){var r=t;switch(vf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ba();break;case 3:as(),ee(qe),ee(Le),Cf();break;case 5:xf(r);break;case 4:as();break;case 13:ee(ie);break;case 19:ee(ie);break;case 10:Tf(r.type._context);break;case 22:case 23:Jf()}t=t.return}if(Ae=n,pe=n=Kr(n.current,null),xe=Ge=e,we=0,go=null,bf=Pl=ki=0,Ue=qs=null,ci!==null){for(e=0;e<ci.length;e++)if(t=ci[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}ci=null}return n}function hp(n,e){do{var t=pe;try{if(kf(),da.current=Va,ja){for(var r=oe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ja=!1}if(Si=0,Te=ye=oe=null,js=!1,co=0,Bf.current=null,t===null||t.return===null){we=1,go=e,pe=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=xe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=rh(o);if(y!==null){y.flags&=-257,ih(y,o,a,s,e),y.mode&1&&nh(s,c,e),e=y,l=c;var w=e.updateQueue;if(w===null){var T=new Set;T.add(l),e.updateQueue=T}else w.add(l);break e}else{if(!(e&1)){nh(s,c,e),$f();break e}l=Error(x(426))}}else if(te&&a.mode&1){var P=rh(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),ih(P,o,a,s,e),wf(ls(l,a));break e}}s=l=ls(l,a),we!==4&&(we=2),qs===null?qs=[s]:qs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Ym(s,l,e);Gd(s,p);break e;case 1:a=l;var g=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Vr===null||!Vr.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=Qm(s,a,e);Gd(s,I);break e}}s=s.return}while(s!==null)}pp(t)}catch(E){e=E,pe===t&&t!==null&&(pe=t=t.return);continue}break}while(!0)}function gp(){var n=qa.current;return qa.current=Va,n===null?Va:n}function $f(){(we===0||we===3||we===2)&&(we=4),Ae===null||!(ki&268435455)&&!(Pl&268435455)||Lr(Ae,xe)}function Ha(n,e){var t=W;W|=2;var r=gp();(Ae!==n||xe!==e)&&(on=null,gi(n,e));do try{G0();break}catch(i){hp(n,i)}while(!0);if(kf(),W=t,qa.current=r,pe!==null)throw Error(x(261));return Ae=null,xe=0,we}function G0(){for(;pe!==null;)mp(pe)}function Y0(){for(;pe!==null&&!kv();)mp(pe)}function mp(n){var e=vp(n.alternate,n,Ge);n.memoizedProps=n.pendingProps,e===null?pp(n):pe=e,Bf.current=null}function pp(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=V0(t,e),t!==null){t.flags&=32767,pe=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{we=6,pe=null;return}}else if(t=j0(t,e,Ge),t!==null){pe=t;return}if(e=e.sibling,e!==null){pe=e;return}pe=e=n}while(e!==null);we===0&&(we=5)}function oi(n,e,t){var r=G,i=St.transition;try{St.transition=null,G=1,Q0(n,e,t,r)}finally{St.transition=i,G=r}return null}function Q0(n,e,t,r){do Zi();while(br!==null);if(W&6)throw Error(x(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(x(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(Ov(n,s),n===Ae&&(pe=Ae=null,xe=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Xo||(Xo=!0,wp(Na,function(){return Zi(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=St.transition,St.transition=null;var o=G;G=1;var a=W;W|=4,Bf.current=null,K0(n,t),cp(t,n),y0(Qu),Da=!!Yu,Qu=Yu=null,n.current=t,W0(t),Tv(),W=a,G=o,St.transition=s}else n.current=t;if(Xo&&(Xo=!1,br=n,Wa=i),s=n.pendingLanes,s===0&&(Vr=null),Ev(t.stateNode),We(n,he()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ka)throw Ka=!1,n=yc,yc=null,n;return Wa&1&&n.tag!==0&&Zi(),s=n.pendingLanes,s&1?n===vc?Ks++:(Ks=0,vc=n):Ks=0,ni(),null}function Zi(){if(br!==null){var n=Gg(Wa),e=St.transition,t=G;try{if(St.transition=null,G=16>n?16:n,br===null)var r=!1;else{if(n=br,br=null,Wa=0,W&6)throw Error(x(331));var i=W;for(W|=4,L=n.current;L!==null;){var s=L,o=s.child;if(L.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(L=c;L!==null;){var d=L;switch(d.tag){case 0:case 11:case 15:Vs(8,d,s)}var h=d.child;if(h!==null)h.return=d,L=h;else for(;L!==null;){d=L;var m=d.sibling,y=d.return;if(ap(d),d===c){L=null;break}if(m!==null){m.return=y,L=m;break}L=y}}}var w=s.alternate;if(w!==null){var T=w.child;if(T!==null){w.child=null;do{var P=T.sibling;T.sibling=null,T=P}while(T!==null)}}L=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,L=o;else e:for(;L!==null;){if(s=L,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Vs(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,L=p;break e}L=s.return}}var g=n.current;for(L=g;L!==null;){o=L;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,L=v;else e:for(o=g;L!==null;){if(a=L,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Nl(9,a)}}catch(E){ue(a,a.return,E)}if(a===o){L=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,L=I;break e}L=a.return}}if(W=i,ni(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Sl,n)}catch{}r=!0}return r}finally{G=t,St.transition=e}}return!1}function yh(n,e,t){e=ls(t,e),e=Ym(n,e,1),n=jr(n,e,1),e=Je(),n!==null&&(xo(n,1,e),We(n,e))}function ue(n,e,t){if(n.tag===3)yh(n,n,t);else for(;e!==null;){if(e.tag===3){yh(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vr===null||!Vr.has(r))){n=ls(t,n),n=Qm(e,n,1),e=jr(e,n,1),n=Je(),e!==null&&(xo(e,1,n),We(e,n));break}}e=e.return}}function X0(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Je(),n.pingedLanes|=n.suspendedLanes&t,Ae===n&&(xe&t)===t&&(we===4||we===3&&(xe&130023424)===xe&&500>he()-Ff?gi(n,0):bf|=t),We(n,e)}function yp(n,e){e===0&&(n.mode&1?(e=jo,jo<<=1,!(jo&130023424)&&(jo=4194304)):e=1);var t=Je();n=wr(n,e),n!==null&&(xo(n,e,t),We(n,t))}function Z0(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),yp(n,t)}function ew(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(x(314))}r!==null&&r.delete(e),yp(n,t)}var vp;vp=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||qe.current)je=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return je=!1,U0(n,e,t);je=!!(n.flags&131072)}else je=!1,te&&e.flags&1048576&&km(e,Ma,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ga(n,e),n=e.pendingProps;var i=is(e,Le.current);Xi(e,t),i=Pf(null,e,r,n,i,t);var s=Df();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ke(r)?(s=!0,ba(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,If(e),i.updater=xl,e.stateNode=i,i._reactInternals=e,oc(e,r,n,t),e=uc(null,e,r,!0,s,t)):(e.tag=0,te&&s&&yf(e),be(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(ga(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=nw(r),n=Ct(r,n),i){case 0:e=lc(null,e,r,n,t);break e;case 1:e=ah(null,e,r,n,t);break e;case 11:e=sh(null,e,r,n,t);break e;case 14:e=oh(null,e,r,Ct(r.type,n),t);break e}throw Error(x(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ct(r,i),lc(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ct(r,i),ah(n,e,r,i,t);case 3:e:{if(tp(e),n===null)throw Error(x(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Em(n,e),za(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ls(Error(x(423)),e),e=lh(n,e,r,t,i);break e}else if(r!==i){i=ls(Error(x(424)),e),e=lh(n,e,r,t,i);break e}else for(Ye=Ur(e.stateNode.containerInfo.firstChild),Ze=e,te=!0,Dt=null,t=Pm(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(ss(),r===i){e=Sr(n,e,t);break e}be(n,e,r,t)}e=e.child}return e;case 5:return Dm(e),n===null&&rc(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,Xu(r,i)?o=null:s!==null&&Xu(r,s)&&(e.flags|=32),ep(n,e),be(n,e,o,t),e.child;case 6:return n===null&&rc(e),null;case 13:return np(n,e,t);case 4:return Ef(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=os(e,null,r,t):be(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ct(r,i),sh(n,e,r,i,t);case 7:return be(n,e,e.pendingProps,t),e.child;case 8:return be(n,e,e.pendingProps.children,t),e.child;case 12:return be(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,X(Ja,r._currentValue),r._currentValue=o,s!==null)if(Mt(s.value,o)){if(s.children===i.children&&!qe.current){e=Sr(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=gr(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),ic(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(x(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),ic(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}be(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Xi(e,t),i=Tt(i),r=r(i),e.flags|=1,be(n,e,r,t),e.child;case 14:return r=e.type,i=Ct(r,e.pendingProps),i=Ct(r.type,i),oh(n,e,r,i,t);case 15:return Xm(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ct(r,i),ga(n,e),e.tag=1,Ke(r)?(n=!0,ba(e)):n=!1,Xi(e,t),Cm(e,r,i),oc(e,r,i,t),uc(null,e,r,!0,n,t);case 19:return rp(n,e,t);case 22:return Zm(n,e,t)}throw Error(x(156,e.tag))};function wp(n,e){return Kg(n,e)}function tw(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yt(n,e,t,r){return new tw(n,e,t,r)}function zf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function nw(n){if(typeof n=="function")return zf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===sf)return 11;if(n===of)return 14}return 2}function Kr(n,e){var t=n.alternate;return t===null?(t=yt(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function ya(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")zf(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case bi:return mi(t.children,i,s,e);case rf:o=8,i|=8;break;case Du:return n=yt(12,t,e,i|2),n.elementType=Du,n.lanes=s,n;case Ou:return n=yt(13,t,e,i),n.elementType=Ou,n.lanes=s,n;case Ru:return n=yt(19,t,e,i),n.elementType=Ru,n.lanes=s,n;case Ng:return Dl(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case xg:o=10;break e;case Cg:o=9;break e;case sf:o=11;break e;case of:o=14;break e;case Dr:o=16,r=null;break e}throw Error(x(130,n==null?n:typeof n,""))}return e=yt(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function mi(n,e,t,r){return n=yt(7,n,r,e),n.lanes=t,n}function Dl(n,e,t,r){return n=yt(22,n,r,e),n.elementType=Ng,n.lanes=t,n.stateNode={isHidden:!1},n}function yu(n,e,t){return n=yt(6,n,null,e),n.lanes=t,n}function vu(n,e,t){return e=yt(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function rw(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xl(0),this.expirationTimes=Xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uf(n,e,t,r,i,s,o,a,l){return n=new rw(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=yt(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},If(s),n}function iw(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bi,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function Sp(n){if(!n)return Yr;n=n._reactInternals;e:{if(Ci(n)!==n||n.tag!==1)throw Error(x(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ke(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(x(171))}if(n.tag===1){var t=n.type;if(Ke(t))return wm(n,t,e)}return e}function kp(n,e,t,r,i,s,o,a,l){return n=Uf(t,r,!0,n,i,s,o,a,l),n.context=Sp(null),t=n.current,r=Je(),i=qr(t),s=gr(r,i),s.callback=e??null,jr(t,s,i),n.current.lanes=i,xo(n,i,r),We(n,r),n}function Ol(n,e,t,r){var i=e.current,s=Je(),o=qr(i);return t=Sp(t),e.context===null?e.context=t:e.pendingContext=t,e=gr(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=jr(i,e,o),n!==null&&(Bt(n,i,o,s),fa(n,i,o)),o}function _a(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function vh(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function jf(n,e){vh(n,e),(n=n.alternate)&&vh(n,e)}function sw(){return null}var Tp=typeof reportError=="function"?reportError:function(n){console.error(n)};function Vf(n){this._internalRoot=n}Rl.prototype.render=Vf.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(x(409));Ol(n,e,null,null)};Rl.prototype.unmount=Vf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ti(function(){Ol(null,n,null,null)}),e[vr]=null}};function Rl(n){this._internalRoot=n}Rl.prototype.unstable_scheduleHydration=function(n){if(n){var e=Xg();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Rr.length&&e!==0&&e<Rr[t].priority;t++);Rr.splice(t,0,n),t===0&&em(n)}};function qf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ll(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function wh(){}function ow(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=_a(o);s.call(c)}}var o=kp(e,r,n,0,null,!1,!1,"",wh);return n._reactRootContainer=o,n[vr]=o.current,so(n.nodeType===8?n.parentNode:n),Ti(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=_a(l);a.call(c)}}var l=Uf(n,0,!1,null,null,!1,!1,"",wh);return n._reactRootContainer=l,n[vr]=l.current,so(n.nodeType===8?n.parentNode:n),Ti(function(){Ol(e,l,t,r)}),l}function Bl(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=_a(o);a.call(l)}}Ol(e,o,n,i)}else o=ow(t,e,n,i,r);return _a(o)}Yg=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Bs(e.pendingLanes);t!==0&&(uf(e,t|1),We(e,he()),!(W&6)&&(us=he()+500,ni()))}break;case 13:Ti(function(){var r=wr(n,1);if(r!==null){var i=Je();Bt(r,n,1,i)}}),jf(n,1)}};cf=function(n){if(n.tag===13){var e=wr(n,134217728);if(e!==null){var t=Je();Bt(e,n,134217728,t)}jf(n,134217728)}};Qg=function(n){if(n.tag===13){var e=qr(n),t=wr(n,e);if(t!==null){var r=Je();Bt(t,n,e,r)}jf(n,e)}};Xg=function(){return G};Zg=function(n,e){var t=G;try{return G=n,e()}finally{G=t}};ju=function(n,e,t){switch(e){case"input":if(bu(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Il(r);if(!i)throw Error(x(90));Dg(r),bu(r,i)}}}break;case"textarea":Rg(n,t);break;case"select":e=t.value,e!=null&&_i(n,!!t.multiple,e,!1)}};$g=Mf;zg=Ti;var aw={usingClientEntryPoint:!1,Events:[No,$i,Il,Mg,Jg,Mf]},Ps={findFiberByHostInstance:ui,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},lw={bundleType:Ps.bundleType,version:Ps.version,rendererPackageName:Ps.rendererPackageName,rendererConfig:Ps.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Vg(n),n===null?null:n.stateNode},findFiberByHostInstance:Ps.findFiberByHostInstance||sw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zo.isDisabled&&Zo.supportsFiber)try{Sl=Zo.inject(lw),tn=Zo}catch{}}rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aw;rt.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qf(e))throw Error(x(200));return iw(n,e,null,t)};rt.createRoot=function(n,e){if(!qf(n))throw Error(x(299));var t=!1,r="",i=Tp;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Uf(n,1,!1,null,null,t,!1,r,i),n[vr]=e.current,so(n.nodeType===8?n.parentNode:n),new Vf(e)};rt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(x(188)):(n=Object.keys(n).join(","),Error(x(268,n)));return n=Vg(e),n=n===null?null:n.stateNode,n};rt.flushSync=function(n){return Ti(n)};rt.hydrate=function(n,e,t){if(!Ll(e))throw Error(x(200));return Bl(null,n,e,!0,t)};rt.hydrateRoot=function(n,e,t){if(!qf(n))throw Error(x(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=Tp;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=kp(e,null,n,1,t??null,i,!1,s,o),n[vr]=e.current,so(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Rl(e)};rt.render=function(n,e,t){if(!Ll(e))throw Error(x(200));return Bl(null,n,e,!1,t)};rt.unmountComponentAtNode=function(n){if(!Ll(n))throw Error(x(40));return n._reactRootContainer?(Ti(function(){Bl(null,null,n,!1,function(){n._reactRootContainer=null,n[vr]=null})}),!0):!1};rt.unstable_batchedUpdates=Mf;rt.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Ll(t))throw Error(x(200));if(n==null||n._reactInternals===void 0)throw Error(x(38));return Bl(n,e,t,!1,r)};rt.version="18.2.0-next-9e3b772b8-20220608";function Ap(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ap)}catch(n){console.error(n)}}Ap(),kg.exports=rt;var uw=kg.exports,Sh=uw;Nu.createRoot=Sh.createRoot,Nu.hydrateRoot=Sh.hydrateRoot;var _;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(_||(_={}));function kh(n){const e=_[n];return typeof e!="string"?n.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class ne extends Error{constructor(e,t=_.Unknown,r,i,s){super(cw(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(r??{}),this.details=i??[],this.cause=s}static from(e,t=_.Unknown){return e instanceof ne?e:e instanceof Error?e.name=="AbortError"?new ne(e.message,_.Canceled):new ne(e.message,t,void 0,void 0,e):new ne(String(e),t,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===ne.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const t="typeName"in e?{findMessage:i=>i===e.typeName?e:void 0}:e,r=[];for(const i of this.details){if("getType"in i){t.findMessage(i.getType().typeName)&&r.push(i);continue}const s=t.findMessage(i.type);if(s)try{r.push(s.fromBinary(i.value))}catch{}}return r}}function cw(n,e){return n.length?`[${kh(e)}] ${n}`:`[${kh(e)}]`}function ce(n,e){if(!n)throw new Error(e)}const fw=34028234663852886e22,dw=-34028234663852886e22,hw=4294967295,gw=2147483647,mw=-2147483648;function va(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>gw||n<mw)throw new Error("invalid int 32: "+n)}function kc(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>hw||n<0)throw new Error("invalid uint 32: "+n)}function Ip(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>fw||n<dw))throw new Error("invalid float 32: "+n)}const Ep=Symbol("@bufbuild/protobuf/enum-type");function pw(n){const e=n[Ep];return ce(e,"missing enum type on enum object"),e}function xp(n,e,t,r){n[Ep]=Cp(e,t.map(i=>({no:i.no,name:i.name,localName:n[i.no]})))}function Cp(n,e,t){const r=Object.create(null),i=Object.create(null),s=[];for(const o of e){const a=Np(o);s.push(a),r[o.name]=a,i[o.no]=a}return{typeName:n,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function yw(n,e,t){const r={};for(const i of e){const s=Np(i);r[s.localName]=s.no,r[s.no]=s.localName}return xp(r,n,e),r}function Np(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class O{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(t);return i.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,t){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(t);return i.readMessage(r,e,s,this),this}fromJsonString(e,t){let r;try{r=JSON.parse(e)}catch(i){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${i instanceof Error?i.message:String(i)}`)}return this.fromJson(r,t)}toBinary(e){const t=this.getType(),r=t.runtime.bin,i=r.makeWriteOptions(e),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(e){const t=this.getType(),r=t.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var t;const r=this.toJson(e);return JSON.stringify(r,null,(t=e==null?void 0:e.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function vw(n,e,t,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),o={[s]:function(a){n.util.initFields(this),n.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(o.prototype,new O),Object.assign(o,{runtime:n,typeName:e,fields:n.util.newFieldList(t),fromBinary(a,l){return new o().fromBinary(a,l)},fromJson(a,l){return new o().fromJson(a,l)},fromJsonString(a,l){return new o().fromJsonString(a,l)},equals(a,l){return n.util.equals(o,a,l)}}),o}function ww(){let n=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(n|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}let t=this.buf[this.pos++];if(n|=(t&15)<<28,e=(t&112)>>4,!(t&128))return this.assertBounds(),[n,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}throw new Error("invalid varint")}function wu(n,e,t){for(let s=0;s<28;s=s+7){const o=n>>>s,a=!(!(o>>>7)&&e==0),l=(a?o|128:o)&255;if(t.push(l),!a)return}const r=n>>>28&15|(e&7)<<4,i=!!(e>>3);if(t.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),l=(a?o|128:o)&255;if(t.push(l),!a)return}t.push(e>>>31&1)}}const wa=4294967296;function Th(n){const e=n[0]==="-";e&&(n=n.slice(1));const t=1e6;let r=0,i=0;function s(o,a){const l=Number(n.slice(o,a));i*=t,r=r*t+l,r>=wa&&(i=i+(r/wa|0),r=r%wa)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?Dp(r,i):Kf(r,i)}function Sw(n,e){let t=Kf(n,e);const r=t.hi&2147483648;r&&(t=Dp(t.lo,t.hi));const i=Pp(t.lo,t.hi);return r?"-"+i:i}function Pp(n,e){if({lo:n,hi:e}=kw(n,e),e<=2097151)return String(wa*e+n);const t=n&16777215,r=(n>>>24|e<<8)&16777215,i=e>>16&65535;let s=t+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const l=1e7;return s>=l&&(o+=Math.floor(s/l),s%=l),o>=l&&(a+=Math.floor(o/l),o%=l),a.toString()+Ah(o)+Ah(s)}function kw(n,e){return{lo:n>>>0,hi:e>>>0}}function Kf(n,e){return{lo:n|0,hi:e|0}}function Dp(n,e){return e=~e,n?n=~n+1:e+=1,Kf(n,e)}const Ah=n=>{const e=String(n);return"0000000".slice(e.length)+e};function Ih(n,e){if(n>=0){for(;n>127;)e.push(n&127|128),n=n>>>7;e.push(n)}else{for(let t=0;t<9;t++)e.push(n&127|128),n=n>>7;e.push(1)}}function Tw(){let n=this.buf[this.pos++],e=n&127;if(!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<7,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<14,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<21,!(n&128))return this.assertBounds(),e;n=this.buf[this.pos++],e|=(n&15)<<28;for(let t=5;n&128&&t<10;t++)n=this.buf[this.pos++];if(n&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var Eh={};function Aw(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof Eh!="object"||Eh.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>s||c<i)throw new Error(`int64 invalid: ${l}`);return c},uParse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>a||c<o)throw new Error(`uint64 invalid: ${l}`);return c},enc(l){return n.setBigInt64(0,this.parse(l),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(l){return n.setBigInt64(0,this.uParse(l),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(l,c){return n.setInt32(0,l,!0),n.setInt32(4,c,!0),n.getBigInt64(0,!0)},uDec(l,c){return n.setInt32(0,l,!0),n.setInt32(4,c,!0),n.getBigUint64(0,!0)}}}const t=i=>ce(/^-?[0-9]+$/.test(i),`int64 invalid: ${i}`),r=i=>ce(/^[0-9]+$/.test(i),`uint64 invalid: ${i}`);return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),t(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),t(i),Th(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),Th(i)},dec(i,s){return Sw(i,s)},uDec(i,s){return Pp(i,s)}}}const re=Aw();var A;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(A||(A={}));var Qr;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(Qr||(Qr={}));function Cr(n,e,t){if(e===t)return!0;if(n==A.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}switch(n){case A.UINT64:case A.FIXED64:case A.INT64:case A.SFIXED64:case A.SINT64:return e==t}return!1}function cs(n,e){switch(n){case A.BOOL:return!1;case A.UINT64:case A.FIXED64:case A.INT64:case A.SFIXED64:case A.SINT64:return e==0?re.zero:"0";case A.DOUBLE:case A.FLOAT:return 0;case A.BYTES:return new Uint8Array(0);case A.STRING:return"";default:return 0}}function Op(n,e){switch(n){case A.BOOL:return e===!1;case A.STRING:return e==="";case A.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var ge;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(ge||(ge={}));class Iw{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(kc(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return va(e),Ih(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){Ip(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){kc(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){va(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return va(e),e=(e<<1^e>>31)>>>0,Ih(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=re.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=re.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=re.enc(e);return wu(t.lo,t.hi,this.buf),this}sint64(e){let t=re.enc(e),r=t.hi>>31,i=t.lo<<1^r,s=(t.hi<<1|t.lo>>>31)^r;return wu(i,s,this.buf),this}uint64(e){let t=re.uEnc(e);return wu(t.lo,t.hi,this.buf),this}}class Ew{constructor(e,t){this.varint64=ww,this.uint32=Tw,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t??new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,r=e&7;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(e,t){let r=this.pos;switch(e){case ge.Varint:for(;this.buf[this.pos++]&128;);break;case ge.Bit64:this.pos+=4;case ge.Bit32:this.pos+=4;break;case ge.LengthDelimited:let i=this.uint32();this.pos+=i;break;case ge.StartGroup:for(;;){const[s,o]=this.tag();if(o===ge.EndGroup){if(t!==void 0&&s!==t)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return re.dec(...this.varint64())}uint64(){return re.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),r=-(e&1);return e=(e>>>1|(t&1)<<31)^r,t=t>>>1^r,re.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return re.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return re.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function xw(n,e,t,r){let i;return{typeName:e,extendee:t,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=e.split(".").pop(),s.jsonName=`[${e}]`,i=n.util.newFieldList([s]).list()[0]}return i},runtime:n}}function Rp(n){const e=n.field.localName,t=Object.create(null);return t[e]=Cw(n),[t,()=>t[e]]}function Cw(n){const e=n.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return cs(e.T,e.L);case"message":const t=e.T,r=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function Nw(n,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let t=n.length-1;t>=0;--t)if(n[t].no==e.no)return[n[t]];return[]}return n.filter(t=>t.no===e.no)}let lr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),bl=[];for(let n=0;n<lr.length;n++)bl[lr[n].charCodeAt(0)]=n;bl[45]=lr.indexOf("+");bl[95]=lr.indexOf("/");const Wf={dec(n){let e=n.length*3/4;n[n.length-2]=="="?e-=2:n[n.length-1]=="="&&(e-=1);let t=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<n.length;a++){if(s=bl[n.charCodeAt(a)],s===void 0)switch(n[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:t[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:t[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:t[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return t.subarray(0,r)},enc(n){let e="",t=0,r,i=0;for(let s=0;s<n.length;s++)switch(r=n[s],t){case 0:e+=lr[r>>2],i=(r&3)<<4,t=1;break;case 1:e+=lr[i|r>>4],i=(r&15)<<2,t=2;break;case 2:e+=lr[i|r>>6],e+=lr[r&63],t=0;break}return t&&(e+=lr[i],e+="=",t==1&&(e+="=")),e}};function Pw(n,e,t){Bp(e,n);const r=e.runtime.bin.makeReadOptions(t),i=Nw(n.getType().runtime.bin.listUnknownFields(n),e.field),[s,o]=Rp(e);for(const a of i)e.runtime.bin.readField(s,r.readerFactory(a.data),e.field,a.wireType,r);return o()}function Dw(n,e,t,r){Bp(e,n);const i=e.runtime.bin.makeReadOptions(r),s=e.runtime.bin.makeWriteOptions(r);if(Lp(n,e)){const c=n.getType().runtime.bin.listUnknownFields(n).filter(d=>d.no!=e.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const d of c)n.getType().runtime.bin.onUnknownField(n,d.no,d.wireType,d.data)}const o=s.writerFactory();let a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,t,o,s);const l=i.readerFactory(o.finish());for(;l.pos<l.len;){const[c,d]=l.tag(),h=l.skip(d,c);n.getType().runtime.bin.onUnknownField(n,c,d,h)}}function Lp(n,e){const t=n.getType();return e.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(n).find(r=>r.no==e.field.no)}function Bp(n,e){ce(n.extendee.typeName==e.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function bp(n,e){const t=n.localName;if(n.repeated)return e[t].length>0;if(n.oneof)return e[n.oneof.localName].case===t;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?e[t]!==void 0:n.kind=="enum"?e[t]!==n.T.values[0].no:!Op(n.T,e[t]);case"message":return e[t]!==void 0;case"map":return Object.keys(e[t]).length>0}}function xh(n,e){const t=n.localName,r=!n.opt&&!n.req;if(n.repeated)e[t]=[];else if(n.oneof)e[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":e[t]={};break;case"enum":e[t]=r?n.T.values[0].no:void 0;break;case"scalar":e[t]=r?cs(n.T,n.L):void 0;break;case"message":e[t]=void 0;break}}function pi(n,e){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(O.prototype).every(r=>r in n&&typeof n[r]=="function"))return!1;const t=n.getType();return t===null||typeof t!="function"||!("typeName"in t)||typeof t.typeName!="string"?!1:e===void 0?!0:t.typeName==e.typeName}function Fp(n,e){return pi(e)||!n.fieldWrapper?e:n.fieldWrapper.wrapField(e)}A.DOUBLE,A.FLOAT,A.INT64,A.UINT64,A.INT32,A.UINT32,A.BOOL,A.STRING,A.BYTES;const Ch={ignoreUnknownFields:!1},Nh={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Ow(n){return n?Object.assign(Object.assign({},Ch),n):Ch}function Rw(n){return n?Object.assign(Object.assign({},Nh),n):Nh}const Ga=Symbol(),Sa=Symbol();function Lw(){return{makeReadOptions:Ow,makeWriteOptions:Rw,readMessage(n,e,t,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${Vt(e)}`);r=r??new n;const i=new Map,s=t.typeRegistry;for(const[o,a]of Object.entries(e)){const l=n.fields.findJsonName(o);if(l){if(l.oneof){if(a===null&&l.kind=="scalar")continue;const c=i.get(l.oneof);if(c!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${l.oneof.name}" present: "${c}", "${o}"`);i.set(l.oneof,o)}Ph(r,a,l,t,n)}else{let c=!1;if(s!=null&&s.findExtension&&o.startsWith("[")&&o.endsWith("]")){const d=s.findExtension(o.substring(1,o.length-1));if(d&&d.extendee.typeName==n.typeName){c=!0;const[h,m]=Rp(d);Ph(h,a,d.field,t,d),Dw(r,d,m(),t)}}if(!c&&!t.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${o}" is unknown`)}}return r},writeMessage(n,e){const t=n.getType(),r={};let i;try{for(i of t.fields.byNumber()){if(!bp(i,n)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!bw(i))continue}const o=i.oneof?n[i.oneof.localName].value:n[i.localName],a=Dh(i,o,e);a!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=a)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const o of t.runtime.bin.listUnknownFields(n)){const a=s.findExtensionFor(t.typeName,o.no);if(a&&Lp(n,a)){const l=Pw(n,a,e),c=Dh(a.field,l,e);c!==void 0&&(r[a.field.jsonName]=c)}}}catch(s){const o=i?`cannot encode field ${t.typeName}.${i.name} to JSON`:`cannot encode message ${t.typeName} to JSON`,a=s instanceof Error?s.message:String(s);throw new Error(o+(a.length>0?`: ${a}`:""))}return r},readScalar(n,e,t){return Ws(n,e,t??Qr.BIGINT,!0)},writeScalar(n,e,t){if(e!==void 0&&(t||Op(n,e)))return ka(n,e)},debug:Vt}}function Vt(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function Ph(n,e,t,r,i){let s=t.localName;if(t.repeated){if(ce(t.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Vt(e)}`);const o=n[s];for(const a of e){if(a===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Vt(a)}`);switch(t.kind){case"message":o.push(t.T.fromJson(a,r));break;case"enum":const l=Su(t.T,a,r.ignoreUnknownFields,!0);l!==Sa&&o.push(l);break;case"scalar":try{o.push(Ws(t.T,a,t.L,!0))}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${Vt(a)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}}else if(t.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Vt(e)}`);const o=n[s];for(const[a,l]of Object.entries(e)){if(l===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: map value null`);let c;try{c=Bw(t.K,a)}catch(d){let h=`cannot decode map key for field ${i.typeName}.${t.name} from JSON: ${Vt(e)}`;throw d instanceof Error&&d.message.length>0&&(h+=`: ${d.message}`),new Error(h)}switch(t.V.kind){case"message":o[c]=t.V.T.fromJson(l,r);break;case"enum":const d=Su(t.V.T,l,r.ignoreUnknownFields,!0);d!==Sa&&(o[c]=d);break;case"scalar":try{o[c]=Ws(t.V.T,l,Qr.BIGINT,!0)}catch(h){let m=`cannot decode map value for field ${i.typeName}.${t.name} from JSON: ${Vt(e)}`;throw h instanceof Error&&h.message.length>0&&(m+=`: ${h.message}`),new Error(m)}break}}}else switch(t.oneof&&(n=n[t.oneof.localName]={case:s},s="value"),t.kind){case"message":const o=t.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let a=n[s];pi(a)?a.fromJson(e,r):(n[s]=a=o.fromJson(e,r),o.fieldWrapper&&!t.oneof&&(n[s]=o.fieldWrapper.unwrapField(a)));break;case"enum":const l=Su(t.T,e,r.ignoreUnknownFields,!1);switch(l){case Ga:xh(t,n);break;case Sa:break;default:n[s]=l;break}break;case"scalar":try{const c=Ws(t.T,e,t.L,!1);switch(c){case Ga:xh(t,n);break;default:n[s]=c;break}}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${Vt(e)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}function Bw(n,e){if(n===A.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Ws(n,e,Qr.BIGINT,!0).toString()}function Ws(n,e,t,r){if(e===null)return r?cs(n,t):Ga;switch(n){case A.DOUBLE:case A.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return n==A.FLOAT&&Ip(i),i;case A.INT32:case A.FIXED32:case A.SFIXED32:case A.SINT32:case A.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return n==A.UINT32||n==A.FIXED32?kc(s):va(s),s;case A.INT64:case A.SFIXED64:case A.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=re.parse(e);return t?o.toString():o;case A.FIXED64:case A.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=re.uParse(e);return t?a.toString():a;case A.BOOL:if(typeof e!="boolean")break;return e;case A.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case A.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return Wf.dec(e)}throw new Error}function Su(n,e,t,r){if(e===null)return n.typeName=="google.protobuf.NullValue"?0:r?n.values[0].no:Ga;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=n.findName(e);if(i!==void 0)return i.no;if(t)return Sa;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${Vt(e)}`)}function bw(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function Dh(n,e,t){if(n.kind=="map"){ce(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(n.V.kind){case"scalar":for(const[o,a]of i)r[o.toString()]=ka(n.V.T,a);break;case"message":for(const[o,a]of i)r[o.toString()]=a.toJson(t);break;case"enum":const s=n.V.T;for(const[o,a]of i)r[o.toString()]=ku(s,a,t.enumAsInteger);break}return t.emitDefaultValues||i.length>0?r:void 0}if(n.repeated){ce(Array.isArray(e));const r=[];switch(n.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(ka(n.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push(ku(n.T,e[i],t.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(t));break}return t.emitDefaultValues||r.length>0?r:void 0}switch(n.kind){case"scalar":return ka(n.T,e);case"enum":return ku(n.T,e,t.enumAsInteger);case"message":return Fp(n.T,e).toJson(t)}}function ku(n,e,t){var r;if(ce(typeof e=="number"),n.typeName=="google.protobuf.NullValue")return null;if(t)return e;const i=n.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function ka(n,e){switch(n){case A.INT32:case A.SFIXED32:case A.SINT32:case A.FIXED32:case A.UINT32:return ce(typeof e=="number"),e;case A.FLOAT:case A.DOUBLE:return ce(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case A.STRING:return ce(typeof e=="string"),e;case A.BOOL:return ce(typeof e=="boolean"),e;case A.UINT64:case A.FIXED64:case A.INT64:case A.SFIXED64:case A.SINT64:return ce(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case A.BYTES:return ce(e instanceof Uint8Array),Wf.enc(e)}}const Di=Symbol("@bufbuild/protobuf/unknown-fields"),Oh={readUnknownFields:!0,readerFactory:n=>new Ew(n)},Rh={writeUnknownFields:!0,writerFactory:()=>new Iw};function Fw(n){return n?Object.assign(Object.assign({},Oh),n):Oh}function Mw(n){return n?Object.assign(Object.assign({},Rh),n):Rh}function Jw(){return{makeReadOptions:Fw,makeWriteOptions:Mw,listUnknownFields(n){var e;return(e=n[Di])!==null&&e!==void 0?e:[]},discardUnknownFields(n){delete n[Di]},writeUnknownFields(n,e){const r=n[Di];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(n,e,t,r){const i=n;Array.isArray(i[Di])||(i[Di]=[]),i[Di].push({no:e,wireType:t,data:r})},readMessage(n,e,t,r,i){const s=n.getType(),o=i?e.len:e.pos+t;let a,l;for(;e.pos<o&&([a,l]=e.tag(),!(i===!0&&l==ge.EndGroup));){const c=s.fields.find(a);if(!c){const d=e.skip(l,a);r.readUnknownFields&&this.onUnknownField(n,a,l,d);continue}Lh(n,e,c,l,r)}if(i&&(l!=ge.EndGroup||a!==t))throw new Error("invalid end group tag")},readField:Lh,writeMessage(n,e,t){const r=n.getType();for(const i of r.fields.byNumber()){if(!bp(i,n)){if(i.req)throw new Error(`cannot encode field ${r.typeName}.${i.name} to binary: required field not set`);continue}const s=i.oneof?n[i.oneof.localName].value:n[i.localName];Bh(i,s,e,t)}return t.writeUnknownFields&&this.writeUnknownFields(n,e),e},writeField(n,e,t,r){e!==void 0&&Bh(n,e,t,r)}}}function Lh(n,e,t,r,i){let{repeated:s,localName:o}=t;switch(t.oneof&&(n=n[t.oneof.localName],n.case!=o&&delete n.value,n.case=o,o="value"),t.kind){case"scalar":case"enum":const a=t.kind=="enum"?A.INT32:t.T;let l=Ya;if(t.kind=="scalar"&&t.L>0&&(l=zw),s){let m=n[o];if(r==ge.LengthDelimited&&a!=A.STRING&&a!=A.BYTES){let w=e.uint32()+e.pos;for(;e.pos<w;)m.push(l(e,a))}else m.push(l(e,a))}else n[o]=l(e,a);break;case"message":const c=t.T;s?n[o].push(Ta(e,new c,i,t)):pi(n[o])?Ta(e,n[o],i,t):(n[o]=Ta(e,new c,i,t),c.fieldWrapper&&!t.oneof&&!t.repeated&&(n[o]=c.fieldWrapper.unwrapField(n[o])));break;case"map":let[d,h]=$w(t,e,i);n[o][d]=h;break}}function Ta(n,e,t,r){const i=e.getType().runtime.bin,s=r==null?void 0:r.delimited;return i.readMessage(e,n,s?r.no:n.uint32(),t,s),e}function $w(n,e,t){const r=e.uint32(),i=e.pos+r;let s,o;for(;e.pos<i;){const[a]=e.tag();switch(a){case 1:s=Ya(e,n.K);break;case 2:switch(n.V.kind){case"scalar":o=Ya(e,n.V.T);break;case"enum":o=e.int32();break;case"message":o=Ta(e,new n.V.T,t,void 0);break}break}}if(s===void 0&&(s=cs(n.K,Qr.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(n.V.kind){case"scalar":o=cs(n.V.T,Qr.BIGINT);break;case"enum":o=n.V.T.values[0].no;break;case"message":o=new n.V.T;break}return[s,o]}function zw(n,e){const t=Ya(n,e);return typeof t=="bigint"?t.toString():t}function Ya(n,e){switch(e){case A.STRING:return n.string();case A.BOOL:return n.bool();case A.DOUBLE:return n.double();case A.FLOAT:return n.float();case A.INT32:return n.int32();case A.INT64:return n.int64();case A.UINT64:return n.uint64();case A.FIXED64:return n.fixed64();case A.BYTES:return n.bytes();case A.FIXED32:return n.fixed32();case A.SFIXED32:return n.sfixed32();case A.SFIXED64:return n.sfixed64();case A.SINT64:return n.sint64();case A.UINT32:return n.uint32();case A.SINT32:return n.sint32()}}function Bh(n,e,t,r){ce(e!==void 0);const i=n.repeated;switch(n.kind){case"scalar":case"enum":let s=n.kind=="enum"?A.INT32:n.T;if(i)if(ce(Array.isArray(e)),n.packed)jw(t,s,n.no,e);else for(const o of e)Hs(t,s,n.no,o);else Hs(t,s,n.no,e);break;case"message":if(i){ce(Array.isArray(e));for(const o of e)bh(t,r,n,o)}else bh(t,r,n,e);break;case"map":ce(typeof e=="object"&&e!=null);for(const[o,a]of Object.entries(e))Uw(t,r,n,o,a);break}}function Uw(n,e,t,r,i){n.tag(t.no,ge.LengthDelimited),n.fork();let s=r;switch(t.K){case A.INT32:case A.FIXED32:case A.UINT32:case A.SFIXED32:case A.SINT32:s=Number.parseInt(r);break;case A.BOOL:ce(r=="true"||r=="false"),s=r=="true";break}switch(Hs(n,t.K,1,s),t.V.kind){case"scalar":Hs(n,t.V.T,2,i);break;case"enum":Hs(n,A.INT32,2,i);break;case"message":ce(i!==void 0),n.tag(2,ge.LengthDelimited).bytes(i.toBinary(e));break}n.join()}function bh(n,e,t,r){const i=Fp(t.T,r);t.delimited?n.tag(t.no,ge.StartGroup).raw(i.toBinary(e)).tag(t.no,ge.EndGroup):n.tag(t.no,ge.LengthDelimited).bytes(i.toBinary(e))}function Hs(n,e,t,r){ce(r!==void 0);let[i,s]=Mp(e);n.tag(t,i)[s](r)}function jw(n,e,t,r){if(!r.length)return;n.tag(t,ge.LengthDelimited).fork();let[,i]=Mp(e);for(let s=0;s<r.length;s++)n[i](r[s]);n.join()}function Mp(n){let e=ge.Varint;switch(n){case A.BYTES:case A.STRING:e=ge.LengthDelimited;break;case A.DOUBLE:case A.FIXED64:case A.SFIXED64:e=ge.Bit64;break;case A.FIXED32:case A.SFIXED32:case A.FLOAT:e=ge.Bit32;break}const t=A[n].toLowerCase();return[e,t]}function Vw(){return{setEnumType:xp,initPartial(n,e){if(n===void 0)return;const t=e.getType();for(const r of t.fields.byMember()){const i=r.localName,s=e,o=n;if(o[i]!=null)switch(r.kind){case"oneof":const a=o[i].case;if(a===void 0)continue;const l=r.findField(a);let c=o[i].value;l&&l.kind=="message"&&!pi(c,l.T)?c=new l.T(c):l&&l.kind==="scalar"&&l.T===A.BYTES&&(c=Ds(c)),s[i]={case:a,value:c};break;case"scalar":case"enum":let d=o[i];r.T===A.BYTES&&(d=r.repeated?d.map(Ds):Ds(d)),s[i]=d;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===A.BYTES)for(const[y,w]of Object.entries(o[i]))s[i][y]=Ds(w);else Object.assign(s[i],o[i]);break;case"message":const m=r.V.T;for(const y of Object.keys(o[i])){let w=o[i][y];m.fieldWrapper||(w=new m(w)),s[i][y]=w}break}break;case"message":const h=r.T;if(r.repeated)s[i]=o[i].map(m=>pi(m,h)?m:new h(m));else{const m=o[i];h.fieldWrapper?h.typeName==="google.protobuf.BytesValue"?s[i]=Ds(m):s[i]=m:s[i]=pi(m,h)?m:new h(m)}break}}},equals(n,e,t){return e===t?!0:!e||!t?!1:n.fields.byMember().every(r=>{const i=e[r.localName],s=t[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,a)=>r.T.equals(o,s[a]));case"scalar":return i.every((o,a)=>Cr(r.T,o,s[a]));case"enum":return i.every((o,a)=>Cr(A.INT32,o,s[a]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":return r.T.equals(i,s);case"enum":return Cr(A.INT32,i,s);case"scalar":return Cr(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const o=r.findField(i.case);if(o===void 0)return!0;switch(o.kind){case"message":return o.T.equals(i.value,s.value);case"enum":return Cr(A.INT32,i.value,s.value);case"scalar":return Cr(o.T,i.value,s.value)}throw new Error(`oneof cannot contain ${o.kind}`);case"map":const a=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const l=r.V.T;return a.every(d=>l.equals(i[d],s[d]));case"enum":return a.every(d=>Cr(A.INT32,i[d],s[d]));case"scalar":const c=r.V.T;return a.every(d=>Cr(c,i[d],s[d]))}break}})},clone(n){const e=n.getType(),t=new e,r=t;for(const i of e.fields.byMember()){const s=n[i.localName];let o;if(i.repeated)o=s.map(ea);else if(i.kind=="map"){o=r[i.localName];for(const[a,l]of Object.entries(s))o[a]=ea(l)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:ea(s.value)}:{case:void 0}:o=ea(s);r[i.localName]=o}for(const i of e.runtime.bin.listUnknownFields(n))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return t}}}function ea(n){if(n===void 0)return n;if(pi(n))return n.clone();if(n instanceof Uint8Array){const e=new Uint8Array(n.byteLength);return e.set(n),e}return n}function Ds(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function qw(n,e,t){return{syntax:n,json:Lw(),bin:Jw(),util:Object.assign(Object.assign({},Vw()),{newFieldList:e,initFields:t}),makeMessageType(r,i,s){return vw(this,r,i,s)},makeEnum:yw,makeEnumType:Cp,getEnumType:pw,makeExtension(r,i,s){return xw(this,r,i,s)}}}class Kw{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const r of this.list())t[r.jsonName]=t[r.name]=r;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const r of this.list())t[r.no]=r;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const r of this.list())r.oneof?r.oneof!==t&&(t=r.oneof,e.push(t)):e.push(r)}return this.members}}function Jp(n,e){const t=$p(n);return e?t:Qw(Yw(t))}function Ww(n){return Jp(n,!1)}const Hw=$p;function $p(n){let e=!1;const t=[];for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),t.push(i);break}}return t.join("")}const _w=new Set(["constructor","toString","toJSON","valueOf"]),Gw=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),zp=n=>`${n}$`,Yw=n=>Gw.has(n)?zp(n):n,Qw=n=>_w.has(n)?zp(n):n;class Xw{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=Ww(e)}addField(e){ce(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}function Zw(n,e){var t,r,i,s,o,a;const l=[];let c;for(const d of typeof n=="function"?n():n){const h=d;if(h.localName=Jp(d.name,d.oneof!==void 0),h.jsonName=(t=d.jsonName)!==null&&t!==void 0?t:Hw(d.name),h.repeated=(r=d.repeated)!==null&&r!==void 0?r:!1,d.kind=="scalar"&&(h.L=(i=d.L)!==null&&i!==void 0?i:Qr.BIGINT),h.delimited=(s=d.delimited)!==null&&s!==void 0?s:!1,h.req=(o=d.req)!==null&&o!==void 0?o:!1,h.opt=(a=d.opt)!==null&&a!==void 0?a:!1,d.packed===void 0&&(h.packed=d.kind=="enum"||d.kind=="scalar"&&d.T!=A.BYTES&&d.T!=A.STRING),d.oneof!==void 0){const m=typeof d.oneof=="string"?d.oneof:d.oneof.name;(!c||c.name!=m)&&(c=new Xw(m)),h.oneof=c,c.addField(h)}l.push(h)}return l}const f=qw("proto3",n=>new Kw(n,e=>Zw(e)),n=>{for(const e of n.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,r=n;if(e.repeated){r[t]=[];continue}switch(e.kind){case"oneof":r[t]={case:void 0};break;case"enum":r[t]=0;break;case"map":r[t]={};break;case"scalar":r[t]=cs(e.T,e.L);break}}});var Fe;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(Fe||(Fe={}));var Fh;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(Fh||(Fh={}));class Re extends O{constructor(e){super(),this.seconds=re.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${f.json.debug(e)}`);const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=re.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(t).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Re.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new Re({seconds:re.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new Re().fromBinary(e,t)}static fromJson(e,t){return new Re().fromJson(e,t)}static fromJsonString(e,t){return new Re().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Re,e,t)}}Re.runtime=f;Re.typeName="google.protobuf.Timestamp";Re.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class fr extends O{constructor(e){super(),this.seconds=re.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const r=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const i=Number(r[1]);if(i>315576e6||i<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);if(this.seconds=re.parse(i),typeof r[2]=="string"){const s=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(s),(i<0||Object.is(i,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let t=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),t+="."+r,this.nanos<0&&Number(this.seconds)==0&&(t="-"+t)}return t+"s"}static fromBinary(e,t){return new fr().fromBinary(e,t)}static fromJson(e,t){return new fr().fromJson(e,t)}static fromJsonString(e,t){return new fr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(fr,e,t)}}fr.runtime=f;fr.typeName="google.protobuf.Duration";fr.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Kt extends O{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){var t;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),i=(t=e==null?void 0:e.typeRegistry)===null||t===void 0?void 0:t.findMessage(r);if(!i)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let o=i.fromBinary(this.value).toJson(e);return(r.startsWith("google.protobuf.")||o===null||Array.isArray(o)||typeof o!="object")&&(o={value:o}),o["@type"]=this.typeUrl,o}fromJson(e,t){var r;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const i=e["@type"];if(typeof i!="string"||i=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const s=this.typeUrlToName(i),o=(r=t==null?void 0:t.typeRegistry)===null||r===void 0?void 0:r.findMessage(s);if(!o)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${i} is not in the type registry`);let a;if(s.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))a=o.fromJson(e.value,t);else{const l=Object.assign({},e);delete l["@type"],a=o.fromJson(l,t)}return this.packFrom(a),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const t=e.findMessage(this.typeUrlToName(this.typeUrl));if(t)return t.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const t=this.typeUrlToName(this.typeUrl);let r="";return typeof e=="string"?r=e:r=e.typeName,t===r}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const t=e.lastIndexOf("/"),r=t>=0?e.substring(t+1):e;if(!r.length)throw new Error(`invalid type url: ${e}`);return r}static pack(e){const t=new Kt;return t.packFrom(e),t}static fromBinary(e,t){return new Kt().fromBinary(e,t)}static fromJson(e,t){return new Kt().fromJson(e,t)}static fromJsonString(e,t){return new Kt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Kt,e,t)}}Kt.runtime=f;Kt.typeName="google.protobuf.Any";Kt.fields=f.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class Wt extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.DOUBLE,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.DOUBLE,e)}catch(r){let i='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Wt().fromBinary(e,t)}static fromJson(e,t){return new Wt().fromJson(e,t)}static fromJsonString(e,t){return new Wt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Wt,e,t)}}Wt.runtime=f;Wt.typeName="google.protobuf.DoubleValue";Wt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);Wt.fieldWrapper={wrapField(n){return new Wt({value:n})},unwrapField(n){return n.value}};class Ht extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.FLOAT,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.FLOAT,e)}catch(r){let i='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Ht().fromBinary(e,t)}static fromJson(e,t){return new Ht().fromJson(e,t)}static fromJsonString(e,t){return new Ht().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Ht,e,t)}}Ht.runtime=f;Ht.typeName="google.protobuf.FloatValue";Ht.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);Ht.fieldWrapper={wrapField(n){return new Ht({value:n})},unwrapField(n){return n.value}};class _t extends O{constructor(e){super(),this.value=re.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.INT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.INT64,e)}catch(r){let i='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new _t().fromBinary(e,t)}static fromJson(e,t){return new _t().fromJson(e,t)}static fromJsonString(e,t){return new _t().fromJsonString(e,t)}static equals(e,t){return f.util.equals(_t,e,t)}}_t.runtime=f;_t.typeName="google.protobuf.Int64Value";_t.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);_t.fieldWrapper={wrapField(n){return new _t({value:n})},unwrapField(n){return n.value}};class Gt extends O{constructor(e){super(),this.value=re.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.UINT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.UINT64,e)}catch(r){let i='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Gt().fromBinary(e,t)}static fromJson(e,t){return new Gt().fromJson(e,t)}static fromJsonString(e,t){return new Gt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Gt,e,t)}}Gt.runtime=f;Gt.typeName="google.protobuf.UInt64Value";Gt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);Gt.fieldWrapper={wrapField(n){return new Gt({value:n})},unwrapField(n){return n.value}};class Yt extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.INT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.INT32,e)}catch(r){let i='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Yt().fromBinary(e,t)}static fromJson(e,t){return new Yt().fromJson(e,t)}static fromJsonString(e,t){return new Yt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Yt,e,t)}}Yt.runtime=f;Yt.typeName="google.protobuf.Int32Value";Yt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);Yt.fieldWrapper={wrapField(n){return new Yt({value:n})},unwrapField(n){return n.value}};class Qt extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.UINT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.UINT32,e)}catch(r){let i='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Qt().fromBinary(e,t)}static fromJson(e,t){return new Qt().fromJson(e,t)}static fromJsonString(e,t){return new Qt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Qt,e,t)}}Qt.runtime=f;Qt.typeName="google.protobuf.UInt32Value";Qt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);Qt.fieldWrapper={wrapField(n){return new Qt({value:n})},unwrapField(n){return n.value}};class Xt extends O{constructor(e){super(),this.value=!1,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.BOOL,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.BOOL,e)}catch(r){let i='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Xt().fromBinary(e,t)}static fromJson(e,t){return new Xt().fromJson(e,t)}static fromJsonString(e,t){return new Xt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Xt,e,t)}}Xt.runtime=f;Xt.typeName="google.protobuf.BoolValue";Xt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);Xt.fieldWrapper={wrapField(n){return new Xt({value:n})},unwrapField(n){return n.value}};class Qe extends O{constructor(e){super(),this.value="",f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.STRING,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.STRING,e)}catch(r){let i='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Qe().fromBinary(e,t)}static fromJson(e,t){return new Qe().fromJson(e,t)}static fromJsonString(e,t){return new Qe().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Qe,e,t)}}Qe.runtime=f;Qe.typeName="google.protobuf.StringValue";Qe.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);Qe.fieldWrapper={wrapField(n){return new Qe({value:n})},unwrapField(n){return n.value}};class Zt extends O{constructor(e){super(),this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.BYTES,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.BYTES,e)}catch(r){let i='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Zt().fromBinary(e,t)}static fromJson(e,t){return new Zt().fromJson(e,t)}static fromJsonString(e,t){return new Zt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Zt,e,t)}}Zt.runtime=f;Zt.typeName="google.protobuf.BytesValue";Zt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);Zt.fieldWrapper={wrapField(n){return new Zt({value:n})},unwrapField(n){return n.value}};function e1(n,e,t){try{const r=Wf.dec(n);return e?e.fromBinary(r,t):r}catch(r){throw ne.from(r,_.DataLoss)}}function t1(n,e){const t={};for(const[r,i]of Object.entries(n.methods)){const s=e(Object.assign(Object.assign({},i),{localName:r,service:n}));s!=null&&(t[r]=s)}return t}function Mh(n){let e,t=new Uint8Array(0);function r(i){const s=new Uint8Array(t.length+i.length);s.set(t),s.set(i,t.length),t=s}return new ReadableStream({start(){e=n.getReader()},async pull(i){let s;for(;;){if(s===void 0&&t.byteLength>=5){let l=0;for(let c=1;c<5;c++)l=(l<<8)+t[c];s={flags:t[0],length:l}}if(s!==void 0&&t.byteLength>=s.length+5)break;const a=await e.read();if(a.done)break;r(a.value)}if(s===void 0){if(t.byteLength==0){i.close();return}i.error(new ne("premature end of stream",_.DataLoss));return}const o=t.subarray(5,5+s.length);t=t.subarray(5+s.length),i.enqueue({flags:s.flags,data:o})}})}function Jh(n,e){const t=new Uint8Array(e.length+5);t.set(e,5);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setUint8(0,n),r.setUint32(1,e.length),t}var n1=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}},mo=function(n){return this instanceof mo?(this.v=n,this):new mo(n)},r1=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(w){return Promise.resolve(w).then(y,h)}}function a(y,w){r[y]&&(i[y]=function(T){return new Promise(function(P,p){s.push([y,T,P,p])>1||l(y,T)})},w&&(i[y]=w(i[y])))}function l(y,w){try{c(r[y](w))}catch(T){m(s[0][3],T)}}function c(y){y.value instanceof mo?Promise.resolve(y.value.v).then(d,h):m(s[0][2],y)}function d(y){l("next",y)}function h(y){l("throw",y)}function m(y,w){y(w),s.shift(),s.length&&l(s[0][0],s[0][1])}},i1=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:mo(n[i](o)),done:!1}:s?s(o):o}:s}};function s1(n){return r1(this,arguments,function*(){yield mo(yield*i1(n1(n)))})}var Up=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}},fs=function(n){return this instanceof fs?(this.v=n,this):new fs(n)},o1=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:fs(n[i](o)),done:!1}:s?s(o):o}:s}},a1=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(w){return Promise.resolve(w).then(y,h)}}function a(y,w){r[y]&&(i[y]=function(T){return new Promise(function(P,p){s.push([y,T,P,p])>1||l(y,T)})},w&&(i[y]=w(i[y])))}function l(y,w){try{c(r[y](w))}catch(T){m(s[0][3],T)}}function c(y){y.value instanceof fs?Promise.resolve(y.value.v).then(d,h):m(s[0][2],y)}function d(y){l("next",y)}function h(y){l("throw",y)}function m(y,w){y(w),s.shift(),s.length&&l(s[0][0],s[0][1])}};function l1(n,e){return t1(n,t=>{switch(t.kind){case Fe.Unary:return u1(e,n,t);case Fe.ServerStreaming:return c1(e,n,t);case Fe.ClientStreaming:return f1(e,n,t);case Fe.BiDiStreaming:return d1(e,n,t);default:return null}})}function u1(n,e,t){return async function(r,i){var s,o;const a=await n.unary(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);return(s=i==null?void 0:i.onHeader)===null||s===void 0||s.call(i,a.header),(o=i==null?void 0:i.onTrailer)===null||o===void 0||o.call(i,a.trailer),a.message}}function c1(n,e,t){return function(r,i){return jp(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,s1([r]),i==null?void 0:i.contextValues),i)}}function f1(n,e,t){return async function(r,i){var s,o,a,l,c,d;const h=await n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);(c=i==null?void 0:i.onHeader)===null||c===void 0||c.call(i,h.header);let m;try{for(var y=!0,w=Up(h.message),T;T=await w.next(),s=T.done,!s;y=!0)l=T.value,y=!1,m=l}catch(P){o={error:P}}finally{try{!y&&!s&&(a=w.return)&&await a.call(w)}finally{if(o)throw o.error}}if(!m)throw new ne("protocol error: missing response message",_.Internal);return(d=i==null?void 0:i.onTrailer)===null||d===void 0||d.call(i,h.trailer),m}}function d1(n,e,t){return function(r,i){return jp(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues),i)}}function jp(n,e){const t=function(){var r,i;return a1(this,arguments,function*(){const s=yield fs(n);(r=e==null?void 0:e.onHeader)===null||r===void 0||r.call(e,s.header),yield fs(yield*o1(Up(s.message))),(i=e==null?void 0:e.onTrailer)===null||i===void 0||i.call(e,s.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function h1(...n){const e=new AbortController,t=n.filter(i=>i!==void 0).concat(e.signal);for(const i of t){if(i.aborted){r.apply(i);break}i.addEventListener("abort",r)}function r(){e.signal.aborted||e.abort(Vp(this));for(const i of t)i.removeEventListener("abort",r)}return e}function g1(n){const e=new AbortController,t=()=>{e.abort(new ne("the operation timed out",_.DeadlineExceeded))};let r;return n!==void 0&&(n<=0?t():r=setTimeout(t,n)),{signal:e.signal,cleanup:()=>clearTimeout(r)}}function Vp(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function $h(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,e){return this[n.id]=e,this},delete(n){return delete this[n.id],this}}}const Tu=128;function zh(n){const e=new Headers,t=new TextDecoder().decode(n).split(`\r
`);for(const r of t){if(r==="")continue;const i=r.indexOf(":");if(i>0){const s=r.substring(0,i).trim(),o=r.substring(i+1).trim();e.append(s,o)}}return e}const m1="Content-Type",p1="Grpc-Timeout",qp="Grpc-Status",Kp="Grpc-Message",y1="Grpc-Status-Details-Bin",v1="X-User-Agent",w1="X-Grpc-Web",S1="application/grpc-web+proto",k1="application/grpc-web+json";class dr extends O{constructor(e){super(),this.code=0,this.message="",this.details=[],f.util.initPartial(e,this)}static fromBinary(e,t){return new dr().fromBinary(e,t)}static fromJson(e,t){return new dr().fromJson(e,t)}static fromJsonString(e,t){return new dr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(dr,e,t)}}dr.runtime=f;dr.typeName="google.rpc.Status";dr.fields=f.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:Kt,repeated:!0}]);const T1="0";function Wp(n){var e;const t=n.get(y1);if(t!=null){const i=e1(t,dr);if(i.code==0)return;const s=new ne(i.message,i.code,n);return s.details=i.details.map(o=>({type:o.typeUrl.substring(o.typeUrl.lastIndexOf("/")+1),value:o.value})),s}const r=n.get(qp);if(r!=null){if(r===T1)return;const i=parseInt(r,10);return i in _?new ne(decodeURIComponent((e=n.get(Kp))!==null&&e!==void 0?e:""),i,n):new ne(`invalid grpc-status: ${r}`,_.Internal,n)}}function Uh(n,e,t){const r=typeof e=="string"?e:e.typeName,i=typeof t=="string"?t:t.name;return n.toString().replace(/\/?$/,`/${r}/${i}`)}function Hp(n,e){return e instanceof n?e:new n(e)}function A1(n,e){function t(r){return r.done===!0?r:{done:r.done,value:Hp(n,r.value)}}return{[Symbol.asyncIterator](){const r=e[Symbol.asyncIterator](),i={next:()=>r.next().then(t)};return r.throw!==void 0&&(i.throw=s=>r.throw(s).then(t)),r.return!==void 0&&(i.return=s=>r.return(s).then(t)),i}}}function _p(n,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((r,i)=>i(r),n))!==null&&t!==void 0?t:n}function I1(n){var e;const t=Object.assign({},n);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function jh(n,e,t,r){const i=e?Vh(n.I,r):qh(n.I,t);return{parse:(e?Vh(n.O,r):qh(n.O,t)).parse,serialize:i.serialize}}function Vh(n,e){return{parse(t){try{return n.fromBinary(t,e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new ne(`parse binary: ${i}`,_.InvalidArgument)}},serialize(t){try{return t.toBinary(e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new ne(`serialize binary: ${i}`,_.Internal)}}}}function qh(n,e){var t,r;const i=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,s=(r=e==null?void 0:e.textDecoder)!==null&&r!==void 0?r:new TextDecoder,o=I1(e);return{parse(a){try{const l=s.decode(a);return n.fromJsonString(l,o)}catch(l){throw ne.from(l,_.InvalidArgument)}},serialize(a){try{const l=a.toJsonString(o);return i.encode(l)}catch(l){throw ne.from(l,_.Internal)}}}}function E1(n){const e=_p(n.next,n.interceptors),[t,r,i]=Gp(n),s=Object.assign(Object.assign({},n.req),{message:Hp(n.req.method.I,n.req.message),signal:t});return e(s).then(o=>(i(),o),r)}function x1(n){const e=_p(n.next,n.interceptors),[t,r,i]=Gp(n),s=Object.assign(Object.assign({},n.req),{message:A1(n.req.method.I,n.req.message),signal:t});let o=!1;return t.addEventListener("abort",function(){var a,l;const c=n.req.message[Symbol.asyncIterator]();o||(a=c.throw)===null||a===void 0||a.call(c,this.reason).catch(()=>{}),(l=c.return)===null||l===void 0||l.call(c).catch(()=>{})}),e(s).then(a=>Object.assign(Object.assign({},a),{message:{[Symbol.asyncIterator](){const l=a.message[Symbol.asyncIterator]();return{next(){return l.next().then(c=>(c.done==!0&&(o=!0,i()),c),r)}}}}}),r)}function Gp(n){const{signal:e,cleanup:t}=g1(n.timeoutMs),r=h1(n.signal,e);return[r.signal,function(s){const o=ne.from(e.aborted?Vp(e):s);return r.abort(o),t(),Promise.reject(o)},function(){t(),r.abort()}]}function C1(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function Kh(n,e){const t=Wp(n);if(t)throw e.forEach((r,i)=>{t.metadata.append(i,r)}),t}function Wh(n,e,t,r){const i=new Headers(t??{});return i.set(m1,n?S1:k1),i.set(w1,"1"),i.set(v1,"connect-es/1.4.0"),e!==void 0&&i.set(p1,`${e}m`),i}function N1(n){switch(n){case 400:return _.Internal;case 401:return _.Unauthenticated;case 403:return _.PermissionDenied;case 404:return _.Unimplemented;case 429:return _.Unavailable;case 502:return _.Unavailable;case 503:return _.Unavailable;case 504:return _.Unavailable;default:return _.Unknown}}function Hh(n,e){var t;if(n>=200&&n<300){const r=Wp(e);if(r)throw r;return{foundStatus:e.has(qp)}}throw new ne(decodeURIComponent((t=e.get(Kp))!==null&&t!==void 0?t:`HTTP ${n}`),N1(n),e)}var di=function(n){return this instanceof di?(this.v=n,this):new di(n)},P1=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(w){return Promise.resolve(w).then(y,h)}}function a(y,w){r[y]&&(i[y]=function(T){return new Promise(function(P,p){s.push([y,T,P,p])>1||l(y,T)})},w&&(i[y]=w(i[y])))}function l(y,w){try{c(r[y](w))}catch(T){m(s[0][3],T)}}function c(y){y.value instanceof di?Promise.resolve(y.value.v).then(d,h):m(s[0][2],y)}function d(y){l("next",y)}function h(y){l("throw",y)}function m(y,w){y(w),s.shift(),s.length&&l(s[0][0],s[0][1])}};function D1(n){var e;C1();const t=(e=n.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(r,i,s,o,a,l,c){var d;const{serialize:h,parse:m}=jh(i,t,n.jsonOptions,n.binaryOptions);return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,await E1({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!1,service:r,method:i,url:Uh(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:Wh(t,o,a),contextValues:c??$h(),message:l},next:async y=>{var w;const P=await((w=n.fetch)!==null&&w!==void 0?w:globalThis.fetch)(y.url,Object.assign(Object.assign({},y.init),{headers:y.header,signal:y.signal,body:Jh(0,h(y.message))}));if(Hh(P.status,P.headers),!P.body)throw"missing response body";const p=Mh(P.body).getReader();let g,v;for(;;){const I=await p.read();if(I.done)break;const{flags:E,data:N}=I.value;if(E===Tu){if(g!==void 0)throw"extra trailer";g=zh(N);continue}if(v!==void 0)throw"extra message";v=m(N)}if(g===void 0)throw"missing trailer";if(Kh(g,P.headers),v===void 0)throw"missing message";return{stream:!1,service:r,method:i,header:P.headers,message:v,trailer:g}}})},async stream(r,i,s,o,a,l,c){var d;const{serialize:h,parse:m}=jh(i,t,n.jsonOptions,n.binaryOptions);function y(T,P,p,g){return P1(this,arguments,function*(){const I=Mh(T).getReader();if(P){if(!(yield di(I.read())).done)throw"extra data for trailers-only";return yield di(void 0)}let E=!1;for(;;){const N=yield di(I.read());if(N.done)break;const{flags:D,data:R}=N.value;if((D&Tu)===Tu){if(E)throw"extra trailer";E=!0;const q=zh(R);Kh(q,g),q.forEach(($,Se)=>p.set(Se,$));continue}if(E)throw"extra message";yield yield di(m(R))}if(!E)throw"missing trailer"})}async function w(T){if(i.kind!=Fe.ServerStreaming)throw"The fetch API does not support streaming request bodies";const P=await T[Symbol.asyncIterator]().next();if(P.done==!0)throw"missing request message";return Jh(0,h(P.value))}return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,x1({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!0,service:r,method:i,url:Uh(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:Wh(t,o,a),contextValues:c??$h(),message:l},next:async T=>{var P;const g=await((P=n.fetch)!==null&&P!==void 0?P:globalThis.fetch)(T.url,Object.assign(Object.assign({},T.init),{headers:T.header,signal:T.signal,body:await w(T.message)})),{foundStatus:v}=Hh(g.status,g.headers);if(!g.body)throw"missing response body";const I=new Headers;return Object.assign(Object.assign({},T),{header:g.headers,trailer:I,message:y(g.body,v,I,g.headers)})}})}}}var z=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))(z||{});f.util.setEnumType(z,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var yi=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(yi||{});f.util.setEnumType(yi,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const an=class an extends O{constructor(t){super();u(this,"root");u(this,"presences",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new an().fromBinary(t,r)}static fromJson(t,r){return new an().fromJson(t,r)}static fromJsonString(t,r){return new an().fromJsonString(t,r)}static equals(t,r){return f.util.equals(an,t,r)}};u(an,"runtime",f),u(an,"typeName","yorkie.v1.Snapshot"),u(an,"fields",f.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:_e},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:_f}}]));let Tc=an;var lt;let Ir=(lt=class extends O{constructor(t){super();u(this,"documentKey","");u(this,"checkpoint");u(this,"snapshot",new Uint8Array(0));u(this,"changes",[]);u(this,"minSyncedTicket");u(this,"isRemoved",!1);u(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new lt().fromBinary(t,r)}static fromJson(t,r){return new lt().fromJson(t,r)}static fromJsonString(t,r){return new lt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(lt,t,r)}},u(lt,"runtime",f),u(lt,"typeName","yorkie.v1.ChangePack"),u(lt,"fields",f.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:Xp},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:Yp,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:b},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:Ml}])),lt);var ut;let Yp=(ut=class extends O{constructor(t){super();u(this,"id");u(this,"message","");u(this,"operations",[]);u(this,"presenceChange");f.util.initPartial(t,this)}static fromBinary(t,r){return new ut().fromBinary(t,r)}static fromJson(t,r){return new ut().fromJson(t,r)}static fromJsonString(t,r){return new ut().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ut,t,r)}},u(ut,"runtime",f),u(ut,"typeName","yorkie.v1.Change"),u(ut,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Fl},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:Hf,repeated:!0},{no:4,name:"presence_change",kind:"message",T:vo}])),ut);var ct;let Fl=(ct=class extends O{constructor(t){super();u(this,"clientSeq",0);u(this,"serverSeq",re.zero);u(this,"lamport",re.zero);u(this,"actorId",new Uint8Array(0));u(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new ct().fromBinary(t,r)}static fromJson(t,r){return new ct().fromJson(t,r)}static fromJsonString(t,r){return new ct().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ct,t,r)}},u(ct,"runtime",f),u(ct,"typeName","yorkie.v1.ChangeID"),u(ct,"fields",f.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:Ml}])),ct);var ft;let Ml=(ft=class extends O{constructor(t){super();u(this,"vector",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new ft().fromBinary(t,r)}static fromJson(t,r){return new ft().fromJson(t,r)}static fromJsonString(t,r){return new ft().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ft,t,r)}},u(ft,"runtime",f),u(ft,"typeName","yorkie.v1.VersionVector"),u(ft,"fields",f.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),ft);var dt;let Hf=(dt=class extends O{constructor(t){super();u(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new dt().fromBinary(t,r)}static fromJson(t,r){return new dt().fromJson(t,r)}static fromJsonString(t,r){return new dt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(dt,t,r)}},u(dt,"runtime",f),u(dt,"typeName","yorkie.v1.Operation"),u(dt,"fields",f.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:Qa,oneof:"body"},{no:2,name:"add",kind:"message",T:Xa,oneof:"body"},{no:3,name:"move",kind:"message",T:Za,oneof:"body"},{no:4,name:"remove",kind:"message",T:el,oneof:"body"},{no:5,name:"edit",kind:"message",T:tl,oneof:"body"},{no:6,name:"select",kind:"message",T:Ac,oneof:"body"},{no:7,name:"style",kind:"message",T:nl,oneof:"body"},{no:8,name:"increase",kind:"message",T:rl,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:il,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:sl,oneof:"body"},{no:11,name:"array_set",kind:"message",T:Ic,oneof:"body"}])),dt);const ln=class ln extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"key","");u(this,"value");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new ln().fromBinary(t,r)}static fromJson(t,r){return new ln().fromJson(t,r)}static fromJsonString(t,r){return new ln().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ln,t,r)}};u(ln,"runtime",f),u(ln,"typeName","yorkie.v1.Operation.Set"),u(ln,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:at},{no:4,name:"executed_at",kind:"message",T:b}]));let Qa=ln;const un=class un extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"prevCreatedAt");u(this,"value");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new un().fromBinary(t,r)}static fromJson(t,r){return new un().fromJson(t,r)}static fromJsonString(t,r){return new un().fromJsonString(t,r)}static equals(t,r){return f.util.equals(un,t,r)}};u(un,"runtime",f),u(un,"typeName","yorkie.v1.Operation.Add"),u(un,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"prev_created_at",kind:"message",T:b},{no:3,name:"value",kind:"message",T:at},{no:4,name:"executed_at",kind:"message",T:b}]));let Xa=un;const cn=class cn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"prevCreatedAt");u(this,"createdAt");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new cn().fromBinary(t,r)}static fromJson(t,r){return new cn().fromJson(t,r)}static fromJsonString(t,r){return new cn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(cn,t,r)}};u(cn,"runtime",f),u(cn,"typeName","yorkie.v1.Operation.Move"),u(cn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"prev_created_at",kind:"message",T:b},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"executed_at",kind:"message",T:b}]));let Za=cn;const fn=class fn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"createdAt");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new fn().fromBinary(t,r)}static fromJson(t,r){return new fn().fromJson(t,r)}static fromJsonString(t,r){return new fn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(fn,t,r)}};u(fn,"runtime",f),u(fn,"typeName","yorkie.v1.Operation.Remove"),u(fn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"executed_at",kind:"message",T:b}]));let el=fn;const dn=class dn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"createdAtMapByActor",{});u(this,"content","");u(this,"executedAt");u(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new dn().fromBinary(t,r)}static fromJson(t,r){return new dn().fromJson(t,r)}static fromJsonString(t,r){return new dn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(dn,t,r)}};u(dn,"runtime",f),u(dn,"typeName","yorkie.v1.Operation.Edit"),u(dn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:kr},{no:3,name:"to",kind:"message",T:kr},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:b},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let tl=dn;const hn=class hn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new hn().fromBinary(t,r)}static fromJson(t,r){return new hn().fromJson(t,r)}static fromJsonString(t,r){return new hn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(hn,t,r)}};u(hn,"runtime",f),u(hn,"typeName","yorkie.v1.Operation.Select"),u(hn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:kr},{no:3,name:"to",kind:"message",T:kr},{no:4,name:"executed_at",kind:"message",T:b}]));let Ac=hn;const gn=class gn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"attributes",{});u(this,"executedAt");u(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new gn().fromBinary(t,r)}static fromJson(t,r){return new gn().fromJson(t,r)}static fromJsonString(t,r){return new gn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gn,t,r)}};u(gn,"runtime",f),u(gn,"typeName","yorkie.v1.Operation.Style"),u(gn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:kr},{no:3,name:"to",kind:"message",T:kr},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:b},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}}]));let nl=gn;const mn=class mn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"value");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new mn().fromBinary(t,r)}static fromJson(t,r){return new mn().fromJson(t,r)}static fromJsonString(t,r){return new mn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mn,t,r)}};u(mn,"runtime",f),u(mn,"typeName","yorkie.v1.Operation.Increase"),u(mn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"value",kind:"message",T:at},{no:3,name:"executed_at",kind:"message",T:b}]));let rl=mn;const pn=class pn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"createdAtMapByActor",{});u(this,"contents",[]);u(this,"splitLevel",0);u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new pn().fromBinary(t,r)}static fromJson(t,r){return new pn().fromJson(t,r)}static fromJsonString(t,r){return new pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pn,t,r)}};u(pn,"runtime",f),u(pn,"typeName","yorkie.v1.Operation.TreeEdit"),u(pn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Ai},{no:3,name:"to",kind:"message",T:Ai},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}},{no:5,name:"contents",kind:"message",T:gl,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:b}]));let il=pn;const yn=class yn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"attributes",{});u(this,"executedAt");u(this,"attributesToRemove",[]);u(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new yn().fromBinary(t,r)}static fromJson(t,r){return new yn().fromJson(t,r)}static fromJsonString(t,r){return new yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yn,t,r)}};u(yn,"runtime",f),u(yn,"typeName","yorkie.v1.Operation.TreeStyle"),u(yn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Ai},{no:3,name:"to",kind:"message",T:Ai},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:b},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}}]));let sl=yn;const vn=class vn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"createdAt");u(this,"value");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new vn().fromBinary(t,r)}static fromJson(t,r){return new vn().fromJson(t,r)}static fromJsonString(t,r){return new vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vn,t,r)}};u(vn,"runtime",f),u(vn,"typeName","yorkie.v1.Operation.ArraySet"),u(vn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"value",kind:"message",T:at},{no:4,name:"executed_at",kind:"message",T:b}]));let Ic=vn;const wn=class wn extends O{constructor(t){super();u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");u(this,"type",0);u(this,"value",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new wn().fromBinary(t,r)}static fromJson(t,r){return new wn().fromJson(t,r)}static fromJsonString(t,r){return new wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(wn,t,r)}};u(wn,"runtime",f),u(wn,"typeName","yorkie.v1.JSONElementSimple"),u(wn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"moved_at",kind:"message",T:b},{no:3,name:"removed_at",kind:"message",T:b},{no:4,name:"type",kind:"enum",T:f.getEnumType(z)},{no:5,name:"value",kind:"scalar",T:12}]));let at=wn;const Sn=class Sn extends O{constructor(t){super();u(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new Sn().fromBinary(t,r)}static fromJson(t,r){return new Sn().fromJson(t,r)}static fromJsonString(t,r){return new Sn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Sn,t,r)}};u(Sn,"runtime",f),u(Sn,"typeName","yorkie.v1.JSONElement"),u(Sn,"fields",f.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:ol,oneof:"body"},{no:2,name:"json_array",kind:"message",T:al,oneof:"body"},{no:3,name:"primitive",kind:"message",T:ll,oneof:"body"},{no:5,name:"text",kind:"message",T:ul,oneof:"body"},{no:6,name:"counter",kind:"message",T:cl,oneof:"body"},{no:7,name:"tree",kind:"message",T:fl,oneof:"body"}]));let _e=Sn;const kn=class kn extends O{constructor(t){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new kn().fromBinary(t,r)}static fromJson(t,r){return new kn().fromJson(t,r)}static fromJsonString(t,r){return new kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(kn,t,r)}};u(kn,"runtime",f),u(kn,"typeName","yorkie.v1.JSONElement.JSONObject"),u(kn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Qp,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let ol=kn;const Tn=class Tn extends O{constructor(t){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Tn().fromBinary(t,r)}static fromJson(t,r){return new Tn().fromJson(t,r)}static fromJsonString(t,r){return new Tn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Tn,t,r)}};u(Tn,"runtime",f),u(Tn,"typeName","yorkie.v1.JSONElement.JSONArray"),u(Tn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:dl,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let al=Tn;const An=class An extends O{constructor(t){super();u(this,"type",0);u(this,"value",new Uint8Array(0));u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new An().fromBinary(t,r)}static fromJson(t,r){return new An().fromJson(t,r)}static fromJsonString(t,r){return new An().fromJsonString(t,r)}static equals(t,r){return f.util.equals(An,t,r)}};u(An,"runtime",f),u(An,"typeName","yorkie.v1.JSONElement.Primitive"),u(An,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(z)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"moved_at",kind:"message",T:b},{no:5,name:"removed_at",kind:"message",T:b}]));let ll=An;const In=class In extends O{constructor(t){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new In().fromBinary(t,r)}static fromJson(t,r){return new In().fromJson(t,r)}static fromJsonString(t,r){return new In().fromJsonString(t,r)}static equals(t,r){return f.util.equals(In,t,r)}};u(In,"runtime",f),u(In,"typeName","yorkie.v1.JSONElement.Text"),u(In,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:hl,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let ul=In;const En=class En extends O{constructor(t){super();u(this,"type",0);u(this,"value",new Uint8Array(0));u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new En().fromBinary(t,r)}static fromJson(t,r){return new En().fromJson(t,r)}static fromJsonString(t,r){return new En().fromJsonString(t,r)}static equals(t,r){return f.util.equals(En,t,r)}};u(En,"runtime",f),u(En,"typeName","yorkie.v1.JSONElement.Counter"),u(En,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(z)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"moved_at",kind:"message",T:b},{no:5,name:"removed_at",kind:"message",T:b}]));let cl=En;const xn=class xn extends O{constructor(t){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new xn().fromBinary(t,r)}static fromJson(t,r){return new xn().fromJson(t,r)}static fromJsonString(t,r){return new xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(xn,t,r)}};u(xn,"runtime",f),u(xn,"typeName","yorkie.v1.JSONElement.Tree"),u(xn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:yo,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let fl=xn;var ht;let Qp=(ht=class extends O{constructor(t){super();u(this,"key","");u(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new ht().fromBinary(t,r)}static fromJson(t,r){return new ht().fromJson(t,r)}static fromJsonString(t,r){return new ht().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ht,t,r)}},u(ht,"runtime",f),u(ht,"typeName","yorkie.v1.RHTNode"),u(ht,"fields",f.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:_e}])),ht);const jt=class jt extends O{constructor(t){super();u(this,"next");u(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new jt().fromBinary(t,r)}static fromJson(t,r){return new jt().fromJson(t,r)}static fromJsonString(t,r){return new jt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(jt,t,r)}};u(jt,"runtime",f),u(jt,"typeName","yorkie.v1.RGANode"),u(jt,"fields",f.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:jt},{no:2,name:"element",kind:"message",T:_e}]));let dl=jt;const Cn=class Cn extends O{constructor(t){super();u(this,"value","");u(this,"updatedAt");u(this,"isRemoved",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new Cn().fromBinary(t,r)}static fromJson(t,r){return new Cn().fromJson(t,r)}static fromJsonString(t,r){return new Cn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Cn,t,r)}};u(Cn,"runtime",f),u(Cn,"typeName","yorkie.v1.NodeAttr"),u(Cn,"fields",f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:b},{no:3,name:"is_removed",kind:"scalar",T:8}]));let ds=Cn;const Nn=class Nn extends O{constructor(t){super();u(this,"id");u(this,"value","");u(this,"removedAt");u(this,"insPrevId");u(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Nn().fromBinary(t,r)}static fromJson(t,r){return new Nn().fromJson(t,r)}static fromJsonString(t,r){return new Nn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Nn,t,r)}};u(Nn,"runtime",f),u(Nn,"typeName","yorkie.v1.TextNode"),u(Nn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:po},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:b},{no:4,name:"ins_prev_id",kind:"message",T:po},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:ds}}]));let hl=Nn;const Pn=class Pn extends O{constructor(t){super();u(this,"createdAt");u(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Pn().fromBinary(t,r)}static fromJson(t,r){return new Pn().fromJson(t,r)}static fromJsonString(t,r){return new Pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Pn,t,r)}};u(Pn,"runtime",f),u(Pn,"typeName","yorkie.v1.TextNodeID"),u(Pn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5}]));let po=Pn;const Dn=class Dn extends O{constructor(t){super();u(this,"id");u(this,"type","");u(this,"value","");u(this,"removedAt");u(this,"insPrevId");u(this,"insNextId");u(this,"depth",0);u(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Dn().fromBinary(t,r)}static fromJson(t,r){return new Dn().fromJson(t,r)}static fromJsonString(t,r){return new Dn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Dn,t,r)}};u(Dn,"runtime",f),u(Dn,"typeName","yorkie.v1.TreeNode"),u(Dn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Wr},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:b},{no:5,name:"ins_prev_id",kind:"message",T:Wr},{no:6,name:"ins_next_id",kind:"message",T:Wr},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:ds}}]));let yo=Dn;const On=class On extends O{constructor(t){super();u(this,"content",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new On().fromBinary(t,r)}static fromJson(t,r){return new On().fromJson(t,r)}static fromJsonString(t,r){return new On().fromJsonString(t,r)}static equals(t,r){return f.util.equals(On,t,r)}};u(On,"runtime",f),u(On,"typeName","yorkie.v1.TreeNodes"),u(On,"fields",f.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:yo,repeated:!0}]));let gl=On;const Rn=class Rn extends O{constructor(t){super();u(this,"createdAt");u(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Rn().fromBinary(t,r)}static fromJson(t,r){return new Rn().fromJson(t,r)}static fromJsonString(t,r){return new Rn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Rn,t,r)}};u(Rn,"runtime",f),u(Rn,"typeName","yorkie.v1.TreeNodeID"),u(Rn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5}]));let Wr=Rn;const Ln=class Ln extends O{constructor(t){super();u(this,"parentId");u(this,"leftSiblingId");f.util.initPartial(t,this)}static fromBinary(t,r){return new Ln().fromBinary(t,r)}static fromJson(t,r){return new Ln().fromJson(t,r)}static fromJsonString(t,r){return new Ln().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Ln,t,r)}};u(Ln,"runtime",f),u(Ln,"typeName","yorkie.v1.TreePos"),u(Ln,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:Wr},{no:2,name:"left_sibling_id",kind:"message",T:Wr}]));let Ai=Ln;const Bn=class Bn extends O{constructor(t){super();u(this,"id","");u(this,"username","");u(this,"createdAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Bn().fromBinary(t,r)}static fromJson(t,r){return new Bn().fromJson(t,r)}static fromJsonString(t,r){return new Bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Bn,t,r)}};u(Bn,"runtime",f),u(Bn,"typeName","yorkie.v1.User"),u(Bn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:Re}]));let _h=Bn;const bn=class bn extends O{constructor(t){super();u(this,"id","");u(this,"name","");u(this,"publicKey","");u(this,"secretKey","");u(this,"authWebhookUrl","");u(this,"authWebhookMethods",[]);u(this,"clientDeactivateThreshold","");u(this,"createdAt");u(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new bn().fromBinary(t,r)}static fromJson(t,r){return new bn().fromJson(t,r)}static fromJsonString(t,r){return new bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(bn,t,r)}};u(bn,"runtime",f),u(bn,"typeName","yorkie.v1.Project"),u(bn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:Re},{no:9,name:"updated_at",kind:"message",T:Re}]));let Gh=bn;const Fn=class Fn extends O{constructor(t){super();u(this,"name");u(this,"authWebhookUrl");u(this,"authWebhookMethods");u(this,"clientDeactivateThreshold");f.util.initPartial(t,this)}static fromBinary(t,r){return new Fn().fromBinary(t,r)}static fromJson(t,r){return new Fn().fromJson(t,r)}static fromJsonString(t,r){return new Fn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Fn,t,r)}};u(Fn,"runtime",f),u(Fn,"typeName","yorkie.v1.UpdatableProjectFields"),u(Fn,"fields",f.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:Qe},{no:2,name:"auth_webhook_url",kind:"message",T:Qe},{no:3,name:"auth_webhook_methods",kind:"message",T:Ec},{no:4,name:"client_deactivate_threshold",kind:"message",T:Qe}]));let Yh=Fn;const Mn=class Mn extends O{constructor(t){super();u(this,"methods",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Mn().fromBinary(t,r)}static fromJson(t,r){return new Mn().fromJson(t,r)}static fromJsonString(t,r){return new Mn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Mn,t,r)}};u(Mn,"runtime",f),u(Mn,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),u(Mn,"fields",f.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let Ec=Mn;const Jn=class Jn extends O{constructor(t){super();u(this,"id","");u(this,"key","");u(this,"snapshot","");u(this,"createdAt");u(this,"accessedAt");u(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Jn().fromBinary(t,r)}static fromJson(t,r){return new Jn().fromJson(t,r)}static fromJsonString(t,r){return new Jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Jn,t,r)}};u(Jn,"runtime",f),u(Jn,"typeName","yorkie.v1.DocumentSummary"),u(Jn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Re},{no:5,name:"accessed_at",kind:"message",T:Re},{no:6,name:"updated_at",kind:"message",T:Re}]));let Qh=Jn;const $n=class $n extends O{constructor(t){super();u(this,"type",0);u(this,"presence");f.util.initPartial(t,this)}static fromBinary(t,r){return new $n().fromBinary(t,r)}static fromJson(t,r){return new $n().fromJson(t,r)}static fromJsonString(t,r){return new $n().fromJsonString(t,r)}static equals(t,r){return f.util.equals($n,t,r)}};u($n,"runtime",f),u($n,"typeName","yorkie.v1.PresenceChange"),u($n,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Ii)},{no:2,name:"presence",kind:"message",T:_f}]));let vo=$n;var Ii=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(Ii||{});f.util.setEnumType(Ii,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);var gt;let _f=(gt=class extends O{constructor(t){super();u(this,"data",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new gt().fromBinary(t,r)}static fromJson(t,r){return new gt().fromJson(t,r)}static fromJsonString(t,r){return new gt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gt,t,r)}},u(gt,"runtime",f),u(gt,"typeName","yorkie.v1.Presence"),u(gt,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}])),gt);var mt;let Xp=(mt=class extends O{constructor(t){super();u(this,"serverSeq",re.zero);u(this,"clientSeq",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new mt().fromBinary(t,r)}static fromJson(t,r){return new mt().fromJson(t,r)}static fromJsonString(t,r){return new mt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mt,t,r)}},u(mt,"runtime",f),u(mt,"typeName","yorkie.v1.Checkpoint"),u(mt,"fields",f.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),mt);const zn=class zn extends O{constructor(t){super();u(this,"createdAt");u(this,"offset",0);u(this,"relativeOffset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new zn().fromBinary(t,r)}static fromJson(t,r){return new zn().fromJson(t,r)}static fromJsonString(t,r){return new zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(zn,t,r)}};u(zn,"runtime",f),u(zn,"typeName","yorkie.v1.TextNodePos"),u(zn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let kr=zn;var pt;let b=(pt=class extends O{constructor(t){super();u(this,"lamport",re.zero);u(this,"delimiter",0);u(this,"actorId",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new pt().fromBinary(t,r)}static fromJson(t,r){return new pt().fromJson(t,r)}static fromJsonString(t,r){return new pt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pt,t,r)}},u(pt,"runtime",f),u(pt,"typeName","yorkie.v1.TimeTicket"),u(pt,"fields",f.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),pt);const Un=class Un extends O{constructor(t){super();u(this,"topic","");u(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new Un().fromBinary(t,r)}static fromJson(t,r){return new Un().fromJson(t,r)}static fromJsonString(t,r){return new Un().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Un,t,r)}};u(Un,"runtime",f),u(Un,"typeName","yorkie.v1.DocEventBody"),u(Un,"fields",f.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let xc=Un;const jn=class jn extends O{constructor(t){super();u(this,"type",0);u(this,"publisher","");u(this,"body");f.util.initPartial(t,this)}static fromBinary(t,r){return new jn().fromBinary(t,r)}static fromJson(t,r){return new jn().fromJson(t,r)}static fromJsonString(t,r){return new jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(jn,t,r)}};u(jn,"runtime",f),u(jn,"typeName","yorkie.v1.DocEvent"),u(jn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(yi)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:xc}]));let Cc=jn;const Vn=class Vn extends O{constructor(t){super();u(this,"clientKey","");u(this,"metadata",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Vn().fromBinary(t,r)}static fromJson(t,r){return new Vn().fromJson(t,r)}static fromJsonString(t,r){return new Vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Vn,t,r)}};u(Vn,"runtime",f),u(Vn,"typeName","yorkie.v1.ActivateClientRequest"),u(Vn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Nc=Vn;const qn=class qn extends O{constructor(t){super();u(this,"clientId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new qn().fromBinary(t,r)}static fromJson(t,r){return new qn().fromJson(t,r)}static fromJsonString(t,r){return new qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(qn,t,r)}};u(qn,"runtime",f),u(qn,"typeName","yorkie.v1.ActivateClientResponse"),u(qn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Pc=qn;const Kn=class Kn extends O{constructor(t){super();u(this,"clientId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Kn().fromBinary(t,r)}static fromJson(t,r){return new Kn().fromJson(t,r)}static fromJsonString(t,r){return new Kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Kn,t,r)}};u(Kn,"runtime",f),u(Kn,"typeName","yorkie.v1.DeactivateClientRequest"),u(Kn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Dc=Kn;const Wn=class Wn extends O{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new Wn().fromBinary(e,t)}static fromJson(e,t){return new Wn().fromJson(e,t)}static fromJsonString(e,t){return new Wn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Wn,e,t)}};u(Wn,"runtime",f),u(Wn,"typeName","yorkie.v1.DeactivateClientResponse"),u(Wn,"fields",f.util.newFieldList(()=>[]));let Oc=Wn;const Hn=class Hn extends O{constructor(t){super();u(this,"clientId","");u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new Hn().fromBinary(t,r)}static fromJson(t,r){return new Hn().fromJson(t,r)}static fromJsonString(t,r){return new Hn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Hn,t,r)}};u(Hn,"runtime",f),u(Hn,"typeName","yorkie.v1.AttachDocumentRequest"),u(Hn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Ir}]));let Rc=Hn;const _n=class _n extends O{constructor(t){super();u(this,"documentId","");u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new _n().fromBinary(t,r)}static fromJson(t,r){return new _n().fromJson(t,r)}static fromJsonString(t,r){return new _n().fromJsonString(t,r)}static equals(t,r){return f.util.equals(_n,t,r)}};u(_n,"runtime",f),u(_n,"typeName","yorkie.v1.AttachDocumentResponse"),u(_n,"fields",f.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Ir}]));let Lc=_n;const Gn=class Gn extends O{constructor(t){super();u(this,"clientId","");u(this,"documentId","");u(this,"changePack");u(this,"removeIfNotAttached",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new Gn().fromBinary(t,r)}static fromJson(t,r){return new Gn().fromJson(t,r)}static fromJsonString(t,r){return new Gn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Gn,t,r)}};u(Gn,"runtime",f),u(Gn,"typeName","yorkie.v1.DetachDocumentRequest"),u(Gn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Ir},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let Bc=Gn;const Yn=class Yn extends O{constructor(t){super();u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new Yn().fromBinary(t,r)}static fromJson(t,r){return new Yn().fromJson(t,r)}static fromJsonString(t,r){return new Yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Yn,t,r)}};u(Yn,"runtime",f),u(Yn,"typeName","yorkie.v1.DetachDocumentResponse"),u(Yn,"fields",f.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:Ir}]));let bc=Yn;const Qn=class Qn extends O{constructor(t){super();u(this,"clientId","");u(this,"documentId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Qn().fromBinary(t,r)}static fromJson(t,r){return new Qn().fromJson(t,r)}static fromJsonString(t,r){return new Qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Qn,t,r)}};u(Qn,"runtime",f),u(Qn,"typeName","yorkie.v1.WatchDocumentRequest"),u(Qn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let Fc=Qn;const Xn=class Xn extends O{constructor(t){super();u(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new Xn().fromBinary(t,r)}static fromJson(t,r){return new Xn().fromJson(t,r)}static fromJsonString(t,r){return new Xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Xn,t,r)}};u(Xn,"runtime",f),u(Xn,"typeName","yorkie.v1.WatchDocumentResponse"),u(Xn,"fields",f.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:Jc,oneof:"body"},{no:2,name:"event",kind:"message",T:Cc,oneof:"body"}]));let Mc=Xn;const Zn=class Zn extends O{constructor(t){super();u(this,"clientIds",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Zn().fromBinary(t,r)}static fromJson(t,r){return new Zn().fromJson(t,r)}static fromJsonString(t,r){return new Zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Zn,t,r)}};u(Zn,"runtime",f),u(Zn,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),u(Zn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let Jc=Zn;const er=class er extends O{constructor(t){super();u(this,"clientId","");u(this,"documentId","");u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new er().fromBinary(t,r)}static fromJson(t,r){return new er().fromJson(t,r)}static fromJsonString(t,r){return new er().fromJsonString(t,r)}static equals(t,r){return f.util.equals(er,t,r)}};u(er,"runtime",f),u(er,"typeName","yorkie.v1.RemoveDocumentRequest"),u(er,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Ir}]));let $c=er;const tr=class tr extends O{constructor(t){super();u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new tr().fromBinary(t,r)}static fromJson(t,r){return new tr().fromJson(t,r)}static fromJsonString(t,r){return new tr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(tr,t,r)}};u(tr,"runtime",f),u(tr,"typeName","yorkie.v1.RemoveDocumentResponse"),u(tr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Ir}]));let zc=tr;const nr=class nr extends O{constructor(t){super();u(this,"clientId","");u(this,"documentId","");u(this,"changePack");u(this,"pushOnly",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new nr().fromBinary(t,r)}static fromJson(t,r){return new nr().fromJson(t,r)}static fromJsonString(t,r){return new nr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(nr,t,r)}};u(nr,"runtime",f),u(nr,"typeName","yorkie.v1.PushPullChangesRequest"),u(nr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Ir},{no:4,name:"push_only",kind:"scalar",T:8}]));let Uc=nr;const rr=class rr extends O{constructor(t){super();u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new rr().fromBinary(t,r)}static fromJson(t,r){return new rr().fromJson(t,r)}static fromJsonString(t,r){return new rr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(rr,t,r)}};u(rr,"runtime",f),u(rr,"typeName","yorkie.v1.PushPullChangesResponse"),u(rr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Ir}]));let jc=rr;const ir=class ir extends O{constructor(t){super();u(this,"clientId","");u(this,"documentId","");u(this,"topic","");u(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new ir().fromBinary(t,r)}static fromJson(t,r){return new ir().fromJson(t,r)}static fromJsonString(t,r){return new ir().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ir,t,r)}};u(ir,"runtime",f),u(ir,"typeName","yorkie.v1.BroadcastRequest"),u(ir,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let Vc=ir;const sr=class sr extends O{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new sr().fromBinary(e,t)}static fromJson(e,t){return new sr().fromJson(e,t)}static fromJsonString(e,t){return new sr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(sr,e,t)}};u(sr,"runtime",f),u(sr,"typeName","yorkie.v1.BroadcastResponse"),u(sr,"fields",f.util.newFieldList(()=>[]));let qc=sr;const O1={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Nc,O:Pc,kind:Fe.Unary},deactivateClient:{name:"DeactivateClient",I:Dc,O:Oc,kind:Fe.Unary},attachDocument:{name:"AttachDocument",I:Rc,O:Lc,kind:Fe.Unary},detachDocument:{name:"DetachDocument",I:Bc,O:bc,kind:Fe.Unary},removeDocument:{name:"RemoveDocument",I:$c,O:zc,kind:Fe.Unary},pushPullChanges:{name:"PushPullChanges",I:Uc,O:jc,kind:Fe.Unary},watchDocument:{name:"WatchDocument",I:Fc,O:Mc,kind:Fe.ServerStreaming},broadcast:{name:"Broadcast",I:Vc,O:qc,kind:Fe.Unary}}},R1=f.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);f.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:fr}]);f.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:L1,repeated:!0}]);const L1=f.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"QuotaFailure_Violation"});f.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:B1,repeated:!0}]);const B1=f.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});f.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:b1,repeated:!0}]);const b1=f.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"BadRequest_FieldViolation"});f.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:F1,repeated:!0}]);const F1=f.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"});f.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var S=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrDocumentNotAttached="ErrDocumentNotAttached",n.ErrDocumentNotDetached="ErrDocumentNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n))(S||{});class k extends Error{constructor(t,r){super(r);u(this,"name","YorkieError");u(this,"stack");this.code=t,this.message=r,this.toString=()=>`[code=${this.code}]: ${this.message}`}}function Nt(n){if(n instanceof Map){const e=Array.from(n);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(n))}const Zp=n=>n?Object.entries(n).length===0:!0,hs=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.stringify(r);return e},es=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.parse(r);return e};var Xr=(n=>(n.Put="put",n.Clear="clear",n))(Xr||{});class Au{constructor(e,t){u(this,"context");u(this,"presence");this.context=e,this.presence=t}set(e,t){for(const r of Object.keys(e))this.presence[r]=e[r];this.context.setPresenceChange({type:"put",presence:Nt(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:"clear"})}}const Jl="000000000000000000000000";class kt{constructor(e,t,r){u(this,"lamport");u(this,"delimiter");u(this,"actorID");this.lamport=e,this.delimiter=t,this.actorID=r}static of(e,t,r){return new kt(e,t,r)}static fromStruct(e){return kt.of(BigInt(e.lamport),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new kt(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport>e.lamport)return 1;if(e.lamport>this.lamport)return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const ey=0,_s=9223372036854775807n,bt=new kt(0n,ey,Jl);function en(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class Do{constructor(e){u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class Hr extends Do{constructor(e){super(e)}}class Gf{constructor(e,t){u(this,"strKey");u(this,"value");this.strKey=e,this.value=t}static of(e,t){return new Gf(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class wo{constructor(){u(this,"nodeMapByKey");u(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new wo}set(e,t,r){let i;const s=this.nodeMapByKey.get(e);s!=null&&!s.isRemoved()&&s.remove(r)&&(i=s.getValue());const o=Gf.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),o),(s==null||r.after(s.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,o),t.setMovedAt(r)),i}delete(e,t){if(!this.nodeMapByCreatedAt.has(e.toIDString()))throw new k(S.ErrInvalidArgument,`fail to find ${e.toIDString()}`);const r=this.nodeMapByCreatedAt.get(e.toIDString());return r.remove(t),r.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new k(S.ErrInvalidArgument,`fail to find ${e.getCreatedAt().toIDString()}`);const r=this.nodeMapByKey.get(t.getStrKey());t===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const r=this.nodeMapByKey.get(e);if(r!=null&&r.remove(t))return r.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class He extends Hr{constructor(t,r){super(t);u(this,"memberNodes");this.memberNodes=r}static create(t,r){if(!r)return new He(t,wo.create());const i=wo.create();for(const[s,o]of Object.entries(r))i.set(s,o.deepcopy(),o.getCreatedAt());return new He(t,i)}subPathOf(t){return this.memberNodes.subPathOf(t)}purge(t){this.memberNodes.purge(t)}set(t,r,i){return this.memberNodes.set(t,r,i)}delete(t,r){return this.memberNodes.delete(t,r)}deleteByKey(t,r){return this.memberNodes.deleteByKey(t,r)}get(t){const r=this.memberNodes.get(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.memberNodes.getByID(t);return r==null?void 0:r.getValue()}has(t){return this.memberNodes.has(t)}toJSON(){const t=[];for(const[r,i]of this)t.push(`"${en(r)}":${i.toJSON()}`);return`{${t.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(const[r,i]of this){const{createdAt:s,value:o,type:a}=i.toJSForTest();t[r]={key:r,createdAt:s,value:o,type:a}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_OBJECT"}}getKeys(){const t=Array();for(const[r]of this)t.push(r);return t}toSortedJSON(){var i;const t=Array();for(const[s]of this)t.push(s);const r=[];for(const s of t.sort()){const o=(i=this.memberNodes.get(s))==null?void 0:i.getValue();r.push(`"${en(s)}":${o.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const t=He.create(this.getCreatedAt());for(const r of this.memberNodes)t.memberNodes.set(r.getStrKey(),r.getValue().deepcopy(),this.getPositionedAt());return t.remove(this.getRemovedAt()),t}getDescendants(t){for(const r of this.memberNodes){const i=r.getValue();if(t(i,this))return;i instanceof Hr&&i.getDescendants(t)}}*[Symbol.iterator](){const t=new Set;for(const r of this.memberNodes)t.has(r.getStrKey())||(t.add(r.getStrKey()),r.isRemoved()||(yield[r.getStrKey(),r.getValue()]))}}var Y=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(Y||{});class Jt{constructor(e,t){u(this,"parentCreatedAt");u(this,"executedAt");this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new k(S.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class ty{constructor(e){u(this,"value");u(this,"left");u(this,"right");u(this,"parent");u(this,"weight");this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class So{constructor(e){u(this,"root");this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}if(e>t.getLength())throw new k(S.ErrInvalidArgument,`out of index range: pos: ${e} > node.length: ${t.getLength()}`);return this.splayNode(t),[t,e]}indexOf(e){return!e||e!==this.root&&!e.hasLinks()?-1:(this.splayNode(e),this.root.getLeftWeight())}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new So(e.getLeft());t.root&&t.root.setParent();const r=new So(e.getRight());if(r.root&&r.root.setParent(),t.root){const i=t.getRightmost();t.splayNode(i),t.root.setRight(r.root),r.root&&r.root.setParent(t.root),this.root=t.root}else this.root=r.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const r of t)r.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){e&&(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){e&&(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var vt=null;try{vt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function K(n,e,t){this.low=n|0,this.high=e|0,this.unsigned=!!t}K.prototype.__isLong__;Object.defineProperty(K.prototype,"__isLong__",{value:!0});function Be(n){return(n&&n.__isLong__)===!0}function Xh(n){var e=Math.clz32(n&-n);return n?31-e:e}K.isLong=Be;var Zh={},eg={};function Ni(n,e){var t,r,i;return e?(n>>>=0,(i=0<=n&&n<256)&&(r=eg[n],r)?r:(t=H(n,0,!0),i&&(eg[n]=t),t)):(n|=0,(i=-128<=n&&n<128)&&(r=Zh[n],r)?r:(t=H(n,n<0?-1:0,!1),i&&(Zh[n]=t),t))}K.fromInt=Ni;function wt(n,e){if(isNaN(n))return e?hr:Ot;if(e){if(n<0)return hr;if(n>=ny)return sy}else{if(n<=-ng)return Ve;if(n+1>=ng)return iy}return n<0?wt(-n,e).neg():H(n%gs|0,n/gs|0,e)}K.fromNumber=wt;function H(n,e,t){return new K(n,e,t)}K.fromBits=H;var ml=Math.pow;function Yf(n,e,t){if(n.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return e?hr:Ot;if(t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return Yf(n.substring(1),e,t).neg();for(var i=wt(ml(t,8)),s=Ot,o=0;o<n.length;o+=8){var a=Math.min(8,n.length-o),l=parseInt(n.substring(o,o+a),t);if(a<8){var c=wt(ml(t,a));s=s.mul(c).add(wt(l))}else s=s.mul(i),s=s.add(wt(l))}return s.unsigned=e,s}K.fromString=Yf;function $t(n,e){return typeof n=="number"?wt(n,e):typeof n=="string"?Yf(n,e):H(n.low,n.high,typeof e=="boolean"?e:n.unsigned)}K.fromValue=$t;var tg=65536,M1=1<<24,gs=tg*tg,ny=gs*gs,ng=ny/2,rg=Ni(M1),Ot=Ni(0);K.ZERO=Ot;var hr=Ni(0,!0);K.UZERO=hr;var Wi=Ni(1);K.ONE=Wi;var ry=Ni(1,!0);K.UONE=ry;var Kc=Ni(-1);K.NEG_ONE=Kc;var iy=H(-1,2147483647,!1);K.MAX_VALUE=iy;var sy=H(-1,-1,!0);K.MAX_UNSIGNED_VALUE=sy;var Ve=H(0,-2147483648,!1);K.MIN_VALUE=Ve;var C=K.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low};C.toNumber=function(){return this.unsigned?(this.high>>>0)*gs+(this.low>>>0):this.high*gs+(this.low>>>0)};C.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Ve)){var t=wt(e),r=this.div(t),i=r.mul(t).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=wt(ml(e,6),this.unsigned),o=this,a="";;){var l=o.div(s),c=o.sub(l.mul(s)).toInt()>>>0,d=c.toString(e);if(o=l,o.isZero())return d+a;for(;d.length<6;)d="0"+d;a=""+d+a}};C.getHighBits=function(){return this.high};C.getHighBitsUnsigned=function(){return this.high>>>0};C.getLowBits=function(){return this.low};C.getLowBitsUnsigned=function(){return this.low>>>0};C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ve)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1};C.isZero=function(){return this.high===0&&this.low===0};C.eqz=C.isZero;C.isNegative=function(){return!this.unsigned&&this.high<0};C.isPositive=function(){return this.unsigned||this.high>=0};C.isOdd=function(){return(this.low&1)===1};C.isEven=function(){return(this.low&1)===0};C.equals=function(e){return Be(e)||(e=$t(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};C.eq=C.equals;C.notEquals=function(e){return!this.eq(e)};C.neq=C.notEquals;C.ne=C.notEquals;C.lessThan=function(e){return this.comp(e)<0};C.lt=C.lessThan;C.lessThanOrEqual=function(e){return this.comp(e)<=0};C.lte=C.lessThanOrEqual;C.le=C.lessThanOrEqual;C.greaterThan=function(e){return this.comp(e)>0};C.gt=C.greaterThan;C.greaterThanOrEqual=function(e){return this.comp(e)>=0};C.gte=C.greaterThanOrEqual;C.ge=C.greaterThanOrEqual;C.compare=function(e){if(Be(e)||(e=$t(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};C.comp=C.compare;C.negate=function(){return!this.unsigned&&this.eq(Ve)?Ve:this.not().add(Wi)};C.neg=C.negate;C.add=function(e){Be(e)||(e=$t(e));var t=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,d=0,h=0,m=0,y=0;return y+=s+c,m+=y>>>16,y&=65535,m+=i+l,h+=m>>>16,m&=65535,h+=r+a,d+=h>>>16,h&=65535,d+=t+o,d&=65535,H(m<<16|y,d<<16|h,this.unsigned)};C.subtract=function(e){return Be(e)||(e=$t(e)),this.add(e.neg())};C.sub=C.subtract;C.multiply=function(e){if(this.isZero())return this;if(Be(e)||(e=$t(e)),vt){var t=vt.mul(this.low,this.high,e.low,e.high);return H(t,vt.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?hr:Ot;if(this.eq(Ve))return e.isOdd()?Ve:Ot;if(e.eq(Ve))return this.isOdd()?Ve:Ot;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(rg)&&e.lt(rg))return wt(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,d=e.low&65535,h=0,m=0,y=0,w=0;return w+=o*d,y+=w>>>16,w&=65535,y+=s*d,m+=y>>>16,y&=65535,y+=o*c,m+=y>>>16,y&=65535,m+=i*d,h+=m>>>16,m&=65535,m+=s*c,h+=m>>>16,m&=65535,m+=o*l,h+=m>>>16,m&=65535,h+=r*d+i*c+s*l+o*a,h&=65535,H(y<<16|w,h<<16|m,this.unsigned)};C.mul=C.multiply;C.divide=function(e){if(Be(e)||(e=$t(e)),e.isZero())throw Error("division by zero");if(vt){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?vt.div_u:vt.div_s)(this.low,this.high,e.low,e.high);return H(t,vt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?hr:Ot;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return hr;if(e.gt(this.shru(1)))return ry;s=hr}else{if(this.eq(Ve)){if(e.eq(Wi)||e.eq(Kc))return Ve;if(e.eq(Ve))return Wi;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Ot)?e.isNegative()?Wi:Kc:(i=this.sub(e.mul(r)),s=r.add(i.div(e)),s)}else if(e.eq(Ve))return this.unsigned?hr:Ot;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=Ot}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:ml(2,a-48),c=wt(r),d=c.mul(e);d.isNegative()||d.gt(i);)r-=l,c=wt(r,this.unsigned),d=c.mul(e);c.isZero()&&(c=Wi),s=s.add(c),i=i.sub(d)}return s};C.div=C.divide;C.modulo=function(e){if(Be(e)||(e=$t(e)),vt){var t=(this.unsigned?vt.rem_u:vt.rem_s)(this.low,this.high,e.low,e.high);return H(t,vt.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};C.mod=C.modulo;C.rem=C.modulo;C.not=function(){return H(~this.low,~this.high,this.unsigned)};C.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};C.clz=C.countLeadingZeros;C.countTrailingZeros=function(){return this.low?Xh(this.low):Xh(this.high)+32};C.ctz=C.countTrailingZeros;C.and=function(e){return Be(e)||(e=$t(e)),H(this.low&e.low,this.high&e.high,this.unsigned)};C.or=function(e){return Be(e)||(e=$t(e)),H(this.low|e.low,this.high|e.high,this.unsigned)};C.xor=function(e){return Be(e)||(e=$t(e)),H(this.low^e.low,this.high^e.high,this.unsigned)};C.shiftLeft=function(e){return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?H(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):H(0,this.low<<e-32,this.unsigned)};C.shl=C.shiftLeft;C.shiftRight=function(e){return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?H(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):H(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};C.shr=C.shiftRight;C.shiftRightUnsigned=function(e){return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?H(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?H(this.high,0,this.unsigned):H(this.high>>>e-32,0,this.unsigned)};C.shru=C.shiftRightUnsigned;C.shr_u=C.shiftRightUnsigned;C.rotateLeft=function(e){var t;return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?H(this.high,this.low,this.unsigned):e<32?(t=32-e,H(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,H(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))};C.rotl=C.rotateLeft;C.rotateRight=function(e){var t;return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?H(this.high,this.low,this.unsigned):e<32?(t=32-e,H(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,H(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))};C.rotr=C.rotateRight;C.toSigned=function(){return this.unsigned?H(this.low,this.high,!1):this};C.toUnsigned=function(){return this.unsigned?this:H(this.low,this.high,!0)};C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};C.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};K.fromBytes=function(e,t,r){return r?K.fromBytesLE(e,t):K.fromBytesBE(e,t)};K.fromBytesLE=function(e,t){return new K(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};K.fromBytesBE=function(e,t){return new K(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var ve=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(ve||{});class se extends Do{constructor(t,r){super(r);u(this,"valueType");u(this,"value");this.valueType=se.getPrimitiveType(t),this.value=t===void 0?null:t}static of(t,r){return new se(t,r)}static valueFromBytes(t,r){switch(t){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const i=new DataView(r.buffer);return r.forEach(function(s,o){i.setUint8(o,s)}),i.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return K.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(K.fromBytesLE(Array.from(r),!0).toNumber());default:throw new k(S.ErrUnimplemented,`unimplemented type: ${t}`)}}toJSON(){return this.valueType===5?`"${en(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const t=se.of(this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t.setRemovedAt(this.getRemovedAt()),t}getType(){return this.valueType}static getPrimitiveType(t){switch(typeof t){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(t)?2:4;case"string":return 5;case"object":if(t===null)return 0;if(t instanceof K)return 3;if(t instanceof Uint8Array)return 6;if(t instanceof Date)return 7}}static isSupport(t){return se.getPrimitiveType(t)!==void 0}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===2||t===3||t===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 4:{const t=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,t,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const t=this.value,r=K.fromNumber(t.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new k(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class pl extends ty{constructor(t){super(t);u(this,"prev");u(this,"next");this.value=t}static createAfter(t,r){const i=new pl(r),s=t.next;return t.next=i,i.prev=t,i.next=s,s&&(s.prev=i),i}remove(t){return this.value.remove(t)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class ko{constructor(){u(this,"dummyHead");u(this,"last");u(this,"nodeMapByIndex");u(this,"nodeMapByCreatedAt");const e=se.of(0,bt);e.setRemovedAt(bt),this.dummyHead=new pl(e),this.last=this.dummyHead,this.nodeMapByIndex=new So,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new ko}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let r=this.nodeMapByCreatedAt.get(e.toIDString());if(!r)throw new k(S.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);for(;r.getNext()&&r.getNext().getPositionedAt().after(t);)r=r.getNext();return r}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,r=t.getCreatedAt()){const i=this.findNextBeforeExecutedAt(e,r),s=pl.createAfter(i,t);i===this.last&&(this.last=s),this.nodeMapByIndex.insertAfter(i,s),this.nodeMapByCreatedAt.set(s.getCreatedAt().toIDString(),s)}moveAfter(e,t,r){const i=this.nodeMapByCreatedAt.get(e.toIDString());if(!i)throw new k(S.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);const s=this.nodeMapByCreatedAt.get(t.toIDString());if(!s)throw new k(S.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);i!==s&&(!s.getValue().getMovedAt()||r.after(s.getValue().getMovedAt()))&&(this.release(s),this.insertAfter(i.getCreatedAt(),s.getValue(),r),s.getValue().setMovedAt(r))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new k(S.ErrInvalidArgument,`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`);this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,r]=this.nodeMapByIndex.find(e);let i=t;if(e===0&&t===this.dummyHead||r>0)do i&&(i=i.getNext());while(i&&i.isRemoved());return i}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const r=this.nodeMapByCreatedAt.get(e.toIDString()),i=r.isRemoved();return r.remove(t)&&!i&&this.nodeMapByIndex.splayNode(r),r.getValue()}deleteByIndex(e,t){const r=this.getByIndex(e);if(r)return r.remove(t)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const r=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${r}}`):e.push(`[${r}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class et extends Hr{constructor(t,r){super(t);u(this,"elements");this.elements=r}static create(t,r){if(!r)return new et(t,ko.create());const i=ko.create();for(const s of r)i.insertAfter(i.getLastCreatedAt(),s.deepcopy());return new et(t,i)}subPathOf(t){return this.elements.subPathOf(t)}purge(t){this.elements.purge(t)}insertAfter(t,r){this.elements.insertAfter(t,r)}moveAfter(t,r,i){this.elements.moveAfter(t,r,i)}get(t){const r=this.elements.getByIndex(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.elements.getByID(t);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(t){return this.elements.getPrevCreatedAt(t)}delete(t,r){return this.elements.delete(t,r)}deleteByIndex(t,r){return this.elements.deleteByIndex(t,r)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const t of this.elements)t.isRemoved()||(yield t.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(t){for(const r of this.elements){const i=r.getValue();if(t(i,this))return;i instanceof Hr&&i.getDescendants(t)}}toJSON(){const t=[];for(const r of this)t.push(r.toJSON());return`[${t.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(let r=0;r<this.length;r++){const{createdAt:i,value:s,type:o}=this.get(r).toJSForTest();t[r]={key:String(r),createdAt:i,value:s,type:o}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const t=et.create(this.getCreatedAt());for(const r of this.elements)t.elements.insertAfter(t.getLastCreatedAt(),r.getValue().deepcopy());return t.remove(this.getRemovedAt()),t}}class Zr extends Jt{constructor(t,r,i){super(t,i);u(this,"createdAt");this.createdAt=r}static create(t,r,i){return new Zr(t,r,i)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof Hr))throw new k(S.ErrInvalidArgument,`only object and array can execute remove: ${i}`);if(r===Y.UndoRedo){let d=i.getByID(this.createdAt);for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.subPathOf(this.createdAt),o=this.toReverseOperation(i),a=i.delete(this.createdAt,this.getExecutedAt());return t.registerRemovedElement(a),{opInfos:i instanceof et?[{type:"remove",path:t.createPath(this.getParentCreatedAt()),index:Number(s)}]:[{type:"remove",path:t.createPath(this.getParentCreatedAt()),key:s}],reverseOp:o}}toReverseOperation(t){if(t instanceof He){const r=t.subPathOf(this.createdAt);if(r!==void 0){const i=t.get(r);if(i!==void 0)return Ei.create(r,i.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class Ei extends Jt{constructor(t,r,i,s){super(i,s);u(this,"key");u(this,"value");this.key=t,this.value=r}static create(t,r,i,s){return new Ei(t,r,i,s)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof He))throw new k(S.ErrInvalidArgument,"fail to execute, only object can execute set");if(r===Y.UndoRedo){let d=i;for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.get(this.key),o=this.toReverseOperation(s),a=this.value.deepcopy(),l=i.set(this.key,a,this.getExecutedAt());return r===Y.UndoRedo&&t.findByCreatedAt(a.getCreatedAt())&&t.deregisterElement(a),t.registerElement(a,i),l&&t.registerRemovedElement(l),{opInfos:[{type:"set",path:t.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:o}}toReverseOperation(t){let r=Zr.create(this.getParentCreatedAt(),this.value.getCreatedAt());return t!==void 0&&!t.isRemoved()&&(r=Ei.create(this.key,t.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class Oo extends Jt{constructor(t,r,i,s){super(t,s);u(this,"prevCreatedAt");u(this,"value");this.prevCreatedAt=r,this.value=i}static create(t,r,i,s){return new Oo(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof et))throw new k(S.ErrInvalidArgument,"fail to execute, only array can execute add");const i=r,s=this.value.deepcopy();return i.insertAfter(this.prevCreatedAt,s),t.registerElement(s,i),{opInfos:[{type:"add",path:t.createPath(this.getParentCreatedAt()),index:Number(i.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class Fr extends Jt{constructor(t,r,i,s){super(t,s);u(this,"prevCreatedAt");u(this,"createdAt");this.prevCreatedAt=r,this.createdAt=i}static create(t,r,i,s){return new Fr(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof et))throw new k(S.ErrInvalidArgument,"fail to execute, only array can execute move");const i=r,s=Number(i.subPathOf(this.createdAt));i.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const o=Number(i.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:t.createPath(this.getParentCreatedAt()),index:o,previousIndex:s}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class hi{constructor(e,t,r,i){u(this,"key");u(this,"value");u(this,"updatedAt");u(this,"_isRemoved");this.key=e,this.value=t,this.updatedAt=r,this._isRemoved=i}static of(e,t,r,i){return new hi(e,t,r,i)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}}class Tr{constructor(){u(this,"nodeMapByKey");u(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Tr}getNodeMapByKey(){return this.nodeMapByKey}set(e,t,r){const i=this.nodeMapByKey.get(e);if(i&&i.isRemoved()&&r.after(i.getUpdatedAt())&&(this.numberOfRemovedElement-=1),i===void 0||r.after(i.getUpdatedAt())){const s=hi.of(e,t,r,!1);return this.nodeMapByKey.set(e,s),i!==void 0&&i.isRemoved()?[i,s]:[void 0,s]}return i.isRemoved()?[i,void 0]:[void 0,void 0]}setInternal(e,t,r,i){const s=hi.of(e,t,r,i);this.nodeMapByKey.set(e,s),i&&this.numberOfRemovedElement++}remove(e,t){const r=this.nodeMapByKey.get(e),i=[];if(r===void 0||t.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const a=hi.of(e,"",t,!0);return this.nodeMapByKey.set(e,a),i.push(a),i}const s=r.isRemoved();s||(this.numberOfRemovedElement+=1),s&&i.push(r);const o=hi.of(e,r.getValue(),t,!0);return this.nodeMapByKey.set(e,o),i.push(o),i}return i}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new Tr;for(const[,t]of this.nodeMapByKey)e.setInternal(t.getKey(),t.getValue(),t.getUpdatedAt(),t.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,r]of this.nodeMapByKey)r.isRemoved()||e.push(`"${en(t)}":"${en(r.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,r]of this.nodeMapByKey)r.isRemoved()||(e[t]=r.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const t=this.nodeMapByKey.get(e.getKey());t==null||t.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}class To{constructor(e){u(this,"attributes");u(this,"content");this.attributes=Tr.create(),this.content=e}static create(e){return new To(e)}get length(){return this.content.length}substring(e,t){const r=new To(this.content.substring(e,t));return r.attributes=this.attributes.deepcopy(),r}setAttr(e,t,r){return this.attributes.set(e,t,r)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=en(this.content),t=this.attributes.toObject(),r=[];for(const[i,s]of Object.entries(t)){const o=JSON.parse(s),a=typeof o=="string"?`"${en(i)}":"${en(o)}"`:`"${en(i)}":${String(o)}`;r.push(a)}return r.sort(),r.length===0?`{"val":"${e}"}`:`{"attrs":{${r.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof hi&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const t of this.attributes)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}class It extends Do{constructor(t,r){super(r);u(this,"rgaTreeSplit");this.rgaTreeSplit=t}static create(t,r){return new It(t,r)}edit(t,r,i,s,o,a){const l=r?To.create(r):void 0;if(l&&s)for(const[w,T]of Object.entries(s))l.setAttr(w,T,i);const[c,d,h,m]=this.rgaTreeSplit.edit(t,i,l,o,a),y=m.map(w=>({...w,value:w.value?{attributes:es(w.value.getAttributes()),content:w.value.getContent()}:{attributes:void 0,content:""},type:"content"}));return[d,y,h,[c,c]]}setStyle(t,r,i,s,o){const[,a]=this.rgaTreeSplit.findNodeWithSplit(t[1],i),[,l]=this.rgaTreeSplit.findNodeWithSplit(t[0],i),c=[],d=this.rgaTreeSplit.findBetween(l,a),h=new Map,m=[];for(const w of d){const T=w.getCreatedAt().getActorID();let P,p=0n;if(o===void 0&&s===void 0?p=_s:o.size()>0?p=o.get(T)?o.get(T):0n:P=s.has(T)?s.get(T):bt,w.canStyle(i,P,p)){const g=h.get(T),v=w.getCreatedAt();(!g||v.after(g))&&h.set(T,v),m.push(w)}}const y=[];for(const w of m){if(w.isRemoved())continue;const[T,P]=this.rgaTreeSplit.findIndexesFromRange(w.createPosRange());c.push({type:"style",actor:i.getActorID(),from:T,to:P,value:{attributes:es(r)}});for(const[p,g]of Object.entries(r)){const[v]=w.getValue().setAttr(p,g,i);v!==void 0&&y.push({parent:w.getValue(),child:v})}}return[h,y,c]}indexRangeToPosRange(t,r){const i=this.rgaTreeSplit.indexToPos(t);return t===r?[i,i]:[i,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}toJSON(){const t=[];for(const r of this.rgaTreeSplit)r.isRemoved()||t.push(r.getValue().toJSON());return`[${t.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const t=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const i=r.getValue();t.push({attributes:es(i.getAttributes()),content:i.getContent()})}return t}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const t=new It(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return t.remove(this.getRemovedAt()),t}findIndexesFromRange(t){return this.rgaTreeSplit.findIndexesFromRange(t)}getGCPairs(){const t=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&t.push({parent:this.rgaTreeSplit,child:r});for(const i of r.getValue().getGCPairs())t.push(i)}return t}}class Ro extends Jt{constructor(t,r,i,s,o,a,l){super(t,l);u(this,"fromPos");u(this,"toPos");u(this,"maxCreatedAtMapByActor");u(this,"content");u(this,"attributes");this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=s,this.content=o,this.attributes=a}static create(t,r,i,s,o,a,l){return new Ro(t,r,i,s,o,a,l)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof It))throw new k(S.ErrInvalidArgument,"fail to execute, only Text can execute edit");const o=s,[,a,l]=o.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor,i);for(const c of l)t.registerGCPair(c);return{opInfos:a.map(({from:c,to:d,value:h})=>({type:"edit",from:c,to:d,value:h,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.content;return`${t}.EDIT(${r},${i},${s})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Lo extends Jt{constructor(t,r,i,s,o,a){super(t,a);u(this,"fromPos");u(this,"toPos");u(this,"maxCreatedAtMapByActor");u(this,"attributes");this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=s,this.attributes=o}static create(t,r,i,s,o,a){return new Lo(t,r,i,s,o,a)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof It))throw new k(S.ErrInvalidArgument,"fail to execute, only Text can execute edit");const o=s,[,a,l]=o.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor,i);for(const c of a)t.registerGCPair(c);return{opInfos:l.map(({from:c,to:d,value:h})=>({type:"style",from:c,to:d,value:h,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.attributes;return`${t}.STYL(${r},${i},${JSON.stringify(s)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const J1=2,$1="root",mr="text";function Os(n,e){let t=0;const r=n.children;for(let i=0;i<e;i++){const s=r[i];!s||s.isRemoved||(t+=s.paddedSize)}return t}class z1{constructor(e,t=[]){u(this,"type");u(this,"parent");u(this,"_children");u(this,"size");if(this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new k(S.ErrRefused,"Text node cannot have children")}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*t,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const t of this._children){const r=t.updateDescendantsSize();t.isRemoved||(e+=r)}return this.size+=e,this.paddedSize}get isText(){return this.type===mr}get paddedSize(){return this.size+(this.isText?0:J1)}isAncestorOf(e){return U1(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}get prevSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e-1];if(t)return t}splitText(e,t){if(e===0||e===this.size)return;const r=this.value.slice(0,e),i=this.value.slice(e);if(!i.length)return;this.value=r;const s=this.cloneText(e+t);return s.value=i,this.parent.insertAfterInternal(s,this),s}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}append(...e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this}insertBefore(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new k(S.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new k(S.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new k(S.ErrInvalidArgument,"child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const r=this.cloneElement(t);this.parent.insertAfterInternal(r,this),r.updateAncestorsSize();const i=this.children.slice(0,e),s=this.children.slice(e);this._children=i,r._children=s,this.size=this._children.reduce((o,a)=>o+a.paddedSize,0),r.size=r._children.reduce((o,a)=>o+a.paddedSize,0);for(const o of r._children)o.parent=r;return r}insertAfterInternal(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new k(S.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1)}insertAtInternal(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(i=>!i.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");let t=e;for(;t;){const r=this._children.indexOf(t);if(r!==-1)return r;t=t.parent}return-1}}function U1(n,e){if(n===e)return!1;for(;e.parent;){if(e.parent===n)return!0;e=e.parent}return!1}var me=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(me||{});function oy(n,e,t,r){if(e>t)throw new k(S.ErrInvalidArgument,`from is greater than to: ${e} > ${t}`);if(e>n.size)throw new k(S.ErrInvalidArgument,`from is out of range: ${e} > ${n.size}`);if(t>n.size)throw new k(S.ErrInvalidArgument,`to is out of range: ${t} > ${n.size}`);if(e===t)return;let i=0;for(const s of n.children){if(e-s.paddedSize<i&&i<t){const o=s.isText?e-i:e-i-1,a=s.isText?t-i:t-i-1,l=!s.isText&&o<0,c=!s.isText&&a>s.size;(s.isText||l)&&r([s,s.isText?"Text":"Start"],c),oy(s,Math.max(0,o),Math.min(a,s.size),r),c&&r([s,"End"],c)}i+=s.paddedSize}}function ay(n,e,t=0){for(const r of n.children)ay(r,e,t+1);e(n,t)}function $l(n,e,t=0){for(const r of n._children)$l(r,e,t+1);e(n,t)}function Wc(n,e,t=!0){if(e>n.size)throw new k(S.ErrInvalidArgument,`index is out of range: ${e} > ${n.size}`);if(n.isText)return{node:n,offset:e};let r=0,i=0;for(const s of n.children){if(t&&s.isText&&s.size>=e-i)return Wc(s,e-i,t);if(e===i)return{node:n,offset:r};if(!t&&s.paddedSize===e-i)return{node:n,offset:r+1};if(s.paddedSize>e-i)return Wc(s,e-i-1,t);i+=s.paddedSize,r+=1}return{node:n,offset:r}}function ly(n){return n.isText||n.children.length===0?n:ly(n.children[0])}function j1(n,e){if(n.size<e)throw new k(S.ErrInvalidArgument,"unacceptable path");for(let t=0;t<n.children.length;t++){const r=n.children[t];if(r.size<e)e-=r.size;else{n=r;break}}return{node:n,offset:e}}class V1{constructor(e){u(this,"root");this.root=e}tokensBetween(e,t,r){oy(this.root,e,t,r)}traverse(e){ay(this.root,e,0)}traverseAll(e){$l(this.root,e,0)}findTreePos(e,t=!0){return Wc(this.root,e,t)}treePosToPath(e){const t=[];let r=e.node;if(r.isText){const i=r.parent.findOffset(r);if(i===-1)throw new k(S.ErrInvalidArgument,"invalid treePos");const s=Os(r.parent,i);t.push(s+e.offset),r=r.parent}else if(r.hasTextChild()){const i=Os(r,e.offset);t.push(i)}else t.push(e.offset);for(;r.parent;){const i=r.parent.findOffset(r);if(i===-1)throw new k(S.ErrInvalidArgument,"invalid treePos");t.push(i),r=r.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new k(S.ErrInvalidArgument,"unacceptable path");let t=this.root;for(let r=0;r<e.length-1;r++){const i=e[r];if(t=t.children[i],!t)throw new k(S.ErrInvalidArgument,"unacceptable path")}if(t.hasTextChild())return j1(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new k(S.ErrInvalidArgument,"unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:r}=e;if(t.isText){if(t.size===r){const i=t.nextSibling;return i||t.parent}return t}return t.children.length===r?t:ly(t.children[r])}indexOf(e){let{node:t}=e;const{offset:r}=e;let i=0,s=1;if(t.isText){i+=r;const o=t.parent,a=o.findOffset(t);if(a===-1)throw new k(S.ErrInvalidArgument,"invalid pos");i+=Os(o,a),t=t.parent}else i+=Os(t,r);for(;t!=null&&t.parent;){const o=t.parent,a=o.findOffset(t);if(a===-1)throw new k(S.ErrInvalidArgument,"invalid pos");i+=Os(o,a),s++,t=t.parent}return i+s-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const q1=(n,e)=>n===e?0:n<e?-1:1;class K1{constructor(e,t,r){u(this,"key");u(this,"value");u(this,"parent");u(this,"left");u(this,"right");u(this,"isRed");this.key=e,this.value=t,this.isRed=r}}class W1{constructor(e){u(this,"stack");this.stack=[],this.traverseInorder(e)}traverseInorder(e){e&&(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class uy{constructor(e){u(this,"root");u(this,"comparator");u(this,"counter");this.comparator=typeof e<"u"?e:q1,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new W1(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const r=this.comparator(e,t.key);if(r>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(r<0)if(t.left)t.left.parent=t,t=t.left;else{let i=t.parent,s=t;for(;i&&s===i.left;)s=i,i=i.parent;return i}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const r=this.comparator(e,t.key);if(r===0)return t;r<0?t=t.left:r>0&&(t=t.right)}}putInternal(e,t,r){if(!r)return this.counter+=1,new K1(e,t,!0);const i=this.comparator(e,r.key);return i<0?r.left=this.putInternal(e,t,r.left):i>0?r.right=this.putInternal(e,t,r.right):r.value=t,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const r=this.min(e.right);e.value=r.value,e.key=r.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class Rt{constructor(e,t){u(this,"parentID");u(this,"leftSiblingID");this.parentID=e,this.leftSiblingID=t}static of(e,t){return new Rt(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:r}=e,i;return r.isText?(r.parent.children[0]===r&&t===0?i=r.parent:i=r,r=r.parent):t===0?i=r:i=r.children[t-1],Rt.of(r.id,Ce.of(i.getCreatedAt(),i.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return Rt.of(Ce.of(kt.fromStruct(e.parentID.createdAt),e.parentID.offset),Ce.of(kt.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const t=this.getParentID(),r=this.getLeftSiblingID(),i=e.findFloorNode(t);let s=e.findFloorNode(r);if(!i||!s)throw new k(S.ErrRefused,`cannot find node of CRDTTreePos(${t.toTestString()}, ${r.toTestString()})`);return!r.equals(t)&&r.getOffset()>0&&r.getOffset()===s.id.getOffset()&&s.insPrevID&&(s=e.findFloorNode(s.insPrevID)),[i,s]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class Ce{constructor(e,t){u(this,"createdAt");u(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new Ce(e,t)}static fromStruct(e){return Ce.of(kt.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class Xe extends z1{constructor(t,r,i,s,o){super(r);u(this,"id");u(this,"removedAt");u(this,"attrs");u(this,"insPrevID");u(this,"insNextID");u(this,"_value","");this.id=t,this.removedAt=o,s&&(this.attrs=s),typeof i=="string"?this.value=i:Array.isArray(i)&&(this._children=i)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(t,r,i,s){return new Xe(t,r,i,s)}deepcopy(){var r;const t=new Xe(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(r=this.attrs)==null?void 0:r.deepcopy(),t._children=this._children.map(i=>{const s=i.deepcopy();return s.parent=t,s}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new k(S.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(t){if(!this.isText)throw new k(S.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=t,this.size=t.length}get isRemoved(){return!!this.removedAt}remove(t){const r=!this.removedAt;(!this.removedAt||this.removedAt.compare(t)>0)&&(this.removedAt=t),r&&this.updateAncestorsSize()}cloneText(t){return new Xe(Ce.of(this.id.getCreatedAt(),t),this.type,void 0,void 0,this.removedAt)}cloneElement(t){return new Xe(Ce.of(t(),0),this.type,void 0,void 0,this.removedAt)}split(t,r,i){const s=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,i);if(s){if(s.insPrevID=this.id,this.insNextID){const o=t.findFloorNode(this.insNextID);o.insPrevID=s.id,s.insNextID=this.insNextID}this.insNextID=s.id,t.registerNode(s)}return s}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(t,r,i){return(r?!this.getCreatedAt().after(r):this.getCreatedAt().getLamport()<=i)&&(!this.removedAt||t.after(this.removedAt))}canStyle(t,r,i){return this.isText?!1:(r?!this.getCreatedAt().after(r):this.getCreatedAt().getLamport()<=i)&&(!this.removedAt||t.after(this.removedAt))}setAttrs(t,r){this.attrs||(this.attrs=new Tr);const i=[];for(const[s,o]of Object.entries(t))i.push(this.attrs.set(s,o,r));return i}purge(t){this.attrs&&this.attrs.purge(t)}getGCPairs(){const t=[];if(!this.attrs)return t;for(const r of this.attrs)r.getRemovedAt()&&t.push({parent:this,child:r});return t}}function Hc(n){var t;if(n.isText){const r=n;return{type:r.type,value:r.value}}const e={type:n.type,children:n.children.map(Hc)};return n.attrs&&(e.attributes=es((t=n.attrs)==null?void 0:t.toObject())),e}function Qf(n){if(n.isText)return n.value;let e="";return n.attrs&&n.attrs.size()&&(e=" "+Array.from(n.attrs).filter(t=>!t.isRemoved()).sort((t,r)=>t.getKey().localeCompare(r.getKey())).map(t=>{const r=JSON.parse(t.getValue());return typeof r=="string"?`${t.getKey()}="${r}"`:`${t.getKey()}="${en(t.getValue())}"`}).join(" ")),`<${n.type}${e}>${n.children.map(t=>Qf(t)).join("")}</${n.type}>`}function cy(n){if(n.isText){const e=n;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:n.type,children:n.children.map(cy),size:n.size,isRemoved:n.isRemoved}}class Et extends Do{constructor(t,r){super(r);u(this,"indexTree");u(this,"nodeMapByID");this.indexTree=new V1(t),this.nodeMapByID=new uy(Ce.createComparator()),this.indexTree.traverseAll(i=>{this.nodeMapByID.put(i.id,i)})}static create(t,r){return new Et(t,r)}findFloorNode(t){const r=this.nodeMapByID.floorEntry(t);if(!(!r||!r.key.getCreatedAt().equals(t.getCreatedAt())))return r.value}registerNode(t){this.nodeMapByID.put(t.id,t)}findNodesAndSplitText(t,r){const[i,s]=t.toTreeNodePair(this);let o=s;const a=i===o,l=o.parent&&!a?o.parent:i;if(o.isText&&o.split(this,t.getLeftSiblingID().getOffset()-o.id.getOffset()),r){const c=l.allChildren,d=a?0:c.indexOf(o)+1;for(let h=d;h<c.length;h++){const m=c[h];if(!m.id.getCreatedAt().after(r))break;o=m}}return[l,o]}style(t,r,i,s,o){const[a,l]=this.findNodesAndSplitText(t[0],i),[c,d]=this.findNodesAndSplitText(t[1],i),h=[],m=r?es(r):{},y=new Map,w=[];return this.traverseInPosRange(a,l,c,d,([T])=>{const P=T.getCreatedAt().getActorID();let p,g=0n;if(o===void 0&&s===void 0?g=_s:o.size()>0?g=o.get(P)?o.get(P):0n:p=s.has(P)?s.get(P):bt,T.canStyle(i,p,g)&&r){const v=y.get(P),I=T.getCreatedAt();(!v||I.after(v))&&y.set(P,I);const E=T.setAttrs(r,i),N=E.reduce((q,[,$])=>($&&(q[$.getKey()]=m[$.getKey()]),q),{}),D=T.parent,R=T.prevSibling||T.parent;Object.keys(N).length>0&&h.push({type:"style",from:this.toIndex(D,R),to:this.toIndex(T,T),fromPath:this.toPath(D,R),toPath:this.toPath(T,T),actor:i.getActorID(),value:N});for(const[q]of E)q&&w.push({parent:T,child:q})}}),[y,w,h]}removeStyle(t,r,i,s,o){const[a,l]=this.findNodesAndSplitText(t[0],i),[c,d]=this.findNodesAndSplitText(t[1],i),h=[],m=new Map,y=[];return this.traverseInPosRange(a,l,c,d,([w])=>{const T=w.getCreatedAt().getActorID();let P,p=0n;if(o===void 0&&s===void 0?p=_s:o.size()>0?p=o.get(T)?o.get(T):0n:P=s.has(T)?s.get(T):bt,w.canStyle(i,P,p)&&r){const g=m.get(T),v=w.getCreatedAt();(!g||v.after(g))&&m.set(T,v),w.attrs||(w.attrs=new Tr);for(const N of r){const D=w.attrs.remove(N,i);for(const R of D)y.push({parent:w,child:R})}const I=w.parent,E=w.prevSibling||w.parent;h.push({actor:i.getActorID(),type:"removeStyle",from:this.toIndex(I,E),to:this.toIndex(w,w),fromPath:this.toPath(I,E),toPath:this.toPath(w,w),value:r})}}),[m,y,h]}edit(t,r,i,s,o,a,l){const[c,d]=this.findNodesAndSplitText(t[0],s),[h,m]=this.findNodesAndSplitText(t[1],s),y=this.toIndex(c,d),w=this.toPath(c,d),T=[],P=[],p=[],g=new Map;this.traverseInPosRange(c,d,h,m,([E,N],D)=>{if(N===me.Start&&!D)for(const Se of E.children)p.push(Se);const R=E.getCreatedAt().getActorID();let q,$=0n;if(l===void 0&&a===void 0?$=_s:l.size()>0?$=l.get(R)?l.get(R):0n:q=a.has(R)?a.get(R):bt,E.canDelete(s,q,$)||T.includes(E.parent)){const Se=g.get(R),Er=E.getCreatedAt();(!Se||Er.after(Se))&&g.set(R,Er),(N===me.Text||N===me.Start)&&T.push(E),P.push([E,N])}});const v=this.makeDeletionChanges(P,s),I=[];for(const E of T)E.remove(s),E.isRemoved&&I.push({parent:this,child:E});for(const E of p)E.removedAt||c.append(E);if(i>0){let E=0,N=c,D=d;for(;E<i;)N.split(this,N.findOffset(D)+1,o),D=N,N=N.parent,E++;v.push({type:"content",from:y,to:y,fromPath:w,toPath:w,actor:s.getActorID()})}if(r!=null&&r.length){const E=[];let N=d;for(const D of r)N===c?c.insertAt(D,0):c.insertAfter(D,N),N=D,$l(D,R=>{c.isRemoved&&(R.remove(s),I.push({parent:this,child:R})),this.nodeMapByID.put(R.id,R)}),D.isRemoved||E.push(D);if(E.length){const D=E.map(R=>Hc(R));v.length&&v[v.length-1].from===y?v[v.length-1].value=D:v.push({type:"content",from:y,to:y,fromPath:w,toPath:w,actor:s.getActorID(),value:D})}}return[v,I,g]}editT(t,r,i,s,o){const a=this.findPos(t[0]),l=this.findPos(t[1]);this.edit([a,l],r,i,s,o)}move(t,r,i){throw new k(S.ErrUnimplemented,`not implemented: ${t}, ${r}, ${i}`)}purge(t){var s;(s=t.parent)==null||s.removeChild(t),this.nodeMapByID.remove(t.id);const r=t.insPrevID,i=t.insNextID;if(r){const o=this.findFloorNode(r);o.insNextID=i}if(i){const o=this.findFloorNode(i);o.insPrevID=r}t.insPrevID=void 0,t.insNextID=void 0}getGCPairs(){const t=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&t.push({parent:this,child:r});for(const i of r.getGCPairs())t.push(i)}),t}findPos(t,r=!0){const i=this.indexTree.findTreePos(t,r);return Rt.fromTreePos(i)}pathToPosRange(t){const r=this.pathToIndex(t);return[this.findPos(r),this.findPos(r+1)]}pathToPos(t){const r=this.indexTree.pathToIndex(t);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return Qf(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const t=this.indexTree.getRoot(),r=(i,s=void 0,o=void 0,a=0)=>{var y,w,T,P;let l,c,d;const h=i.isText?{node:i,offset:0}:s&&o?this.toTreePos(s,o):null;h&&(l=this.indexTree.indexOf(h),c=this.indexTree.treePosToPath(h),d=Rt.fromTreePos(h).toStruct());const m={type:i.type,parent:s==null?void 0:s.id.toTestString(),size:i.size,id:i.id.toTestString(),removedAt:(y=i.removedAt)==null?void 0:y.toTestString(),insPrev:(w=i.insPrevID)==null?void 0:w.toTestString(),insNext:(T=i.insNextID)==null?void 0:T.toTestString(),value:i.isText?i.value:void 0,isRemoved:i.isRemoved,children:[],depth:a,attributes:i.attrs?es((P=i.attrs)==null?void 0:P.toObject()):void 0,index:l,path:c,pos:d};for(let p=0;p<i.allChildren.length;p++){const g=p===0?i:i.allChildren[p-1];m.children.push(r(i.allChildren[p],i,g,a+1))}return m};return r(t)}getRootTreeNode(){return Hc(this.indexTree.getRoot())}toTestTreeNode(){return cy(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const t=this.getRoot();return new Et(t.deepcopy(),this.getCreatedAt())}toPath(t,r){const i=this.toTreePos(t,r);return i?this.indexTree.treePosToPath(i):[]}toIndex(t,r){const i=this.toTreePos(t,r);return i?this.indexTree.indexOf(i):-1}indexToPath(t){return this.indexTree.indexToPath(t)}pathToIndex(t){return this.indexTree.pathToIndex(t)}indexRangeToPosRange(t){const r=this.findPos(t[0]);return t[0]===t[1]?[r,r]:[r,this.findPos(t[1])]}indexRangeToPosStructRange(t){const[r,i]=t,s=this.findPos(r);return r===i?[s.toStruct(),s.toStruct()]:[s.toStruct(),this.findPos(i).toStruct()]}posRangeToPathRange(t){const[r,i]=this.findNodesAndSplitText(t[0]),[s,o]=this.findNodesAndSplitText(t[1]);return[this.toPath(r,i),this.toPath(s,o)]}posRangeToIndexRange(t){const[r,i]=this.findNodesAndSplitText(t[0]),[s,o]=this.findNodesAndSplitText(t[1]);return[this.toIndex(r,i),this.toIndex(s,o)]}traverseInPosRange(t,r,i,s,o){const a=this.toIndex(t,r),l=this.toIndex(i,s);return this.indexTree.tokensBetween(a,l,o)}toTreePos(t,r){if(!t||!r)return;if(t.isRemoved){let s;for(;t.isRemoved;)s=t,t=s.parent;const o=t.findOffset(s);return{node:t,offset:o}}if(t===r)return{node:t,offset:0};let i=t.findOffset(r);if(!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize};i++}return{node:t,offset:i}}makeDeletionChanges(t,r){const i=[],s=[];let o=null,a=null;for(let l=0;l<t.length;l++){const c=t[l],d=t[l+1];o||(o=c),a=c;const h=this.findRightToken(c);(!h||!d||h[0]!==d[0]||h[1]!==d[1])&&(s.push([o,a]),o=null,a=null)}for(const l of s){const[c,d]=l,[h,m]=this.findLeftToken(c),[y,w]=d,T=m===me.Start?h:h.parent,P=w===me.Start?y:y.parent,p=this.toIndex(T,h),g=this.toIndex(P,y);p<g&&(i.length>0&&p===i[i.length-1].to?(i[i.length-1].to=g,i[i.length-1].toPath=this.toPath(P,y)):i.push({type:"content",from:p,to:g,fromPath:this.toPath(T,h),toPath:this.toPath(P,y),actor:r.getActorID()}))}return i.reverse()}findRightToken([t,r]){if(r===me.Start){const l=t.allChildren;return l.length>0?[l[0],l[0].isText?me.Text:me.Start]:[t,me.End]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===s.length-1)return[i,me.End];const a=s[o+1];return[a,a.isText?me.Text:me.Start]}findLeftToken([t,r]){if(r===me.End){const l=t.allChildren;if(l.length>0){const c=l[l.length-1];return[c,c.isText?me.Text:me.End]}return[t,me.Start]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===0)return[i,me.Start];const a=s[o-1];return[a,a.isText?me.Text:me.End]}}class Bo extends Jt{constructor(t,r,i,s,o,a,l){super(t,l);u(this,"fromPos");u(this,"toPos");u(this,"contents");u(this,"splitLevel");u(this,"maxCreatedAtMapByActor");this.fromPos=r,this.toPos=i,this.contents=s,this.splitLevel=o,this.maxCreatedAtMapByActor=a}static create(t,r,i,s,o,a,l){return new Bo(t,r,i,s,o,a,l)}execute(t,r,i){var d;const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof Et))throw new k(S.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const o=this.getExecutedAt(),a=s,[l,c]=a.edit([this.fromPos,this.toPos],(d=this.contents)==null?void 0:d.map(h=>h.deepcopy()),this.splitLevel,o,(()=>{let h=o.getDelimiter();return this.contents!==void 0&&(h+=this.contents.length),()=>kt.of(o.getLamport(),++h,o.getActorID())})(),this.maxCreatedAtMapByActor,i);for(const h of c)t.registerGCPair(h);return{opInfos:l.map(({from:h,to:m,value:y,splitLevel:w,fromPath:T,toPath:P})=>({type:"tree-edit",path:t.createPath(this.getParentCreatedAt()),from:h,to:m,value:y,splitLevel:w,fromPath:T,toPath:P}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,s=this.contents||[];return`${t}.EDIT(${r},${i},${s.map(o=>Qf(o)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class ts{constructor(e){u(this,"vector");this.vector=e||new Map}set(e,t){this.vector.set(e,t)}unset(e){this.vector.delete(e)}get(e){return this.vector.get(e)}maxLamport(){let e=BigInt(0);for(const[,t]of this)t>e&&(e=t);return e}max(e){const t=new Map;for(const[r,i]of e){const s=this.vector.get(r),o=s&&s>i?s:i;t.set(r,o)}for(const[r,i]of this){const s=e.get(r),o=s&&s>i?s:i;t.set(r,o)}return new ts(t)}afterOrEqual(e){const t=this.vector.get(e.getActorID());return t===void 0?!1:t>=e.getLamport()}deepcopy(){const e=new Map;for(const[t,r]of this.vector)e.set(t,r);return new ts(e)}filter(e){const t=new Map;for(const[r]of e){const i=this.vector.get(r);i!==void 0&&t.set(r,i)}return new ts(t)}size(){return this.vector.size}*[Symbol.iterator](){for(const[e,t]of this.vector)yield[e,t]}}const H1=new ts(new Map);class ar{constructor(e,t,r,i,s){u(this,"clientSeq");u(this,"serverSeq");u(this,"lamport");u(this,"actor");u(this,"versionVector");this.clientSeq=e,this.serverSeq=s,this.lamport=t,this.versionVector=i,this.actor=r}static of(e,t,r,i,s){return new ar(e,t,r,i,s)}next(){const e=this.versionVector.deepcopy();return e.set(this.actor,this.lamport+1n),new ar(this.clientSeq+1,this.lamport+1n,this.actor,e)}syncClocks(e){const t=e.lamport>this.lamport?e.lamport+1n:this.lamport+1n;let r=e.versionVector;r.size()===0&&(r=r.deepcopy(),r.set(e.actor,e.lamport));const i=this.versionVector.max(r),s=new ar(this.clientSeq,t,this.actor,i);return s.versionVector.set(this.actor,t),s}setClocks(e,t){const r=e>this.lamport?e+1n:this.lamport+1n;t.unset(Jl);const i=this.versionVector.max(t);return i.set(this.actor,r),ar.of(this.clientSeq,r,this.actor,i)}createTimeTicket(e){return kt.of(this.lamport,e,this.actor)}setActor(e){return new ar(this.clientSeq,this.lamport,e,this.versionVector,this.serverSeq)}setVersionVector(e){return new ar(this.clientSeq,this.lamport,this.actor,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const _1=new ar(0,0n,Jl,H1);class ms{constructor({id:e,operations:t,presenceChange:r,message:i}){u(this,"id");u(this,"operations");u(this,"presenceChange");u(this,"message");this.id=e,this.operations=t||[],this.presenceChange=r,this.message=i}static create({id:e,operations:t,presenceChange:r,message:i}){return new ms({id:e,operations:t,presenceChange:r,message:i})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,r){const i=[],s=[];for(const o of this.operations){const a=o.execute(e,r,this.id.getVersionVector());if(!a)continue;const{opInfos:l,reverseOp:c}=a;i.push(...l),c&&s.unshift(c)}return this.presenceChange&&(this.presenceChange.type===Xr.Put?t.set(this.id.getActorID(),Nt(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:i,reverseOps:s}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:de.bytesToHex(de.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>de.bytesToHex(de.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:r,presenceChange:i,message:s}=e;return ms.create({id:de.bytesToChangeID(de.hexToBytes(t)),operations:r==null?void 0:r.map(o=>de.bytesToOperation(de.hexToBytes(o))),presenceChange:i,message:s})}}class zl{constructor(e,t,r,i,s,o,a){u(this,"documentKey");u(this,"checkpoint");u(this,"isRemoved");u(this,"changes");u(this,"snapshot");u(this,"minSyncedTicket");u(this,"versionVector");this.documentKey=e,this.checkpoint=t,this.isRemoved=r,this.changes=i,this.snapshot=o,this.minSyncedTicket=a,this.versionVector=s}static create(e,t,r,i,s,o,a){return new zl(e,t,r,i,s,o,a)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}getVersionVector(){return this.versionVector}}class ns{constructor(e,t){u(this,"serverSeq");u(this,"clientSeq");this.serverSeq=e,this.clientSeq=t}static of(e,t){return new ns(e,t)}increaseClientSeq(e){return e===0?this:new ns(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq>e.serverSeq?this.serverSeq:e.serverSeq,r=Math.max(this.clientSeq,e.clientSeq);return ns.of(t,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq==e.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const G1=new ns(0n,0);class rn{constructor(e,t){u(this,"createdAt");u(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new rn(e,t)}static fromStruct(e){return rn.of(kt.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new rn(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const Y1=rn.of(bt,0);class Ft{constructor(e,t){u(this,"id");u(this,"relativeOffset");this.id=e,this.relativeOffset=t}static of(e,t){return new Ft(e,t)}static fromStruct(e){const t=rn.fromStruct(e.id);return Ft.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return rn.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class _r extends ty{constructor(t,r,i){super(r);u(this,"id");u(this,"removedAt");u(this,"prev");u(this,"next");u(this,"insPrev");u(this,"insNext");this.id=t,this.removedAt=i}static create(t,r){return new _r(t,r)}static createComparator(){return(t,r)=>{const i=t.getCreatedAt().compare(r.getCreatedAt());return i!==0?i:t.getOffset()>r.getOffset()?1:t.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(t){this.prev=t,t&&(t.next=this)}setNext(t){this.next=t,t&&(t.prev=this)}setInsPrev(t){this.insPrev=t,t&&(t.insNext=this)}setInsNext(t){this.insNext=t,t&&(t.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(t){return new _r(this.id.split(t),this.splitValue(t),this.removedAt)}canDelete(t,r,i){const s=!this.removedAt;return(r?!this.getCreatedAt().after(r):this.getCreatedAt().getLamport()<=i)&&(!this.removedAt||t.after(this.removedAt))?s:!1}canStyle(t,r,i){return(r?!this.getCreatedAt().after(r):this.getCreatedAt().getLamport()<=i)&&(!this.removedAt||t.after(this.removedAt))}remove(t){this.removedAt=t}createPosRange(){return[Ft.of(this.id,0),Ft.of(this.id,this.getLength())]}deepcopy(){return new _r(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(t){const r=this.value;return this.value=r.substring(0,t),r.substring(t,r.length)}toIDString(){return this.id.toIDString()}}class ps{constructor(){u(this,"head");u(this,"treeByIndex");u(this,"treeByID");this.head=_r.create(Y1),this.treeByIndex=new So,this.treeByID=new uy(_r.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new ps}edit(e,t,r,i,s){const[o,a]=this.findNodeWithSplit(e[1],t),[l,c]=this.findNodeWithSplit(e[0],t),d=this.findBetween(c,a),[h,m,y]=this.deleteNodes(d,t,i,s),w=a?a.getID():o.getID();let T=Ft.of(w,0);if(r){const p=this.posToIndex(l.createPosRange()[1],!0),g=this.insertAfter(l,_r.create(rn.of(t,0),r));h.length&&h[h.length-1].from===p?h[h.length-1].value=r:h.push({actor:t.getActorID(),from:p,to:p,value:r}),T=Ft.of(g.getID(),g.getContentLength())}const P=[];for(const[,p]of y)P.push({parent:this,child:p});return[T,m,P,h]}indexToPos(e){const[t,r]=this.treeByIndex.find(e),i=t;return Ft.of(i.getID(),r)}findIndexesFromRange(e){const[t,r]=e;return[this.posToIndex(t,!1),this.posToIndex(r,!0)]}posToIndex(e,t){const r=e.getAbsoluteID(),i=t?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);if(!i)throw new k(S.ErrInvalidArgument,`the node of the given id should be found: ${r.toTestString()}`);const s=this.treeByIndex.indexOf(i),o=i.isRemoved()?0:r.getOffset()-i.getID().getOffset();return s+o}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new ps;let t=this.head.getNext(),r=e.head,i;for(;t;){if(i=e.insertAfter(r,t.deepcopy()),t.hasInsPrev()){const s=e.findNode(t.getInsPrevID());i.setInsPrev(s)}r=i,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const r=e.getNext();return t.setPrev(e),r&&r.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const r=e.getAbsoluteID();let i=this.findFloorNodePreferToLeft(r);const s=r.getOffset()-i.getID().getOffset();for(this.splitNode(i,s);i.hasNext()&&i.getNext().getCreatedAt().after(t);)i=i.getNext();return[i,i.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(!t)throw new k(S.ErrInvalidArgument,`the node of the given id should be found: ${e.toTestString()}`);if(e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const r=[];let i=e;for(;i&&i!==t;)r.push(i),i=i.getNext();return r}splitNode(e,t){if(t>e.getContentLength())throw new k(S.ErrInvalidArgument,"offset should be less than or equal to length");if(t===0)return e;if(t===e.getContentLength())return e.getNext();const r=e.split(t);this.treeByIndex.updateWeight(r),this.insertAfter(e,r);const i=e.getInsNext();return i&&i.setInsPrev(r),r.setInsPrev(e),r}deleteNodes(e,t,r,i){if(!e.length)return[[],new Map,new Map];const[s,o]=this.filterNodes(e,t,r,i),a=new Map,l=new Map,c=this.makeChanges(o,t);for(const d of s){const h=d.getCreatedAt().getActorID();(!a.has(h)||d.getID().getCreatedAt().after(a.get(h)))&&a.set(h,d.getID().getCreatedAt()),l.set(d.getID().toIDString(),d),d.remove(t)}return this.deleteIndexNodes(o),[c,a,l]}filterNodes(e,t,r,i){const s=[],o=[],[a,l]=this.findEdgesOfCandidates(e);o.push(a);for(const c of e){const d=c.getCreatedAt().getActorID();let h,m=0n;i===void 0&&r===void 0?m=_s:i.size()>0?m=i.get(d)?i.get(d):0n:h=r.has(d)?r.get(d):bt,c.canDelete(t,h,m)?s.push(c):o.push(c)}return o.push(l),[s,o]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const r=[];let i,s;for(let o=0;o<e.length-1;o++){const a=e[o],l=e[o+1];a.getNext()!=l&&([i]=this.findIndexesFromRange(a.getNext().createPosRange()),l?[,s]=this.findIndexesFromRange(l.getPrev().createPosRange()):s=this.treeByIndex.length,i<s&&r.push({actor:t.getActorID(),from:i,to:s}))}return r.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const r=e[t],i=e[t+1];r.getNext()!=i&&this.treeByIndex.deleteRange(r,i)}}purge(e){this.treeByIndex.delete(e),this.treeByID.remove(e.getID());const t=e.getPrev(),r=e.getNext(),i=e.getInsPrev(),s=e.getInsNext();t&&t.setNext(r),r&&r.setPrev(t),e.setPrev(void 0),e.setNext(void 0),i&&i.setInsNext(s),s&&s.setInsPrev(i),e.setInsPrev(void 0),e.setInsNext(void 0)}}const ig=n=>n<0?Math.ceil(n):Math.floor(n);var sn=(n=>(n[n.IntegerCnt=0]="IntegerCnt",n[n.LongCnt=1]="LongCnt",n))(sn||{});class tt extends Do{constructor(t,r,i){super(i);u(this,"valueType");u(this,"value");switch(this.valueType=t,t){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=K.fromNumber(r).toInt():this.value=ig(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=K.fromNumber(r):this.value=r;break;default:throw new k(S.ErrUnimplemented,`unimplemented type: ${t}`)}}static create(t,r,i){return new tt(t,r,i)}static valueFromBytes(t,r){switch(t){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return K.fromBytesLE(Array.from(r));default:throw new k(S.ErrUnimplemented,`unimplemented type: ${t}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const t=tt.create(this.valueType,this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t}getType(){return this.valueType}static getCounterType(t){switch(typeof t){case"object":return t instanceof K?1:void 0;case"number":return t>Math.pow(2,31)-1||t<-Math.pow(2,31)?1:0;default:return}}static isSupport(t){return!!tt.getCounterType(t)}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===0||t===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new k(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(t){function r(i){if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`)}return r(this),r(t),this.valueType===1?this.value=this.value.add(t.getValue()):t.getType()===ve.Long?this.value=this.value+t.getValue().toInt():this.value=K.fromNumber(this.value+ig(t.getValue())).toInt(),this}}class ys extends Jt{constructor(t,r,i){super(t,i);u(this,"value");this.value=r}static create(t,r,i){return new ys(t,r,i)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof tt))throw new k(S.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const i=r,s=this.value.deepcopy();return i.increase(s),{opInfos:[{type:"increase",path:t.createPath(this.getParentCreatedAt()),value:s.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const t=this.value.deepcopy(),i=t.getType()===ve.Long?t.getValue().multiply(-1):t.getValue()*-1;return ys.create(this.getParentCreatedAt(),se.of(i,t.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class pr extends Jt{constructor(t,r,i,s,o,a,l){super(t,l);u(this,"fromPos");u(this,"toPos");u(this,"maxCreatedAtMapByActor");u(this,"attributes");u(this,"attributesToRemove");this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=s,this.attributes=o,this.attributesToRemove=a}static create(t,r,i,s,o,a){return new pr(t,r,i,s,o,[],a)}static createTreeRemoveStyleOperation(t,r,i,s,o,a){return new pr(t,r,i,s,new Map,o,a)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof Et))throw new k(S.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const o=s;let a,l;if(this.attributes.size){const c={};[...this.attributes].forEach(([d,h])=>c[d]=h),[,l,a]=o.style([this.fromPos,this.toPos],c,this.getExecutedAt(),this.maxCreatedAtMapByActor,i)}else{const c=this.attributesToRemove;[,l,a]=o.removeStyle([this.fromPos,this.toPos],c,this.getExecutedAt(),this.maxCreatedAtMapByActor,i)}for(const c of l)t.registerGCPair(c);return{opInfos:a.map(({from:c,to:d,value:h,fromPath:m,toPath:y})=>({type:"tree-style",from:c,to:d,value:this.attributes.size?{attributes:h}:{attributesToRemove:h},fromPath:m,toPath:y,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${t}.STYLE(${r},${i},${Object.entries(this.attributes||{}).map(([s,o])=>`${s}:"${o}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}function Q1(n){const e=new _f,t=e.data;for(const[r,i]of Object.entries(n))t[r]=JSON.stringify(i);return e}function X1(n){if(n.type===Xr.Put)return new vo({type:Ii.PUT,presence:Q1(n.presence)});if(n.type===Xr.Clear)return new vo({type:Ii.CLEAR});throw new k(S.ErrUnimplemented,"unimplemented type")}function Z1(n){return new Xp({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function fy(n){return new Fl({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:ld(n.getActorID()),versionVector:Xf(n.getVersionVector())})}function F(n){if(n)return new b({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:ld(n.getActorID())})}function Xf(n){if(!n)return;const e=new Ml;for(const[t,r]of n)e.vector[t]=BigInt(r.toString());return e}function dy(n){switch(n){case ve.Null:return z.NULL;case ve.Boolean:return z.BOOLEAN;case ve.Integer:return z.INTEGER;case ve.Long:return z.LONG;case ve.Double:return z.DOUBLE;case ve.String:return z.STRING;case ve.Bytes:return z.BYTES;case ve.Date:return z.DATE;default:throw new k(S.ErrInvalidType,`unsupported type: ${n}`)}}function hy(n){switch(n){case sn.IntegerCnt:return z.INTEGER_CNT;case sn.LongCnt:return z.LONG_CNT;default:throw new k(S.ErrInvalidType,`unsupported type: ${n}`)}}function Iu(n){if(n instanceof He)return new at({type:z.JSON_OBJECT,createdAt:F(n.getCreatedAt()),value:xy(n)});if(n instanceof et)return new at({type:z.JSON_ARRAY,createdAt:F(n.getCreatedAt()),value:DS(n)});if(n instanceof It)return new at({type:z.TEXT,createdAt:F(n.getCreatedAt())});if(n instanceof se)return new at({type:dy(n.getType()),createdAt:F(n.getCreatedAt()),value:n.toBytes()});if(n instanceof tt)return new at({type:hy(n.getType()),createdAt:F(n.getCreatedAt()),value:n.toBytes()});if(n instanceof Et)return new at({type:z.TREE,createdAt:F(n.getCreatedAt()),value:RS(n)});throw new k(S.ErrUnimplemented,"unimplemented element")}function eS(n){return new po({createdAt:F(n.getCreatedAt()),offset:n.getOffset()})}function ta(n){return new kr({createdAt:F(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function na(n){return new Ai({parentId:Gs(n.getParentID()),leftSiblingId:Gs(n.getLeftSiblingID())})}function Gs(n){return new Wr({createdAt:F(n.getCreatedAt()),offset:n.getOffset()})}function gy(n){const e=new Hf;if(n instanceof Ei){const t=n,r=new Qa;r.parentCreatedAt=F(t.getParentCreatedAt()),r.key=t.getKey(),r.value=Iu(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="set",e.body.value=r}else if(n instanceof Oo){const t=n,r=new Xa;r.parentCreatedAt=F(t.getParentCreatedAt()),r.prevCreatedAt=F(t.getPrevCreatedAt()),r.value=Iu(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="add",e.body.value=r}else if(n instanceof Fr){const t=n,r=new Za;r.parentCreatedAt=F(t.getParentCreatedAt()),r.prevCreatedAt=F(t.getPrevCreatedAt()),r.createdAt=F(t.getCreatedAt()),r.executedAt=F(t.getExecutedAt()),e.body.case="move",e.body.value=r}else if(n instanceof Zr){const t=n,r=new el;r.parentCreatedAt=F(t.getParentCreatedAt()),r.createdAt=F(t.getCreatedAt()),r.executedAt=F(t.getExecutedAt()),e.body.case="remove",e.body.value=r}else if(n instanceof Ro){const t=n,r=new tl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=ta(t.getFromPos()),r.to=ta(t.getToPos());const i=r.createdAtMapByActor;for(const[o,a]of t.getMaxCreatedAtMapByActor())i[o]=F(a);r.content=t.getContent();const s=r.attributes;for(const[o,a]of t.getAttributes())s[o]=a;r.executedAt=F(t.getExecutedAt()),e.body.case="edit",e.body.value=r}else if(n instanceof Lo){const t=n,r=new nl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=ta(t.getFromPos()),r.to=ta(t.getToPos());const i=r.createdAtMapByActor;for(const[o,a]of t.getMaxCreatedAtMapByActor())i[o]=F(a);const s=r.attributes;for(const[o,a]of t.getAttributes())s[o]=a;r.executedAt=F(t.getExecutedAt()),e.body.case="style",e.body.value=r}else if(n instanceof ys){const t=n,r=new rl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.value=Iu(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="increase",e.body.value=r}else if(n instanceof Bo){const t=n,r=new il,i=r.createdAtMapByActor;for(const[s,o]of t.getMaxCreatedAtMapByActor())i[s]=F(o);r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=na(t.getFromPos()),r.to=na(t.getToPos()),r.contents=aS(t.getContents()),r.splitLevel=t.getSplitLevel(),r.executedAt=F(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=r}else if(n instanceof pr){const t=n,r=new sl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=na(t.getFromPos()),r.to=na(t.getToPos());const i=r.createdAtMapByActor;for(const[o,a]of t.getMaxCreatedAtMapByActor())i[o]=F(a);const s=t.getAttributesToRemove();if(s.length>0)r.attributesToRemove=s;else{const o=r.attributes;for(const[a,l]of t.getAttributes())o[a]=l}r.executedAt=F(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=r}else throw new k(S.ErrUnimplemented,"unimplemented operation");return e}function tS(n){const e=[];for(const t of n)e.push(gy(t));return e}function nS(n){const e=new Yp({id:fy(n.getID()),message:n.getMessage()});return n.hasOperations()&&(e.operations=tS(n.getOperations())),n.hasPresenceChange()&&(e.presenceChange=X1(n.getPresenceChange())),e}function rS(n){const e=[];for(const t of n)e.push(nS(t));return e}function iS(n){const e=[];for(const t of n)e.push(new Qp({key:t.getStrKey(),element:ed(t.getValue())}));return e}function sS(n){const e=[];for(const t of n)e.push(new dl({element:ed(t.getValue())}));return e}function oS(n){const e=[];for(const t of n){const r=new hl;r.id=eS(t.getID()),r.value=t.getValue().getContent(),r.removedAt=F(t.getRemovedAt());const i=r.attributes,s=t.getValue().getAttrs();for(const o of s){const a=new ds;a.value=o.getValue(),a.updatedAt=F(o.getUpdatedAt()),i[o.getKey()]=a}e.push(r)}return e}function aS(n){const e=[];if(!n||!n.length)return e;for(const t of n)e.push(new gl({content:Zf(t)}));return e}function lS(n){const e={};for(const t of n)e[t.getKey()]=new ds({value:t.getValue(),updatedAt:F(t.getUpdatedAt()),isRemoved:t.isRemoved()});return e}function Zf(n){if(!n)return[];const e=[];return $l(n,(t,r)=>{const i=new yo({id:Gs(t.id),type:t.type,removedAt:F(t.removedAt),depth:r});t.isText&&(i.value=t.value),t.insPrevID&&(i.insPrevId=Gs(t.insPrevID)),t.insNextID&&(i.insNextId=Gs(t.insNextID)),t.attrs&&(i.attributes=lS(t.attrs)),e.push(i)}),e}function uS(n){const e=new _e;return e.body.case="jsonObject",e.body.value=new ol({nodes:iS(n.getRHT()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function my(n){const e=new _e;return e.body.case="jsonArray",e.body.value=new al({nodes:sS(n.getElements()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function cS(n){const e=new _e;return e.body.case="primitive",e.body.value=new ll({type:dy(n.getType()),value:n.toBytes(),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function fS(n){const e=new _e;return e.body.case="text",e.body.value=new ul({nodes:oS(n.getRGATreeSplit()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function dS(n){const e=new _e;return e.body.case="counter",e.body.value=new cl({type:hy(n.getType()),value:n.toBytes(),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function py(n){const e=new _e;return e.body.case="tree",e.body.value=new fl({nodes:Zf(n.getRoot()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function ed(n){if(n instanceof He)return uS(n);if(n instanceof et)return my(n);if(n instanceof se)return cS(n);if(n instanceof It)return fS(n);if(n instanceof tt)return dS(n);if(n instanceof Et)return py(n);throw new k(S.ErrUnimplemented,"unimplemented element")}function hS(n){return new Ir({documentKey:n.getDocumentKey(),checkpoint:Z1(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:rS(n.getChanges()),snapshot:n.getSnapshot(),versionVector:Xf(n.getVersionVector()),minSyncedTicket:F(n.getMinSyncedTicket())})}function Fs(n){if(!(n instanceof ne))return{};const e=n.findDetails(R1);for(const t of e)return t.metadata;return{}}function Oi(n){return Fs(n).code??""}function yy(n){return ar.of(n.clientSeq,BigInt(n.lamport),od(n.actorId),td(n.versionVector),BigInt(n.serverSeq))}function td(n){if(!n)return;const e=new ts;return Object.entries(n.vector).forEach(([t,r])=>{e.set(t,BigInt(r.toString()))}),e}function M(n){if(n)return kt.of(BigInt(n.lamport),n.delimiter,od(n.actorId))}function nd(n){const e={};return Object.entries(n.data).forEach(([t,r])=>{e[t]=JSON.parse(r)}),e}function gS(n){const e=n.type;if(e===Ii.PUT){const t=nd(n.presence);return{type:Xr.Put,presence:t}}if(e===Ii.CLEAR)return{type:Xr.Clear};throw new k(S.ErrInvalidType,`unsupported type: ${e}`)}function mS(n){const e=new Map;return Object.entries(n).forEach(([t,r])=>{e.set(t,nd(r))}),e}function vy(n){switch(n){case z.NULL:return ve.Null;case z.BOOLEAN:return ve.Boolean;case z.INTEGER:return ve.Integer;case z.LONG:return ve.Long;case z.DOUBLE:return ve.Double;case z.STRING:return ve.String;case z.BYTES:return ve.Bytes;case z.DATE:return ve.Date}throw new k(S.ErrUnimplemented,`unimplemented value type: ${n}`)}function yl(n){switch(n){case z.INTEGER_CNT:return sn.IntegerCnt;case z.LONG_CNT:return sn.LongCnt}throw new k(S.ErrUnimplemented,`unimplemented value type: ${n}`)}function Eu(n){switch(n.type){case z.JSON_OBJECT:return n.value?Ey(n.value):He.create(M(n.createdAt));case z.JSON_ARRAY:return n.value?PS(n.value):et.create(M(n.createdAt));case z.TEXT:return It.create(ps.create(),M(n.createdAt));case z.TREE:return OS(n.value);case z.NULL:case z.BOOLEAN:case z.INTEGER:case z.LONG:case z.DOUBLE:case z.STRING:case z.BYTES:case z.DATE:return se.of(se.valueFromBytes(vy(n.type),n.value),M(n.createdAt));case z.INTEGER_CNT:case z.LONG_CNT:return tt.create(yl(n.type),tt.valueFromBytes(yl(n.type),n.value),M(n.createdAt))}}function ra(n){return Ft.of(rn.of(M(n.createdAt),n.offset),n.relativeOffset)}function wy(n){return rn.of(M(n.createdAt),n.offset)}function pS(n){const e=To.create(n.value);Object.entries(n.attributes).forEach(([r,i])=>{e.setAttr(r,i.value,M(i.updatedAt))});const t=_r.create(wy(n.id),e);return t.remove(M(n.removedAt)),t}function Ri(n){return Rt.of(Ys(n.parentId),Ys(n.leftSiblingId))}function Ys(n){return Ce.of(M(n.createdAt),n.offset)}function yS(n){if(!n.length)return;const e=[];return n.forEach(t=>{const r=rd(t.content);e.push(r)}),e}function rd(n){if(n.length===0)return;const e=[];for(const i of n)e.push(wS(i));const t=e[e.length-1],r=new Map;r.set(n[e.length-1].depth,e[e.length-1]);for(let i=e.length-2;i>=0;i--)r.get(n[i].depth-1).prepend(e[i]),r.set(n[i].depth,e[i]);return t.updateDescendantsSize(),Et.create(t,bt).getRoot()}function vS(n){const e=Tr.create();for(const[t,r]of Object.entries(n))e.setInternal(t,r.value,M(r.updatedAt),r.isRemoved);return e}function wS(n){const e=Ys(n.id),t=Xe.create(e,n.type),r=Object.entries(n.attributes);return t.isText?t.value=n.value:r.length&&(t.attrs=vS(n.attributes)),n.insPrevId&&(t.insPrevID=Ys(n.insPrevId)),n.insNextId&&(t.insNextID=Ys(n.insNextId)),t.removedAt=M(n.removedAt),t}function Sy(n){if(n.body.case==="set"){const e=n.body.value;return Ei.create(e.key,Eu(e.value),M(e.parentCreatedAt),M(e.executedAt))}else if(n.body.case==="add"){const e=n.body.value;return Oo.create(M(e.parentCreatedAt),M(e.prevCreatedAt),Eu(e.value),M(e.executedAt))}else if(n.body.case==="move"){const e=n.body.value;return Fr.create(M(e.parentCreatedAt),M(e.prevCreatedAt),M(e.createdAt),M(e.executedAt))}else if(n.body.case==="remove"){const e=n.body.value;return Zr.create(M(e.parentCreatedAt),M(e.createdAt),M(e.executedAt))}else if(n.body.case==="edit"){const e=n.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,s])=>{t.set(i,M(s))});const r=new Map;return Object.entries(e.attributes).forEach(([i,s])=>{r.set(i,s)}),Ro.create(M(e.parentCreatedAt),ra(e.from),ra(e.to),t,e.content,r,M(e.executedAt))}else if(n.body.case==="style"){const e=n.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,s])=>{t.set(i,M(s))});const r=new Map;return Object.entries(e.attributes).forEach(([i,s])=>{r.set(i,s)}),Lo.create(M(e.parentCreatedAt),ra(e.from),ra(e.to),t,r,M(e.executedAt))}else{if(n.body.case==="select")return;if(n.body.case==="increase"){const e=n.body.value;return ys.create(M(e.parentCreatedAt),Eu(e.value),M(e.executedAt))}else if(n.body.case==="treeEdit"){const e=n.body.value,t=new Map;return Object.entries(e.createdAtMapByActor).forEach(([r,i])=>{t.set(r,M(i))}),Bo.create(M(e.parentCreatedAt),Ri(e.from),Ri(e.to),yS(e.contents),e.splitLevel,t,M(e.executedAt))}else if(n.body.case==="treeStyle"){const e=n.body.value,t=new Map,r=e.attributesToRemove,i=new Map;return e!=null&&e.createdAtMapByActor&&Object.entries(e.createdAtMapByActor).forEach(([s,o])=>{i.set(s,M(o))}),(r==null?void 0:r.length)>0?pr.createTreeRemoveStyleOperation(M(e.parentCreatedAt),Ri(e.from),Ri(e.to),i,r,M(e.executedAt)):(Object.entries(e.attributes).forEach(([s,o])=>{t.set(s,o)}),pr.create(M(e.parentCreatedAt),Ri(e.from),Ri(e.to),i,t,M(e.executedAt)))}else throw new k(S.ErrUnimplemented,"unimplemented operation")}}function SS(n){const e=[];for(const t of n){const r=Sy(t);r&&e.push(r)}return e}function ky(n){const e=[];for(const t of n)e.push(ms.create({id:yy(t.id),operations:SS(t.operations),presenceChange:t.presenceChange?gS(t.presenceChange):void 0,message:t.message}));return e}function kS(n){return ns.of(BigInt(n.serverSeq),n.clientSeq)}function TS(n){return zl.create(n.documentKey,kS(n.checkpoint),n.isRemoved,ky(n.changes),td(n.versionVector),n.snapshot,M(n.minSyncedTicket))}function Ty(n){const e=new wo;for(const r of n.nodes){const i=id(r.element);e.set(r.key,i,i.getPositionedAt())}const t=new He(M(n.createdAt),e);return t.setMovedAt(M(n.movedAt)),t.setRemovedAt(M(n.removedAt)),t}function Ay(n){const e=new ko;for(const r of n.nodes)e.insert(id(r.element));const t=new et(M(n.createdAt),e);return t.setMovedAt(M(n.movedAt)),t.setRemovedAt(M(n.removedAt)),t}function AS(n){const e=se.of(se.valueFromBytes(vy(n.type),n.value),M(n.createdAt));return e.setMovedAt(M(n.movedAt)),e.setRemovedAt(M(n.removedAt)),e}function IS(n){const e=new ps;let t=e.getHead();for(const i of n.nodes){const s=e.insertAfter(t,pS(i));i.insPrevId&&s.setInsPrev(e.findNode(wy(i.insPrevId))),t=s}const r=new It(e,M(n.createdAt));return r.setMovedAt(M(n.movedAt)),r.setRemovedAt(M(n.removedAt)),r}function ES(n){const e=tt.create(yl(n.type),tt.valueFromBytes(yl(n.type),n.value),M(n.createdAt));return e.setMovedAt(M(n.movedAt)),e.setRemovedAt(M(n.removedAt)),e}function Iy(n){const e=rd(n.nodes);return Et.create(e,M(n.createdAt))}function id(n){if(n.body.case==="jsonObject")return Ty(n.body.value);if(n.body.case==="jsonArray")return Ay(n.body.value);if(n.body.case==="primitive")return AS(n.body.value);if(n.body.case==="text")return IS(n.body.value);if(n.body.case==="counter")return ES(n.body.value);if(n.body.case==="tree")return Iy(n.body.value);throw new k(S.ErrUnimplemented,"unimplemented element")}function xS(n){if(!n)return{root:He.create(bt),presences:new Map};const e=Tc.fromBinary(n);return{root:id(e.root),presences:mS(e.presences)}}function CS(n){const e=Xf(n);return sd(e.toBinary())}function NS(n){const e=ad(n),t=Ml.fromBinary(e);return td(t)}function Ey(n){if(!n)throw new k(S.ErrInvalidArgument,"bytes is empty");const e=_e.fromBinary(n);return Ty(e.body.value)}function xy(n){return ed(n).toBinary()}function PS(n){if(!n)throw new k(S.ErrInvalidArgument,"bytes is empty");const e=_e.fromBinary(n);return Ay(e.body.value)}function DS(n){return my(n).toBinary()}function OS(n){if(!n)throw new k(S.ErrInvalidArgument,"bytes is empty");const e=_e.fromBinary(n);return Iy(e.body.value)}function RS(n){return py(n).toBinary()}function sd(n){return n?Array.from(n).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function od(n){return sd(n)}function ad(n){return new Uint8Array(n.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function ld(n){return ad(n)}function LS(n){const e=Fl.fromBinary(n);return yy(e)}function BS(n){const e=Hf.fromBinary(n);return Sy(e)}const de={fromPresence:nd,toChangePack:hS,fromChangePack:TS,fromChanges:ky,toTreeNodes:Zf,fromTreeNodes:rd,objectToBytes:xy,bytesToObject:Ey,bytesToSnapshot:xS,bytesToHex:sd,hexToBytes:ad,toHexString:od,toUint8Array:ld,toOperation:gy,toChangeID:fy,PbChangeID:Fl,bytesToChangeID:LS,bytesToOperation:BS,versionVectorToHex:CS,hexToVersionVector:NS};var Me=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(Me||{});let ai=3;function Cy(n){ai=n}const J={trivial:(...n)=>{ai>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{ai>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{ai>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{ai>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{ai>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>ai<=n};function Ny(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}class bS{constructor(e,t,r,i,s){u(this,"reconnectStreamDelay");u(this,"doc");u(this,"docID");u(this,"syncMode");u(this,"remoteChangeEventReceived");u(this,"watchStream");u(this,"watchLoopTimerID");u(this,"watchAbortController");u(this,"unsubscribeBroadcastEvent");this.reconnectStreamDelay=e,this.doc=t,this.docID=r,this.syncMode=i,this.remoteChangeEventReceived=!1,this.unsubscribeBroadcastEvent=s}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===Ia.RealtimeSyncOff?!1:this.syncMode===Ia.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Ia.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const xu=()=>{};class FS{constructor(e){u(this,"finalized",!1);u(this,"observers",[]);u(this,"finalError");try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(!e)throw new k(S.ErrInvalidArgument,"missing observer");if(this.finalized)throw new k(S.ErrRefused,"observable is finalized due to previous error");typeof e=="object"?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=xu),i.error===void 0&&(i.error=xu),i.complete===void 0&&(i.complete=xu);const s=Ny(),o=this.unsubscribeOne.bind(this,s);if(this.observers.push({subscriptionID:s,observer:i}),this.finalized)try{this.finalError?i.error(this.finalError):i.complete()}catch(a){J.warn(a)}return o}unsubscribeOne(e){var t;this.observers=(t=this.observers)==null?void 0:t.filter(r=>r.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(r){J.error(r)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function MS(n){const e=new FS(n);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class Hi{constructor(e,t,r,i){u(this,"id");u(this,"delimiter");u(this,"message");u(this,"root");u(this,"operations");u(this,"presenceChange");u(this,"previousPresence");u(this,"reversePresenceKeys");this.id=e,this.delimiter=ey,this.root=t,this.operations=[],this.previousPresence=Nt(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=i}static create(e,t,r,i){return new Hi(e,t,r,i)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getChange(){return ms.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const r of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class Ao{constructor(e){u(this,"rootObject");u(this,"elementPairMapByCreatedAt");u(this,"gcElementSetByCreatedAt");u(this,"gcPairMap");this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(e,void 0),e.getDescendants(t=>{if(t.getRemovedAt()&&this.registerRemovedElement(t),t instanceof It||t instanceof Et)for(const r of t.getGCPairs())this.registerGCPair(r);return!1})}static create(){return new Ao(He.create(bt))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const r=[];for(;t.parent;){const i=t.element.getCreatedAt(),s=t.parent.subPathOf(i);if(s===void 0)throw new k(S.ErrInvalidArgument,`cant find the given element: ${i.toIDString()}`);r.unshift(s),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),e instanceof Hr&&e.getDescendants((r,i)=>(this.registerElement(r,i),!1))}deregisterElement(e){let t=0;const r=i=>{const s=i.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(s),this.gcElementSetByCreatedAt.delete(s),t++};return r(e),e instanceof Hr&&e.getDescendants(i=>(r(i),!1)),t}registerRemovedElement(e){this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const t of this.gcElementSetByCreatedAt){e.add(t);const r=this.elementPairMapByCreatedAt.get(t);r.element instanceof Hr&&r.element.getDescendants(i=>(e.add(i.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}deepcopy(){return new Ao(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const r of this.gcElementSetByCreatedAt){const i=this.elementPairMapByCreatedAt.get(r),s=i.element.getRemovedAt();s&&(e!=null&&e.afterOrEqual(s))&&(i.parent.purge(i.element),t+=this.deregisterElement(i.element))}for(const[,r]of this.gcPairMap){const i=r.child.getRemovedAt();i&&(e!=null&&e.afterOrEqual(i))&&(r.parent.purge(r.child),this.gcPairMap.delete(r.child.toIDString()),t+=1)}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}}function Py(n,e){const t=new Io(n);return new Proxy(e,t.getHandlers())}class Io{constructor(e){u(this,"context");u(this,"handlers");this.context=e,this.handlers={set:(t,r,i)=>(J.isEnabled(Me.Trivial)&&J.trivial(`obj[${r}]=${JSON.stringify(i)}`),Io.setInternal(e,t,r,i),!0),get:(t,r)=>(J.isEnabled(Me.Trivial)&&J.trivial(`obj[${r}]`),r==="getID"?()=>t.getCreatedAt():r==="toJSON"||r==="toString"?()=>t.toJSON():r==="toJS"?()=>t.toJS():r==="toJSForTest"?()=>t.toJSForTest():li(e,t.get(r))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,r)=>(J.isEnabled(Me.Trivial)&&J.trivial(`obj[${r}]`),Io.deleteInternal(e,t,r),!0)}}static setInternal(e,t,r,i){if(r.includes("."))throw new k(S.ErrInvalidObjectKey,"key must not contain the '.'.");const s=e.issueTimeTicket(),o=vl(e,i,s),a=t.set(r,o,s);e.registerElement(o,t),a&&e.registerRemovedElement(a),e.push(Ei.create(r,o.deepcopy(),t.getCreatedAt(),s))}static buildObjectMembers(e,t){const r={};for(const[i,s]of Object.entries(t)){if(i.includes("."))throw new k(S.ErrInvalidObjectKey,"key must not contain the '.'.");const o=e.issueTimeTicket(),a=vl(e,s,o);r[i]=a}return r}static deleteInternal(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByKey(r,i);s&&(e.push(Zr.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s))}getHandlers(){return this.handlers}}function JS(n,e){const t=new le(n,e);return new Proxy(e,t.getHandlers())}function $S(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function zS(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class le{constructor(e,t){u(this,"context");u(this,"handlers");u(this,"array");this.context=e,this.array=t,this.handlers={get:(r,i,s)=>i==="getID"?()=>r.getCreatedAt():i==="getElementByID"?o=>{const a=r.getByID(o);if(!(!a||a.isRemoved()))return Nr(e,a)}:i==="getElementByIndex"?o=>{const a=r.get(o);return Nr(e,a)}:i==="getLast"?()=>Nr(e,r.getLast()):i==="deleteByID"?o=>{const a=le.deleteInternalByID(e,r,o);return Nr(e,a)}:i==="insertAfter"?(o,a)=>{const l=le.insertAfterInternal(e,r,o,a);return Nr(e,l)}:i==="insertBefore"?(o,a)=>{const l=le.insertBeforeInternal(e,r,o,a);return Nr(e,l)}:i==="moveBefore"?(o,a)=>{le.moveBeforeInternal(e,r,o,a)}:i==="moveAfter"?(o,a)=>{le.moveAfterInternal(e,r,o,a)}:i==="moveFront"?o=>{le.moveFrontInternal(e,r,o)}:i==="moveLast"?o=>{le.moveLastInternal(e,r,o)}:$S(i)?li(e,r.get(Number(i))):i==="push"?o=>le.pushInternal(e,r,o):i==="splice"?(o,a,...l)=>le.splice(e,r,o,a,...l):i==="length"?r.length:typeof i=="symbol"&&i===Symbol.iterator?le.iteratorInternal.bind(this,e,r):i==="includes"?(o,a)=>le.includes(e,r,o,a):i==="indexOf"?(o,a)=>le.indexOf(e,r,o,a):i==="lastIndexOf"?(o,a)=>le.lastIndexOf(e,r,o,a):i==="toJSForTest"?()=>r.toJSForTest():i==="toTestString"?()=>le.toTestString(r):typeof i=="string"&&zS(i)?(...o)=>{const a=Array.from(r).map(l=>li(e,l));return Array.prototype[i].apply(a,o)}:Reflect.get(r,i,s),deleteProperty:(r,i)=>(J.isEnabled(Me.Trivial)&&J.trivial(`array[${i}]`),le.deleteInternalByIndex(e,r,Number.parseInt(i)),!0)}}static*iteratorInternal(e,t){for(const r of t)yield Nr(e,r)}static buildArrayElements(e,t){const r=[];for(const i of t){const s=e.issueTimeTicket(),o=vl(e,i,s);r.push(o)}return r}static pushInternal(e,t,r){return le.insertAfterInternal(e,t,t.getLastCreatedAt(),r),t.length}static moveBeforeInternal(e,t,r,i){const s=e.issueTimeTicket(),o=t.getPrevCreatedAt(r);t.moveAfter(o,i,s),e.push(Fr.create(t.getCreatedAt(),o,i,s))}static moveAfterInternal(e,t,r,i){const s=e.issueTimeTicket();t.moveAfter(r,i,s),e.push(Fr.create(t.getCreatedAt(),r,i,s))}static moveFrontInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getHead();t.moveAfter(s.getCreatedAt(),r,i),e.push(Fr.create(t.getCreatedAt(),s.getCreatedAt(),r,i))}static moveLastInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getLastCreatedAt();t.moveAfter(s,r,i),e.push(Fr.create(t.getCreatedAt(),s,r,i))}static insertAfterInternal(e,t,r,i){const s=e.issueTimeTicket(),o=vl(e,i,s);return t.insertAfter(r,o),e.registerElement(o,t),e.push(Oo.create(t.getCreatedAt(),r,o.deepcopy(),s)),o}static insertBeforeInternal(e,t,r,i){return le.insertAfterInternal(e,t,t.getPrevCreatedAt(r),i)}static deleteInternalByIndex(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByIndex(r,i);if(s)return e.push(Zr.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static deleteInternalByID(e,t,r){const i=e.issueTimeTicket(),s=t.delete(r,i);return e.push(Zr.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static splice(e,t,r,i,...s){const o=t.length,a=r>=0?Math.min(r,o):Math.max(o+r,0),l=i===void 0?o:i<0?a:Math.min(a+i,o),c=[];for(let d=a;d<l;d++){const h=le.deleteInternalByIndex(e,t,a);if(h){const m=h.deepcopy();m.setRemovedAt(),c.push(li(e,m))}}if(s){let d=a===0?t.getHead().getID():t.get(a-1).getID();for(const h of s)d=le.insertAfterInternal(e,t,d,h).getID()}return c}static includes(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return!1;if(se.isSupport(r))return Array.from(t).map(c=>li(e,c)).includes(r,o);for(let l=o;l<s;l++)if(((a=t.get(l))==null?void 0:a.getID())===r.getID())return!0;return!1}static indexOf(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return-1;if(se.isSupport(r))return Array.from(t).map(c=>li(e,c)).indexOf(r,o);for(let l=o;l<s;l++)if(((a=t.get(l))==null?void 0:a.getID())===r.getID())return l;return-1}static lastIndexOf(e,t,r,i){var a;const s=t.length,o=i===void 0||i>=s?s-1:i<0?i+s:i;if(o<0)return-1;if(se.isSupport(r))return Array.from(t).map(c=>li(e,c)).lastIndexOf(r,o);for(let l=o;l>0;l--)if(((a=t.get(l))==null?void 0:a.getID())===r.getID())return l;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class Ul{constructor(e,t){u(this,"context");u(this,"text");this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,r,i){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const s=this.text.indexRangeToPosRange(e,t);J.isEnabled(Me.Debug)&&J.debug(`EDIT: f:${e}->${s[0].toTestString()}, t:${t}->${s[1].toTestString()} c:${r}`);const o=i?hs(i):void 0,a=this.context.issueTimeTicket(),[l,,c,d]=this.text.edit(s,r,a,o);for(const h of c)this.context.registerGCPair(h);return this.context.push(new Ro(this.text.getCreatedAt(),s[0],s[1],l,r,o?new Map(Object.entries(o)):new Map,a)),this.text.findIndexesFromRange(d)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,r){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.text.indexRangeToPosRange(e,t);J.isEnabled(Me.Debug)&&J.debug(`STYL: f:${e}->${i[0].toTestString()}, t:${t}->${i[1].toTestString()} a:${JSON.stringify(r)}`);const s=hs(r),o=this.context.issueTimeTicket(),[a,l]=this.text.setStyle(i,s,o);for(const c of l)this.context.registerGCPair(c);return this.context.push(new Lo(this.text.getCreatedAt(),i[0],i[1],a,new Map(Object.entries(s)),o)),!0}indexRangeToPosRange(e){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");const t=this.text.findIndexesFromRange([Ft.fromStruct(e[0]),Ft.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(e,t)}}class jl{constructor(e,t){u(this,"valueType");u(this,"value");u(this,"context");u(this,"counter");this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter)throw new k(S.ErrNotInitialized,"Counter is not initialized yet");const t=this.context.issueTimeTicket(),r=se.of(e,t);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(ys.create(this.counter.getCreatedAt(),r,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new k(S.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function ud(n,e,t){const{type:r}=n,i=t.issueTimeTicket();if(r===mr){Dy(n);const{value:s}=n,o=Xe.create(Ce.of(i,0),r,s);e.append(o)}else{const{children:s=[]}=n,{attributes:o}=n;let a;if(typeof o=="object"&&!Zp(o)){const c=hs(o);a=new Tr;for(const[d,h]of Object.entries(c))a.set(d,h,i)}const l=Xe.create(Ce.of(i,0),r,void 0,a);e.append(l);for(const c of s)ud(c,l,t)}}function US(n,e){const{type:t}=e,r=n.issueTimeTicket();let i;if(e.type===mr){const{value:s}=e;i=Xe.create(Ce.of(r,0),t,s)}else if(e){const{children:s=[]}=e,{attributes:o}=e;let a;if(typeof o=="object"&&!Zp(o)){const l=hs(o);a=new Tr;for(const[c,d]of Object.entries(l))a.set(c,d,r)}i=Xe.create(Ce.of(n.issueTimeTicket(),0),t,void 0,a);for(const l of s)ud(l,i,n)}return i}function Dy(n){if(!n.value.length)throw new k(S.ErrInvalidArgument,"text node cannot have empty value");return!0}function sg(n){if(!n.length)return!0;if(n[0].type===mr)for(const t of n){const{type:r}=t;if(r!==mr)throw new k(S.ErrInvalidArgument,"element node and text node cannot be passed together");Dy(t)}else for(const t of n){const{type:r}=t;if(r===mr)throw new k(S.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class Vl{constructor(e){u(this,"initialRoot");u(this,"context");u(this,"tree");this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return Xe.create(Ce.of(e.issueTimeTicket(),0),$1);const t=Xe.create(Ce.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)ud(r,t,e);return t}getSize(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,t){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new k(S.ErrInvalidArgument,"path should not be empty");const[r,i]=this.tree.pathToPosRange(e),s=this.context.issueTimeTicket(),o=t?hs(t):void 0,[a]=this.tree.style([r,i],o,s);this.context.push(pr.create(this.tree.getCreatedAt(),r,i,a,o?new Map(Object.entries(o)):new Map,s))}style(e,t,r){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),a=r?hs(r):void 0,[l,c]=this.tree.style([i,s],a,o);for(const d of c)this.context.registerGCPair(d);this.context.push(pr.create(this.tree.getCreatedAt(),i,s,l,a?new Map(Object.entries(a)):new Map,o))}removeStyle(e,t,r){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),[a,l]=this.tree.removeStyle([i,s],r,o);for(const c of l)this.context.registerGCPair(c);this.context.push(pr.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),i,s,a,r,o))}editInternal(e,t,r,i=0){var c;if(r.length!==0&&r[0]&&(sg(r),r[0].type!==mr))for(const d of r){const{children:h=[]}=d;sg(h)}const s=this.context.getLastTimeTicket();let o=new Array;if(((c=r[0])==null?void 0:c.type)===mr){let d="";for(const h of r){const{value:m}=h;d+=m}o.push(Xe.create(Ce.of(this.context.issueTimeTicket(),0),mr,d))}else o=r.map(d=>d&&US(this.context,d)).filter(d=>d);const[,a,l]=this.tree.edit([e,t],o.length?o.map(d=>d==null?void 0:d.deepcopy()):void 0,i,s,()=>this.context.issueTimeTicket());for(const d of a)this.context.registerGCPair(d);return this.context.push(Bo.create(this.tree.getCreatedAt(),e,t,o.length?o:void 0,i,l,s)),!0}editByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new k(S.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new k(S.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulkByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new k(S.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new k(S.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r,i)}edit(e,t,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulk(e,t,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r,i)}toXML(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],r=this.tree.indexRangeToPosRange(t);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");const t=[Rt.fromStruct(e[0]),Rt.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");const t=[Rt.fromStruct(e[0]),Rt.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function og(n,e){return Py(n,e)}function Nr(n,e){if(e){if(e instanceof se)return e;if(e instanceof He)return Py(n,e);if(e instanceof et)return JS(n,e);if(e instanceof It)return new Ul(n,e);if(e instanceof tt){const t=new jl(sn.IntegerCnt,0);return t.initialize(n,e),t}else if(e instanceof Et){const t=new Vl;return t.initialize(n,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function li(n,e){const t=Nr(n,e);return t instanceof se?t.getValue():t}function vl(n,e,t){let r;if(se.isSupport(e))r=se.of(e,t);else if(Array.isArray(e))r=et.create(t,le.buildArrayElements(n,e));else if(typeof e=="object")e instanceof Ul?(r=It.create(ps.create(),t),e.initialize(n,r)):e instanceof jl?(r=tt.create(e.getValueType(),e.getValue(),t),e.initialize(n,r)):e instanceof Vl?(r=Et.create(e.buildRoot(n),t),e.initialize(n,r)):r=He.create(t,Io.buildObjectMembers(n,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return r}const ag=50;class jS{constructor(){u(this,"undoStack",[]);u(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=ag&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=ag&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const VS="yorkie-devtools-panel",qS="yorkie-devtools-sdk";function KS(n){return[Ee.StatusChanged,Ee.Snapshot,Ee.LocalChange,Ee.RemoteChange,Ee.Initialized,Ee.Watched,Ee.Unwatched,Ee.PresenceChanged].includes(n.type)}function WS(n){return n.every(KS)}let Li="disconnected";const lg=new Map,Aa=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=Aa);function ia(n,e){(e!=null&&e.force||Li!=="disconnected")&&window.postMessage({source:qS,...n},"*")}function HS(n){if(!n.isEnableDevtools()||typeof window>"u"||lg.has(n.getKey()))return;Aa.set(n.getKey(),[]);const e=n.subscribe("all",t=>{WS(t)&&(Aa.get(n.getKey()).push(t),Li==="synced"&&ia({msg:"doc::sync::partial",docKey:n.getKey(),event:t}))});lg.set(n.getKey(),[e]),ia({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var i;if(((i=t.data)==null?void 0:i.source)!==VS)return;switch(t.data.msg){case"devtools::connect":if(Li!=="disconnected")break;Li="connected",ia({msg:"doc::available",docKey:n.getKey()}),J.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":Li="disconnected",J.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":Li="synced",ia({msg:"doc::sync::full",docKey:n.getKey(),events:Aa.get(n.getKey())}),J.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var Pr=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(Pr||{}),Ee=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(Ee||{}),_c=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(_c||{}),Gc=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(Gc||{});class Oy{constructor(e,t){u(this,"key");u(this,"status");u(this,"opts");u(this,"changeID");u(this,"checkpoint");u(this,"localChanges");u(this,"root");u(this,"clone");u(this,"eventStream");u(this,"eventStreamObserver");u(this,"onlineClients");u(this,"presences");u(this,"history");u(this,"internalHistory");u(this,"isUpdating");this.opts=t||{},this.key=e,this.status="detached",this.root=Ao.create(),this.changeID=_1,this.checkpoint=G1,this.localChanges=[],this.eventStream=MS(r=>{this.eventStreamObserver=r}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new jS,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},HS(this)}update(e,t){if(this.getStatus()==="removed")throw new k(S.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),i=Hi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(r)||{},t);try{const s=og(i,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,e(s,new Au(i,this.clone.presences.get(r)))}catch(s){throw this.clone=void 0,s}finally{this.isUpdating=!1}if(i.hasChange()){J.isEnabled(Me.Trivial)&&J.trivial(`trying to update a local change: ${this.toJSON()}`);const s=i.getChange(),{opInfos:o,reverseOps:a}=s.execute(this.root,this.presences,Y.Local),l=i.getReversePresence();l&&a.push({type:"presence",value:l}),this.localChanges.push(s),a.length>0&&this.internalHistory.pushUndo(a),o.length>0&&this.internalHistory.clearRedo(),this.changeID=s.getID();const c=[];o.length>0&&c.push({type:"local-change",source:Y.Local,value:{message:s.getMessage()||"",operations:o,actor:r,clientSeq:s.getID().getClientSeq(),serverSeq:s.getID().getServerSeq()},rawChange:this.isEnableDevtools()?s.toStruct():void 0}),s.hasPresenceChange()&&c.push({type:"presence-changed",source:Y.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(c),J.isEnabled(Me.Trivial)&&J.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,r,i){if(typeof e=="string"){if(typeof t!="function")throw new k(S.ErrInvalidArgument,"Second argument must be a callback function");if(e==="presence"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="initialized"&&c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||a(c)},r,i)}if(e==="my-presence"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="initialized"&&c.type!=="presence-changed"||c.type==="presence-changed"&&c.value.clientID!==this.changeID.getActorID()||a(c)},r,i)}if(e==="others"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||c.value.clientID!==this.changeID.getActorID()&&a(c)},r,i)}if(e==="connection"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="connection-changed"&&a(c)},r,i)}if(e==="status"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="status-changed"&&a(c)},r,i)}if(e==="sync"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="sync-status-changed"&&a(c)},r,i)}if(e==="local-broadcast"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="local-broadcast"&&a(c)},r)}if(e==="broadcast"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="broadcast"&&a(c)},r)}if(e==="auth-error"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="auth-error"&&a(c)},r)}if(e==="all"){const a=t;return this.eventStream.subscribe(a,r,i)}const s=e,o=t;return this.eventStream.subscribe(a=>{for(const l of a){if(l.type!=="local-change"&&l.type!=="remote-change")continue;const c=[];for(const d of l.value.operations)this.isSameElementOrChildOf(d.path,s)&&c.push(d);c.length&&o({...l,value:{...l.value,operations:c}})}},r,i)}if(typeof e=="function"){const s=e,o=t,a=r;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="snapshot"&&c.type!=="local-change"&&c.type!=="remote-change"||s(c)},o,a)}throw new k(S.ErrInvalidArgument,`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const r=e.split(".");return t.split(".").every((s,o)=>s===r[o])}removePushedLocalChanges(e){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e);)this.localChanges.shift()}applyChangePack(e){const t=e.hasSnapshot();t?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getVersionVector(),e.getSnapshot(),e.getCheckpoint().getClientSeq()):(this.applyChanges(e.getChanges(),Y.Remote),this.removePushedLocalChanges(e.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),t||this.garbageCollect(e.getVersionVector()),e.getIsRemoved()&&this.applyStatus("removed"),J.isEnabled(Me.Trivial)&&J.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Nt(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return zl.create(this.key,t,!1,e,this.getVersionVector())}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Hi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return og(e,this.clone.root.getObject())}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t,r,i=-1){const{root:s,presences:o}=de.bytesToSnapshot(r);this.root=new Ao(s),this.presences=o,this.changeID=this.changeID.setClocks(t.maxLamport(),t),this.clone=void 0,this.removePushedLocalChanges(i),this.applyChanges(this.localChanges,Y.Local),this.publish([{type:"snapshot",source:Y.Remote,value:{serverSeq:e.toString(),snapshot:this.isEnableDevtools()?de.bytesToHex(r):void 0,snapshotVector:de.versionVectorToHex(t)}}])}applyChanges(e,t){J.isEnabled(Me.Debug)&&J.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),J.isEnabled(Me.Trivial)&&J.trivial(e.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of e)this.applyChange(r,t);J.isEnabled(Me.Debug)&&J.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const r=[],i=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(i)){const o=e.getPresenceChange();switch(o.type){case Xr.Put:r.push(this.presences.has(i)?{type:"presence-changed",source:t,value:{clientID:i,presence:o.presence}}:{type:"watched",source:Y.Remote,value:{clientID:i,presence:o.presence}});break;case Xr.Clear:r.push({type:"unwatched",source:Y.Remote,value:{clientID:i,presence:this.getPresence(i)}}),this.removeOnlineClient(i);break}}const{opInfos:s}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncClocks(e.getID()),s.length>0){const o=this.isEnableDevtools()?e.toStruct():void 0;r.push(t===Y.Remote?{type:"remote-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o}:{type:"local-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o})}r.length>0&&this.publish(r)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,r=new Set;for(const i of t)i!==this.changeID.getActorID()&&r.add(i);this.setOnlineClients(r),this.publish([{type:"initialized",source:Y.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:r}=e.body.value,i=[];if(t===yi.DOCUMENT_WATCHED){if(this.onlineClients.has(r)&&this.hasPresence(r))return;this.addOnlineClient(r),this.hasPresence(r)&&i.push({type:"watched",source:Y.Remote,value:{clientID:r,presence:this.getPresence(r)}})}else if(t===yi.DOCUMENT_UNWATCHED){const s=this.getPresence(r);this.removeOnlineClient(r),s&&i.push({type:"unwatched",source:Y.Remote,value:{clientID:r,presence:s}})}else if(t===yi.DOCUMENT_BROADCAST&&e.body.value.body){const{topic:s,payload:o}=e.body.value.body,a=new TextDecoder;i.push({type:"broadcast",value:{clientID:r,topic:s,payload:JSON.parse(a.decode(o))}})}i.length>0&&this.publish(i)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(Jl),this.publish([{source:e==="removed"?Y.Remote:Y.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEventForReplay(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:t,serverSeq:r,snapshotVector:i}=e.value;if(!t)return;this.applySnapshot(BigInt(r),de.hexToVersionVector(i),de.hexToBytes(t));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const t=ms.fromStruct(e.rawChange);this.applyChange(t,e.source)}if(e.type==="initialized"){const t=new Set;for(const{clientID:r,presence:i}of e.value)t.add(r),this.presences.set(r,i);this.setOnlineClients(t);return}if(e.type==="watched"){const{clientID:t,presence:r}=e.value;this.addOnlineClient(t),this.presences.set(t,r);return}if(e.type==="unwatched"){const{clientID:t}=e.value;this.removeOnlineClient(t),this.presences.delete(t)}if(e.type==="presence-changed"){const{clientID:t,presence:r}=e.value;this.presences.set(t,r)}}applyDocEventsForReplay(e){for(const t of e)this.applyDocEventForReplay(t)}getValueByPath(e){if(!e.startsWith("$"))throw new k(S.ErrInvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let r=this.getRoot();for(const i of t)if(r=r[i],r===void 0)return;return r}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?Nt(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?Nt(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?Nt(t):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:Nt(this.getMyPresence())});for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:Nt(this.presences.get(t))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,r)=>t.clientID>r.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}filterVersionVector(e){const r=this.changeID.getVersionVector().filter(e);this.changeID=this.changeID.setVersionVector(r)}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new k(S.ErrRefused,"Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new k(S.ErrRefused,"There is no operation to be undone");this.ensureClone();const t=Hi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const c of e){if(!(c instanceof Jt)){new Au(t,Nt(this.clone.presences.get(this.changeID.getActorID()))).set(c.value,{addToHistory:!0});continue}const d=t.issueTimeTicket();c.setExecutedAt(d),t.push(c)}const r=t.getChange();r.execute(this.clone.root,this.clone.presences,Y.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,Y.UndoRedo),o=t.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushRedo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const a=this.changeID.getActorID(),l=[];i.length>0&&l.push({type:"local-change",source:Y.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&l.push({type:"presence-changed",source:Y.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(l)}redo(){if(this.isUpdating)throw new k(S.ErrRefused,"Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new k(S.ErrRefused,"There is no operation to be redone");this.ensureClone();const t=Hi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const c of e){if(!(c instanceof Jt)){new Au(t,Nt(this.clone.presences.get(this.changeID.getActorID()))).set(c.value,{addToHistory:!0});continue}const d=t.issueTimeTicket();c.setExecutedAt(d),t.push(c)}const r=t.getChange();r.execute(this.clone.root,this.clone.presences,Y.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,Y.UndoRedo),o=t.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushUndo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const a=this.changeID.getActorID(),l=[];i.length>0&&l.push({type:"local-change",source:Y.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&l.push({type:"presence-changed",source:Y.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(l)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}broadcast(e,t,r){const i={type:"local-broadcast",value:{topic:e,payload:t},options:r};this.publish([i])}getVersionVector(){return this.changeID.getVersionVector()}}function _S(n,e){let t=e;return{authInterceptor:s=>async o=>(n&&o.header.set("x-api-key",n),t&&o.header.set("authorization",t),await s(o)),setToken:s=>{t=s}}}const GS="@yorkie-js/sdk",YS="0.6.0",QS="Yorkie JS SDK",XS="./src/yorkie.ts",ZS={access:"public",main:"./dist/yorkie-js-sdk.js",typings:"./dist/yorkie-js-sdk.d.ts"},ek=["dist"],tk={build:"tsc && vite build","build:proto":"npx buf generate","build:docs":"typedoc","build:ghpages":"mkdir -p ghpages/examples && cp -r docs ghpages/api-reference && find ../../examples -name 'dist' -type d -exec sh -c 'cp -r {} ghpages/examples/$(basename $(dirname {}))' \\;",dev:"vite build -c vite.preview.ts && vite preview",test:"vitest run","test:watch":"vitest","test:bench":"vitest bench","test:ci":"vitest run --coverage","test:yorkie.dev":"TEST_RPC_ADDR=https://api.yorkie.dev vitest run --coverage",prepare:"pnpm build"},nk={node:">=18.0.0",npm:">=7.1.0"},rk={type:"git",url:"git+https://github.com/yorkie-team/yorkie-js-sdk.git"},ik={name:"hackerwins",email:"susukang98@gmail.com"},sk="Apache-2.0",ok={url:"https://github.com/yorkie-team/yorkie-js-sdk/issues"},ak="https://github.com/yorkie-team/yorkie-js-sdk#readme",lk={"@buf/googleapis_googleapis.bufbuild_es":"^1.4.0-20240524201209-f0e53af8f2fc.3","@bufbuild/buf":"^1.28.1","@bufbuild/protoc-gen-es":"^1.6.0","@connectrpc/protoc-gen-connect-es":"^1.4.0","@types/express":"^4.17.21","@types/google-protobuf":"^3.15.5","@types/long":"^4.0.1","@typescript-eslint/eslint-plugin":"^6.21.0","@typescript-eslint/parser":"^6.21.0","@vitest/coverage-istanbul":"^0.34.5","@vitest/coverage-v8":"^0.34.5",axios:"^1.7.7","eslint-plugin-tsdoc":"^0.2.16",express:"^4.21.1",prettier:"^2.7.1","ts-node":"^10.9.1",typedoc:"^0.25.13",typescript:"^5.3.3","typescript-transform-paths":"^3.3.1",vite:"^5.0.12","vite-plugin-commonjs":"^0.10.1","vite-plugin-dts":"^3.9.1","vite-tsconfig-paths":"^4.3.1",vitest:"^0.34.5"},uk={"@bufbuild/protobuf":"^1.6.0","@connectrpc/connect":"^1.4.0","@connectrpc/connect-web":"^1.4.0",long:"^5.2.0"},ug={name:GS,version:YS,description:QS,main:XS,publishConfig:ZS,files:ek,scripts:tk,engines:nk,repository:rk,author:ik,license:sk,bugs:ok,homepage:ak,devDependencies:lk,dependencies:uk};function ck(){return n=>async e=>(e.header.set("x-yorkie-user-agent",ug.name+"/"+ug.version),await n(e))}const fk=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var Ia=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(Ia||{});const sa={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3},Cu={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class Ry{constructor(e,t){u(this,"id");u(this,"key");u(this,"metadata");u(this,"status");u(this,"attachmentMap");u(this,"apiKey");u(this,"authTokenInjector");u(this,"conditions");u(this,"syncLoopDuration");u(this,"reconnectStreamDelay");u(this,"retrySyncLoopDelay");u(this,"rpcClient");u(this,"setAuthToken");u(this,"taskQueue");u(this,"processing",!1);u(this,"keepalive",!1);t=t||sa,this.key=t.key?t.key:Ny(),this.metadata=t.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.authTokenInjector=t.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=t.syncLoopDuration??sa.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay??sa.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay??sa.retrySyncLoopDelay;const{authInterceptor:r,setToken:i}=_S(this.apiKey);this.setAuthToken=i,this.rpcClient=l1(O1,D1({baseUrl:e,interceptors:[r,ck()],fetch:(s,o)=>{const a={...o,keepalive:this.keepalive};return fetch(s,a)}})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const e=await this.authTokenInjector();this.setAuthToken(e)}return this.enqueueTask(async()=>this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status="activated",this.runSyncLoop(),J.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(async e=>{throw J.error(`[AC] c:"${this.getKey()}" err :`,e),await this.handleConnectError(e),e}))}deactivate(e={keepalive:!1}){if(this.status==="deactivated")return Promise.resolve();const t=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}),this.deactivateInternal(),J.info(`[DC] c"${this.getKey()}" deactivated`)}catch(r){throw J.error(`[DC] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};if(e.keepalive){this.keepalive=!0;const r=t();return this.keepalive=!1,r}return this.enqueueTask(t)}attach(e,t={}){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==Pr.Detached)throw new k(S.ErrDocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((s,o)=>o.set(t.initialPresence||{}));const r=e.subscribe("local-broadcast",async s=>{var d;const{topic:o,payload:a}=s.value,l=(d=s.options)==null?void 0:d.error,c=s.options;try{await this.broadcast(e.getKey(),o,a,c)}catch(h){h instanceof Error&&(l==null||l(h))}}),i=t.syncMode??"realtime";return this.enqueueTask(async()=>this.rpcClient.attachDocument({clientId:this.id,changePack:de.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async s=>{const o=de.fromChangePack(s.changePack);if(e.applyChangePack(o),e.getStatus()===Pr.Removed)return e;e.applyStatus(Pr.Attached),this.attachmentMap.set(e.getKey(),new bS(this.reconnectStreamDelay,e,s.documentId,i,r)),i!=="manual"&&await this.runWatchLoop(e.getKey()),J.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`);const a=e.getRootObject();if(t.initialRoot){const l=t.initialRoot;e.update(c=>{for(const[d,h]of Object.entries(l))if(!a.has(d)){const m=d;c[m]=h}})}return e}).catch(async s=>{throw J.error(`[AD] c:"${this.getKey()}" err :`,s),await this.handleConnectError(s),s}))}detach(e,t={}){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return e.update((i,s)=>s.clear()),this.enqueueTask(async()=>this.rpcClient.detachDocument({clientId:this.id,documentId:r.docID,changePack:de.toChangePack(e.createChangePack()),removeIfNotAttached:t.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(i=>{const s=de.fromChangePack(i.changePack);return e.applyChangePack(s),e.getStatus()!==Pr.Removed&&e.applyStatus(Pr.Detached),this.detachInternal(e.getKey()),J.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(async i=>{throw J.error(`[DD] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}))}async changeSyncMode(e,t){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);const i=r.syncMode;return i===t?e:(r.changeSyncMode(t),t==="manual"?(r.cancelWatchStream(),e):(t==="realtime"&&(r.remoteChangeEventReceived=!0),i==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);if(e){const t=this.attachmentMap.get(e.getKey());if(!t)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(t,"realtime").catch(async r=>{throw J.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}return this.enqueueTask(async()=>{const t=[];for(const[,r]of this.attachmentMap)t.push(this.syncInternal(r,r.syncMode));return Promise.all(t).catch(async r=>{throw J.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r})})}remove(e){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const r=de.toChangePack(e.createChangePack());return r.isRemoved=!0,this.enqueueTask(async()=>this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(i=>{const s=de.fromChangePack(i.changePack);e.applyChangePack(s),this.detachInternal(e.getKey()),J.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(async i=>{throw J.error(`[RD] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}))}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(e){return this.conditions[e]}broadcast(e,t,r,i){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const s=this.attachmentMap.get(e);if(!s)throw new k(S.ErrDocumentNotAttached,`${e} is not attached`);if(!fk(r))throw new k(S.ErrInvalidArgument,"payload is not serializable");const o=(i==null?void 0:i.maxRetries)??Cu.maxRetries,a=Cu.maxBackoff;let l=0;const c=h=>Math.min(Cu.initialRetryInterval*2**h,a),d=async()=>this.enqueueTask(async()=>this.rpcClient.broadcast({clientId:this.id,documentId:s.docID,topic:t,payload:new TextEncoder().encode(JSON.stringify(r))},{headers:{"x-shard-key":`${this.apiKey}/${e}`}}).then(()=>{J.info(`[BC] c:"${this.getKey()}" broadcasts d:"${e}" t:"${t}"`)}).catch(async h=>{if(J.error(`[BC] c:"${this.getKey()}" err:`,h),await this.handleConnectError(h))if(h instanceof ne&&Oi(h)===S.ErrUnauthenticated&&s.doc.publish([{type:Ee.AuthError,value:{reason:Fs(h).reason,method:"Broadcast"}}]),l<o)l++,setTimeout(()=>d(),c(l-1)),J.info(`[BC] c:"${this.getKey()}" retry attempt ${l}/${o}`);else throw J.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),h;else throw h}));return d()}runSyncLoop(){const e=()=>{if(!this.isActive()){J.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const t=[];for(const[,r]of this.attachmentMap)r.needRealtimeSync()&&(r.remoteChangeEventReceived=!1,t.push(this.syncInternal(r,r.syncMode).catch(async i=>{throw i instanceof ne&&Oi(i)===S.ErrUnauthenticated&&r.doc.publish([{type:Ee.AuthError,value:{reason:Fs(i).reason,method:"PushPull"}}]),i})));Promise.all(t).then(()=>setTimeout(e,this.syncLoopDuration)).catch(async r=>{J.error(`[SL] c:"${this.getKey()}" sync failed:`,r),await this.handleConnectError(r)?setTimeout(e,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};J.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new k(S.ErrDocumentNotAttached,`${e} is not attached`);return this.conditions.WatchLoop=!0,t.runWatchLoop(r=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new k(S.ErrClientNotActivated,`${this.key} is not active`));const i=new AbortController,s=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:i.signal});return t.doc.publish([{type:Ee.ConnectionChanged,value:_c.Connected}]),J.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((o,a)=>{(async()=>{try{for await(const c of s)this.handleWatchDocumentsResponse(t,c),c.body.case==="initialization"&&o([s,i])}catch(c){t.doc.resetOnlineClients(),t.doc.publish([{type:Ee.Initialized,source:Y.Local,value:t.doc.getPresences()}]),t.doc.publish([{type:Ee.ConnectionChanged,value:_c.Disconnected}]),J.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(c)?(c instanceof ne&&Oi(c)===S.ErrUnauthenticated&&t.doc.publish([{type:Ee.AuthError,value:{reason:Fs(c).reason,method:"WatchDocuments"}}]),r()):this.conditions.WatchLoop=!1,a(c)}})()})})}handleWatchDocumentsResponse(e,t){if(t.body.case==="event"&&t.body.value.type===yi.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(t)}deactivateInternal(){this.status="deactivated";for(const[e,t]of this.attachmentMap)this.detachInternal(e),t.doc.applyStatus(Pr.Detached)}detachInternal(e){const t=this.attachmentMap.get(e);t&&(t.cancelWatchStream(),t.unsubscribeBroadcastEvent(),this.attachmentMap.delete(e))}syncInternal(e,t){const{doc:r,docID:i}=e,s=r.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:i,changePack:de.toChangePack(s),pushOnly:t==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${r.getKey()}`}}).then(o=>{const a=de.fromChangePack(o.changePack);if(a.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return r;r.applyChangePack(a),e.doc.publish([{type:Ee.SyncStatusChanged,value:Gc.Synced}]),r.getStatus()===Pr.Removed&&this.detachInternal(r.getKey());const l=r.getKey(),c=a.getChangeSize();return J.info(`[PP] c:"${this.getKey()}" sync d:"${l}", push:${s.getChangeSize()} pull:${c} cp:${a.getCheckpoint().toTestString()}`),r}).catch(async o=>{throw r.publish([{type:Ee.SyncStatusChanged,value:Gc.SyncFailed}]),J.error(`[PP] c:"${this.getKey()}" err :`,o),o})}async handleConnectError(e){if(!(e instanceof ne))return!1;if(e.code===_.Canceled||e.code===_.Unknown||e.code===_.ResourceExhausted||e.code===_.Unavailable)return!0;if(Oi(e)===S.ErrUnauthenticated){if(this.authTokenInjector){const t=await this.authTokenInjector(Fs(e).reason);this.setAuthToken(t)}return!0}return(Oi(e)===S.ErrClientNotActivated||Oi(e)===S.ErrClientNotFound)&&this.deactivateInternal(),!1}enqueueTask(e){return new Promise((t,r)=>{this.taskQueue.push(()=>e().then(t).catch(r)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{J.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}const cg={Client:Ry,Document:Oy,Primitive:se,Text:Ul,Counter:jl,Tree:Vl,LogLevel:Me,setLogLevel:Cy,IntType:sn.IntegerCnt,LongType:sn.LongCnt};typeof globalThis<"u"&&(globalThis.yorkie={Client:Ry,Document:Oy,Primitive:se,Text:Ul,Counter:jl,Tree:Vl,LogLevel:Me,setLogLevel:Cy,IntType:sn.IntegerCnt,LongType:sn.LongCnt});var Ly={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var r=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var o=typeof s;if(o==="string"||o==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=t.apply(null,s);a&&r.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){r.push(s.toString());continue}for(var l in s)e.call(s,l)&&s[l]&&r.push(l)}}}return r.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(Ly);var dk=Ly.exports;const cd=Jy(dk);function By(n){const[e,t]=Mr.useState(n.text||"");return Q.jsx("input",{className:cd({edit:n.editing,"new-todo":n.newTodo}),type:"text",placeholder:n.placeholder,value:e,onBlur:r=>{n.newTodo||n.onSave(r.target.value)},onChange:r=>{t(r.target.value)},onKeyDown:r=>{const i=r.target;r.which===13&&(n.onSave(i.value.trim()),n.newTodo&&t(""))}})}function hk(n){return Q.jsxs("header",{className:"header",children:[Q.jsx("h1",{children:"todos"}),Q.jsx(By,{newTodo:!0,onSave:e=>{e.length!==0&&n.addTodo(e)},placeholder:"What needs to be done?"})]})}function gk(n){const[e,t]=Mr.useState(!1),{todo:r,completeTodo:i,editTodo:s,deleteTodo:o}=n;return Q.jsx("li",{className:cd({completed:r.completed,editing:e}),children:e?Q.jsx(By,{text:r.text,editing:e,onSave:a=>{a.length===0?o(r.id):s(r.id,a),t(!1)}}):Q.jsxs("div",{className:"view",children:[Q.jsx("input",{id:`item-input-${r.id}`,className:"toggle",type:"checkbox",checked:r.completed,onChange:()=>i(r.id)}),Q.jsx("label",{htmlFor:`item-input-${r.id}`,onDoubleClick:()=>t(!0),children:r.text}),Q.jsx("button",{type:"button","aria-label":"Delete",className:"destroy",onClick:()=>o(r.id)})]})})}const mk={SHOW_ALL:"All",SHOW_ACTIVE:"Active",SHOW_COMPLETED:"Completed"};function pk(n){const{activeCount:e,completedCount:t,filter:r,onClearCompleted:i,onShow:s}=n;return Q.jsxs("footer",{className:"footer",children:[Q.jsxs("span",{className:"todo-count",children:[Q.jsx("strong",{children:e||"No"}),"",e===1?"item":"items"," left"]}),Q.jsx("ul",{className:"filters",children:["SHOW_ALL","SHOW_ACTIVE","SHOW_COMPLETED"].map(o=>Q.jsx("li",{children:Q.jsx("button",{type:"button",className:cd({selected:o===r}),style:{cursor:"pointer"},onClick:()=>s(o),children:mk[o]})},o))}),!!t&&Q.jsx("button",{type:"button",className:"clear-completed",onClick:i,children:"Clear completed"})]})}const yk={SHOW_ALL:n=>!0,SHOW_ACTIVE:n=>!n.completed,SHOW_COMPLETED:n=>n.completed};function vk(n){const[e,t]=Mr.useState("SHOW_ALL"),{todos:r,actions:i}=n,s=r.filter(yk[e]),o=r.reduce((l,c)=>c.completed?l+1:l,0),a=r.length-o;return r.length===0?null:Q.jsxs("section",{className:"main",children:[Q.jsx("input",{className:"toggle-all",type:"checkbox",defaultChecked:o===r.length,onChange:i.completeAll}),Q.jsx("ul",{className:"todo-list",children:s.map(l=>Q.jsx(gk,{todo:l,editTodo:i.editTodo,deleteTodo:i.deleteTodo,completeTodo:i.completeTodo},l.id))}),Q.jsx(pk,{completedCount:o,activeCount:a,filter:e,onClearCompleted:()=>i.clearCompleted(),onShow:t})]})}const wk=[{id:0,text:"Yorkie JS SDK",completed:!1},{id:1,text:"Garbage collection",completed:!1},{id:2,text:"RichText datatype",completed:!1}];function Sk(){const[n]=Mr.useState(()=>new cg.Document(`react-todomvc-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`)),[e,t]=Mr.useState([]),r={addTodo:i=>{n==null||n.update(s=>{s.todos.push({id:s.todos.reduce((o,a)=>Math.max(a.id,o),-1)+1,completed:!1,text:i})})},deleteTodo:i=>{n==null||n.update(s=>{let o;for(const a of s.todos)if(a.id===i){o=a;break}o&&s.todos.deleteByID(o.getID())})},editTodo:(i,s)=>{n==null||n.update(o=>{let a;for(const l of o.todos)if(l.id===i){a=l;break}a&&(a.text=s)})},completeTodo:i=>{n==null||n.update(s=>{let o;for(const a of s.todos)if(a.id===i){o=a;break}o&&(o.completed=!o.completed)})},clearCompleted:()=>{n==null||n.update(i=>{for(const s of i.todos)if(s.completed){const o=s;i.todos.deleteByID(o.getID())}},"")}};return Mr.useEffect(()=>{const i=new cg.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"});async function s(o,a){await i.activate(),await i.attach(o),o.update(l=>{l.todos||(l.todos=wk)},"create default todos if not exists"),o.subscribe(l=>{a(o.getRoot().todos)}),a(o.getRoot().todos)}s(n,o=>{t(o)})},[]),Q.jsxs("div",{className:"App",children:[Q.jsx(hk,{addTodo:r.addTodo}),Q.jsx(vk,{todos:e,actions:r})]})}Nu.createRoot(document.getElementById("root")).render(Q.jsx(Sk,{}));
