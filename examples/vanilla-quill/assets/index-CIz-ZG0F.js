var Ku=Object.defineProperty;var Hu=(i,t,e)=>t in i?Ku(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var T=(i,t,e)=>Hu(i,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();var Ge;(function(i){i[i.Canceled=1]="Canceled",i[i.Unknown=2]="Unknown",i[i.InvalidArgument=3]="InvalidArgument",i[i.DeadlineExceeded=4]="DeadlineExceeded",i[i.NotFound=5]="NotFound",i[i.AlreadyExists=6]="AlreadyExists",i[i.PermissionDenied=7]="PermissionDenied",i[i.ResourceExhausted=8]="ResourceExhausted",i[i.FailedPrecondition=9]="FailedPrecondition",i[i.Aborted=10]="Aborted",i[i.OutOfRange=11]="OutOfRange",i[i.Unimplemented=12]="Unimplemented",i[i.Internal=13]="Internal",i[i.Unavailable=14]="Unavailable",i[i.DataLoss=15]="DataLoss",i[i.Unauthenticated=16]="Unauthenticated"})(Ge||(Ge={}));function Ua(i){const t=Ge[i];return typeof t!="string"?i.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,e=>"_"+e.toLowerCase())}class Ze extends Error{constructor(t,e=Ge.Unknown,n,r,o){super(Wu(t,e)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=t,this.code=e,this.metadata=new Headers(n??{}),this.details=r??[],this.cause=o}static from(t,e=Ge.Unknown){return t instanceof Ze?t:t instanceof Error?t.name=="AbortError"?new Ze(t.message,Ge.Canceled):new Ze(t.message,e,void 0,void 0,t):new Ze(String(t),e,void 0,void 0,t)}static[Symbol.hasInstance](t){return t instanceof Error?Object.getPrototypeOf(t)===Ze.prototype?!0:t.name==="ConnectError"&&"code"in t&&typeof t.code=="number"&&"metadata"in t&&"details"in t&&Array.isArray(t.details)&&"rawMessage"in t&&typeof t.rawMessage=="string"&&"cause"in t:!1}findDetails(t){const e="typeName"in t?{findMessage:r=>r===t.typeName?t:void 0}:t,n=[];for(const r of this.details){if("getType"in r){e.findMessage(r.getType().typeName)&&n.push(r);continue}const o=e.findMessage(r.type);if(o)try{n.push(o.fromBinary(r.value))}catch{}}return n}}function Wu(i,t){return i.length?`[${Ua(t)}] ${i}`:`[${Ua(t)}]`}function it(i,t){if(!i)throw new Error(t)}const Gu=34028234663852886e22,Yu=-34028234663852886e22,Zu=4294967295,Xu=2147483647,Qu=-2147483648;function Ho(i){if(typeof i!="number")throw new Error("invalid int 32: "+typeof i);if(!Number.isInteger(i)||i>Xu||i<Qu)throw new Error("invalid int 32: "+i)}function Ks(i){if(typeof i!="number")throw new Error("invalid uint 32: "+typeof i);if(!Number.isInteger(i)||i>Zu||i<0)throw new Error("invalid uint 32: "+i)}function Rl(i){if(typeof i!="number")throw new Error("invalid float 32: "+typeof i);if(Number.isFinite(i)&&(i>Gu||i<Yu))throw new Error("invalid float 32: "+i)}const Dl=Symbol("@bufbuild/protobuf/enum-type");function ec(i){const t=i[Dl];return it(t,"missing enum type on enum object"),t}function Bl(i,t,e,n){i[Dl]=Ml(t,e.map(r=>({no:r.no,name:r.name,localName:i[r.no]})))}function Ml(i,t,e){const n=Object.create(null),r=Object.create(null),o=[];for(const s of t){const u=ql(s);o.push(u),n[s.name]=u,r[s.no]=u}return{typeName:i,values:o,findName(s){return n[s]},findNumber(s){return r[s]}}}function tc(i,t,e){const n={};for(const r of t){const o=ql(r);n[o.localName]=o.no,n[o.no]=o.localName}return Bl(n,i,t),n}function ql(i){return"localName"in i?i:Object.assign(Object.assign({},i),{localName:i.name})}class me{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,e){const n=this.getType(),r=n.runtime.bin,o=r.makeReadOptions(e);return r.readMessage(this,o.readerFactory(t),t.byteLength,o),this}fromJson(t,e){const n=this.getType(),r=n.runtime.json,o=r.makeReadOptions(e);return r.readMessage(n,t,o,this),this}fromJsonString(t,e){let n;try{n=JSON.parse(t)}catch(r){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${r instanceof Error?r.message:String(r)}`)}return this.fromJson(n,e)}toBinary(t){const e=this.getType(),n=e.runtime.bin,r=n.makeWriteOptions(t),o=r.writerFactory();return n.writeMessage(this,o,r),o.finish()}toJson(t){const e=this.getType(),n=e.runtime.json,r=n.makeWriteOptions(t);return n.writeMessage(this,r)}toJsonString(t){var e;const n=this.toJson(t);return JSON.stringify(n,null,(e=t==null?void 0:t.prettySpaces)!==null&&e!==void 0?e:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function nc(i,t,e,n){var r;const o=(r=n==null?void 0:n.localName)!==null&&r!==void 0?r:t.substring(t.lastIndexOf(".")+1),s={[o]:function(u){i.util.initFields(this),i.util.initPartial(u,this)}}[o];return Object.setPrototypeOf(s.prototype,new me),Object.assign(s,{runtime:i,typeName:t,fields:i.util.newFieldList(e),fromBinary(u,c){return new s().fromBinary(u,c)},fromJson(u,c){return new s().fromJson(u,c)},fromJsonString(u,c){return new s().fromJsonString(u,c)},equals(u,c){return i.util.equals(s,u,c)}}),s}function rc(){let i=0,t=0;for(let n=0;n<28;n+=7){let r=this.buf[this.pos++];if(i|=(r&127)<<n,!(r&128))return this.assertBounds(),[i,t]}let e=this.buf[this.pos++];if(i|=(e&15)<<28,t=(e&112)>>4,!(e&128))return this.assertBounds(),[i,t];for(let n=3;n<=31;n+=7){let r=this.buf[this.pos++];if(t|=(r&127)<<n,!(r&128))return this.assertBounds(),[i,t]}throw new Error("invalid varint")}function Ds(i,t,e){for(let o=0;o<28;o=o+7){const s=i>>>o,u=!(!(s>>>7)&&t==0),c=(u?s|128:s)&255;if(e.push(c),!u)return}const n=i>>>28&15|(t&7)<<4,r=!!(t>>3);if(e.push((r?n|128:n)&255),!!r){for(let o=3;o<31;o=o+7){const s=t>>>o,u=!!(s>>>7),c=(u?s|128:s)&255;if(e.push(c),!u)return}e.push(t>>>31&1)}}const Wo=4294967296;function Ja(i){const t=i[0]==="-";t&&(i=i.slice(1));const e=1e6;let n=0,r=0;function o(s,u){const c=Number(i.slice(s,u));r*=e,n=n*e+c,n>=Wo&&(r=r+(n/Wo|0),n=n%Wo)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),t?jl(n,r):wa(n,r)}function ic(i,t){let e=wa(i,t);const n=e.hi&2147483648;n&&(e=jl(e.lo,e.hi));const r=Fl(e.lo,e.hi);return n?"-"+r:r}function Fl(i,t){if({lo:i,hi:t}=oc(i,t),t<=2097151)return String(Wo*t+i);const e=i&16777215,n=(i>>>24|t<<8)&16777215,r=t>>16&65535;let o=e+n*6777216+r*6710656,s=n+r*8147497,u=r*2;const c=1e7;return o>=c&&(s+=Math.floor(o/c),o%=c),s>=c&&(u+=Math.floor(s/c),s%=c),u.toString()+$a(s)+$a(o)}function oc(i,t){return{lo:i>>>0,hi:t>>>0}}function wa(i,t){return{lo:i|0,hi:t|0}}function jl(i,t){return t=~t,i?i=~i+1:t+=1,wa(i,t)}const $a=i=>{const t=String(i);return"0000000".slice(t.length)+t};function za(i,t){if(i>=0){for(;i>127;)t.push(i&127|128),i=i>>>7;t.push(i)}else{for(let e=0;e<9;e++)t.push(i&127|128),i=i>>7;t.push(1)}}function sc(){let i=this.buf[this.pos++],t=i&127;if(!(i&128))return this.assertBounds(),t;if(i=this.buf[this.pos++],t|=(i&127)<<7,!(i&128))return this.assertBounds(),t;if(i=this.buf[this.pos++],t|=(i&127)<<14,!(i&128))return this.assertBounds(),t;if(i=this.buf[this.pos++],t|=(i&127)<<21,!(i&128))return this.assertBounds(),t;i=this.buf[this.pos++],t|=(i&15)<<28;for(let e=5;i&128&&e<10;e++)i=this.buf[this.pos++];if(i&128)throw new Error("invalid varint");return this.assertBounds(),t>>>0}var Va={};function ac(){const i=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof i.getBigInt64=="function"&&typeof i.getBigUint64=="function"&&typeof i.setBigInt64=="function"&&typeof i.setBigUint64=="function"&&(typeof process!="object"||typeof Va!="object"||Va.BUF_BIGINT_DISABLE!=="1")){const r=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),s=BigInt("0"),u=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(c){const m=typeof c=="bigint"?c:BigInt(c);if(m>o||m<r)throw new Error(`int64 invalid: ${c}`);return m},uParse(c){const m=typeof c=="bigint"?c:BigInt(c);if(m>u||m<s)throw new Error(`uint64 invalid: ${c}`);return m},enc(c){return i.setBigInt64(0,this.parse(c),!0),{lo:i.getInt32(0,!0),hi:i.getInt32(4,!0)}},uEnc(c){return i.setBigInt64(0,this.uParse(c),!0),{lo:i.getInt32(0,!0),hi:i.getInt32(4,!0)}},dec(c,m){return i.setInt32(0,c,!0),i.setInt32(4,m,!0),i.getBigInt64(0,!0)},uDec(c,m){return i.setInt32(0,c,!0),i.setInt32(4,m,!0),i.getBigUint64(0,!0)}}}const e=r=>it(/^-?[0-9]+$/.test(r),`int64 invalid: ${r}`),n=r=>it(/^[0-9]+$/.test(r),`uint64 invalid: ${r}`);return{zero:"0",supported:!1,parse(r){return typeof r!="string"&&(r=r.toString()),e(r),r},uParse(r){return typeof r!="string"&&(r=r.toString()),n(r),r},enc(r){return typeof r!="string"&&(r=r.toString()),e(r),Ja(r)},uEnc(r){return typeof r!="string"&&(r=r.toString()),n(r),Ja(r)},dec(r,o){return ic(r,o)},uDec(r,o){return Fl(r,o)}}}const Xe=ac();var le;(function(i){i[i.DOUBLE=1]="DOUBLE",i[i.FLOAT=2]="FLOAT",i[i.INT64=3]="INT64",i[i.UINT64=4]="UINT64",i[i.INT32=5]="INT32",i[i.FIXED64=6]="FIXED64",i[i.FIXED32=7]="FIXED32",i[i.BOOL=8]="BOOL",i[i.STRING=9]="STRING",i[i.BYTES=12]="BYTES",i[i.UINT32=13]="UINT32",i[i.SFIXED32=15]="SFIXED32",i[i.SFIXED64=16]="SFIXED64",i[i.SINT32=17]="SINT32",i[i.SINT64=18]="SINT64"})(le||(le={}));var gi;(function(i){i[i.BIGINT=0]="BIGINT",i[i.STRING=1]="STRING"})(gi||(gi={}));function ii(i,t,e){if(t===e)return!0;if(i==le.BYTES){if(!(t instanceof Uint8Array)||!(e instanceof Uint8Array)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}switch(i){case le.UINT64:case le.FIXED64:case le.INT64:case le.SFIXED64:case le.SINT64:return t==e}return!1}function Hi(i,t){switch(i){case le.BOOL:return!1;case le.UINT64:case le.FIXED64:case le.INT64:case le.SFIXED64:case le.SINT64:return t==0?Xe.zero:"0";case le.DOUBLE:case le.FLOAT:return 0;case le.BYTES:return new Uint8Array(0);case le.STRING:return"";default:return 0}}function Ul(i,t){switch(i){case le.BOOL:return t===!1;case le.STRING:return t==="";case le.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}var ut;(function(i){i[i.Varint=0]="Varint",i[i.Bit64=1]="Bit64",i[i.LengthDelimited=2]="LengthDelimited",i[i.StartGroup=3]="StartGroup",i[i.EndGroup=4]="EndGroup",i[i.Bit32=5]="Bit32"})(ut||(ut={}));class lc{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let r=0;r<this.chunks.length;r++)t+=this.chunks[r].length;let e=new Uint8Array(t),n=0;for(let r=0;r<this.chunks.length;r++)e.set(this.chunks[r],n),n+=this.chunks[r].length;return this.chunks=[],e}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),e=this.stack.pop();if(!e)throw new Error("invalid state, fork stack empty");return this.chunks=e.chunks,this.buf=e.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,e){return this.uint32((t<<3|e)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(Ks(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return Ho(t),za(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let e=this.textEncoder.encode(t);return this.uint32(e.byteLength),this.raw(e)}float(t){Rl(t);let e=new Uint8Array(4);return new DataView(e.buffer).setFloat32(0,t,!0),this.raw(e)}double(t){let e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,t,!0),this.raw(e)}fixed32(t){Ks(t);let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t,!0),this.raw(e)}sfixed32(t){Ho(t);let e=new Uint8Array(4);return new DataView(e.buffer).setInt32(0,t,!0),this.raw(e)}sint32(t){return Ho(t),t=(t<<1^t>>31)>>>0,za(t,this.buf),this}sfixed64(t){let e=new Uint8Array(8),n=new DataView(e.buffer),r=Xe.enc(t);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(e)}fixed64(t){let e=new Uint8Array(8),n=new DataView(e.buffer),r=Xe.uEnc(t);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(e)}int64(t){let e=Xe.enc(t);return Ds(e.lo,e.hi,this.buf),this}sint64(t){let e=Xe.enc(t),n=e.hi>>31,r=e.lo<<1^n,o=(e.hi<<1|e.lo>>>31)^n;return Ds(r,o,this.buf),this}uint64(t){let e=Xe.uEnc(t);return Ds(e.lo,e.hi,this.buf),this}}class uc{constructor(t,e){this.varint64=rc,this.uint32=sc,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=e??new TextDecoder}tag(){let t=this.uint32(),e=t>>>3,n=t&7;if(e<=0||n<0||n>5)throw new Error("illegal tag: field no "+e+" wire type "+n);return[e,n]}skip(t,e){let n=this.pos;switch(t){case ut.Varint:for(;this.buf[this.pos++]&128;);break;case ut.Bit64:this.pos+=4;case ut.Bit32:this.pos+=4;break;case ut.LengthDelimited:let r=this.uint32();this.pos+=r;break;case ut.StartGroup:for(;;){const[o,s]=this.tag();if(s===ut.EndGroup){if(e!==void 0&&o!==e)throw new Error("invalid end group tag");break}this.skip(s,o)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return Xe.dec(...this.varint64())}uint64(){return Xe.uDec(...this.varint64())}sint64(){let[t,e]=this.varint64(),n=-(t&1);return t=(t>>>1|(e&1)<<31)^n,e=e>>>1^n,Xe.dec(t,e)}bool(){let[t,e]=this.varint64();return t!==0||e!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Xe.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Xe.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),e=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(e,e+t)}string(){return this.textDecoder.decode(this.bytes())}}function cc(i,t,e,n){let r;return{typeName:t,extendee:e,get field(){if(!r){const o=typeof n=="function"?n():n;o.name=t.split(".").pop(),o.jsonName=`[${t}]`,r=i.util.newFieldList([o]).list()[0]}return r},runtime:i}}function Jl(i){const t=i.field.localName,e=Object.create(null);return e[t]=fc(i),[e,()=>e[t]]}function fc(i){const t=i.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return Hi(t.T,t.L);case"message":const e=t.T,n=new e;return e.fieldWrapper?e.fieldWrapper.unwrapField(n):n;case"map":throw"map fields are not allowed to be extensions"}}function hc(i,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let e=i.length-1;e>=0;--e)if(i[e].no==t.no)return[i[e]];return[]}return i.filter(e=>e.no===t.no)}let Vr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),xs=[];for(let i=0;i<Vr.length;i++)xs[Vr[i].charCodeAt(0)]=i;xs[45]=Vr.indexOf("+");xs[95]=Vr.indexOf("/");const Aa={dec(i){let t=i.length*3/4;i[i.length-2]=="="?t-=2:i[i.length-1]=="="&&(t-=1);let e=new Uint8Array(t),n=0,r=0,o,s=0;for(let u=0;u<i.length;u++){if(o=xs[i.charCodeAt(u)],o===void 0)switch(i[u]){case"=":r=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:s=o,r=1;break;case 1:e[n++]=s<<2|(o&48)>>4,s=o,r=2;break;case 2:e[n++]=(s&15)<<4|(o&60)>>2,s=o,r=3;break;case 3:e[n++]=(s&3)<<6|o,r=0;break}}if(r==1)throw Error("invalid base64 string.");return e.subarray(0,n)},enc(i){let t="",e=0,n,r=0;for(let o=0;o<i.length;o++)switch(n=i[o],e){case 0:t+=Vr[n>>2],r=(n&3)<<4,e=1;break;case 1:t+=Vr[r|n>>4],r=(n&15)<<2,e=2;break;case 2:t+=Vr[r|n>>6],t+=Vr[n&63],e=0;break}return e&&(t+=Vr[r],t+="=",e==1&&(t+="=")),t}};function dc(i,t,e){zl(t,i);const n=t.runtime.bin.makeReadOptions(e),r=hc(i.getType().runtime.bin.listUnknownFields(i),t.field),[o,s]=Jl(t);for(const u of r)t.runtime.bin.readField(o,n.readerFactory(u.data),t.field,u.wireType,n);return s()}function gc(i,t,e,n){zl(t,i);const r=t.runtime.bin.makeReadOptions(n),o=t.runtime.bin.makeWriteOptions(n);if($l(i,t)){const m=i.getType().runtime.bin.listUnknownFields(i).filter(y=>y.no!=t.field.no);i.getType().runtime.bin.discardUnknownFields(i);for(const y of m)i.getType().runtime.bin.onUnknownField(i,y.no,y.wireType,y.data)}const s=o.writerFactory();let u=t.field;!u.opt&&!u.repeated&&(u.kind=="enum"||u.kind=="scalar")&&(u=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(u,e,s,o);const c=r.readerFactory(s.finish());for(;c.pos<c.len;){const[m,y]=c.tag(),f=c.skip(y,m);i.getType().runtime.bin.onUnknownField(i,m,y,f)}}function $l(i,t){const e=i.getType();return t.extendee.typeName===e.typeName&&!!e.runtime.bin.listUnknownFields(i).find(n=>n.no==t.field.no)}function zl(i,t){it(i.extendee.typeName==t.getType().typeName,`extension ${i.typeName} can only be applied to message ${i.extendee.typeName}`)}function Vl(i,t){const e=i.localName;if(i.repeated)return t[e].length>0;if(i.oneof)return t[i.oneof.localName].case===e;switch(i.kind){case"enum":case"scalar":return i.opt||i.req?t[e]!==void 0:i.kind=="enum"?t[e]!==i.T.values[0].no:!Ul(i.T,t[e]);case"message":return t[e]!==void 0;case"map":return Object.keys(t[e]).length>0}}function Ka(i,t){const e=i.localName,n=!i.opt&&!i.req;if(i.repeated)t[e]=[];else if(i.oneof)t[i.oneof.localName]={case:void 0};else switch(i.kind){case"map":t[e]={};break;case"enum":t[e]=n?i.T.values[0].no:void 0;break;case"scalar":t[e]=n?Hi(i.T,i.L):void 0;break;case"message":t[e]=void 0;break}}function ki(i,t){if(i===null||typeof i!="object"||!Object.getOwnPropertyNames(me.prototype).every(n=>n in i&&typeof i[n]=="function"))return!1;const e=i.getType();return e===null||typeof e!="function"||!("typeName"in e)||typeof e.typeName!="string"?!1:t===void 0?!0:e.typeName==t.typeName}function Kl(i,t){return ki(t)||!i.fieldWrapper?t:i.fieldWrapper.wrapField(t)}le.DOUBLE,le.FLOAT,le.INT64,le.UINT64,le.INT32,le.UINT32,le.BOOL,le.STRING,le.BYTES;const Ha={ignoreUnknownFields:!1},Wa={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function pc(i){return i?Object.assign(Object.assign({},Ha),i):Ha}function mc(i){return i?Object.assign(Object.assign({},Wa),i):Wa}const ts=Symbol(),Go=Symbol();function yc(){return{makeReadOptions:pc,makeWriteOptions:mc,readMessage(i,t,e,n){if(t==null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message ${i.typeName} from JSON: ${Nn(t)}`);n=n??new i;const r=new Map,o=e.typeRegistry;for(const[s,u]of Object.entries(t)){const c=i.fields.findJsonName(s);if(c){if(c.oneof){if(u===null&&c.kind=="scalar")continue;const m=r.get(c.oneof);if(m!==void 0)throw new Error(`cannot decode message ${i.typeName} from JSON: multiple keys for oneof "${c.oneof.name}" present: "${m}", "${s}"`);r.set(c.oneof,s)}Ga(n,u,c,e,i)}else{let m=!1;if(o!=null&&o.findExtension&&s.startsWith("[")&&s.endsWith("]")){const y=o.findExtension(s.substring(1,s.length-1));if(y&&y.extendee.typeName==i.typeName){m=!0;const[f,l]=Jl(y);Ga(f,u,y.field,e,y),gc(n,y,l(),e)}}if(!m&&!e.ignoreUnknownFields)throw new Error(`cannot decode message ${i.typeName} from JSON: key "${s}" is unknown`)}}return n},writeMessage(i,t){const e=i.getType(),n={};let r;try{for(r of e.fields.byNumber()){if(!Vl(r,i)){if(r.req)throw"required field not set";if(!t.emitDefaultValues||!bc(r))continue}const s=r.oneof?i[r.oneof.localName].value:i[r.localName],u=Ya(r,s,t);u!==void 0&&(n[t.useProtoFieldName?r.name:r.jsonName]=u)}const o=t.typeRegistry;if(o!=null&&o.findExtensionFor)for(const s of e.runtime.bin.listUnknownFields(i)){const u=o.findExtensionFor(e.typeName,s.no);if(u&&$l(i,u)){const c=dc(i,u,t),m=Ya(u.field,c,t);m!==void 0&&(n[u.field.jsonName]=m)}}}catch(o){const s=r?`cannot encode field ${e.typeName}.${r.name} to JSON`:`cannot encode message ${e.typeName} to JSON`,u=o instanceof Error?o.message:String(o);throw new Error(s+(u.length>0?`: ${u}`:""))}return n},readScalar(i,t,e){return uo(i,t,e??gi.BIGINT,!0)},writeScalar(i,t,e){if(t!==void 0&&(e||Ul(i,t)))return Yo(i,t)},debug:Nn}}function Nn(i){if(i===null)return"null";switch(typeof i){case"object":return Array.isArray(i)?"array":"object";case"string":return i.length>100?"string":`"${i.split('"').join('\\"')}"`;default:return String(i)}}function Ga(i,t,e,n,r){let o=e.localName;if(e.repeated){if(it(e.kind!="map"),t===null)return;if(!Array.isArray(t))throw new Error(`cannot decode field ${r.typeName}.${e.name} from JSON: ${Nn(t)}`);const s=i[o];for(const u of t){if(u===null)throw new Error(`cannot decode field ${r.typeName}.${e.name} from JSON: ${Nn(u)}`);switch(e.kind){case"message":s.push(e.T.fromJson(u,n));break;case"enum":const c=Bs(e.T,u,n.ignoreUnknownFields,!0);c!==Go&&s.push(c);break;case"scalar":try{s.push(uo(e.T,u,e.L,!0))}catch(m){let y=`cannot decode field ${r.typeName}.${e.name} from JSON: ${Nn(u)}`;throw m instanceof Error&&m.message.length>0&&(y+=`: ${m.message}`),new Error(y)}break}}}else if(e.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error(`cannot decode field ${r.typeName}.${e.name} from JSON: ${Nn(t)}`);const s=i[o];for(const[u,c]of Object.entries(t)){if(c===null)throw new Error(`cannot decode field ${r.typeName}.${e.name} from JSON: map value null`);let m;try{m=vc(e.K,u)}catch(y){let f=`cannot decode map key for field ${r.typeName}.${e.name} from JSON: ${Nn(t)}`;throw y instanceof Error&&y.message.length>0&&(f+=`: ${y.message}`),new Error(f)}switch(e.V.kind){case"message":s[m]=e.V.T.fromJson(c,n);break;case"enum":const y=Bs(e.V.T,c,n.ignoreUnknownFields,!0);y!==Go&&(s[m]=y);break;case"scalar":try{s[m]=uo(e.V.T,c,gi.BIGINT,!0)}catch(f){let l=`cannot decode map value for field ${r.typeName}.${e.name} from JSON: ${Nn(t)}`;throw f instanceof Error&&f.message.length>0&&(l+=`: ${f.message}`),new Error(l)}break}}}else switch(e.oneof&&(i=i[e.oneof.localName]={case:o},o="value"),e.kind){case"message":const s=e.T;if(t===null&&s.typeName!="google.protobuf.Value")return;let u=i[o];ki(u)?u.fromJson(t,n):(i[o]=u=s.fromJson(t,n),s.fieldWrapper&&!e.oneof&&(i[o]=s.fieldWrapper.unwrapField(u)));break;case"enum":const c=Bs(e.T,t,n.ignoreUnknownFields,!1);switch(c){case ts:Ka(e,i);break;case Go:break;default:i[o]=c;break}break;case"scalar":try{const m=uo(e.T,t,e.L,!1);switch(m){case ts:Ka(e,i);break;default:i[o]=m;break}}catch(m){let y=`cannot decode field ${r.typeName}.${e.name} from JSON: ${Nn(t)}`;throw m instanceof Error&&m.message.length>0&&(y+=`: ${m.message}`),new Error(y)}break}}function vc(i,t){if(i===le.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1;break}return uo(i,t,gi.BIGINT,!0).toString()}function uo(i,t,e,n){if(t===null)return n?Hi(i,e):ts;switch(i){case le.DOUBLE:case le.FLOAT:if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const r=Number(t);if(Number.isNaN(r)||!Number.isFinite(r))break;return i==le.FLOAT&&Rl(r),r;case le.INT32:case le.FIXED32:case le.SFIXED32:case le.SINT32:case le.UINT32:let o;if(typeof t=="number"?o=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(o=Number(t)),o===void 0)break;return i==le.UINT32||i==le.FIXED32?Ks(o):Ho(o),o;case le.INT64:case le.SFIXED64:case le.SINT64:if(typeof t!="number"&&typeof t!="string")break;const s=Xe.parse(t);return e?s.toString():s;case le.FIXED64:case le.UINT64:if(typeof t!="number"&&typeof t!="string")break;const u=Xe.uParse(t);return e?u.toString():u;case le.BOOL:if(typeof t!="boolean")break;return t;case le.STRING:if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case le.BYTES:if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return Aa.dec(t)}throw new Error}function Bs(i,t,e,n){if(t===null)return i.typeName=="google.protobuf.NullValue"?0:n?i.values[0].no:ts;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const r=i.findName(t);if(r!==void 0)return r.no;if(e)return Go;break}throw new Error(`cannot decode enum ${i.typeName} from JSON: ${Nn(t)}`)}function bc(i){return i.repeated||i.kind=="map"?!0:!(i.oneof||i.kind=="message"||i.opt||i.req)}function Ya(i,t,e){if(i.kind=="map"){it(typeof t=="object"&&t!=null);const n={},r=Object.entries(t);switch(i.V.kind){case"scalar":for(const[s,u]of r)n[s.toString()]=Yo(i.V.T,u);break;case"message":for(const[s,u]of r)n[s.toString()]=u.toJson(e);break;case"enum":const o=i.V.T;for(const[s,u]of r)n[s.toString()]=Ms(o,u,e.enumAsInteger);break}return e.emitDefaultValues||r.length>0?n:void 0}if(i.repeated){it(Array.isArray(t));const n=[];switch(i.kind){case"scalar":for(let r=0;r<t.length;r++)n.push(Yo(i.T,t[r]));break;case"enum":for(let r=0;r<t.length;r++)n.push(Ms(i.T,t[r],e.enumAsInteger));break;case"message":for(let r=0;r<t.length;r++)n.push(t[r].toJson(e));break}return e.emitDefaultValues||n.length>0?n:void 0}switch(i.kind){case"scalar":return Yo(i.T,t);case"enum":return Ms(i.T,t,e.enumAsInteger);case"message":return Kl(i.T,t).toJson(e)}}function Ms(i,t,e){var n;if(it(typeof t=="number"),i.typeName=="google.protobuf.NullValue")return null;if(e)return t;const r=i.findNumber(t);return(n=r==null?void 0:r.name)!==null&&n!==void 0?n:t}function Yo(i,t){switch(i){case le.INT32:case le.SFIXED32:case le.SINT32:case le.FIXED32:case le.UINT32:return it(typeof t=="number"),t;case le.FLOAT:case le.DOUBLE:return it(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case le.STRING:return it(typeof t=="string"),t;case le.BOOL:return it(typeof t=="boolean"),t;case le.UINT64:case le.FIXED64:case le.INT64:case le.SFIXED64:case le.SINT64:return it(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),t.toString();case le.BYTES:return it(t instanceof Uint8Array),Aa.enc(t)}}const Bi=Symbol("@bufbuild/protobuf/unknown-fields"),Za={readUnknownFields:!0,readerFactory:i=>new uc(i)},Xa={writeUnknownFields:!0,writerFactory:()=>new lc};function wc(i){return i?Object.assign(Object.assign({},Za),i):Za}function Ac(i){return i?Object.assign(Object.assign({},Xa),i):Xa}function Tc(){return{makeReadOptions:wc,makeWriteOptions:Ac,listUnknownFields(i){var t;return(t=i[Bi])!==null&&t!==void 0?t:[]},discardUnknownFields(i){delete i[Bi]},writeUnknownFields(i,t){const n=i[Bi];if(n)for(const r of n)t.tag(r.no,r.wireType).raw(r.data)},onUnknownField(i,t,e,n){const r=i;Array.isArray(r[Bi])||(r[Bi]=[]),r[Bi].push({no:t,wireType:e,data:n})},readMessage(i,t,e,n,r){const o=i.getType(),s=r?t.len:t.pos+e;let u,c;for(;t.pos<s&&([u,c]=t.tag(),!(r===!0&&c==ut.EndGroup));){const m=o.fields.find(u);if(!m){const y=t.skip(c,u);n.readUnknownFields&&this.onUnknownField(i,u,c,y);continue}Qa(i,t,m,c,n)}if(r&&(c!=ut.EndGroup||u!==e))throw new Error("invalid end group tag")},readField:Qa,writeMessage(i,t,e){const n=i.getType();for(const r of n.fields.byNumber()){if(!Vl(r,i)){if(r.req)throw new Error(`cannot encode field ${n.typeName}.${r.name} to binary: required field not set`);continue}const o=r.oneof?i[r.oneof.localName].value:i[r.localName];el(r,o,t,e)}return e.writeUnknownFields&&this.writeUnknownFields(i,t),t},writeField(i,t,e,n){t!==void 0&&el(i,t,e,n)}}}function Qa(i,t,e,n,r){let{repeated:o,localName:s}=e;switch(e.oneof&&(i=i[e.oneof.localName],i.case!=s&&delete i.value,i.case=s,s="value"),e.kind){case"scalar":case"enum":const u=e.kind=="enum"?le.INT32:e.T;let c=ns;if(e.kind=="scalar"&&e.L>0&&(c=Ec),o){let l=i[s];if(n==ut.LengthDelimited&&u!=le.STRING&&u!=le.BYTES){let p=t.uint32()+t.pos;for(;t.pos<p;)l.push(c(t,u))}else l.push(c(t,u))}else i[s]=c(t,u);break;case"message":const m=e.T;o?i[s].push(Zo(t,new m,r,e)):ki(i[s])?Zo(t,i[s],r,e):(i[s]=Zo(t,new m,r,e),m.fieldWrapper&&!e.oneof&&!e.repeated&&(i[s]=m.fieldWrapper.unwrapField(i[s])));break;case"map":let[y,f]=Sc(e,t,r);i[s][y]=f;break}}function Zo(i,t,e,n){const r=t.getType().runtime.bin,o=n==null?void 0:n.delimited;return r.readMessage(t,i,o?n.no:i.uint32(),e,o),t}function Sc(i,t,e){const n=t.uint32(),r=t.pos+n;let o,s;for(;t.pos<r;){const[u]=t.tag();switch(u){case 1:o=ns(t,i.K);break;case 2:switch(i.V.kind){case"scalar":s=ns(t,i.V.T);break;case"enum":s=t.int32();break;case"message":s=Zo(t,new i.V.T,e,void 0);break}break}}if(o===void 0&&(o=Hi(i.K,gi.BIGINT)),typeof o!="string"&&typeof o!="number"&&(o=o.toString()),s===void 0)switch(i.V.kind){case"scalar":s=Hi(i.V.T,gi.BIGINT);break;case"enum":s=i.V.T.values[0].no;break;case"message":s=new i.V.T;break}return[o,s]}function Ec(i,t){const e=ns(i,t);return typeof e=="bigint"?e.toString():e}function ns(i,t){switch(t){case le.STRING:return i.string();case le.BOOL:return i.bool();case le.DOUBLE:return i.double();case le.FLOAT:return i.float();case le.INT32:return i.int32();case le.INT64:return i.int64();case le.UINT64:return i.uint64();case le.FIXED64:return i.fixed64();case le.BYTES:return i.bytes();case le.FIXED32:return i.fixed32();case le.SFIXED32:return i.sfixed32();case le.SFIXED64:return i.sfixed64();case le.SINT64:return i.sint64();case le.UINT32:return i.uint32();case le.SINT32:return i.sint32()}}function el(i,t,e,n){it(t!==void 0);const r=i.repeated;switch(i.kind){case"scalar":case"enum":let o=i.kind=="enum"?le.INT32:i.T;if(r)if(it(Array.isArray(t)),i.packed)kc(e,o,i.no,t);else for(const s of t)co(e,o,i.no,s);else co(e,o,i.no,t);break;case"message":if(r){it(Array.isArray(t));for(const s of t)tl(e,n,i,s)}else tl(e,n,i,t);break;case"map":it(typeof t=="object"&&t!=null);for(const[s,u]of Object.entries(t))xc(e,n,i,s,u);break}}function xc(i,t,e,n,r){i.tag(e.no,ut.LengthDelimited),i.fork();let o=n;switch(e.K){case le.INT32:case le.FIXED32:case le.UINT32:case le.SFIXED32:case le.SINT32:o=Number.parseInt(n);break;case le.BOOL:it(n=="true"||n=="false"),o=n=="true";break}switch(co(i,e.K,1,o),e.V.kind){case"scalar":co(i,e.V.T,2,r);break;case"enum":co(i,le.INT32,2,r);break;case"message":it(r!==void 0),i.tag(2,ut.LengthDelimited).bytes(r.toBinary(t));break}i.join()}function tl(i,t,e,n){const r=Kl(e.T,n);e.delimited?i.tag(e.no,ut.StartGroup).raw(r.toBinary(t)).tag(e.no,ut.EndGroup):i.tag(e.no,ut.LengthDelimited).bytes(r.toBinary(t))}function co(i,t,e,n){it(n!==void 0);let[r,o]=Hl(t);i.tag(e,r)[o](n)}function kc(i,t,e,n){if(!n.length)return;i.tag(e,ut.LengthDelimited).fork();let[,r]=Hl(t);for(let o=0;o<n.length;o++)i[r](n[o]);i.join()}function Hl(i){let t=ut.Varint;switch(i){case le.BYTES:case le.STRING:t=ut.LengthDelimited;break;case le.DOUBLE:case le.FIXED64:case le.SFIXED64:t=ut.Bit64;break;case le.FIXED32:case le.SFIXED32:case le.FLOAT:t=ut.Bit32;break}const e=le[i].toLowerCase();return[t,e]}function Oc(){return{setEnumType:Bl,initPartial(i,t){if(i===void 0)return;const e=t.getType();for(const n of e.fields.byMember()){const r=n.localName,o=t,s=i;if(s[r]!=null)switch(n.kind){case"oneof":const u=s[r].case;if(u===void 0)continue;const c=n.findField(u);let m=s[r].value;c&&c.kind=="message"&&!ki(m,c.T)?m=new c.T(m):c&&c.kind==="scalar"&&c.T===le.BYTES&&(m=oo(m)),o[r]={case:u,value:m};break;case"scalar":case"enum":let y=s[r];n.T===le.BYTES&&(y=n.repeated?y.map(oo):oo(y)),o[r]=y;break;case"map":switch(n.V.kind){case"scalar":case"enum":if(n.V.T===le.BYTES)for(const[a,p]of Object.entries(s[r]))o[r][a]=oo(p);else Object.assign(o[r],s[r]);break;case"message":const l=n.V.T;for(const a of Object.keys(s[r])){let p=s[r][a];l.fieldWrapper||(p=new l(p)),o[r][a]=p}break}break;case"message":const f=n.T;if(n.repeated)o[r]=s[r].map(l=>ki(l,f)?l:new f(l));else{const l=s[r];f.fieldWrapper?f.typeName==="google.protobuf.BytesValue"?o[r]=oo(l):o[r]=l:o[r]=ki(l,f)?l:new f(l)}break}}},equals(i,t,e){return t===e?!0:!t||!e?!1:i.fields.byMember().every(n=>{const r=t[n.localName],o=e[n.localName];if(n.repeated){if(r.length!==o.length)return!1;switch(n.kind){case"message":return r.every((s,u)=>n.T.equals(s,o[u]));case"scalar":return r.every((s,u)=>ii(n.T,s,o[u]));case"enum":return r.every((s,u)=>ii(le.INT32,s,o[u]))}throw new Error(`repeated cannot contain ${n.kind}`)}switch(n.kind){case"message":return n.T.equals(r,o);case"enum":return ii(le.INT32,r,o);case"scalar":return ii(n.T,r,o);case"oneof":if(r.case!==o.case)return!1;const s=n.findField(r.case);if(s===void 0)return!0;switch(s.kind){case"message":return s.T.equals(r.value,o.value);case"enum":return ii(le.INT32,r.value,o.value);case"scalar":return ii(s.T,r.value,o.value)}throw new Error(`oneof cannot contain ${s.kind}`);case"map":const u=Object.keys(r).concat(Object.keys(o));switch(n.V.kind){case"message":const c=n.V.T;return u.every(y=>c.equals(r[y],o[y]));case"enum":return u.every(y=>ii(le.INT32,r[y],o[y]));case"scalar":const m=n.V.T;return u.every(y=>ii(m,r[y],o[y]))}break}})},clone(i){const t=i.getType(),e=new t,n=e;for(const r of t.fields.byMember()){const o=i[r.localName];let s;if(r.repeated)s=o.map(jo);else if(r.kind=="map"){s=n[r.localName];for(const[u,c]of Object.entries(o))s[u]=jo(c)}else r.kind=="oneof"?s=r.findField(o.case)?{case:o.case,value:jo(o.value)}:{case:void 0}:s=jo(o);n[r.localName]=s}for(const r of t.runtime.bin.listUnknownFields(i))t.runtime.bin.onUnknownField(n,r.no,r.wireType,r.data);return e}}}function jo(i){if(i===void 0)return i;if(ki(i))return i.clone();if(i instanceof Uint8Array){const t=new Uint8Array(i.byteLength);return t.set(i),t}return i}function oo(i){return i instanceof Uint8Array?i:new Uint8Array(i)}function Ic(i,t,e){return{syntax:i,json:yc(),bin:Tc(),util:Object.assign(Object.assign({},Oc()),{newFieldList:t,initFields:e}),makeMessageType(n,r,o){return nc(this,n,r,o)},makeEnum:tc,makeEnumType:Ml,getEnumType:ec,makeExtension(n,r,o){return cc(this,n,r,o)}}}class Nc{constructor(t,e){this._fields=t,this._normalizer=e}findJsonName(t){if(!this.jsonNames){const e={};for(const n of this.list())e[n.jsonName]=e[n.name]=n;this.jsonNames=e}return this.jsonNames[t]}find(t){if(!this.numbers){const e={};for(const n of this.list())e[n.no]=n;this.numbers=e}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,e)=>t.no-e.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let e;for(const n of this.list())n.oneof?n.oneof!==e&&(e=n.oneof,t.push(e)):t.push(n)}return this.members}}function Wl(i,t){const e=Gl(i);return t?e:Dc(Rc(e))}function _c(i){return Wl(i,!1)}const Pc=Gl;function Gl(i){let t=!1;const e=[];for(let n=0;n<i.length;n++){let r=i.charAt(n);switch(r){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.push(r),t=!1;break;default:t&&(t=!1,r=r.toUpperCase()),e.push(r);break}}return e.join("")}const Cc=new Set(["constructor","toString","toJSON","valueOf"]),Lc=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Yl=i=>`${i}$`,Rc=i=>Lc.has(i)?Yl(i):i,Dc=i=>Cc.has(i)?Yl(i):i;class Bc{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=_c(t)}addField(t){it(t.oneof===this,`field ${t.name} not one of ${this.name}`),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[t]}}function Mc(i,t){var e,n,r,o,s,u;const c=[];let m;for(const y of typeof i=="function"?i():i){const f=y;if(f.localName=Wl(y.name,y.oneof!==void 0),f.jsonName=(e=y.jsonName)!==null&&e!==void 0?e:Pc(y.name),f.repeated=(n=y.repeated)!==null&&n!==void 0?n:!1,y.kind=="scalar"&&(f.L=(r=y.L)!==null&&r!==void 0?r:gi.BIGINT),f.delimited=(o=y.delimited)!==null&&o!==void 0?o:!1,f.req=(s=y.req)!==null&&s!==void 0?s:!1,f.opt=(u=y.opt)!==null&&u!==void 0?u:!1,y.packed===void 0&&(f.packed=y.kind=="enum"||y.kind=="scalar"&&y.T!=le.BYTES&&y.T!=le.STRING),y.oneof!==void 0){const l=typeof y.oneof=="string"?y.oneof:y.oneof.name;(!m||m.name!=l)&&(m=new Bc(l)),f.oneof=m,m.addField(f)}c.push(f)}return c}const L=Ic("proto3",i=>new Nc(i,t=>Mc(t)),i=>{for(const t of i.getType().fields.byMember()){if(t.opt)continue;const e=t.localName,n=i;if(t.repeated){n[e]=[];continue}switch(t.kind){case"oneof":n[e]={case:void 0};break;case"enum":n[e]=0;break;case"map":n[e]={};break;case"scalar":n[e]=Hi(t.T,t.L);break}}});var bt;(function(i){i[i.Unary=0]="Unary",i[i.ServerStreaming=1]="ServerStreaming",i[i.ClientStreaming=2]="ClientStreaming",i[i.BiDiStreaming=3]="BiDiStreaming"})(bt||(bt={}));var nl;(function(i){i[i.NoSideEffects=1]="NoSideEffects",i[i.Idempotent=2]="Idempotent"})(nl||(nl={}));class mt extends me{constructor(t){super(),this.seconds=Xe.zero,this.nanos=0,L.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${L.json.debug(t)}`);const n=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const r=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(r))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Xe.parse(r/1e3),this.nanos=0,n[7]&&(this.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9),this}toJson(t){const e=Number(this.seconds)*1e3;if(e<Date.parse("0001-01-01T00:00:00Z")||e>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let n="Z";if(this.nanos>0){const r=(this.nanos+1e9).toString().substring(1);r.substring(3)==="000000"?n="."+r.substring(0,3)+"Z":r.substring(6)==="000"?n="."+r.substring(0,6)+"Z":n="."+r+"Z"}return new Date(e).toISOString().replace(".000Z",n)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return mt.fromDate(new Date)}static fromDate(t){const e=t.getTime();return new mt({seconds:Xe.parse(Math.floor(e/1e3)),nanos:e%1e3*1e6})}static fromBinary(t,e){return new mt().fromBinary(t,e)}static fromJson(t,e){return new mt().fromJson(t,e)}static fromJsonString(t,e){return new mt().fromJsonString(t,e)}static equals(t,e){return L.util.equals(mt,t,e)}}mt.runtime=L;mt.typeName="google.protobuf.Timestamp";mt.fields=L.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Kr extends me{constructor(t){super(),this.seconds=Xe.zero,this.nanos=0,L.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${L.json.debug(t)}`);const n=t.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(n===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${L.json.debug(t)}`);const r=Number(n[1]);if(r>315576e6||r<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${L.json.debug(t)}`);if(this.seconds=Xe.parse(r),typeof n[2]=="string"){const o=n[2]+"0".repeat(9-n[2].length);this.nanos=parseInt(o),(r<0||Object.is(r,-0))&&(this.nanos=-this.nanos)}return this}toJson(t){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let e=this.seconds.toString();if(this.nanos!==0){let n=Math.abs(this.nanos).toString();n="0".repeat(9-n.length)+n,n.substring(3)==="000000"?n=n.substring(0,3):n.substring(6)==="000"&&(n=n.substring(0,6)),e+="."+n,this.nanos<0&&Number(this.seconds)==0&&(e="-"+e)}return e+"s"}static fromBinary(t,e){return new Kr().fromBinary(t,e)}static fromJson(t,e){return new Kr().fromJson(t,e)}static fromJsonString(t,e){return new Kr().fromJsonString(t,e)}static equals(t,e){return L.util.equals(Kr,t,e)}}Kr.runtime=L;Kr.typeName="google.protobuf.Duration";Kr.fields=L.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class _n extends me{constructor(t){super(),this.typeUrl="",this.value=new Uint8Array(0),L.util.initPartial(t,this)}toJson(t){var e;if(this.typeUrl==="")return{};const n=this.typeUrlToName(this.typeUrl),r=(e=t==null?void 0:t.typeRegistry)===null||e===void 0?void 0:e.findMessage(n);if(!r)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let s=r.fromBinary(this.value).toJson(t);return(n.startsWith("google.protobuf.")||s===null||Array.isArray(s)||typeof s!="object")&&(s={value:s}),s["@type"]=this.typeUrl,s}fromJson(t,e){var n;if(t===null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${t===null?"null":Array.isArray(t)?"array":typeof t}`);if(Object.keys(t).length==0)return this;const r=t["@type"];if(typeof r!="string"||r=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const o=this.typeUrlToName(r),s=(n=e==null?void 0:e.typeRegistry)===null||n===void 0?void 0:n.findMessage(o);if(!s)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${r} is not in the type registry`);let u;if(o.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(t,"value"))u=s.fromJson(t.value,e);else{const c=Object.assign({},t);delete c["@type"],u=s.fromJson(c,e)}return this.packFrom(u),this}packFrom(t){this.value=t.toBinary(),this.typeUrl=this.typeNameToUrl(t.getType().typeName)}unpackTo(t){return this.is(t.getType())?(t.fromBinary(this.value),!0):!1}unpack(t){if(this.typeUrl==="")return;const e=t.findMessage(this.typeUrlToName(this.typeUrl));if(e)return e.fromBinary(this.value)}is(t){if(this.typeUrl==="")return!1;const e=this.typeUrlToName(this.typeUrl);let n="";return typeof t=="string"?n=t:n=t.typeName,e===n}typeNameToUrl(t){return`type.googleapis.com/${t}`}typeUrlToName(t){if(!t.length)throw new Error(`invalid type url: ${t}`);const e=t.lastIndexOf("/"),n=e>=0?t.substring(e+1):t;if(!n.length)throw new Error(`invalid type url: ${t}`);return n}static pack(t){const e=new _n;return e.packFrom(t),e}static fromBinary(t,e){return new _n().fromBinary(t,e)}static fromJson(t,e){return new _n().fromJson(t,e)}static fromJsonString(t,e){return new _n().fromJsonString(t,e)}static equals(t,e){return L.util.equals(_n,t,e)}}_n.runtime=L;_n.typeName="google.protobuf.Any";_n.fields=L.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class Pn extends me{constructor(t){super(),this.value=0,L.util.initPartial(t,this)}toJson(t){return L.json.writeScalar(le.DOUBLE,this.value,!0)}fromJson(t,e){try{this.value=L.json.readScalar(le.DOUBLE,t)}catch(n){let r='cannot decode message google.protobuf.DoubleValue from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(t,e){return new Pn().fromBinary(t,e)}static fromJson(t,e){return new Pn().fromJson(t,e)}static fromJsonString(t,e){return new Pn().fromJsonString(t,e)}static equals(t,e){return L.util.equals(Pn,t,e)}}Pn.runtime=L;Pn.typeName="google.protobuf.DoubleValue";Pn.fields=L.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);Pn.fieldWrapper={wrapField(i){return new Pn({value:i})},unwrapField(i){return i.value}};class Cn extends me{constructor(t){super(),this.value=0,L.util.initPartial(t,this)}toJson(t){return L.json.writeScalar(le.FLOAT,this.value,!0)}fromJson(t,e){try{this.value=L.json.readScalar(le.FLOAT,t)}catch(n){let r='cannot decode message google.protobuf.FloatValue from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(t,e){return new Cn().fromBinary(t,e)}static fromJson(t,e){return new Cn().fromJson(t,e)}static fromJsonString(t,e){return new Cn().fromJsonString(t,e)}static equals(t,e){return L.util.equals(Cn,t,e)}}Cn.runtime=L;Cn.typeName="google.protobuf.FloatValue";Cn.fields=L.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);Cn.fieldWrapper={wrapField(i){return new Cn({value:i})},unwrapField(i){return i.value}};class Ln extends me{constructor(t){super(),this.value=Xe.zero,L.util.initPartial(t,this)}toJson(t){return L.json.writeScalar(le.INT64,this.value,!0)}fromJson(t,e){try{this.value=L.json.readScalar(le.INT64,t)}catch(n){let r='cannot decode message google.protobuf.Int64Value from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(t,e){return new Ln().fromBinary(t,e)}static fromJson(t,e){return new Ln().fromJson(t,e)}static fromJsonString(t,e){return new Ln().fromJsonString(t,e)}static equals(t,e){return L.util.equals(Ln,t,e)}}Ln.runtime=L;Ln.typeName="google.protobuf.Int64Value";Ln.fields=L.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);Ln.fieldWrapper={wrapField(i){return new Ln({value:i})},unwrapField(i){return i.value}};class Rn extends me{constructor(t){super(),this.value=Xe.zero,L.util.initPartial(t,this)}toJson(t){return L.json.writeScalar(le.UINT64,this.value,!0)}fromJson(t,e){try{this.value=L.json.readScalar(le.UINT64,t)}catch(n){let r='cannot decode message google.protobuf.UInt64Value from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(t,e){return new Rn().fromBinary(t,e)}static fromJson(t,e){return new Rn().fromJson(t,e)}static fromJsonString(t,e){return new Rn().fromJsonString(t,e)}static equals(t,e){return L.util.equals(Rn,t,e)}}Rn.runtime=L;Rn.typeName="google.protobuf.UInt64Value";Rn.fields=L.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);Rn.fieldWrapper={wrapField(i){return new Rn({value:i})},unwrapField(i){return i.value}};class Dn extends me{constructor(t){super(),this.value=0,L.util.initPartial(t,this)}toJson(t){return L.json.writeScalar(le.INT32,this.value,!0)}fromJson(t,e){try{this.value=L.json.readScalar(le.INT32,t)}catch(n){let r='cannot decode message google.protobuf.Int32Value from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(t,e){return new Dn().fromBinary(t,e)}static fromJson(t,e){return new Dn().fromJson(t,e)}static fromJsonString(t,e){return new Dn().fromJsonString(t,e)}static equals(t,e){return L.util.equals(Dn,t,e)}}Dn.runtime=L;Dn.typeName="google.protobuf.Int32Value";Dn.fields=L.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);Dn.fieldWrapper={wrapField(i){return new Dn({value:i})},unwrapField(i){return i.value}};class Bn extends me{constructor(t){super(),this.value=0,L.util.initPartial(t,this)}toJson(t){return L.json.writeScalar(le.UINT32,this.value,!0)}fromJson(t,e){try{this.value=L.json.readScalar(le.UINT32,t)}catch(n){let r='cannot decode message google.protobuf.UInt32Value from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(t,e){return new Bn().fromBinary(t,e)}static fromJson(t,e){return new Bn().fromJson(t,e)}static fromJsonString(t,e){return new Bn().fromJsonString(t,e)}static equals(t,e){return L.util.equals(Bn,t,e)}}Bn.runtime=L;Bn.typeName="google.protobuf.UInt32Value";Bn.fields=L.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);Bn.fieldWrapper={wrapField(i){return new Bn({value:i})},unwrapField(i){return i.value}};class Mn extends me{constructor(t){super(),this.value=!1,L.util.initPartial(t,this)}toJson(t){return L.json.writeScalar(le.BOOL,this.value,!0)}fromJson(t,e){try{this.value=L.json.readScalar(le.BOOL,t)}catch(n){let r='cannot decode message google.protobuf.BoolValue from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(t,e){return new Mn().fromBinary(t,e)}static fromJson(t,e){return new Mn().fromJson(t,e)}static fromJsonString(t,e){return new Mn().fromJsonString(t,e)}static equals(t,e){return L.util.equals(Mn,t,e)}}Mn.runtime=L;Mn.typeName="google.protobuf.BoolValue";Mn.fields=L.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);Mn.fieldWrapper={wrapField(i){return new Mn({value:i})},unwrapField(i){return i.value}};class Pt extends me{constructor(t){super(),this.value="",L.util.initPartial(t,this)}toJson(t){return L.json.writeScalar(le.STRING,this.value,!0)}fromJson(t,e){try{this.value=L.json.readScalar(le.STRING,t)}catch(n){let r='cannot decode message google.protobuf.StringValue from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(t,e){return new Pt().fromBinary(t,e)}static fromJson(t,e){return new Pt().fromJson(t,e)}static fromJsonString(t,e){return new Pt().fromJsonString(t,e)}static equals(t,e){return L.util.equals(Pt,t,e)}}Pt.runtime=L;Pt.typeName="google.protobuf.StringValue";Pt.fields=L.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);Pt.fieldWrapper={wrapField(i){return new Pt({value:i})},unwrapField(i){return i.value}};class qn extends me{constructor(t){super(),this.value=new Uint8Array(0),L.util.initPartial(t,this)}toJson(t){return L.json.writeScalar(le.BYTES,this.value,!0)}fromJson(t,e){try{this.value=L.json.readScalar(le.BYTES,t)}catch(n){let r='cannot decode message google.protobuf.BytesValue from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(t,e){return new qn().fromBinary(t,e)}static fromJson(t,e){return new qn().fromJson(t,e)}static fromJsonString(t,e){return new qn().fromJsonString(t,e)}static equals(t,e){return L.util.equals(qn,t,e)}}qn.runtime=L;qn.typeName="google.protobuf.BytesValue";qn.fields=L.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);qn.fieldWrapper={wrapField(i){return new qn({value:i})},unwrapField(i){return i.value}};function qc(i,t,e){try{const n=Aa.dec(i);return t?t.fromBinary(n,e):n}catch(n){throw Ze.from(n,Ge.DataLoss)}}function Fc(i,t){const e={};for(const[n,r]of Object.entries(i.methods)){const o=t(Object.assign(Object.assign({},r),{localName:n,service:i}));o!=null&&(e[n]=o)}return e}function rl(i){let t,e=new Uint8Array(0);function n(r){const o=new Uint8Array(e.length+r.length);o.set(e),o.set(r,e.length),e=o}return new ReadableStream({start(){t=i.getReader()},async pull(r){let o;for(;;){if(o===void 0&&e.byteLength>=5){let c=0;for(let m=1;m<5;m++)c=(c<<8)+e[m];o={flags:e[0],length:c}}if(o!==void 0&&e.byteLength>=o.length+5)break;const u=await t.read();if(u.done)break;n(u.value)}if(o===void 0){if(e.byteLength==0){r.close();return}r.error(new Ze("premature end of stream",Ge.DataLoss));return}const s=e.subarray(5,5+o.length);e=e.subarray(5+o.length),r.enqueue({flags:o.flags,data:s})}})}function il(i,t){const e=new Uint8Array(t.length+5);e.set(t,5);const n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setUint8(0,i),n.setUint32(1,t.length),e}var jc=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i[Symbol.asyncIterator],e;return t?t.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=i[o]&&function(s){return new Promise(function(u,c){s=i[o](s),r(u,c,s.done,s.value)})}}function r(o,s,u,c){Promise.resolve(c).then(function(m){o({value:m,done:u})},s)}},po=function(i){return this instanceof po?(this.v=i,this):new po(i)},Uc=function(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(i,t||[]),r,o=[];return r={},u("next"),u("throw"),u("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(a){return function(p){return Promise.resolve(p).then(a,f)}}function u(a,p){n[a]&&(r[a]=function(b){return new Promise(function(w,v){o.push([a,b,w,v])>1||c(a,b)})},p&&(r[a]=p(r[a])))}function c(a,p){try{m(n[a](p))}catch(b){l(o[0][3],b)}}function m(a){a.value instanceof po?Promise.resolve(a.value.v).then(y,f):l(o[0][2],a)}function y(a){c("next",a)}function f(a){c("throw",a)}function l(a,p){a(p),o.shift(),o.length&&c(o[0][0],o[0][1])}},Jc=function(i){var t,e;return t={},n("next"),n("throw",function(r){throw r}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(r,o){t[r]=i[r]?function(s){return(e=!e)?{value:po(i[r](s)),done:!1}:o?o(s):s}:o}};function $c(i){return Uc(this,arguments,function*(){yield po(yield*Jc(jc(i)))})}var Zl=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i[Symbol.asyncIterator],e;return t?t.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=i[o]&&function(s){return new Promise(function(u,c){s=i[o](s),r(u,c,s.done,s.value)})}}function r(o,s,u,c){Promise.resolve(c).then(function(m){o({value:m,done:u})},s)}},Wi=function(i){return this instanceof Wi?(this.v=i,this):new Wi(i)},zc=function(i){var t,e;return t={},n("next"),n("throw",function(r){throw r}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(r,o){t[r]=i[r]?function(s){return(e=!e)?{value:Wi(i[r](s)),done:!1}:o?o(s):s}:o}},Vc=function(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(i,t||[]),r,o=[];return r={},u("next"),u("throw"),u("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(a){return function(p){return Promise.resolve(p).then(a,f)}}function u(a,p){n[a]&&(r[a]=function(b){return new Promise(function(w,v){o.push([a,b,w,v])>1||c(a,b)})},p&&(r[a]=p(r[a])))}function c(a,p){try{m(n[a](p))}catch(b){l(o[0][3],b)}}function m(a){a.value instanceof Wi?Promise.resolve(a.value.v).then(y,f):l(o[0][2],a)}function y(a){c("next",a)}function f(a){c("throw",a)}function l(a,p){a(p),o.shift(),o.length&&c(o[0][0],o[0][1])}};function Kc(i,t){return Fc(i,e=>{switch(e.kind){case bt.Unary:return Hc(t,i,e);case bt.ServerStreaming:return Wc(t,i,e);case bt.ClientStreaming:return Gc(t,i,e);case bt.BiDiStreaming:return Yc(t,i,e);default:return null}})}function Hc(i,t,e){return async function(n,r){var o,s;const u=await i.unary(t,e,r==null?void 0:r.signal,r==null?void 0:r.timeoutMs,r==null?void 0:r.headers,n,r==null?void 0:r.contextValues);return(o=r==null?void 0:r.onHeader)===null||o===void 0||o.call(r,u.header),(s=r==null?void 0:r.onTrailer)===null||s===void 0||s.call(r,u.trailer),u.message}}function Wc(i,t,e){return function(n,r){return Xl(i.stream(t,e,r==null?void 0:r.signal,r==null?void 0:r.timeoutMs,r==null?void 0:r.headers,$c([n]),r==null?void 0:r.contextValues),r)}}function Gc(i,t,e){return async function(n,r){var o,s,u,c,m,y;const f=await i.stream(t,e,r==null?void 0:r.signal,r==null?void 0:r.timeoutMs,r==null?void 0:r.headers,n,r==null?void 0:r.contextValues);(m=r==null?void 0:r.onHeader)===null||m===void 0||m.call(r,f.header);let l;try{for(var a=!0,p=Zl(f.message),b;b=await p.next(),o=b.done,!o;a=!0)c=b.value,a=!1,l=c}catch(w){s={error:w}}finally{try{!a&&!o&&(u=p.return)&&await u.call(p)}finally{if(s)throw s.error}}if(!l)throw new Ze("protocol error: missing response message",Ge.Internal);return(y=r==null?void 0:r.onTrailer)===null||y===void 0||y.call(r,f.trailer),l}}function Yc(i,t,e){return function(n,r){return Xl(i.stream(t,e,r==null?void 0:r.signal,r==null?void 0:r.timeoutMs,r==null?void 0:r.headers,n,r==null?void 0:r.contextValues),r)}}function Xl(i,t){const e=function(){var n,r;return Vc(this,arguments,function*(){const o=yield Wi(i);(n=t==null?void 0:t.onHeader)===null||n===void 0||n.call(t,o.header),yield Wi(yield*zc(Zl(o.message))),(r=t==null?void 0:t.onTrailer)===null||r===void 0||r.call(t,o.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>e.next()})}}function Zc(...i){const t=new AbortController,e=i.filter(r=>r!==void 0).concat(t.signal);for(const r of e){if(r.aborted){n.apply(r);break}r.addEventListener("abort",n)}function n(){t.signal.aborted||t.abort(Ql(this));for(const r of e)r.removeEventListener("abort",n)}return t}function Xc(i){const t=new AbortController,e=()=>{t.abort(new Ze("the operation timed out",Ge.DeadlineExceeded))};let n;return i!==void 0&&(i<=0?e():n=setTimeout(e,i)),{signal:t.signal,cleanup:()=>clearTimeout(n)}}function Ql(i){if(!i.aborted)return;if(i.reason!==void 0)return i.reason;const t=new Error("This operation was aborted");return t.name="AbortError",t}function ol(){return{get(i){return i.id in this?this[i.id]:i.defaultValue},set(i,t){return this[i.id]=t,this},delete(i){return delete this[i.id],this}}}const qs=128;function sl(i){const t=new Headers,e=new TextDecoder().decode(i).split(`\r
`);for(const n of e){if(n==="")continue;const r=n.indexOf(":");if(r>0){const o=n.substring(0,r).trim(),s=n.substring(r+1).trim();t.append(o,s)}}return t}const Qc="Content-Type",ef="Grpc-Timeout",eu="Grpc-Status",tu="Grpc-Message",tf="Grpc-Status-Details-Bin",nf="X-User-Agent",rf="X-Grpc-Web",of="application/grpc-web+proto",sf="application/grpc-web+json";class Hr extends me{constructor(t){super(),this.code=0,this.message="",this.details=[],L.util.initPartial(t,this)}static fromBinary(t,e){return new Hr().fromBinary(t,e)}static fromJson(t,e){return new Hr().fromJson(t,e)}static fromJsonString(t,e){return new Hr().fromJsonString(t,e)}static equals(t,e){return L.util.equals(Hr,t,e)}}Hr.runtime=L;Hr.typeName="google.rpc.Status";Hr.fields=L.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:_n,repeated:!0}]);const af="0";function nu(i){var t;const e=i.get(tf);if(e!=null){const r=qc(e,Hr);if(r.code==0)return;const o=new Ze(r.message,r.code,i);return o.details=r.details.map(s=>({type:s.typeUrl.substring(s.typeUrl.lastIndexOf("/")+1),value:s.value})),o}const n=i.get(eu);if(n!=null){if(n===af)return;const r=parseInt(n,10);return r in Ge?new Ze(decodeURIComponent((t=i.get(tu))!==null&&t!==void 0?t:""),r,i):new Ze(`invalid grpc-status: ${n}`,Ge.Internal,i)}}function al(i,t,e){const n=typeof t=="string"?t:t.typeName,r=typeof e=="string"?e:e.name;return i.toString().replace(/\/?$/,`/${n}/${r}`)}function ru(i,t){return t instanceof i?t:new i(t)}function lf(i,t){function e(n){return n.done===!0?n:{done:n.done,value:ru(i,n.value)}}return{[Symbol.asyncIterator](){const n=t[Symbol.asyncIterator](),r={next:()=>n.next().then(e)};return n.throw!==void 0&&(r.throw=o=>n.throw(o).then(e)),n.return!==void 0&&(r.return=o=>n.return(o).then(e)),r}}}function iu(i,t){var e;return(e=t==null?void 0:t.concat().reverse().reduce((n,r)=>r(n),i))!==null&&e!==void 0?e:i}function uf(i){var t;const e=Object.assign({},i);return(t=e.ignoreUnknownFields)!==null&&t!==void 0||(e.ignoreUnknownFields=!0),e}function ll(i,t,e,n){const r=t?ul(i.I,n):cl(i.I,e);return{parse:(t?ul(i.O,n):cl(i.O,e)).parse,serialize:r.serialize}}function ul(i,t){return{parse(e){try{return i.fromBinary(e,t)}catch(n){const r=n instanceof Error?n.message:String(n);throw new Ze(`parse binary: ${r}`,Ge.InvalidArgument)}},serialize(e){try{return e.toBinary(t)}catch(n){const r=n instanceof Error?n.message:String(n);throw new Ze(`serialize binary: ${r}`,Ge.Internal)}}}}function cl(i,t){var e,n;const r=(e=t==null?void 0:t.textEncoder)!==null&&e!==void 0?e:new TextEncoder,o=(n=t==null?void 0:t.textDecoder)!==null&&n!==void 0?n:new TextDecoder,s=uf(t);return{parse(u){try{const c=o.decode(u);return i.fromJsonString(c,s)}catch(c){throw Ze.from(c,Ge.InvalidArgument)}},serialize(u){try{const c=u.toJsonString(s);return r.encode(c)}catch(c){throw Ze.from(c,Ge.Internal)}}}}function cf(i){const t=iu(i.next,i.interceptors),[e,n,r]=ou(i),o=Object.assign(Object.assign({},i.req),{message:ru(i.req.method.I,i.req.message),signal:e});return t(o).then(s=>(r(),s),n)}function ff(i){const t=iu(i.next,i.interceptors),[e,n,r]=ou(i),o=Object.assign(Object.assign({},i.req),{message:lf(i.req.method.I,i.req.message),signal:e});let s=!1;return e.addEventListener("abort",function(){var u,c;const m=i.req.message[Symbol.asyncIterator]();s||(u=m.throw)===null||u===void 0||u.call(m,this.reason).catch(()=>{}),(c=m.return)===null||c===void 0||c.call(m).catch(()=>{})}),t(o).then(u=>Object.assign(Object.assign({},u),{message:{[Symbol.asyncIterator](){const c=u.message[Symbol.asyncIterator]();return{next(){return c.next().then(m=>(m.done==!0&&(s=!0,r()),m),n)}}}}}),n)}function ou(i){const{signal:t,cleanup:e}=Xc(i.timeoutMs),n=Zc(i.signal,t);return[n.signal,function(o){const s=Ze.from(t.aborted?Ql(t):o);return n.abort(s),e(),Promise.reject(s)},function(){e(),n.abort()}]}function hf(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function fl(i,t){const e=nu(i);if(e)throw t.forEach((n,r)=>{e.metadata.append(r,n)}),e}function hl(i,t,e,n){const r=new Headers(e??{});return r.set(Qc,i?of:sf),r.set(rf,"1"),r.set(nf,"connect-es/1.4.0"),t!==void 0&&r.set(ef,`${t}m`),r}function df(i){switch(i){case 400:return Ge.Internal;case 401:return Ge.Unauthenticated;case 403:return Ge.PermissionDenied;case 404:return Ge.Unimplemented;case 429:return Ge.Unavailable;case 502:return Ge.Unavailable;case 503:return Ge.Unavailable;case 504:return Ge.Unavailable;default:return Ge.Unknown}}function dl(i,t){var e;if(i>=200&&i<300){const n=nu(t);if(n)throw n;return{foundStatus:t.has(eu)}}throw new Ze(decodeURIComponent((e=t.get(tu))!==null&&e!==void 0?e:`HTTP ${i}`),df(i),t)}var Ei=function(i){return this instanceof Ei?(this.v=i,this):new Ei(i)},gf=function(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(i,t||[]),r,o=[];return r={},u("next"),u("throw"),u("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(a){return function(p){return Promise.resolve(p).then(a,f)}}function u(a,p){n[a]&&(r[a]=function(b){return new Promise(function(w,v){o.push([a,b,w,v])>1||c(a,b)})},p&&(r[a]=p(r[a])))}function c(a,p){try{m(n[a](p))}catch(b){l(o[0][3],b)}}function m(a){a.value instanceof Ei?Promise.resolve(a.value.v).then(y,f):l(o[0][2],a)}function y(a){c("next",a)}function f(a){c("throw",a)}function l(a,p){a(p),o.shift(),o.length&&c(o[0][0],o[0][1])}};function pf(i){var t;hf();const e=(t=i.useBinaryFormat)!==null&&t!==void 0?t:!0;return{async unary(n,r,o,s,u,c,m){var y;const{serialize:f,parse:l}=ll(r,e,i.jsonOptions,i.binaryOptions);return s=s===void 0?i.defaultTimeoutMs:s<=0?void 0:s,await cf({interceptors:i.interceptors,signal:o,timeoutMs:s,req:{stream:!1,service:n,method:r,url:al(i.baseUrl,n,r),init:{method:"POST",credentials:(y=i.credentials)!==null&&y!==void 0?y:"same-origin",redirect:"error",mode:"cors"},header:hl(e,s,u),contextValues:m??ol(),message:c},next:async a=>{var p;const w=await((p=i.fetch)!==null&&p!==void 0?p:globalThis.fetch)(a.url,Object.assign(Object.assign({},a.init),{headers:a.header,signal:a.signal,body:il(0,f(a.message))}));if(dl(w.status,w.headers),!w.body)throw"missing response body";const v=rl(w.body).getReader();let h,g;for(;;){const d=await v.read();if(d.done)break;const{flags:A,data:S}=d.value;if(A===qs){if(h!==void 0)throw"extra trailer";h=sl(S);continue}if(g!==void 0)throw"extra message";g=l(S)}if(h===void 0)throw"missing trailer";if(fl(h,w.headers),g===void 0)throw"missing message";return{stream:!1,service:n,method:r,header:w.headers,message:g,trailer:h}}})},async stream(n,r,o,s,u,c,m){var y;const{serialize:f,parse:l}=ll(r,e,i.jsonOptions,i.binaryOptions);function a(b,w,v,h){return gf(this,arguments,function*(){const d=rl(b).getReader();if(w){if(!(yield Ei(d.read())).done)throw"extra data for trailers-only";return yield Ei(void 0)}let A=!1;for(;;){const S=yield Ei(d.read());if(S.done)break;const{flags:E,data:O}=S.value;if((E&qs)===qs){if(A)throw"extra trailer";A=!0;const _=sl(O);fl(_,h),_.forEach((k,x)=>v.set(x,k));continue}if(A)throw"extra message";yield yield Ei(l(O))}if(!A)throw"missing trailer"})}async function p(b){if(r.kind!=bt.ServerStreaming)throw"The fetch API does not support streaming request bodies";const w=await b[Symbol.asyncIterator]().next();if(w.done==!0)throw"missing request message";return il(0,f(w.value))}return s=s===void 0?i.defaultTimeoutMs:s<=0?void 0:s,ff({interceptors:i.interceptors,signal:o,timeoutMs:s,req:{stream:!0,service:n,method:r,url:al(i.baseUrl,n,r),init:{method:"POST",credentials:(y=i.credentials)!==null&&y!==void 0?y:"same-origin",redirect:"error",mode:"cors"},header:hl(e,s,u),contextValues:m??ol(),message:c},next:async b=>{var w;const h=await((w=i.fetch)!==null&&w!==void 0?w:globalThis.fetch)(b.url,Object.assign(Object.assign({},b.init),{headers:b.header,signal:b.signal,body:await p(b.message)})),{foundStatus:g}=dl(h.status,h.headers);if(!h.body)throw"missing response body";const d=new Headers;return Object.assign(Object.assign({},b),{header:h.headers,trailer:d,message:a(h.body,g,d,h.headers)})}})}}}var Re=(i=>(i[i.NULL=0]="NULL",i[i.BOOLEAN=1]="BOOLEAN",i[i.INTEGER=2]="INTEGER",i[i.LONG=3]="LONG",i[i.DOUBLE=4]="DOUBLE",i[i.STRING=5]="STRING",i[i.BYTES=6]="BYTES",i[i.DATE=7]="DATE",i[i.JSON_OBJECT=8]="JSON_OBJECT",i[i.JSON_ARRAY=9]="JSON_ARRAY",i[i.TEXT=10]="TEXT",i[i.INTEGER_CNT=11]="INTEGER_CNT",i[i.LONG_CNT=12]="LONG_CNT",i[i.TREE=13]="TREE",i))(Re||{});L.util.setEnumType(Re,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var Oi=(i=>(i[i.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",i[i.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",i[i.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",i[i.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",i))(Oi||{});L.util.setEnumType(Oi,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const Vn=class Vn extends me{constructor(e){super();T(this,"root");T(this,"presences",{});L.util.initPartial(e,this)}static fromBinary(e,n){return new Vn().fromBinary(e,n)}static fromJson(e,n){return new Vn().fromJson(e,n)}static fromJsonString(e,n){return new Vn().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Vn,e,n)}};T(Vn,"runtime",L),T(Vn,"typeName","yorkie.v1.Snapshot"),T(Vn,"fields",L.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:kt},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:Sa}}]));let Hs=Vn;var Mt;let Qr=(Mt=class extends me{constructor(e){super();T(this,"documentKey","");T(this,"checkpoint");T(this,"snapshot",new Uint8Array(0));T(this,"changes",[]);T(this,"minSyncedTicket");T(this,"isRemoved",!1);T(this,"versionVector");L.util.initPartial(e,this)}static fromBinary(e,n){return new Mt().fromBinary(e,n)}static fromJson(e,n){return new Mt().fromJson(e,n)}static fromJsonString(e,n){return new Mt().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Mt,e,n)}},T(Mt,"runtime",L),T(Mt,"typeName","yorkie.v1.ChangePack"),T(Mt,"fields",L.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:lu},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:su,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:xe},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:Os}])),Mt);var qt;let su=(qt=class extends me{constructor(e){super();T(this,"id");T(this,"message","");T(this,"operations",[]);T(this,"presenceChange");L.util.initPartial(e,this)}static fromBinary(e,n){return new qt().fromBinary(e,n)}static fromJson(e,n){return new qt().fromJson(e,n)}static fromJsonString(e,n){return new qt().fromJsonString(e,n)}static equals(e,n){return L.util.equals(qt,e,n)}},T(qt,"runtime",L),T(qt,"typeName","yorkie.v1.Change"),T(qt,"fields",L.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:ks},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:Ta,repeated:!0},{no:4,name:"presence_change",kind:"message",T:vo}])),qt);var Ft;let ks=(Ft=class extends me{constructor(e){super();T(this,"clientSeq",0);T(this,"serverSeq",Xe.zero);T(this,"lamport",Xe.zero);T(this,"actorId",new Uint8Array(0));T(this,"versionVector");L.util.initPartial(e,this)}static fromBinary(e,n){return new Ft().fromBinary(e,n)}static fromJson(e,n){return new Ft().fromJson(e,n)}static fromJsonString(e,n){return new Ft().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Ft,e,n)}},T(Ft,"runtime",L),T(Ft,"typeName","yorkie.v1.ChangeID"),T(Ft,"fields",L.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:Os}])),Ft);var jt;let Os=(jt=class extends me{constructor(e){super();T(this,"vector",{});L.util.initPartial(e,this)}static fromBinary(e,n){return new jt().fromBinary(e,n)}static fromJson(e,n){return new jt().fromJson(e,n)}static fromJsonString(e,n){return new jt().fromJsonString(e,n)}static equals(e,n){return L.util.equals(jt,e,n)}},T(jt,"runtime",L),T(jt,"typeName","yorkie.v1.VersionVector"),T(jt,"fields",L.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),jt);var Ut;let Ta=(Ut=class extends me{constructor(e){super();T(this,"body",{case:void 0});L.util.initPartial(e,this)}static fromBinary(e,n){return new Ut().fromBinary(e,n)}static fromJson(e,n){return new Ut().fromJson(e,n)}static fromJsonString(e,n){return new Ut().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Ut,e,n)}},T(Ut,"runtime",L),T(Ut,"typeName","yorkie.v1.Operation"),T(Ut,"fields",L.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:rs,oneof:"body"},{no:2,name:"add",kind:"message",T:is,oneof:"body"},{no:3,name:"move",kind:"message",T:os,oneof:"body"},{no:4,name:"remove",kind:"message",T:ss,oneof:"body"},{no:5,name:"edit",kind:"message",T:as,oneof:"body"},{no:6,name:"select",kind:"message",T:Ws,oneof:"body"},{no:7,name:"style",kind:"message",T:ls,oneof:"body"},{no:8,name:"increase",kind:"message",T:us,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:cs,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:fs,oneof:"body"},{no:11,name:"array_set",kind:"message",T:Gs,oneof:"body"}])),Ut);const Kn=class Kn extends me{constructor(e){super();T(this,"parentCreatedAt");T(this,"key","");T(this,"value");T(this,"executedAt");L.util.initPartial(e,this)}static fromBinary(e,n){return new Kn().fromBinary(e,n)}static fromJson(e,n){return new Kn().fromJson(e,n)}static fromJsonString(e,n){return new Kn().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Kn,e,n)}};T(Kn,"runtime",L),T(Kn,"typeName","yorkie.v1.Operation.Set"),T(Kn,"fields",L.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:xe},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:Bt},{no:4,name:"executed_at",kind:"message",T:xe}]));let rs=Kn;const Hn=class Hn extends me{constructor(e){super();T(this,"parentCreatedAt");T(this,"prevCreatedAt");T(this,"value");T(this,"executedAt");L.util.initPartial(e,this)}static fromBinary(e,n){return new Hn().fromBinary(e,n)}static fromJson(e,n){return new Hn().fromJson(e,n)}static fromJsonString(e,n){return new Hn().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Hn,e,n)}};T(Hn,"runtime",L),T(Hn,"typeName","yorkie.v1.Operation.Add"),T(Hn,"fields",L.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:xe},{no:2,name:"prev_created_at",kind:"message",T:xe},{no:3,name:"value",kind:"message",T:Bt},{no:4,name:"executed_at",kind:"message",T:xe}]));let is=Hn;const Wn=class Wn extends me{constructor(e){super();T(this,"parentCreatedAt");T(this,"prevCreatedAt");T(this,"createdAt");T(this,"executedAt");L.util.initPartial(e,this)}static fromBinary(e,n){return new Wn().fromBinary(e,n)}static fromJson(e,n){return new Wn().fromJson(e,n)}static fromJsonString(e,n){return new Wn().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Wn,e,n)}};T(Wn,"runtime",L),T(Wn,"typeName","yorkie.v1.Operation.Move"),T(Wn,"fields",L.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:xe},{no:2,name:"prev_created_at",kind:"message",T:xe},{no:3,name:"created_at",kind:"message",T:xe},{no:4,name:"executed_at",kind:"message",T:xe}]));let os=Wn;const Gn=class Gn extends me{constructor(e){super();T(this,"parentCreatedAt");T(this,"createdAt");T(this,"executedAt");L.util.initPartial(e,this)}static fromBinary(e,n){return new Gn().fromBinary(e,n)}static fromJson(e,n){return new Gn().fromJson(e,n)}static fromJsonString(e,n){return new Gn().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Gn,e,n)}};T(Gn,"runtime",L),T(Gn,"typeName","yorkie.v1.Operation.Remove"),T(Gn,"fields",L.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:xe},{no:2,name:"created_at",kind:"message",T:xe},{no:3,name:"executed_at",kind:"message",T:xe}]));let ss=Gn;const Yn=class Yn extends me{constructor(e){super();T(this,"parentCreatedAt");T(this,"from");T(this,"to");T(this,"createdAtMapByActor",{});T(this,"content","");T(this,"executedAt");T(this,"attributes",{});L.util.initPartial(e,this)}static fromBinary(e,n){return new Yn().fromBinary(e,n)}static fromJson(e,n){return new Yn().fromJson(e,n)}static fromJsonString(e,n){return new Yn().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Yn,e,n)}};T(Yn,"runtime",L),T(Yn,"typeName","yorkie.v1.Operation.Edit"),T(Yn,"fields",L.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:xe},{no:2,name:"from",kind:"message",T:Zr},{no:3,name:"to",kind:"message",T:Zr},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:xe}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:xe},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let as=Yn;const Zn=class Zn extends me{constructor(e){super();T(this,"parentCreatedAt");T(this,"from");T(this,"to");T(this,"executedAt");L.util.initPartial(e,this)}static fromBinary(e,n){return new Zn().fromBinary(e,n)}static fromJson(e,n){return new Zn().fromJson(e,n)}static fromJsonString(e,n){return new Zn().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Zn,e,n)}};T(Zn,"runtime",L),T(Zn,"typeName","yorkie.v1.Operation.Select"),T(Zn,"fields",L.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:xe},{no:2,name:"from",kind:"message",T:Zr},{no:3,name:"to",kind:"message",T:Zr},{no:4,name:"executed_at",kind:"message",T:xe}]));let Ws=Zn;const Xn=class Xn extends me{constructor(e){super();T(this,"parentCreatedAt");T(this,"from");T(this,"to");T(this,"attributes",{});T(this,"executedAt");T(this,"createdAtMapByActor",{});L.util.initPartial(e,this)}static fromBinary(e,n){return new Xn().fromBinary(e,n)}static fromJson(e,n){return new Xn().fromJson(e,n)}static fromJsonString(e,n){return new Xn().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Xn,e,n)}};T(Xn,"runtime",L),T(Xn,"typeName","yorkie.v1.Operation.Style"),T(Xn,"fields",L.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:xe},{no:2,name:"from",kind:"message",T:Zr},{no:3,name:"to",kind:"message",T:Zr},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:xe},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:xe}}]));let ls=Xn;const Qn=class Qn extends me{constructor(e){super();T(this,"parentCreatedAt");T(this,"value");T(this,"executedAt");L.util.initPartial(e,this)}static fromBinary(e,n){return new Qn().fromBinary(e,n)}static fromJson(e,n){return new Qn().fromJson(e,n)}static fromJsonString(e,n){return new Qn().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Qn,e,n)}};T(Qn,"runtime",L),T(Qn,"typeName","yorkie.v1.Operation.Increase"),T(Qn,"fields",L.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:xe},{no:2,name:"value",kind:"message",T:Bt},{no:3,name:"executed_at",kind:"message",T:xe}]));let us=Qn;const er=class er extends me{constructor(e){super();T(this,"parentCreatedAt");T(this,"from");T(this,"to");T(this,"createdAtMapByActor",{});T(this,"contents",[]);T(this,"splitLevel",0);T(this,"executedAt");L.util.initPartial(e,this)}static fromBinary(e,n){return new er().fromBinary(e,n)}static fromJson(e,n){return new er().fromJson(e,n)}static fromJsonString(e,n){return new er().fromJsonString(e,n)}static equals(e,n){return L.util.equals(er,e,n)}};T(er,"runtime",L),T(er,"typeName","yorkie.v1.Operation.TreeEdit"),T(er,"fields",L.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:xe},{no:2,name:"from",kind:"message",T:Ii},{no:3,name:"to",kind:"message",T:Ii},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:xe}},{no:5,name:"contents",kind:"message",T:ws,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:xe}]));let cs=er;const tr=class tr extends me{constructor(e){super();T(this,"parentCreatedAt");T(this,"from");T(this,"to");T(this,"attributes",{});T(this,"executedAt");T(this,"attributesToRemove",[]);T(this,"createdAtMapByActor",{});L.util.initPartial(e,this)}static fromBinary(e,n){return new tr().fromBinary(e,n)}static fromJson(e,n){return new tr().fromJson(e,n)}static fromJsonString(e,n){return new tr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(tr,e,n)}};T(tr,"runtime",L),T(tr,"typeName","yorkie.v1.Operation.TreeStyle"),T(tr,"fields",L.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:xe},{no:2,name:"from",kind:"message",T:Ii},{no:3,name:"to",kind:"message",T:Ii},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:xe},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:xe}}]));let fs=tr;const nr=class nr extends me{constructor(e){super();T(this,"parentCreatedAt");T(this,"createdAt");T(this,"value");T(this,"executedAt");L.util.initPartial(e,this)}static fromBinary(e,n){return new nr().fromBinary(e,n)}static fromJson(e,n){return new nr().fromJson(e,n)}static fromJsonString(e,n){return new nr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(nr,e,n)}};T(nr,"runtime",L),T(nr,"typeName","yorkie.v1.Operation.ArraySet"),T(nr,"fields",L.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:xe},{no:2,name:"created_at",kind:"message",T:xe},{no:3,name:"value",kind:"message",T:Bt},{no:4,name:"executed_at",kind:"message",T:xe}]));let Gs=nr;const rr=class rr extends me{constructor(e){super();T(this,"createdAt");T(this,"movedAt");T(this,"removedAt");T(this,"type",0);T(this,"value",new Uint8Array(0));L.util.initPartial(e,this)}static fromBinary(e,n){return new rr().fromBinary(e,n)}static fromJson(e,n){return new rr().fromJson(e,n)}static fromJsonString(e,n){return new rr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(rr,e,n)}};T(rr,"runtime",L),T(rr,"typeName","yorkie.v1.JSONElementSimple"),T(rr,"fields",L.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:xe},{no:2,name:"moved_at",kind:"message",T:xe},{no:3,name:"removed_at",kind:"message",T:xe},{no:4,name:"type",kind:"enum",T:L.getEnumType(Re)},{no:5,name:"value",kind:"scalar",T:12}]));let Bt=rr;const ir=class ir extends me{constructor(e){super();T(this,"body",{case:void 0});L.util.initPartial(e,this)}static fromBinary(e,n){return new ir().fromBinary(e,n)}static fromJson(e,n){return new ir().fromJson(e,n)}static fromJsonString(e,n){return new ir().fromJsonString(e,n)}static equals(e,n){return L.util.equals(ir,e,n)}};T(ir,"runtime",L),T(ir,"typeName","yorkie.v1.JSONElement"),T(ir,"fields",L.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:hs,oneof:"body"},{no:2,name:"json_array",kind:"message",T:ds,oneof:"body"},{no:3,name:"primitive",kind:"message",T:gs,oneof:"body"},{no:5,name:"text",kind:"message",T:ps,oneof:"body"},{no:6,name:"counter",kind:"message",T:ms,oneof:"body"},{no:7,name:"tree",kind:"message",T:ys,oneof:"body"}]));let kt=ir;const or=class or extends me{constructor(e){super();T(this,"nodes",[]);T(this,"createdAt");T(this,"movedAt");T(this,"removedAt");L.util.initPartial(e,this)}static fromBinary(e,n){return new or().fromBinary(e,n)}static fromJson(e,n){return new or().fromJson(e,n)}static fromJsonString(e,n){return new or().fromJsonString(e,n)}static equals(e,n){return L.util.equals(or,e,n)}};T(or,"runtime",L),T(or,"typeName","yorkie.v1.JSONElement.JSONObject"),T(or,"fields",L.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:au,repeated:!0},{no:2,name:"created_at",kind:"message",T:xe},{no:3,name:"moved_at",kind:"message",T:xe},{no:4,name:"removed_at",kind:"message",T:xe}]));let hs=or;const sr=class sr extends me{constructor(e){super();T(this,"nodes",[]);T(this,"createdAt");T(this,"movedAt");T(this,"removedAt");L.util.initPartial(e,this)}static fromBinary(e,n){return new sr().fromBinary(e,n)}static fromJson(e,n){return new sr().fromJson(e,n)}static fromJsonString(e,n){return new sr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(sr,e,n)}};T(sr,"runtime",L),T(sr,"typeName","yorkie.v1.JSONElement.JSONArray"),T(sr,"fields",L.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:vs,repeated:!0},{no:2,name:"created_at",kind:"message",T:xe},{no:3,name:"moved_at",kind:"message",T:xe},{no:4,name:"removed_at",kind:"message",T:xe}]));let ds=sr;const ar=class ar extends me{constructor(e){super();T(this,"type",0);T(this,"value",new Uint8Array(0));T(this,"createdAt");T(this,"movedAt");T(this,"removedAt");L.util.initPartial(e,this)}static fromBinary(e,n){return new ar().fromBinary(e,n)}static fromJson(e,n){return new ar().fromJson(e,n)}static fromJsonString(e,n){return new ar().fromJsonString(e,n)}static equals(e,n){return L.util.equals(ar,e,n)}};T(ar,"runtime",L),T(ar,"typeName","yorkie.v1.JSONElement.Primitive"),T(ar,"fields",L.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:L.getEnumType(Re)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:xe},{no:4,name:"moved_at",kind:"message",T:xe},{no:5,name:"removed_at",kind:"message",T:xe}]));let gs=ar;const lr=class lr extends me{constructor(e){super();T(this,"nodes",[]);T(this,"createdAt");T(this,"movedAt");T(this,"removedAt");L.util.initPartial(e,this)}static fromBinary(e,n){return new lr().fromBinary(e,n)}static fromJson(e,n){return new lr().fromJson(e,n)}static fromJsonString(e,n){return new lr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(lr,e,n)}};T(lr,"runtime",L),T(lr,"typeName","yorkie.v1.JSONElement.Text"),T(lr,"fields",L.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:bs,repeated:!0},{no:2,name:"created_at",kind:"message",T:xe},{no:3,name:"moved_at",kind:"message",T:xe},{no:4,name:"removed_at",kind:"message",T:xe}]));let ps=lr;const ur=class ur extends me{constructor(e){super();T(this,"type",0);T(this,"value",new Uint8Array(0));T(this,"createdAt");T(this,"movedAt");T(this,"removedAt");L.util.initPartial(e,this)}static fromBinary(e,n){return new ur().fromBinary(e,n)}static fromJson(e,n){return new ur().fromJson(e,n)}static fromJsonString(e,n){return new ur().fromJsonString(e,n)}static equals(e,n){return L.util.equals(ur,e,n)}};T(ur,"runtime",L),T(ur,"typeName","yorkie.v1.JSONElement.Counter"),T(ur,"fields",L.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:L.getEnumType(Re)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:xe},{no:4,name:"moved_at",kind:"message",T:xe},{no:5,name:"removed_at",kind:"message",T:xe}]));let ms=ur;const cr=class cr extends me{constructor(e){super();T(this,"nodes",[]);T(this,"createdAt");T(this,"movedAt");T(this,"removedAt");L.util.initPartial(e,this)}static fromBinary(e,n){return new cr().fromBinary(e,n)}static fromJson(e,n){return new cr().fromJson(e,n)}static fromJsonString(e,n){return new cr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(cr,e,n)}};T(cr,"runtime",L),T(cr,"typeName","yorkie.v1.JSONElement.Tree"),T(cr,"fields",L.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:yo,repeated:!0},{no:2,name:"created_at",kind:"message",T:xe},{no:3,name:"moved_at",kind:"message",T:xe},{no:4,name:"removed_at",kind:"message",T:xe}]));let ys=cr;var Jt;let au=(Jt=class extends me{constructor(e){super();T(this,"key","");T(this,"element");L.util.initPartial(e,this)}static fromBinary(e,n){return new Jt().fromBinary(e,n)}static fromJson(e,n){return new Jt().fromJson(e,n)}static fromJsonString(e,n){return new Jt().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Jt,e,n)}},T(Jt,"runtime",L),T(Jt,"typeName","yorkie.v1.RHTNode"),T(Jt,"fields",L.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:kt}])),Jt);const In=class In extends me{constructor(e){super();T(this,"next");T(this,"element");L.util.initPartial(e,this)}static fromBinary(e,n){return new In().fromBinary(e,n)}static fromJson(e,n){return new In().fromJson(e,n)}static fromJsonString(e,n){return new In().fromJsonString(e,n)}static equals(e,n){return L.util.equals(In,e,n)}};T(In,"runtime",L),T(In,"typeName","yorkie.v1.RGANode"),T(In,"fields",L.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:In},{no:2,name:"element",kind:"message",T:kt}]));let vs=In;const fr=class fr extends me{constructor(e){super();T(this,"value","");T(this,"updatedAt");T(this,"isRemoved",!1);L.util.initPartial(e,this)}static fromBinary(e,n){return new fr().fromBinary(e,n)}static fromJson(e,n){return new fr().fromJson(e,n)}static fromJsonString(e,n){return new fr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(fr,e,n)}};T(fr,"runtime",L),T(fr,"typeName","yorkie.v1.NodeAttr"),T(fr,"fields",L.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:xe},{no:3,name:"is_removed",kind:"scalar",T:8}]));let Gi=fr;const hr=class hr extends me{constructor(e){super();T(this,"id");T(this,"value","");T(this,"removedAt");T(this,"insPrevId");T(this,"attributes",{});L.util.initPartial(e,this)}static fromBinary(e,n){return new hr().fromBinary(e,n)}static fromJson(e,n){return new hr().fromJson(e,n)}static fromJsonString(e,n){return new hr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(hr,e,n)}};T(hr,"runtime",L),T(hr,"typeName","yorkie.v1.TextNode"),T(hr,"fields",L.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:mo},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:xe},{no:4,name:"ins_prev_id",kind:"message",T:mo},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Gi}}]));let bs=hr;const dr=class dr extends me{constructor(e){super();T(this,"createdAt");T(this,"offset",0);L.util.initPartial(e,this)}static fromBinary(e,n){return new dr().fromBinary(e,n)}static fromJson(e,n){return new dr().fromJson(e,n)}static fromJsonString(e,n){return new dr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(dr,e,n)}};T(dr,"runtime",L),T(dr,"typeName","yorkie.v1.TextNodeID"),T(dr,"fields",L.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:xe},{no:2,name:"offset",kind:"scalar",T:5}]));let mo=dr;const gr=class gr extends me{constructor(e){super();T(this,"id");T(this,"type","");T(this,"value","");T(this,"removedAt");T(this,"insPrevId");T(this,"insNextId");T(this,"depth",0);T(this,"attributes",{});L.util.initPartial(e,this)}static fromBinary(e,n){return new gr().fromBinary(e,n)}static fromJson(e,n){return new gr().fromJson(e,n)}static fromJsonString(e,n){return new gr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(gr,e,n)}};T(gr,"runtime",L),T(gr,"typeName","yorkie.v1.TreeNode"),T(gr,"fields",L.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:fi},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:xe},{no:5,name:"ins_prev_id",kind:"message",T:fi},{no:6,name:"ins_next_id",kind:"message",T:fi},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Gi}}]));let yo=gr;const pr=class pr extends me{constructor(e){super();T(this,"content",[]);L.util.initPartial(e,this)}static fromBinary(e,n){return new pr().fromBinary(e,n)}static fromJson(e,n){return new pr().fromJson(e,n)}static fromJsonString(e,n){return new pr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(pr,e,n)}};T(pr,"runtime",L),T(pr,"typeName","yorkie.v1.TreeNodes"),T(pr,"fields",L.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:yo,repeated:!0}]));let ws=pr;const mr=class mr extends me{constructor(e){super();T(this,"createdAt");T(this,"offset",0);L.util.initPartial(e,this)}static fromBinary(e,n){return new mr().fromBinary(e,n)}static fromJson(e,n){return new mr().fromJson(e,n)}static fromJsonString(e,n){return new mr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(mr,e,n)}};T(mr,"runtime",L),T(mr,"typeName","yorkie.v1.TreeNodeID"),T(mr,"fields",L.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:xe},{no:2,name:"offset",kind:"scalar",T:5}]));let fi=mr;const yr=class yr extends me{constructor(e){super();T(this,"parentId");T(this,"leftSiblingId");L.util.initPartial(e,this)}static fromBinary(e,n){return new yr().fromBinary(e,n)}static fromJson(e,n){return new yr().fromJson(e,n)}static fromJsonString(e,n){return new yr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(yr,e,n)}};T(yr,"runtime",L),T(yr,"typeName","yorkie.v1.TreePos"),T(yr,"fields",L.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:fi},{no:2,name:"left_sibling_id",kind:"message",T:fi}]));let Ii=yr;const vr=class vr extends me{constructor(e){super();T(this,"id","");T(this,"username","");T(this,"createdAt");L.util.initPartial(e,this)}static fromBinary(e,n){return new vr().fromBinary(e,n)}static fromJson(e,n){return new vr().fromJson(e,n)}static fromJsonString(e,n){return new vr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(vr,e,n)}};T(vr,"runtime",L),T(vr,"typeName","yorkie.v1.User"),T(vr,"fields",L.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:mt}]));let gl=vr;const br=class br extends me{constructor(e){super();T(this,"id","");T(this,"name","");T(this,"publicKey","");T(this,"secretKey","");T(this,"authWebhookUrl","");T(this,"authWebhookMethods",[]);T(this,"clientDeactivateThreshold","");T(this,"createdAt");T(this,"updatedAt");L.util.initPartial(e,this)}static fromBinary(e,n){return new br().fromBinary(e,n)}static fromJson(e,n){return new br().fromJson(e,n)}static fromJsonString(e,n){return new br().fromJsonString(e,n)}static equals(e,n){return L.util.equals(br,e,n)}};T(br,"runtime",L),T(br,"typeName","yorkie.v1.Project"),T(br,"fields",L.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:mt},{no:9,name:"updated_at",kind:"message",T:mt}]));let pl=br;const wr=class wr extends me{constructor(e){super();T(this,"name");T(this,"authWebhookUrl");T(this,"authWebhookMethods");T(this,"clientDeactivateThreshold");L.util.initPartial(e,this)}static fromBinary(e,n){return new wr().fromBinary(e,n)}static fromJson(e,n){return new wr().fromJson(e,n)}static fromJsonString(e,n){return new wr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(wr,e,n)}};T(wr,"runtime",L),T(wr,"typeName","yorkie.v1.UpdatableProjectFields"),T(wr,"fields",L.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:Pt},{no:2,name:"auth_webhook_url",kind:"message",T:Pt},{no:3,name:"auth_webhook_methods",kind:"message",T:Ys},{no:4,name:"client_deactivate_threshold",kind:"message",T:Pt}]));let ml=wr;const Ar=class Ar extends me{constructor(e){super();T(this,"methods",[]);L.util.initPartial(e,this)}static fromBinary(e,n){return new Ar().fromBinary(e,n)}static fromJson(e,n){return new Ar().fromJson(e,n)}static fromJsonString(e,n){return new Ar().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Ar,e,n)}};T(Ar,"runtime",L),T(Ar,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),T(Ar,"fields",L.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let Ys=Ar;const Tr=class Tr extends me{constructor(e){super();T(this,"id","");T(this,"key","");T(this,"snapshot","");T(this,"createdAt");T(this,"accessedAt");T(this,"updatedAt");L.util.initPartial(e,this)}static fromBinary(e,n){return new Tr().fromBinary(e,n)}static fromJson(e,n){return new Tr().fromJson(e,n)}static fromJsonString(e,n){return new Tr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Tr,e,n)}};T(Tr,"runtime",L),T(Tr,"typeName","yorkie.v1.DocumentSummary"),T(Tr,"fields",L.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:mt},{no:5,name:"accessed_at",kind:"message",T:mt},{no:6,name:"updated_at",kind:"message",T:mt}]));let yl=Tr;const Sr=class Sr extends me{constructor(e){super();T(this,"type",0);T(this,"presence");L.util.initPartial(e,this)}static fromBinary(e,n){return new Sr().fromBinary(e,n)}static fromJson(e,n){return new Sr().fromJson(e,n)}static fromJsonString(e,n){return new Sr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Sr,e,n)}};T(Sr,"runtime",L),T(Sr,"typeName","yorkie.v1.PresenceChange"),T(Sr,"fields",L.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:L.getEnumType(Ni)},{no:2,name:"presence",kind:"message",T:Sa}]));let vo=Sr;var Ni=(i=>(i[i.UNSPECIFIED=0]="UNSPECIFIED",i[i.PUT=1]="PUT",i[i.DELETE=2]="DELETE",i[i.CLEAR=3]="CLEAR",i))(Ni||{});L.util.setEnumType(Ni,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);var $t;let Sa=($t=class extends me{constructor(e){super();T(this,"data",{});L.util.initPartial(e,this)}static fromBinary(e,n){return new $t().fromBinary(e,n)}static fromJson(e,n){return new $t().fromJson(e,n)}static fromJsonString(e,n){return new $t().fromJsonString(e,n)}static equals(e,n){return L.util.equals($t,e,n)}},T($t,"runtime",L),T($t,"typeName","yorkie.v1.Presence"),T($t,"fields",L.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}])),$t);var zt;let lu=(zt=class extends me{constructor(e){super();T(this,"serverSeq",Xe.zero);T(this,"clientSeq",0);L.util.initPartial(e,this)}static fromBinary(e,n){return new zt().fromBinary(e,n)}static fromJson(e,n){return new zt().fromJson(e,n)}static fromJsonString(e,n){return new zt().fromJsonString(e,n)}static equals(e,n){return L.util.equals(zt,e,n)}},T(zt,"runtime",L),T(zt,"typeName","yorkie.v1.Checkpoint"),T(zt,"fields",L.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),zt);const Er=class Er extends me{constructor(e){super();T(this,"createdAt");T(this,"offset",0);T(this,"relativeOffset",0);L.util.initPartial(e,this)}static fromBinary(e,n){return new Er().fromBinary(e,n)}static fromJson(e,n){return new Er().fromJson(e,n)}static fromJsonString(e,n){return new Er().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Er,e,n)}};T(Er,"runtime",L),T(Er,"typeName","yorkie.v1.TextNodePos"),T(Er,"fields",L.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:xe},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let Zr=Er;var Vt;let xe=(Vt=class extends me{constructor(e){super();T(this,"lamport",Xe.zero);T(this,"delimiter",0);T(this,"actorId",new Uint8Array(0));L.util.initPartial(e,this)}static fromBinary(e,n){return new Vt().fromBinary(e,n)}static fromJson(e,n){return new Vt().fromJson(e,n)}static fromJsonString(e,n){return new Vt().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Vt,e,n)}},T(Vt,"runtime",L),T(Vt,"typeName","yorkie.v1.TimeTicket"),T(Vt,"fields",L.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),Vt);const xr=class xr extends me{constructor(e){super();T(this,"topic","");T(this,"payload",new Uint8Array(0));L.util.initPartial(e,this)}static fromBinary(e,n){return new xr().fromBinary(e,n)}static fromJson(e,n){return new xr().fromJson(e,n)}static fromJsonString(e,n){return new xr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(xr,e,n)}};T(xr,"runtime",L),T(xr,"typeName","yorkie.v1.DocEventBody"),T(xr,"fields",L.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let Zs=xr;const kr=class kr extends me{constructor(e){super();T(this,"type",0);T(this,"publisher","");T(this,"body");L.util.initPartial(e,this)}static fromBinary(e,n){return new kr().fromBinary(e,n)}static fromJson(e,n){return new kr().fromJson(e,n)}static fromJsonString(e,n){return new kr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(kr,e,n)}};T(kr,"runtime",L),T(kr,"typeName","yorkie.v1.DocEvent"),T(kr,"fields",L.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:L.getEnumType(Oi)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Zs}]));let Xs=kr;const Or=class Or extends me{constructor(e){super();T(this,"clientKey","");T(this,"metadata",{});L.util.initPartial(e,this)}static fromBinary(e,n){return new Or().fromBinary(e,n)}static fromJson(e,n){return new Or().fromJson(e,n)}static fromJsonString(e,n){return new Or().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Or,e,n)}};T(Or,"runtime",L),T(Or,"typeName","yorkie.v1.ActivateClientRequest"),T(Or,"fields",L.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Qs=Or;const Ir=class Ir extends me{constructor(e){super();T(this,"clientId","");L.util.initPartial(e,this)}static fromBinary(e,n){return new Ir().fromBinary(e,n)}static fromJson(e,n){return new Ir().fromJson(e,n)}static fromJsonString(e,n){return new Ir().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Ir,e,n)}};T(Ir,"runtime",L),T(Ir,"typeName","yorkie.v1.ActivateClientResponse"),T(Ir,"fields",L.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let ea=Ir;const Nr=class Nr extends me{constructor(e){super();T(this,"clientId","");L.util.initPartial(e,this)}static fromBinary(e,n){return new Nr().fromBinary(e,n)}static fromJson(e,n){return new Nr().fromJson(e,n)}static fromJsonString(e,n){return new Nr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Nr,e,n)}};T(Nr,"runtime",L),T(Nr,"typeName","yorkie.v1.DeactivateClientRequest"),T(Nr,"fields",L.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let ta=Nr;const _r=class _r extends me{constructor(t){super(),L.util.initPartial(t,this)}static fromBinary(t,e){return new _r().fromBinary(t,e)}static fromJson(t,e){return new _r().fromJson(t,e)}static fromJsonString(t,e){return new _r().fromJsonString(t,e)}static equals(t,e){return L.util.equals(_r,t,e)}};T(_r,"runtime",L),T(_r,"typeName","yorkie.v1.DeactivateClientResponse"),T(_r,"fields",L.util.newFieldList(()=>[]));let na=_r;const Pr=class Pr extends me{constructor(e){super();T(this,"clientId","");T(this,"changePack");L.util.initPartial(e,this)}static fromBinary(e,n){return new Pr().fromBinary(e,n)}static fromJson(e,n){return new Pr().fromJson(e,n)}static fromJsonString(e,n){return new Pr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Pr,e,n)}};T(Pr,"runtime",L),T(Pr,"typeName","yorkie.v1.AttachDocumentRequest"),T(Pr,"fields",L.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Qr}]));let ra=Pr;const Cr=class Cr extends me{constructor(e){super();T(this,"documentId","");T(this,"changePack");L.util.initPartial(e,this)}static fromBinary(e,n){return new Cr().fromBinary(e,n)}static fromJson(e,n){return new Cr().fromJson(e,n)}static fromJsonString(e,n){return new Cr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Cr,e,n)}};T(Cr,"runtime",L),T(Cr,"typeName","yorkie.v1.AttachDocumentResponse"),T(Cr,"fields",L.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Qr}]));let ia=Cr;const Lr=class Lr extends me{constructor(e){super();T(this,"clientId","");T(this,"documentId","");T(this,"changePack");T(this,"removeIfNotAttached",!1);L.util.initPartial(e,this)}static fromBinary(e,n){return new Lr().fromBinary(e,n)}static fromJson(e,n){return new Lr().fromJson(e,n)}static fromJsonString(e,n){return new Lr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Lr,e,n)}};T(Lr,"runtime",L),T(Lr,"typeName","yorkie.v1.DetachDocumentRequest"),T(Lr,"fields",L.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Qr},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let oa=Lr;const Rr=class Rr extends me{constructor(e){super();T(this,"changePack");L.util.initPartial(e,this)}static fromBinary(e,n){return new Rr().fromBinary(e,n)}static fromJson(e,n){return new Rr().fromJson(e,n)}static fromJsonString(e,n){return new Rr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Rr,e,n)}};T(Rr,"runtime",L),T(Rr,"typeName","yorkie.v1.DetachDocumentResponse"),T(Rr,"fields",L.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:Qr}]));let sa=Rr;const Dr=class Dr extends me{constructor(e){super();T(this,"clientId","");T(this,"documentId","");L.util.initPartial(e,this)}static fromBinary(e,n){return new Dr().fromBinary(e,n)}static fromJson(e,n){return new Dr().fromJson(e,n)}static fromJsonString(e,n){return new Dr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Dr,e,n)}};T(Dr,"runtime",L),T(Dr,"typeName","yorkie.v1.WatchDocumentRequest"),T(Dr,"fields",L.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let aa=Dr;const Br=class Br extends me{constructor(e){super();T(this,"body",{case:void 0});L.util.initPartial(e,this)}static fromBinary(e,n){return new Br().fromBinary(e,n)}static fromJson(e,n){return new Br().fromJson(e,n)}static fromJsonString(e,n){return new Br().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Br,e,n)}};T(Br,"runtime",L),T(Br,"typeName","yorkie.v1.WatchDocumentResponse"),T(Br,"fields",L.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:ua,oneof:"body"},{no:2,name:"event",kind:"message",T:Xs,oneof:"body"}]));let la=Br;const Mr=class Mr extends me{constructor(e){super();T(this,"clientIds",[]);L.util.initPartial(e,this)}static fromBinary(e,n){return new Mr().fromBinary(e,n)}static fromJson(e,n){return new Mr().fromJson(e,n)}static fromJsonString(e,n){return new Mr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Mr,e,n)}};T(Mr,"runtime",L),T(Mr,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),T(Mr,"fields",L.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let ua=Mr;const qr=class qr extends me{constructor(e){super();T(this,"clientId","");T(this,"documentId","");T(this,"changePack");L.util.initPartial(e,this)}static fromBinary(e,n){return new qr().fromBinary(e,n)}static fromJson(e,n){return new qr().fromJson(e,n)}static fromJsonString(e,n){return new qr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(qr,e,n)}};T(qr,"runtime",L),T(qr,"typeName","yorkie.v1.RemoveDocumentRequest"),T(qr,"fields",L.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Qr}]));let ca=qr;const Fr=class Fr extends me{constructor(e){super();T(this,"changePack");L.util.initPartial(e,this)}static fromBinary(e,n){return new Fr().fromBinary(e,n)}static fromJson(e,n){return new Fr().fromJson(e,n)}static fromJsonString(e,n){return new Fr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Fr,e,n)}};T(Fr,"runtime",L),T(Fr,"typeName","yorkie.v1.RemoveDocumentResponse"),T(Fr,"fields",L.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Qr}]));let fa=Fr;const jr=class jr extends me{constructor(e){super();T(this,"clientId","");T(this,"documentId","");T(this,"changePack");T(this,"pushOnly",!1);L.util.initPartial(e,this)}static fromBinary(e,n){return new jr().fromBinary(e,n)}static fromJson(e,n){return new jr().fromJson(e,n)}static fromJsonString(e,n){return new jr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(jr,e,n)}};T(jr,"runtime",L),T(jr,"typeName","yorkie.v1.PushPullChangesRequest"),T(jr,"fields",L.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Qr},{no:4,name:"push_only",kind:"scalar",T:8}]));let ha=jr;const Ur=class Ur extends me{constructor(e){super();T(this,"changePack");L.util.initPartial(e,this)}static fromBinary(e,n){return new Ur().fromBinary(e,n)}static fromJson(e,n){return new Ur().fromJson(e,n)}static fromJsonString(e,n){return new Ur().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Ur,e,n)}};T(Ur,"runtime",L),T(Ur,"typeName","yorkie.v1.PushPullChangesResponse"),T(Ur,"fields",L.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Qr}]));let da=Ur;const Jr=class Jr extends me{constructor(e){super();T(this,"clientId","");T(this,"documentId","");T(this,"topic","");T(this,"payload",new Uint8Array(0));L.util.initPartial(e,this)}static fromBinary(e,n){return new Jr().fromBinary(e,n)}static fromJson(e,n){return new Jr().fromJson(e,n)}static fromJsonString(e,n){return new Jr().fromJsonString(e,n)}static equals(e,n){return L.util.equals(Jr,e,n)}};T(Jr,"runtime",L),T(Jr,"typeName","yorkie.v1.BroadcastRequest"),T(Jr,"fields",L.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let ga=Jr;const $r=class $r extends me{constructor(t){super(),L.util.initPartial(t,this)}static fromBinary(t,e){return new $r().fromBinary(t,e)}static fromJson(t,e){return new $r().fromJson(t,e)}static fromJsonString(t,e){return new $r().fromJsonString(t,e)}static equals(t,e){return L.util.equals($r,t,e)}};T($r,"runtime",L),T($r,"typeName","yorkie.v1.BroadcastResponse"),T($r,"fields",L.util.newFieldList(()=>[]));let pa=$r;const mf={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Qs,O:ea,kind:bt.Unary},deactivateClient:{name:"DeactivateClient",I:ta,O:na,kind:bt.Unary},attachDocument:{name:"AttachDocument",I:ra,O:ia,kind:bt.Unary},detachDocument:{name:"DetachDocument",I:oa,O:sa,kind:bt.Unary},removeDocument:{name:"RemoveDocument",I:ca,O:fa,kind:bt.Unary},pushPullChanges:{name:"PushPullChanges",I:ha,O:da,kind:bt.Unary},watchDocument:{name:"WatchDocument",I:aa,O:la,kind:bt.ServerStreaming},broadcast:{name:"Broadcast",I:ga,O:pa,kind:bt.Unary}}},yf=L.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);L.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:Kr}]);L.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);L.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:vf,repeated:!0}]);const vf=L.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"QuotaFailure_Violation"});L.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:bf,repeated:!0}]);const bf=L.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});L.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:wf,repeated:!0}]);const wf=L.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"BadRequest_FieldViolation"});L.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);L.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);L.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:Af,repeated:!0}]);const Af=L.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"});L.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var te=(i=>(i.Ok="ok",i.ErrClientNotActivated="ErrClientNotActivated",i.ErrClientNotFound="ErrClientNotFound",i.ErrUnimplemented="ErrUnimplemented",i.ErrInvalidType="ErrInvalidType",i.ErrDummy="ErrDummy",i.ErrDocumentNotAttached="ErrDocumentNotAttached",i.ErrDocumentNotDetached="ErrDocumentNotDetached",i.ErrDocumentRemoved="ErrDocumentRemoved",i.ErrInvalidObjectKey="ErrInvalidObjectKey",i.ErrInvalidArgument="ErrInvalidArgument",i.ErrNotInitialized="ErrNotInitialized",i.ErrNotReady="ErrNotReady",i.ErrRefused="ErrRefused",i.ErrContextNotProvided="ErrContextNotProvided",i.ErrPermissionDenied="ErrPermissionDenied",i.ErrUnauthenticated="ErrUnauthenticated",i))(te||{});class ne extends Error{constructor(e,n){super(n);T(this,"name","YorkieError");T(this,"stack");this.code=e,this.message=n,this.toString=()=>`[code=${this.code}]: ${this.message}`}}function sn(i){if(i instanceof Map){const t=Array.from(i);return new Map(JSON.parse(JSON.stringify(t)))}return JSON.parse(JSON.stringify(i))}const uu=i=>i?Object.entries(i).length===0:!0,Yi=i=>{const t={};for(const[e,n]of Object.entries(i))t[e]=JSON.stringify(n);return t},zi=i=>{const t={};for(const[e,n]of Object.entries(i))t[e]=JSON.parse(n);return t};var pi=(i=>(i.Put="put",i.Clear="clear",i))(pi||{});class Fs{constructor(t,e){T(this,"context");T(this,"presence");this.context=t,this.presence=e}set(t,e){for(const n of Object.keys(t))this.presence[n]=t[n];this.context.setPresenceChange({type:"put",presence:sn(this.presence)}),this.context.setReversePresence(t,e)}get(t){return this.presence[t]}clear(){this.presence={},this.context.setPresenceChange({type:"clear"})}}const Is="000000000000000000000000";class Wt{constructor(t,e,n){T(this,"lamport");T(this,"delimiter");T(this,"actorID");this.lamport=t,this.delimiter=e,this.actorID=n}static of(t,e,n){return new Wt(t,e,n)}static fromStruct(t){return Wt.of(BigInt(t.lamport),t.delimiter,t.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(t){return new Wt(this.lamport,this.delimiter,t)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(t){return this.compare(t)>0}equals(t){return this.compare(t)===0}compare(t){if(this.lamport>t.lamport)return 1;if(t.lamport>this.lamport)return-1;const e=this.actorID.localeCompare(t.actorID);return e!==0?e:this.delimiter>t.delimiter?1:t.delimiter>this.delimiter?-1:0}}const cu=0,fo=9223372036854775807n,un=new Wt(0n,cu,Is);function Fn(i){return i.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(t){switch(t){case'"':case"\\":return"\\"+t;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return t}})}class ko{constructor(t){T(this,"createdAt");T(this,"movedAt");T(this,"removedAt");this.createdAt=t}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(t){return!this.movedAt||t&&t.after(this.movedAt)?(this.movedAt=t,!0):!1}setRemovedAt(t){this.removedAt=t}remove(t){return t&&t.after(this.getPositionedAt())&&(!this.removedAt||t.after(this.removedAt))?(this.removedAt=t,!0):!1}isRemoved(){return!!this.removedAt}}class hi extends ko{constructor(t){super(t)}}class Ea{constructor(t,e){T(this,"strKey");T(this,"value");this.strKey=t,this.value=e}static of(t,e){return new Ea(t,e)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(t){return this.value.remove(t)}}class bo{constructor(){T(this,"nodeMapByKey");T(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new bo}set(t,e,n){let r;const o=this.nodeMapByKey.get(t);o!=null&&!o.isRemoved()&&o.remove(n)&&(r=o.getValue());const s=Ea.of(t,e);return this.nodeMapByCreatedAt.set(e.getCreatedAt().toIDString(),s),(o==null||n.after(o.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(t,s),e.setMovedAt(n)),r}delete(t,e){if(!this.nodeMapByCreatedAt.has(t.toIDString()))throw new ne(te.ErrInvalidArgument,`fail to find ${t.toIDString()}`);const n=this.nodeMapByCreatedAt.get(t.toIDString());return n.remove(e),n.getValue()}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return e.getStrKey()}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new ne(te.ErrInvalidArgument,`fail to find ${t.getCreatedAt().toIDString()}`);const n=this.nodeMapByKey.get(e.getStrKey());e===n&&this.nodeMapByKey.delete(n.getStrKey()),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}deleteByKey(t,e){const n=this.nodeMapByKey.get(t);if(n!=null&&n.remove(e))return n.getValue()}has(t){const e=this.nodeMapByKey.get(t);return e==null?!1:!e.isRemoved()}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}get(t){const e=this.nodeMapByKey.get(t);if(!(!e||e.isRemoved()))return e}*[Symbol.iterator](){for(const[,t]of this.nodeMapByKey)yield t}}class xt extends hi{constructor(e,n){super(e);T(this,"memberNodes");this.memberNodes=n}static create(e,n){if(!n)return new xt(e,bo.create());const r=bo.create();for(const[o,s]of Object.entries(n))r.set(o,s.deepcopy(),s.getCreatedAt());return new xt(e,r)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,n,r){return this.memberNodes.set(e,n,r)}delete(e,n){return this.memberNodes.delete(e,n)}deleteByKey(e,n){return this.memberNodes.deleteByKey(e,n)}get(e){const n=this.memberNodes.get(e);return n==null?void 0:n.getValue()}getByID(e){const n=this.memberNodes.getByID(e);return n==null?void 0:n.getValue()}has(e){return this.memberNodes.has(e)}toJSON(){const e=[];for(const[n,r]of this)e.push(`"${Fn(n)}":${r.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[n,r]of this){const{createdAt:o,value:s,type:u}=r.toJSForTest();e[n]={key:n,createdAt:o,value:s,type:u}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[n]of this)e.push(n);return e}toSortedJSON(){var r;const e=Array();for(const[o]of this)e.push(o);const n=[];for(const o of e.sort()){const s=(r=this.memberNodes.get(o))==null?void 0:r.getValue();n.push(`"${Fn(o)}":${s.toSortedJSON()}`)}return`{${n.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=xt.create(this.getCreatedAt());for(const n of this.memberNodes)e.memberNodes.set(n.getStrKey(),n.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const n of this.memberNodes){const r=n.getValue();if(e(r,this))return;r instanceof hi&&r.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const n of this.memberNodes)e.has(n.getStrKey())||(e.add(n.getStrKey()),n.isRemoved()||(yield[n.getStrKey(),n.getValue()]))}}var Ye=(i=>(i.Local="local",i.Remote="remote",i.UndoRedo="undoredo",i))(Ye||{});class fn{constructor(t,e){T(this,"parentCreatedAt");T(this,"executedAt");this.parentCreatedAt=t,this.executedAt=e}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new ne(te.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(t){this.executedAt&&(this.executedAt=this.executedAt.setActor(t))}setExecutedAt(t){this.executedAt=t}}class fu{constructor(t){T(this,"value");T(this,"left");T(this,"right");T(this,"parent");T(this,"weight");this.value=t,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(t){this.left=t}setRight(t){this.right=t}setParent(t){this.parent=t}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(t){this.weight+=t}initWeight(){this.weight=this.getLength()}}class wo{constructor(t){T(this,"root");this.root=t}get length(){return this.root?this.root.getWeight():0}find(t){if(!this.root||t<0)return[void 0,0];let e=this.root;for(;;)if(e.hasLeft()&&t<=e.getLeftWeight())e=e.getLeft();else if(e.hasRight()&&e.getLeftWeight()+e.getLength()<t)t-=e.getLeftWeight()+e.getLength(),e=e.getRight();else{t-=e.getLeftWeight();break}if(t>e.getLength())throw new ne(te.ErrInvalidArgument,`out of index range: pos: ${t} > node.length: ${e.getLength()}`);return this.splayNode(e),[e,t]}indexOf(t){return!t||t!==this.root&&!t.hasLinks()?-1:(this.splayNode(t),this.root.getLeftWeight())}getRoot(){return this.root}insert(t){return this.insertAfter(this.root,t)}insertAfter(t,e){return t?(this.splayNode(t),this.root=e,e.setRight(t.getRight()),t.hasRight()&&t.getRight().setParent(e),e.setLeft(t),t.setParent(e),t.setRight(),this.updateWeight(t),this.updateWeight(e),e):(this.root=e,e)}updateWeight(t){t.initWeight(),t.hasLeft()&&t.increaseWeight(t.getLeftWeight()),t.hasRight()&&t.increaseWeight(t.getRightWeight())}updateTreeWeight(t){for(;t;)this.updateWeight(t),t=t.getParent()}splayNode(t){if(t)for(;;)if(this.isLeftChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t),this.rotateLeft(t);else if(this.isLeftChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t.getParent()),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t.getParent()),this.rotateLeft(t);else{this.isLeftChild(t)?this.rotateRight(t):this.isRightChild(t)&&this.rotateLeft(t),this.updateWeight(t);return}}delete(t){this.splayNode(t);const e=new wo(t.getLeft());e.root&&e.root.setParent();const n=new wo(t.getRight());if(n.root&&n.root.setParent(),e.root){const r=e.getRightmost();e.splayNode(r),e.root.setRight(n.root),n.root&&n.root.setParent(e.root),this.root=e.root}else this.root=n.root;t.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(t,e){if(!e){this.splayNode(t),this.cutOffRight(t);return}this.splayNode(t),this.splayNode(e),e.getLeft()!=t&&this.rotateRight(t),this.cutOffRight(t)}cutOffRight(t){const e=[];this.traversePostorder(t.getRight(),e);for(const n of e)n.initWeight();this.updateTreeWeight(t)}toTestString(){const t=[];return this.traverseInorder(this.root,t),t.map(e=>`[${e.getWeight()},${e.getLength()}]${e.getValue()||""}`).join("")}checkWeight(){const t=[];this.traverseInorder(this.root,t);for(const e of t)if(e.getWeight()!=e.getLength()+e.getLeftWeight()+e.getRightWeight())return!1;return!0}getRightmost(){let t=this.root;for(;t.hasRight();)t=t.getRight();return t}traverseInorder(t,e){t&&(this.traverseInorder(t.getLeft(),e),e.push(t),this.traverseInorder(t.getRight(),e))}traversePostorder(t,e){t&&(this.traversePostorder(t.getLeft(),e),this.traversePostorder(t.getRight(),e),e.push(t))}rotateLeft(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setRight(t.getLeft()),e.hasRight()&&e.getRight().setParent(e),t.setLeft(e),t.getLeft().setParent(t),this.updateWeight(e),this.updateWeight(t)}rotateRight(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setLeft(t.getRight()),e.hasLeft()&&e.getLeft().setParent(e),t.setRight(e),t.getRight().setParent(t),this.updateWeight(e),this.updateWeight(t)}isLeftChild(t){return t&&t.hasParent()?t.getParent().getLeft()===t:!1}isRightChild(t){return t&&t.hasParent()?t.getParent().getRight()===t:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Kt=null;try{Kt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Ve(i,t,e){this.low=i|0,this.high=t|0,this.unsigned=!!e}Ve.prototype.__isLong__;Object.defineProperty(Ve.prototype,"__isLong__",{value:!0});function yt(i){return(i&&i.__isLong__)===!0}function vl(i){var t=Math.clz32(i&-i);return i?31-t:t}Ve.isLong=yt;var bl={},wl={};function Pi(i,t){var e,n,r;return t?(i>>>=0,(r=0<=i&&i<256)&&(n=wl[i],n)?n:(e=Ke(i,0,!0),r&&(wl[i]=e),e)):(i|=0,(r=-128<=i&&i<128)&&(n=bl[i],n)?n:(e=Ke(i,i<0?-1:0,!1),r&&(bl[i]=e),e))}Ve.fromInt=Pi;function Ht(i,t){if(isNaN(i))return t?Wr:an;if(t){if(i<0)return Wr;if(i>=hu)return pu}else{if(i<=-Tl)return Et;if(i+1>=Tl)return gu}return i<0?Ht(-i,t).neg():Ke(i%Zi|0,i/Zi|0,t)}Ve.fromNumber=Ht;function Ke(i,t,e){return new Ve(i,t,e)}Ve.fromBits=Ke;var As=Math.pow;function xa(i,t,e){if(i.length===0)throw Error("empty string");if(typeof t=="number"?(e=t,t=!1):t=!!t,i==="NaN"||i==="Infinity"||i==="+Infinity"||i==="-Infinity")return t?Wr:an;if(e=e||10,e<2||36<e)throw RangeError("radix");var n;if((n=i.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return xa(i.substring(1),t,e).neg();for(var r=Ht(As(e,8)),o=an,s=0;s<i.length;s+=8){var u=Math.min(8,i.length-s),c=parseInt(i.substring(s,s+u),e);if(u<8){var m=Ht(As(e,u));o=o.mul(m).add(Ht(c))}else o=o.mul(r),o=o.add(Ht(c))}return o.unsigned=t,o}Ve.fromString=xa;function hn(i,t){return typeof i=="number"?Ht(i,t):typeof i=="string"?xa(i,t):Ke(i.low,i.high,typeof t=="boolean"?t:i.unsigned)}Ve.fromValue=hn;var Al=65536,Tf=1<<24,Zi=Al*Al,hu=Zi*Zi,Tl=hu/2,Sl=Pi(Tf),an=Pi(0);Ve.ZERO=an;var Wr=Pi(0,!0);Ve.UZERO=Wr;var Ji=Pi(1);Ve.ONE=Ji;var du=Pi(1,!0);Ve.UONE=du;var ma=Pi(-1);Ve.NEG_ONE=ma;var gu=Ke(-1,2147483647,!1);Ve.MAX_VALUE=gu;var pu=Ke(-1,-1,!0);Ve.MAX_UNSIGNED_VALUE=pu;var Et=Ke(0,-2147483648,!1);Ve.MIN_VALUE=Et;var he=Ve.prototype;he.toInt=function(){return this.unsigned?this.low>>>0:this.low};he.toNumber=function(){return this.unsigned?(this.high>>>0)*Zi+(this.low>>>0):this.high*Zi+(this.low>>>0)};he.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Et)){var e=Ht(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var o=Ht(As(t,6),this.unsigned),s=this,u="";;){var c=s.div(o),m=s.sub(c.mul(o)).toInt()>>>0,y=m.toString(t);if(s=c,s.isZero())return y+u;for(;y.length<6;)y="0"+y;u=""+y+u}};he.getHighBits=function(){return this.high};he.getHighBitsUnsigned=function(){return this.high>>>0};he.getLowBits=function(){return this.low};he.getLowBitsUnsigned=function(){return this.low>>>0};he.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Et)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1};he.isZero=function(){return this.high===0&&this.low===0};he.eqz=he.isZero;he.isNegative=function(){return!this.unsigned&&this.high<0};he.isPositive=function(){return this.unsigned||this.high>=0};he.isOdd=function(){return(this.low&1)===1};he.isEven=function(){return(this.low&1)===0};he.equals=function(t){return yt(t)||(t=hn(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};he.eq=he.equals;he.notEquals=function(t){return!this.eq(t)};he.neq=he.notEquals;he.ne=he.notEquals;he.lessThan=function(t){return this.comp(t)<0};he.lt=he.lessThan;he.lessThanOrEqual=function(t){return this.comp(t)<=0};he.lte=he.lessThanOrEqual;he.le=he.lessThanOrEqual;he.greaterThan=function(t){return this.comp(t)>0};he.gt=he.greaterThan;he.greaterThanOrEqual=function(t){return this.comp(t)>=0};he.gte=he.greaterThanOrEqual;he.ge=he.greaterThanOrEqual;he.compare=function(t){if(yt(t)||(t=hn(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};he.comp=he.compare;he.negate=function(){return!this.unsigned&&this.eq(Et)?Et:this.not().add(Ji)};he.neg=he.negate;he.add=function(t){yt(t)||(t=hn(t));var e=this.high>>>16,n=this.high&65535,r=this.low>>>16,o=this.low&65535,s=t.high>>>16,u=t.high&65535,c=t.low>>>16,m=t.low&65535,y=0,f=0,l=0,a=0;return a+=o+m,l+=a>>>16,a&=65535,l+=r+c,f+=l>>>16,l&=65535,f+=n+u,y+=f>>>16,f&=65535,y+=e+s,y&=65535,Ke(l<<16|a,y<<16|f,this.unsigned)};he.subtract=function(t){return yt(t)||(t=hn(t)),this.add(t.neg())};he.sub=he.subtract;he.multiply=function(t){if(this.isZero())return this;if(yt(t)||(t=hn(t)),Kt){var e=Kt.mul(this.low,this.high,t.low,t.high);return Ke(e,Kt.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?Wr:an;if(this.eq(Et))return t.isOdd()?Et:an;if(t.eq(Et))return this.isOdd()?Et:an;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Sl)&&t.lt(Sl))return Ht(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,r=this.high&65535,o=this.low>>>16,s=this.low&65535,u=t.high>>>16,c=t.high&65535,m=t.low>>>16,y=t.low&65535,f=0,l=0,a=0,p=0;return p+=s*y,a+=p>>>16,p&=65535,a+=o*y,l+=a>>>16,a&=65535,a+=s*m,l+=a>>>16,a&=65535,l+=r*y,f+=l>>>16,l&=65535,l+=o*m,f+=l>>>16,l&=65535,l+=s*c,f+=l>>>16,l&=65535,f+=n*y+r*m+o*c+s*u,f&=65535,Ke(a<<16|p,f<<16|l,this.unsigned)};he.mul=he.multiply;he.divide=function(t){if(yt(t)||(t=hn(t)),t.isZero())throw Error("division by zero");if(Kt){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?Kt.div_u:Kt.div_s)(this.low,this.high,t.low,t.high);return Ke(e,Kt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Wr:an;var n,r,o;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Wr;if(t.gt(this.shru(1)))return du;o=Wr}else{if(this.eq(Et)){if(t.eq(Ji)||t.eq(ma))return Et;if(t.eq(Et))return Ji;var s=this.shr(1);return n=s.div(t).shl(1),n.eq(an)?t.isNegative()?Ji:ma:(r=this.sub(t.mul(n)),o=n.add(r.div(t)),o)}else if(t.eq(Et))return this.unsigned?Wr:an;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=an}for(r=this;r.gte(t);){n=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var u=Math.ceil(Math.log(n)/Math.LN2),c=u<=48?1:As(2,u-48),m=Ht(n),y=m.mul(t);y.isNegative()||y.gt(r);)n-=c,m=Ht(n,this.unsigned),y=m.mul(t);m.isZero()&&(m=Ji),o=o.add(m),r=r.sub(y)}return o};he.div=he.divide;he.modulo=function(t){if(yt(t)||(t=hn(t)),Kt){var e=(this.unsigned?Kt.rem_u:Kt.rem_s)(this.low,this.high,t.low,t.high);return Ke(e,Kt.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};he.mod=he.modulo;he.rem=he.modulo;he.not=function(){return Ke(~this.low,~this.high,this.unsigned)};he.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};he.clz=he.countLeadingZeros;he.countTrailingZeros=function(){return this.low?vl(this.low):vl(this.high)+32};he.ctz=he.countTrailingZeros;he.and=function(t){return yt(t)||(t=hn(t)),Ke(this.low&t.low,this.high&t.high,this.unsigned)};he.or=function(t){return yt(t)||(t=hn(t)),Ke(this.low|t.low,this.high|t.high,this.unsigned)};he.xor=function(t){return yt(t)||(t=hn(t)),Ke(this.low^t.low,this.high^t.high,this.unsigned)};he.shiftLeft=function(t){return yt(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Ke(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Ke(0,this.low<<t-32,this.unsigned)};he.shl=he.shiftLeft;he.shiftRight=function(t){return yt(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Ke(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Ke(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};he.shr=he.shiftRight;he.shiftRightUnsigned=function(t){return yt(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Ke(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?Ke(this.high,0,this.unsigned):Ke(this.high>>>t-32,0,this.unsigned)};he.shru=he.shiftRightUnsigned;he.shr_u=he.shiftRightUnsigned;he.rotateLeft=function(t){var e;return yt(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?Ke(this.high,this.low,this.unsigned):t<32?(e=32-t,Ke(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,Ke(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))};he.rotl=he.rotateLeft;he.rotateRight=function(t){var e;return yt(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?Ke(this.high,this.low,this.unsigned):t<32?(e=32-t,Ke(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,Ke(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))};he.rotr=he.rotateRight;he.toSigned=function(){return this.unsigned?Ke(this.low,this.high,!1):this};he.toUnsigned=function(){return this.unsigned?this:Ke(this.low,this.high,!0)};he.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};he.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};he.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};Ve.fromBytes=function(t,e,n){return n?Ve.fromBytesLE(t,e):Ve.fromBytesBE(t,e)};Ve.fromBytesLE=function(t,e){return new Ve(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)};Ve.fromBytesBE=function(t,e){return new Ve(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};var ht=(i=>(i[i.Null=0]="Null",i[i.Boolean=1]="Boolean",i[i.Integer=2]="Integer",i[i.Long=3]="Long",i[i.Double=4]="Double",i[i.String=5]="String",i[i.Bytes=6]="Bytes",i[i.Date=7]="Date",i))(ht||{});class tt extends ko{constructor(e,n){super(n);T(this,"valueType");T(this,"value");this.valueType=tt.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,n){return new tt(e,n)}static valueFromBytes(e,n){switch(e){case 0:return null;case 1:return!!n[0];case 2:return n[0]|n[1]<<8|n[2]<<16|n[3]<<24;case 4:{const r=new DataView(n.buffer);return n.forEach(function(o,s){r.setUint8(s,o)}),r.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(n);case 3:return Ve.fromBytesLE(Array.from(n));case 6:return n;case 7:return new Date(Ve.fromBytesLE(Array.from(n),!0).toNumber());default:throw new ne(te.ErrUnimplemented,`unimplemented type: ${e}`)}}toJSON(){return this.valueType===5?`"${Fn(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=tt.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof Ve)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return tt.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),n}case 5:return new TextEncoder().encode(this.value);case 3:{const n=this.value.toBytesLE();return Uint8Array.from(n)}case 6:return this.value;case 7:{const e=this.value,n=Ve.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(n)}default:throw new ne(te.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class Ts extends fu{constructor(e){super(e);T(this,"prev");T(this,"next");this.value=e}static createAfter(e,n){const r=new Ts(n),o=e.next;return e.next=r,r.prev=e,r.next=o,o&&(o.prev=r),r}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Ao{constructor(){T(this,"dummyHead");T(this,"last");T(this,"nodeMapByIndex");T(this,"nodeMapByCreatedAt");const t=tt.of(0,un);t.setRemovedAt(un),this.dummyHead=new Ts(t),this.last=this.dummyHead,this.nodeMapByIndex=new wo,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Ao}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(t,e){let n=this.nodeMapByCreatedAt.get(t.toIDString());if(!n)throw new ne(te.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);for(;n.getNext()&&n.getNext().getPositionedAt().after(e);)n=n.getNext();return n}release(t){this.last===t&&(this.last=t.getPrev()),t.release(),this.nodeMapByIndex.delete(t),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}insertAfter(t,e,n=e.getCreatedAt()){const r=this.findNextBeforeExecutedAt(t,n),o=Ts.createAfter(r,e);r===this.last&&(this.last=o),this.nodeMapByIndex.insertAfter(r,o),this.nodeMapByCreatedAt.set(o.getCreatedAt().toIDString(),o)}moveAfter(t,e,n){const r=this.nodeMapByCreatedAt.get(t.toIDString());if(!r)throw new ne(te.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);const o=this.nodeMapByCreatedAt.get(e.toIDString());if(!o)throw new ne(te.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);r!==o&&(!o.getValue().getMovedAt()||n.after(o.getValue().getMovedAt()))&&(this.release(o),this.insertAfter(r.getCreatedAt(),o.getValue(),n),o.getValue().setMovedAt(n))}insert(t){this.insertAfter(this.last.getCreatedAt(),t)}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return String(this.nodeMapByIndex.indexOf(e))}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new ne(te.ErrInvalidArgument,`fail to find the given createdAt: ${t.getCreatedAt().toIDString()}`);this.release(e)}getByIndex(t){if(t>=this.length)return;const[e,n]=this.nodeMapByIndex.find(t);let r=e;if(t===0&&e===this.dummyHead||n>0)do r&&(r=r.getNext());while(r&&r.isRemoved());return r}getPrevCreatedAt(t){let e=this.nodeMapByCreatedAt.get(t.toIDString());do e=e.getPrev();while(this.dummyHead!==e&&e.isRemoved());return e.getValue().getCreatedAt()}delete(t,e){const n=this.nodeMapByCreatedAt.get(t.toIDString()),r=n.isRemoved();return n.remove(e)&&!r&&this.nodeMapByIndex.splayNode(n),n.getValue()}deleteByIndex(t,e){const n=this.getByIndex(t);if(n)return n.remove(e)&&this.nodeMapByIndex.splayNode(n),n.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const t=[];for(const e of this){const n=`${e.getCreatedAt().toIDString()}:${e.getValue().toJSON()}`;e.isRemoved()?t.push(`{${n}}`):t.push(`[${n}]`)}return t.join("")}*[Symbol.iterator](){let t=this.dummyHead.getNext();for(;t;)yield t,t=t.getNext()}}class Lt extends hi{constructor(e,n){super(e);T(this,"elements");this.elements=n}static create(e,n){if(!n)return new Lt(e,Ao.create());const r=Ao.create();for(const o of n)r.insertAfter(r.getLastCreatedAt(),o.deepcopy());return new Lt(e,r)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,n){this.elements.insertAfter(e,n)}moveAfter(e,n,r){this.elements.moveAfter(e,n,r)}get(e){const n=this.elements.getByIndex(e);return n==null?void 0:n.getValue()}getByID(e){const n=this.elements.getByID(e);return n==null?void 0:n.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,n){return this.elements.delete(e,n)}deleteByIndex(e,n){return this.elements.deleteByIndex(e,n)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const n of this.elements){const r=n.getValue();if(e(r,this))return;r instanceof hi&&r.getDescendants(e)}}toJSON(){const e=[];for(const n of this)e.push(n.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let n=0;n<this.length;n++){const{createdAt:r,value:o,type:s}=this.get(n).toJSForTest();e[n]={key:String(n),createdAt:r,value:o,type:s}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=Lt.create(this.getCreatedAt());for(const n of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),n.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class mi extends fn{constructor(e,n,r){super(e,r);T(this,"createdAt");this.createdAt=n}static create(e,n,r){return new mi(e,n,r)}execute(e,n){var m;const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new ne(te.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof hi))throw new ne(te.ErrInvalidArgument,`only object and array can execute remove: ${r}`);if(n===Ye.UndoRedo){let y=r.getByID(this.createdAt);for(;y;){if(y.getRemovedAt())return;y=(m=e.findElementPairByCreatedAt(y.getCreatedAt()))==null?void 0:m.parent}}const o=r.subPathOf(this.createdAt),s=this.toReverseOperation(r),u=r.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(u),{opInfos:r instanceof Lt?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(o)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:o}],reverseOp:s}}toReverseOperation(e){if(e instanceof xt){const n=e.subPathOf(this.createdAt);if(n!==void 0){const r=e.get(n);if(r!==void 0)return _i.create(n,r.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class _i extends fn{constructor(e,n,r,o){super(r,o);T(this,"key");T(this,"value");this.key=e,this.value=n}static create(e,n,r,o){return new _i(e,n,r,o)}execute(e,n){var m;const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new ne(te.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof xt))throw new ne(te.ErrInvalidArgument,"fail to execute, only object can execute set");if(n===Ye.UndoRedo){let y=r;for(;y;){if(y.getRemovedAt())return;y=(m=e.findElementPairByCreatedAt(y.getCreatedAt()))==null?void 0:m.parent}}const o=r.get(this.key),s=this.toReverseOperation(o),u=this.value.deepcopy(),c=r.set(this.key,u,this.getExecutedAt());return n===Ye.UndoRedo&&e.findByCreatedAt(u.getCreatedAt())&&e.deregisterElement(u),e.registerElement(u,r),c&&e.registerRemovedElement(c),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:s}}toReverseOperation(e){let n=mi.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(n=_i.create(this.key,e.deepcopy(),this.getParentCreatedAt())),n}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class Oo extends fn{constructor(e,n,r,o){super(e,o);T(this,"prevCreatedAt");T(this,"value");this.prevCreatedAt=n,this.value=r}static create(e,n,r,o){return new Oo(e,n,r,o)}execute(e){const n=e.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new ne(te.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof Lt))throw new ne(te.ErrInvalidArgument,"fail to execute, only array can execute add");const r=n,o=this.value.deepcopy();return r.insertAfter(this.prevCreatedAt,o),e.registerElement(o,r),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(r.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class ci extends fn{constructor(e,n,r,o){super(e,o);T(this,"prevCreatedAt");T(this,"createdAt");this.prevCreatedAt=n,this.createdAt=r}static create(e,n,r,o){return new ci(e,n,r,o)}execute(e){const n=e.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new ne(te.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof Lt))throw new ne(te.ErrInvalidArgument,"fail to execute, only array can execute move");const r=n,o=Number(r.subPathOf(this.createdAt));r.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const s=Number(r.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:s,previousIndex:o}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class xi{constructor(t,e,n,r){T(this,"key");T(this,"value");T(this,"updatedAt");T(this,"_isRemoved");this.key=t,this.value=e,this.updatedAt=n,this._isRemoved=r}static of(t,e,n,r){return new xi(t,e,n,r)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}}class Xr{constructor(){T(this,"nodeMapByKey");T(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Xr}getNodeMapByKey(){return this.nodeMapByKey}set(t,e,n){const r=this.nodeMapByKey.get(t);if(r&&r.isRemoved()&&n.after(r.getUpdatedAt())&&(this.numberOfRemovedElement-=1),r===void 0||n.after(r.getUpdatedAt())){const o=xi.of(t,e,n,!1);return this.nodeMapByKey.set(t,o),r!==void 0&&r.isRemoved()?[r,o]:[void 0,o]}return r.isRemoved()?[r,void 0]:[void 0,void 0]}setInternal(t,e,n,r){const o=xi.of(t,e,n,r);this.nodeMapByKey.set(t,o),r&&this.numberOfRemovedElement++}remove(t,e){const n=this.nodeMapByKey.get(t),r=[];if(n===void 0||e.after(n.getUpdatedAt())){if(n===void 0){this.numberOfRemovedElement+=1;const u=xi.of(t,"",e,!0);return this.nodeMapByKey.set(t,u),r.push(u),r}const o=n.isRemoved();o||(this.numberOfRemovedElement+=1),o&&r.push(n);const s=xi.of(t,n.getValue(),e,!0);return this.nodeMapByKey.set(t,s),r.push(s),r}return r}has(t){if(this.nodeMapByKey.has(t)){const e=this.nodeMapByKey.get(t);return e!==void 0&&!e.isRemoved()}return!1}get(t){if(this.nodeMapByKey.has(t))return this.nodeMapByKey.get(t).getValue()}deepcopy(){const t=new Xr;for(const[,e]of this.nodeMapByKey)t.setInternal(e.getKey(),e.getValue(),e.getUpdatedAt(),e.isRemoved());return t}toJSON(){if(!this.size())return"{}";const t=[];for(const[e,n]of this.nodeMapByKey)n.isRemoved()||t.push(`"${Fn(e)}":"${Fn(n.getValue())}"`);return`{${t.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const t={};for(const[e,n]of this.nodeMapByKey)n.isRemoved()||(t[e]=n.getValue());return t}*[Symbol.iterator](){for(const[,t]of this.nodeMapByKey)yield t}purge(t){const e=this.nodeMapByKey.get(t.getKey());e==null||e.toIDString()!=t.toIDString()||(this.nodeMapByKey.delete(t.getKey()),this.numberOfRemovedElement--)}}class To{constructor(t){T(this,"attributes");T(this,"content");this.attributes=Xr.create(),this.content=t}static create(t){return new To(t)}get length(){return this.content.length}substring(t,e){const n=new To(this.content.substring(t,e));return n.attributes=this.attributes.deepcopy(),n}setAttr(t,e,n){return this.attributes.set(t,e,n)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const t=Fn(this.content),e=this.attributes.toObject(),n=[];for(const[r,o]of Object.entries(e)){const s=JSON.parse(o),u=typeof s=="string"?`"${Fn(r)}":"${Fn(s)}"`:`"${Fn(r)}":${String(s)}`;n.push(u)}return n.sort(),n.length===0?`{"val":"${t}"}`:`{"attrs":{${n.join(",")}},"val":"${t}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(t){this.attributes&&t instanceof xi&&this.attributes.purge(t)}getGCPairs(){const t=[];for(const e of this.attributes)e.getRemovedAt()&&t.push({parent:this,child:e});return t}}class Gt extends ko{constructor(e,n){super(n);T(this,"rgaTreeSplit");this.rgaTreeSplit=e}static create(e,n){return new Gt(e,n)}edit(e,n,r,o,s,u){const c=n?To.create(n):void 0;if(c&&o)for(const[p,b]of Object.entries(o))c.setAttr(p,b,r);const[m,y,f,l]=this.rgaTreeSplit.edit(e,r,c,s,u),a=l.map(p=>({...p,value:p.value?{attributes:zi(p.value.getAttributes()),content:p.value.getContent()}:{attributes:void 0,content:""},type:"content"}));return[y,a,f,[m,m]]}setStyle(e,n,r,o,s){const[,u]=this.rgaTreeSplit.findNodeWithSplit(e[1],r),[,c]=this.rgaTreeSplit.findNodeWithSplit(e[0],r),m=[],y=this.rgaTreeSplit.findBetween(c,u),f=new Map,l=[];for(const p of y){const b=p.getCreatedAt().getActorID();let w,v=0n;if(s===void 0&&o===void 0?v=fo:s.size()>0?v=s.get(b)?s.get(b):0n:w=o.has(b)?o.get(b):un,p.canStyle(r,w,v)){const h=f.get(b),g=p.getCreatedAt();(!h||g.after(h))&&f.set(b,g),l.push(p)}}const a=[];for(const p of l){if(p.isRemoved())continue;const[b,w]=this.rgaTreeSplit.findIndexesFromRange(p.createPosRange());m.push({type:"style",actor:r.getActorID(),from:b,to:w,value:{attributes:zi(n)}});for(const[v,h]of Object.entries(n)){const[g]=p.getValue().setAttr(v,h,r);g!==void 0&&a.push({parent:p.getValue(),child:g})}}return[f,a,m]}indexRangeToPosRange(e,n){const r=this.rgaTreeSplit.indexToPos(e);return e===n?[r,r]:[r,this.rgaTreeSplit.indexToPos(n)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}toJSON(){const e=[];for(const n of this.rgaTreeSplit)n.isRemoved()||e.push(n.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const n of this.rgaTreeSplit)if(!n.isRemoved()){const r=n.getValue();e.push({attributes:zi(r.getAttributes()),content:r.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new Gt(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const n of this.rgaTreeSplit){n.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:n});for(const r of n.getValue().getGCPairs())e.push(r)}return e}}class Io extends fn{constructor(e,n,r,o,s,u,c){super(e,c);T(this,"fromPos");T(this,"toPos");T(this,"maxCreatedAtMapByActor");T(this,"content");T(this,"attributes");this.fromPos=n,this.toPos=r,this.maxCreatedAtMapByActor=o,this.content=s,this.attributes=u}static create(e,n,r,o,s,u,c){return new Io(e,n,r,o,s,u,c)}execute(e,n,r){const o=e.findByCreatedAt(this.getParentCreatedAt());if(!o)throw new ne(te.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(o instanceof Gt))throw new ne(te.ErrInvalidArgument,"fail to execute, only Text can execute edit");const s=o,[,u,c]=s.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor,r);for(const m of c)e.registerGCPair(m);return{opInfos:u.map(({from:m,to:y,value:f})=>({type:"edit",from:m,to:y,value:f,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),n=this.fromPos.toTestString(),r=this.toPos.toTestString(),o=this.content;return`${e}.EDIT(${n},${r},${o})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class No extends fn{constructor(e,n,r,o,s,u){super(e,u);T(this,"fromPos");T(this,"toPos");T(this,"maxCreatedAtMapByActor");T(this,"attributes");this.fromPos=n,this.toPos=r,this.maxCreatedAtMapByActor=o,this.attributes=s}static create(e,n,r,o,s,u){return new No(e,n,r,o,s,u)}execute(e,n,r){const o=e.findByCreatedAt(this.getParentCreatedAt());if(!o)throw new ne(te.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(o instanceof Gt))throw new ne(te.ErrInvalidArgument,"fail to execute, only Text can execute edit");const s=o,[,u,c]=s.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor,r);for(const m of u)e.registerGCPair(m);return{opInfos:c.map(({from:m,to:y,value:f})=>({type:"style",from:m,to:y,value:f,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),n=this.fromPos.toTestString(),r=this.toPos.toTestString(),o=this.attributes;return`${e}.STYL(${n},${r},${JSON.stringify(o)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const Sf=2,Ef="root",Gr="text";function so(i,t){let e=0;const n=i.children;for(let r=0;r<t;r++){const o=n[r];!o||o.isRemoved||(e+=o.paddedSize)}return e}class xf{constructor(t,e=[]){T(this,"type");T(this,"parent");T(this,"_children");T(this,"size");if(this.type=t,this.size=0,this._children=e,this.isText&&this._children.length>0)throw new ne(te.ErrRefused,"Text node cannot have children")}updateAncestorsSize(){let t=this.parent;const e=this.isRemoved?-1:1;for(;t&&(t.size+=this.paddedSize*e,!t.isRemoved);)t=t.parent}updateDescendantsSize(){let t=0;for(const e of this._children){const n=e.updateDescendantsSize();e.isRemoved||(t+=n)}return this.size+=t,this.paddedSize}get isText(){return this.type===Gr}get paddedSize(){return this.size+(this.isText?0:Sf)}isAncestorOf(t){return kf(this,t)}get nextSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t+1];if(e)return e}get prevSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t-1];if(e)return e}splitText(t,e){if(t===0||t===this.size)return;const n=this.value.slice(0,t),r=this.value.slice(t);if(!r.length)return;this.value=n;const o=this.cloneText(t+e);return o.value=r,this.parent.insertAfterInternal(o,this),o}get children(){return this._children.filter(t=>!t.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(t=>t.isText)}append(...t){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");this._children.push(...t);for(const e of t)e.parent=this,e.updateAncestorsSize()}prepend(...t){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");this._children.unshift(...t);for(const e of t)e.parent=this}insertBefore(t,e){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");const n=this._children.indexOf(e);if(n===-1)throw new ne(te.ErrInvalidArgument,"child not found");this.insertAtInternal(t,n),t.updateAncestorsSize()}insertAfter(t,e){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");const n=this._children.indexOf(e);if(n===-1)throw new ne(te.ErrInvalidArgument,"child not found");this.insertAtInternal(t,n+1),t.updateAncestorsSize()}insertAt(t,e){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");this.insertAtInternal(t,e),t.updateAncestorsSize()}removeChild(t){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");const e=this._children.indexOf(t);if(e===-1)throw new ne(te.ErrInvalidArgument,"child not found");this._children.splice(e,1),t.parent=void 0}splitElement(t,e){const n=this.cloneElement(e);this.parent.insertAfterInternal(n,this),n.updateAncestorsSize();const r=this.children.slice(0,t),o=this.children.slice(t);this._children=r,n._children=o,this.size=this._children.reduce((s,u)=>s+u.paddedSize,0),n.size=n._children.reduce((s,u)=>s+u.paddedSize,0);for(const s of n._children)s.parent=n;return n}insertAfterInternal(t,e){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");const n=this._children.indexOf(e);if(n===-1)throw new ne(te.ErrInvalidArgument,"child not found");this.insertAtInternal(t,n+1)}insertAtInternal(t,e){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");this._children.splice(e,0,t),t.parent=this}findOffset(t){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");if(t.isRemoved){const e=this._children.indexOf(t);return this.allChildren.splice(0,e).filter(r=>!r.isRemoved).length}return this.children.indexOf(t)}findBranchOffset(t){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");let e=t;for(;e;){const n=this._children.indexOf(e);if(n!==-1)return n;e=e.parent}return-1}}function kf(i,t){if(i===t)return!1;for(;t.parent;){if(t.parent===i)return!0;t=t.parent}return!1}var ct=(i=>(i.Start="Start",i.End="End",i.Text="Text",i))(ct||{});function mu(i,t,e,n){if(t>e)throw new ne(te.ErrInvalidArgument,`from is greater than to: ${t} > ${e}`);if(t>i.size)throw new ne(te.ErrInvalidArgument,`from is out of range: ${t} > ${i.size}`);if(e>i.size)throw new ne(te.ErrInvalidArgument,`to is out of range: ${e} > ${i.size}`);if(t===e)return;let r=0;for(const o of i.children){if(t-o.paddedSize<r&&r<e){const s=o.isText?t-r:t-r-1,u=o.isText?e-r:e-r-1,c=!o.isText&&s<0,m=!o.isText&&u>o.size;(o.isText||c)&&n([o,o.isText?"Text":"Start"],m),mu(o,Math.max(0,s),Math.min(u,o.size),n),m&&n([o,"End"],m)}r+=o.paddedSize}}function yu(i,t,e=0){for(const n of i.children)yu(n,t,e+1);t(i,e)}function Ns(i,t,e=0){for(const n of i._children)Ns(n,t,e+1);t(i,e)}function ya(i,t,e=!0){if(t>i.size)throw new ne(te.ErrInvalidArgument,`index is out of range: ${t} > ${i.size}`);if(i.isText)return{node:i,offset:t};let n=0,r=0;for(const o of i.children){if(e&&o.isText&&o.size>=t-r)return ya(o,t-r,e);if(t===r)return{node:i,offset:n};if(!e&&o.paddedSize===t-r)return{node:i,offset:n+1};if(o.paddedSize>t-r)return ya(o,t-r-1,e);r+=o.paddedSize,n+=1}return{node:i,offset:n}}function vu(i){return i.isText||i.children.length===0?i:vu(i.children[0])}function Of(i,t){if(i.size<t)throw new ne(te.ErrInvalidArgument,"unacceptable path");for(let e=0;e<i.children.length;e++){const n=i.children[e];if(n.size<t)t-=n.size;else{i=n;break}}return{node:i,offset:t}}class If{constructor(t){T(this,"root");this.root=t}tokensBetween(t,e,n){mu(this.root,t,e,n)}traverse(t){yu(this.root,t,0)}traverseAll(t){Ns(this.root,t,0)}findTreePos(t,e=!0){return ya(this.root,t,e)}treePosToPath(t){const e=[];let n=t.node;if(n.isText){const r=n.parent.findOffset(n);if(r===-1)throw new ne(te.ErrInvalidArgument,"invalid treePos");const o=so(n.parent,r);e.push(o+t.offset),n=n.parent}else if(n.hasTextChild()){const r=so(n,t.offset);e.push(r)}else e.push(t.offset);for(;n.parent;){const r=n.parent.findOffset(n);if(r===-1)throw new ne(te.ErrInvalidArgument,"invalid treePos");e.push(r),n=n.parent}return e.reverse()}pathToIndex(t){const e=this.pathToTreePos(t);return this.indexOf(e)}pathToTreePos(t){if(!t.length)throw new ne(te.ErrInvalidArgument,"unacceptable path");let e=this.root;for(let n=0;n<t.length-1;n++){const r=t[n];if(e=e.children[r],!e)throw new ne(te.ErrInvalidArgument,"unacceptable path")}if(e.hasTextChild())return Of(e,t[t.length-1]);if(e.children.length<t[t.length-1])throw new ne(te.ErrInvalidArgument,"unacceptable path");return{node:e,offset:t[t.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(t){const{node:e,offset:n}=t;if(e.isText){if(e.size===n){const r=e.nextSibling;return r||e.parent}return e}return e.children.length===n?e:vu(e.children[n])}indexOf(t){let{node:e}=t;const{offset:n}=t;let r=0,o=1;if(e.isText){r+=n;const s=e.parent,u=s.findOffset(e);if(u===-1)throw new ne(te.ErrInvalidArgument,"invalid pos");r+=so(s,u),e=e.parent}else r+=so(e,n);for(;e!=null&&e.parent;){const s=e.parent,u=s.findOffset(e);if(u===-1)throw new ne(te.ErrInvalidArgument,"invalid pos");r+=so(s,u),o++,e=e.parent}return r+o-1}indexToPath(t){const e=this.findTreePos(t);return this.treePosToPath(e)}}const Nf=(i,t)=>i===t?0:i<t?-1:1;class _f{constructor(t,e,n){T(this,"key");T(this,"value");T(this,"parent");T(this,"left");T(this,"right");T(this,"isRed");this.key=t,this.value=e,this.isRed=n}}class Pf{constructor(t){T(this,"stack");this.stack=[],this.traverseInorder(t)}traverseInorder(t){t&&(this.traverseInorder(t.left),this.stack.push({key:t.key,value:t.value}),this.traverseInorder(t.right))}}class bu{constructor(t){T(this,"root");T(this,"comparator");T(this,"counter");this.comparator=typeof t<"u"?t:Nf,this.counter=0}put(t,e){return this.root=this.putInternal(t,e,this.root),this.root.isRed=!1,e}get(t){const e=this.getInternal(t,this.root);return e?e.value:void 0}remove(t){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,t),this.root&&(this.root.isRed=!1)}getIterator(){return new Pf(this.root)}values(){const t=[];for(const e of this.getIterator().stack)t.push(e.value);return t}floorEntry(t){let e=this.root;for(;e;){const n=this.comparator(t,e.key);if(n>0)if(e.right)e.right.parent=e,e=e.right;else return e;else if(n<0)if(e.left)e.left.parent=e,e=e.left;else{let r=e.parent,o=e;for(;r&&o===r.left;)o=r,r=r.parent;return r}else return e}}lastEntry(){if(!this.root)return this.root;let t=this.root;for(;t.right;)t=t.right;return t}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(t,e){for(;e;){const n=this.comparator(t,e.key);if(n===0)return e;n<0?e=e.left:n>0&&(e=e.right)}}putInternal(t,e,n){if(!n)return this.counter+=1,new _f(t,e,!0);const r=this.comparator(t,n.key);return r<0?n.left=this.putInternal(t,e,n.left):r>0?n.right=this.putInternal(t,e,n.right):n.value=e,this.isRed(n.right)&&!this.isRed(n.left)&&(n=this.rotateLeft(n)),this.isRed(n.left)&&this.isRed(n.left.left)&&(n=this.rotateRight(n)),this.isRed(n.left)&&this.isRed(n.right)&&this.flipColors(n),n}removeInternal(t,e){if(this.comparator(e,t.key)<0)!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeInternal(t.left,e);else{if(this.isRed(t.left)&&(t=this.rotateRight(t)),this.comparator(e,t.key)===0&&!t.right){this.counter-=1;return}if(!this.isRed(t.right)&&!this.isRed(t.right.left)&&(t=this.moveRedRight(t)),this.comparator(e,t.key)===0){this.counter-=1;const n=this.min(t.right);t.value=n.value,t.key=n.key,t.right=this.removeMin(t.right)}else t.right=this.removeInternal(t.right,e)}return this.fixUp(t)}min(t){return t.left?this.min(t.left):t}removeMin(t){if(t.left)return!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeMin(t.left),this.fixUp(t)}fixUp(t){return this.isRed(t.right)&&(t=this.rotateLeft(t)),this.isRed(t.left)&&this.isRed(t.left.left)&&(t=this.rotateRight(t)),this.isRed(t.left)&&this.isRed(t.right)&&this.flipColors(t),t}moveRedLeft(t){return this.flipColors(t),this.isRed(t.right.left)&&(t.right=this.rotateRight(t.right),t=this.rotateLeft(t),this.flipColors(t)),t}moveRedRight(t){return this.flipColors(t),this.isRed(t.left.left)&&(t=this.rotateRight(t),this.flipColors(t)),t}isRed(t){return t&&t.isRed}rotateLeft(t){const e=t.right;return t.right=e.left,e.left=t,e.isRed=e.left.isRed,e.left.isRed=!0,e}rotateRight(t){const e=t.left;return t.left=e.right,e.right=t,e.isRed=e.right.isRed,e.right.isRed=!0,e}flipColors(t){t.isRed=!t.isRed,t.left.isRed=!t.left.isRed,t.right.isRed=!t.right.isRed}}class ln{constructor(t,e){T(this,"parentID");T(this,"leftSiblingID");this.parentID=t,this.leftSiblingID=e}static of(t,e){return new ln(t,e)}static fromTreePos(t){const{offset:e}=t;let{node:n}=t,r;return n.isText?(n.parent.children[0]===n&&e===0?r=n.parent:r=n,n=n.parent):e===0?r=n:r=n.children[e-1],ln.of(n.id,pt.of(r.getCreatedAt(),r.getOffset()+e))}getParentID(){return this.parentID}static fromStruct(t){return ln.of(pt.of(Wt.fromStruct(t.parentID.createdAt),t.parentID.offset),pt.of(Wt.fromStruct(t.leftSiblingID.createdAt),t.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(t){const e=this.getParentID(),n=this.getLeftSiblingID(),r=t.findFloorNode(e);let o=t.findFloorNode(n);if(!r||!o)throw new ne(te.ErrRefused,`cannot find node of CRDTTreePos(${e.toTestString()}, ${n.toTestString()})`);return!n.equals(e)&&n.getOffset()>0&&n.getOffset()===o.id.getOffset()&&o.insPrevID&&(o=t.findFloorNode(o.insPrevID)),[r,o]}getLeftSiblingID(){return this.leftSiblingID}equals(t){return this.getParentID().getCreatedAt().equals(t.getParentID().getCreatedAt())&&this.getParentID().getOffset()===t.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(t.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===t.getLeftSiblingID().getOffset()}}class pt{constructor(t,e){T(this,"createdAt");T(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new pt(t,e)}static fromStruct(t){return pt.of(Wt.fromStruct(t.createdAt),t.offset)}static createComparator(){return(t,e)=>{const n=t.getCreatedAt().compare(e.getCreatedAt());return n!==0?n:t.getOffset()>e.getOffset()?1:t.getOffset()<e.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}getOffset(){return this.offset}setOffset(t){this.offset=t}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class Ct extends xf{constructor(e,n,r,o,s){super(n);T(this,"id");T(this,"removedAt");T(this,"attrs");T(this,"insPrevID");T(this,"insNextID");T(this,"_value","");this.id=e,this.removedAt=s,o&&(this.attrs=o),typeof r=="string"?this.value=r:Array.isArray(r)&&(this._children=r)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,n,r,o){return new Ct(e,n,r,o)}deepcopy(){var n;const e=new Ct(this.id,this.type);return e.removedAt=this.removedAt,e._value=this._value,e.size=this.size,e.attrs=(n=this.attrs)==null?void 0:n.deepcopy(),e._children=this._children.map(r=>{const o=r.deepcopy();return o.parent=e,o}),e.insPrevID=this.insPrevID,e.insNextID=this.insNextID,e}get value(){if(!this.isText)throw new ne(te.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new ne(te.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const n=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),n&&this.updateAncestorsSize()}cloneText(e){return new Ct(pt.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new Ct(pt.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,n,r){const o=this.isText?this.splitText(n,this.id.getOffset()):this.splitElement(n,r);if(o){if(o.insPrevID=this.id,this.insNextID){const s=e.findFloorNode(this.insNextID);s.insPrevID=o.id,o.insNextID=this.insNextID}this.insNextID=o.id,e.registerNode(o)}return o}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,n,r){return(n?!this.getCreatedAt().after(n):this.getCreatedAt().getLamport()<=r)&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,n,r){return this.isText?!1:(n?!this.getCreatedAt().after(n):this.getCreatedAt().getLamport()<=r)&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,n){this.attrs||(this.attrs=new Xr);const r=[];for(const[o,s]of Object.entries(e))r.push(this.attrs.set(o,s,n));return r}purge(e){this.attrs&&this.attrs.purge(e)}getGCPairs(){const e=[];if(!this.attrs)return e;for(const n of this.attrs)n.getRemovedAt()&&e.push({parent:this,child:n});return e}}function va(i){var e;if(i.isText){const n=i;return{type:n.type,value:n.value}}const t={type:i.type,children:i.children.map(va)};return i.attrs&&(t.attributes=zi((e=i.attrs)==null?void 0:e.toObject())),t}function ka(i){if(i.isText)return i.value;let t="";return i.attrs&&i.attrs.size()&&(t=" "+Array.from(i.attrs).filter(e=>!e.isRemoved()).sort((e,n)=>e.getKey().localeCompare(n.getKey())).map(e=>{const n=JSON.parse(e.getValue());return typeof n=="string"?`${e.getKey()}="${n}"`:`${e.getKey()}="${Fn(e.getValue())}"`}).join(" ")),`<${i.type}${t}>${i.children.map(e=>ka(e)).join("")}</${i.type}>`}function wu(i){if(i.isText){const t=i;return{type:t.type,value:t.value,size:t.size,isRemoved:t.isRemoved}}return{type:i.type,children:i.children.map(wu),size:i.size,isRemoved:i.isRemoved}}class Yt extends ko{constructor(e,n){super(n);T(this,"indexTree");T(this,"nodeMapByID");this.indexTree=new If(e),this.nodeMapByID=new bu(pt.createComparator()),this.indexTree.traverseAll(r=>{this.nodeMapByID.put(r.id,r)})}static create(e,n){return new Yt(e,n)}findFloorNode(e){const n=this.nodeMapByID.floorEntry(e);if(!(!n||!n.key.getCreatedAt().equals(e.getCreatedAt())))return n.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,n){const[r,o]=e.toTreeNodePair(this);let s=o;const u=r===s,c=s.parent&&!u?s.parent:r;if(s.isText&&s.split(this,e.getLeftSiblingID().getOffset()-s.id.getOffset()),n){const m=c.allChildren,y=u?0:m.indexOf(s)+1;for(let f=y;f<m.length;f++){const l=m[f];if(!l.id.getCreatedAt().after(n))break;s=l}}return[c,s]}style(e,n,r,o,s){const[u,c]=this.findNodesAndSplitText(e[0],r),[m,y]=this.findNodesAndSplitText(e[1],r),f=[],l=n?zi(n):{},a=new Map,p=[];return this.traverseInPosRange(u,c,m,y,([b])=>{const w=b.getCreatedAt().getActorID();let v,h=0n;if(s===void 0&&o===void 0?h=fo:s.size()>0?h=s.get(w)?s.get(w):0n:v=o.has(w)?o.get(w):un,b.canStyle(r,v,h)&&n){const g=a.get(w),d=b.getCreatedAt();(!g||d.after(g))&&a.set(w,d);const A=b.setAttrs(n,r),S=A.reduce((_,[,k])=>(k&&(_[k.getKey()]=l[k.getKey()]),_),{}),E=b.parent,O=b.prevSibling||b.parent;Object.keys(S).length>0&&f.push({type:"style",from:this.toIndex(E,O),to:this.toIndex(b,b),fromPath:this.toPath(E,O),toPath:this.toPath(b,b),actor:r.getActorID(),value:S});for(const[_]of A)_&&p.push({parent:b,child:_})}}),[a,p,f]}removeStyle(e,n,r,o,s){const[u,c]=this.findNodesAndSplitText(e[0],r),[m,y]=this.findNodesAndSplitText(e[1],r),f=[],l=new Map,a=[];return this.traverseInPosRange(u,c,m,y,([p])=>{const b=p.getCreatedAt().getActorID();let w,v=0n;if(s===void 0&&o===void 0?v=fo:s.size()>0?v=s.get(b)?s.get(b):0n:w=o.has(b)?o.get(b):un,p.canStyle(r,w,v)&&n){const h=l.get(b),g=p.getCreatedAt();(!h||g.after(h))&&l.set(b,g),p.attrs||(p.attrs=new Xr);for(const S of n){const E=p.attrs.remove(S,r);for(const O of E)a.push({parent:p,child:O})}const d=p.parent,A=p.prevSibling||p.parent;f.push({actor:r.getActorID(),type:"removeStyle",from:this.toIndex(d,A),to:this.toIndex(p,p),fromPath:this.toPath(d,A),toPath:this.toPath(p,p),value:n})}}),[l,a,f]}edit(e,n,r,o,s,u,c){const[m,y]=this.findNodesAndSplitText(e[0],o),[f,l]=this.findNodesAndSplitText(e[1],o),a=this.toIndex(m,y),p=this.toPath(m,y),b=[],w=[],v=[],h=new Map;this.traverseInPosRange(m,y,f,l,([A,S],E)=>{if(S===ct.Start&&!E)for(const x of A.children)v.push(x);const O=A.getCreatedAt().getActorID();let _,k=0n;if(c===void 0&&u===void 0?k=fo:c.size()>0?k=c.get(O)?c.get(O):0n:_=u.has(O)?u.get(O):un,A.canDelete(o,_,k)||b.includes(A.parent)){const x=h.get(O),I=A.getCreatedAt();(!x||I.after(x))&&h.set(O,I),(S===ct.Text||S===ct.Start)&&b.push(A),w.push([A,S])}});const g=this.makeDeletionChanges(w,o),d=[];for(const A of b)A.remove(o),A.isRemoved&&d.push({parent:this,child:A});for(const A of v)A.removedAt||m.append(A);if(r>0){let A=0,S=m,E=y;for(;A<r;)S.split(this,S.findOffset(E)+1,s),E=S,S=S.parent,A++;g.push({type:"content",from:a,to:a,fromPath:p,toPath:p,actor:o.getActorID()})}if(n!=null&&n.length){const A=[];let S=y;for(const E of n)S===m?m.insertAt(E,0):m.insertAfter(E,S),S=E,Ns(E,O=>{m.isRemoved&&(O.remove(o),d.push({parent:this,child:O})),this.nodeMapByID.put(O.id,O)}),E.isRemoved||A.push(E);if(A.length){const E=A.map(O=>va(O));g.length&&g[g.length-1].from===a?g[g.length-1].value=E:g.push({type:"content",from:a,to:a,fromPath:p,toPath:p,actor:o.getActorID(),value:E})}}return[g,d,h]}editT(e,n,r,o,s){const u=this.findPos(e[0]),c=this.findPos(e[1]);this.edit([u,c],n,r,o,s)}move(e,n,r){throw new ne(te.ErrUnimplemented,`not implemented: ${e}, ${n}, ${r}`)}purge(e){var o;(o=e.parent)==null||o.removeChild(e),this.nodeMapByID.remove(e.id);const n=e.insPrevID,r=e.insNextID;if(n){const s=this.findFloorNode(n);s.insNextID=r}if(r){const s=this.findFloorNode(r);s.insPrevID=n}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(n=>{n.getRemovedAt()&&e.push({parent:this,child:n});for(const r of n.getGCPairs())e.push(r)}),e}findPos(e,n=!0){const r=this.indexTree.findTreePos(e,n);return ln.fromTreePos(r)}pathToPosRange(e){const n=this.pathToIndex(e);return[this.findPos(n),this.findPos(n+1)]}pathToPos(e){const n=this.indexTree.pathToIndex(e);return this.findPos(n)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return ka(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),n=(r,o=void 0,s=void 0,u=0)=>{var a,p,b,w;let c,m,y;const f=r.isText?{node:r,offset:0}:o&&s?this.toTreePos(o,s):null;f&&(c=this.indexTree.indexOf(f),m=this.indexTree.treePosToPath(f),y=ln.fromTreePos(f).toStruct());const l={type:r.type,parent:o==null?void 0:o.id.toTestString(),size:r.size,id:r.id.toTestString(),removedAt:(a=r.removedAt)==null?void 0:a.toTestString(),insPrev:(p=r.insPrevID)==null?void 0:p.toTestString(),insNext:(b=r.insNextID)==null?void 0:b.toTestString(),value:r.isText?r.value:void 0,isRemoved:r.isRemoved,children:[],depth:u,attributes:r.attrs?zi((w=r.attrs)==null?void 0:w.toObject()):void 0,index:c,path:m,pos:y};for(let v=0;v<r.allChildren.length;v++){const h=v===0?r:r.allChildren[v-1];l.children.push(n(r.allChildren[v],r,h,u+1))}return l};return n(e)}getRootTreeNode(){return va(this.indexTree.getRoot())}toTestTreeNode(){return wu(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new Yt(e.deepcopy(),this.getCreatedAt())}toPath(e,n){const r=this.toTreePos(e,n);return r?this.indexTree.treePosToPath(r):[]}toIndex(e,n){const r=this.toTreePos(e,n);return r?this.indexTree.indexOf(r):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const n=this.findPos(e[0]);return e[0]===e[1]?[n,n]:[n,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[n,r]=e,o=this.findPos(n);return n===r?[o.toStruct(),o.toStruct()]:[o.toStruct(),this.findPos(r).toStruct()]}posRangeToPathRange(e){const[n,r]=this.findNodesAndSplitText(e[0]),[o,s]=this.findNodesAndSplitText(e[1]);return[this.toPath(n,r),this.toPath(o,s)]}posRangeToIndexRange(e){const[n,r]=this.findNodesAndSplitText(e[0]),[o,s]=this.findNodesAndSplitText(e[1]);return[this.toIndex(n,r),this.toIndex(o,s)]}traverseInPosRange(e,n,r,o,s){const u=this.toIndex(e,n),c=this.toIndex(r,o);return this.indexTree.tokensBetween(u,c,s)}toTreePos(e,n){if(!e||!n)return;if(e.isRemoved){let o;for(;e.isRemoved;)o=e,e=o.parent;const s=e.findOffset(o);return{node:e,offset:s}}if(e===n)return{node:e,offset:0};let r=e.findOffset(n);if(!n.isRemoved){if(n.isText)return{node:n,offset:n.paddedSize};r++}return{node:e,offset:r}}makeDeletionChanges(e,n){const r=[],o=[];let s=null,u=null;for(let c=0;c<e.length;c++){const m=e[c],y=e[c+1];s||(s=m),u=m;const f=this.findRightToken(m);(!f||!y||f[0]!==y[0]||f[1]!==y[1])&&(o.push([s,u]),s=null,u=null)}for(const c of o){const[m,y]=c,[f,l]=this.findLeftToken(m),[a,p]=y,b=l===ct.Start?f:f.parent,w=p===ct.Start?a:a.parent,v=this.toIndex(b,f),h=this.toIndex(w,a);v<h&&(r.length>0&&v===r[r.length-1].to?(r[r.length-1].to=h,r[r.length-1].toPath=this.toPath(w,a)):r.push({type:"content",from:v,to:h,fromPath:this.toPath(b,f),toPath:this.toPath(w,a),actor:n.getActorID()}))}return r.reverse()}findRightToken([e,n]){if(n===ct.Start){const c=e.allChildren;return c.length>0?[c[0],c[0].isText?ct.Text:ct.Start]:[e,ct.End]}const r=e.parent,o=r.allChildren,s=o.indexOf(e);if(r&&s===o.length-1)return[r,ct.End];const u=o[s+1];return[u,u.isText?ct.Text:ct.Start]}findLeftToken([e,n]){if(n===ct.End){const c=e.allChildren;if(c.length>0){const m=c[c.length-1];return[m,m.isText?ct.Text:ct.End]}return[e,ct.Start]}const r=e.parent,o=r.allChildren,s=o.indexOf(e);if(r&&s===0)return[r,ct.Start];const u=o[s-1];return[u,u.isText?ct.Text:ct.End]}}class _o extends fn{constructor(e,n,r,o,s,u,c){super(e,c);T(this,"fromPos");T(this,"toPos");T(this,"contents");T(this,"splitLevel");T(this,"maxCreatedAtMapByActor");this.fromPos=n,this.toPos=r,this.contents=o,this.splitLevel=s,this.maxCreatedAtMapByActor=u}static create(e,n,r,o,s,u,c){return new _o(e,n,r,o,s,u,c)}execute(e,n,r){var y;const o=e.findByCreatedAt(this.getParentCreatedAt());if(!o)throw new ne(te.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(o instanceof Yt))throw new ne(te.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const s=this.getExecutedAt(),u=o,[c,m]=u.edit([this.fromPos,this.toPos],(y=this.contents)==null?void 0:y.map(f=>f.deepcopy()),this.splitLevel,s,(()=>{let f=s.getDelimiter();return this.contents!==void 0&&(f+=this.contents.length),()=>Wt.of(s.getLamport(),++f,s.getActorID())})(),this.maxCreatedAtMapByActor,r);for(const f of m)e.registerGCPair(f);return{opInfos:c.map(({from:f,to:l,value:a,splitLevel:p,fromPath:b,toPath:w})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:f,to:l,value:a,splitLevel:p,fromPath:b,toPath:w}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),n=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,r=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,o=this.contents||[];return`${e}.EDIT(${n},${r},${o.map(s=>ka(s)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Vi{constructor(t){T(this,"vector");this.vector=t||new Map}set(t,e){this.vector.set(t,e)}unset(t){this.vector.delete(t)}get(t){return this.vector.get(t)}maxLamport(){let t=BigInt(0);for(const[,e]of this)e>t&&(t=e);return t}max(t){const e=new Map;for(const[n,r]of t){const o=this.vector.get(n),s=o&&o>r?o:r;e.set(n,s)}for(const[n,r]of this){const o=t.get(n),s=o&&o>r?o:r;e.set(n,s)}return new Vi(e)}afterOrEqual(t){const e=this.vector.get(t.getActorID());return e===void 0?!1:e>=t.getLamport()}deepcopy(){const t=new Map;for(const[e,n]of this.vector)t.set(e,n);return new Vi(t)}filter(t){const e=new Map;for(const[n]of t){const r=this.vector.get(n);r!==void 0&&e.set(n,r)}return new Vi(e)}size(){return this.vector.size}*[Symbol.iterator](){for(const[t,e]of this.vector)yield[t,e]}}const Cf=new Vi(new Map);class zr{constructor(t,e,n,r,o){T(this,"clientSeq");T(this,"serverSeq");T(this,"lamport");T(this,"actor");T(this,"versionVector");this.clientSeq=t,this.serverSeq=o,this.lamport=e,this.versionVector=r,this.actor=n}static of(t,e,n,r,o){return new zr(t,e,n,r,o)}next(){const t=this.versionVector.deepcopy();return t.set(this.actor,this.lamport+1n),new zr(this.clientSeq+1,this.lamport+1n,this.actor,t)}syncClocks(t){const e=t.lamport>this.lamport?t.lamport+1n:this.lamport+1n;let n=t.versionVector;n.size()===0&&(n=n.deepcopy(),n.set(t.actor,t.lamport));const r=this.versionVector.max(n),o=new zr(this.clientSeq,e,this.actor,r);return o.versionVector.set(this.actor,e),o}setClocks(t,e){const n=t>this.lamport?t+1n:this.lamport+1n;e.unset(Is);const r=this.versionVector.max(e);return r.set(this.actor,n),zr.of(this.clientSeq,n,this.actor,r)}createTimeTicket(t){return Wt.of(this.lamport,t,this.actor)}setActor(t){return new zr(this.clientSeq,this.lamport,t,this.versionVector,this.serverSeq)}setVersionVector(t){return new zr(this.clientSeq,this.lamport,this.actor,t,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const Lf=new zr(0,0n,Is,Cf);class Xi{constructor({id:t,operations:e,presenceChange:n,message:r}){T(this,"id");T(this,"operations");T(this,"presenceChange");T(this,"message");this.id=t,this.operations=e||[],this.presenceChange=n,this.message=r}static create({id:t,operations:e,presenceChange:n,message:r}){return new Xi({id:t,operations:e,presenceChange:n,message:r})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(t){for(const e of this.operations)e.setActor(t);this.id=this.id.setActor(t)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(t,e,n){const r=[],o=[];for(const s of this.operations){const u=s.execute(t,n,this.id.getVersionVector());if(!u)continue;const{opInfos:c,reverseOp:m}=u;r.push(...c),m&&o.unshift(m)}return this.presenceChange&&(this.presenceChange.type===pi.Put?e.set(this.id.getActorID(),sn(this.presenceChange.presence)):e.delete(this.id.getActorID())),{opInfos:r,reverseOps:o}}toTestString(){return`${this.operations.map(t=>t.toTestString()).join(",")}`}toStruct(){return{changeID:lt.bytesToHex(lt.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(t=>lt.bytesToHex(lt.toOperation(t).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(t){const{changeID:e,operations:n,presenceChange:r,message:o}=t;return Xi.create({id:lt.bytesToChangeID(lt.hexToBytes(e)),operations:n==null?void 0:n.map(s=>lt.bytesToOperation(lt.hexToBytes(s))),presenceChange:r,message:o})}}class _s{constructor(t,e,n,r,o,s,u){T(this,"documentKey");T(this,"checkpoint");T(this,"isRemoved");T(this,"changes");T(this,"snapshot");T(this,"minSyncedTicket");T(this,"versionVector");this.documentKey=t,this.checkpoint=e,this.isRemoved=n,this.changes=r,this.snapshot=s,this.minSyncedTicket=u,this.versionVector=o}static create(t,e,n,r,o,s,u){return new _s(t,e,n,r,o,s,u)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}getVersionVector(){return this.versionVector}}class Ki{constructor(t,e){T(this,"serverSeq");T(this,"clientSeq");this.serverSeq=t,this.clientSeq=e}static of(t,e){return new Ki(t,e)}increaseClientSeq(t){return t===0?this:new Ki(this.serverSeq,this.clientSeq+t)}forward(t){if(this.equals(t))return this;const e=this.serverSeq>t.serverSeq?this.serverSeq:t.serverSeq,n=Math.max(this.clientSeq,t.clientSeq);return Ki.of(e,n)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(t){return this.clientSeq===t.clientSeq&&this.serverSeq==t.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const Rf=new Ki(0n,0);class jn{constructor(t,e){T(this,"createdAt");T(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new jn(t,e)}static fromStruct(t){return jn.of(Wt.fromStruct(t.createdAt),t.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}hasSameCreatedAt(t){return this.createdAt.compare(t.createdAt)===0}split(t){return new jn(this.createdAt,this.offset+t)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const Df=jn.of(un,0);class cn{constructor(t,e){T(this,"id");T(this,"relativeOffset");this.id=t,this.relativeOffset=e}static of(t,e){return new cn(t,e)}static fromStruct(t){const e=jn.fromStruct(t.id);return cn.of(e,t.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return jn.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(t){return this.id.equals(t.id)?this.relativeOffset===t.relativeOffset:!1}}class di extends fu{constructor(e,n,r){super(n);T(this,"id");T(this,"removedAt");T(this,"prev");T(this,"next");T(this,"insPrev");T(this,"insNext");this.id=e,this.removedAt=r}static create(e,n){return new di(e,n)}static createComparator(){return(e,n)=>{const r=e.getCreatedAt().compare(n.getCreatedAt());return r!==0?r:e.getOffset()>n.getOffset()?1:e.getOffset()<n.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new di(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,n,r){const o=!this.removedAt;return(n?!this.getCreatedAt().after(n):this.getCreatedAt().getLamport()<=r)&&(!this.removedAt||e.after(this.removedAt))?o:!1}canStyle(e,n,r){return(n?!this.getCreatedAt().after(n):this.getCreatedAt().getLamport()<=r)&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[cn.of(this.id,0),cn.of(this.id,this.getLength())]}deepcopy(){return new di(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const n=this.value;return this.value=n.substring(0,e),n.substring(e,n.length)}toIDString(){return this.id.toIDString()}}class Qi{constructor(){T(this,"head");T(this,"treeByIndex");T(this,"treeByID");this.head=di.create(Df),this.treeByIndex=new wo,this.treeByID=new bu(di.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Qi}edit(t,e,n,r,o){const[s,u]=this.findNodeWithSplit(t[1],e),[c,m]=this.findNodeWithSplit(t[0],e),y=this.findBetween(m,u),[f,l,a]=this.deleteNodes(y,e,r,o),p=u?u.getID():s.getID();let b=cn.of(p,0);if(n){const v=this.posToIndex(c.createPosRange()[1],!0),h=this.insertAfter(c,di.create(jn.of(e,0),n));f.length&&f[f.length-1].from===v?f[f.length-1].value=n:f.push({actor:e.getActorID(),from:v,to:v,value:n}),b=cn.of(h.getID(),h.getContentLength())}const w=[];for(const[,v]of a)w.push({parent:this,child:v});return[b,l,w,f]}indexToPos(t){const[e,n]=this.treeByIndex.find(t),r=e;return cn.of(r.getID(),n)}findIndexesFromRange(t){const[e,n]=t;return[this.posToIndex(e,!1),this.posToIndex(n,!0)]}posToIndex(t,e){const n=t.getAbsoluteID(),r=e?this.findFloorNodePreferToLeft(n):this.findFloorNode(n);if(!r)throw new ne(te.ErrInvalidArgument,`the node of the given id should be found: ${n.toTestString()}`);const o=this.treeByIndex.indexOf(r),s=r.isRemoved()?0:n.getOffset()-r.getID().getOffset();return o+s}findNode(t){return this.findFloorNode(t)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const t=[];for(const e of this)e.isRemoved()||t.push(e.getValue());return t.join("")}*[Symbol.iterator](){let t=this.head.getNext();for(;t;)yield t,t=t.getNext()}getHead(){return this.head}deepcopy(){const t=new Qi;let e=this.head.getNext(),n=t.head,r;for(;e;){if(r=t.insertAfter(n,e.deepcopy()),e.hasInsPrev()){const o=t.findNode(e.getInsPrevID());r.setInsPrev(o)}n=r,e=e.getNext()}return t}toTestString(){const t=[];let e=this.head;for(;e;)e.isRemoved()?t.push(`{${e.toTestString()}}`):t.push(`[${e.toTestString()}]`),e=e.getNext();return t.join("")}insertAfter(t,e){const n=t.getNext();return e.setPrev(t),n&&n.setPrev(e),this.treeByID.put(e.getID(),e),this.treeByIndex.insertAfter(t,e),e}findNodeWithSplit(t,e){const n=t.getAbsoluteID();let r=this.findFloorNodePreferToLeft(n);const o=n.getOffset()-r.getID().getOffset();for(this.splitNode(r,o);r.hasNext()&&r.getNext().getCreatedAt().after(e);)r=r.getNext();return[r,r.getNext()]}findFloorNodePreferToLeft(t){let e=this.findFloorNode(t);if(!e)throw new ne(te.ErrInvalidArgument,`the node of the given id should be found: ${t.toTestString()}`);if(t.getOffset()>0&&e.getID().getOffset()==t.getOffset()){if(!e.hasInsPrev())return e;e=e.getInsPrev()}return e}findFloorNode(t){const e=this.treeByID.floorEntry(t);if(e&&!(!e.key.equals(t)&&!e.key.hasSameCreatedAt(t)))return e.value}findBetween(t,e){const n=[];let r=t;for(;r&&r!==e;)n.push(r),r=r.getNext();return n}splitNode(t,e){if(e>t.getContentLength())throw new ne(te.ErrInvalidArgument,"offset should be less than or equal to length");if(e===0)return t;if(e===t.getContentLength())return t.getNext();const n=t.split(e);this.treeByIndex.updateWeight(n),this.insertAfter(t,n);const r=t.getInsNext();return r&&r.setInsPrev(n),n.setInsPrev(t),n}deleteNodes(t,e,n,r){if(!t.length)return[[],new Map,new Map];const[o,s]=this.filterNodes(t,e,n,r),u=new Map,c=new Map,m=this.makeChanges(s,e);for(const y of o){const f=y.getCreatedAt().getActorID();(!u.has(f)||y.getID().getCreatedAt().after(u.get(f)))&&u.set(f,y.getID().getCreatedAt()),c.set(y.getID().toIDString(),y),y.remove(e)}return this.deleteIndexNodes(s),[m,u,c]}filterNodes(t,e,n,r){const o=[],s=[],[u,c]=this.findEdgesOfCandidates(t);s.push(u);for(const m of t){const y=m.getCreatedAt().getActorID();let f,l=0n;r===void 0&&n===void 0?l=fo:r.size()>0?l=r.get(y)?r.get(y):0n:f=n.has(y)?n.get(y):un,m.canDelete(e,f,l)?o.push(m):s.push(m)}return s.push(c),[o,s]}findEdgesOfCandidates(t){return[t[0].getPrev(),t[t.length-1].getNext()]}makeChanges(t,e){const n=[];let r,o;for(let s=0;s<t.length-1;s++){const u=t[s],c=t[s+1];u.getNext()!=c&&([r]=this.findIndexesFromRange(u.getNext().createPosRange()),c?[,o]=this.findIndexesFromRange(c.getPrev().createPosRange()):o=this.treeByIndex.length,r<o&&n.push({actor:e.getActorID(),from:r,to:o}))}return n.reverse()}deleteIndexNodes(t){for(let e=0;e<t.length-1;e++){const n=t[e],r=t[e+1];n.getNext()!=r&&this.treeByIndex.deleteRange(n,r)}}purge(t){this.treeByIndex.delete(t),this.treeByID.remove(t.getID());const e=t.getPrev(),n=t.getNext(),r=t.getInsPrev(),o=t.getInsNext();e&&e.setNext(n),n&&n.setPrev(e),t.setPrev(void 0),t.setNext(void 0),r&&r.setInsNext(o),o&&o.setInsPrev(r),t.setInsPrev(void 0),t.setInsNext(void 0)}}const El=i=>i<0?Math.ceil(i):Math.floor(i);var Un=(i=>(i[i.IntegerCnt=0]="IntegerCnt",i[i.LongCnt=1]="LongCnt",i))(Un||{});class Rt extends ko{constructor(e,n,r){super(r);T(this,"valueType");T(this,"value");switch(this.valueType=e,e){case 0:typeof n=="number"?n>Math.pow(2,31)-1||n<-Math.pow(2,31)?this.value=Ve.fromNumber(n).toInt():this.value=El(n):this.value=n.toInt();break;case 1:typeof n=="number"?this.value=Ve.fromNumber(n):this.value=n;break;default:throw new ne(te.ErrUnimplemented,`unimplemented type: ${e}`)}}static create(e,n,r){return new Rt(e,n,r)}static valueFromBytes(e,n){switch(e){case 0:return n[0]|n[1]<<8|n[2]<<16|n[3]<<24;case 1:return Ve.fromBytesLE(Array.from(n));default:throw new ne(te.ErrUnimplemented,`unimplemented type: ${e}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=Rt.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof Ve?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!Rt.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const n=this.value.toBytesLE();return Uint8Array.from(n)}default:throw new ne(te.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function n(r){if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`)}return n(this),n(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===ht.Long?this.value=this.value+e.getValue().toInt():this.value=Ve.fromNumber(this.value+El(e.getValue())).toInt(),this}}class eo extends fn{constructor(e,n,r){super(e,r);T(this,"value");this.value=n}static create(e,n,r){return new eo(e,n,r)}execute(e){const n=e.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new ne(te.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof Rt))throw new ne(te.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const r=n,o=this.value.deepcopy();return r.increase(o),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:o.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),r=e.getType()===ht.Long?e.getValue().multiply(-1):e.getValue()*-1;return eo.create(this.getParentCreatedAt(),tt.of(r,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class Yr extends fn{constructor(e,n,r,o,s,u,c){super(e,c);T(this,"fromPos");T(this,"toPos");T(this,"maxCreatedAtMapByActor");T(this,"attributes");T(this,"attributesToRemove");this.fromPos=n,this.toPos=r,this.maxCreatedAtMapByActor=o,this.attributes=s,this.attributesToRemove=u}static create(e,n,r,o,s,u){return new Yr(e,n,r,o,s,[],u)}static createTreeRemoveStyleOperation(e,n,r,o,s,u){return new Yr(e,n,r,o,new Map,s,u)}execute(e,n,r){const o=e.findByCreatedAt(this.getParentCreatedAt());if(!o)throw new ne(te.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(o instanceof Yt))throw new ne(te.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const s=o;let u,c;if(this.attributes.size){const m={};[...this.attributes].forEach(([y,f])=>m[y]=f),[,c,u]=s.style([this.fromPos,this.toPos],m,this.getExecutedAt(),this.maxCreatedAtMapByActor,r)}else{const m=this.attributesToRemove;[,c,u]=s.removeStyle([this.fromPos,this.toPos],m,this.getExecutedAt(),this.maxCreatedAtMapByActor,r)}for(const m of c)e.registerGCPair(m);return{opInfos:u.map(({from:m,to:y,value:f,fromPath:l,toPath:a})=>({type:"tree-style",from:m,to:y,value:this.attributes.size?{attributes:f}:{attributesToRemove:f},fromPath:l,toPath:a,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),n=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,r=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${n},${r},${Object.entries(this.attributes||{}).map(([o,s])=>`${o}:"${s}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}function Bf(i){const t=new Sa,e=t.data;for(const[n,r]of Object.entries(i))e[n]=JSON.stringify(r);return t}function Mf(i){if(i.type===pi.Put)return new vo({type:Ni.PUT,presence:Bf(i.presence)});if(i.type===pi.Clear)return new vo({type:Ni.CLEAR});throw new ne(te.ErrUnimplemented,"unimplemented type")}function qf(i){return new lu({serverSeq:i.getServerSeq(),clientSeq:i.getClientSeq()})}function Au(i){return new ks({clientSeq:i.getClientSeq(),lamport:i.getLamport(),actorId:Ma(i.getActorID()),versionVector:Oa(i.getVersionVector())})}function ke(i){if(i)return new xe({lamport:i.getLamport(),delimiter:i.getDelimiter(),actorId:Ma(i.getActorID())})}function Oa(i){if(!i)return;const t=new Os;for(const[e,n]of i)t.vector[e]=BigInt(n.toString());return t}function Tu(i){switch(i){case ht.Null:return Re.NULL;case ht.Boolean:return Re.BOOLEAN;case ht.Integer:return Re.INTEGER;case ht.Long:return Re.LONG;case ht.Double:return Re.DOUBLE;case ht.String:return Re.STRING;case ht.Bytes:return Re.BYTES;case ht.Date:return Re.DATE;default:throw new ne(te.ErrInvalidType,`unsupported type: ${i}`)}}function Su(i){switch(i){case Un.IntegerCnt:return Re.INTEGER_CNT;case Un.LongCnt:return Re.LONG_CNT;default:throw new ne(te.ErrInvalidType,`unsupported type: ${i}`)}}function js(i){if(i instanceof xt)return new Bt({type:Re.JSON_OBJECT,createdAt:ke(i.getCreatedAt()),value:Bu(i)});if(i instanceof Lt)return new Bt({type:Re.JSON_ARRAY,createdAt:ke(i.getCreatedAt()),value:ph(i)});if(i instanceof Gt)return new Bt({type:Re.TEXT,createdAt:ke(i.getCreatedAt())});if(i instanceof tt)return new Bt({type:Tu(i.getType()),createdAt:ke(i.getCreatedAt()),value:i.toBytes()});if(i instanceof Rt)return new Bt({type:Su(i.getType()),createdAt:ke(i.getCreatedAt()),value:i.toBytes()});if(i instanceof Yt)return new Bt({type:Re.TREE,createdAt:ke(i.getCreatedAt()),value:yh(i)});throw new ne(te.ErrUnimplemented,"unimplemented element")}function Ff(i){return new mo({createdAt:ke(i.getCreatedAt()),offset:i.getOffset()})}function Uo(i){return new Zr({createdAt:ke(i.getID().getCreatedAt()),offset:i.getID().getOffset(),relativeOffset:i.getRelativeOffset()})}function Jo(i){return new Ii({parentId:ho(i.getParentID()),leftSiblingId:ho(i.getLeftSiblingID())})}function ho(i){return new fi({createdAt:ke(i.getCreatedAt()),offset:i.getOffset()})}function Eu(i){const t=new Ta;if(i instanceof _i){const e=i,n=new rs;n.parentCreatedAt=ke(e.getParentCreatedAt()),n.key=e.getKey(),n.value=js(e.getValue()),n.executedAt=ke(e.getExecutedAt()),t.body.case="set",t.body.value=n}else if(i instanceof Oo){const e=i,n=new is;n.parentCreatedAt=ke(e.getParentCreatedAt()),n.prevCreatedAt=ke(e.getPrevCreatedAt()),n.value=js(e.getValue()),n.executedAt=ke(e.getExecutedAt()),t.body.case="add",t.body.value=n}else if(i instanceof ci){const e=i,n=new os;n.parentCreatedAt=ke(e.getParentCreatedAt()),n.prevCreatedAt=ke(e.getPrevCreatedAt()),n.createdAt=ke(e.getCreatedAt()),n.executedAt=ke(e.getExecutedAt()),t.body.case="move",t.body.value=n}else if(i instanceof mi){const e=i,n=new ss;n.parentCreatedAt=ke(e.getParentCreatedAt()),n.createdAt=ke(e.getCreatedAt()),n.executedAt=ke(e.getExecutedAt()),t.body.case="remove",t.body.value=n}else if(i instanceof Io){const e=i,n=new as;n.parentCreatedAt=ke(e.getParentCreatedAt()),n.from=Uo(e.getFromPos()),n.to=Uo(e.getToPos());const r=n.createdAtMapByActor;for(const[s,u]of e.getMaxCreatedAtMapByActor())r[s]=ke(u);n.content=e.getContent();const o=n.attributes;for(const[s,u]of e.getAttributes())o[s]=u;n.executedAt=ke(e.getExecutedAt()),t.body.case="edit",t.body.value=n}else if(i instanceof No){const e=i,n=new ls;n.parentCreatedAt=ke(e.getParentCreatedAt()),n.from=Uo(e.getFromPos()),n.to=Uo(e.getToPos());const r=n.createdAtMapByActor;for(const[s,u]of e.getMaxCreatedAtMapByActor())r[s]=ke(u);const o=n.attributes;for(const[s,u]of e.getAttributes())o[s]=u;n.executedAt=ke(e.getExecutedAt()),t.body.case="style",t.body.value=n}else if(i instanceof eo){const e=i,n=new us;n.parentCreatedAt=ke(e.getParentCreatedAt()),n.value=js(e.getValue()),n.executedAt=ke(e.getExecutedAt()),t.body.case="increase",t.body.value=n}else if(i instanceof _o){const e=i,n=new cs,r=n.createdAtMapByActor;for(const[o,s]of e.getMaxCreatedAtMapByActor())r[o]=ke(s);n.parentCreatedAt=ke(e.getParentCreatedAt()),n.from=Jo(e.getFromPos()),n.to=Jo(e.getToPos()),n.contents=Kf(e.getContents()),n.splitLevel=e.getSplitLevel(),n.executedAt=ke(e.getExecutedAt()),t.body.case="treeEdit",t.body.value=n}else if(i instanceof Yr){const e=i,n=new fs;n.parentCreatedAt=ke(e.getParentCreatedAt()),n.from=Jo(e.getFromPos()),n.to=Jo(e.getToPos());const r=n.createdAtMapByActor;for(const[s,u]of e.getMaxCreatedAtMapByActor())r[s]=ke(u);const o=e.getAttributesToRemove();if(o.length>0)n.attributesToRemove=o;else{const s=n.attributes;for(const[u,c]of e.getAttributes())s[u]=c}n.executedAt=ke(e.getExecutedAt()),t.body.case="treeStyle",t.body.value=n}else throw new ne(te.ErrUnimplemented,"unimplemented operation");return t}function jf(i){const t=[];for(const e of i)t.push(Eu(e));return t}function Uf(i){const t=new su({id:Au(i.getID()),message:i.getMessage()});return i.hasOperations()&&(t.operations=jf(i.getOperations())),i.hasPresenceChange()&&(t.presenceChange=Mf(i.getPresenceChange())),t}function Jf(i){const t=[];for(const e of i)t.push(Uf(e));return t}function $f(i){const t=[];for(const e of i)t.push(new au({key:e.getStrKey(),element:Na(e.getValue())}));return t}function zf(i){const t=[];for(const e of i)t.push(new vs({element:Na(e.getValue())}));return t}function Vf(i){const t=[];for(const e of i){const n=new bs;n.id=Ff(e.getID()),n.value=e.getValue().getContent(),n.removedAt=ke(e.getRemovedAt());const r=n.attributes,o=e.getValue().getAttrs();for(const s of o){const u=new Gi;u.value=s.getValue(),u.updatedAt=ke(s.getUpdatedAt()),r[s.getKey()]=u}t.push(n)}return t}function Kf(i){const t=[];if(!i||!i.length)return t;for(const e of i)t.push(new ws({content:Ia(e)}));return t}function Hf(i){const t={};for(const e of i)t[e.getKey()]=new Gi({value:e.getValue(),updatedAt:ke(e.getUpdatedAt()),isRemoved:e.isRemoved()});return t}function Ia(i){if(!i)return[];const t=[];return Ns(i,(e,n)=>{const r=new yo({id:ho(e.id),type:e.type,removedAt:ke(e.removedAt),depth:n});e.isText&&(r.value=e.value),e.insPrevID&&(r.insPrevId=ho(e.insPrevID)),e.insNextID&&(r.insNextId=ho(e.insNextID)),e.attrs&&(r.attributes=Hf(e.attrs)),t.push(r)}),t}function Wf(i){const t=new kt;return t.body.case="jsonObject",t.body.value=new hs({nodes:$f(i.getRHT()),createdAt:ke(i.getCreatedAt()),movedAt:ke(i.getMovedAt()),removedAt:ke(i.getRemovedAt())}),t}function xu(i){const t=new kt;return t.body.case="jsonArray",t.body.value=new ds({nodes:zf(i.getElements()),createdAt:ke(i.getCreatedAt()),movedAt:ke(i.getMovedAt()),removedAt:ke(i.getRemovedAt())}),t}function Gf(i){const t=new kt;return t.body.case="primitive",t.body.value=new gs({type:Tu(i.getType()),value:i.toBytes(),createdAt:ke(i.getCreatedAt()),movedAt:ke(i.getMovedAt()),removedAt:ke(i.getRemovedAt())}),t}function Yf(i){const t=new kt;return t.body.case="text",t.body.value=new ps({nodes:Vf(i.getRGATreeSplit()),createdAt:ke(i.getCreatedAt()),movedAt:ke(i.getMovedAt()),removedAt:ke(i.getRemovedAt())}),t}function Zf(i){const t=new kt;return t.body.case="counter",t.body.value=new ms({type:Su(i.getType()),value:i.toBytes(),createdAt:ke(i.getCreatedAt()),movedAt:ke(i.getMovedAt()),removedAt:ke(i.getRemovedAt())}),t}function ku(i){const t=new kt;return t.body.case="tree",t.body.value=new ys({nodes:Ia(i.getRoot()),createdAt:ke(i.getCreatedAt()),movedAt:ke(i.getMovedAt()),removedAt:ke(i.getRemovedAt())}),t}function Na(i){if(i instanceof xt)return Wf(i);if(i instanceof Lt)return xu(i);if(i instanceof tt)return Gf(i);if(i instanceof Gt)return Yf(i);if(i instanceof Rt)return Zf(i);if(i instanceof Yt)return ku(i);throw new ne(te.ErrUnimplemented,"unimplemented element")}function Xf(i){return new Qr({documentKey:i.getDocumentKey(),checkpoint:qf(i.getCheckpoint()),isRemoved:i.getIsRemoved(),changes:Jf(i.getChanges()),snapshot:i.getSnapshot(),versionVector:Oa(i.getVersionVector()),minSyncedTicket:ke(i.getMinSyncedTicket())})}function ao(i){if(!(i instanceof Ze))return{};const t=i.findDetails(yf);for(const e of t)return e.metadata;return{}}function Mi(i){return ao(i).code??""}function Ou(i){return zr.of(i.clientSeq,BigInt(i.lamport),Da(i.actorId),_a(i.versionVector),BigInt(i.serverSeq))}function _a(i){if(!i)return;const t=new Vi;return Object.entries(i.vector).forEach(([e,n])=>{t.set(e,BigInt(n.toString()))}),t}function Ie(i){if(i)return Wt.of(BigInt(i.lamport),i.delimiter,Da(i.actorId))}function Pa(i){const t={};return Object.entries(i.data).forEach(([e,n])=>{t[e]=JSON.parse(n)}),t}function Qf(i){const t=i.type;if(t===Ni.PUT){const e=Pa(i.presence);return{type:pi.Put,presence:e}}if(t===Ni.CLEAR)return{type:pi.Clear};throw new ne(te.ErrInvalidType,`unsupported type: ${t}`)}function eh(i){const t=new Map;return Object.entries(i).forEach(([e,n])=>{t.set(e,Pa(n))}),t}function Iu(i){switch(i){case Re.NULL:return ht.Null;case Re.BOOLEAN:return ht.Boolean;case Re.INTEGER:return ht.Integer;case Re.LONG:return ht.Long;case Re.DOUBLE:return ht.Double;case Re.STRING:return ht.String;case Re.BYTES:return ht.Bytes;case Re.DATE:return ht.Date}throw new ne(te.ErrUnimplemented,`unimplemented value type: ${i}`)}function Ss(i){switch(i){case Re.INTEGER_CNT:return Un.IntegerCnt;case Re.LONG_CNT:return Un.LongCnt}throw new ne(te.ErrUnimplemented,`unimplemented value type: ${i}`)}function Us(i){switch(i.type){case Re.JSON_OBJECT:return i.value?Du(i.value):xt.create(Ie(i.createdAt));case Re.JSON_ARRAY:return i.value?gh(i.value):Lt.create(Ie(i.createdAt));case Re.TEXT:return Gt.create(Qi.create(),Ie(i.createdAt));case Re.TREE:return mh(i.value);case Re.NULL:case Re.BOOLEAN:case Re.INTEGER:case Re.LONG:case Re.DOUBLE:case Re.STRING:case Re.BYTES:case Re.DATE:return tt.of(tt.valueFromBytes(Iu(i.type),i.value),Ie(i.createdAt));case Re.INTEGER_CNT:case Re.LONG_CNT:return Rt.create(Ss(i.type),Rt.valueFromBytes(Ss(i.type),i.value),Ie(i.createdAt))}}function $o(i){return cn.of(jn.of(Ie(i.createdAt),i.offset),i.relativeOffset)}function Nu(i){return jn.of(Ie(i.createdAt),i.offset)}function th(i){const t=To.create(i.value);Object.entries(i.attributes).forEach(([n,r])=>{t.setAttr(n,r.value,Ie(r.updatedAt))});const e=di.create(Nu(i.id),t);return e.remove(Ie(i.removedAt)),e}function qi(i){return ln.of(go(i.parentId),go(i.leftSiblingId))}function go(i){return pt.of(Ie(i.createdAt),i.offset)}function nh(i){if(!i.length)return;const t=[];return i.forEach(e=>{const n=Ca(e.content);t.push(n)}),t}function Ca(i){if(i.length===0)return;const t=[];for(const r of i)t.push(ih(r));const e=t[t.length-1],n=new Map;n.set(i[t.length-1].depth,t[t.length-1]);for(let r=t.length-2;r>=0;r--)n.get(i[r].depth-1).prepend(t[r]),n.set(i[r].depth,t[r]);return e.updateDescendantsSize(),Yt.create(e,un).getRoot()}function rh(i){const t=Xr.create();for(const[e,n]of Object.entries(i))t.setInternal(e,n.value,Ie(n.updatedAt),n.isRemoved);return t}function ih(i){const t=go(i.id),e=Ct.create(t,i.type),n=Object.entries(i.attributes);return e.isText?e.value=i.value:n.length&&(e.attrs=rh(i.attributes)),i.insPrevId&&(e.insPrevID=go(i.insPrevId)),i.insNextId&&(e.insNextID=go(i.insNextId)),e.removedAt=Ie(i.removedAt),e}function _u(i){if(i.body.case==="set"){const t=i.body.value;return _i.create(t.key,Us(t.value),Ie(t.parentCreatedAt),Ie(t.executedAt))}else if(i.body.case==="add"){const t=i.body.value;return Oo.create(Ie(t.parentCreatedAt),Ie(t.prevCreatedAt),Us(t.value),Ie(t.executedAt))}else if(i.body.case==="move"){const t=i.body.value;return ci.create(Ie(t.parentCreatedAt),Ie(t.prevCreatedAt),Ie(t.createdAt),Ie(t.executedAt))}else if(i.body.case==="remove"){const t=i.body.value;return mi.create(Ie(t.parentCreatedAt),Ie(t.createdAt),Ie(t.executedAt))}else if(i.body.case==="edit"){const t=i.body.value,e=new Map;Object.entries(t.createdAtMapByActor).forEach(([r,o])=>{e.set(r,Ie(o))});const n=new Map;return Object.entries(t.attributes).forEach(([r,o])=>{n.set(r,o)}),Io.create(Ie(t.parentCreatedAt),$o(t.from),$o(t.to),e,t.content,n,Ie(t.executedAt))}else if(i.body.case==="style"){const t=i.body.value,e=new Map;Object.entries(t.createdAtMapByActor).forEach(([r,o])=>{e.set(r,Ie(o))});const n=new Map;return Object.entries(t.attributes).forEach(([r,o])=>{n.set(r,o)}),No.create(Ie(t.parentCreatedAt),$o(t.from),$o(t.to),e,n,Ie(t.executedAt))}else{if(i.body.case==="select")return;if(i.body.case==="increase"){const t=i.body.value;return eo.create(Ie(t.parentCreatedAt),Us(t.value),Ie(t.executedAt))}else if(i.body.case==="treeEdit"){const t=i.body.value,e=new Map;return Object.entries(t.createdAtMapByActor).forEach(([n,r])=>{e.set(n,Ie(r))}),_o.create(Ie(t.parentCreatedAt),qi(t.from),qi(t.to),nh(t.contents),t.splitLevel,e,Ie(t.executedAt))}else if(i.body.case==="treeStyle"){const t=i.body.value,e=new Map,n=t.attributesToRemove,r=new Map;return t!=null&&t.createdAtMapByActor&&Object.entries(t.createdAtMapByActor).forEach(([o,s])=>{r.set(o,Ie(s))}),(n==null?void 0:n.length)>0?Yr.createTreeRemoveStyleOperation(Ie(t.parentCreatedAt),qi(t.from),qi(t.to),r,n,Ie(t.executedAt)):(Object.entries(t.attributes).forEach(([o,s])=>{e.set(o,s)}),Yr.create(Ie(t.parentCreatedAt),qi(t.from),qi(t.to),r,e,Ie(t.executedAt)))}else throw new ne(te.ErrUnimplemented,"unimplemented operation")}}function oh(i){const t=[];for(const e of i){const n=_u(e);n&&t.push(n)}return t}function Pu(i){const t=[];for(const e of i)t.push(Xi.create({id:Ou(e.id),operations:oh(e.operations),presenceChange:e.presenceChange?Qf(e.presenceChange):void 0,message:e.message}));return t}function sh(i){return Ki.of(BigInt(i.serverSeq),i.clientSeq)}function ah(i){return _s.create(i.documentKey,sh(i.checkpoint),i.isRemoved,Pu(i.changes),_a(i.versionVector),i.snapshot,Ie(i.minSyncedTicket))}function Cu(i){const t=new bo;for(const n of i.nodes){const r=La(n.element);t.set(n.key,r,r.getPositionedAt())}const e=new xt(Ie(i.createdAt),t);return e.setMovedAt(Ie(i.movedAt)),e.setRemovedAt(Ie(i.removedAt)),e}function Lu(i){const t=new Ao;for(const n of i.nodes)t.insert(La(n.element));const e=new Lt(Ie(i.createdAt),t);return e.setMovedAt(Ie(i.movedAt)),e.setRemovedAt(Ie(i.removedAt)),e}function lh(i){const t=tt.of(tt.valueFromBytes(Iu(i.type),i.value),Ie(i.createdAt));return t.setMovedAt(Ie(i.movedAt)),t.setRemovedAt(Ie(i.removedAt)),t}function uh(i){const t=new Qi;let e=t.getHead();for(const r of i.nodes){const o=t.insertAfter(e,th(r));r.insPrevId&&o.setInsPrev(t.findNode(Nu(r.insPrevId))),e=o}const n=new Gt(t,Ie(i.createdAt));return n.setMovedAt(Ie(i.movedAt)),n.setRemovedAt(Ie(i.removedAt)),n}function ch(i){const t=Rt.create(Ss(i.type),Rt.valueFromBytes(Ss(i.type),i.value),Ie(i.createdAt));return t.setMovedAt(Ie(i.movedAt)),t.setRemovedAt(Ie(i.removedAt)),t}function Ru(i){const t=Ca(i.nodes);return Yt.create(t,Ie(i.createdAt))}function La(i){if(i.body.case==="jsonObject")return Cu(i.body.value);if(i.body.case==="jsonArray")return Lu(i.body.value);if(i.body.case==="primitive")return lh(i.body.value);if(i.body.case==="text")return uh(i.body.value);if(i.body.case==="counter")return ch(i.body.value);if(i.body.case==="tree")return Ru(i.body.value);throw new ne(te.ErrUnimplemented,"unimplemented element")}function fh(i){if(!i)return{root:xt.create(un),presences:new Map};const t=Hs.fromBinary(i);return{root:La(t.root),presences:eh(t.presences)}}function hh(i){const t=Oa(i);return Ra(t.toBinary())}function dh(i){const t=Ba(i),e=Os.fromBinary(t);return _a(e)}function Du(i){if(!i)throw new ne(te.ErrInvalidArgument,"bytes is empty");const t=kt.fromBinary(i);return Cu(t.body.value)}function Bu(i){return Na(i).toBinary()}function gh(i){if(!i)throw new ne(te.ErrInvalidArgument,"bytes is empty");const t=kt.fromBinary(i);return Lu(t.body.value)}function ph(i){return xu(i).toBinary()}function mh(i){if(!i)throw new ne(te.ErrInvalidArgument,"bytes is empty");const t=kt.fromBinary(i);return Ru(t.body.value)}function yh(i){return ku(i).toBinary()}function Ra(i){return i?Array.from(i).map(t=>t.toString(16).padStart(2,"0")).join(""):""}function Da(i){return Ra(i)}function Ba(i){return new Uint8Array(i.match(/.{1,2}/g).map(t=>parseInt(t,16)))}function Ma(i){return Ba(i)}function vh(i){const t=ks.fromBinary(i);return Ou(t)}function bh(i){const t=Ta.fromBinary(i);return _u(t)}const lt={fromPresence:Pa,toChangePack:Xf,fromChangePack:ah,fromChanges:Pu,toTreeNodes:Ia,fromTreeNodes:Ca,objectToBytes:Bu,bytesToObject:Du,bytesToSnapshot:fh,bytesToHex:Ra,hexToBytes:Ba,toHexString:Da,toUint8Array:Ma,toOperation:Eu,toChangeID:Au,PbChangeID:ks,bytesToChangeID:vh,bytesToOperation:bh,versionVectorToHex:hh,hexToVersionVector:dh};var wt=(i=>(i[i.Trivial=0]="Trivial",i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal",i))(wt||{});let bi=3;function Mu(i){bi=i}const Ne={trivial:(...i)=>{bi>0||typeof console<"u"&&console.log("YORKIE T:",...i)},debug:(...i)=>{bi>1||typeof console<"u"&&console.log("YORKIE D:",...i)},info:(...i)=>{bi>2||typeof console<"u"&&console.log("YORKIE I:",...i)},warn:(...i)=>{bi>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...i):console.log("YORKIE W:",...i))},error:(...i)=>{bi>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...i):console.log("YORKIE E:",...i))},fatal:(...i)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...i):console.log("YORKIE F:",...i))},isEnabled:i=>bi<=i};function qu(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,i=>{const t=Math.random()*16|0;return(i==="x"?t:t&3|8).toString(16)})}class wh{constructor(t,e,n,r,o){T(this,"reconnectStreamDelay");T(this,"doc");T(this,"docID");T(this,"syncMode");T(this,"remoteChangeEventReceived");T(this,"watchStream");T(this,"watchLoopTimerID");T(this,"watchAbortController");T(this,"unsubscribeBroadcastEvent");this.reconnectStreamDelay=t,this.doc=e,this.docID=n,this.syncMode=r,this.remoteChangeEventReceived=!1,this.unsubscribeBroadcastEvent=o}changeSyncMode(t){this.syncMode=t}needRealtimeSync(){return this.syncMode===Qo.RealtimeSyncOff?!1:this.syncMode===Qo.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Qo.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(t){const e=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await t(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(e,this.reconnectStreamDelay)})}catch{}};await e()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const Js=()=>{};class Ah{constructor(t){T(this,"finalized",!1);T(this,"observers",[]);T(this,"finalError");try{t(this)}catch(e){this.error(e)}}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,n){let r;if(!t)throw new ne(te.ErrInvalidArgument,"missing observer");if(this.finalized)throw new ne(te.ErrRefused,"observable is finalized due to previous error");typeof t=="object"?r=t:r={next:t,error:e,complete:n},r.next===void 0&&(r.next=Js),r.error===void 0&&(r.error=Js),r.complete===void 0&&(r.complete=Js);const o=qu(),s=this.unsubscribeOne.bind(this,o);if(this.observers.push({subscriptionID:o,observer:r}),this.finalized)try{this.finalError?r.error(this.finalError):r.complete()}catch(u){Ne.warn(u)}return s}unsubscribeOne(t){var e;this.observers=(e=this.observers)==null?void 0:e.filter(n=>n.subscriptionID!==t)}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t].observer)}catch(n){Ne.error(n)}}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.observers=void 0)}}function Th(i){const t=new Ah(i);return{subscribe:t.subscribe.bind(t),getProxy:()=>t}}class $i{constructor(t,e,n,r){T(this,"id");T(this,"delimiter");T(this,"message");T(this,"root");T(this,"operations");T(this,"presenceChange");T(this,"previousPresence");T(this,"reversePresenceKeys");this.id=t,this.delimiter=cu,this.root=e,this.operations=[],this.previousPresence=sn(n),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=r}static create(t,e,n,r){return new $i(t,e,n,r)}push(t){this.operations.push(t)}registerElement(t,e){this.root.registerElement(t,e)}registerRemovedElement(t){this.root.registerRemovedElement(t)}registerGCPair(t){this.root.registerGCPair(t)}getChange(){return Xi.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(t){this.presenceChange=t}setReversePresence(t,e){for(const n of Object.keys(t))e!=null&&e.addToHistory?this.reversePresenceKeys.add(n):this.reversePresenceKeys.delete(n)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const t={};for(const e of this.reversePresenceKeys)t[e]=this.previousPresence[e];return t}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class So{constructor(t){T(this,"rootObject");T(this,"elementPairMapByCreatedAt");T(this,"gcElementSetByCreatedAt");T(this,"gcPairMap");this.rootObject=t,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(t,void 0),t.getDescendants(e=>{if(e.getRemovedAt()&&this.registerRemovedElement(e),e instanceof Gt||e instanceof Yt)for(const n of e.getGCPairs())this.registerGCPair(n);return!1})}static create(){return new So(xt.create(un))}findByCreatedAt(t){const e=this.elementPairMapByCreatedAt.get(t.toIDString());if(e)return e.element}findElementPairByCreatedAt(t){return this.elementPairMapByCreatedAt.get(t.toIDString())}createSubPaths(t){let e=this.elementPairMapByCreatedAt.get(t.toIDString());if(!e)return[];const n=[];for(;e.parent;){const r=e.element.getCreatedAt(),o=e.parent.subPathOf(r);if(o===void 0)throw new ne(te.ErrInvalidArgument,`cant find the given element: ${r.toIDString()}`);n.unshift(o),e=this.elementPairMapByCreatedAt.get(e.parent.getCreatedAt().toIDString())}return n.unshift("$"),n}createPath(t){return this.createSubPaths(t).join(".")}registerElement(t,e){this.elementPairMapByCreatedAt.set(t.getCreatedAt().toIDString(),{parent:e,element:t}),t instanceof hi&&t.getDescendants((n,r)=>(this.registerElement(n,r),!1))}deregisterElement(t){let e=0;const n=r=>{const o=r.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(o),this.gcElementSetByCreatedAt.delete(o),e++};return n(t),t instanceof hi&&t.getDescendants(r=>(n(r),!1)),e}registerRemovedElement(t){this.gcElementSetByCreatedAt.add(t.getCreatedAt().toIDString())}registerGCPair(t){if(this.gcPairMap.get(t.child.toIDString())){this.gcPairMap.delete(t.child.toIDString());return}this.gcPairMap.set(t.child.toIDString(),t)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const t=new Set;for(const e of this.gcElementSetByCreatedAt){t.add(e);const n=this.elementPairMapByCreatedAt.get(e);n.element instanceof hi&&n.element.getDescendants(r=>(t.add(r.getCreatedAt().toIDString()),!1))}return t.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}deepcopy(){return new So(this.rootObject.deepcopy())}garbageCollect(t){let e=0;for(const n of this.gcElementSetByCreatedAt){const r=this.elementPairMapByCreatedAt.get(n),o=r.element.getRemovedAt();o&&(t!=null&&t.afterOrEqual(o))&&(r.parent.purge(r.element),e+=this.deregisterElement(r.element))}for(const[,n]of this.gcPairMap){const r=n.child.getRemovedAt();r&&(t!=null&&t.afterOrEqual(r))&&(n.parent.purge(n.child),this.gcPairMap.delete(n.child.toIDString()),e+=1)}return e}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}}function Fu(i,t){const e=new Eo(i);return new Proxy(t,e.getHandlers())}class Eo{constructor(t){T(this,"context");T(this,"handlers");this.context=t,this.handlers={set:(e,n,r)=>(Ne.isEnabled(wt.Trivial)&&Ne.trivial(`obj[${n}]=${JSON.stringify(r)}`),Eo.setInternal(t,e,n,r),!0),get:(e,n)=>(Ne.isEnabled(wt.Trivial)&&Ne.trivial(`obj[${n}]`),n==="getID"?()=>e.getCreatedAt():n==="toJSON"||n==="toString"?()=>e.toJSON():n==="toJS"?()=>e.toJS():n==="toJSForTest"?()=>e.toJSForTest():wi(t,e.get(n))),ownKeys:e=>e.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(e,n)=>(Ne.isEnabled(wt.Trivial)&&Ne.trivial(`obj[${n}]`),Eo.deleteInternal(t,e,n),!0)}}static setInternal(t,e,n,r){if(n.includes("."))throw new ne(te.ErrInvalidObjectKey,"key must not contain the '.'.");const o=t.issueTimeTicket(),s=Es(t,r,o),u=e.set(n,s,o);t.registerElement(s,e),u&&t.registerRemovedElement(u),t.push(_i.create(n,s.deepcopy(),e.getCreatedAt(),o))}static buildObjectMembers(t,e){const n={};for(const[r,o]of Object.entries(e)){if(r.includes("."))throw new ne(te.ErrInvalidObjectKey,"key must not contain the '.'.");const s=t.issueTimeTicket(),u=Es(t,o,s);n[r]=u}return n}static deleteInternal(t,e,n){const r=t.issueTimeTicket(),o=e.deleteByKey(n,r);o&&(t.push(mi.create(e.getCreatedAt(),o.getCreatedAt(),r)),t.registerRemovedElement(o))}getHandlers(){return this.handlers}}function Sh(i,t){const e=new rt(i,t);return new Proxy(t,e.getHandlers())}function Eh(i){return typeof i=="string"||i instanceof String?!isNaN(i):!1}function xh(i){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(i)}class rt{constructor(t,e){T(this,"context");T(this,"handlers");T(this,"array");this.context=t,this.array=e,this.handlers={get:(n,r,o)=>r==="getID"?()=>n.getCreatedAt():r==="getElementByID"?s=>{const u=n.getByID(s);if(!(!u||u.isRemoved()))return oi(t,u)}:r==="getElementByIndex"?s=>{const u=n.get(s);return oi(t,u)}:r==="getLast"?()=>oi(t,n.getLast()):r==="deleteByID"?s=>{const u=rt.deleteInternalByID(t,n,s);return oi(t,u)}:r==="insertAfter"?(s,u)=>{const c=rt.insertAfterInternal(t,n,s,u);return oi(t,c)}:r==="insertBefore"?(s,u)=>{const c=rt.insertBeforeInternal(t,n,s,u);return oi(t,c)}:r==="moveBefore"?(s,u)=>{rt.moveBeforeInternal(t,n,s,u)}:r==="moveAfter"?(s,u)=>{rt.moveAfterInternal(t,n,s,u)}:r==="moveFront"?s=>{rt.moveFrontInternal(t,n,s)}:r==="moveLast"?s=>{rt.moveLastInternal(t,n,s)}:Eh(r)?wi(t,n.get(Number(r))):r==="push"?s=>rt.pushInternal(t,n,s):r==="splice"?(s,u,...c)=>rt.splice(t,n,s,u,...c):r==="length"?n.length:typeof r=="symbol"&&r===Symbol.iterator?rt.iteratorInternal.bind(this,t,n):r==="includes"?(s,u)=>rt.includes(t,n,s,u):r==="indexOf"?(s,u)=>rt.indexOf(t,n,s,u):r==="lastIndexOf"?(s,u)=>rt.lastIndexOf(t,n,s,u):r==="toJSForTest"?()=>n.toJSForTest():r==="toTestString"?()=>rt.toTestString(n):typeof r=="string"&&xh(r)?(...s)=>{const u=Array.from(n).map(c=>wi(t,c));return Array.prototype[r].apply(u,s)}:Reflect.get(n,r,o),deleteProperty:(n,r)=>(Ne.isEnabled(wt.Trivial)&&Ne.trivial(`array[${r}]`),rt.deleteInternalByIndex(t,n,Number.parseInt(r)),!0)}}static*iteratorInternal(t,e){for(const n of e)yield oi(t,n)}static buildArrayElements(t,e){const n=[];for(const r of e){const o=t.issueTimeTicket(),s=Es(t,r,o);n.push(s)}return n}static pushInternal(t,e,n){return rt.insertAfterInternal(t,e,e.getLastCreatedAt(),n),e.length}static moveBeforeInternal(t,e,n,r){const o=t.issueTimeTicket(),s=e.getPrevCreatedAt(n);e.moveAfter(s,r,o),t.push(ci.create(e.getCreatedAt(),s,r,o))}static moveAfterInternal(t,e,n,r){const o=t.issueTimeTicket();e.moveAfter(n,r,o),t.push(ci.create(e.getCreatedAt(),n,r,o))}static moveFrontInternal(t,e,n){const r=t.issueTimeTicket(),o=e.getHead();e.moveAfter(o.getCreatedAt(),n,r),t.push(ci.create(e.getCreatedAt(),o.getCreatedAt(),n,r))}static moveLastInternal(t,e,n){const r=t.issueTimeTicket(),o=e.getLastCreatedAt();e.moveAfter(o,n,r),t.push(ci.create(e.getCreatedAt(),o,n,r))}static insertAfterInternal(t,e,n,r){const o=t.issueTimeTicket(),s=Es(t,r,o);return e.insertAfter(n,s),t.registerElement(s,e),t.push(Oo.create(e.getCreatedAt(),n,s.deepcopy(),o)),s}static insertBeforeInternal(t,e,n,r){return rt.insertAfterInternal(t,e,e.getPrevCreatedAt(n),r)}static deleteInternalByIndex(t,e,n){const r=t.issueTimeTicket(),o=e.deleteByIndex(n,r);if(o)return t.push(mi.create(e.getCreatedAt(),o.getCreatedAt(),r)),t.registerRemovedElement(o),o}static deleteInternalByID(t,e,n){const r=t.issueTimeTicket(),o=e.delete(n,r);return t.push(mi.create(e.getCreatedAt(),o.getCreatedAt(),r)),t.registerRemovedElement(o),o}static splice(t,e,n,r,...o){const s=e.length,u=n>=0?Math.min(n,s):Math.max(s+n,0),c=r===void 0?s:r<0?u:Math.min(u+r,s),m=[];for(let y=u;y<c;y++){const f=rt.deleteInternalByIndex(t,e,u);if(f){const l=f.deepcopy();l.setRemovedAt(),m.push(wi(t,l))}}if(o){let y=u===0?e.getHead().getID():e.get(u-1).getID();for(const f of o)y=rt.insertAfterInternal(t,e,y,f).getID()}return m}static includes(t,e,n,r){var u;const o=e.length,s=r===void 0?0:r<0?Math.max(r+o,0):r;if(s>=o)return!1;if(tt.isSupport(n))return Array.from(e).map(m=>wi(t,m)).includes(n,s);for(let c=s;c<o;c++)if(((u=e.get(c))==null?void 0:u.getID())===n.getID())return!0;return!1}static indexOf(t,e,n,r){var u;const o=e.length,s=r===void 0?0:r<0?Math.max(r+o,0):r;if(s>=o)return-1;if(tt.isSupport(n))return Array.from(e).map(m=>wi(t,m)).indexOf(n,s);for(let c=s;c<o;c++)if(((u=e.get(c))==null?void 0:u.getID())===n.getID())return c;return-1}static lastIndexOf(t,e,n,r){var u;const o=e.length,s=r===void 0||r>=o?o-1:r<0?r+o:r;if(s<0)return-1;if(tt.isSupport(n))return Array.from(e).map(m=>wi(t,m)).lastIndexOf(n,s);for(let c=s;c>0;c--)if(((u=e.get(c))==null?void 0:u.getID())===n.getID())return c;return-1}static toTestString(t){return t.toTestString()}getHandlers(){return this.handlers}}let Ps=class{constructor(t,e){T(this,"context");T(this,"text");this.context=t,this.text=e}initialize(t,e){this.context=t,this.text=e}getID(){return this.text.getID()}edit(t,e,n,r){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new ne(te.ErrInvalidArgument,"from should be less than or equal to to");const o=this.text.indexRangeToPosRange(t,e);Ne.isEnabled(wt.Debug)&&Ne.debug(`EDIT: f:${t}->${o[0].toTestString()}, t:${e}->${o[1].toTestString()} c:${n}`);const s=r?Yi(r):void 0,u=this.context.issueTimeTicket(),[c,,m,y]=this.text.edit(o,n,u,s);for(const f of m)this.context.registerGCPair(f);return this.context.push(new Io(this.text.getCreatedAt(),o[0],o[1],c,n,s?new Map(Object.entries(s)):new Map,u)),this.text.findIndexesFromRange(y)}delete(t,e){return this.edit(t,e,"")}empty(){return this.edit(0,this.length,"")}setStyle(t,e,n){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new ne(te.ErrInvalidArgument,"from should be less than or equal to to");const r=this.text.indexRangeToPosRange(t,e);Ne.isEnabled(wt.Debug)&&Ne.debug(`STYL: f:${t}->${r[0].toTestString()}, t:${e}->${r[1].toTestString()} a:${JSON.stringify(n)}`);const o=Yi(n),s=this.context.issueTimeTicket(),[u,c]=this.text.setStyle(r,o,s);for(const m of c)this.context.registerGCPair(m);return this.context.push(new No(this.text.getCreatedAt(),r[0],r[1],u,new Map(Object.entries(o)),s)),!0}indexRangeToPosRange(t){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");const e=this.text.indexRangeToPosRange(t[0],t[1]);return[e[0].toStruct(),e[1].toStruct()]}posRangeToIndexRange(t){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");const e=this.text.findIndexesFromRange([cn.fromStruct(t[0]),cn.fromStruct(t[1])]);return[e[0],e[1]]}toTestString(){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(t,e){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(t,e)}};class Cs{constructor(t,e){T(this,"valueType");T(this,"value");T(this,"context");T(this,"counter");this.valueType=t,this.value=e}initialize(t,e){this.valueType=e.getValueType(),this.context=t,this.counter=e,this.value=e.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(t){if(!this.context||!this.counter)throw new ne(te.ErrNotInitialized,"Counter is not initialized yet");const e=this.context.issueTimeTicket(),n=tt.of(t,e);if(!n.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof n.getValue()}`);return this.counter.increase(n),this.context.push(eo.create(this.counter.getCreatedAt(),n,e)),this}toJSForTest(){if(!this.context||!this.counter)throw new ne(te.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function qa(i,t,e){const{type:n}=i,r=e.issueTimeTicket();if(n===Gr){ju(i);const{value:o}=i,s=Ct.create(pt.of(r,0),n,o);t.append(s)}else{const{children:o=[]}=i,{attributes:s}=i;let u;if(typeof s=="object"&&!uu(s)){const m=Yi(s);u=new Xr;for(const[y,f]of Object.entries(m))u.set(y,f,r)}const c=Ct.create(pt.of(r,0),n,void 0,u);t.append(c);for(const m of o)qa(m,c,e)}}function kh(i,t){const{type:e}=t,n=i.issueTimeTicket();let r;if(t.type===Gr){const{value:o}=t;r=Ct.create(pt.of(n,0),e,o)}else if(t){const{children:o=[]}=t,{attributes:s}=t;let u;if(typeof s=="object"&&!uu(s)){const c=Yi(s);u=new Xr;for(const[m,y]of Object.entries(c))u.set(m,y,n)}r=Ct.create(pt.of(i.issueTimeTicket(),0),e,void 0,u);for(const c of o)qa(c,r,i)}return r}function ju(i){if(!i.value.length)throw new ne(te.ErrInvalidArgument,"text node cannot have empty value");return!0}function xl(i){if(!i.length)return!0;if(i[0].type===Gr)for(const e of i){const{type:n}=e;if(n!==Gr)throw new ne(te.ErrInvalidArgument,"element node and text node cannot be passed together");ju(e)}else for(const e of i){const{type:n}=e;if(n===Gr)throw new ne(te.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class Ls{constructor(t){T(this,"initialRoot");T(this,"context");T(this,"tree");this.initialRoot=t}initialize(t,e){this.context=t,this.tree=e}getID(){return this.tree.getID()}buildRoot(t){if(!this.initialRoot)return Ct.create(pt.of(t.issueTimeTicket(),0),Ef);const e=Ct.create(pt.of(t.issueTimeTicket(),0),this.initialRoot.type);for(const n of this.initialRoot.children)qa(n,e,t);return e}getSize(){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}styleByPath(t,e){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new ne(te.ErrInvalidArgument,"path should not be empty");const[n,r]=this.tree.pathToPosRange(t),o=this.context.issueTimeTicket(),s=e?Yi(e):void 0,[u]=this.tree.style([n,r],s,o);this.context.push(Yr.create(this.tree.getCreatedAt(),n,r,u,s?new Map(Object.entries(s)):new Map,o))}style(t,e,n){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new ne(te.ErrInvalidArgument,"from should be less than or equal to to");const r=this.tree.findPos(t),o=this.tree.findPos(e),s=this.context.issueTimeTicket(),u=n?Yi(n):void 0,[c,m]=this.tree.style([r,o],u,s);for(const y of m)this.context.registerGCPair(y);this.context.push(Yr.create(this.tree.getCreatedAt(),r,o,c,u?new Map(Object.entries(u)):new Map,s))}removeStyle(t,e,n){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new ne(te.ErrInvalidArgument,"from should be less than or equal to to");const r=this.tree.findPos(t),o=this.tree.findPos(e),s=this.context.issueTimeTicket(),[u,c]=this.tree.removeStyle([r,o],n,s);for(const m of c)this.context.registerGCPair(m);this.context.push(Yr.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),r,o,u,n,s))}editInternal(t,e,n,r=0){var m;if(n.length!==0&&n[0]&&(xl(n),n[0].type!==Gr))for(const y of n){const{children:f=[]}=y;xl(f)}const o=this.context.getLastTimeTicket();let s=new Array;if(((m=n[0])==null?void 0:m.type)===Gr){let y="";for(const f of n){const{value:l}=f;y+=l}s.push(Ct.create(pt.of(this.context.issueTimeTicket(),0),Gr,y))}else s=n.map(y=>y&&kh(this.context,y)).filter(y=>y);const[,u,c]=this.tree.edit([t,e],s.length?s.map(y=>y==null?void 0:y.deepcopy()):void 0,r,o,()=>this.context.issueTimeTicket());for(const y of u)this.context.registerGCPair(y);return this.context.push(_o.create(this.tree.getCreatedAt(),t,e,s.length?s:void 0,r,c,o)),!0}editByPath(t,e,n,r=0){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new ne(te.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new ne(te.ErrInvalidArgument,"path should not be empty");const o=this.tree.pathToPos(t),s=this.tree.pathToPos(e);return this.editInternal(o,s,n?[n]:[],r)}editBulkByPath(t,e,n,r=0){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new ne(te.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new ne(te.ErrInvalidArgument,"path should not be empty");const o=this.tree.pathToPos(t),s=this.tree.pathToPos(e);return this.editInternal(o,s,n,r)}edit(t,e,n,r=0){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new ne(te.ErrInvalidArgument,"from should be less than or equal to to");const o=this.tree.findPos(t),s=this.tree.findPos(e);return this.editInternal(o,s,n?[n]:[],r)}editBulk(t,e,n,r=0){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new ne(te.ErrInvalidArgument,"from should be less than or equal to to");const o=this.tree.findPos(t),s=this.tree.findPos(e);return this.editInternal(o,s,n,r)}toXML(){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(t){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(t)}pathToIndex(t){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(t)}pathRangeToPosRange(t){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");const e=[this.tree.pathToIndex(t[0]),this.tree.pathToIndex(t[1])],n=this.tree.indexRangeToPosRange(e);return[n[0].toStruct(),n[1].toStruct()]}indexRangeToPosRange(t){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(t)}posRangeToIndexRange(t){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");const e=[ln.fromStruct(t[0]),ln.fromStruct(t[1])];return this.tree.posRangeToIndexRange(e)}posRangeToPathRange(t){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");const e=[ln.fromStruct(t[0]),ln.fromStruct(t[1])];return this.tree.posRangeToPathRange(e)}}function kl(i,t){return Fu(i,t)}function oi(i,t){if(t){if(t instanceof tt)return t;if(t instanceof xt)return Fu(i,t);if(t instanceof Lt)return Sh(i,t);if(t instanceof Gt)return new Ps(i,t);if(t instanceof Rt){const e=new Cs(Un.IntegerCnt,0);return e.initialize(i,t),e}else if(t instanceof Yt){const e=new Ls;return e.initialize(i,t),e}}else return;throw new TypeError(`Unsupported type of element: ${typeof t}`)}function wi(i,t){const e=oi(i,t);return e instanceof tt?e.getValue():e}function Es(i,t,e){let n;if(tt.isSupport(t))n=tt.of(t,e);else if(Array.isArray(t))n=Lt.create(e,rt.buildArrayElements(i,t));else if(typeof t=="object")t instanceof Ps?(n=Gt.create(Qi.create(),e),t.initialize(i,n)):t instanceof Cs?(n=Rt.create(t.getValueType(),t.getValue(),e),t.initialize(i,n)):t instanceof Ls?(n=Yt.create(t.buildRoot(i),e),t.initialize(i,n)):n=xt.create(e,Eo.buildObjectMembers(i,t));else throw new TypeError(`Unsupported type of value: ${typeof t}`);return n}const Ol=50;class Oh{constructor(){T(this,"undoStack",[]);T(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(t){this.undoStack.length>=Ol&&this.undoStack.shift(),this.undoStack.push(t)}popUndo(){return this.undoStack.pop()}pushRedo(t){this.redoStack.length>=Ol&&this.redoStack.shift(),this.redoStack.push(t)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const Ih="yorkie-devtools-panel",Nh="yorkie-devtools-sdk";function _h(i){return[ft.StatusChanged,ft.Snapshot,ft.LocalChange,ft.RemoteChange,ft.Initialized,ft.Watched,ft.Unwatched,ft.PresenceChanged].includes(i.type)}function Ph(i){return i.every(_h)}let Fi="disconnected";const Il=new Map,Xo=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=Xo);function zo(i,t){(t!=null&&t.force||Fi!=="disconnected")&&window.postMessage({source:Nh,...i},"*")}function Ch(i){if(!i.isEnableDevtools()||typeof window>"u"||Il.has(i.getKey()))return;Xo.set(i.getKey(),[]);const t=i.subscribe("all",e=>{Ph(e)&&(Xo.get(i.getKey()).push(e),Fi==="synced"&&zo({msg:"doc::sync::partial",docKey:i.getKey(),event:e}))});Il.set(i.getKey(),[t]),zo({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",e=>{var r;if(((r=e.data)==null?void 0:r.source)!==Ih)return;switch(e.data.msg){case"devtools::connect":if(Fi!=="disconnected")break;Fi="connected",zo({msg:"doc::available",docKey:i.getKey()}),Ne.info(`[YD] Devtools connected. Doc: ${i.getKey()}`);break;case"devtools::disconnect":Fi="disconnected",Ne.info(`[YD] Devtools disconnected. Doc: ${i.getKey()}`);break;case"devtools::subscribe":Fi="synced",zo({msg:"doc::sync::full",docKey:i.getKey(),events:Xo.get(i.getKey())}),Ne.info(`[YD] Devtools subscribed. Doc: ${i.getKey()}`);break}})}var si=(i=>(i.Detached="detached",i.Attached="attached",i.Removed="removed",i))(si||{}),ft=(i=>(i.StatusChanged="status-changed",i.ConnectionChanged="connection-changed",i.SyncStatusChanged="sync-status-changed",i.Snapshot="snapshot",i.LocalChange="local-change",i.RemoteChange="remote-change",i.Initialized="initialized",i.Watched="watched",i.Unwatched="unwatched",i.PresenceChanged="presence-changed",i.Broadcast="broadcast",i.LocalBroadcast="local-broadcast",i.AuthError="auth-error",i))(ft||{}),xo=(i=>(i.Connected="connected",i.Disconnected="disconnected",i))(xo||{}),ba=(i=>(i.Synced="synced",i.SyncFailed="sync-failed",i))(ba||{});class Uu{constructor(t,e){T(this,"key");T(this,"status");T(this,"opts");T(this,"changeID");T(this,"checkpoint");T(this,"localChanges");T(this,"root");T(this,"clone");T(this,"eventStream");T(this,"eventStreamObserver");T(this,"onlineClients");T(this,"presences");T(this,"history");T(this,"internalHistory");T(this,"isUpdating");this.opts=e||{},this.key=t,this.status="detached",this.root=So.create(),this.changeID=Lf,this.checkpoint=Rf,this.localChanges=[],this.eventStream=Th(n=>{this.eventStreamObserver=n}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new Oh,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},Ch(this)}update(t,e){if(this.getStatus()==="removed")throw new ne(te.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const n=this.changeID.getActorID(),r=$i.create(this.changeID.next(),this.clone.root,this.clone.presences.get(n)||{},e);try{const o=kl(r,this.clone.root.getObject());this.presences.has(n)||this.clone.presences.set(n,{}),this.isUpdating=!0,t(o,new Fs(r,this.clone.presences.get(n)))}catch(o){throw this.clone=void 0,o}finally{this.isUpdating=!1}if(r.hasChange()){Ne.isEnabled(wt.Trivial)&&Ne.trivial(`trying to update a local change: ${this.toJSON()}`);const o=r.getChange(),{opInfos:s,reverseOps:u}=o.execute(this.root,this.presences,Ye.Local),c=r.getReversePresence();c&&u.push({type:"presence",value:c}),this.localChanges.push(o),u.length>0&&this.internalHistory.pushUndo(u),s.length>0&&this.internalHistory.clearRedo(),this.changeID=o.getID();const m=[];s.length>0&&m.push({type:"local-change",source:Ye.Local,value:{message:o.getMessage()||"",operations:s,actor:n,clientSeq:o.getID().getClientSeq(),serverSeq:o.getID().getServerSeq()},rawChange:this.isEnableDevtools()?o.toStruct():void 0}),o.hasPresenceChange()&&m.push({type:"presence-changed",source:Ye.Local,value:{clientID:n,presence:this.getPresence(n)}}),this.publish(m),Ne.isEnabled(wt.Trivial)&&Ne.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(t,e,n,r){if(typeof t=="string"){if(typeof e!="function")throw new ne(te.ErrInvalidArgument,"Second argument must be a callback function");if(t==="presence"){const u=e;return this.eventStream.subscribe(c=>{for(const m of c)m.type!=="initialized"&&m.type!=="watched"&&m.type!=="unwatched"&&m.type!=="presence-changed"||u(m)},n,r)}if(t==="my-presence"){const u=e;return this.eventStream.subscribe(c=>{for(const m of c)m.type!=="initialized"&&m.type!=="presence-changed"||m.type==="presence-changed"&&m.value.clientID!==this.changeID.getActorID()||u(m)},n,r)}if(t==="others"){const u=e;return this.eventStream.subscribe(c=>{for(const m of c)m.type!=="watched"&&m.type!=="unwatched"&&m.type!=="presence-changed"||m.value.clientID!==this.changeID.getActorID()&&u(m)},n,r)}if(t==="connection"){const u=e;return this.eventStream.subscribe(c=>{for(const m of c)m.type==="connection-changed"&&u(m)},n,r)}if(t==="status"){const u=e;return this.eventStream.subscribe(c=>{for(const m of c)m.type==="status-changed"&&u(m)},n,r)}if(t==="sync"){const u=e;return this.eventStream.subscribe(c=>{for(const m of c)m.type==="sync-status-changed"&&u(m)},n,r)}if(t==="local-broadcast"){const u=e;return this.eventStream.subscribe(c=>{for(const m of c)m.type==="local-broadcast"&&u(m)},n)}if(t==="broadcast"){const u=e;return this.eventStream.subscribe(c=>{for(const m of c)m.type==="broadcast"&&u(m)},n)}if(t==="auth-error"){const u=e;return this.eventStream.subscribe(c=>{for(const m of c)m.type==="auth-error"&&u(m)},n)}if(t==="all"){const u=e;return this.eventStream.subscribe(u,n,r)}const o=t,s=e;return this.eventStream.subscribe(u=>{for(const c of u){if(c.type!=="local-change"&&c.type!=="remote-change")continue;const m=[];for(const y of c.value.operations)this.isSameElementOrChildOf(y.path,o)&&m.push(y);m.length&&s({...c,value:{...c.value,operations:m}})}},n,r)}if(typeof t=="function"){const o=t,s=e,u=n;return this.eventStream.subscribe(c=>{for(const m of c)m.type!=="snapshot"&&m.type!=="local-change"&&m.type!=="remote-change"||o(m)},s,u)}throw new ne(te.ErrInvalidArgument,`"${t}" is not a valid`)}publish(t){this.eventStreamObserver&&this.eventStreamObserver.next(t)}isSameElementOrChildOf(t,e){if(e===t)return!0;const n=t.split(".");return e.split(".").every((o,s)=>o===n[s])}removePushedLocalChanges(t){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>t);)this.localChanges.shift()}applyChangePack(t){const e=t.hasSnapshot();e?this.applySnapshot(t.getCheckpoint().getServerSeq(),t.getVersionVector(),t.getSnapshot(),t.getCheckpoint().getClientSeq()):(this.applyChanges(t.getChanges(),Ye.Remote),this.removePushedLocalChanges(t.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(t.getCheckpoint()),e||this.garbageCollect(t.getVersionVector()),t.getIsRemoved()&&this.applyStatus("removed"),Ne.isEnabled(wt.Trivial)&&Ne.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:sn(this.presences)})}createChangePack(){const t=Array.from(this.localChanges),e=this.checkpoint.increaseClientSeq(t.length);return _s.create(this.key,e,!1,t,this.getVersionVector())}setActor(t){for(const e of this.localChanges)e.setActor(t);this.changeID=this.changeID.setActor(t)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const t=$i.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return kl(t,this.clone.root.getObject())}garbageCollect(t){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(t),this.root.garbageCollect(t))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(t,e,n,r=-1){const{root:o,presences:s}=lt.bytesToSnapshot(n);this.root=new So(o),this.presences=s,this.changeID=this.changeID.setClocks(e.maxLamport(),e),this.clone=void 0,this.removePushedLocalChanges(r),this.applyChanges(this.localChanges,Ye.Local),this.publish([{type:"snapshot",source:Ye.Remote,value:{serverSeq:t.toString(),snapshot:this.isEnableDevtools()?lt.bytesToHex(n):void 0,snapshotVector:lt.versionVectorToHex(e)}}])}applyChanges(t,e){Ne.isEnabled(wt.Debug)&&Ne.debug(`trying to apply ${t.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),Ne.isEnabled(wt.Trivial)&&Ne.trivial(t.map(n=>`${n.getID().toTestString()}	${n.toTestString()}`).join(`
`));for(const n of t)this.applyChange(n,e);Ne.isEnabled(wt.Debug)&&Ne.debug(`after appling ${t.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(t,e){this.ensureClone(),t.execute(this.clone.root,this.clone.presences,e);const n=[],r=t.getID().getActorID();if(t.hasPresenceChange()&&this.onlineClients.has(r)){const s=t.getPresenceChange();switch(s.type){case pi.Put:n.push(this.presences.has(r)?{type:"presence-changed",source:e,value:{clientID:r,presence:s.presence}}:{type:"watched",source:Ye.Remote,value:{clientID:r,presence:s.presence}});break;case pi.Clear:n.push({type:"unwatched",source:Ye.Remote,value:{clientID:r,presence:this.getPresence(r)}}),this.removeOnlineClient(r);break}}const{opInfos:o}=t.execute(this.root,this.presences,e);if(this.changeID=this.changeID.syncClocks(t.getID()),o.length>0){const s=this.isEnableDevtools()?t.toStruct():void 0;n.push(e===Ye.Remote?{type:"remote-change",source:e,value:{actor:r,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:o},rawChange:s}:{type:"local-change",source:e,value:{actor:r,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:o},rawChange:s})}n.length>0&&this.publish(n)}applyWatchStream(t){if(t.body.case==="initialization"){const e=t.body.value.clientIds,n=new Set;for(const r of e)r!==this.changeID.getActorID()&&n.add(r);this.setOnlineClients(n),this.publish([{type:"initialized",source:Ye.Local,value:this.getPresences()}]);return}if(t.body.case==="event"){const{type:e,publisher:n}=t.body.value,r=[];if(e===Oi.DOCUMENT_WATCHED){if(this.onlineClients.has(n)&&this.hasPresence(n))return;this.addOnlineClient(n),this.hasPresence(n)&&r.push({type:"watched",source:Ye.Remote,value:{clientID:n,presence:this.getPresence(n)}})}else if(e===Oi.DOCUMENT_UNWATCHED){const o=this.getPresence(n);this.removeOnlineClient(n),o&&r.push({type:"unwatched",source:Ye.Remote,value:{clientID:n,presence:o}})}else if(e===Oi.DOCUMENT_BROADCAST&&t.body.value.body){const{topic:o,payload:s}=t.body.value.body,u=new TextDecoder;r.push({type:"broadcast",value:{clientID:n,topic:o,payload:JSON.parse(u.decode(s))}})}r.length>0&&this.publish(r)}}applyStatus(t){this.status=t,t==="detached"&&this.setActor(Is),this.publish([{source:t==="removed"?Ye.Remote:Ye.Local,type:"status-changed",value:t==="attached"?{status:t,actorID:this.changeID.getActorID()}:{status:t}}])}applyDocEventForReplay(t){if(t.type==="status-changed"){this.applyStatus(t.value.status),t.value.status==="attached"&&this.setActor(t.value.actorID);return}if(t.type==="snapshot"){const{snapshot:e,serverSeq:n,snapshotVector:r}=t.value;if(!e)return;this.applySnapshot(BigInt(n),lt.hexToVersionVector(r),lt.hexToBytes(e));return}if(t.type==="local-change"||t.type==="remote-change"){if(!t.rawChange)return;const e=Xi.fromStruct(t.rawChange);this.applyChange(e,t.source)}if(t.type==="initialized"){const e=new Set;for(const{clientID:n,presence:r}of t.value)e.add(n),this.presences.set(n,r);this.setOnlineClients(e);return}if(t.type==="watched"){const{clientID:e,presence:n}=t.value;this.addOnlineClient(e),this.presences.set(e,n);return}if(t.type==="unwatched"){const{clientID:e}=t.value;this.removeOnlineClient(e),this.presences.delete(e)}if(t.type==="presence-changed"){const{clientID:e,presence:n}=t.value;this.presences.set(e,n)}}applyDocEventsForReplay(t){for(const e of t)this.applyDocEventForReplay(e)}getValueByPath(t){if(!t.startsWith("$"))throw new ne(te.ErrInvalidArgument,'path must start with "$"');const e=t.split(".");e.shift();let n=this.getRoot();for(const r of e)if(n=n[r],n===void 0)return;return n}setOnlineClients(t){this.onlineClients=t}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(t){this.onlineClients.add(t)}removeOnlineClient(t){this.onlineClients.delete(t)}hasPresence(t){return this.presences.has(t)}getMyPresence(){if(this.status!=="attached")return{};const t=this.presences.get(this.changeID.getActorID());return t?sn(t):{}}getPresence(t){if(t===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(t))return;const e=this.presences.get(t);return e?sn(e):void 0}getPresenceForTest(t){const e=this.presences.get(t);return e?sn(e):void 0}getPresences(){const t=[];t.push({clientID:this.changeID.getActorID(),presence:sn(this.getMyPresence())});for(const e of this.onlineClients)this.presences.has(e)&&t.push({clientID:e,presence:sn(this.presences.get(e))});return t}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const t=this.getChangeID().getActorID();return this.getPresences().filter(e=>e.clientID!==t).sort((e,n)=>e.clientID>n.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}filterVersionVector(t){const n=this.changeID.getVersionVector().filter(t);this.changeID=this.changeID.setVersionVector(n)}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new ne(te.ErrRefused,"Undo is not allowed during an update");const t=this.internalHistory.popUndo();if(t===void 0)throw new ne(te.ErrRefused,"There is no operation to be undone");this.ensureClone();const e=$i.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const m of t){if(!(m instanceof fn)){new Fs(e,sn(this.clone.presences.get(this.changeID.getActorID()))).set(m.value,{addToHistory:!0});continue}const y=e.issueTimeTicket();m.setExecutedAt(y),e.push(m)}const n=e.getChange();n.execute(this.clone.root,this.clone.presences,Ye.UndoRedo);const{opInfos:r,reverseOps:o}=n.execute(this.root,this.presences,Ye.UndoRedo),s=e.getReversePresence();if(s&&o.push({type:"presence",value:s}),o.length>0&&this.internalHistory.pushRedo(o),!n.hasPresenceChange()&&r.length===0)return;this.localChanges.push(n),this.changeID=n.getID();const u=this.changeID.getActorID(),c=[];r.length>0&&c.push({type:"local-change",source:Ye.UndoRedo,value:{message:n.getMessage()||"",operations:r,actor:u,clientSeq:n.getID().getClientSeq(),serverSeq:n.getID().getServerSeq()},rawChange:this.isEnableDevtools()?n.toStruct():void 0}),n.hasPresenceChange()&&c.push({type:"presence-changed",source:Ye.UndoRedo,value:{clientID:u,presence:this.getPresence(u)}}),this.publish(c)}redo(){if(this.isUpdating)throw new ne(te.ErrRefused,"Redo is not allowed during an update");const t=this.internalHistory.popRedo();if(t===void 0)throw new ne(te.ErrRefused,"There is no operation to be redone");this.ensureClone();const e=$i.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const m of t){if(!(m instanceof fn)){new Fs(e,sn(this.clone.presences.get(this.changeID.getActorID()))).set(m.value,{addToHistory:!0});continue}const y=e.issueTimeTicket();m.setExecutedAt(y),e.push(m)}const n=e.getChange();n.execute(this.clone.root,this.clone.presences,Ye.UndoRedo);const{opInfos:r,reverseOps:o}=n.execute(this.root,this.presences,Ye.UndoRedo),s=e.getReversePresence();if(s&&o.push({type:"presence",value:s}),o.length>0&&this.internalHistory.pushUndo(o),!n.hasPresenceChange()&&r.length===0)return;this.localChanges.push(n),this.changeID=n.getID();const u=this.changeID.getActorID(),c=[];r.length>0&&c.push({type:"local-change",source:Ye.UndoRedo,value:{message:n.getMessage()||"",operations:r,actor:u,clientSeq:n.getID().getClientSeq(),serverSeq:n.getID().getServerSeq()},rawChange:this.isEnableDevtools()?n.toStruct():void 0}),n.hasPresenceChange()&&c.push({type:"presence-changed",source:Ye.UndoRedo,value:{clientID:u,presence:this.getPresence(u)}}),this.publish(c)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}broadcast(t,e,n){const r={type:"local-broadcast",value:{topic:t,payload:e},options:n};this.publish([r])}getVersionVector(){return this.changeID.getVersionVector()}}function Lh(i,t){let e=t;return{authInterceptor:o=>async s=>(i&&s.header.set("x-api-key",i),e&&s.header.set("authorization",e),await o(s)),setToken:o=>{e=o}}}const Rh="@yorkie-js/sdk",Dh="0.6.0",Bh="Yorkie JS SDK",Mh="./src/yorkie.ts",qh={access:"public",main:"./dist/yorkie-js-sdk.js",typings:"./dist/yorkie-js-sdk.d.ts"},Fh=["dist"],jh={build:"tsc && vite build","build:proto":"npx buf generate","build:docs":"typedoc","build:ghpages":"mkdir -p ghpages/examples && cp -r docs ghpages/api-reference && find ../../examples -name 'dist' -type d -exec sh -c 'cp -r {} ghpages/examples/$(basename $(dirname {}))' \\;",dev:"vite build -c vite.preview.ts && vite preview",test:"vitest run","test:watch":"vitest","test:bench":"vitest bench","test:ci":"vitest run --coverage","test:yorkie.dev":"TEST_RPC_ADDR=https://api.yorkie.dev vitest run --coverage",prepare:"pnpm build"},Uh={node:">=18.0.0",npm:">=7.1.0"},Jh={type:"git",url:"git+https://github.com/yorkie-team/yorkie-js-sdk.git"},$h={name:"hackerwins",email:"susukang98@gmail.com"},zh="Apache-2.0",Vh={url:"https://github.com/yorkie-team/yorkie-js-sdk/issues"},Kh="https://github.com/yorkie-team/yorkie-js-sdk#readme",Hh={"@buf/googleapis_googleapis.bufbuild_es":"^1.4.0-20240524201209-f0e53af8f2fc.3","@bufbuild/buf":"^1.28.1","@bufbuild/protoc-gen-es":"^1.6.0","@connectrpc/protoc-gen-connect-es":"^1.4.0","@types/express":"^4.17.21","@types/google-protobuf":"^3.15.5","@types/long":"^4.0.1","@typescript-eslint/eslint-plugin":"^6.21.0","@typescript-eslint/parser":"^6.21.0","@vitest/coverage-istanbul":"^0.34.5","@vitest/coverage-v8":"^0.34.5",axios:"^1.7.7","eslint-plugin-tsdoc":"^0.2.16",express:"^4.21.1",prettier:"^2.7.1","ts-node":"^10.9.1",typedoc:"^0.25.13",typescript:"^5.3.3","typescript-transform-paths":"^3.3.1",vite:"^5.0.12","vite-plugin-commonjs":"^0.10.1","vite-plugin-dts":"^3.9.1","vite-tsconfig-paths":"^4.3.1",vitest:"^0.34.5"},Wh={"@bufbuild/protobuf":"^1.6.0","@connectrpc/connect":"^1.4.0","@connectrpc/connect-web":"^1.4.0",long:"^5.2.0"},Nl={name:Rh,version:Dh,description:Bh,main:Mh,publishConfig:qh,files:Fh,scripts:jh,engines:Uh,repository:Jh,author:$h,license:zh,bugs:Vh,homepage:Kh,devDependencies:Hh,dependencies:Wh};function Gh(){return i=>async t=>(t.header.set("x-yorkie-user-agent",Nl.name+"/"+Nl.version),await i(t))}const Yh=i=>{try{if(JSON.stringify(i)===void 0)return!1}catch{return!1}return!0};var Qo=(i=>(i.Manual="manual",i.Realtime="realtime",i.RealtimePushOnly="realtime-pushonly",i.RealtimeSyncOff="realtime-syncoff",i))(Qo||{});const Vo={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3},$s={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class Ju{constructor(t,e){T(this,"id");T(this,"key");T(this,"metadata");T(this,"status");T(this,"attachmentMap");T(this,"apiKey");T(this,"authTokenInjector");T(this,"conditions");T(this,"syncLoopDuration");T(this,"reconnectStreamDelay");T(this,"retrySyncLoopDelay");T(this,"rpcClient");T(this,"setAuthToken");T(this,"taskQueue");T(this,"processing",!1);T(this,"keepalive",!1);e=e||Vo,this.key=e.key?e.key:qu(),this.metadata=e.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=e.apiKey||"",this.authTokenInjector=e.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=e.syncLoopDuration??Vo.syncLoopDuration,this.reconnectStreamDelay=e.reconnectStreamDelay??Vo.reconnectStreamDelay,this.retrySyncLoopDelay=e.retrySyncLoopDelay??Vo.retrySyncLoopDelay;const{authInterceptor:n,setToken:r}=Lh(this.apiKey);this.setAuthToken=r,this.rpcClient=Kc(mf,pf({baseUrl:t,interceptors:[n,Gh()],fetch:(o,s)=>{const u={...s,keepalive:this.keepalive};return fetch(o,u)}})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const t=await this.authTokenInjector();this.setAuthToken(t)}return this.enqueueTask(async()=>this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":this.apiKey}}).then(t=>{this.id=t.clientId,this.status="activated",this.runSyncLoop(),Ne.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(async t=>{throw Ne.error(`[AC] c:"${this.getKey()}" err :`,t),await this.handleConnectError(t),t}))}deactivate(t={keepalive:!1}){if(this.status==="deactivated")return Promise.resolve();const e=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}),this.deactivateInternal(),Ne.info(`[DC] c"${this.getKey()}" deactivated`)}catch(n){throw Ne.error(`[DC] c:"${this.getKey()}" err :`,n),await this.handleConnectError(n),n}};if(t.keepalive){this.keepalive=!0;const n=e();return this.keepalive=!1,n}return this.enqueueTask(e)}attach(t,e={}){if(!this.isActive())throw new ne(te.ErrClientNotActivated,`${this.key} is not active`);if(t.getStatus()!==si.Detached)throw new ne(te.ErrDocumentNotDetached,`${t.getKey()} is not detached`);t.setActor(this.id),t.update((o,s)=>s.set(e.initialPresence||{}));const n=t.subscribe("local-broadcast",async o=>{var y;const{topic:s,payload:u}=o.value,c=(y=o.options)==null?void 0:y.error,m=o.options;try{await this.broadcast(t.getKey(),s,u,m)}catch(f){f instanceof Error&&(c==null||c(f))}}),r=e.syncMode??"realtime";return this.enqueueTask(async()=>this.rpcClient.attachDocument({clientId:this.id,changePack:lt.toChangePack(t.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}).then(async o=>{const s=lt.fromChangePack(o.changePack);if(t.applyChangePack(s),t.getStatus()===si.Removed)return t;t.applyStatus(si.Attached),this.attachmentMap.set(t.getKey(),new wh(this.reconnectStreamDelay,t,o.documentId,r,n)),r!=="manual"&&await this.runWatchLoop(t.getKey()),Ne.info(`[AD] c:"${this.getKey()}" attaches d:"${t.getKey()}"`);const u=t.getRootObject();if(e.initialRoot){const c=e.initialRoot;t.update(m=>{for(const[y,f]of Object.entries(c))if(!u.has(y)){const l=y;m[l]=f}})}return t}).catch(async o=>{throw Ne.error(`[AD] c:"${this.getKey()}" err :`,o),await this.handleConnectError(o),o}))}detach(t,e={}){if(!this.isActive())throw new ne(te.ErrClientNotActivated,`${this.key} is not active`);const n=this.attachmentMap.get(t.getKey());if(!n)throw new ne(te.ErrDocumentNotAttached,`${t.getKey()} is not attached`);return t.update((r,o)=>o.clear()),this.enqueueTask(async()=>this.rpcClient.detachDocument({clientId:this.id,documentId:n.docID,changePack:lt.toChangePack(t.createChangePack()),removeIfNotAttached:e.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}).then(r=>{const o=lt.fromChangePack(r.changePack);return t.applyChangePack(o),t.getStatus()!==si.Removed&&t.applyStatus(si.Detached),this.detachInternal(t.getKey()),Ne.info(`[DD] c:"${this.getKey()}" detaches d:"${t.getKey()}"`),t}).catch(async r=>{throw Ne.error(`[DD] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}async changeSyncMode(t,e){if(!this.isActive())throw new ne(te.ErrClientNotActivated,`${this.key} is not active`);const n=this.attachmentMap.get(t.getKey());if(!n)throw new ne(te.ErrDocumentNotAttached,`${t.getKey()} is not attached`);const r=n.syncMode;return r===e?t:(n.changeSyncMode(e),e==="manual"?(n.cancelWatchStream(),t):(e==="realtime"&&(n.remoteChangeEventReceived=!0),r==="manual"&&await this.runWatchLoop(t.getKey()),t))}sync(t){if(!this.isActive())throw new ne(te.ErrClientNotActivated,`${this.key} is not active`);if(t){const e=this.attachmentMap.get(t.getKey());if(!e)throw new ne(te.ErrDocumentNotAttached,`${t.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(e,"realtime").catch(async n=>{throw Ne.error(`[SY] c:"${this.getKey()}" err :`,n),await this.handleConnectError(n),n}))}return this.enqueueTask(async()=>{const e=[];for(const[,n]of this.attachmentMap)e.push(this.syncInternal(n,n.syncMode));return Promise.all(e).catch(async n=>{throw Ne.error(`[SY] c:"${this.getKey()}" err :`,n),await this.handleConnectError(n),n})})}remove(t){if(!this.isActive())throw new ne(te.ErrClientNotActivated,`${this.key} is not active`);const e=this.attachmentMap.get(t.getKey());if(!e)throw new ne(te.ErrDocumentNotAttached,`${t.getKey()} is not attached`);t.setActor(this.id);const n=lt.toChangePack(t.createChangePack());return n.isRemoved=!0,this.enqueueTask(async()=>this.rpcClient.removeDocument({clientId:this.id,documentId:e.docID,changePack:n},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}).then(r=>{const o=lt.fromChangePack(r.changePack);t.applyChangePack(o),this.detachInternal(t.getKey()),Ne.info(`[RD] c:"${this.getKey()}" removes d:"${t.getKey()}"`)}).catch(async r=>{throw Ne.error(`[RD] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(t){return this.conditions[t]}broadcast(t,e,n,r){if(!this.isActive())throw new ne(te.ErrClientNotActivated,`${this.key} is not active`);const o=this.attachmentMap.get(t);if(!o)throw new ne(te.ErrDocumentNotAttached,`${t} is not attached`);if(!Yh(n))throw new ne(te.ErrInvalidArgument,"payload is not serializable");const s=(r==null?void 0:r.maxRetries)??$s.maxRetries,u=$s.maxBackoff;let c=0;const m=f=>Math.min($s.initialRetryInterval*2**f,u),y=async()=>this.enqueueTask(async()=>this.rpcClient.broadcast({clientId:this.id,documentId:o.docID,topic:e,payload:new TextEncoder().encode(JSON.stringify(n))},{headers:{"x-shard-key":`${this.apiKey}/${t}`}}).then(()=>{Ne.info(`[BC] c:"${this.getKey()}" broadcasts d:"${t}" t:"${e}"`)}).catch(async f=>{if(Ne.error(`[BC] c:"${this.getKey()}" err:`,f),await this.handleConnectError(f))if(f instanceof Ze&&Mi(f)===te.ErrUnauthenticated&&o.doc.publish([{type:ft.AuthError,value:{reason:ao(f).reason,method:"Broadcast"}}]),c<s)c++,setTimeout(()=>y(),m(c-1)),Ne.info(`[BC] c:"${this.getKey()}" retry attempt ${c}/${s}`);else throw Ne.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),f;else throw f}));return y()}runSyncLoop(){const t=()=>{if(!this.isActive()){Ne.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const e=[];for(const[,n]of this.attachmentMap)n.needRealtimeSync()&&(n.remoteChangeEventReceived=!1,e.push(this.syncInternal(n,n.syncMode).catch(async r=>{throw r instanceof Ze&&Mi(r)===te.ErrUnauthenticated&&n.doc.publish([{type:ft.AuthError,value:{reason:ao(r).reason,method:"PushPull"}}]),r})));Promise.all(e).then(()=>setTimeout(t,this.syncLoopDuration)).catch(async n=>{Ne.error(`[SL] c:"${this.getKey()}" sync failed:`,n),await this.handleConnectError(n)?setTimeout(t,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};Ne.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,t()}async runWatchLoop(t){const e=this.attachmentMap.get(t);if(!e)throw new ne(te.ErrDocumentNotAttached,`${t} is not attached`);return this.conditions.WatchLoop=!0,e.runWatchLoop(n=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new ne(te.ErrClientNotActivated,`${this.key} is not active`));const r=new AbortController,o=this.rpcClient.watchDocument({clientId:this.id,documentId:e.docID},{headers:{"x-shard-key":`${this.apiKey}/${t}`},signal:r.signal});return e.doc.publish([{type:ft.ConnectionChanged,value:xo.Connected}]),Ne.info(`[WD] c:"${this.getKey()}" watches d:"${t}"`),new Promise((s,u)=>{(async()=>{try{for await(const m of o)this.handleWatchDocumentsResponse(e,m),m.body.case==="initialization"&&s([o,r])}catch(m){e.doc.resetOnlineClients(),e.doc.publish([{type:ft.Initialized,source:Ye.Local,value:e.doc.getPresences()}]),e.doc.publish([{type:ft.ConnectionChanged,value:xo.Disconnected}]),Ne.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(m)?(m instanceof Ze&&Mi(m)===te.ErrUnauthenticated&&e.doc.publish([{type:ft.AuthError,value:{reason:ao(m).reason,method:"WatchDocuments"}}]),n()):this.conditions.WatchLoop=!1,u(m)}})()})})}handleWatchDocumentsResponse(t,e){if(e.body.case==="event"&&e.body.value.type===Oi.DOCUMENT_CHANGED){t.remoteChangeEventReceived=!0;return}t.doc.applyWatchStream(e)}deactivateInternal(){this.status="deactivated";for(const[t,e]of this.attachmentMap)this.detachInternal(t),e.doc.applyStatus(si.Detached)}detachInternal(t){const e=this.attachmentMap.get(t);e&&(e.cancelWatchStream(),e.unsubscribeBroadcastEvent(),this.attachmentMap.delete(t))}syncInternal(t,e){const{doc:n,docID:r}=t,o=n.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:r,changePack:lt.toChangePack(o),pushOnly:e==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${n.getKey()}`}}).then(s=>{const u=lt.fromChangePack(s.changePack);if(u.hasChanges()&&(t.syncMode==="realtime-pushonly"||t.syncMode==="realtime-syncoff"))return n;n.applyChangePack(u),t.doc.publish([{type:ft.SyncStatusChanged,value:ba.Synced}]),n.getStatus()===si.Removed&&this.detachInternal(n.getKey());const c=n.getKey(),m=u.getChangeSize();return Ne.info(`[PP] c:"${this.getKey()}" sync d:"${c}", push:${o.getChangeSize()} pull:${m} cp:${u.getCheckpoint().toTestString()}`),n}).catch(async s=>{throw n.publish([{type:ft.SyncStatusChanged,value:ba.SyncFailed}]),Ne.error(`[PP] c:"${this.getKey()}" err :`,s),s})}async handleConnectError(t){if(!(t instanceof Ze))return!1;if(t.code===Ge.Canceled||t.code===Ge.Unknown||t.code===Ge.ResourceExhausted||t.code===Ge.Unavailable)return!0;if(Mi(t)===te.ErrUnauthenticated){if(this.authTokenInjector){const e=await this.authTokenInjector(ao(t).reason);this.setAuthToken(e)}return!0}return(Mi(t)===te.ErrClientNotActivated||Mi(t)===te.ErrClientNotFound)&&this.deactivateInternal(),!1}enqueueTask(t){return new Promise((e,n)=>{this.taskQueue.push(()=>t().then(e).catch(n)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{Ne.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}const zs={Client:Ju,Document:Uu,Primitive:tt,Text:Ps,Counter:Cs,Tree:Ls,LogLevel:wt,setLogLevel:Mu,IntType:Un.IntegerCnt,LongType:Un.LongCnt};typeof globalThis<"u"&&(globalThis.yorkie={Client:Ju,Document:Uu,Primitive:tt,Text:Ps,Counter:Cs,Tree:Ls,LogLevel:wt,setLogLevel:Mu,IntType:Un.IntegerCnt,LongType:Un.LongCnt});var Zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $u(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var zu={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(i,t){(function(n,r){i.exports=r()})(typeof self<"u"?self:Zh,function(){return function(e){var n={};function r(o){if(n[o])return n[o].exports;var s=n[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=n,r.d=function(o,s,u){r.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:u})},r.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(s,"a",s),s},r.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},r.p="",r(r.s=109)}([function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(17),s=r(18),u=r(19),c=r(45),m=r(46),y=r(47),f=r(48),l=r(49),a=r(12),p=r(32),b=r(33),w=r(31),v=r(1),h={Scope:v.Scope,create:v.create,find:v.find,query:v.query,register:v.register,Container:o.default,Format:s.default,Leaf:u.default,Embed:f.default,Scroll:c.default,Block:y.default,Inline:m.default,Text:l.default,Attributor:{Attribute:a.default,Class:p.default,Style:b.default,Store:w.default}};n.default=h},function(e,n,r){var o=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,h){v.__proto__=h}||function(v,h){for(var g in h)h.hasOwnProperty(g)&&(v[g]=h[g])};return function(v,h){w(v,h);function g(){this.constructor=v}v.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=function(w){o(v,w);function v(h){var g=this;return h="[Parchment] "+h,g=w.call(this,h)||this,g.message=h,g.name=g.constructor.name,g}return v}(Error);n.ParchmentError=s;var u={},c={},m={},y={};n.DATA_KEY="__blot";var f;(function(w){w[w.TYPE=3]="TYPE",w[w.LEVEL=12]="LEVEL",w[w.ATTRIBUTE=13]="ATTRIBUTE",w[w.BLOT=14]="BLOT",w[w.INLINE=7]="INLINE",w[w.BLOCK=11]="BLOCK",w[w.BLOCK_BLOT=10]="BLOCK_BLOT",w[w.INLINE_BLOT=6]="INLINE_BLOT",w[w.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",w[w.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",w[w.ANY=15]="ANY"})(f=n.Scope||(n.Scope={}));function l(w,v){var h=p(w);if(h==null)throw new s("Unable to create "+w+" blot");var g=h,d=w instanceof Node||w.nodeType===Node.TEXT_NODE?w:g.create(v);return new g(d,v)}n.create=l;function a(w,v){return v===void 0&&(v=!1),w==null?null:w[n.DATA_KEY]!=null?w[n.DATA_KEY].blot:v?a(w.parentNode,v):null}n.find=a;function p(w,v){v===void 0&&(v=f.ANY);var h;if(typeof w=="string")h=y[w]||u[w];else if(w instanceof Text||w.nodeType===Node.TEXT_NODE)h=y.text;else if(typeof w=="number")w&f.LEVEL&f.BLOCK?h=y.block:w&f.LEVEL&f.INLINE&&(h=y.inline);else if(w instanceof HTMLElement){var g=(w.getAttribute("class")||"").split(/\s+/);for(var d in g)if(h=c[g[d]],h)break;h=h||m[w.tagName]}return h==null?null:v&f.LEVEL&h.scope&&v&f.TYPE&h.scope?h:null}n.query=p;function b(){for(var w=[],v=0;v<arguments.length;v++)w[v]=arguments[v];if(w.length>1)return w.map(function(d){return b(d)});var h=w[0];if(typeof h.blotName!="string"&&typeof h.attrName!="string")throw new s("Invalid definition");if(h.blotName==="abstract")throw new s("Cannot register abstract class");if(y[h.blotName||h.attrName]=h,typeof h.keyName=="string")u[h.keyName]=h;else if(h.className!=null&&(c[h.className]=h),h.tagName!=null){Array.isArray(h.tagName)?h.tagName=h.tagName.map(function(d){return d.toUpperCase()}):h.tagName=h.tagName.toUpperCase();var g=Array.isArray(h.tagName)?h.tagName:[h.tagName];g.forEach(function(d){(m[d]==null||h.className==null)&&(m[d]=h)})}return h}n.register=b},function(e,n,r){var o=r(51),s=r(11),u=r(3),c=r(20),m="\0",y=function(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]};y.prototype.insert=function(f,l){var a={};return f.length===0?this:(a.insert=f,l!=null&&typeof l=="object"&&Object.keys(l).length>0&&(a.attributes=l),this.push(a))},y.prototype.delete=function(f){return f<=0?this:this.push({delete:f})},y.prototype.retain=function(f,l){if(f<=0)return this;var a={retain:f};return l!=null&&typeof l=="object"&&Object.keys(l).length>0&&(a.attributes=l),this.push(a)},y.prototype.push=function(f){var l=this.ops.length,a=this.ops[l-1];if(f=u(!0,{},f),typeof a=="object"){if(typeof f.delete=="number"&&typeof a.delete=="number")return this.ops[l-1]={delete:a.delete+f.delete},this;if(typeof a.delete=="number"&&f.insert!=null&&(l-=1,a=this.ops[l-1],typeof a!="object"))return this.ops.unshift(f),this;if(s(f.attributes,a.attributes)){if(typeof f.insert=="string"&&typeof a.insert=="string")return this.ops[l-1]={insert:a.insert+f.insert},typeof f.attributes=="object"&&(this.ops[l-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof a.retain=="number")return this.ops[l-1]={retain:a.retain+f.retain},typeof f.attributes=="object"&&(this.ops[l-1].attributes=f.attributes),this}}return l===this.ops.length?this.ops.push(f):this.ops.splice(l,0,f),this},y.prototype.chop=function(){var f=this.ops[this.ops.length-1];return f&&f.retain&&!f.attributes&&this.ops.pop(),this},y.prototype.filter=function(f){return this.ops.filter(f)},y.prototype.forEach=function(f){this.ops.forEach(f)},y.prototype.map=function(f){return this.ops.map(f)},y.prototype.partition=function(f){var l=[],a=[];return this.forEach(function(p){var b=f(p)?l:a;b.push(p)}),[l,a]},y.prototype.reduce=function(f,l){return this.ops.reduce(f,l)},y.prototype.changeLength=function(){return this.reduce(function(f,l){return l.insert?f+c.length(l):l.delete?f-l.delete:f},0)},y.prototype.length=function(){return this.reduce(function(f,l){return f+c.length(l)},0)},y.prototype.slice=function(f,l){f=f||0,typeof l!="number"&&(l=1/0);for(var a=[],p=c.iterator(this.ops),b=0;b<l&&p.hasNext();){var w;b<f?w=p.next(f-b):(w=p.next(l-b),a.push(w)),b+=c.length(w)}return new y(a)},y.prototype.compose=function(f){var l=c.iterator(this.ops),a=c.iterator(f.ops),p=[],b=a.peek();if(b!=null&&typeof b.retain=="number"&&b.attributes==null){for(var w=b.retain;l.peekType()==="insert"&&l.peekLength()<=w;)w-=l.peekLength(),p.push(l.next());b.retain-w>0&&a.next(b.retain-w)}for(var v=new y(p);l.hasNext()||a.hasNext();)if(a.peekType()==="insert")v.push(a.next());else if(l.peekType()==="delete")v.push(l.next());else{var h=Math.min(l.peekLength(),a.peekLength()),g=l.next(h),d=a.next(h);if(typeof d.retain=="number"){var A={};typeof g.retain=="number"?A.retain=h:A.insert=g.insert;var S=c.attributes.compose(g.attributes,d.attributes,typeof g.retain=="number");if(S&&(A.attributes=S),v.push(A),!a.hasNext()&&s(v.ops[v.ops.length-1],A)){var E=new y(l.rest());return v.concat(E).chop()}}else typeof d.delete=="number"&&typeof g.retain=="number"&&v.push(d)}return v.chop()},y.prototype.concat=function(f){var l=new y(this.ops.slice());return f.ops.length>0&&(l.push(f.ops[0]),l.ops=l.ops.concat(f.ops.slice(1))),l},y.prototype.diff=function(f,l){if(this.ops===f.ops)return new y;var a=[this,f].map(function(h){return h.map(function(g){if(g.insert!=null)return typeof g.insert=="string"?g.insert:m;var d=h===f?"on":"with";throw new Error("diff() called "+d+" non-document")}).join("")}),p=new y,b=o(a[0],a[1],l),w=c.iterator(this.ops),v=c.iterator(f.ops);return b.forEach(function(h){for(var g=h[1].length;g>0;){var d=0;switch(h[0]){case o.INSERT:d=Math.min(v.peekLength(),g),p.push(v.next(d));break;case o.DELETE:d=Math.min(g,w.peekLength()),w.next(d),p.delete(d);break;case o.EQUAL:d=Math.min(w.peekLength(),v.peekLength(),g);var A=w.next(d),S=v.next(d);s(A.insert,S.insert)?p.retain(d,c.attributes.diff(A.attributes,S.attributes)):p.push(S).delete(d);break}g-=d}}),p.chop()},y.prototype.eachLine=function(f,l){l=l||`
`;for(var a=c.iterator(this.ops),p=new y,b=0;a.hasNext();){if(a.peekType()!=="insert")return;var w=a.peek(),v=c.length(w)-a.peekLength(),h=typeof w.insert=="string"?w.insert.indexOf(l,v)-v:-1;if(h<0)p.push(a.next());else if(h>0)p.push(a.next(h));else{if(f(p,a.next(1).attributes||{},b)===!1)return;b+=1,p=new y}}p.length()>0&&f(p,{},b)},y.prototype.transform=function(f,l){if(l=!!l,typeof f=="number")return this.transformPosition(f,l);for(var a=c.iterator(this.ops),p=c.iterator(f.ops),b=new y;a.hasNext()||p.hasNext();)if(a.peekType()==="insert"&&(l||p.peekType()!=="insert"))b.retain(c.length(a.next()));else if(p.peekType()==="insert")b.push(p.next());else{var w=Math.min(a.peekLength(),p.peekLength()),v=a.next(w),h=p.next(w);if(v.delete)continue;h.delete?b.push(h):b.retain(w,c.attributes.transform(v.attributes,h.attributes,l))}return b.chop()},y.prototype.transformPosition=function(f,l){l=!!l;for(var a=c.iterator(this.ops),p=0;a.hasNext()&&p<=f;){var b=a.peekLength(),w=a.peekType();if(a.next(),w==="delete"){f-=Math.min(b,f-p);continue}else w==="insert"&&(p<f||!l)&&(f+=b);p+=b}return f},e.exports=y},function(e,n){var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=Object.defineProperty,u=Object.getOwnPropertyDescriptor,c=function(a){return typeof Array.isArray=="function"?Array.isArray(a):o.call(a)==="[object Array]"},m=function(a){if(!a||o.call(a)!=="[object Object]")return!1;var p=r.call(a,"constructor"),b=a.constructor&&a.constructor.prototype&&r.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!p&&!b)return!1;var w;for(w in a);return typeof w>"u"||r.call(a,w)},y=function(a,p){s&&p.name==="__proto__"?s(a,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):a[p.name]=p.newValue},f=function(a,p){if(p==="__proto__")if(r.call(a,p)){if(u)return u(a,p).value}else return;return a[p]};e.exports=function l(){var a,p,b,w,v,h,g=arguments[0],d=1,A=arguments.length,S=!1;for(typeof g=="boolean"&&(S=g,g=arguments[1]||{},d=2),(g==null||typeof g!="object"&&typeof g!="function")&&(g={});d<A;++d)if(a=arguments[d],a!=null)for(p in a)b=f(g,p),w=f(a,p),g!==w&&(S&&w&&(m(w)||(v=c(w)))?(v?(v=!1,h=b&&c(b)?b:[]):h=b&&m(b)?b:{},y(g,{name:p,newValue:l(S,h,w)})):typeof w<"u"&&y(g,{name:p,newValue:w}));return g}},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var o=function(){function x(I,N){for(var P=0;P<N.length;P++){var R=N[P];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(I,R.key,R)}}return function(I,N,P){return N&&x(I.prototype,N),P&&x(I,P),I}}(),s=function x(I,N,P){I===null&&(I=Function.prototype);var R=Object.getOwnPropertyDescriptor(I,N);if(R===void 0){var q=Object.getPrototypeOf(I);return q===null?void 0:x(q,N,P)}else{if("value"in R)return R.value;var J=R.get;return J===void 0?void 0:J.call(P)}},u=r(3),c=g(u),m=r(2),y=g(m),f=r(0),l=g(f),a=r(16),p=g(a),b=r(6),w=g(b),v=r(7),h=g(v);function g(x){return x&&x.__esModule?x:{default:x}}function d(x,I){if(!(x instanceof I))throw new TypeError("Cannot call a class as a function")}function A(x,I){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:x}function S(x,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);x.prototype=Object.create(I&&I.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(x,I):x.__proto__=I)}var E=1,O=function(x){S(I,x);function I(){return d(this,I),A(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return o(I,[{key:"attach",value:function(){s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"attach",this).call(this),this.attributes=new l.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new y.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(P,R){var q=l.default.query(P,l.default.Scope.BLOCK_ATTRIBUTE);q!=null&&this.attributes.attribute(q,R)}},{key:"formatAt",value:function(P,R,q,J){this.format(q,J)}},{key:"insertAt",value:function(P,R,q){if(typeof R=="string"&&R.endsWith(`
`)){var J=l.default.create(_.blotName);this.parent.insertBefore(J,P===0?this:this.next),J.insertAt(0,R.slice(0,-1))}else s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertAt",this).call(this,P,R,q)}}]),I}(l.default.Embed);O.scope=l.default.Scope.BLOCK_BLOT;var _=function(x){S(I,x);function I(N){d(this,I);var P=A(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,N));return P.cache={},P}return o(I,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(l.default.Leaf).reduce(function(P,R){return R.length()===0?P:P.insert(R.value(),k(R))},new y.default).insert(`
`,k(this))),this.cache.delta}},{key:"deleteAt",value:function(P,R){s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"deleteAt",this).call(this,P,R),this.cache={}}},{key:"formatAt",value:function(P,R,q,J){R<=0||(l.default.query(q,l.default.Scope.BLOCK)?P+R===this.length()&&this.format(q,J):s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"formatAt",this).call(this,P,Math.min(R,this.length()-P-1),q,J),this.cache={})}},{key:"insertAt",value:function(P,R,q){if(q!=null)return s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertAt",this).call(this,P,R,q);if(R.length!==0){var J=R.split(`
`),ee=J.shift();ee.length>0&&(P<this.length()-1||this.children.tail==null?s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertAt",this).call(this,Math.min(P,this.length()-1),ee):this.children.tail.insertAt(this.children.tail.length(),ee),this.cache={});var z=this;J.reduce(function(F,C){return z=z.split(F,!0),z.insertAt(0,C),C.length},P+ee.length)}}},{key:"insertBefore",value:function(P,R){var q=this.children.head;s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertBefore",this).call(this,P,R),q instanceof p.default&&q.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"length",this).call(this)+E),this.cache.length}},{key:"moveChildren",value:function(P,R){s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"moveChildren",this).call(this,P,R),this.cache={}}},{key:"optimize",value:function(P){s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"optimize",this).call(this,P),this.cache={}}},{key:"path",value:function(P){return s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"path",this).call(this,P,!0)}},{key:"removeChild",value:function(P){s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"removeChild",this).call(this,P),this.cache={}}},{key:"split",value:function(P){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(R&&(P===0||P>=this.length()-E)){var q=this.clone();return P===0?(this.parent.insertBefore(q,this),this):(this.parent.insertBefore(q,this.next),q)}else{var J=s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"split",this).call(this,P,R);return this.cache={},J}}}]),I}(l.default.Block);_.blotName="block",_.tagName="P",_.defaultChild="break",_.allowedChildren=[w.default,l.default.Embed,h.default];function k(x){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return x==null||(typeof x.formats=="function"&&(I=(0,c.default)(I,x.formats())),x.parent==null||x.parent.blotName=="scroll"||x.parent.statics.scope!==x.statics.scope)?I:k(x.parent,I)}n.bubbleFormats=k,n.BlockEmbed=O,n.default=_},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},s=function(){function z(F,C){var M=[],B=!0,H=!1,V=void 0;try{for(var D=F[Symbol.iterator](),$;!(B=($=D.next()).done)&&(M.push($.value),!(C&&M.length===C));B=!0);}catch(W){H=!0,V=W}finally{try{!B&&D.return&&D.return()}finally{if(H)throw V}}return M}return function(F,C){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return z(F,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function z(F,C){for(var M=0;M<C.length;M++){var B=C[M];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(F,B.key,B)}}return function(F,C,M){return C&&z(F.prototype,C),M&&z(F,M),F}}();r(50);var c=r(2),m=k(c),y=r(14),f=k(y),l=r(8),a=k(l),p=r(9),b=k(p),w=r(0),v=k(w),h=r(15),g=k(h),d=r(3),A=k(d),S=r(10),E=k(S),O=r(34),_=k(O);function k(z){return z&&z.__esModule?z:{default:z}}function x(z,F,C){return F in z?Object.defineProperty(z,F,{value:C,enumerable:!0,configurable:!0,writable:!0}):z[F]=C,z}function I(z,F){if(!(z instanceof F))throw new TypeError("Cannot call a class as a function")}var N=(0,E.default)("quill"),P=function(){u(z,null,[{key:"debug",value:function(C){C===!0&&(C="log"),E.default.level(C)}},{key:"find",value:function(C){return C.__quill||v.default.find(C)}},{key:"import",value:function(C){return this.imports[C]==null&&N.error("Cannot import "+C+". Are you sure it was registered?"),this.imports[C]}},{key:"register",value:function(C,M){var B=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof C!="string"){var V=C.attrName||C.blotName;typeof V=="string"?this.register("formats/"+V,C,M):Object.keys(C).forEach(function(D){B.register(D,C[D],M)})}else this.imports[C]!=null&&!H&&N.warn("Overwriting "+C+" with",M),this.imports[C]=M,(C.startsWith("blots/")||C.startsWith("formats/"))&&M.blotName!=="abstract"?v.default.register(M):C.startsWith("modules")&&typeof M.register=="function"&&M.register()}}]);function z(F){var C=this,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(I(this,z),this.options=R(F,M),this.container=this.options.container,this.container==null)return N.error("Invalid Quill container",F);this.options.debug&&z.debug(this.options.debug);var B=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new a.default,this.scroll=v.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new f.default(this.scroll),this.selection=new g.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(a.default.events.EDITOR_CHANGE,function(V){V===a.default.events.TEXT_CHANGE&&C.root.classList.toggle("ql-blank",C.editor.isBlank())}),this.emitter.on(a.default.events.SCROLL_UPDATE,function(V,D){var $=C.selection.lastRange,W=$&&$.length===0?$.index:void 0;q.call(C,function(){return C.editor.update(null,D,W)},V)});var H=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+B+"<p><br></p></div>");this.setContents(H),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return u(z,[{key:"addContainer",value:function(C){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof C=="string"){var B=C;C=document.createElement("div"),C.classList.add(B)}return this.container.insertBefore(C,M),C}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(C,M,B){var H=this,V=J(C,M,B),D=s(V,4);return C=D[0],M=D[1],B=D[3],q.call(this,function(){return H.editor.deleteText(C,M)},B,C,-1*M)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(C),this.container.classList.toggle("ql-disabled",!C)}},{key:"focus",value:function(){var C=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=C,this.scrollIntoView()}},{key:"format",value:function(C,M){var B=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a.default.sources.API;return q.call(this,function(){var V=B.getSelection(!0),D=new m.default;if(V==null)return D;if(v.default.query(C,v.default.Scope.BLOCK))D=B.editor.formatLine(V.index,V.length,x({},C,M));else{if(V.length===0)return B.selection.format(C,M),D;D=B.editor.formatText(V.index,V.length,x({},C,M))}return B.setSelection(V,a.default.sources.SILENT),D},H)}},{key:"formatLine",value:function(C,M,B,H,V){var D=this,$=void 0,W=J(C,M,B,H,V),X=s(W,4);return C=X[0],M=X[1],$=X[2],V=X[3],q.call(this,function(){return D.editor.formatLine(C,M,$)},V,C,0)}},{key:"formatText",value:function(C,M,B,H,V){var D=this,$=void 0,W=J(C,M,B,H,V),X=s(W,4);return C=X[0],M=X[1],$=X[2],V=X[3],q.call(this,function(){return D.editor.formatText(C,M,$)},V,C,0)}},{key:"getBounds",value:function(C){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,B=void 0;typeof C=="number"?B=this.selection.getBounds(C,M):B=this.selection.getBounds(C.index,C.length);var H=this.container.getBoundingClientRect();return{bottom:B.bottom-H.top,height:B.height,left:B.left-H.left,right:B.right-H.left,top:B.top-H.top,width:B.width}}},{key:"getContents",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-C,B=J(C,M),H=s(B,2);return C=H[0],M=H[1],this.editor.getContents(C,M)}},{key:"getFormat",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof C=="number"?this.editor.getFormat(C,M):this.editor.getFormat(C.index,C.length)}},{key:"getIndex",value:function(C){return C.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(C){return this.scroll.leaf(C)}},{key:"getLine",value:function(C){return this.scroll.line(C)}},{key:"getLines",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof C!="number"?this.scroll.lines(C.index,C.length):this.scroll.lines(C,M)}},{key:"getModule",value:function(C){return this.theme.modules[C]}},{key:"getSelection",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return C&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-C,B=J(C,M),H=s(B,2);return C=H[0],M=H[1],this.editor.getText(C,M)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(C,M,B){var H=this,V=arguments.length>3&&arguments[3]!==void 0?arguments[3]:z.sources.API;return q.call(this,function(){return H.editor.insertEmbed(C,M,B)},V,C)}},{key:"insertText",value:function(C,M,B,H,V){var D=this,$=void 0,W=J(C,0,B,H,V),X=s(W,4);return C=X[0],$=X[2],V=X[3],q.call(this,function(){return D.editor.insertText(C,M,$)},V,C,M.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(C,M,B){this.clipboard.dangerouslyPasteHTML(C,M,B)}},{key:"removeFormat",value:function(C,M,B){var H=this,V=J(C,M,B),D=s(V,4);return C=D[0],M=D[1],B=D[3],q.call(this,function(){return H.editor.removeFormat(C,M)},B,C)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(C){var M=this,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.default.sources.API;return q.call(this,function(){C=new m.default(C);var H=M.getLength(),V=M.editor.deleteText(0,H),D=M.editor.applyDelta(C),$=D.ops[D.ops.length-1];$!=null&&typeof $.insert=="string"&&$.insert[$.insert.length-1]===`
`&&(M.editor.deleteText(M.getLength()-1,1),D.delete(1));var W=V.compose(D);return W},B)}},{key:"setSelection",value:function(C,M,B){if(C==null)this.selection.setRange(null,M||z.sources.API);else{var H=J(C,M,B),V=s(H,4);C=V[0],M=V[1],B=V[3],this.selection.setRange(new h.Range(C,M),B),B!==a.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(C){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.default.sources.API,B=new m.default().insert(C);return this.setContents(B,M)}},{key:"update",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.default.sources.USER,M=this.scroll.update(C);return this.selection.update(C),M}},{key:"updateContents",value:function(C){var M=this,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.default.sources.API;return q.call(this,function(){return C=new m.default(C),M.editor.applyDelta(C,B)},B,!0)}}]),z}();P.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},P.events=a.default.events,P.sources=a.default.sources,P.version="1.3.7",P.imports={delta:m.default,parchment:v.default,"core/module":b.default,"core/theme":_.default};function R(z,F){if(F=(0,A.default)(!0,{container:z,modules:{clipboard:!0,keyboard:!0,history:!0}},F),!F.theme||F.theme===P.DEFAULTS.theme)F.theme=_.default;else if(F.theme=P.import("themes/"+F.theme),F.theme==null)throw new Error("Invalid theme "+F.theme+". Did you register it?");var C=(0,A.default)(!0,{},F.theme.DEFAULTS);[C,F].forEach(function(H){H.modules=H.modules||{},Object.keys(H.modules).forEach(function(V){H.modules[V]===!0&&(H.modules[V]={})})});var M=Object.keys(C.modules).concat(Object.keys(F.modules)),B=M.reduce(function(H,V){var D=P.import("modules/"+V);return D==null?N.error("Cannot load "+V+" module. Are you sure you registered it?"):H[V]=D.DEFAULTS||{},H},{});return F.modules!=null&&F.modules.toolbar&&F.modules.toolbar.constructor!==Object&&(F.modules.toolbar={container:F.modules.toolbar}),F=(0,A.default)(!0,{},P.DEFAULTS,{modules:B},C,F),["bounds","container","scrollingContainer"].forEach(function(H){typeof F[H]=="string"&&(F[H]=document.querySelector(F[H]))}),F.modules=Object.keys(F.modules).reduce(function(H,V){return F.modules[V]&&(H[V]=F.modules[V]),H},{}),F}function q(z,F,C,M){if(this.options.strict&&!this.isEnabled()&&F===a.default.sources.USER)return new m.default;var B=C==null?null:this.getSelection(),H=this.editor.delta,V=z();if(B!=null&&(C===!0&&(C=B.index),M==null?B=ee(B,V,F):M!==0&&(B=ee(B,C,M,F)),this.setSelection(B,a.default.sources.SILENT)),V.length()>0){var D,$=[a.default.events.TEXT_CHANGE,V,H,F];if((D=this.emitter).emit.apply(D,[a.default.events.EDITOR_CHANGE].concat($)),F!==a.default.sources.SILENT){var W;(W=this.emitter).emit.apply(W,$)}}return V}function J(z,F,C,M,B){var H={};return typeof z.index=="number"&&typeof z.length=="number"?typeof F!="number"?(B=M,M=C,C=F,F=z.length,z=z.index):(F=z.length,z=z.index):typeof F!="number"&&(B=M,M=C,C=F,F=0),(typeof C>"u"?"undefined":o(C))==="object"?(H=C,B=M):typeof C=="string"&&(M!=null?H[C]=M:B=C),B=B||a.default.sources.API,[z,F,H,B]}function ee(z,F,C,M){if(z==null)return null;var B=void 0,H=void 0;if(F instanceof m.default){var V=[z.index,z.index+z.length].map(function(X){return F.transformPosition(X,M!==a.default.sources.USER)}),D=s(V,2);B=D[0],H=D[1]}else{var $=[z.index,z.index+z.length].map(function(X){return X<F||X===F&&M===a.default.sources.USER?X:C>=0?X+C:Math.max(F,X+C)}),W=s($,2);B=W[0],H=W[1]}return new h.Range(B,H-B)}n.expandConfig=R,n.overload=J,n.default=P},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function w(v,h){for(var g=0;g<h.length;g++){var d=h[g];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(v,d.key,d)}}return function(v,h,g){return h&&w(v.prototype,h),g&&w(v,g),v}}(),s=function w(v,h,g){v===null&&(v=Function.prototype);var d=Object.getOwnPropertyDescriptor(v,h);if(d===void 0){var A=Object.getPrototypeOf(v);return A===null?void 0:w(A,h,g)}else{if("value"in d)return d.value;var S=d.get;return S===void 0?void 0:S.call(g)}},u=r(7),c=f(u),m=r(0),y=f(m);function f(w){return w&&w.__esModule?w:{default:w}}function l(w,v){if(!(w instanceof v))throw new TypeError("Cannot call a class as a function")}function a(w,v){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:w}function p(w,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(w,v):w.__proto__=v)}var b=function(w){p(v,w);function v(){return l(this,v),a(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"formatAt",value:function(g,d,A,S){if(v.compare(this.statics.blotName,A)<0&&y.default.query(A,y.default.Scope.BLOT)){var E=this.isolate(g,d);S&&E.wrap(A,S)}else s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"formatAt",this).call(this,g,d,A,S)}},{key:"optimize",value:function(g){if(s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,g),this.parent instanceof v&&v.compare(this.statics.blotName,this.parent.statics.blotName)>0){var d=this.parent.isolate(this.offset(),this.length());this.moveChildren(d),d.wrap(this)}}}],[{key:"compare",value:function(g,d){var A=v.order.indexOf(g),S=v.order.indexOf(d);return A>=0||S>=0?A-S:g===d?0:g<d?-1:1}}]),v}(y.default.Inline);b.allowedChildren=[b,y.default.Embed,c.default],b.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=b},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(0),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}function c(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function m(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function y(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var f=function(l){y(a,l);function a(){return c(this,a),m(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(s.default.Text);n.default=f},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function h(g,d){for(var A=0;A<d.length;A++){var S=d[A];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}return function(g,d,A){return d&&h(g.prototype,d),A&&h(g,A),g}}(),s=function h(g,d,A){g===null&&(g=Function.prototype);var S=Object.getOwnPropertyDescriptor(g,d);if(S===void 0){var E=Object.getPrototypeOf(g);return E===null?void 0:h(E,d,A)}else{if("value"in S)return S.value;var O=S.get;return O===void 0?void 0:O.call(A)}},u=r(54),c=f(u),m=r(10),y=f(m);function f(h){return h&&h.__esModule?h:{default:h}}function l(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}function a(h,g){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:h}function p(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(h,g):h.__proto__=g)}var b=(0,y.default)("quill:events"),w=["selectionchange","mousedown","mouseup","click"];w.forEach(function(h){document.addEventListener(h,function(){for(var g=arguments.length,d=Array(g),A=0;A<g;A++)d[A]=arguments[A];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(S){if(S.__quill&&S.__quill.emitter){var E;(E=S.__quill.emitter).handleDOM.apply(E,d)}})})});var v=function(h){p(g,h);function g(){l(this,g);var d=a(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));return d.listeners={},d.on("error",b.error),d}return o(g,[{key:"emit",value:function(){b.log.apply(b,arguments),s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(A){for(var S=arguments.length,E=Array(S>1?S-1:0),O=1;O<S;O++)E[O-1]=arguments[O];(this.listeners[A.type]||[]).forEach(function(_){var k=_.node,x=_.handler;(A.target===k||k.contains(A.target))&&x.apply(void 0,[A].concat(E))})}},{key:"listenDOM",value:function(A,S,E){this.listeners[A]||(this.listeners[A]=[]),this.listeners[A].push({node:S,handler:E})}}]),g}(c.default);v.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},v.sources={API:"api",SILENT:"silent",USER:"user"},n.default=v},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});function o(u,c){if(!(u instanceof c))throw new TypeError("Cannot call a class as a function")}var s=function u(c){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,u),this.quill=c,this.options=m};s.DEFAULTS={},n.default=s},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=["error","warn","log","info"],s="warn";function u(m){if(o.indexOf(m)<=o.indexOf(s)){for(var y,f=arguments.length,l=Array(f>1?f-1:0),a=1;a<f;a++)l[a-1]=arguments[a];(y=console)[m].apply(y,l)}}function c(m){return o.reduce(function(y,f){return y[f]=u.bind(console,f,m),y},{})}u.level=c.level=function(m){s=m},n.default=c},function(e,n,r){var o=Array.prototype.slice,s=r(52),u=r(53),c=e.exports=function(l,a,p){return p||(p={}),l===a?!0:l instanceof Date&&a instanceof Date?l.getTime()===a.getTime():!l||!a||typeof l!="object"&&typeof a!="object"?p.strict?l===a:l==a:f(l,a,p)};function m(l){return l==null}function y(l){return!(!l||typeof l!="object"||typeof l.length!="number"||typeof l.copy!="function"||typeof l.slice!="function"||l.length>0&&typeof l[0]!="number")}function f(l,a,p){var b,w;if(m(l)||m(a)||l.prototype!==a.prototype)return!1;if(u(l))return u(a)?(l=o.call(l),a=o.call(a),c(l,a,p)):!1;if(y(l)){if(!y(a)||l.length!==a.length)return!1;for(b=0;b<l.length;b++)if(l[b]!==a[b])return!1;return!0}try{var v=s(l),h=s(a)}catch{return!1}if(v.length!=h.length)return!1;for(v.sort(),h.sort(),b=v.length-1;b>=0;b--)if(v[b]!=h[b])return!1;for(b=v.length-1;b>=0;b--)if(w=v[b],!c(l[w],a[w],p))return!1;return typeof l==typeof a}},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(1),s=function(){function u(c,m,y){y===void 0&&(y={}),this.attrName=c,this.keyName=m;var f=o.Scope.TYPE&o.Scope.ATTRIBUTE;y.scope!=null?this.scope=y.scope&o.Scope.LEVEL|f:this.scope=o.Scope.ATTRIBUTE,y.whitelist!=null&&(this.whitelist=y.whitelist)}return u.keys=function(c){return[].map.call(c.attributes,function(m){return m.name})},u.prototype.add=function(c,m){return this.canAdd(c,m)?(c.setAttribute(this.keyName,m),!0):!1},u.prototype.canAdd=function(c,m){var y=o.query(c,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return y==null?!1:this.whitelist==null?!0:typeof m=="string"?this.whitelist.indexOf(m.replace(/["']/g,""))>-1:this.whitelist.indexOf(m)>-1},u.prototype.remove=function(c){c.removeAttribute(this.keyName)},u.prototype.value=function(c){var m=c.getAttribute(this.keyName);return this.canAdd(c,m)&&m?m:""},u}();n.default=s},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var o=function(){function O(_,k){var x=[],I=!0,N=!1,P=void 0;try{for(var R=_[Symbol.iterator](),q;!(I=(q=R.next()).done)&&(x.push(q.value),!(k&&x.length===k));I=!0);}catch(J){N=!0,P=J}finally{try{!I&&R.return&&R.return()}finally{if(N)throw P}}return x}return function(_,k){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return O(_,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function O(_,k){for(var x=0;x<k.length;x++){var I=k[x];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(_,I.key,I)}}return function(_,k,x){return k&&O(_.prototype,k),x&&O(_,x),_}}(),u=function O(_,k,x){_===null&&(_=Function.prototype);var I=Object.getOwnPropertyDescriptor(_,k);if(I===void 0){var N=Object.getPrototypeOf(_);return N===null?void 0:O(N,k,x)}else{if("value"in I)return I.value;var P=I.get;return P===void 0?void 0:P.call(x)}},c=r(2),m=h(c),y=r(0),f=h(y),l=r(4),a=h(l),p=r(6),b=h(p),w=r(7),v=h(w);function h(O){return O&&O.__esModule?O:{default:O}}function g(O,_){if(!(O instanceof _))throw new TypeError("Cannot call a class as a function")}function d(O,_){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:O}function A(O,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);O.prototype=Object.create(_&&_.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(O,_):O.__proto__=_)}var S=function(O){A(_,O);function _(){return g(this,_),d(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return _}(b.default);S.blotName="code",S.tagName="CODE";var E=function(O){A(_,O);function _(){return g(this,_),d(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,[{key:"delta",value:function(){var x=this,I=this.domNode.textContent;return I.endsWith(`
`)&&(I=I.slice(0,-1)),I.split(`
`).reduce(function(N,P){return N.insert(P).insert(`
`,x.formats())},new m.default)}},{key:"format",value:function(x,I){if(!(x===this.statics.blotName&&I)){var N=this.descendant(v.default,this.length()-1),P=o(N,1),R=P[0];R!=null&&R.deleteAt(R.length()-1,1),u(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"format",this).call(this,x,I)}}},{key:"formatAt",value:function(x,I,N,P){if(I!==0&&!(f.default.query(N,f.default.Scope.BLOCK)==null||N===this.statics.blotName&&P===this.statics.formats(this.domNode))){var R=this.newlineIndex(x);if(!(R<0||R>=x+I)){var q=this.newlineIndex(x,!0)+1,J=R-q+1,ee=this.isolate(q,J),z=ee.next;ee.format(N,P),z instanceof _&&z.formatAt(0,x-q+I-J,N,P)}}}},{key:"insertAt",value:function(x,I,N){if(N==null){var P=this.descendant(v.default,x),R=o(P,2),q=R[0],J=R[1];q.insertAt(J,I)}}},{key:"length",value:function(){var x=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?x:x+1}},{key:"newlineIndex",value:function(x){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(I)return this.domNode.textContent.slice(0,x).lastIndexOf(`
`);var N=this.domNode.textContent.slice(x).indexOf(`
`);return N>-1?x+N:-1}},{key:"optimize",value:function(x){this.domNode.textContent.endsWith(`
`)||this.appendChild(f.default.create("text",`
`)),u(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"optimize",this).call(this,x);var I=this.next;I!=null&&I.prev===this&&I.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===I.statics.formats(I.domNode)&&(I.optimize(x),I.moveChildren(this),I.remove())}},{key:"replace",value:function(x){u(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"replace",this).call(this,x),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(I){var N=f.default.find(I);N==null?I.parentNode.removeChild(I):N instanceof f.default.Embed?N.remove():N.unwrap()})}}],[{key:"create",value:function(x){var I=u(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,x);return I.setAttribute("spellcheck",!1),I}},{key:"formats",value:function(){return!0}}]),_}(a.default);E.blotName="code-block",E.tagName="PRE",E.TAB="  ",n.Code=S,n.default=E},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},s=function(){function z(F,C){var M=[],B=!0,H=!1,V=void 0;try{for(var D=F[Symbol.iterator](),$;!(B=($=D.next()).done)&&(M.push($.value),!(C&&M.length===C));B=!0);}catch(W){H=!0,V=W}finally{try{!B&&D.return&&D.return()}finally{if(H)throw V}}return M}return function(F,C){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return z(F,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function z(F,C){for(var M=0;M<C.length;M++){var B=C[M];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(F,B.key,B)}}return function(F,C,M){return C&&z(F.prototype,C),M&&z(F,M),F}}(),c=r(2),m=I(c),y=r(20),f=I(y),l=r(0),a=I(l),p=r(13),b=I(p),w=r(24),v=I(w),h=r(4),g=I(h),d=r(16),A=I(d),S=r(21),E=I(S),O=r(11),_=I(O),k=r(3),x=I(k);function I(z){return z&&z.__esModule?z:{default:z}}function N(z,F,C){return F in z?Object.defineProperty(z,F,{value:C,enumerable:!0,configurable:!0,writable:!0}):z[F]=C,z}function P(z,F){if(!(z instanceof F))throw new TypeError("Cannot call a class as a function")}var R=/^[ -~]*$/,q=function(){function z(F){P(this,z),this.scroll=F,this.delta=this.getDelta()}return u(z,[{key:"applyDelta",value:function(C){var M=this,B=!1;this.scroll.update();var H=this.scroll.length();return this.scroll.batchStart(),C=ee(C),C.reduce(function(V,D){var $=D.retain||D.delete||D.insert.length||1,W=D.attributes||{};if(D.insert!=null){if(typeof D.insert=="string"){var X=D.insert;X.endsWith(`
`)&&B&&(B=!1,X=X.slice(0,-1)),V>=H&&!X.endsWith(`
`)&&(B=!0),M.scroll.insertAt(V,X);var ie=M.scroll.line(V),fe=s(ie,2),we=fe[0],ye=fe[1],be=(0,x.default)({},(0,h.bubbleFormats)(we));if(we instanceof g.default){var U=we.descendant(a.default.Leaf,ye),Q=s(U,1),Y=Q[0];be=(0,x.default)(be,(0,h.bubbleFormats)(Y))}W=f.default.attributes.diff(be,W)||{}}else if(o(D.insert)==="object"){var j=Object.keys(D.insert)[0];if(j==null)return V;M.scroll.insertAt(V,j,D.insert[j])}H+=$}return Object.keys(W).forEach(function(G){M.scroll.formatAt(V,$,G,W[G])}),V+$},0),C.reduce(function(V,D){return typeof D.delete=="number"?(M.scroll.deleteAt(V,D.delete),V):V+(D.retain||D.insert.length||1)},0),this.scroll.batchEnd(),this.update(C)}},{key:"deleteText",value:function(C,M){return this.scroll.deleteAt(C,M),this.update(new m.default().retain(C).delete(M))}},{key:"formatLine",value:function(C,M){var B=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(H).forEach(function(V){if(!(B.scroll.whitelist!=null&&!B.scroll.whitelist[V])){var D=B.scroll.lines(C,Math.max(M,1)),$=M;D.forEach(function(W){var X=W.length();if(!(W instanceof b.default))W.format(V,H[V]);else{var ie=C-W.offset(B.scroll),fe=W.newlineIndex(ie+$)-ie+1;W.formatAt(ie,fe,V,H[V])}$-=X})}}),this.scroll.optimize(),this.update(new m.default().retain(C).retain(M,(0,E.default)(H)))}},{key:"formatText",value:function(C,M){var B=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(H).forEach(function(V){B.scroll.formatAt(C,M,V,H[V])}),this.update(new m.default().retain(C).retain(M,(0,E.default)(H)))}},{key:"getContents",value:function(C,M){return this.delta.slice(C,C+M)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(C,M){return C.concat(M.delta())},new m.default)}},{key:"getFormat",value:function(C){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,B=[],H=[];M===0?this.scroll.path(C).forEach(function(D){var $=s(D,1),W=$[0];W instanceof g.default?B.push(W):W instanceof a.default.Leaf&&H.push(W)}):(B=this.scroll.lines(C,M),H=this.scroll.descendants(a.default.Leaf,C,M));var V=[B,H].map(function(D){if(D.length===0)return{};for(var $=(0,h.bubbleFormats)(D.shift());Object.keys($).length>0;){var W=D.shift();if(W==null)return $;$=J((0,h.bubbleFormats)(W),$)}return $});return x.default.apply(x.default,V)}},{key:"getText",value:function(C,M){return this.getContents(C,M).filter(function(B){return typeof B.insert=="string"}).map(function(B){return B.insert}).join("")}},{key:"insertEmbed",value:function(C,M,B){return this.scroll.insertAt(C,M,B),this.update(new m.default().retain(C).insert(N({},M,B)))}},{key:"insertText",value:function(C,M){var B=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return M=M.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(C,M),Object.keys(H).forEach(function(V){B.scroll.formatAt(C,M.length,V,H[V])}),this.update(new m.default().retain(C).insert(M,(0,E.default)(H)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var C=this.scroll.children.head;return C.statics.blotName!==g.default.blotName||C.children.length>1?!1:C.children.head instanceof A.default}},{key:"removeFormat",value:function(C,M){var B=this.getText(C,M),H=this.scroll.line(C+M),V=s(H,2),D=V[0],$=V[1],W=0,X=new m.default;D!=null&&(D instanceof b.default?W=D.newlineIndex($)-$+1:W=D.length()-$,X=D.delta().slice($,$+W-1).insert(`
`));var ie=this.getContents(C,M+W),fe=ie.diff(new m.default().insert(B).concat(X)),we=new m.default().retain(C).concat(fe);return this.applyDelta(we)}},{key:"update",value:function(C){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,H=this.delta;if(M.length===1&&M[0].type==="characterData"&&M[0].target.data.match(R)&&a.default.find(M[0].target)){var V=a.default.find(M[0].target),D=(0,h.bubbleFormats)(V),$=V.offset(this.scroll),W=M[0].oldValue.replace(v.default.CONTENTS,""),X=new m.default().insert(W),ie=new m.default().insert(V.value()),fe=new m.default().retain($).concat(X.diff(ie,B));C=fe.reduce(function(we,ye){return ye.insert?we.insert(ye.insert,D):we.push(ye)},new m.default),this.delta=H.compose(C)}else this.delta=this.getDelta(),(!C||!(0,_.default)(H.compose(C),this.delta))&&(C=H.diff(this.delta,B));return C}}]),z}();function J(z,F){return Object.keys(F).reduce(function(C,M){return z[M]==null||(F[M]===z[M]?C[M]=F[M]:Array.isArray(F[M])?F[M].indexOf(z[M])<0&&(C[M]=F[M].concat([z[M]])):C[M]=[F[M],z[M]]),C},{})}function ee(z){return z.reduce(function(F,C){if(C.insert===1){var M=(0,E.default)(C.attributes);return delete M.image,F.insert({image:C.attributes.image},M)}if(C.attributes!=null&&(C.attributes.list===!0||C.attributes.bullet===!0)&&(C=(0,E.default)(C),C.attributes.list?C.attributes.list="ordered":(C.attributes.list="bullet",delete C.attributes.bullet)),typeof C.insert=="string"){var B=C.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return F.insert(B,C.attributes)}return F.push(C)},new m.default)}n.default=q},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var o=function(){function O(_,k){var x=[],I=!0,N=!1,P=void 0;try{for(var R=_[Symbol.iterator](),q;!(I=(q=R.next()).done)&&(x.push(q.value),!(k&&x.length===k));I=!0);}catch(J){N=!0,P=J}finally{try{!I&&R.return&&R.return()}finally{if(N)throw P}}return x}return function(_,k){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return O(_,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function O(_,k){for(var x=0;x<k.length;x++){var I=k[x];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(_,I.key,I)}}return function(_,k,x){return k&&O(_.prototype,k),x&&O(_,x),_}}(),u=r(0),c=v(u),m=r(21),y=v(m),f=r(11),l=v(f),a=r(8),p=v(a),b=r(10),w=v(b);function v(O){return O&&O.__esModule?O:{default:O}}function h(O){if(Array.isArray(O)){for(var _=0,k=Array(O.length);_<O.length;_++)k[_]=O[_];return k}else return Array.from(O)}function g(O,_){if(!(O instanceof _))throw new TypeError("Cannot call a class as a function")}var d=(0,w.default)("quill:selection"),A=function O(_){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;g(this,O),this.index=_,this.length=k},S=function(){function O(_,k){var x=this;g(this,O),this.emitter=k,this.scroll=_,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new A(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){x.mouseDown||setTimeout(x.update.bind(x,p.default.sources.USER),1)}),this.emitter.on(p.default.events.EDITOR_CHANGE,function(I,N){I===p.default.events.TEXT_CHANGE&&N.length()>0&&x.update(p.default.sources.SILENT)}),this.emitter.on(p.default.events.SCROLL_BEFORE_UPDATE,function(){if(x.hasFocus()){var I=x.getNativeRange();I!=null&&I.start.node!==x.cursor.textNode&&x.emitter.once(p.default.events.SCROLL_UPDATE,function(){try{x.setNativeRange(I.start.node,I.start.offset,I.end.node,I.end.offset)}catch{}})}}),this.emitter.on(p.default.events.SCROLL_OPTIMIZE,function(I,N){if(N.range){var P=N.range,R=P.startNode,q=P.startOffset,J=P.endNode,ee=P.endOffset;x.setNativeRange(R,q,J,ee)}}),this.update(p.default.sources.SILENT)}return s(O,[{key:"handleComposition",value:function(){var k=this;this.root.addEventListener("compositionstart",function(){k.composing=!0}),this.root.addEventListener("compositionend",function(){if(k.composing=!1,k.cursor.parent){var x=k.cursor.restore();if(!x)return;setTimeout(function(){k.setNativeRange(x.startNode,x.startOffset,x.endNode,x.endOffset)},1)}})}},{key:"handleDragging",value:function(){var k=this;this.emitter.listenDOM("mousedown",document.body,function(){k.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){k.mouseDown=!1,k.update(p.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(k,x){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[k])){this.scroll.update();var I=this.getNativeRange();if(!(I==null||!I.native.collapsed||c.default.query(k,c.default.Scope.BLOCK))){if(I.start.node!==this.cursor.textNode){var N=c.default.find(I.start.node,!1);if(N==null)return;if(N instanceof c.default.Leaf){var P=N.split(I.start.offset);N.parent.insertBefore(this.cursor,P)}else N.insertBefore(this.cursor,I.start.node);this.cursor.attach()}this.cursor.format(k,x),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(k){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=this.scroll.length();k=Math.min(k,I-1),x=Math.min(k+x,I-1)-k;var N=void 0,P=this.scroll.leaf(k),R=o(P,2),q=R[0],J=R[1];if(q==null)return null;var ee=q.position(J,!0),z=o(ee,2);N=z[0],J=z[1];var F=document.createRange();if(x>0){F.setStart(N,J);var C=this.scroll.leaf(k+x),M=o(C,2);if(q=M[0],J=M[1],q==null)return null;var B=q.position(J,!0),H=o(B,2);return N=H[0],J=H[1],F.setEnd(N,J),F.getBoundingClientRect()}else{var V="left",D=void 0;return N instanceof Text?(J<N.data.length?(F.setStart(N,J),F.setEnd(N,J+1)):(F.setStart(N,J-1),F.setEnd(N,J),V="right"),D=F.getBoundingClientRect()):(D=q.domNode.getBoundingClientRect(),J>0&&(V="right")),{bottom:D.top+D.height,height:D.height,left:D[V],right:D[V],top:D.top,width:0}}}},{key:"getNativeRange",value:function(){var k=document.getSelection();if(k==null||k.rangeCount<=0)return null;var x=k.getRangeAt(0);if(x==null)return null;var I=this.normalizeNative(x);return d.info("getNativeRange",I),I}},{key:"getRange",value:function(){var k=this.getNativeRange();if(k==null)return[null,null];var x=this.normalizedToRange(k);return[x,k]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(k){var x=this,I=[[k.start.node,k.start.offset]];k.native.collapsed||I.push([k.end.node,k.end.offset]);var N=I.map(function(q){var J=o(q,2),ee=J[0],z=J[1],F=c.default.find(ee,!0),C=F.offset(x.scroll);return z===0?C:F instanceof c.default.Container?C+F.length():C+F.index(ee,z)}),P=Math.min(Math.max.apply(Math,h(N)),this.scroll.length()-1),R=Math.min.apply(Math,[P].concat(h(N)));return new A(R,P-R)}},{key:"normalizeNative",value:function(k){if(!E(this.root,k.startContainer)||!k.collapsed&&!E(this.root,k.endContainer))return null;var x={start:{node:k.startContainer,offset:k.startOffset},end:{node:k.endContainer,offset:k.endOffset},native:k};return[x.start,x.end].forEach(function(I){for(var N=I.node,P=I.offset;!(N instanceof Text)&&N.childNodes.length>0;)if(N.childNodes.length>P)N=N.childNodes[P],P=0;else if(N.childNodes.length===P)N=N.lastChild,P=N instanceof Text?N.data.length:N.childNodes.length+1;else break;I.node=N,I.offset=P}),x}},{key:"rangeToNative",value:function(k){var x=this,I=k.collapsed?[k.index]:[k.index,k.index+k.length],N=[],P=this.scroll.length();return I.forEach(function(R,q){R=Math.min(P-1,R);var J=void 0,ee=x.scroll.leaf(R),z=o(ee,2),F=z[0],C=z[1],M=F.position(C,q!==0),B=o(M,2);J=B[0],C=B[1],N.push(J,C)}),N.length<2&&(N=N.concat(N)),N}},{key:"scrollIntoView",value:function(k){var x=this.lastRange;if(x!=null){var I=this.getBounds(x.index,x.length);if(I!=null){var N=this.scroll.length()-1,P=this.scroll.line(Math.min(x.index,N)),R=o(P,1),q=R[0],J=q;if(x.length>0){var ee=this.scroll.line(Math.min(x.index+x.length,N)),z=o(ee,1);J=z[0]}if(!(q==null||J==null)){var F=k.getBoundingClientRect();I.top<F.top?k.scrollTop-=F.top-I.top:I.bottom>F.bottom&&(k.scrollTop+=I.bottom-F.bottom)}}}}},{key:"setNativeRange",value:function(k,x){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k,N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:x,P=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(d.info("setNativeRange",k,x,I,N),!(k!=null&&(this.root.parentNode==null||k.parentNode==null||I.parentNode==null))){var R=document.getSelection();if(R!=null)if(k!=null){this.hasFocus()||this.root.focus();var q=(this.getNativeRange()||{}).native;if(q==null||P||k!==q.startContainer||x!==q.startOffset||I!==q.endContainer||N!==q.endOffset){k.tagName=="BR"&&(x=[].indexOf.call(k.parentNode.childNodes,k),k=k.parentNode),I.tagName=="BR"&&(N=[].indexOf.call(I.parentNode.childNodes,I),I=I.parentNode);var J=document.createRange();J.setStart(k,x),J.setEnd(I,N),R.removeAllRanges(),R.addRange(J)}}else R.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(k){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;if(typeof x=="string"&&(I=x,x=!1),d.info("setRange",k),k!=null){var N=this.rangeToNative(k);this.setNativeRange.apply(this,h(N).concat([x]))}else this.setNativeRange(null);this.update(I)}},{key:"update",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,x=this.lastRange,I=this.getRange(),N=o(I,2),P=N[0],R=N[1];if(this.lastRange=P,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,l.default)(x,this.lastRange)){var q;!this.composing&&R!=null&&R.native.collapsed&&R.start.node!==this.cursor.textNode&&this.cursor.restore();var J=[p.default.events.SELECTION_CHANGE,(0,y.default)(this.lastRange),(0,y.default)(x),k];if((q=this.emitter).emit.apply(q,[p.default.events.EDITOR_CHANGE].concat(J)),k!==p.default.sources.SILENT){var ee;(ee=this.emitter).emit.apply(ee,J)}}}}]),O}();function E(O,_){try{_.parentNode}catch{return!1}return _ instanceof Text&&(_=_.parentNode),O.contains(_)}n.Range=A,n.default=S},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function p(b,w){for(var v=0;v<w.length;v++){var h=w[v];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(b,h.key,h)}}return function(b,w,v){return w&&p(b.prototype,w),v&&p(b,v),b}}(),s=function p(b,w,v){b===null&&(b=Function.prototype);var h=Object.getOwnPropertyDescriptor(b,w);if(h===void 0){var g=Object.getPrototypeOf(b);return g===null?void 0:p(g,w,v)}else{if("value"in h)return h.value;var d=h.get;return d===void 0?void 0:d.call(v)}},u=r(0),c=m(u);function m(p){return p&&p.__esModule?p:{default:p}}function y(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function f(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function l(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var a=function(p){l(b,p);function b(){return y(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,[{key:"insertInto",value:function(v,h){v.children.length===0?s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"insertInto",this).call(this,v,h):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),b}(c.default.Embed);a.blotName="break",a.tagName="BR",n.default=a},function(e,n,r){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var p in a)a.hasOwnProperty(p)&&(l[p]=a[p])};return function(l,a){f(l,a);function p(){this.constructor=l}l.prototype=a===null?Object.create(a):(p.prototype=a.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(44),u=r(30),c=r(1),m=function(f){o(l,f);function l(a){var p=f.call(this,a)||this;return p.build(),p}return l.prototype.appendChild=function(a){this.insertBefore(a)},l.prototype.attach=function(){f.prototype.attach.call(this),this.children.forEach(function(a){a.attach()})},l.prototype.build=function(){var a=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(p){try{var b=y(p);a.insertBefore(b,a.children.head||void 0)}catch(w){if(w instanceof c.ParchmentError)return;throw w}})},l.prototype.deleteAt=function(a,p){if(a===0&&p===this.length())return this.remove();this.children.forEachAt(a,p,function(b,w,v){b.deleteAt(w,v)})},l.prototype.descendant=function(a,p){var b=this.children.find(p),w=b[0],v=b[1];return a.blotName==null&&a(w)||a.blotName!=null&&w instanceof a?[w,v]:w instanceof l?w.descendant(a,v):[null,-1]},l.prototype.descendants=function(a,p,b){p===void 0&&(p=0),b===void 0&&(b=Number.MAX_VALUE);var w=[],v=b;return this.children.forEachAt(p,b,function(h,g,d){(a.blotName==null&&a(h)||a.blotName!=null&&h instanceof a)&&w.push(h),h instanceof l&&(w=w.concat(h.descendants(a,g,v))),v-=d}),w},l.prototype.detach=function(){this.children.forEach(function(a){a.detach()}),f.prototype.detach.call(this)},l.prototype.formatAt=function(a,p,b,w){this.children.forEachAt(a,p,function(v,h,g){v.formatAt(h,g,b,w)})},l.prototype.insertAt=function(a,p,b){var w=this.children.find(a),v=w[0],h=w[1];if(v)v.insertAt(h,p,b);else{var g=b==null?c.create("text",p):c.create(p,b);this.appendChild(g)}},l.prototype.insertBefore=function(a,p){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(b){return a instanceof b}))throw new c.ParchmentError("Cannot insert "+a.statics.blotName+" into "+this.statics.blotName);a.insertInto(this,p)},l.prototype.length=function(){return this.children.reduce(function(a,p){return a+p.length()},0)},l.prototype.moveChildren=function(a,p){this.children.forEach(function(b){a.insertBefore(b,p)})},l.prototype.optimize=function(a){if(f.prototype.optimize.call(this,a),this.children.length===0)if(this.statics.defaultChild!=null){var p=c.create(this.statics.defaultChild);this.appendChild(p),p.optimize(a)}else this.remove()},l.prototype.path=function(a,p){p===void 0&&(p=!1);var b=this.children.find(a,p),w=b[0],v=b[1],h=[[this,a]];return w instanceof l?h.concat(w.path(v,p)):(w!=null&&h.push([w,v]),h)},l.prototype.removeChild=function(a){this.children.remove(a)},l.prototype.replace=function(a){a instanceof l&&a.moveChildren(this),f.prototype.replace.call(this,a)},l.prototype.split=function(a,p){if(p===void 0&&(p=!1),!p){if(a===0)return this;if(a===this.length())return this.next}var b=this.clone();return this.parent.insertBefore(b,this.next),this.children.forEachAt(a,this.length(),function(w,v,h){w=w.split(v,p),b.appendChild(w)}),b},l.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},l.prototype.update=function(a,p){var b=this,w=[],v=[];a.forEach(function(h){h.target===b.domNode&&h.type==="childList"&&(w.push.apply(w,h.addedNodes),v.push.apply(v,h.removedNodes))}),v.forEach(function(h){if(!(h.parentNode!=null&&h.tagName!=="IFRAME"&&document.body.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var g=c.find(h);g!=null&&(g.domNode.parentNode==null||g.domNode.parentNode===b.domNode)&&g.detach()}}),w.filter(function(h){return h.parentNode==b.domNode}).sort(function(h,g){return h===g?0:h.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(h){var g=null;h.nextSibling!=null&&(g=c.find(h.nextSibling));var d=y(h);(d.next!=g||d.next==null)&&(d.parent!=null&&d.parent.removeChild(b),b.insertBefore(d,g||void 0))})},l}(u.default);function y(f){var l=c.find(f);if(l==null)try{l=c.create(f)}catch{l=c.create(c.Scope.INLINE),[].slice.call(f.childNodes).forEach(function(p){l.domNode.appendChild(p)}),f.parentNode&&f.parentNode.replaceChild(l.domNode,f),l.attach()}return l}n.default=m},function(e,n,r){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var p in a)a.hasOwnProperty(p)&&(l[p]=a[p])};return function(l,a){f(l,a);function p(){this.constructor=l}l.prototype=a===null?Object.create(a):(p.prototype=a.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(12),u=r(31),c=r(17),m=r(1),y=function(f){o(l,f);function l(a){var p=f.call(this,a)||this;return p.attributes=new u.default(p.domNode),p}return l.formats=function(a){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return a.tagName.toLowerCase()},l.prototype.format=function(a,p){var b=m.query(a);b instanceof s.default?this.attributes.attribute(b,p):p&&b!=null&&(a!==this.statics.blotName||this.formats()[a]!==p)&&this.replaceWith(a,p)},l.prototype.formats=function(){var a=this.attributes.values(),p=this.statics.formats(this.domNode);return p!=null&&(a[this.statics.blotName]=p),a},l.prototype.replaceWith=function(a,p){var b=f.prototype.replaceWith.call(this,a,p);return this.attributes.copy(b),b},l.prototype.update=function(a,p){var b=this;f.prototype.update.call(this,a,p),a.some(function(w){return w.target===b.domNode&&w.type==="attributes"})&&this.attributes.build()},l.prototype.wrap=function(a,p){var b=f.prototype.wrap.call(this,a,p);return b instanceof l&&b.statics.scope===this.statics.scope&&this.attributes.move(b),b},l}(c.default);n.default=y},function(e,n,r){var o=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,f){y.__proto__=f}||function(y,f){for(var l in f)f.hasOwnProperty(l)&&(y[l]=f[l])};return function(y,f){m(y,f);function l(){this.constructor=y}y.prototype=f===null?Object.create(f):(l.prototype=f.prototype,new l)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(30),u=r(1),c=function(m){o(y,m);function y(){return m!==null&&m.apply(this,arguments)||this}return y.value=function(f){return!0},y.prototype.index=function(f,l){return this.domNode===f||this.domNode.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(l,1):-1},y.prototype.position=function(f,l){var a=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return f>0&&(a+=1),[this.parent.domNode,a]},y.prototype.value=function(){var f;return f={},f[this.statics.blotName]=this.statics.value(this.domNode)||!0,f},y.scope=u.Scope.INLINE_BLOT,y}(s.default);n.default=c},function(e,n,r){var o=r(11),s=r(3),u={attributes:{compose:function(m,y,f){typeof m!="object"&&(m={}),typeof y!="object"&&(y={});var l=s(!0,{},y);f||(l=Object.keys(l).reduce(function(p,b){return l[b]!=null&&(p[b]=l[b]),p},{}));for(var a in m)m[a]!==void 0&&y[a]===void 0&&(l[a]=m[a]);return Object.keys(l).length>0?l:void 0},diff:function(m,y){typeof m!="object"&&(m={}),typeof y!="object"&&(y={});var f=Object.keys(m).concat(Object.keys(y)).reduce(function(l,a){return o(m[a],y[a])||(l[a]=y[a]===void 0?null:y[a]),l},{});return Object.keys(f).length>0?f:void 0},transform:function(m,y,f){if(typeof m!="object")return y;if(typeof y=="object"){if(!f)return y;var l=Object.keys(y).reduce(function(a,p){return m[p]===void 0&&(a[p]=y[p]),a},{});return Object.keys(l).length>0?l:void 0}}},iterator:function(m){return new c(m)},length:function(m){return typeof m.delete=="number"?m.delete:typeof m.retain=="number"?m.retain:typeof m.insert=="string"?m.insert.length:1}};function c(m){this.ops=m,this.index=0,this.offset=0}c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(m){m||(m=1/0);var y=this.ops[this.index];if(y){var f=this.offset,l=u.length(y);if(m>=l-f?(m=l-f,this.index+=1,this.offset=0):this.offset+=m,typeof y.delete=="number")return{delete:m};var a={};return y.attributes&&(a.attributes=y.attributes),typeof y.retain=="number"?a.retain=m:typeof y.insert=="string"?a.insert=y.insert.substr(f,m):a.insert=y.insert,a}else return{retain:1/0}},c.prototype.peek=function(){return this.ops[this.index]},c.prototype.peekLength=function(){return this.ops[this.index]?u.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},c.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var m=this.offset,y=this.index,f=this.next(),l=this.ops.slice(this.index);return this.offset=m,this.index=y,[f].concat(l)}else return[]},e.exports=u},function(e,n){var r=function(){function o(b,w){return w!=null&&b instanceof w}var s;try{s=Map}catch{s=function(){}}var u;try{u=Set}catch{u=function(){}}var c;try{c=Promise}catch{c=function(){}}function m(b,w,v,h,g){typeof w=="object"&&(v=w.depth,h=w.prototype,g=w.includeNonEnumerable,w=w.circular);var d=[],A=[],S=typeof Buffer<"u";typeof w>"u"&&(w=!0),typeof v>"u"&&(v=1/0);function E(O,_){if(O===null)return null;if(_===0)return O;var k,x;if(typeof O!="object")return O;if(o(O,s))k=new s;else if(o(O,u))k=new u;else if(o(O,c))k=new c(function(F,C){O.then(function(M){F(E(M,_-1))},function(M){C(E(M,_-1))})});else if(m.__isArray(O))k=[];else if(m.__isRegExp(O))k=new RegExp(O.source,p(O)),O.lastIndex&&(k.lastIndex=O.lastIndex);else if(m.__isDate(O))k=new Date(O.getTime());else{if(S&&Buffer.isBuffer(O))return Buffer.allocUnsafe?k=Buffer.allocUnsafe(O.length):k=new Buffer(O.length),O.copy(k),k;o(O,Error)?k=Object.create(O):typeof h>"u"?(x=Object.getPrototypeOf(O),k=Object.create(x)):(k=Object.create(h),x=h)}if(w){var I=d.indexOf(O);if(I!=-1)return A[I];d.push(O),A.push(k)}o(O,s)&&O.forEach(function(F,C){var M=E(C,_-1),B=E(F,_-1);k.set(M,B)}),o(O,u)&&O.forEach(function(F){var C=E(F,_-1);k.add(C)});for(var N in O){var P;x&&(P=Object.getOwnPropertyDescriptor(x,N)),!(P&&P.set==null)&&(k[N]=E(O[N],_-1))}if(Object.getOwnPropertySymbols)for(var R=Object.getOwnPropertySymbols(O),N=0;N<R.length;N++){var q=R[N],J=Object.getOwnPropertyDescriptor(O,q);J&&!J.enumerable&&!g||(k[q]=E(O[q],_-1),J.enumerable||Object.defineProperty(k,q,{enumerable:!1}))}if(g)for(var ee=Object.getOwnPropertyNames(O),N=0;N<ee.length;N++){var z=ee[N],J=Object.getOwnPropertyDescriptor(O,z);J&&J.enumerable||(k[z]=E(O[z],_-1),Object.defineProperty(k,z,{enumerable:!1}))}return k}return E(b,v)}m.clonePrototype=function(w){if(w===null)return null;var v=function(){};return v.prototype=w,new v};function y(b){return Object.prototype.toString.call(b)}m.__objToStr=y;function f(b){return typeof b=="object"&&y(b)==="[object Date]"}m.__isDate=f;function l(b){return typeof b=="object"&&y(b)==="[object Array]"}m.__isArray=l;function a(b){return typeof b=="object"&&y(b)==="[object RegExp]"}m.__isRegExp=a;function p(b){var w="";return b.global&&(w+="g"),b.ignoreCase&&(w+="i"),b.multiline&&(w+="m"),w}return m.__getRegExpFlags=p,m}();typeof e=="object"&&e.exports&&(e.exports=r)},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function k(x,I){var N=[],P=!0,R=!1,q=void 0;try{for(var J=x[Symbol.iterator](),ee;!(P=(ee=J.next()).done)&&(N.push(ee.value),!(I&&N.length===I));P=!0);}catch(z){R=!0,q=z}finally{try{!P&&J.return&&J.return()}finally{if(R)throw q}}return N}return function(x,I){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return k(x,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function k(x,I){for(var N=0;N<I.length;N++){var P=I[N];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}return function(x,I,N){return I&&k(x.prototype,I),N&&k(x,N),x}}(),u=function k(x,I,N){x===null&&(x=Function.prototype);var P=Object.getOwnPropertyDescriptor(x,I);if(P===void 0){var R=Object.getPrototypeOf(x);return R===null?void 0:k(R,I,N)}else{if("value"in P)return P.value;var q=P.get;return q===void 0?void 0:q.call(N)}},c=r(0),m=d(c),y=r(8),f=d(y),l=r(4),a=d(l),p=r(16),b=d(p),w=r(13),v=d(w),h=r(25),g=d(h);function d(k){return k&&k.__esModule?k:{default:k}}function A(k,x){if(!(k instanceof x))throw new TypeError("Cannot call a class as a function")}function S(k,x){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:k}function E(k,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);k.prototype=Object.create(x&&x.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(k,x):k.__proto__=x)}function O(k){return k instanceof a.default||k instanceof l.BlockEmbed}var _=function(k){E(x,k);function x(I,N){A(this,x);var P=S(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,I));return P.emitter=N.emitter,Array.isArray(N.whitelist)&&(P.whitelist=N.whitelist.reduce(function(R,q){return R[q]=!0,R},{})),P.domNode.addEventListener("DOMNodeInserted",function(){}),P.optimize(),P.enable(),P}return s(x,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(N,P){var R=this.line(N),q=o(R,2),J=q[0],ee=q[1],z=this.line(N+P),F=o(z,1),C=F[0];if(u(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"deleteAt",this).call(this,N,P),C!=null&&J!==C&&ee>0){if(J instanceof l.BlockEmbed||C instanceof l.BlockEmbed){this.optimize();return}if(J instanceof v.default){var M=J.newlineIndex(J.length(),!0);if(M>-1&&(J=J.split(M+1),J===C)){this.optimize();return}}else if(C instanceof v.default){var B=C.newlineIndex(0);B>-1&&C.split(B+1)}var H=C.children.head instanceof b.default?null:C.children.head;J.moveChildren(C,H),J.remove()}this.optimize()}},{key:"enable",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",N)}},{key:"formatAt",value:function(N,P,R,q){this.whitelist!=null&&!this.whitelist[R]||(u(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"formatAt",this).call(this,N,P,R,q),this.optimize())}},{key:"insertAt",value:function(N,P,R){if(!(R!=null&&this.whitelist!=null&&!this.whitelist[P])){if(N>=this.length())if(R==null||m.default.query(P,m.default.Scope.BLOCK)==null){var q=m.default.create(this.statics.defaultChild);this.appendChild(q),R==null&&P.endsWith(`
`)&&(P=P.slice(0,-1)),q.insertAt(0,P,R)}else{var J=m.default.create(P,R);this.appendChild(J)}else u(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,N,P,R);this.optimize()}}},{key:"insertBefore",value:function(N,P){if(N.statics.scope===m.default.Scope.INLINE_BLOT){var R=m.default.create(this.statics.defaultChild);R.appendChild(N),N=R}u(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertBefore",this).call(this,N,P)}},{key:"leaf",value:function(N){return this.path(N).pop()||[null,-1]}},{key:"line",value:function(N){return N===this.length()?this.line(N-1):this.descendant(O,N)}},{key:"lines",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,R=function q(J,ee,z){var F=[],C=z;return J.children.forEachAt(ee,z,function(M,B,H){O(M)?F.push(M):M instanceof m.default.Container&&(F=F.concat(q(M,B,C))),C-=H}),F};return R(this,N,P)}},{key:"optimize",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(u(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,N,P),N.length>0&&this.emitter.emit(f.default.events.SCROLL_OPTIMIZE,N,P))}},{key:"path",value:function(N){return u(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"path",this).call(this,N).slice(1)}},{key:"update",value:function(N){if(this.batch!==!0){var P=f.default.sources.USER;typeof N=="string"&&(P=N),Array.isArray(N)||(N=this.observer.takeRecords()),N.length>0&&this.emitter.emit(f.default.events.SCROLL_BEFORE_UPDATE,P,N),u(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"update",this).call(this,N.concat([])),N.length>0&&this.emitter.emit(f.default.events.SCROLL_UPDATE,P,N)}}}]),x}(m.default.Scroll);_.blotName="scroll",_.className="ql-editor",_.tagName="DIV",_.defaultChild="block",_.allowedChildren=[a.default,l.BlockEmbed,g.default],n.default=_},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},s=function(){function D($,W){var X=[],ie=!0,fe=!1,we=void 0;try{for(var ye=$[Symbol.iterator](),be;!(ie=(be=ye.next()).done)&&(X.push(be.value),!(W&&X.length===W));ie=!0);}catch(U){fe=!0,we=U}finally{try{!ie&&ye.return&&ye.return()}finally{if(fe)throw we}}return X}return function($,W){if(Array.isArray($))return $;if(Symbol.iterator in Object($))return D($,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function D($,W){for(var X=0;X<W.length;X++){var ie=W[X];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty($,ie.key,ie)}}return function($,W,X){return W&&D($.prototype,W),X&&D($,X),$}}(),c=r(21),m=k(c),y=r(11),f=k(y),l=r(3),a=k(l),p=r(2),b=k(p),w=r(20),v=k(w),h=r(0),g=k(h),d=r(5),A=k(d),S=r(10),E=k(S),O=r(9),_=k(O);function k(D){return D&&D.__esModule?D:{default:D}}function x(D,$,W){return $ in D?Object.defineProperty(D,$,{value:W,enumerable:!0,configurable:!0,writable:!0}):D[$]=W,D}function I(D,$){if(!(D instanceof $))throw new TypeError("Cannot call a class as a function")}function N(D,$){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $&&(typeof $=="object"||typeof $=="function")?$:D}function P(D,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $);D.prototype=Object.create($&&$.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(D,$):D.__proto__=$)}var R=(0,E.default)("quill:keyboard"),q=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",J=function(D){P($,D),u($,null,[{key:"match",value:function(X,ie){return ie=V(ie),["altKey","ctrlKey","metaKey","shiftKey"].some(function(fe){return!!ie[fe]!==X[fe]&&ie[fe]!==null})?!1:ie.key===(X.which||X.keyCode)}}]);function $(W,X){I(this,$);var ie=N(this,($.__proto__||Object.getPrototypeOf($)).call(this,W,X));return ie.bindings={},Object.keys(ie.options.bindings).forEach(function(fe){fe==="list autofill"&&W.scroll.whitelist!=null&&!W.scroll.whitelist.list||ie.options.bindings[fe]&&ie.addBinding(ie.options.bindings[fe])}),ie.addBinding({key:$.keys.ENTER,shiftKey:null},M),ie.addBinding({key:$.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ie.addBinding({key:$.keys.BACKSPACE},{collapsed:!0},z),ie.addBinding({key:$.keys.DELETE},{collapsed:!0},F)):(ie.addBinding({key:$.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},z),ie.addBinding({key:$.keys.DELETE},{collapsed:!0,suffix:/^.?$/},F)),ie.addBinding({key:$.keys.BACKSPACE},{collapsed:!1},C),ie.addBinding({key:$.keys.DELETE},{collapsed:!1},C),ie.addBinding({key:$.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},z),ie.listen(),ie}return u($,[{key:"addBinding",value:function(X){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},we=V(X);if(we==null||we.key==null)return R.warn("Attempted to add invalid keyboard binding",we);typeof ie=="function"&&(ie={handler:ie}),typeof fe=="function"&&(fe={handler:fe}),we=(0,a.default)(we,ie,fe),this.bindings[we.key]=this.bindings[we.key]||[],this.bindings[we.key].push(we)}},{key:"listen",value:function(){var X=this;this.quill.root.addEventListener("keydown",function(ie){if(!ie.defaultPrevented){var fe=ie.which||ie.keyCode,we=(X.bindings[fe]||[]).filter(function(ce){return $.match(ie,ce)});if(we.length!==0){var ye=X.quill.getSelection();if(!(ye==null||!X.quill.hasFocus())){var be=X.quill.getLine(ye.index),U=s(be,2),Q=U[0],Y=U[1],j=X.quill.getLeaf(ye.index),G=s(j,2),se=G[0],ue=G[1],re=ye.length===0?[se,ue]:X.quill.getLeaf(ye.index+ye.length),ge=s(re,2),ve=ge[0],Oe=ge[1],Fe=se instanceof g.default.Text?se.value().slice(0,ue):"",Ue=ve instanceof g.default.Text?ve.value().slice(Oe):"",_e={collapsed:ye.length===0,empty:ye.length===0&&Q.length()<=1,format:X.quill.getFormat(ye),offset:Y,prefix:Fe,suffix:Ue},Ce=we.some(function(ce){if(ce.collapsed!=null&&ce.collapsed!==_e.collapsed||ce.empty!=null&&ce.empty!==_e.empty||ce.offset!=null&&ce.offset!==_e.offset)return!1;if(Array.isArray(ce.format)){if(ce.format.every(function(De){return _e.format[De]==null}))return!1}else if(o(ce.format)==="object"&&!Object.keys(ce.format).every(function(De){return ce.format[De]===!0?_e.format[De]!=null:ce.format[De]===!1?_e.format[De]==null:(0,f.default)(ce.format[De],_e.format[De])}))return!1;return ce.prefix!=null&&!ce.prefix.test(_e.prefix)||ce.suffix!=null&&!ce.suffix.test(_e.suffix)?!1:ce.handler.call(X,ye,_e)!==!0});Ce&&ie.preventDefault()}}}})}}]),$}(_.default);J.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},J.DEFAULTS={bindings:{bold:H("bold"),italic:H("italic"),underline:H("underline"),indent:{key:J.keys.TAB,format:["blockquote","indent","list"],handler:function($,W){if(W.collapsed&&W.offset!==0)return!0;this.quill.format("indent","+1",A.default.sources.USER)}},outdent:{key:J.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function($,W){if(W.collapsed&&W.offset!==0)return!0;this.quill.format("indent","-1",A.default.sources.USER)}},"outdent backspace":{key:J.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function($,W){W.format.indent!=null?this.quill.format("indent","-1",A.default.sources.USER):W.format.list!=null&&this.quill.format("list",!1,A.default.sources.USER)}},"indent code-block":B(!0),"outdent code-block":B(!1),"remove tab":{key:J.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function($){this.quill.deleteText($.index-1,1,A.default.sources.USER)}},tab:{key:J.keys.TAB,handler:function($){this.quill.history.cutoff();var W=new b.default().retain($.index).delete($.length).insert("	");this.quill.updateContents(W,A.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection($.index+1,A.default.sources.SILENT)}},"list empty enter":{key:J.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function($,W){this.quill.format("list",!1,A.default.sources.USER),W.format.indent&&this.quill.format("indent",!1,A.default.sources.USER)}},"checklist enter":{key:J.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function($){var W=this.quill.getLine($.index),X=s(W,2),ie=X[0],fe=X[1],we=(0,a.default)({},ie.formats(),{list:"checked"}),ye=new b.default().retain($.index).insert(`
`,we).retain(ie.length()-fe-1).retain(1,{list:"unchecked"});this.quill.updateContents(ye,A.default.sources.USER),this.quill.setSelection($.index+1,A.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:J.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function($,W){var X=this.quill.getLine($.index),ie=s(X,2),fe=ie[0],we=ie[1],ye=new b.default().retain($.index).insert(`
`,W.format).retain(fe.length()-we-1).retain(1,{header:null});this.quill.updateContents(ye,A.default.sources.USER),this.quill.setSelection($.index+1,A.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function($,W){var X=W.prefix.length,ie=this.quill.getLine($.index),fe=s(ie,2),we=fe[0],ye=fe[1];if(ye>X)return!0;var be=void 0;switch(W.prefix.trim()){case"[]":case"[ ]":be="unchecked";break;case"[x]":be="checked";break;case"-":case"*":be="bullet";break;default:be="ordered"}this.quill.insertText($.index," ",A.default.sources.USER),this.quill.history.cutoff();var U=new b.default().retain($.index-ye).delete(X+1).retain(we.length()-2-ye).retain(1,{list:be});this.quill.updateContents(U,A.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection($.index-X,A.default.sources.SILENT)}},"code exit":{key:J.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function($){var W=this.quill.getLine($.index),X=s(W,2),ie=X[0],fe=X[1],we=new b.default().retain($.index+ie.length()-fe-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(we,A.default.sources.USER)}},"embed left":ee(J.keys.LEFT,!1),"embed left shift":ee(J.keys.LEFT,!0),"embed right":ee(J.keys.RIGHT,!1),"embed right shift":ee(J.keys.RIGHT,!0)}};function ee(D,$){var W,X=D===J.keys.LEFT?"prefix":"suffix";return W={key:D,shiftKey:$,altKey:null},x(W,X,/^$/),x(W,"handler",function(fe){var we=fe.index;D===J.keys.RIGHT&&(we+=fe.length+1);var ye=this.quill.getLeaf(we),be=s(ye,1),U=be[0];return U instanceof g.default.Embed?(D===J.keys.LEFT?$?this.quill.setSelection(fe.index-1,fe.length+1,A.default.sources.USER):this.quill.setSelection(fe.index-1,A.default.sources.USER):$?this.quill.setSelection(fe.index,fe.length+1,A.default.sources.USER):this.quill.setSelection(fe.index+fe.length+1,A.default.sources.USER),!1):!0}),W}function z(D,$){if(!(D.index===0||this.quill.getLength()<=1)){var W=this.quill.getLine(D.index),X=s(W,1),ie=X[0],fe={};if($.offset===0){var we=this.quill.getLine(D.index-1),ye=s(we,1),be=ye[0];if(be!=null&&be.length()>1){var U=ie.formats(),Q=this.quill.getFormat(D.index-1,1);fe=v.default.attributes.diff(U,Q)||{}}}var Y=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test($.prefix)?2:1;this.quill.deleteText(D.index-Y,Y,A.default.sources.USER),Object.keys(fe).length>0&&this.quill.formatLine(D.index-Y,Y,fe,A.default.sources.USER),this.quill.focus()}}function F(D,$){var W=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test($.suffix)?2:1;if(!(D.index>=this.quill.getLength()-W)){var X={},ie=0,fe=this.quill.getLine(D.index),we=s(fe,1),ye=we[0];if($.offset>=ye.length()-1){var be=this.quill.getLine(D.index+1),U=s(be,1),Q=U[0];if(Q){var Y=ye.formats(),j=this.quill.getFormat(D.index,1);X=v.default.attributes.diff(Y,j)||{},ie=Q.length()}}this.quill.deleteText(D.index,W,A.default.sources.USER),Object.keys(X).length>0&&this.quill.formatLine(D.index+ie-1,W,X,A.default.sources.USER)}}function C(D){var $=this.quill.getLines(D),W={};if($.length>1){var X=$[0].formats(),ie=$[$.length-1].formats();W=v.default.attributes.diff(ie,X)||{}}this.quill.deleteText(D,A.default.sources.USER),Object.keys(W).length>0&&this.quill.formatLine(D.index,1,W,A.default.sources.USER),this.quill.setSelection(D.index,A.default.sources.SILENT),this.quill.focus()}function M(D,$){var W=this;D.length>0&&this.quill.scroll.deleteAt(D.index,D.length);var X=Object.keys($.format).reduce(function(ie,fe){return g.default.query(fe,g.default.Scope.BLOCK)&&!Array.isArray($.format[fe])&&(ie[fe]=$.format[fe]),ie},{});this.quill.insertText(D.index,`
`,X,A.default.sources.USER),this.quill.setSelection(D.index+1,A.default.sources.SILENT),this.quill.focus(),Object.keys($.format).forEach(function(ie){X[ie]==null&&(Array.isArray($.format[ie])||ie!=="link"&&W.quill.format(ie,$.format[ie],A.default.sources.USER))})}function B(D){return{key:J.keys.TAB,shiftKey:!D,format:{"code-block":!0},handler:function(W){var X=g.default.query("code-block"),ie=W.index,fe=W.length,we=this.quill.scroll.descendant(X,ie),ye=s(we,2),be=ye[0],U=ye[1];if(be!=null){var Q=this.quill.getIndex(be),Y=be.newlineIndex(U,!0)+1,j=be.newlineIndex(Q+U+fe),G=be.domNode.textContent.slice(Y,j).split(`
`);U=0,G.forEach(function(se,ue){D?(be.insertAt(Y+U,X.TAB),U+=X.TAB.length,ue===0?ie+=X.TAB.length:fe+=X.TAB.length):se.startsWith(X.TAB)&&(be.deleteAt(Y+U,X.TAB.length),U-=X.TAB.length,ue===0?ie-=X.TAB.length:fe-=X.TAB.length),U+=se.length+1}),this.quill.update(A.default.sources.USER),this.quill.setSelection(ie,fe,A.default.sources.SILENT)}}}}function H(D){return{key:D[0].toUpperCase(),shortKey:!0,handler:function(W,X){this.quill.format(D,!X.format[D],A.default.sources.USER)}}}function V(D){if(typeof D=="string"||typeof D=="number")return V({key:D});if((typeof D>"u"?"undefined":o(D))==="object"&&(D=(0,m.default)(D,!1)),typeof D.key=="string")if(J.keys[D.key.toUpperCase()]!=null)D.key=J.keys[D.key.toUpperCase()];else if(D.key.length===1)D.key=D.key.toUpperCase().charCodeAt(0);else return null;return D.shortKey&&(D[q]=D.shortKey,delete D.shortKey),D}n.default=J,n.SHORTKEY=q},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function v(h,g){var d=[],A=!0,S=!1,E=void 0;try{for(var O=h[Symbol.iterator](),_;!(A=(_=O.next()).done)&&(d.push(_.value),!(g&&d.length===g));A=!0);}catch(k){S=!0,E=k}finally{try{!A&&O.return&&O.return()}finally{if(S)throw E}}return d}return function(h,g){if(Array.isArray(h))return h;if(Symbol.iterator in Object(h))return v(h,g);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function v(h,g,d){h===null&&(h=Function.prototype);var A=Object.getOwnPropertyDescriptor(h,g);if(A===void 0){var S=Object.getPrototypeOf(h);return S===null?void 0:v(S,g,d)}else{if("value"in A)return A.value;var E=A.get;return E===void 0?void 0:E.call(d)}},u=function(){function v(h,g){for(var d=0;d<g.length;d++){var A=g[d];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(h,A.key,A)}}return function(h,g,d){return g&&v(h.prototype,g),d&&v(h,d),h}}(),c=r(0),m=l(c),y=r(7),f=l(y);function l(v){return v&&v.__esModule?v:{default:v}}function a(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}function p(v,h){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:v}function b(v,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);v.prototype=Object.create(h&&h.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(v,h):v.__proto__=h)}var w=function(v){b(h,v),u(h,null,[{key:"value",value:function(){}}]);function h(g,d){a(this,h);var A=p(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,g));return A.selection=d,A.textNode=document.createTextNode(h.CONTENTS),A.domNode.appendChild(A.textNode),A._length=0,A}return u(h,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(d,A){if(this._length!==0)return s(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"format",this).call(this,d,A);for(var S=this,E=0;S!=null&&S.statics.scope!==m.default.Scope.BLOCK_BLOT;)E+=S.offset(S.parent),S=S.parent;S!=null&&(this._length=h.CONTENTS.length,S.optimize(),S.formatAt(E,h.CONTENTS.length,d,A),this._length=0)}},{key:"index",value:function(d,A){return d===this.textNode?0:s(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"index",this).call(this,d,A)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var d=this.textNode,A=this.selection.getNativeRange(),S=void 0,E=void 0,O=void 0;if(A!=null&&A.start.node===d&&A.end.node===d){var _=[d,A.start.offset,A.end.offset];S=_[0],E=_[1],O=_[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==h.CONTENTS){var k=this.textNode.data.split(h.CONTENTS).join("");this.next instanceof f.default?(S=this.next.domNode,this.next.insertAt(0,k),this.textNode.data=h.CONTENTS):(this.textNode.data=k,this.parent.insertBefore(m.default.create(this.textNode),this),this.textNode=document.createTextNode(h.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),E!=null){var x=[E,O].map(function(N){return Math.max(0,Math.min(S.data.length,N-1))}),I=o(x,2);return E=I[0],O=I[1],{startNode:S,startOffset:E,endNode:S,endOffset:O}}}}},{key:"update",value:function(d,A){var S=this;if(d.some(function(O){return O.type==="characterData"&&O.target===S.textNode})){var E=this.restore();E&&(A.range=E)}}},{key:"value",value:function(){return""}}]),h}(m.default.Embed);w.blotName="cursor",w.className="ql-cursor",w.tagName="span",w.CONTENTS="\uFEFF",n.default=w},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(0),s=m(o),u=r(4),c=m(u);function m(p){return p&&p.__esModule?p:{default:p}}function y(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function f(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function l(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var a=function(p){l(b,p);function b(){return y(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return b}(s.default.Container);a.allowedChildren=[c.default,u.BlockEmbed,a],n.default=a},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var o=function(){function w(v,h){for(var g=0;g<h.length;g++){var d=h[g];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(v,d.key,d)}}return function(v,h,g){return h&&w(v.prototype,h),g&&w(v,g),v}}(),s=function w(v,h,g){v===null&&(v=Function.prototype);var d=Object.getOwnPropertyDescriptor(v,h);if(d===void 0){var A=Object.getPrototypeOf(v);return A===null?void 0:w(A,h,g)}else{if("value"in d)return d.value;var S=d.get;return S===void 0?void 0:S.call(g)}},u=r(0),c=m(u);function m(w){return w&&w.__esModule?w:{default:w}}function y(w,v){if(!(w instanceof v))throw new TypeError("Cannot call a class as a function")}function f(w,v){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:w}function l(w,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(w,v):w.__proto__=v)}var a=function(w){l(v,w);function v(){return y(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"value",value:function(g){var d=s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,g);return d.startsWith("rgb(")?(d=d.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+d.split(",").map(function(A){return("00"+parseInt(A).toString(16)).slice(-2)}).join("")):d}}]),v}(c.default.Attributor.Style),p=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),b=new a("color","color",{scope:c.default.Scope.INLINE});n.ColorAttributor=a,n.ColorClass=p,n.ColorStyle=b},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var o=function(){function b(w,v){for(var h=0;h<v.length;h++){var g=v[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(w,g.key,g)}}return function(w,v,h){return v&&b(w.prototype,v),h&&b(w,h),w}}(),s=function b(w,v,h){w===null&&(w=Function.prototype);var g=Object.getOwnPropertyDescriptor(w,v);if(g===void 0){var d=Object.getPrototypeOf(w);return d===null?void 0:b(d,v,h)}else{if("value"in g)return g.value;var A=g.get;return A===void 0?void 0:A.call(h)}},u=r(6),c=m(u);function m(b){return b&&b.__esModule?b:{default:b}}function y(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function f(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function l(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var a=function(b){l(w,b);function w(){return y(this,w),f(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return o(w,[{key:"format",value:function(h,g){if(h!==this.statics.blotName||!g)return s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,h,g);g=this.constructor.sanitize(g),this.domNode.setAttribute("href",g)}}],[{key:"create",value:function(h){var g=s(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,h);return h=this.sanitize(h),g.setAttribute("href",h),g.setAttribute("rel","noopener noreferrer"),g.setAttribute("target","_blank"),g}},{key:"formats",value:function(h){return h.getAttribute("href")}},{key:"sanitize",value:function(h){return p(h,this.PROTOCOL_WHITELIST)?h:this.SANITIZED_URL}}]),w}(c.default);a.blotName="link",a.tagName="A",a.SANITIZED_URL="about:blank",a.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function p(b,w){var v=document.createElement("a");v.href=b;var h=v.href.slice(0,v.href.indexOf(":"));return w.indexOf(h)>-1}n.default=a,n.sanitize=p},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},s=function(){function w(v,h){for(var g=0;g<h.length;g++){var d=h[g];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(v,d.key,d)}}return function(v,h,g){return h&&w(v.prototype,h),g&&w(v,g),v}}(),u=r(23),c=f(u),m=r(107),y=f(m);function f(w){return w&&w.__esModule?w:{default:w}}function l(w,v){if(!(w instanceof v))throw new TypeError("Cannot call a class as a function")}var a=0;function p(w,v){w.setAttribute(v,w.getAttribute(v)!=="true")}var b=function(){function w(v){var h=this;l(this,w),this.select=v,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){h.togglePicker()}),this.label.addEventListener("keydown",function(g){switch(g.keyCode){case c.default.keys.ENTER:h.togglePicker();break;case c.default.keys.ESCAPE:h.escape(),g.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return s(w,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),p(this.label,"aria-expanded"),p(this.options,"aria-hidden")}},{key:"buildItem",value:function(h){var g=this,d=document.createElement("span");return d.tabIndex="0",d.setAttribute("role","button"),d.classList.add("ql-picker-item"),h.hasAttribute("value")&&d.setAttribute("data-value",h.getAttribute("value")),h.textContent&&d.setAttribute("data-label",h.textContent),d.addEventListener("click",function(){g.selectItem(d,!0)}),d.addEventListener("keydown",function(A){switch(A.keyCode){case c.default.keys.ENTER:g.selectItem(d,!0),A.preventDefault();break;case c.default.keys.ESCAPE:g.escape(),A.preventDefault();break}}),d}},{key:"buildLabel",value:function(){var h=document.createElement("span");return h.classList.add("ql-picker-label"),h.innerHTML=y.default,h.tabIndex="0",h.setAttribute("role","button"),h.setAttribute("aria-expanded","false"),this.container.appendChild(h),h}},{key:"buildOptions",value:function(){var h=this,g=document.createElement("span");g.classList.add("ql-picker-options"),g.setAttribute("aria-hidden","true"),g.tabIndex="-1",g.id="ql-picker-options-"+a,a+=1,this.label.setAttribute("aria-controls",g.id),this.options=g,[].slice.call(this.select.options).forEach(function(d){var A=h.buildItem(d);g.appendChild(A),d.selected===!0&&h.selectItem(A)}),this.container.appendChild(g)}},{key:"buildPicker",value:function(){var h=this;[].slice.call(this.select.attributes).forEach(function(g){h.container.setAttribute(g.name,g.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var h=this;this.close(),setTimeout(function(){return h.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(h){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,d=this.container.querySelector(".ql-selected");if(h!==d&&(d!=null&&d.classList.remove("ql-selected"),h!=null&&(h.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(h.parentNode.children,h),h.hasAttribute("data-value")?this.label.setAttribute("data-value",h.getAttribute("data-value")):this.label.removeAttribute("data-value"),h.hasAttribute("data-label")?this.label.setAttribute("data-label",h.getAttribute("data-label")):this.label.removeAttribute("data-label"),g))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":o(Event))==="object"){var A=document.createEvent("Event");A.initEvent("change",!0,!0),this.select.dispatchEvent(A)}this.close()}}},{key:"update",value:function(){var h=void 0;if(this.select.selectedIndex>-1){var g=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];h=this.select.options[this.select.selectedIndex],this.selectItem(g)}else this.selectItem(null);var d=h!=null&&h!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",d)}}]),w}();n.default=b},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(0),s=R(o),u=r(5),c=R(u),m=r(4),y=R(m),f=r(16),l=R(f),a=r(25),p=R(a),b=r(24),w=R(b),v=r(35),h=R(v),g=r(6),d=R(g),A=r(22),S=R(A),E=r(7),O=R(E),_=r(55),k=R(_),x=r(42),I=R(x),N=r(23),P=R(N);function R(q){return q&&q.__esModule?q:{default:q}}c.default.register({"blots/block":y.default,"blots/block/embed":m.BlockEmbed,"blots/break":l.default,"blots/container":p.default,"blots/cursor":w.default,"blots/embed":h.default,"blots/inline":d.default,"blots/scroll":S.default,"blots/text":O.default,"modules/clipboard":k.default,"modules/history":I.default,"modules/keyboard":P.default}),s.default.register(y.default,l.default,w.default,d.default,S.default,O.default),n.default=c.default},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(1),s=function(){function u(c){this.domNode=c,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(u.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),u.create=function(c){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var m;return Array.isArray(this.tagName)?(typeof c=="string"&&(c=c.toUpperCase(),parseInt(c).toString()===c&&(c=parseInt(c))),typeof c=="number"?m=document.createElement(this.tagName[c-1]):this.tagName.indexOf(c)>-1?m=document.createElement(c):m=document.createElement(this.tagName[0])):m=document.createElement(this.tagName),this.className&&m.classList.add(this.className),m},u.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},u.prototype.clone=function(){var c=this.domNode.cloneNode(!1);return o.create(c)},u.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},u.prototype.deleteAt=function(c,m){var y=this.isolate(c,m);y.remove()},u.prototype.formatAt=function(c,m,y,f){var l=this.isolate(c,m);if(o.query(y,o.Scope.BLOT)!=null&&f)l.wrap(y,f);else if(o.query(y,o.Scope.ATTRIBUTE)!=null){var a=o.create(this.statics.scope);l.wrap(a),a.format(y,f)}},u.prototype.insertAt=function(c,m,y){var f=y==null?o.create("text",m):o.create(m,y),l=this.split(c);this.parent.insertBefore(f,l)},u.prototype.insertInto=function(c,m){m===void 0&&(m=null),this.parent!=null&&this.parent.children.remove(this);var y=null;c.children.insertBefore(this,m),m!=null&&(y=m.domNode),(this.domNode.parentNode!=c.domNode||this.domNode.nextSibling!=y)&&c.domNode.insertBefore(this.domNode,y),this.parent=c,this.attach()},u.prototype.isolate=function(c,m){var y=this.split(c);return y.split(m),y},u.prototype.length=function(){return 1},u.prototype.offset=function(c){return c===void 0&&(c=this.parent),this.parent==null||this==c?0:this.parent.children.offset(this)+this.parent.offset(c)},u.prototype.optimize=function(c){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},u.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},u.prototype.replace=function(c){c.parent!=null&&(c.parent.insertBefore(this,c.next),c.remove())},u.prototype.replaceWith=function(c,m){var y=typeof c=="string"?o.create(c,m):c;return y.replace(this),y},u.prototype.split=function(c,m){return c===0?this:this.next},u.prototype.update=function(c,m){},u.prototype.wrap=function(c,m){var y=typeof c=="string"?o.create(c,m):c;return this.parent!=null&&this.parent.insertBefore(y,this.next),y.appendChild(this),y},u.blotName="abstract",u}();n.default=s},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(12),s=r(32),u=r(33),c=r(1),m=function(){function y(f){this.attributes={},this.domNode=f,this.build()}return y.prototype.attribute=function(f,l){l?f.add(this.domNode,l)&&(f.value(this.domNode)!=null?this.attributes[f.attrName]=f:delete this.attributes[f.attrName]):(f.remove(this.domNode),delete this.attributes[f.attrName])},y.prototype.build=function(){var f=this;this.attributes={};var l=o.default.keys(this.domNode),a=s.default.keys(this.domNode),p=u.default.keys(this.domNode);l.concat(a).concat(p).forEach(function(b){var w=c.query(b,c.Scope.ATTRIBUTE);w instanceof o.default&&(f.attributes[w.attrName]=w)})},y.prototype.copy=function(f){var l=this;Object.keys(this.attributes).forEach(function(a){var p=l.attributes[a].value(l.domNode);f.format(a,p)})},y.prototype.move=function(f){var l=this;this.copy(f),Object.keys(this.attributes).forEach(function(a){l.attributes[a].remove(l.domNode)}),this.attributes={}},y.prototype.values=function(){var f=this;return Object.keys(this.attributes).reduce(function(l,a){return l[a]=f.attributes[a].value(f.domNode),l},{})},y}();n.default=m},function(e,n,r){var o=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,f){y.__proto__=f}||function(y,f){for(var l in f)f.hasOwnProperty(l)&&(y[l]=f[l])};return function(y,f){m(y,f);function l(){this.constructor=y}y.prototype=f===null?Object.create(f):(l.prototype=f.prototype,new l)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(12);function u(m,y){var f=m.getAttribute("class")||"";return f.split(/\s+/).filter(function(l){return l.indexOf(y+"-")===0})}var c=function(m){o(y,m);function y(){return m!==null&&m.apply(this,arguments)||this}return y.keys=function(f){return(f.getAttribute("class")||"").split(/\s+/).map(function(l){return l.split("-").slice(0,-1).join("-")})},y.prototype.add=function(f,l){return this.canAdd(f,l)?(this.remove(f),f.classList.add(this.keyName+"-"+l),!0):!1},y.prototype.remove=function(f){var l=u(f,this.keyName);l.forEach(function(a){f.classList.remove(a)}),f.classList.length===0&&f.removeAttribute("class")},y.prototype.value=function(f){var l=u(f,this.keyName)[0]||"",a=l.slice(this.keyName.length+1);return this.canAdd(f,a)?a:""},y}(s.default);n.default=c},function(e,n,r){var o=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,f){y.__proto__=f}||function(y,f){for(var l in f)f.hasOwnProperty(l)&&(y[l]=f[l])};return function(y,f){m(y,f);function l(){this.constructor=y}y.prototype=f===null?Object.create(f):(l.prototype=f.prototype,new l)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(12);function u(m){var y=m.split("-"),f=y.slice(1).map(function(l){return l[0].toUpperCase()+l.slice(1)}).join("");return y[0]+f}var c=function(m){o(y,m);function y(){return m!==null&&m.apply(this,arguments)||this}return y.keys=function(f){return(f.getAttribute("style")||"").split(";").map(function(l){var a=l.split(":");return a[0].trim()})},y.prototype.add=function(f,l){return this.canAdd(f,l)?(f.style[u(this.keyName)]=l,!0):!1},y.prototype.remove=function(f){f.style[u(this.keyName)]="",f.getAttribute("style")||f.removeAttribute("style")},y.prototype.value=function(f){var l=f.style[u(this.keyName)];return this.canAdd(f,l)?l:""},y}(s.default);n.default=c},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function c(m,y){for(var f=0;f<y.length;f++){var l=y[f];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(m,l.key,l)}}return function(m,y,f){return y&&c(m.prototype,y),f&&c(m,f),m}}();function s(c,m){if(!(c instanceof m))throw new TypeError("Cannot call a class as a function")}var u=function(){function c(m,y){s(this,c),this.quill=m,this.options=y,this.modules={}}return o(c,[{key:"init",value:function(){var y=this;Object.keys(this.options.modules).forEach(function(f){y.modules[f]==null&&y.addModule(f)})}},{key:"addModule",value:function(y){var f=this.quill.constructor.import("modules/"+y);return this.modules[y]=new f(this.quill,this.options.modules[y]||{}),this.modules[y]}}]),c}();u.DEFAULTS={modules:{}},u.themes={default:u},n.default=u},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function v(h,g){for(var d=0;d<g.length;d++){var A=g[d];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(h,A.key,A)}}return function(h,g,d){return g&&v(h.prototype,g),d&&v(h,d),h}}(),s=function v(h,g,d){h===null&&(h=Function.prototype);var A=Object.getOwnPropertyDescriptor(h,g);if(A===void 0){var S=Object.getPrototypeOf(h);return S===null?void 0:v(S,g,d)}else{if("value"in A)return A.value;var E=A.get;return E===void 0?void 0:E.call(d)}},u=r(0),c=f(u),m=r(7),y=f(m);function f(v){return v&&v.__esModule?v:{default:v}}function l(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}function a(v,h){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:v}function p(v,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);v.prototype=Object.create(h&&h.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(v,h):v.__proto__=h)}var b="\uFEFF",w=function(v){p(h,v);function h(g){l(this,h);var d=a(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,g));return d.contentNode=document.createElement("span"),d.contentNode.setAttribute("contenteditable",!1),[].slice.call(d.domNode.childNodes).forEach(function(A){d.contentNode.appendChild(A)}),d.leftGuard=document.createTextNode(b),d.rightGuard=document.createTextNode(b),d.domNode.appendChild(d.leftGuard),d.domNode.appendChild(d.contentNode),d.domNode.appendChild(d.rightGuard),d}return o(h,[{key:"index",value:function(d,A){return d===this.leftGuard?0:d===this.rightGuard?1:s(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"index",this).call(this,d,A)}},{key:"restore",value:function(d){var A=void 0,S=void 0,E=d.data.split(b).join("");if(d===this.leftGuard)if(this.prev instanceof y.default){var O=this.prev.length();this.prev.insertAt(O,E),A={startNode:this.prev.domNode,startOffset:O+E.length}}else S=document.createTextNode(E),this.parent.insertBefore(c.default.create(S),this),A={startNode:S,startOffset:E.length};else d===this.rightGuard&&(this.next instanceof y.default?(this.next.insertAt(0,E),A={startNode:this.next.domNode,startOffset:E.length}):(S=document.createTextNode(E),this.parent.insertBefore(c.default.create(S),this.next),A={startNode:S,startOffset:E.length}));return d.data=b,A}},{key:"update",value:function(d,A){var S=this;d.forEach(function(E){if(E.type==="characterData"&&(E.target===S.leftGuard||E.target===S.rightGuard)){var O=S.restore(E.target);O&&(A.range=O)}})}}]),h}(c.default.Embed);n.default=w},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var o=r(0),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}var c={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},m=new s.default.Attributor.Attribute("align","align",c),y=new s.default.Attributor.Class("align","ql-align",c),f=new s.default.Attributor.Style("align","text-align",c);n.AlignAttribute=m,n.AlignClass=y,n.AlignStyle=f},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var o=r(0),s=c(o),u=r(26);function c(f){return f&&f.__esModule?f:{default:f}}var m=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),y=new u.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});n.BackgroundClass=m,n.BackgroundStyle=y},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var o=r(0),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}var c={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},m=new s.default.Attributor.Attribute("direction","dir",c),y=new s.default.Attributor.Class("direction","ql-direction",c),f=new s.default.Attributor.Style("direction","direction",c);n.DirectionAttribute=m,n.DirectionClass=y,n.DirectionStyle=f},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var o=function(){function v(h,g){for(var d=0;d<g.length;d++){var A=g[d];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(h,A.key,A)}}return function(h,g,d){return g&&v(h.prototype,g),d&&v(h,d),h}}(),s=function v(h,g,d){h===null&&(h=Function.prototype);var A=Object.getOwnPropertyDescriptor(h,g);if(A===void 0){var S=Object.getPrototypeOf(h);return S===null?void 0:v(S,g,d)}else{if("value"in A)return A.value;var E=A.get;return E===void 0?void 0:E.call(d)}},u=r(0),c=m(u);function m(v){return v&&v.__esModule?v:{default:v}}function y(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}function f(v,h){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:v}function l(v,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);v.prototype=Object.create(h&&h.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(v,h):v.__proto__=h)}var a={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},p=new c.default.Attributor.Class("font","ql-font",a),b=function(v){l(h,v);function h(){return y(this,h),f(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return o(h,[{key:"value",value:function(d){return s(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"value",this).call(this,d).replace(/["']/g,"")}}]),h}(c.default.Attributor.Style),w=new b("font","font-family",a);n.FontStyle=w,n.FontClass=p},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var o=r(0),s=u(o);function u(y){return y&&y.__esModule?y:{default:y}}var c=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),m=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=c,n.SizeStyle=m},function(e,n,r){e.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var o=function(){function g(d,A){for(var S=0;S<A.length;S++){var E=A[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(d,E.key,E)}}return function(d,A,S){return A&&g(d.prototype,A),S&&g(d,S),d}}(),s=r(0),u=l(s),c=r(5),m=l(c),y=r(9),f=l(y);function l(g){return g&&g.__esModule?g:{default:g}}function a(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function p(g,d){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:g}function b(g,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);g.prototype=Object.create(d&&d.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(g,d):g.__proto__=d)}var w=function(g){b(d,g);function d(A,S){a(this,d);var E=p(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,A,S));return E.lastRecorded=0,E.ignoreChange=!1,E.clear(),E.quill.on(m.default.events.EDITOR_CHANGE,function(O,_,k,x){O!==m.default.events.TEXT_CHANGE||E.ignoreChange||(!E.options.userOnly||x===m.default.sources.USER?E.record(_,k):E.transform(_))}),E.quill.keyboard.addBinding({key:"Z",shortKey:!0},E.undo.bind(E)),E.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},E.redo.bind(E)),/Win/i.test(navigator.platform)&&E.quill.keyboard.addBinding({key:"Y",shortKey:!0},E.redo.bind(E)),E}return o(d,[{key:"change",value:function(S,E){if(this.stack[S].length!==0){var O=this.stack[S].pop();this.stack[E].push(O),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(O[S],m.default.sources.USER),this.ignoreChange=!1;var _=h(O[S]);this.quill.setSelection(_)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(S,E){if(S.ops.length!==0){this.stack.redo=[];var O=this.quill.getContents().diff(E),_=Date.now();if(this.lastRecorded+this.options.delay>_&&this.stack.undo.length>0){var k=this.stack.undo.pop();O=O.compose(k.undo),S=k.redo.compose(S)}else this.lastRecorded=_;this.stack.undo.push({redo:S,undo:O}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(S){this.stack.undo.forEach(function(E){E.undo=S.transform(E.undo,!0),E.redo=S.transform(E.redo,!0)}),this.stack.redo.forEach(function(E){E.undo=S.transform(E.undo,!0),E.redo=S.transform(E.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),d}(f.default);w.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function v(g){var d=g.ops[g.ops.length-1];return d==null?!1:d.insert!=null?typeof d.insert=="string"&&d.insert.endsWith(`
`):d.attributes!=null?Object.keys(d.attributes).some(function(A){return u.default.query(A,u.default.Scope.BLOCK)!=null}):!1}function h(g){var d=g.reduce(function(S,E){return S+=E.delete||0,S},0),A=g.length()-d;return v(g)&&(A-=1),A}n.default=w,n.getLastChangeIndex=h},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var o=function(){function M(B,H){for(var V=0;V<H.length;V++){var D=H[V];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(B,D.key,D)}}return function(B,H,V){return H&&M(B.prototype,H),V&&M(B,V),B}}(),s=function M(B,H,V){B===null&&(B=Function.prototype);var D=Object.getOwnPropertyDescriptor(B,H);if(D===void 0){var $=Object.getPrototypeOf(B);return $===null?void 0:M($,H,V)}else{if("value"in D)return D.value;var W=D.get;return W===void 0?void 0:W.call(V)}},u=r(3),c=_(u),m=r(2),y=_(m),f=r(8),l=_(f),a=r(23),p=_(a),b=r(34),w=_(b),v=r(59),h=_(v),g=r(60),d=_(g),A=r(28),S=_(A),E=r(61),O=_(E);function _(M){return M&&M.__esModule?M:{default:M}}function k(M,B){if(!(M instanceof B))throw new TypeError("Cannot call a class as a function")}function x(M,B){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:M}function I(M,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);M.prototype=Object.create(B&&B.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(M,B):M.__proto__=B)}var N=[!1,"center","right","justify"],P=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],R=[!1,"serif","monospace"],q=["1","2","3",!1],J=["small",!1,"large","huge"],ee=function(M){I(B,M);function B(H,V){k(this,B);var D=x(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,H,V)),$=function W(X){if(!document.body.contains(H.root))return document.body.removeEventListener("click",W);D.tooltip!=null&&!D.tooltip.root.contains(X.target)&&document.activeElement!==D.tooltip.textbox&&!D.quill.hasFocus()&&D.tooltip.hide(),D.pickers!=null&&D.pickers.forEach(function(ie){ie.container.contains(X.target)||ie.close()})};return H.emitter.listenDOM("click",document.body,$),D}return o(B,[{key:"addModule",value:function(V){var D=s(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"addModule",this).call(this,V);return V==="toolbar"&&this.extendToolbar(D),D}},{key:"buildButtons",value:function(V,D){V.forEach(function($){var W=$.getAttribute("class")||"";W.split(/\s+/).forEach(function(X){if(X.startsWith("ql-")&&(X=X.slice(3),D[X]!=null))if(X==="direction")$.innerHTML=D[X][""]+D[X].rtl;else if(typeof D[X]=="string")$.innerHTML=D[X];else{var ie=$.value||"";ie!=null&&D[X][ie]&&($.innerHTML=D[X][ie])}})})}},{key:"buildPickers",value:function(V,D){var $=this;this.pickers=V.map(function(X){if(X.classList.contains("ql-align"))return X.querySelector("option")==null&&C(X,N),new d.default(X,D.align);if(X.classList.contains("ql-background")||X.classList.contains("ql-color")){var ie=X.classList.contains("ql-background")?"background":"color";return X.querySelector("option")==null&&C(X,P,ie==="background"?"#ffffff":"#000000"),new h.default(X,D[ie])}else return X.querySelector("option")==null&&(X.classList.contains("ql-font")?C(X,R):X.classList.contains("ql-header")?C(X,q):X.classList.contains("ql-size")&&C(X,J)),new S.default(X)});var W=function(){$.pickers.forEach(function(ie){ie.update()})};this.quill.on(l.default.events.EDITOR_CHANGE,W)}}]),B}(w.default);ee.DEFAULTS=(0,c.default)(!0,{},w.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var B=this,H=this.container.querySelector("input.ql-image[type=file]");H==null&&(H=document.createElement("input"),H.setAttribute("type","file"),H.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),H.classList.add("ql-image"),H.addEventListener("change",function(){if(H.files!=null&&H.files[0]!=null){var V=new FileReader;V.onload=function(D){var $=B.quill.getSelection(!0);B.quill.updateContents(new y.default().retain($.index).delete($.length).insert({image:D.target.result}),l.default.sources.USER),B.quill.setSelection($.index+1,l.default.sources.SILENT),H.value=""},V.readAsDataURL(H.files[0])}}),this.container.appendChild(H)),H.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var z=function(M){I(B,M);function B(H,V){k(this,B);var D=x(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,H,V));return D.textbox=D.root.querySelector('input[type="text"]'),D.listen(),D}return o(B,[{key:"listen",value:function(){var V=this;this.textbox.addEventListener("keydown",function(D){p.default.match(D,"enter")?(V.save(),D.preventDefault()):p.default.match(D,"escape")&&(V.cancel(),D.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),D!=null?this.textbox.value=D:V!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+V)||""),this.root.setAttribute("data-mode",V)}},{key:"restoreFocus",value:function(){var V=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=V}},{key:"save",value:function(){var V=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var D=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",V,l.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",V,l.default.sources.USER)),this.quill.root.scrollTop=D;break}case"video":V=F(V);case"formula":{if(!V)break;var $=this.quill.getSelection(!0);if($!=null){var W=$.index+$.length;this.quill.insertEmbed(W,this.root.getAttribute("data-mode"),V,l.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(W+1," ",l.default.sources.USER),this.quill.setSelection(W+2,l.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),B}(O.default);function F(M){var B=M.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||M.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return B?(B[1]||"https")+"://www.youtube.com/embed/"+B[2]+"?showinfo=0":(B=M.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(B[1]||"https")+"://player.vimeo.com/video/"+B[2]+"/":M}function C(M,B){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;B.forEach(function(V){var D=document.createElement("option");V===H?D.setAttribute("selected","selected"):D.setAttribute("value",V),M.appendChild(D)})}n.BaseTooltip=z,n.default=ee},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function s(){this.head=this.tail=null,this.length=0}return s.prototype.append=function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];this.insertBefore(u[0],null),u.length>1&&this.append.apply(this,u.slice(1))},s.prototype.contains=function(u){for(var c,m=this.iterator();c=m();)if(c===u)return!0;return!1},s.prototype.insertBefore=function(u,c){u&&(u.next=c,c!=null?(u.prev=c.prev,c.prev!=null&&(c.prev.next=u),c.prev=u,c===this.head&&(this.head=u)):this.tail!=null?(this.tail.next=u,u.prev=this.tail,this.tail=u):(u.prev=null,this.head=this.tail=u),this.length+=1)},s.prototype.offset=function(u){for(var c=0,m=this.head;m!=null;){if(m===u)return c;c+=m.length(),m=m.next}return-1},s.prototype.remove=function(u){this.contains(u)&&(u.prev!=null&&(u.prev.next=u.next),u.next!=null&&(u.next.prev=u.prev),u===this.head&&(this.head=u.next),u===this.tail&&(this.tail=u.prev),this.length-=1)},s.prototype.iterator=function(u){return u===void 0&&(u=this.head),function(){var c=u;return u!=null&&(u=u.next),c}},s.prototype.find=function(u,c){c===void 0&&(c=!1);for(var m,y=this.iterator();m=y();){var f=m.length();if(u<f||c&&u===f&&(m.next==null||m.next.length()!==0))return[m,u];u-=f}return[null,0]},s.prototype.forEach=function(u){for(var c,m=this.iterator();c=m();)u(c)},s.prototype.forEachAt=function(u,c,m){if(!(c<=0))for(var y=this.find(u),f=y[0],l=y[1],a,p=u-l,b=this.iterator(f);(a=b())&&p<u+c;){var w=a.length();u>p?m(a,u-p,Math.min(c,p+w-u)):m(a,0,Math.min(w,u+c-p)),p+=w}},s.prototype.map=function(u){return this.reduce(function(c,m){return c.push(u(m)),c},[])},s.prototype.reduce=function(u,c){for(var m,y=this.iterator();m=y();)c=u(c,m);return c},s}();n.default=o},function(e,n,r){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var p in a)a.hasOwnProperty(p)&&(l[p]=a[p])};return function(l,a){f(l,a);function p(){this.constructor=l}l.prototype=a===null?Object.create(a):(p.prototype=a.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(17),u=r(1),c={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},m=100,y=function(f){o(l,f);function l(a){var p=f.call(this,a)||this;return p.scroll=p,p.observer=new MutationObserver(function(b){p.update(b)}),p.observer.observe(p.domNode,c),p.attach(),p}return l.prototype.detach=function(){f.prototype.detach.call(this),this.observer.disconnect()},l.prototype.deleteAt=function(a,p){this.update(),a===0&&p===this.length()?this.children.forEach(function(b){b.remove()}):f.prototype.deleteAt.call(this,a,p)},l.prototype.formatAt=function(a,p,b,w){this.update(),f.prototype.formatAt.call(this,a,p,b,w)},l.prototype.insertAt=function(a,p,b){this.update(),f.prototype.insertAt.call(this,a,p,b)},l.prototype.optimize=function(a,p){var b=this;a===void 0&&(a=[]),p===void 0&&(p={}),f.prototype.optimize.call(this,p);for(var w=[].slice.call(this.observer.takeRecords());w.length>0;)a.push(w.pop());for(var v=function(A,S){S===void 0&&(S=!0),!(A==null||A===b)&&A.domNode.parentNode!=null&&(A.domNode[u.DATA_KEY].mutations==null&&(A.domNode[u.DATA_KEY].mutations=[]),S&&v(A.parent))},h=function(A){A.domNode[u.DATA_KEY]==null||A.domNode[u.DATA_KEY].mutations==null||(A instanceof s.default&&A.children.forEach(h),A.optimize(p))},g=a,d=0;g.length>0;d+=1){if(d>=m)throw new Error("[Parchment] Maximum optimize iterations reached");for(g.forEach(function(A){var S=u.find(A.target,!0);S!=null&&(S.domNode===A.target&&(A.type==="childList"?(v(u.find(A.previousSibling,!1)),[].forEach.call(A.addedNodes,function(E){var O=u.find(E,!1);v(O,!1),O instanceof s.default&&O.children.forEach(function(_){v(_,!1)})})):A.type==="attributes"&&v(S.prev)),v(S))}),this.children.forEach(h),g=[].slice.call(this.observer.takeRecords()),w=g.slice();w.length>0;)a.push(w.pop())}},l.prototype.update=function(a,p){var b=this;p===void 0&&(p={}),a=a||this.observer.takeRecords(),a.map(function(w){var v=u.find(w.target,!0);return v==null?null:v.domNode[u.DATA_KEY].mutations==null?(v.domNode[u.DATA_KEY].mutations=[w],v):(v.domNode[u.DATA_KEY].mutations.push(w),null)}).forEach(function(w){w==null||w===b||w.domNode[u.DATA_KEY]==null||w.update(w.domNode[u.DATA_KEY].mutations||[],p)}),this.domNode[u.DATA_KEY].mutations!=null&&f.prototype.update.call(this,this.domNode[u.DATA_KEY].mutations,p),this.optimize(a,p)},l.blotName="scroll",l.defaultChild="block",l.scope=u.Scope.BLOCK_BLOT,l.tagName="DIV",l}(s.default);n.default=y},function(e,n,r){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,l){f.__proto__=l}||function(f,l){for(var a in l)l.hasOwnProperty(a)&&(f[a]=l[a])};return function(f,l){y(f,l);function a(){this.constructor=f}f.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(18),u=r(1);function c(y,f){if(Object.keys(y).length!==Object.keys(f).length)return!1;for(var l in y)if(y[l]!==f[l])return!1;return!0}var m=function(y){o(f,y);function f(){return y!==null&&y.apply(this,arguments)||this}return f.formats=function(l){if(l.tagName!==f.tagName)return y.formats.call(this,l)},f.prototype.format=function(l,a){var p=this;l===this.statics.blotName&&!a?(this.children.forEach(function(b){b instanceof s.default||(b=b.wrap(f.blotName,!0)),p.attributes.copy(b)}),this.unwrap()):y.prototype.format.call(this,l,a)},f.prototype.formatAt=function(l,a,p,b){if(this.formats()[p]!=null||u.query(p,u.Scope.ATTRIBUTE)){var w=this.isolate(l,a);w.format(p,b)}else y.prototype.formatAt.call(this,l,a,p,b)},f.prototype.optimize=function(l){y.prototype.optimize.call(this,l);var a=this.formats();if(Object.keys(a).length===0)return this.unwrap();var p=this.next;p instanceof f&&p.prev===this&&c(a,p.formats())&&(p.moveChildren(this),p.remove())},f.blotName="inline",f.scope=u.Scope.INLINE_BLOT,f.tagName="SPAN",f}(s.default);n.default=m},function(e,n,r){var o=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,f){y.__proto__=f}||function(y,f){for(var l in f)f.hasOwnProperty(l)&&(y[l]=f[l])};return function(y,f){m(y,f);function l(){this.constructor=y}y.prototype=f===null?Object.create(f):(l.prototype=f.prototype,new l)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(18),u=r(1),c=function(m){o(y,m);function y(){return m!==null&&m.apply(this,arguments)||this}return y.formats=function(f){var l=u.query(y.blotName).tagName;if(f.tagName!==l)return m.formats.call(this,f)},y.prototype.format=function(f,l){u.query(f,u.Scope.BLOCK)!=null&&(f===this.statics.blotName&&!l?this.replaceWith(y.blotName):m.prototype.format.call(this,f,l))},y.prototype.formatAt=function(f,l,a,p){u.query(a,u.Scope.BLOCK)!=null?this.format(a,p):m.prototype.formatAt.call(this,f,l,a,p)},y.prototype.insertAt=function(f,l,a){if(a==null||u.query(l,u.Scope.INLINE)!=null)m.prototype.insertAt.call(this,f,l,a);else{var p=this.split(f),b=u.create(l,a);p.parent.insertBefore(b,p)}},y.prototype.update=function(f,l){navigator.userAgent.match(/Trident/)?this.build():m.prototype.update.call(this,f,l)},y.blotName="block",y.scope=u.Scope.BLOCK_BLOT,y.tagName="P",y}(s.default);n.default=c},function(e,n,r){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var f in y)y.hasOwnProperty(f)&&(m[f]=y[f])};return function(m,y){c(m,y);function f(){this.constructor=m}m.prototype=y===null?Object.create(y):(f.prototype=y.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(19),u=function(c){o(m,c);function m(){return c!==null&&c.apply(this,arguments)||this}return m.formats=function(y){},m.prototype.format=function(y,f){c.prototype.formatAt.call(this,0,this.length(),y,f)},m.prototype.formatAt=function(y,f,l,a){y===0&&f===this.length()?this.format(l,a):c.prototype.formatAt.call(this,y,f,l,a)},m.prototype.formats=function(){return this.statics.formats(this.domNode)},m}(s.default);n.default=u},function(e,n,r){var o=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,f){y.__proto__=f}||function(y,f){for(var l in f)f.hasOwnProperty(l)&&(y[l]=f[l])};return function(y,f){m(y,f);function l(){this.constructor=y}y.prototype=f===null?Object.create(f):(l.prototype=f.prototype,new l)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(19),u=r(1),c=function(m){o(y,m);function y(f){var l=m.call(this,f)||this;return l.text=l.statics.value(l.domNode),l}return y.create=function(f){return document.createTextNode(f)},y.value=function(f){var l=f.data;return l.normalize&&(l=l.normalize()),l},y.prototype.deleteAt=function(f,l){this.domNode.data=this.text=this.text.slice(0,f)+this.text.slice(f+l)},y.prototype.index=function(f,l){return this.domNode===f?l:-1},y.prototype.insertAt=function(f,l,a){a==null?(this.text=this.text.slice(0,f)+l+this.text.slice(f),this.domNode.data=this.text):m.prototype.insertAt.call(this,f,l,a)},y.prototype.length=function(){return this.text.length},y.prototype.optimize=function(f){m.prototype.optimize.call(this,f),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof y&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},y.prototype.position=function(f,l){return[this.domNode,f]},y.prototype.split=function(f,l){if(l===void 0&&(l=!1),!l){if(f===0)return this;if(f===this.length())return this.next}var a=u.create(this.domNode.splitText(f));return this.parent.insertBefore(a,this.next),this.text=this.statics.value(this.domNode),a},y.prototype.update=function(f,l){var a=this;f.some(function(p){return p.type==="characterData"&&p.target===a.domNode})&&(this.text=this.statics.value(this.domNode))},y.prototype.value=function(){return this.text},y.blotName="text",y.scope=u.Scope.INLINE_BLOT,y}(s.default);n.default=c},function(e,n,r){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(u,c){return arguments.length>1&&!this.contains(u)==!c?c:s.call(this,u)}}String.prototype.startsWith||(String.prototype.startsWith=function(u,c){return c=c||0,this.substr(c,u.length)===u}),String.prototype.endsWith||(String.prototype.endsWith=function(u,c){var m=this.toString();(typeof c!="number"||!isFinite(c)||Math.floor(c)!==c||c>m.length)&&(c=m.length),c-=u.length;var y=m.indexOf(u,c);return y!==-1&&y===c}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof c!="function")throw new TypeError("predicate must be a function");for(var m=Object(this),y=m.length>>>0,f=arguments[1],l,a=0;a<y;a++)if(l=m[a],c.call(f,l,a,m))return l}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(e,n){var r=-1,o=1,s=0;function u(d,A,S){if(d==A)return d?[[s,d]]:[];(S<0||d.length<S)&&(S=null);var E=f(d,A),O=d.substring(0,E);d=d.substring(E),A=A.substring(E),E=l(d,A);var _=d.substring(d.length-E);d=d.substring(0,d.length-E),A=A.substring(0,A.length-E);var k=c(d,A);return O&&k.unshift([s,O]),_&&k.push([s,_]),p(k),S!=null&&(k=v(k,S)),k=h(k),k}function c(d,A){var S;if(!d)return[[o,A]];if(!A)return[[r,d]];var E=d.length>A.length?d:A,O=d.length>A.length?A:d,_=E.indexOf(O);if(_!=-1)return S=[[o,E.substring(0,_)],[s,O],[o,E.substring(_+O.length)]],d.length>A.length&&(S[0][0]=S[2][0]=r),S;if(O.length==1)return[[r,d],[o,A]];var k=a(d,A);if(k){var x=k[0],I=k[1],N=k[2],P=k[3],R=k[4],q=u(x,N),J=u(I,P);return q.concat([[s,R]],J)}return m(d,A)}function m(d,A){for(var S=d.length,E=A.length,O=Math.ceil((S+E)/2),_=O,k=2*O,x=new Array(k),I=new Array(k),N=0;N<k;N++)x[N]=-1,I[N]=-1;x[_+1]=0,I[_+1]=0;for(var P=S-E,R=P%2!=0,q=0,J=0,ee=0,z=0,F=0;F<O;F++){for(var C=-F+q;C<=F-J;C+=2){var M=_+C,B;C==-F||C!=F&&x[M-1]<x[M+1]?B=x[M+1]:B=x[M-1]+1;for(var H=B-C;B<S&&H<E&&d.charAt(B)==A.charAt(H);)B++,H++;if(x[M]=B,B>S)J+=2;else if(H>E)q+=2;else if(R){var V=_+P-C;if(V>=0&&V<k&&I[V]!=-1){var D=S-I[V];if(B>=D)return y(d,A,B,H)}}}for(var $=-F+ee;$<=F-z;$+=2){var V=_+$,D;$==-F||$!=F&&I[V-1]<I[V+1]?D=I[V+1]:D=I[V-1]+1;for(var W=D-$;D<S&&W<E&&d.charAt(S-D-1)==A.charAt(E-W-1);)D++,W++;if(I[V]=D,D>S)z+=2;else if(W>E)ee+=2;else if(!R){var M=_+P-$;if(M>=0&&M<k&&x[M]!=-1){var B=x[M],H=_+B-M;if(D=S-D,B>=D)return y(d,A,B,H)}}}}return[[r,d],[o,A]]}function y(d,A,S,E){var O=d.substring(0,S),_=A.substring(0,E),k=d.substring(S),x=A.substring(E),I=u(O,_),N=u(k,x);return I.concat(N)}function f(d,A){if(!d||!A||d.charAt(0)!=A.charAt(0))return 0;for(var S=0,E=Math.min(d.length,A.length),O=E,_=0;S<O;)d.substring(_,O)==A.substring(_,O)?(S=O,_=S):E=O,O=Math.floor((E-S)/2+S);return O}function l(d,A){if(!d||!A||d.charAt(d.length-1)!=A.charAt(A.length-1))return 0;for(var S=0,E=Math.min(d.length,A.length),O=E,_=0;S<O;)d.substring(d.length-O,d.length-_)==A.substring(A.length-O,A.length-_)?(S=O,_=S):E=O,O=Math.floor((E-S)/2+S);return O}function a(d,A){var S=d.length>A.length?d:A,E=d.length>A.length?A:d;if(S.length<4||E.length*2<S.length)return null;function O(J,ee,z){for(var F=J.substring(z,z+Math.floor(J.length/4)),C=-1,M="",B,H,V,D;(C=ee.indexOf(F,C+1))!=-1;){var $=f(J.substring(z),ee.substring(C)),W=l(J.substring(0,z),ee.substring(0,C));M.length<W+$&&(M=ee.substring(C-W,C)+ee.substring(C,C+$),B=J.substring(0,z-W),H=J.substring(z+$),V=ee.substring(0,C-W),D=ee.substring(C+$))}return M.length*2>=J.length?[B,H,V,D,M]:null}var _=O(S,E,Math.ceil(S.length/4)),k=O(S,E,Math.ceil(S.length/2)),x;if(!_&&!k)return null;k?_?x=_[4].length>k[4].length?_:k:x=k:x=_;var I,N,P,R;d.length>A.length?(I=x[0],N=x[1],P=x[2],R=x[3]):(P=x[0],R=x[1],I=x[2],N=x[3]);var q=x[4];return[I,N,P,R,q]}function p(d){d.push([s,""]);for(var A=0,S=0,E=0,O="",_="",k;A<d.length;)switch(d[A][0]){case o:E++,_+=d[A][1],A++;break;case r:S++,O+=d[A][1],A++;break;case s:S+E>1?(S!==0&&E!==0&&(k=f(_,O),k!==0&&(A-S-E>0&&d[A-S-E-1][0]==s?d[A-S-E-1][1]+=_.substring(0,k):(d.splice(0,0,[s,_.substring(0,k)]),A++),_=_.substring(k),O=O.substring(k)),k=l(_,O),k!==0&&(d[A][1]=_.substring(_.length-k)+d[A][1],_=_.substring(0,_.length-k),O=O.substring(0,O.length-k))),S===0?d.splice(A-E,S+E,[o,_]):E===0?d.splice(A-S,S+E,[r,O]):d.splice(A-S-E,S+E,[r,O],[o,_]),A=A-S-E+(S?1:0)+(E?1:0)+1):A!==0&&d[A-1][0]==s?(d[A-1][1]+=d[A][1],d.splice(A,1)):A++,E=0,S=0,O="",_="";break}d[d.length-1][1]===""&&d.pop();var x=!1;for(A=1;A<d.length-1;)d[A-1][0]==s&&d[A+1][0]==s&&(d[A][1].substring(d[A][1].length-d[A-1][1].length)==d[A-1][1]?(d[A][1]=d[A-1][1]+d[A][1].substring(0,d[A][1].length-d[A-1][1].length),d[A+1][1]=d[A-1][1]+d[A+1][1],d.splice(A-1,1),x=!0):d[A][1].substring(0,d[A+1][1].length)==d[A+1][1]&&(d[A-1][1]+=d[A+1][1],d[A][1]=d[A][1].substring(d[A+1][1].length)+d[A+1][1],d.splice(A+1,1),x=!0)),A++;x&&p(d)}var b=u;b.INSERT=o,b.DELETE=r,b.EQUAL=s,e.exports=b;function w(d,A){if(A===0)return[s,d];for(var S=0,E=0;E<d.length;E++){var O=d[E];if(O[0]===r||O[0]===s){var _=S+O[1].length;if(A===_)return[E+1,d];if(A<_){d=d.slice();var k=A-S,x=[O[0],O[1].slice(0,k)],I=[O[0],O[1].slice(k)];return d.splice(E,1,x,I),[E+1,d]}else S=_}}throw new Error("cursor_pos is out of bounds!")}function v(d,A){var S=w(d,A),E=S[1],O=S[0],_=E[O],k=E[O+1];if(_==null)return d;if(_[0]!==s)return d;if(k!=null&&_[1]+k[1]===k[1]+_[1])return E.splice(O,2,k,_),g(E,O,2);if(k!=null&&k[1].indexOf(_[1])===0){E.splice(O,2,[k[0],_[1]],[0,_[1]]);var x=k[1].slice(_[1].length);return x.length>0&&E.splice(O+2,0,[k[0],x]),g(E,O,3)}else return d}function h(d){for(var A=!1,S=function(k){return k.charCodeAt(0)>=56320&&k.charCodeAt(0)<=57343},E=function(k){return k.charCodeAt(k.length-1)>=55296&&k.charCodeAt(k.length-1)<=56319},O=2;O<d.length;O+=1)d[O-2][0]===s&&E(d[O-2][1])&&d[O-1][0]===r&&S(d[O-1][1])&&d[O][0]===o&&S(d[O][1])&&(A=!0,d[O-1][1]=d[O-2][1].slice(-1)+d[O-1][1],d[O][1]=d[O-2][1].slice(-1)+d[O][1],d[O-2][1]=d[O-2][1].slice(0,-1));if(!A)return d;for(var _=[],O=0;O<d.length;O+=1)d[O][1].length>0&&_.push(d[O]);return _}function g(d,A,S){for(var E=A+S-1;E>=0&&E>=A-1;E--)if(E+1<d.length){var O=d[E],_=d[E+1];O[0]===_[1]&&d.splice(E,2,[O[0],O[1]+_[1]])}return d}},function(e,n){n=e.exports=typeof Object.keys=="function"?Object.keys:r,n.shim=r;function r(o){var s=[];for(var u in o)s.push(u);return s}},function(e,n){var r=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=e.exports=r?o:s,n.supported=o;function o(u){return Object.prototype.toString.call(u)=="[object Arguments]"}n.unsupported=s;function s(u){return u&&typeof u=="object"&&typeof u.length=="number"&&Object.prototype.hasOwnProperty.call(u,"callee")&&!Object.prototype.propertyIsEnumerable.call(u,"callee")||!1}},function(e,n){var r=Object.prototype.hasOwnProperty,o="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1));function u(m,y,f){this.fn=m,this.context=y,this.once=f||!1}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var y=[],f,l;if(this._eventsCount===0)return y;for(l in f=this._events)r.call(f,l)&&y.push(o?l.slice(1):l);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(f)):y},c.prototype.listeners=function(y,f){var l=o?o+y:y,a=this._events[l];if(f)return!!a;if(!a)return[];if(a.fn)return[a.fn];for(var p=0,b=a.length,w=new Array(b);p<b;p++)w[p]=a[p].fn;return w},c.prototype.emit=function(y,f,l,a,p,b){var w=o?o+y:y;if(!this._events[w])return!1;var v=this._events[w],h=arguments.length,g,d;if(v.fn){switch(v.once&&this.removeListener(y,v.fn,void 0,!0),h){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,f),!0;case 3:return v.fn.call(v.context,f,l),!0;case 4:return v.fn.call(v.context,f,l,a),!0;case 5:return v.fn.call(v.context,f,l,a,p),!0;case 6:return v.fn.call(v.context,f,l,a,p,b),!0}for(d=1,g=new Array(h-1);d<h;d++)g[d-1]=arguments[d];v.fn.apply(v.context,g)}else{var A=v.length,S;for(d=0;d<A;d++)switch(v[d].once&&this.removeListener(y,v[d].fn,void 0,!0),h){case 1:v[d].fn.call(v[d].context);break;case 2:v[d].fn.call(v[d].context,f);break;case 3:v[d].fn.call(v[d].context,f,l);break;case 4:v[d].fn.call(v[d].context,f,l,a);break;default:if(!g)for(S=1,g=new Array(h-1);S<h;S++)g[S-1]=arguments[S];v[d].fn.apply(v[d].context,g)}}return!0},c.prototype.on=function(y,f,l){var a=new u(f,l||this),p=o?o+y:y;return this._events[p]?this._events[p].fn?this._events[p]=[this._events[p],a]:this._events[p].push(a):(this._events[p]=a,this._eventsCount++),this},c.prototype.once=function(y,f,l){var a=new u(f,l||this,!0),p=o?o+y:y;return this._events[p]?this._events[p].fn?this._events[p]=[this._events[p],a]:this._events[p].push(a):(this._events[p]=a,this._eventsCount++),this},c.prototype.removeListener=function(y,f,l,a){var p=o?o+y:y;if(!this._events[p])return this;if(!f)return--this._eventsCount===0?this._events=new s:delete this._events[p],this;var b=this._events[p];if(b.fn)b.fn===f&&(!a||b.once)&&(!l||b.context===l)&&(--this._eventsCount===0?this._events=new s:delete this._events[p]);else{for(var w=0,v=[],h=b.length;w<h;w++)(b[w].fn!==f||a&&!b[w].once||l&&b[w].context!==l)&&v.push(b[w]);v.length?this._events[p]=v.length===1?v[0]:v:--this._eventsCount===0?this._events=new s:delete this._events[p]}return this},c.prototype.removeAllListeners=function(y){var f;return y?(f=o?o+y:y,this._events[f]&&(--this._eventsCount===0?this._events=new s:delete this._events[f])):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=o,c.EventEmitter=c,typeof e<"u"&&(e.exports=c)},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},s=function(){function j(G,se){var ue=[],re=!0,ge=!1,ve=void 0;try{for(var Oe=G[Symbol.iterator](),Fe;!(re=(Fe=Oe.next()).done)&&(ue.push(Fe.value),!(se&&ue.length===se));re=!0);}catch(Ue){ge=!0,ve=Ue}finally{try{!re&&Oe.return&&Oe.return()}finally{if(ge)throw ve}}return ue}return function(G,se){if(Array.isArray(G))return G;if(Symbol.iterator in Object(G))return j(G,se);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function j(G,se){for(var ue=0;ue<se.length;ue++){var re=se[ue];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(G,re.key,re)}}return function(G,se,ue){return se&&j(G.prototype,se),ue&&j(G,ue),G}}(),c=r(3),m=I(c),y=r(2),f=I(y),l=r(0),a=I(l),p=r(5),b=I(p),w=r(10),v=I(w),h=r(9),g=I(h),d=r(36),A=r(37),S=r(13),E=I(S),O=r(26),_=r(38),k=r(39),x=r(40);function I(j){return j&&j.__esModule?j:{default:j}}function N(j,G,se){return G in j?Object.defineProperty(j,G,{value:se,enumerable:!0,configurable:!0,writable:!0}):j[G]=se,j}function P(j,G){if(!(j instanceof G))throw new TypeError("Cannot call a class as a function")}function R(j,G){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G&&(typeof G=="object"||typeof G=="function")?G:j}function q(j,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof G);j.prototype=Object.create(G&&G.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(j,G):j.__proto__=G)}var J=(0,v.default)("quill:clipboard"),ee="__ql-matcher",z=[[Node.TEXT_NODE,Y],[Node.TEXT_NODE,be],["br",fe],[Node.ELEMENT_NODE,be],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,U],[Node.ELEMENT_NODE,X],[Node.ELEMENT_NODE,Q],["li",ye],["b",W.bind(W,"bold")],["i",W.bind(W,"italic")],["style",we]],F=[d.AlignAttribute,_.DirectionAttribute].reduce(function(j,G){return j[G.keyName]=G,j},{}),C=[d.AlignStyle,A.BackgroundStyle,O.ColorStyle,_.DirectionStyle,k.FontStyle,x.SizeStyle].reduce(function(j,G){return j[G.keyName]=G,j},{}),M=function(j){q(G,j);function G(se,ue){P(this,G);var re=R(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,se,ue));return re.quill.root.addEventListener("paste",re.onPaste.bind(re)),re.container=re.quill.addContainer("ql-clipboard"),re.container.setAttribute("contenteditable",!0),re.container.setAttribute("tabindex",-1),re.matchers=[],z.concat(re.options.matchers).forEach(function(ge){var ve=s(ge,2),Oe=ve[0],Fe=ve[1];!ue.matchVisual&&Fe===U||re.addMatcher(Oe,Fe)}),re}return u(G,[{key:"addMatcher",value:function(ue,re){this.matchers.push([ue,re])}},{key:"convert",value:function(ue){if(typeof ue=="string")return this.container.innerHTML=ue.replace(/\>\r?\n +\</g,"><"),this.convert();var re=this.quill.getFormat(this.quill.selection.savedRange.index);if(re[E.default.blotName]){var ge=this.container.innerText;return this.container.innerHTML="",new f.default().insert(ge,N({},E.default.blotName,re[E.default.blotName]))}var ve=this.prepareMatching(),Oe=s(ve,2),Fe=Oe[0],Ue=Oe[1],_e=$(this.container,Fe,Ue);return V(_e,`
`)&&_e.ops[_e.ops.length-1].attributes==null&&(_e=_e.compose(new f.default().retain(_e.length()-1).delete(1))),J.log("convert",this.container.innerHTML,_e),this.container.innerHTML="",_e}},{key:"dangerouslyPasteHTML",value:function(ue,re){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof ue=="string")this.quill.setContents(this.convert(ue),re),this.quill.setSelection(0,b.default.sources.SILENT);else{var ve=this.convert(re);this.quill.updateContents(new f.default().retain(ue).concat(ve),ge),this.quill.setSelection(ue+ve.length(),b.default.sources.SILENT)}}},{key:"onPaste",value:function(ue){var re=this;if(!(ue.defaultPrevented||!this.quill.isEnabled())){var ge=this.quill.getSelection(),ve=new f.default().retain(ge.index),Oe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(b.default.sources.SILENT),setTimeout(function(){ve=ve.concat(re.convert()).delete(ge.length),re.quill.updateContents(ve,b.default.sources.USER),re.quill.setSelection(ve.length()-ge.length,b.default.sources.SILENT),re.quill.scrollingContainer.scrollTop=Oe,re.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ue=this,re=[],ge=[];return this.matchers.forEach(function(ve){var Oe=s(ve,2),Fe=Oe[0],Ue=Oe[1];switch(Fe){case Node.TEXT_NODE:ge.push(Ue);break;case Node.ELEMENT_NODE:re.push(Ue);break;default:[].forEach.call(ue.container.querySelectorAll(Fe),function(_e){_e[ee]=_e[ee]||[],_e[ee].push(Ue)});break}}),[re,ge]}}]),G}(g.default);M.DEFAULTS={matchers:[],matchVisual:!0};function B(j,G,se){return(typeof G>"u"?"undefined":o(G))==="object"?Object.keys(G).reduce(function(ue,re){return B(ue,re,G[re])},j):j.reduce(function(ue,re){return re.attributes&&re.attributes[G]?ue.push(re):ue.insert(re.insert,(0,m.default)({},N({},G,se),re.attributes))},new f.default)}function H(j){if(j.nodeType!==Node.ELEMENT_NODE)return{};var G="__ql-computed-style";return j[G]||(j[G]=window.getComputedStyle(j))}function V(j,G){for(var se="",ue=j.ops.length-1;ue>=0&&se.length<G.length;--ue){var re=j.ops[ue];if(typeof re.insert!="string")break;se=re.insert+se}return se.slice(-1*G.length)===G}function D(j){if(j.childNodes.length===0)return!1;var G=H(j);return["block","list-item"].indexOf(G.display)>-1}function $(j,G,se){return j.nodeType===j.TEXT_NODE?se.reduce(function(ue,re){return re(j,ue)},new f.default):j.nodeType===j.ELEMENT_NODE?[].reduce.call(j.childNodes||[],function(ue,re){var ge=$(re,G,se);return re.nodeType===j.ELEMENT_NODE&&(ge=G.reduce(function(ve,Oe){return Oe(re,ve)},ge),ge=(re[ee]||[]).reduce(function(ve,Oe){return Oe(re,ve)},ge)),ue.concat(ge)},new f.default):new f.default}function W(j,G,se){return B(se,j,!0)}function X(j,G){var se=a.default.Attributor.Attribute.keys(j),ue=a.default.Attributor.Class.keys(j),re=a.default.Attributor.Style.keys(j),ge={};return se.concat(ue).concat(re).forEach(function(ve){var Oe=a.default.query(ve,a.default.Scope.ATTRIBUTE);Oe!=null&&(ge[Oe.attrName]=Oe.value(j),ge[Oe.attrName])||(Oe=F[ve],Oe!=null&&(Oe.attrName===ve||Oe.keyName===ve)&&(ge[Oe.attrName]=Oe.value(j)||void 0),Oe=C[ve],Oe!=null&&(Oe.attrName===ve||Oe.keyName===ve)&&(Oe=C[ve],ge[Oe.attrName]=Oe.value(j)||void 0))}),Object.keys(ge).length>0&&(G=B(G,ge)),G}function ie(j,G){var se=a.default.query(j);if(se==null)return G;if(se.prototype instanceof a.default.Embed){var ue={},re=se.value(j);re!=null&&(ue[se.blotName]=re,G=new f.default().insert(ue,se.formats(j)))}else typeof se.formats=="function"&&(G=B(G,se.blotName,se.formats(j)));return G}function fe(j,G){return V(G,`
`)||G.insert(`
`),G}function we(){return new f.default}function ye(j,G){var se=a.default.query(j);if(se==null||se.blotName!=="list-item"||!V(G,`
`))return G;for(var ue=-1,re=j.parentNode;!re.classList.contains("ql-clipboard");)(a.default.query(re)||{}).blotName==="list"&&(ue+=1),re=re.parentNode;return ue<=0?G:G.compose(new f.default().retain(G.length()-1).retain(1,{indent:ue}))}function be(j,G){return V(G,`
`)||(D(j)||G.length()>0&&j.nextSibling&&D(j.nextSibling))&&G.insert(`
`),G}function U(j,G){if(D(j)&&j.nextElementSibling!=null&&!V(G,`

`)){var se=j.offsetHeight+parseFloat(H(j).marginTop)+parseFloat(H(j).marginBottom);j.nextElementSibling.offsetTop>j.offsetTop+se*1.5&&G.insert(`
`)}return G}function Q(j,G){var se={},ue=j.style||{};return ue.fontStyle&&H(j).fontStyle==="italic"&&(se.italic=!0),ue.fontWeight&&(H(j).fontWeight.startsWith("bold")||parseInt(H(j).fontWeight)>=700)&&(se.bold=!0),Object.keys(se).length>0&&(G=B(G,se)),parseFloat(ue.textIndent||0)>0&&(G=new f.default().insert("	").concat(G)),G}function Y(j,G){var se=j.data;if(j.parentNode.tagName==="O:P")return G.insert(se.trim());if(se.trim().length===0&&j.parentNode.classList.contains("ql-clipboard"))return G;if(!H(j.parentNode).whiteSpace.startsWith("pre")){var ue=function(ge,ve){return ve=ve.replace(/[^\u00a0]/g,""),ve.length<1&&ge?" ":ve};se=se.replace(/\r\n/g," ").replace(/\n/g," "),se=se.replace(/\s\s+/g,ue.bind(ue,!0)),(j.previousSibling==null&&D(j.parentNode)||j.previousSibling!=null&&D(j.previousSibling))&&(se=se.replace(/^\s+/,ue.bind(ue,!1))),(j.nextSibling==null&&D(j.parentNode)||j.nextSibling!=null&&D(j.nextSibling))&&(se=se.replace(/\s+$/,ue.bind(ue,!1)))}return G.insert(se)}n.default=M,n.matchAttributor=X,n.matchBlot=ie,n.matchNewline=be,n.matchSpacing=U,n.matchText=Y},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function p(b,w){for(var v=0;v<w.length;v++){var h=w[v];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(b,h.key,h)}}return function(b,w,v){return w&&p(b.prototype,w),v&&p(b,v),b}}(),s=function p(b,w,v){b===null&&(b=Function.prototype);var h=Object.getOwnPropertyDescriptor(b,w);if(h===void 0){var g=Object.getPrototypeOf(b);return g===null?void 0:p(g,w,v)}else{if("value"in h)return h.value;var d=h.get;return d===void 0?void 0:d.call(v)}},u=r(6),c=m(u);function m(p){return p&&p.__esModule?p:{default:p}}function y(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function f(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function l(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var a=function(p){l(b,p);function b(){return y(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,[{key:"optimize",value:function(v){s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,v),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return s(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),b}(c.default);a.blotName="bold",a.tagName=["STRONG","B"],n.default=a},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var o=function(){function x(I,N){var P=[],R=!0,q=!1,J=void 0;try{for(var ee=I[Symbol.iterator](),z;!(R=(z=ee.next()).done)&&(P.push(z.value),!(N&&P.length===N));R=!0);}catch(F){q=!0,J=F}finally{try{!R&&ee.return&&ee.return()}finally{if(q)throw J}}return P}return function(I,N){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return x(I,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function x(I,N){for(var P=0;P<N.length;P++){var R=N[P];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(I,R.key,R)}}return function(I,N,P){return N&&x(I.prototype,N),P&&x(I,P),I}}(),u=r(2),c=v(u),m=r(0),y=v(m),f=r(5),l=v(f),a=r(10),p=v(a),b=r(9),w=v(b);function v(x){return x&&x.__esModule?x:{default:x}}function h(x,I,N){return I in x?Object.defineProperty(x,I,{value:N,enumerable:!0,configurable:!0,writable:!0}):x[I]=N,x}function g(x,I){if(!(x instanceof I))throw new TypeError("Cannot call a class as a function")}function d(x,I){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:x}function A(x,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);x.prototype=Object.create(I&&I.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(x,I):x.__proto__=I)}var S=(0,p.default)("quill:toolbar"),E=function(x){A(I,x);function I(N,P){g(this,I);var R=d(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,N,P));if(Array.isArray(R.options.container)){var q=document.createElement("div");_(q,R.options.container),N.container.parentNode.insertBefore(q,N.container),R.container=q}else typeof R.options.container=="string"?R.container=document.querySelector(R.options.container):R.container=R.options.container;if(!(R.container instanceof HTMLElement)){var J;return J=S.error("Container required for toolbar",R.options),d(R,J)}return R.container.classList.add("ql-toolbar"),R.controls=[],R.handlers={},Object.keys(R.options.handlers).forEach(function(ee){R.addHandler(ee,R.options.handlers[ee])}),[].forEach.call(R.container.querySelectorAll("button, select"),function(ee){R.attach(ee)}),R.quill.on(l.default.events.EDITOR_CHANGE,function(ee,z){ee===l.default.events.SELECTION_CHANGE&&R.update(z)}),R.quill.on(l.default.events.SCROLL_OPTIMIZE,function(){var ee=R.quill.selection.getRange(),z=o(ee,1),F=z[0];R.update(F)}),R}return s(I,[{key:"addHandler",value:function(P,R){this.handlers[P]=R}},{key:"attach",value:function(P){var R=this,q=[].find.call(P.classList,function(ee){return ee.indexOf("ql-")===0});if(q){if(q=q.slice(3),P.tagName==="BUTTON"&&P.setAttribute("type","button"),this.handlers[q]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[q]==null){S.warn("ignoring attaching to disabled format",q,P);return}if(y.default.query(q)==null){S.warn("ignoring attaching to nonexistent format",q,P);return}}var J=P.tagName==="SELECT"?"change":"click";P.addEventListener(J,function(ee){var z=void 0;if(P.tagName==="SELECT"){if(P.selectedIndex<0)return;var F=P.options[P.selectedIndex];F.hasAttribute("selected")?z=!1:z=F.value||!1}else P.classList.contains("ql-active")?z=!1:z=P.value||!P.hasAttribute("value"),ee.preventDefault();R.quill.focus();var C=R.quill.selection.getRange(),M=o(C,1),B=M[0];if(R.handlers[q]!=null)R.handlers[q].call(R,z);else if(y.default.query(q).prototype instanceof y.default.Embed){if(z=prompt("Enter "+q),!z)return;R.quill.updateContents(new c.default().retain(B.index).delete(B.length).insert(h({},q,z)),l.default.sources.USER)}else R.quill.format(q,z,l.default.sources.USER);R.update(B)}),this.controls.push([q,P])}}},{key:"update",value:function(P){var R=P==null?{}:this.quill.getFormat(P);this.controls.forEach(function(q){var J=o(q,2),ee=J[0],z=J[1];if(z.tagName==="SELECT"){var F=void 0;if(P==null)F=null;else if(R[ee]==null)F=z.querySelector("option[selected]");else if(!Array.isArray(R[ee])){var C=R[ee];typeof C=="string"&&(C=C.replace(/\"/g,'\\"')),F=z.querySelector('option[value="'+C+'"]')}F==null?(z.value="",z.selectedIndex=-1):F.selected=!0}else if(P==null)z.classList.remove("ql-active");else if(z.hasAttribute("value")){var M=R[ee]===z.getAttribute("value")||R[ee]!=null&&R[ee].toString()===z.getAttribute("value")||R[ee]==null&&!z.getAttribute("value");z.classList.toggle("ql-active",M)}else z.classList.toggle("ql-active",R[ee]!=null)})}}]),I}(w.default);E.DEFAULTS={};function O(x,I,N){var P=document.createElement("button");P.setAttribute("type","button"),P.classList.add("ql-"+I),N!=null&&(P.value=N),x.appendChild(P)}function _(x,I){Array.isArray(I[0])||(I=[I]),I.forEach(function(N){var P=document.createElement("span");P.classList.add("ql-formats"),N.forEach(function(R){if(typeof R=="string")O(P,R);else{var q=Object.keys(R)[0],J=R[q];Array.isArray(J)?k(P,q,J):O(P,q,J)}}),x.appendChild(P)})}function k(x,I,N){var P=document.createElement("select");P.classList.add("ql-"+I),N.forEach(function(R){var q=document.createElement("option");R!==!1?q.setAttribute("value",R):q.setAttribute("selected","selected"),P.appendChild(q)}),x.appendChild(P)}E.DEFAULTS={container:null,handlers:{clean:function(){var I=this,N=this.quill.getSelection();if(N!=null)if(N.length==0){var P=this.quill.getFormat();Object.keys(P).forEach(function(R){y.default.query(R,y.default.Scope.INLINE)!=null&&I.quill.format(R,!1)})}else this.quill.removeFormat(N,l.default.sources.USER)},direction:function(I){var N=this.quill.getFormat().align;I==="rtl"&&N==null?this.quill.format("align","right",l.default.sources.USER):!I&&N==="right"&&this.quill.format("align",!1,l.default.sources.USER),this.quill.format("direction",I,l.default.sources.USER)},indent:function(I){var N=this.quill.getSelection(),P=this.quill.getFormat(N),R=parseInt(P.indent||0);if(I==="+1"||I==="-1"){var q=I==="+1"?1:-1;P.direction==="rtl"&&(q*=-1),this.quill.format("indent",R+q,l.default.sources.USER)}},link:function(I){I===!0&&(I=prompt("Enter link URL:")),this.quill.format("link",I,l.default.sources.USER)},list:function(I){var N=this.quill.getSelection(),P=this.quill.getFormat(N);I==="check"?P.list==="checked"||P.list==="unchecked"?this.quill.format("list",!1,l.default.sources.USER):this.quill.format("list","unchecked",l.default.sources.USER):this.quill.format("list",I,l.default.sources.USER)}}},n.default=E,n.addControls=_},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function p(b,w){for(var v=0;v<w.length;v++){var h=w[v];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(b,h.key,h)}}return function(b,w,v){return w&&p(b.prototype,w),v&&p(b,v),b}}(),s=function p(b,w,v){b===null&&(b=Function.prototype);var h=Object.getOwnPropertyDescriptor(b,w);if(h===void 0){var g=Object.getPrototypeOf(b);return g===null?void 0:p(g,w,v)}else{if("value"in h)return h.value;var d=h.get;return d===void 0?void 0:d.call(v)}},u=r(28),c=m(u);function m(p){return p&&p.__esModule?p:{default:p}}function y(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function f(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function l(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var a=function(p){l(b,p);function b(w,v){y(this,b);var h=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,w));return h.label.innerHTML=v,h.container.classList.add("ql-color-picker"),[].slice.call(h.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(g){g.classList.add("ql-primary")}),h}return o(b,[{key:"buildItem",value:function(v){var h=s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"buildItem",this).call(this,v);return h.style.backgroundColor=v.getAttribute("value")||"",h}},{key:"selectItem",value:function(v,h){s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,v,h);var g=this.label.querySelector(".ql-color-label"),d=v&&v.getAttribute("data-value")||"";g&&(g.tagName==="line"?g.style.stroke=d:g.style.fill=d)}}]),b}(c.default);n.default=a},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function p(b,w){for(var v=0;v<w.length;v++){var h=w[v];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(b,h.key,h)}}return function(b,w,v){return w&&p(b.prototype,w),v&&p(b,v),b}}(),s=function p(b,w,v){b===null&&(b=Function.prototype);var h=Object.getOwnPropertyDescriptor(b,w);if(h===void 0){var g=Object.getPrototypeOf(b);return g===null?void 0:p(g,w,v)}else{if("value"in h)return h.value;var d=h.get;return d===void 0?void 0:d.call(v)}},u=r(28),c=m(u);function m(p){return p&&p.__esModule?p:{default:p}}function y(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function f(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function l(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var a=function(p){l(b,p);function b(w,v){y(this,b);var h=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,w));return h.container.classList.add("ql-icon-picker"),[].forEach.call(h.container.querySelectorAll(".ql-picker-item"),function(g){g.innerHTML=v[g.getAttribute("data-value")||""]}),h.defaultItem=h.container.querySelector(".ql-selected"),h.selectItem(h.defaultItem),h}return o(b,[{key:"selectItem",value:function(v,h){s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,v,h),v=v||this.defaultItem,this.label.innerHTML=v.innerHTML}}]),b}(c.default);n.default=a},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function c(m,y){for(var f=0;f<y.length;f++){var l=y[f];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(m,l.key,l)}}return function(m,y,f){return y&&c(m.prototype,y),f&&c(m,f),m}}();function s(c,m){if(!(c instanceof m))throw new TypeError("Cannot call a class as a function")}var u=function(){function c(m,y){var f=this;s(this,c),this.quill=m,this.boundsContainer=y||document.body,this.root=m.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){f.root.style.marginTop=-1*f.quill.root.scrollTop+"px"}),this.hide()}return o(c,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(y){var f=y.left+y.width/2-this.root.offsetWidth/2,l=y.bottom+this.quill.root.scrollTop;this.root.style.left=f+"px",this.root.style.top=l+"px",this.root.classList.remove("ql-flip");var a=this.boundsContainer.getBoundingClientRect(),p=this.root.getBoundingClientRect(),b=0;if(p.right>a.right&&(b=a.right-p.right,this.root.style.left=f+b+"px"),p.left<a.left&&(b=a.left-p.left,this.root.style.left=f+b+"px"),p.bottom>a.bottom){var w=p.bottom-p.top,v=y.bottom-y.top+w;this.root.style.top=l-v+"px",this.root.classList.add("ql-flip")}return b}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),c}();n.default=u},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function k(x,I){var N=[],P=!0,R=!1,q=void 0;try{for(var J=x[Symbol.iterator](),ee;!(P=(ee=J.next()).done)&&(N.push(ee.value),!(I&&N.length===I));P=!0);}catch(z){R=!0,q=z}finally{try{!P&&J.return&&J.return()}finally{if(R)throw q}}return N}return function(x,I){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return k(x,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function k(x,I,N){x===null&&(x=Function.prototype);var P=Object.getOwnPropertyDescriptor(x,I);if(P===void 0){var R=Object.getPrototypeOf(x);return R===null?void 0:k(R,I,N)}else{if("value"in P)return P.value;var q=P.get;return q===void 0?void 0:q.call(N)}},u=function(){function k(x,I){for(var N=0;N<I.length;N++){var P=I[N];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}return function(x,I,N){return I&&k(x.prototype,I),N&&k(x,N),x}}(),c=r(3),m=g(c),y=r(8),f=g(y),l=r(43),a=g(l),p=r(27),b=g(p),w=r(15),v=r(41),h=g(v);function g(k){return k&&k.__esModule?k:{default:k}}function d(k,x){if(!(k instanceof x))throw new TypeError("Cannot call a class as a function")}function A(k,x){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:k}function S(k,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);k.prototype=Object.create(x&&x.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(k,x):k.__proto__=x)}var E=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],O=function(k){S(x,k);function x(I,N){d(this,x),N.modules.toolbar!=null&&N.modules.toolbar.container==null&&(N.modules.toolbar.container=E);var P=A(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,I,N));return P.quill.container.classList.add("ql-snow"),P}return u(x,[{key:"extendToolbar",value:function(N){N.container.classList.add("ql-snow"),this.buildButtons([].slice.call(N.container.querySelectorAll("button")),h.default),this.buildPickers([].slice.call(N.container.querySelectorAll("select")),h.default),this.tooltip=new _(this.quill,this.options.bounds),N.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(P,R){N.handlers.link.call(N,!R.format.link)})}}]),x}(a.default);O.DEFAULTS=(0,m.default)(!0,{},a.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(x){if(x){var I=this.quill.getSelection();if(I==null||I.length==0)return;var N=this.quill.getText(I);/^\S+@\S+\.\S+$/.test(N)&&N.indexOf("mailto:")!==0&&(N="mailto:"+N);var P=this.quill.theme.tooltip;P.edit("link",N)}else this.quill.format("link",!1)}}}}});var _=function(k){S(x,k);function x(I,N){d(this,x);var P=A(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,I,N));return P.preview=P.root.querySelector("a.ql-preview"),P}return u(x,[{key:"listen",value:function(){var N=this;s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(P){N.root.classList.contains("ql-editing")?N.save():N.edit("link",N.preview.textContent),P.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(P){if(N.linkRange!=null){var R=N.linkRange;N.restoreFocus(),N.quill.formatText(R,"link",!1,f.default.sources.USER),delete N.linkRange}P.preventDefault(),N.hide()}),this.quill.on(f.default.events.SELECTION_CHANGE,function(P,R,q){if(P!=null){if(P.length===0&&q===f.default.sources.USER){var J=N.quill.scroll.descendant(b.default,P.index),ee=o(J,2),z=ee[0],F=ee[1];if(z!=null){N.linkRange=new w.Range(P.index-F,z.length());var C=b.default.formats(z.domNode);N.preview.textContent=C,N.preview.setAttribute("href",C),N.show(),N.position(N.quill.getBounds(N.linkRange));return}}else delete N.linkRange;N.hide()}})}},{key:"show",value:function(){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),x}(l.BaseTooltip);_.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=O},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(29),s=re(o),u=r(36),c=r(38),m=r(64),y=r(65),f=re(y),l=r(66),a=re(l),p=r(67),b=re(p),w=r(37),v=r(26),h=r(39),g=r(40),d=r(56),A=re(d),S=r(68),E=re(S),O=r(27),_=re(O),k=r(69),x=re(k),I=r(70),N=re(I),P=r(71),R=re(P),q=r(72),J=re(q),ee=r(73),z=re(ee),F=r(13),C=re(F),M=r(74),B=re(M),H=r(75),V=re(H),D=r(57),$=re(D),W=r(41),X=re(W),ie=r(28),fe=re(ie),we=r(59),ye=re(we),be=r(60),U=re(be),Q=r(61),Y=re(Q),j=r(108),G=re(j),se=r(62),ue=re(se);function re(ge){return ge&&ge.__esModule?ge:{default:ge}}s.default.register({"attributors/attribute/direction":c.DirectionAttribute,"attributors/class/align":u.AlignClass,"attributors/class/background":w.BackgroundClass,"attributors/class/color":v.ColorClass,"attributors/class/direction":c.DirectionClass,"attributors/class/font":h.FontClass,"attributors/class/size":g.SizeClass,"attributors/style/align":u.AlignStyle,"attributors/style/background":w.BackgroundStyle,"attributors/style/color":v.ColorStyle,"attributors/style/direction":c.DirectionStyle,"attributors/style/font":h.FontStyle,"attributors/style/size":g.SizeStyle},!0),s.default.register({"formats/align":u.AlignClass,"formats/direction":c.DirectionClass,"formats/indent":m.IndentClass,"formats/background":w.BackgroundStyle,"formats/color":v.ColorStyle,"formats/font":h.FontClass,"formats/size":g.SizeClass,"formats/blockquote":f.default,"formats/code-block":C.default,"formats/header":a.default,"formats/list":b.default,"formats/bold":A.default,"formats/code":F.Code,"formats/italic":E.default,"formats/link":_.default,"formats/script":x.default,"formats/strike":N.default,"formats/underline":R.default,"formats/image":J.default,"formats/video":z.default,"formats/list/item":p.ListItem,"modules/formula":B.default,"modules/syntax":V.default,"modules/toolbar":$.default,"themes/bubble":G.default,"themes/snow":ue.default,"ui/icons":X.default,"ui/picker":fe.default,"ui/icon-picker":U.default,"ui/color-picker":ye.default,"ui/tooltip":Y.default},!0),n.default=s.default},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var o=function(){function b(w,v){for(var h=0;h<v.length;h++){var g=v[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(w,g.key,g)}}return function(w,v,h){return v&&b(w.prototype,v),h&&b(w,h),w}}(),s=function b(w,v,h){w===null&&(w=Function.prototype);var g=Object.getOwnPropertyDescriptor(w,v);if(g===void 0){var d=Object.getPrototypeOf(w);return d===null?void 0:b(d,v,h)}else{if("value"in g)return g.value;var A=g.get;return A===void 0?void 0:A.call(h)}},u=r(0),c=m(u);function m(b){return b&&b.__esModule?b:{default:b}}function y(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function f(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function l(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var a=function(b){l(w,b);function w(){return y(this,w),f(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return o(w,[{key:"add",value:function(h,g){if(g==="+1"||g==="-1"){var d=this.value(h)||0;g=g==="+1"?d+1:d-1}return g===0?(this.remove(h),!0):s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"add",this).call(this,h,g)}},{key:"canAdd",value:function(h,g){return s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,h,g)||s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,h,parseInt(g))}},{key:"value",value:function(h){return parseInt(s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,h))||void 0}}]),w}(c.default.Attributor.Class),p=new a("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=p},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(4),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}function c(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function m(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function y(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var f=function(l){y(a,l);function a(){return c(this,a),m(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(s.default);f.blotName="blockquote",f.tagName="blockquote",n.default=f},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function a(p,b){for(var w=0;w<b.length;w++){var v=b[w];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,b,w){return b&&a(p.prototype,b),w&&a(p,w),p}}(),s=r(4),u=c(s);function c(a){return a&&a.__esModule?a:{default:a}}function m(a,p){if(!(a instanceof p))throw new TypeError("Cannot call a class as a function")}function y(a,p){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:a}function f(a,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);a.prototype=Object.create(p&&p.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(a,p):a.__proto__=p)}var l=function(a){f(p,a);function p(){return m(this,p),y(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return o(p,null,[{key:"formats",value:function(w){return this.tagName.indexOf(w.tagName)+1}}]),p}(u.default);l.blotName="header",l.tagName=["H1","H2","H3","H4","H5","H6"],n.default=l},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var o=function(){function d(A,S){for(var E=0;E<S.length;E++){var O=S[E];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(A,O.key,O)}}return function(A,S,E){return S&&d(A.prototype,S),E&&d(A,E),A}}(),s=function d(A,S,E){A===null&&(A=Function.prototype);var O=Object.getOwnPropertyDescriptor(A,S);if(O===void 0){var _=Object.getPrototypeOf(A);return _===null?void 0:d(_,S,E)}else{if("value"in O)return O.value;var k=O.get;return k===void 0?void 0:k.call(E)}},u=r(0),c=a(u),m=r(4),y=a(m),f=r(25),l=a(f);function a(d){return d&&d.__esModule?d:{default:d}}function p(d,A,S){return A in d?Object.defineProperty(d,A,{value:S,enumerable:!0,configurable:!0,writable:!0}):d[A]=S,d}function b(d,A){if(!(d instanceof A))throw new TypeError("Cannot call a class as a function")}function w(d,A){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:d}function v(d,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);d.prototype=Object.create(A&&A.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(d,A):d.__proto__=A)}var h=function(d){v(A,d);function A(){return b(this,A),w(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return o(A,[{key:"format",value:function(E,O){E===g.blotName&&!O?this.replaceWith(c.default.create(this.statics.scope)):s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,E,O)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(E,O){return this.parent.isolate(this.offset(this.parent),this.length()),E===this.parent.statics.blotName?(this.parent.replaceWith(E,O),this):(this.parent.unwrap(),s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replaceWith",this).call(this,E,O))}}],[{key:"formats",value:function(E){return E.tagName===this.tagName?void 0:s(A.__proto__||Object.getPrototypeOf(A),"formats",this).call(this,E)}}]),A}(y.default);h.blotName="list-item",h.tagName="LI";var g=function(d){v(A,d),o(A,null,[{key:"create",value:function(E){var O=E==="ordered"?"OL":"UL",_=s(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,O);return(E==="checked"||E==="unchecked")&&_.setAttribute("data-checked",E==="checked"),_}},{key:"formats",value:function(E){if(E.tagName==="OL")return"ordered";if(E.tagName==="UL")return E.hasAttribute("data-checked")?E.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function A(S){b(this,A);var E=w(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,S)),O=function(k){if(k.target.parentNode===S){var x=E.statics.formats(S),I=c.default.find(k.target);x==="checked"?I.format("list","unchecked"):x==="unchecked"&&I.format("list","checked")}};return S.addEventListener("touchstart",O),S.addEventListener("mousedown",O),E}return o(A,[{key:"format",value:function(E,O){this.children.length>0&&this.children.tail.format(E,O)}},{key:"formats",value:function(){return p({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(E,O){if(E instanceof h)s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,E,O);else{var _=O==null?this.length():O.offset(this),k=this.split(_);k.parent.insertBefore(E,k)}}},{key:"optimize",value:function(E){s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,E);var O=this.next;O!=null&&O.prev===this&&O.statics.blotName===this.statics.blotName&&O.domNode.tagName===this.domNode.tagName&&O.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(O.moveChildren(this),O.remove())}},{key:"replace",value:function(E){if(E.statics.blotName!==this.statics.blotName){var O=c.default.create(this.statics.defaultChild);E.moveChildren(O),this.appendChild(O)}s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replace",this).call(this,E)}}]),A}(l.default);g.blotName="list",g.scope=c.default.Scope.BLOCK_BLOT,g.tagName=["OL","UL"],g.defaultChild="list-item",g.allowedChildren=[h],n.ListItem=h,n.default=g},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(56),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}function c(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function m(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function y(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var f=function(l){y(a,l);function a(){return c(this,a),m(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(s.default);f.blotName="italic",f.tagName=["EM","I"],n.default=f},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function p(b,w){for(var v=0;v<w.length;v++){var h=w[v];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(b,h.key,h)}}return function(b,w,v){return w&&p(b.prototype,w),v&&p(b,v),b}}(),s=function p(b,w,v){b===null&&(b=Function.prototype);var h=Object.getOwnPropertyDescriptor(b,w);if(h===void 0){var g=Object.getPrototypeOf(b);return g===null?void 0:p(g,w,v)}else{if("value"in h)return h.value;var d=h.get;return d===void 0?void 0:d.call(v)}},u=r(6),c=m(u);function m(p){return p&&p.__esModule?p:{default:p}}function y(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function f(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function l(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var a=function(p){l(b,p);function b(){return y(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,null,[{key:"create",value:function(v){return v==="super"?document.createElement("sup"):v==="sub"?document.createElement("sub"):s(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,v)}},{key:"formats",value:function(v){if(v.tagName==="SUB")return"sub";if(v.tagName==="SUP")return"super"}}]),b}(c.default);a.blotName="script",a.tagName=["SUB","SUP"],n.default=a},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(6),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}function c(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function m(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function y(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var f=function(l){y(a,l);function a(){return c(this,a),m(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(s.default);f.blotName="strike",f.tagName="S",n.default=f},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(6),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}function c(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function m(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function y(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var f=function(l){y(a,l);function a(){return c(this,a),m(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(s.default);f.blotName="underline",f.tagName="U",n.default=f},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function w(v,h){for(var g=0;g<h.length;g++){var d=h[g];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(v,d.key,d)}}return function(v,h,g){return h&&w(v.prototype,h),g&&w(v,g),v}}(),s=function w(v,h,g){v===null&&(v=Function.prototype);var d=Object.getOwnPropertyDescriptor(v,h);if(d===void 0){var A=Object.getPrototypeOf(v);return A===null?void 0:w(A,h,g)}else{if("value"in d)return d.value;var S=d.get;return S===void 0?void 0:S.call(g)}},u=r(0),c=y(u),m=r(27);function y(w){return w&&w.__esModule?w:{default:w}}function f(w,v){if(!(w instanceof v))throw new TypeError("Cannot call a class as a function")}function l(w,v){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:w}function a(w,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(w,v):w.__proto__=v)}var p=["alt","height","width"],b=function(w){a(v,w);function v(){return f(this,v),l(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"format",value:function(g,d){p.indexOf(g)>-1?d?this.domNode.setAttribute(g,d):this.domNode.removeAttribute(g):s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,g,d)}}],[{key:"create",value:function(g){var d=s(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,g);return typeof g=="string"&&d.setAttribute("src",this.sanitize(g)),d}},{key:"formats",value:function(g){return p.reduce(function(d,A){return g.hasAttribute(A)&&(d[A]=g.getAttribute(A)),d},{})}},{key:"match",value:function(g){return/\.(jpe?g|gif|png)$/.test(g)||/^data:image\/.+;base64/.test(g)}},{key:"sanitize",value:function(g){return(0,m.sanitize)(g,["http","https","data"])?g:"//:0"}},{key:"value",value:function(g){return g.getAttribute("src")}}]),v}(c.default.Embed);b.blotName="image",b.tagName="IMG",n.default=b},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function w(v,h){for(var g=0;g<h.length;g++){var d=h[g];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(v,d.key,d)}}return function(v,h,g){return h&&w(v.prototype,h),g&&w(v,g),v}}(),s=function w(v,h,g){v===null&&(v=Function.prototype);var d=Object.getOwnPropertyDescriptor(v,h);if(d===void 0){var A=Object.getPrototypeOf(v);return A===null?void 0:w(A,h,g)}else{if("value"in d)return d.value;var S=d.get;return S===void 0?void 0:S.call(g)}},u=r(4),c=r(27),m=y(c);function y(w){return w&&w.__esModule?w:{default:w}}function f(w,v){if(!(w instanceof v))throw new TypeError("Cannot call a class as a function")}function l(w,v){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:w}function a(w,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(w,v):w.__proto__=v)}var p=["height","width"],b=function(w){a(v,w);function v(){return f(this,v),l(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"format",value:function(g,d){p.indexOf(g)>-1?d?this.domNode.setAttribute(g,d):this.domNode.removeAttribute(g):s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,g,d)}}],[{key:"create",value:function(g){var d=s(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,g);return d.setAttribute("frameborder","0"),d.setAttribute("allowfullscreen",!0),d.setAttribute("src",this.sanitize(g)),d}},{key:"formats",value:function(g){return p.reduce(function(d,A){return g.hasAttribute(A)&&(d[A]=g.getAttribute(A)),d},{})}},{key:"sanitize",value:function(g){return m.default.sanitize(g)}},{key:"value",value:function(g){return g.getAttribute("src")}}]),v}(u.BlockEmbed);b.blotName="video",b.className="ql-video",b.tagName="IFRAME",n.default=b},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var o=function(){function g(d,A){for(var S=0;S<A.length;S++){var E=A[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(d,E.key,E)}}return function(d,A,S){return A&&g(d.prototype,A),S&&g(d,S),d}}(),s=function g(d,A,S){d===null&&(d=Function.prototype);var E=Object.getOwnPropertyDescriptor(d,A);if(E===void 0){var O=Object.getPrototypeOf(d);return O===null?void 0:g(O,A,S)}else{if("value"in E)return E.value;var _=E.get;return _===void 0?void 0:_.call(S)}},u=r(35),c=a(u),m=r(5),y=a(m),f=r(9),l=a(f);function a(g){return g&&g.__esModule?g:{default:g}}function p(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function b(g,d){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:g}function w(g,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);g.prototype=Object.create(d&&d.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(g,d):g.__proto__=d)}var v=function(g){w(d,g);function d(){return p(this,d),b(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return o(d,null,[{key:"create",value:function(S){var E=s(d.__proto__||Object.getPrototypeOf(d),"create",this).call(this,S);return typeof S=="string"&&(window.katex.render(S,E,{throwOnError:!1,errorColor:"#f00"}),E.setAttribute("data-value",S)),E}},{key:"value",value:function(S){return S.getAttribute("data-value")}}]),d}(c.default);v.blotName="formula",v.className="ql-formula",v.tagName="SPAN";var h=function(g){w(d,g),o(d,null,[{key:"register",value:function(){y.default.register(v,!0)}}]);function d(){p(this,d);var A=b(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return A}return d}(l.default);n.FormulaBlot=v,n.default=h},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var o=function(){function S(E,O){for(var _=0;_<O.length;_++){var k=O[_];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(E,k.key,k)}}return function(E,O,_){return O&&S(E.prototype,O),_&&S(E,_),E}}(),s=function S(E,O,_){E===null&&(E=Function.prototype);var k=Object.getOwnPropertyDescriptor(E,O);if(k===void 0){var x=Object.getPrototypeOf(E);return x===null?void 0:S(x,O,_)}else{if("value"in k)return k.value;var I=k.get;return I===void 0?void 0:I.call(_)}},u=r(0),c=b(u),m=r(5),y=b(m),f=r(9),l=b(f),a=r(13),p=b(a);function b(S){return S&&S.__esModule?S:{default:S}}function w(S,E){if(!(S instanceof E))throw new TypeError("Cannot call a class as a function")}function v(S,E){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:S}function h(S,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(S,E):S.__proto__=E)}var g=function(S){h(E,S);function E(){return w(this,E),v(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return o(E,[{key:"replaceWith",value:function(_){this.domNode.textContent=this.domNode.textContent,this.attach(),s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replaceWith",this).call(this,_)}},{key:"highlight",value:function(_){var k=this.domNode.textContent;this.cachedText!==k&&((k.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=_(k),this.domNode.normalize(),this.attach()),this.cachedText=k)}}]),E}(p.default);g.className="ql-syntax";var d=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),A=function(S){h(E,S),o(E,null,[{key:"register",value:function(){y.default.register(d,!0),y.default.register(g,!0)}}]);function E(O,_){w(this,E);var k=v(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,O,_));if(typeof k.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var x=null;return k.quill.on(y.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(x),x=setTimeout(function(){k.highlight(),x=null},k.options.interval)}),k.highlight(),k}return o(E,[{key:"highlight",value:function(){var _=this;if(!this.quill.selection.composing){this.quill.update(y.default.sources.USER);var k=this.quill.getSelection();this.quill.scroll.descendants(g).forEach(function(x){x.highlight(_.options.highlight)}),this.quill.update(y.default.sources.SILENT),k!=null&&this.quill.setSelection(k,y.default.sources.SILENT)}}}]),E}(l.default);A.DEFAULTS={highlight:function(){return window.hljs==null?null:function(S){var E=window.hljs.highlightAuto(S);return E.value}}(),interval:1e3},n.CodeBlock=g,n.CodeToken=d,n.default=A},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,n){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,n){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,n){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,n){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var o=function E(O,_,k){O===null&&(O=Function.prototype);var x=Object.getOwnPropertyDescriptor(O,_);if(x===void 0){var I=Object.getPrototypeOf(O);return I===null?void 0:E(I,_,k)}else{if("value"in x)return x.value;var N=x.get;return N===void 0?void 0:N.call(k)}},s=function(){function E(O,_){for(var k=0;k<_.length;k++){var x=_[k];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(O,x.key,x)}}return function(O,_,k){return _&&E(O.prototype,_),k&&E(O,k),O}}(),u=r(3),c=w(u),m=r(8),y=w(m),f=r(43),l=w(f),a=r(15),p=r(41),b=w(p);function w(E){return E&&E.__esModule?E:{default:E}}function v(E,O){if(!(E instanceof O))throw new TypeError("Cannot call a class as a function")}function h(E,O){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:E}function g(E,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);E.prototype=Object.create(O&&O.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(E,O):E.__proto__=O)}var d=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],A=function(E){g(O,E);function O(_,k){v(this,O),k.modules.toolbar!=null&&k.modules.toolbar.container==null&&(k.modules.toolbar.container=d);var x=h(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,_,k));return x.quill.container.classList.add("ql-bubble"),x}return s(O,[{key:"extendToolbar",value:function(k){this.tooltip=new S(this.quill,this.options.bounds),this.tooltip.root.appendChild(k.container),this.buildButtons([].slice.call(k.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(k.container.querySelectorAll("select")),b.default)}}]),O}(l.default);A.DEFAULTS=(0,c.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(O){O?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var S=function(E){g(O,E);function O(_,k){v(this,O);var x=h(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,_,k));return x.quill.on(y.default.events.EDITOR_CHANGE,function(I,N,P,R){if(I===y.default.events.SELECTION_CHANGE)if(N!=null&&N.length>0&&R===y.default.sources.USER){x.show(),x.root.style.left="0px",x.root.style.width="",x.root.style.width=x.root.offsetWidth+"px";var q=x.quill.getLines(N.index,N.length);if(q.length===1)x.position(x.quill.getBounds(N));else{var J=q[q.length-1],ee=x.quill.getIndex(J),z=Math.min(J.length()-1,N.index+N.length-ee),F=x.quill.getBounds(new a.Range(ee,z));x.position(F)}}else document.activeElement!==x.textbox&&x.quill.hasFocus()&&x.hide()}),x}return s(O,[{key:"listen",value:function(){var k=this;o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){k.root.classList.remove("ql-editing")}),this.quill.on(y.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!k.root.classList.contains("ql-hidden")){var x=k.quill.getSelection();x!=null&&k.position(k.quill.getBounds(x))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(k){var x=o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"position",this).call(this,k),I=this.root.querySelector(".ql-tooltip-arrow");if(I.style.marginLeft="",x===0)return x;I.style.marginLeft=-1*x-I.offsetWidth/2+"px"}}]),O}(f.BaseTooltip);S.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=S,n.default=A},function(e,n,r){e.exports=r(63)}]).default})})(zu);var Xh=zu.exports;const _l=$u(Xh);var Vu={exports:{}};/*! For license information please see quill-cursors.js.LICENSE.txt */(function(i,t){(function(e,n){i.exports=n()})(self,()=>(()=>{var e={582:(s,u,c)=>{c.d(u,{Z:()=>a});var m=c(81),y=c.n(m),f=c(645),l=c.n(f)()(y());l.push([s.id,".ql-container{position:relative;overflow:hidden}@media(pointer: coarse){.ql-cursor-caret-container{z-index:-1}}.ql-cursor.hidden{display:none}.ql-cursor .ql-cursor-caret-container,.ql-cursor .ql-cursor-flag{position:absolute}.ql-cursor .ql-cursor-flag{z-index:1;transform:translate3d(-1px, -100%, 0);opacity:0;visibility:hidden;color:#fff;padding-bottom:2px;border-radius:0 3px 3px 0}.ql-cursor .ql-cursor-flag.flag-flipped{border-radius:3px 0 0 3px;transform:translate3d(calc(-100% + 1px ), -100%, 0)}@media screen{.ql-cursor .ql-cursor-flag{transition:opacity 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms,visibility 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms}}.ql-cursor .ql-cursor-flag .ql-cursor-name{margin-left:5px;margin-right:5px;display:inline-block;margin-top:-2px;white-space:nowrap}.ql-cursor .ql-cursor-flag.no-delay[style]{transition-delay:unset !important}.ql-cursor .ql-cursor-caret-container{cursor:text;margin-left:-9px;padding:0 9px}.ql-cursor .ql-cursor-caret-container.hover+.ql-cursor-flag{opacity:1;visibility:visible;transition:none}.ql-cursor .ql-cursor-caret-container.no-pointer{pointer-events:none}.ql-cursor .ql-cursor-caret-container .ql-cursor-caret{position:absolute;top:0;bottom:0;width:2px;margin-left:-1px;background-color:attr(data-color)}.ql-cursor .ql-cursor-selection-block{position:absolute;pointer-events:none}",""]);const a=l},645:s=>{s.exports=function(u){var c=[];return c.toString=function(){return this.map(function(m){var y="",f=m[5]!==void 0;return m[4]&&(y+="@supports (".concat(m[4],") {")),m[2]&&(y+="@media ".concat(m[2]," {")),f&&(y+="@layer".concat(m[5].length>0?" ".concat(m[5]):""," {")),y+=u(m),f&&(y+="}"),m[2]&&(y+="}"),m[4]&&(y+="}"),y}).join("")},c.i=function(m,y,f,l,a){typeof m=="string"&&(m=[[null,m,void 0]]);var p={};if(f)for(var b=0;b<this.length;b++){var w=this[b][0];w!=null&&(p[w]=!0)}for(var v=0;v<m.length;v++){var h=[].concat(m[v]);f&&p[h[0]]||(a!==void 0&&(h[5]===void 0||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=a),y&&(h[2]&&(h[1]="@media ".concat(h[2]," {").concat(h[1],"}")),h[2]=y),l&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=l):h[4]="".concat(l)),c.push(h))}},c}},81:s=>{s.exports=function(u){return u[1]}},465:(s,u,c)=>{s=c.nmd(s);var m="__lodash_hash_undefined__",y=9007199254740991,f="[object Arguments]",l="[object Boolean]",a="[object Date]",p="[object Function]",b="[object GeneratorFunction]",w="[object Map]",v="[object Number]",h="[object Object]",g="[object Promise]",d="[object RegExp]",A="[object Set]",S="[object String]",E="[object Symbol]",O="[object WeakMap]",_="[object ArrayBuffer]",k="[object DataView]",x="[object Float32Array]",I="[object Float64Array]",N="[object Int8Array]",P="[object Int16Array]",R="[object Int32Array]",q="[object Uint8Array]",J="[object Uint8ClampedArray]",ee="[object Uint16Array]",z="[object Uint32Array]",F=/\w*$/,C=/^\[object .+?Constructor\]$/,M=/^(?:0|[1-9]\d*)$/,B={};B[f]=B["[object Array]"]=B[_]=B[k]=B[l]=B[a]=B[x]=B[I]=B[N]=B[P]=B[R]=B[w]=B[v]=B[h]=B[d]=B[A]=B[S]=B[E]=B[q]=B[J]=B[ee]=B[z]=!0,B["[object Error]"]=B[p]=B[O]=!1;var H=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g,V=typeof self=="object"&&self&&self.Object===Object&&self,D=H||V||Function("return this")(),$=u&&!u.nodeType&&u,W=$&&s&&!s.nodeType&&s,X=W&&W.exports===$;function ie(K,oe){return K.set(oe[0],oe[1]),K}function fe(K,oe){return K.add(oe),K}function we(K,oe,pe,Ae){var Me=-1,We=K?K.length:0;for(Ae;++Me<We;)pe=oe(pe,K[Me],Me,K);return pe}function ye(K){var oe=!1;if(K!=null&&typeof K.toString!="function")try{oe=!!(K+"")}catch{}return oe}function be(K){var oe=-1,pe=Array(K.size);return K.forEach(function(Ae,Me){pe[++oe]=[Me,Ae]}),pe}function U(K,oe){return function(pe){return K(oe(pe))}}function Q(K){var oe=-1,pe=Array(K.size);return K.forEach(function(Ae){pe[++oe]=Ae}),pe}var Y,j=Array.prototype,G=Function.prototype,se=Object.prototype,ue=D["__core-js_shared__"],re=(Y=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"",ge=G.toString,ve=se.hasOwnProperty,Oe=se.toString,Fe=RegExp("^"+ge.call(ve).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=X?D.Buffer:void 0,_e=D.Symbol,Ce=D.Uint8Array,ce=U(Object.getPrototypeOf,Object),De=Object.create,At=se.propertyIsEnumerable,dn=j.splice,vt=Object.getOwnPropertySymbols,Zt=Ue?Ue.isBuffer:void 0,Dt=U(Object.keys,Object),Ot=mn(D,"DataView"),Tt=mn(D,"Map"),Xt=mn(D,"Promise"),ot=mn(D,"Set"),It=mn(D,"WeakMap"),Nt=mn(Object,"create"),Ci=vn(Ot),gn=vn(Tt),Li=vn(Xt),yi=vn(ot),Po=vn(It),to=_e?_e.prototype:void 0,no=to?to.valueOf:void 0;function pn(K){var oe=-1,pe=K?K.length:0;for(this.clear();++oe<pe;){var Ae=K[oe];this.set(Ae[0],Ae[1])}}function St(K){var oe=-1,pe=K?K.length:0;for(this.clear();++oe<pe;){var Ae=K[oe];this.set(Ae[0],Ae[1])}}function _t(K){var oe=-1,pe=K?K.length:0;for(this.clear();++oe<pe;){var Ae=K[oe];this.set(Ae[0],Ae[1])}}function ei(K){this.__data__=new St(K)}function Qt(K,oe,pe){var Ae=K[oe];ve.call(K,oe)&&Ro(Ae,pe)&&(pe!==void 0||oe in K)||(K[oe]=pe)}function Ri(K,oe){for(var pe=K.length;pe--;)if(Ro(K[pe][0],oe))return pe;return-1}function en(K,oe,pe,Ae,Me,We,Qe){var je;if(Ae&&(je=We?Ae(K,Me,We,Qe):Ae(K)),je!==void 0)return je;if(!ze(K))return K;var st=Z(K);if(st){if(je=function(Pe){var He=Pe.length,at=Pe.constructor(He);return He&&typeof Pe[0]=="string"&&ve.call(Pe,"index")&&(at.index=Pe.index,at.input=Pe.input),at}(K),!oe)return function(Pe,He){var at=-1,qe=Pe.length;for(He||(He=Array(qe));++at<qe;)He[at]=Pe[at];return He}(K,je)}else{var et=yn(K),bn=et==p||et==b;if(de(K))return function(Pe,He){if(He)return Pe.slice();var at=new Pe.constructor(Pe.length);return Pe.copy(at),at}(K,oe);if(et==h||et==f||bn&&!We){if(ye(K))return We?K:{};if(je=function(Pe){return typeof Pe.constructor!="function"||ti(Pe)?{}:ze(He=ce(Pe))?De(He):{};var He}(bn?{}:K),!oe)return function(Pe,He){return Co(Pe,ro(Pe),He)}(K,function(Pe,He){return Pe&&Co(He,Be(He),Pe)}(je,K))}else{if(!B[et])return We?K:{};je=function(Pe,He,at,qe){var $e,tn=Pe.constructor;switch(He){case _:return Di(Pe);case l:case a:return new tn(+Pe);case k:return function(Je,dt){var nt=dt?Di(Je.buffer):Je.buffer;return new Je.constructor(nt,Je.byteOffset,Je.byteLength)}(Pe,qe);case x:case I:case N:case P:case R:case q:case J:case ee:case z:return function(Je,dt){var nt=dt?Di(Je.buffer):Je.buffer;return new Je.constructor(nt,Je.byteOffset,Je.length)}(Pe,qe);case w:return function(Je,dt,nt){return we(dt?nt(be(Je),!0):be(Je),ie,new Je.constructor)}(Pe,qe,at);case v:case S:return new tn(Pe);case d:return function(Je){var dt=new Je.constructor(Je.source,F.exec(Je));return dt.lastIndex=Je.lastIndex,dt}(Pe);case A:return function(Je,dt,nt){return we(dt?nt(Q(Je),!0):Q(Je),fe,new Je.constructor)}(Pe,qe,at);case E:return $e=Pe,no?Object(no.call($e)):{}}}(K,et,en,oe)}}Qe||(Qe=new ei);var $n=Qe.get(K);if($n)return $n;if(Qe.set(K,je),!st)var ni=pe?function(Pe){return function(He,at,qe){var $e=at(He);return Z(He)?$e:function(tn,Je){for(var dt=-1,nt=Je.length,nn=tn.length;++dt<nt;)tn[nn+dt]=Je[dt];return tn}($e,qe(He))}(Pe,Be,ro)}(K):Be(K);return function(Pe,He){for(var at=-1,qe=Pe?Pe.length:0;++at<qe&&He(Pe[at],at)!==!1;);}(ni||K,function(Pe,He){ni&&(Pe=K[He=Pe]),Qt(je,He,en(Pe,oe,pe,Ae,He,K,Qe))}),je}function Di(K){var oe=new K.constructor(K.byteLength);return new Ce(oe).set(new Ce(K)),oe}function Co(K,oe,pe,Ae){pe||(pe={});for(var Me=-1,We=oe.length;++Me<We;){var Qe=oe[Me],je=void 0;Qt(pe,Qe,je===void 0?K[Qe]:je)}return pe}function Jn(K,oe){var pe,Ae,Me=K.__data__;return((Ae=typeof(pe=oe))=="string"||Ae=="number"||Ae=="symbol"||Ae=="boolean"?pe!=="__proto__":pe===null)?Me[typeof oe=="string"?"string":"hash"]:Me.map}function mn(K,oe){var pe=function(Ae,Me){return Ae==null?void 0:Ae[Me]}(K,oe);return function(Ae){return!(!ze(Ae)||(Me=Ae,re&&re in Me))&&(Ee(Ae)||ye(Ae)?Fe:C).test(vn(Ae));var Me}(pe)?pe:void 0}pn.prototype.clear=function(){this.__data__=Nt?Nt(null):{}},pn.prototype.delete=function(K){return this.has(K)&&delete this.__data__[K]},pn.prototype.get=function(K){var oe=this.__data__;if(Nt){var pe=oe[K];return pe===m?void 0:pe}return ve.call(oe,K)?oe[K]:void 0},pn.prototype.has=function(K){var oe=this.__data__;return Nt?oe[K]!==void 0:ve.call(oe,K)},pn.prototype.set=function(K,oe){return this.__data__[K]=Nt&&oe===void 0?m:oe,this},St.prototype.clear=function(){this.__data__=[]},St.prototype.delete=function(K){var oe=this.__data__,pe=Ri(oe,K);return!(pe<0||(pe==oe.length-1?oe.pop():dn.call(oe,pe,1),0))},St.prototype.get=function(K){var oe=this.__data__,pe=Ri(oe,K);return pe<0?void 0:oe[pe][1]},St.prototype.has=function(K){return Ri(this.__data__,K)>-1},St.prototype.set=function(K,oe){var pe=this.__data__,Ae=Ri(pe,K);return Ae<0?pe.push([K,oe]):pe[Ae][1]=oe,this},_t.prototype.clear=function(){this.__data__={hash:new pn,map:new(Tt||St),string:new pn}},_t.prototype.delete=function(K){return Jn(this,K).delete(K)},_t.prototype.get=function(K){return Jn(this,K).get(K)},_t.prototype.has=function(K){return Jn(this,K).has(K)},_t.prototype.set=function(K,oe){return Jn(this,K).set(K,oe),this},ei.prototype.clear=function(){this.__data__=new St},ei.prototype.delete=function(K){return this.__data__.delete(K)},ei.prototype.get=function(K){return this.__data__.get(K)},ei.prototype.has=function(K){return this.__data__.has(K)},ei.prototype.set=function(K,oe){var pe=this.__data__;if(pe instanceof St){var Ae=pe.__data__;if(!Tt||Ae.length<199)return Ae.push([K,oe]),this;pe=this.__data__=new _t(Ae)}return pe.set(K,oe),this};var ro=vt?U(vt,Object):function(){return[]},yn=function(K){return Oe.call(K)};function Lo(K,oe){return!!(oe=oe??y)&&(typeof K=="number"||M.test(K))&&K>-1&&K%1==0&&K<oe}function ti(K){var oe=K&&K.constructor;return K===(typeof oe=="function"&&oe.prototype||se)}function vn(K){if(K!=null){try{return ge.call(K)}catch{}try{return K+""}catch{}}return""}function Ro(K,oe){return K===oe||K!=K&&oe!=oe}(Ot&&yn(new Ot(new ArrayBuffer(1)))!=k||Tt&&yn(new Tt)!=w||Xt&&yn(Xt.resolve())!=g||ot&&yn(new ot)!=A||It&&yn(new It)!=O)&&(yn=function(K){var oe=Oe.call(K),pe=oe==h?K.constructor:void 0,Ae=pe?vn(pe):void 0;if(Ae)switch(Ae){case Ci:return k;case gn:return w;case Li:return g;case yi:return A;case Po:return O}return oe});var Z=Array.isArray;function ae(K){return K!=null&&function(oe){return typeof oe=="number"&&oe>-1&&oe%1==0&&oe<=y}(K.length)&&!Ee(K)}var de=Zt||function(){return!1};function Ee(K){var oe=ze(K)?Oe.call(K):"";return oe==p||oe==b}function ze(K){var oe=typeof K;return!!K&&(oe=="object"||oe=="function")}function Be(K){return ae(K)?function(oe,pe){var Ae=Z(oe)||function(je){return function(st){return function(et){return!!et&&typeof et=="object"}(st)&&ae(st)}(je)&&ve.call(je,"callee")&&(!At.call(je,"callee")||Oe.call(je)==f)}(oe)?function(je,st){for(var et=-1,bn=Array(je);++et<je;)bn[et]=st(et);return bn}(oe.length,String):[],Me=Ae.length,We=!!Me;for(var Qe in oe)!ve.call(oe,Qe)||We&&(Qe=="length"||Lo(Qe,Me))||Ae.push(Qe);return Ae}(K):function(oe){if(!ti(oe))return Dt(oe);var pe=[];for(var Ae in Object(oe))ve.call(oe,Ae)&&Ae!="constructor"&&pe.push(Ae);return pe}(K)}s.exports=function(K){return en(K,!0,!0)}},307:(s,u,c)=>{s=c.nmd(s);var m="__lodash_hash_undefined__",y=9007199254740991,f="[object Arguments]",l="[object Array]",a="[object Boolean]",p="[object Date]",b="[object Error]",w="[object Function]",v="[object Map]",h="[object Number]",g="[object Object]",d="[object Promise]",A="[object RegExp]",S="[object Set]",E="[object String]",O="[object WeakMap]",_="[object ArrayBuffer]",k="[object DataView]",x=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,N={};N["[object Float32Array]"]=N["[object Float64Array]"]=N["[object Int8Array]"]=N["[object Int16Array]"]=N["[object Int32Array]"]=N["[object Uint8Array]"]=N["[object Uint8ClampedArray]"]=N["[object Uint16Array]"]=N["[object Uint32Array]"]=!0,N[f]=N[l]=N[_]=N[a]=N[k]=N[p]=N[b]=N[w]=N[v]=N[h]=N[g]=N[A]=N[S]=N[E]=N[O]=!1;var P=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g,R=typeof self=="object"&&self&&self.Object===Object&&self,q=P||R||Function("return this")(),J=u&&!u.nodeType&&u,ee=J&&s&&!s.nodeType&&s,z=ee&&ee.exports===J,F=z&&P.process,C=function(){try{return F&&F.binding&&F.binding("util")}catch{}}(),M=C&&C.isTypedArray;function B(Z,ae){for(var de=-1,Ee=Z==null?0:Z.length;++de<Ee;)if(ae(Z[de],de,Z))return!0;return!1}function H(Z){var ae=-1,de=Array(Z.size);return Z.forEach(function(Ee,ze){de[++ae]=[ze,Ee]}),de}function V(Z){var ae=-1,de=Array(Z.size);return Z.forEach(function(Ee){de[++ae]=Ee}),de}var D,$,W,X=Array.prototype,ie=Function.prototype,fe=Object.prototype,we=q["__core-js_shared__"],ye=ie.toString,be=fe.hasOwnProperty,U=(D=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||""))?"Symbol(src)_1."+D:"",Q=fe.toString,Y=RegExp("^"+ye.call(be).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j=z?q.Buffer:void 0,G=q.Symbol,se=q.Uint8Array,ue=fe.propertyIsEnumerable,re=X.splice,ge=G?G.toStringTag:void 0,ve=Object.getOwnPropertySymbols,Oe=j?j.isBuffer:void 0,Fe=($=Object.keys,W=Object,function(Z){return $(W(Z))}),Ue=_t(q,"DataView"),_e=_t(q,"Map"),Ce=_t(q,"Promise"),ce=_t(q,"Set"),De=_t(q,"WeakMap"),At=_t(Object,"create"),dn=en(Ue),vt=en(_e),Zt=en(Ce),Dt=en(ce),Ot=en(De),Tt=G?G.prototype:void 0,Xt=Tt?Tt.valueOf:void 0;function ot(Z){var ae=-1,de=Z==null?0:Z.length;for(this.clear();++ae<de;){var Ee=Z[ae];this.set(Ee[0],Ee[1])}}function It(Z){var ae=-1,de=Z==null?0:Z.length;for(this.clear();++ae<de;){var Ee=Z[ae];this.set(Ee[0],Ee[1])}}function Nt(Z){var ae=-1,de=Z==null?0:Z.length;for(this.clear();++ae<de;){var Ee=Z[ae];this.set(Ee[0],Ee[1])}}function Ci(Z){var ae=-1,de=Z==null?0:Z.length;for(this.__data__=new Nt;++ae<de;)this.add(Z[ae])}function gn(Z){var ae=this.__data__=new It(Z);this.size=ae.size}function Li(Z,ae){for(var de=Z.length;de--;)if(Di(Z[de][0],ae))return de;return-1}function yi(Z){return Z==null?Z===void 0?"[object Undefined]":"[object Null]":ge&&ge in Object(Z)?function(ae){var de=be.call(ae,ge),Ee=ae[ge];try{ae[ge]=void 0;var ze=!0}catch{}var Be=Q.call(ae);return ze&&(de?ae[ge]=Ee:delete ae[ge]),Be}(Z):function(ae){return Q.call(ae)}(Z)}function Po(Z){return ti(Z)&&yi(Z)==f}function to(Z,ae,de,Ee,ze){return Z===ae||(Z==null||ae==null||!ti(Z)&&!ti(ae)?Z!=Z&&ae!=ae:function(Be,K,oe,pe,Ae,Me){var We=Jn(Be),Qe=Jn(K),je=We?l:Qt(Be),st=Qe?l:Qt(K),et=(je=je==f?g:je)==g,bn=(st=st==f?g:st)==g,$n=je==st;if($n&&mn(Be)){if(!mn(K))return!1;We=!0,et=!1}if($n&&!et)return Me||(Me=new gn),We||vn(Be)?no(Be,K,oe,pe,Ae,Me):function(qe,$e,tn,Je,dt,nt,nn){switch(tn){case k:if(qe.byteLength!=$e.byteLength||qe.byteOffset!=$e.byteOffset)return!1;qe=qe.buffer,$e=$e.buffer;case _:return!(qe.byteLength!=$e.byteLength||!nt(new se(qe),new se($e)));case a:case p:case h:return Di(+qe,+$e);case b:return qe.name==$e.name&&qe.message==$e.message;case A:case E:return qe==$e+"";case v:var ri=H;case S:var io=1&Je;if(ri||(ri=V),qe.size!=$e.size&&!io)return!1;var vi=nn.get(qe);if(vi)return vi==$e;Je|=2,nn.set(qe,$e);var zn=no(ri(qe),ri($e),Je,dt,nt,nn);return nn.delete(qe),zn;case"[object Symbol]":if(Xt)return Xt.call(qe)==Xt.call($e)}return!1}(Be,K,je,oe,pe,Ae,Me);if(!(1&oe)){var ni=et&&be.call(Be,"__wrapped__"),Pe=bn&&be.call(K,"__wrapped__");if(ni||Pe){var He=ni?Be.value():Be,at=Pe?K.value():K;return Me||(Me=new gn),Ae(He,at,oe,pe,Me)}}return!!$n&&(Me||(Me=new gn),function(qe,$e,tn,Je,dt,nt){var nn=1&tn,ri=pn(qe),io=ri.length;if(io!=pn($e).length&&!nn)return!1;for(var vi=io;vi--;){var zn=ri[vi];if(!(nn?zn in $e:be.call($e,zn)))return!1}var Fa=nt.get(qe);if(Fa&&nt.get($e))return Fa==$e;var Do=!0;nt.set(qe,$e),nt.set($e,qe);for(var Rs=nn;++vi<io;){var Bo=qe[zn=ri[vi]],Mo=$e[zn];if(Je)var ja=nn?Je(Mo,Bo,zn,$e,qe,nt):Je(Bo,Mo,zn,qe,$e,nt);if(!(ja===void 0?Bo===Mo||dt(Bo,Mo,tn,Je,nt):ja)){Do=!1;break}Rs||(Rs=zn=="constructor")}if(Do&&!Rs){var qo=qe.constructor,Fo=$e.constructor;qo==Fo||!("constructor"in qe)||!("constructor"in $e)||typeof qo=="function"&&qo instanceof qo&&typeof Fo=="function"&&Fo instanceof Fo||(Do=!1)}return nt.delete(qe),nt.delete($e),Do}(Be,K,oe,pe,Ae,Me))}(Z,ae,de,Ee,to,ze))}function no(Z,ae,de,Ee,ze,Be){var K=1&de,oe=Z.length,pe=ae.length;if(oe!=pe&&!(K&&pe>oe))return!1;var Ae=Be.get(Z);if(Ae&&Be.get(ae))return Ae==ae;var Me=-1,We=!0,Qe=2&de?new Ci:void 0;for(Be.set(Z,ae),Be.set(ae,Z);++Me<oe;){var je=Z[Me],st=ae[Me];if(Ee)var et=K?Ee(st,je,Me,ae,Z,Be):Ee(je,st,Me,Z,ae,Be);if(et!==void 0){if(et)continue;We=!1;break}if(Qe){if(!B(ae,function(bn,$n){if(ni=$n,!Qe.has(ni)&&(je===bn||ze(je,bn,de,Ee,Be)))return Qe.push($n);var ni})){We=!1;break}}else if(je!==st&&!ze(je,st,de,Ee,Be)){We=!1;break}}return Be.delete(Z),Be.delete(ae),We}function pn(Z){return function(ae,de,Ee){var ze=de(ae);return Jn(ae)?ze:function(Be,K){for(var oe=-1,pe=K.length,Ae=Be.length;++oe<pe;)Be[Ae+oe]=K[oe];return Be}(ze,Ee(ae))}(Z,Ro,ei)}function St(Z,ae){var de,Ee,ze=Z.__data__;return((Ee=typeof(de=ae))=="string"||Ee=="number"||Ee=="symbol"||Ee=="boolean"?de!=="__proto__":de===null)?ze[typeof ae=="string"?"string":"hash"]:ze.map}function _t(Z,ae){var de=function(Ee,ze){return Ee==null?void 0:Ee[ze]}(Z,ae);return function(Ee){return!(!Lo(Ee)||function(ze){return!!U&&U in ze}(Ee))&&(ro(Ee)?Y:x).test(en(Ee))}(de)?de:void 0}ot.prototype.clear=function(){this.__data__=At?At(null):{},this.size=0},ot.prototype.delete=function(Z){var ae=this.has(Z)&&delete this.__data__[Z];return this.size-=ae?1:0,ae},ot.prototype.get=function(Z){var ae=this.__data__;if(At){var de=ae[Z];return de===m?void 0:de}return be.call(ae,Z)?ae[Z]:void 0},ot.prototype.has=function(Z){var ae=this.__data__;return At?ae[Z]!==void 0:be.call(ae,Z)},ot.prototype.set=function(Z,ae){var de=this.__data__;return this.size+=this.has(Z)?0:1,de[Z]=At&&ae===void 0?m:ae,this},It.prototype.clear=function(){this.__data__=[],this.size=0},It.prototype.delete=function(Z){var ae=this.__data__,de=Li(ae,Z);return!(de<0||(de==ae.length-1?ae.pop():re.call(ae,de,1),--this.size,0))},It.prototype.get=function(Z){var ae=this.__data__,de=Li(ae,Z);return de<0?void 0:ae[de][1]},It.prototype.has=function(Z){return Li(this.__data__,Z)>-1},It.prototype.set=function(Z,ae){var de=this.__data__,Ee=Li(de,Z);return Ee<0?(++this.size,de.push([Z,ae])):de[Ee][1]=ae,this},Nt.prototype.clear=function(){this.size=0,this.__data__={hash:new ot,map:new(_e||It),string:new ot}},Nt.prototype.delete=function(Z){var ae=St(this,Z).delete(Z);return this.size-=ae?1:0,ae},Nt.prototype.get=function(Z){return St(this,Z).get(Z)},Nt.prototype.has=function(Z){return St(this,Z).has(Z)},Nt.prototype.set=function(Z,ae){var de=St(this,Z),Ee=de.size;return de.set(Z,ae),this.size+=de.size==Ee?0:1,this},Ci.prototype.add=Ci.prototype.push=function(Z){return this.__data__.set(Z,m),this},Ci.prototype.has=function(Z){return this.__data__.has(Z)},gn.prototype.clear=function(){this.__data__=new It,this.size=0},gn.prototype.delete=function(Z){var ae=this.__data__,de=ae.delete(Z);return this.size=ae.size,de},gn.prototype.get=function(Z){return this.__data__.get(Z)},gn.prototype.has=function(Z){return this.__data__.has(Z)},gn.prototype.set=function(Z,ae){var de=this.__data__;if(de instanceof It){var Ee=de.__data__;if(!_e||Ee.length<199)return Ee.push([Z,ae]),this.size=++de.size,this;de=this.__data__=new Nt(Ee)}return de.set(Z,ae),this.size=de.size,this};var ei=ve?function(Z){return Z==null?[]:(Z=Object(Z),function(ae,de){for(var Ee=-1,ze=ae==null?0:ae.length,Be=0,K=[];++Ee<ze;){var oe=ae[Ee];pe=oe,ue.call(Z,pe)&&(K[Be++]=oe)}var pe;return K}(ve(Z)))}:function(){return[]},Qt=yi;function Ri(Z,ae){return!!(ae=ae??y)&&(typeof Z=="number"||I.test(Z))&&Z>-1&&Z%1==0&&Z<ae}function en(Z){if(Z!=null){try{return ye.call(Z)}catch{}try{return Z+""}catch{}}return""}function Di(Z,ae){return Z===ae||Z!=Z&&ae!=ae}(Ue&&Qt(new Ue(new ArrayBuffer(1)))!=k||_e&&Qt(new _e)!=v||Ce&&Qt(Ce.resolve())!=d||ce&&Qt(new ce)!=S||De&&Qt(new De)!=O)&&(Qt=function(Z){var ae=yi(Z),de=ae==g?Z.constructor:void 0,Ee=de?en(de):"";if(Ee)switch(Ee){case dn:return k;case vt:return v;case Zt:return d;case Dt:return S;case Ot:return O}return ae});var Co=Po(function(){return arguments}())?Po:function(Z){return ti(Z)&&be.call(Z,"callee")&&!ue.call(Z,"callee")},Jn=Array.isArray,mn=Oe||function(){return!1};function ro(Z){if(!Lo(Z))return!1;var ae=yi(Z);return ae==w||ae=="[object GeneratorFunction]"||ae=="[object AsyncFunction]"||ae=="[object Proxy]"}function yn(Z){return typeof Z=="number"&&Z>-1&&Z%1==0&&Z<=y}function Lo(Z){var ae=typeof Z;return Z!=null&&(ae=="object"||ae=="function")}function ti(Z){return Z!=null&&typeof Z=="object"}var vn=M?function(Z){return function(ae){return Z(ae)}}(M):function(Z){return ti(Z)&&yn(Z.length)&&!!N[yi(Z)]};function Ro(Z){return(ae=Z)!=null&&yn(ae.length)&&!ro(ae)?function(de,Ee){var ze=Jn(de),Be=!ze&&Co(de),K=!ze&&!Be&&mn(de),oe=!ze&&!Be&&!K&&vn(de),pe=ze||Be||K||oe,Ae=pe?function(Qe,je){for(var st=-1,et=Array(Qe);++st<Qe;)et[st]=je(st);return et}(de.length,String):[],Me=Ae.length;for(var We in de)!be.call(de,We)||pe&&(We=="length"||K&&(We=="offset"||We=="parent")||oe&&(We=="buffer"||We=="byteLength"||We=="byteOffset")||Ri(We,Me))||Ae.push(We);return Ae}(Z):function(de){if(ze=(Ee=de)&&Ee.constructor,Ee!==(typeof ze=="function"&&ze.prototype||fe))return Fe(de);var Ee,ze,Be=[];for(var K in Object(de))be.call(de,K)&&K!="constructor"&&Be.push(K);return Be}(Z);var ae}s.exports=function(Z,ae){return to(Z,ae)}},210:function(s,u,c){var m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(u,"__esModule",{value:!0});var y,f=m(c(465)),l=m(c(307));(function(a){a.compose=function(p,b,w){p===void 0&&(p={}),b===void 0&&(b={}),typeof p!="object"&&(p={}),typeof b!="object"&&(b={});var v=f.default(b);for(var h in w||(v=Object.keys(v).reduce(function(g,d){return v[d]!=null&&(g[d]=v[d]),g},{})),p)p[h]!==void 0&&b[h]===void 0&&(v[h]=p[h]);return Object.keys(v).length>0?v:void 0},a.diff=function(p,b){p===void 0&&(p={}),b===void 0&&(b={}),typeof p!="object"&&(p={}),typeof b!="object"&&(b={});var w=Object.keys(p).concat(Object.keys(b)).reduce(function(v,h){return l.default(p[h],b[h])||(v[h]=b[h]===void 0?null:b[h]),v},{});return Object.keys(w).length>0?w:void 0},a.invert=function(p,b){p===void 0&&(p={}),b===void 0&&(b={}),p=p||{};var w=Object.keys(b).reduce(function(v,h){return b[h]!==p[h]&&p[h]!==void 0&&(v[h]=b[h]),v},{});return Object.keys(p).reduce(function(v,h){return p[h]!==b[h]&&b[h]===void 0&&(v[h]=null),v},w)},a.transform=function(p,b,w){if(w===void 0&&(w=!1),typeof p!="object")return b;if(typeof b=="object"){if(!w)return b;var v=Object.keys(b).reduce(function(h,g){return p[g]===void 0&&(h[g]=b[g]),h},{});return Object.keys(v).length>0?v:void 0}}})(y||(y={})),u.default=y},895:function(s,u,c){var m=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}},y=m(c(103)),f=m(c(465)),l=m(c(307)),a=m(c(210)),p=m(c(430)),b="\0",w=function(){function v(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]}return v.prototype.insert=function(h,g){var d={};return typeof h=="string"&&h.length===0?this:(d.insert=h,g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(d.attributes=g),this.push(d))},v.prototype.delete=function(h){return h<=0?this:this.push({delete:h})},v.prototype.retain=function(h,g){if(h<=0)return this;var d={retain:h};return g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(d.attributes=g),this.push(d)},v.prototype.push=function(h){var g=this.ops.length,d=this.ops[g-1];if(h=f.default(h),typeof d=="object"){if(typeof h.delete=="number"&&typeof d.delete=="number")return this.ops[g-1]={delete:d.delete+h.delete},this;if(typeof d.delete=="number"&&h.insert!=null&&(g-=1,typeof(d=this.ops[g-1])!="object"))return this.ops.unshift(h),this;if(l.default(h.attributes,d.attributes)){if(typeof h.insert=="string"&&typeof d.insert=="string")return this.ops[g-1]={insert:d.insert+h.insert},typeof h.attributes=="object"&&(this.ops[g-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof d.retain=="number")return this.ops[g-1]={retain:d.retain+h.retain},typeof h.attributes=="object"&&(this.ops[g-1].attributes=h.attributes),this}}return g===this.ops.length?this.ops.push(h):this.ops.splice(g,0,h),this},v.prototype.chop=function(){var h=this.ops[this.ops.length-1];return h&&h.retain&&!h.attributes&&this.ops.pop(),this},v.prototype.filter=function(h){return this.ops.filter(h)},v.prototype.forEach=function(h){this.ops.forEach(h)},v.prototype.map=function(h){return this.ops.map(h)},v.prototype.partition=function(h){var g=[],d=[];return this.forEach(function(A){(h(A)?g:d).push(A)}),[g,d]},v.prototype.reduce=function(h,g){return this.ops.reduce(h,g)},v.prototype.changeLength=function(){return this.reduce(function(h,g){return g.insert?h+p.default.length(g):g.delete?h-g.delete:h},0)},v.prototype.length=function(){return this.reduce(function(h,g){return h+p.default.length(g)},0)},v.prototype.slice=function(h,g){h===void 0&&(h=0),g===void 0&&(g=1/0);for(var d=[],A=p.default.iterator(this.ops),S=0;S<g&&A.hasNext();){var E=void 0;S<h?E=A.next(h-S):(E=A.next(g-S),d.push(E)),S+=p.default.length(E)}return new v(d)},v.prototype.compose=function(h){var g=p.default.iterator(this.ops),d=p.default.iterator(h.ops),A=[],S=d.peek();if(S!=null&&typeof S.retain=="number"&&S.attributes==null){for(var E=S.retain;g.peekType()==="insert"&&g.peekLength()<=E;)E-=g.peekLength(),A.push(g.next());S.retain-E>0&&d.next(S.retain-E)}for(var O=new v(A);g.hasNext()||d.hasNext();)if(d.peekType()==="insert")O.push(d.next());else if(g.peekType()==="delete")O.push(g.next());else{var _=Math.min(g.peekLength(),d.peekLength()),k=g.next(_),x=d.next(_);if(typeof x.retain=="number"){var I={};typeof k.retain=="number"?I.retain=_:I.insert=k.insert;var N=a.default.compose(k.attributes,x.attributes,typeof k.retain=="number");if(N&&(I.attributes=N),O.push(I),!d.hasNext()&&l.default(O.ops[O.ops.length-1],I)){var P=new v(g.rest());return O.concat(P).chop()}}else typeof x.delete=="number"&&typeof k.retain=="number"&&O.push(x)}return O.chop()},v.prototype.concat=function(h){var g=new v(this.ops.slice());return h.ops.length>0&&(g.push(h.ops[0]),g.ops=g.ops.concat(h.ops.slice(1))),g},v.prototype.diff=function(h,g){if(this.ops===h.ops)return new v;var d=[this,h].map(function(_){return _.map(function(k){if(k.insert!=null)return typeof k.insert=="string"?k.insert:b;throw new Error("diff() called "+(_===h?"on":"with")+" non-document")}).join("")}),A=new v,S=y.default(d[0],d[1],g),E=p.default.iterator(this.ops),O=p.default.iterator(h.ops);return S.forEach(function(_){for(var k=_[1].length;k>0;){var x=0;switch(_[0]){case y.default.INSERT:x=Math.min(O.peekLength(),k),A.push(O.next(x));break;case y.default.DELETE:x=Math.min(k,E.peekLength()),E.next(x),A.delete(x);break;case y.default.EQUAL:x=Math.min(E.peekLength(),O.peekLength(),k);var I=E.next(x),N=O.next(x);l.default(I.insert,N.insert)?A.retain(x,a.default.diff(I.attributes,N.attributes)):A.push(N).delete(x)}k-=x}}),A.chop()},v.prototype.eachLine=function(h,g){g===void 0&&(g=`
`);for(var d=p.default.iterator(this.ops),A=new v,S=0;d.hasNext();){if(d.peekType()!=="insert")return;var E=d.peek(),O=p.default.length(E)-d.peekLength(),_=typeof E.insert=="string"?E.insert.indexOf(g,O)-O:-1;if(_<0)A.push(d.next());else if(_>0)A.push(d.next(_));else{if(h(A,d.next(1).attributes||{},S)===!1)return;S+=1,A=new v}}A.length()>0&&h(A,{},S)},v.prototype.invert=function(h){var g=new v;return this.reduce(function(d,A){if(A.insert)g.delete(p.default.length(A));else{if(A.retain&&A.attributes==null)return g.retain(A.retain),d+A.retain;if(A.delete||A.retain&&A.attributes){var S=A.delete||A.retain;return h.slice(d,d+S).forEach(function(E){A.delete?g.push(E):A.retain&&A.attributes&&g.retain(p.default.length(E),a.default.invert(A.attributes,E.attributes))}),d+S}}return d},0),g.chop()},v.prototype.transform=function(h,g){if(g===void 0&&(g=!1),g=!!g,typeof h=="number")return this.transformPosition(h,g);for(var d=h,A=p.default.iterator(this.ops),S=p.default.iterator(d.ops),E=new v;A.hasNext()||S.hasNext();)if(A.peekType()!=="insert"||!g&&S.peekType()==="insert")if(S.peekType()==="insert")E.push(S.next());else{var O=Math.min(A.peekLength(),S.peekLength()),_=A.next(O),k=S.next(O);if(_.delete)continue;k.delete?E.push(k):E.retain(O,a.default.transform(_.attributes,k.attributes,g))}else E.retain(p.default.length(A.next()));return E.chop()},v.prototype.transformPosition=function(h,g){g===void 0&&(g=!1),g=!!g;for(var d=p.default.iterator(this.ops),A=0;d.hasNext()&&A<=h;){var S=d.peekLength(),E=d.peekType();d.next(),E!=="delete"?(E==="insert"&&(A<h||!g)&&(h+=S),A+=S):h-=Math.min(S,h-A)}return h},v.Op=p.default,v.AttributeMap=a.default,v}();s.exports=w},977:function(s,u,c){var m=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(u,"__esModule",{value:!0});var y=m(c(430)),f=function(){function l(a){this.ops=a,this.index=0,this.offset=0}return l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(a){a||(a=1/0);var p=this.ops[this.index];if(p){var b=this.offset,w=y.default.length(p);if(a>=w-b?(a=w-b,this.index+=1,this.offset=0):this.offset+=a,typeof p.delete=="number")return{delete:a};var v={};return p.attributes&&(v.attributes=p.attributes),typeof p.retain=="number"?v.retain=a:typeof p.insert=="string"?v.insert=p.insert.substr(b,a):v.insert=p.insert,v}return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?y.default.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var a=this.offset,p=this.index,b=this.next(),w=this.ops.slice(this.index);return this.offset=a,this.index=p,[b].concat(w)}return[]},l}();u.default=f},430:function(s,u,c){var m=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(u,"__esModule",{value:!0});var y,f=m(c(977));(function(l){l.iterator=function(a){return new f.default(a)},l.length=function(a){return typeof a.delete=="number"?a.delete:typeof a.retain=="number"?a.retain:typeof a.insert=="string"?a.insert.length:1}})(y||(y={})),u.default=y},103:s=>{var u=-1;function c(g,d,A,S){if(g===d)return g?[[0,g]]:[];if(A!=null){var E=function(I,N,P){var R=typeof P=="number"?{index:P,length:0}:P.oldRange,q=typeof P=="number"?null:P.newRange,J=I.length,ee=N.length;if(R.length===0&&(q===null||q.length===0)){var z=R.index,F=I.slice(0,z),C=I.slice(z),M=q?q.index:null,B=z+ee-J;if((M===null||M===B)&&!(B<0||B>ee)){var H=N.slice(0,B);if(($=N.slice(B))===C){var V=Math.min(z,B);if((X=F.slice(0,V))===(fe=H.slice(0,V)))return v(X,F.slice(V),H.slice(V),C)}}if(M===null||M===z){var D=z,$=(H=N.slice(0,D),N.slice(D));if(H===F){var W=Math.min(J-D,ee-D);if((ie=C.slice(C.length-W))===(we=$.slice($.length-W)))return v(F,C.slice(0,C.length-W),$.slice(0,$.length-W),ie)}}}if(R.length>0&&q&&q.length===0){var X=I.slice(0,R.index),ie=I.slice(R.index+R.length);if(!(ee<(V=X.length)+(W=ie.length))){var fe=N.slice(0,V),we=N.slice(ee-W);if(X===fe&&ie===we)return v(X,I.slice(V,J-W),N.slice(V,ee-W),ie)}}return null}(g,d,A);if(E)return E}var O=y(g,d),_=g.substring(0,O);O=f(g=g.substring(O),d=d.substring(O));var k=g.substring(g.length-O),x=function(I,N){var P;if(!I)return[[1,N]];if(!N)return[[u,I]];var R=I.length>N.length?I:N,q=I.length>N.length?N:I,J=R.indexOf(q);if(J!==-1)return P=[[1,R.substring(0,J)],[0,q],[1,R.substring(J+q.length)]],I.length>N.length&&(P[0][0]=P[2][0]=u),P;if(q.length===1)return[[u,I],[1,N]];var ee=function(D,$){var W=D.length>$.length?D:$,X=D.length>$.length?$:D;if(W.length<4||2*X.length<W.length)return null;function ie(j,G,se){for(var ue,re,ge,ve,Oe=j.substring(se,se+Math.floor(j.length/4)),Fe=-1,Ue="";(Fe=G.indexOf(Oe,Fe+1))!==-1;){var _e=y(j.substring(se),G.substring(Fe)),Ce=f(j.substring(0,se),G.substring(0,Fe));Ue.length<Ce+_e&&(Ue=G.substring(Fe-Ce,Fe)+G.substring(Fe,Fe+_e),ue=j.substring(0,se-Ce),re=j.substring(se+_e),ge=G.substring(0,Fe-Ce),ve=G.substring(Fe+_e))}return 2*Ue.length>=j.length?[ue,re,ge,ve,Ue]:null}var fe,we,ye,be,U,Q=ie(W,X,Math.ceil(W.length/4)),Y=ie(W,X,Math.ceil(W.length/2));return Q||Y?(fe=Y?Q&&Q[4].length>Y[4].length?Q:Y:Q,D.length>$.length?(we=fe[0],ye=fe[1],be=fe[2],U=fe[3]):(be=fe[0],U=fe[1],we=fe[2],ye=fe[3]),[we,ye,be,U,fe[4]]):null}(I,N);if(ee){var z=ee[0],F=ee[1],C=ee[2],M=ee[3],B=ee[4],H=c(z,C),V=c(F,M);return H.concat([[0,B]],V)}return function(D,$){for(var W=D.length,X=$.length,ie=Math.ceil((W+X)/2),fe=ie,we=2*ie,ye=new Array(we),be=new Array(we),U=0;U<we;U++)ye[U]=-1,be[U]=-1;ye[fe+1]=0,be[fe+1]=0;for(var Q=W-X,Y=Q%2!=0,j=0,G=0,se=0,ue=0,re=0;re<ie;re++){for(var ge=-re+j;ge<=re-G;ge+=2){for(var ve=fe+ge,Oe=(ce=ge===-re||ge!==re&&ye[ve-1]<ye[ve+1]?ye[ve+1]:ye[ve-1]+1)-ge;ce<W&&Oe<X&&D.charAt(ce)===$.charAt(Oe);)ce++,Oe++;if(ye[ve]=ce,ce>W)G+=2;else if(Oe>X)j+=2;else if(Y&&(_e=fe+Q-ge)>=0&&_e<we&&be[_e]!==-1&&ce>=(Ue=W-be[_e]))return m(D,$,ce,Oe)}for(var Fe=-re+se;Fe<=re-ue;Fe+=2){for(var Ue,_e=fe+Fe,Ce=(Ue=Fe===-re||Fe!==re&&be[_e-1]<be[_e+1]?be[_e+1]:be[_e-1]+1)-Fe;Ue<W&&Ce<X&&D.charAt(W-Ue-1)===$.charAt(X-Ce-1);)Ue++,Ce++;if(be[_e]=Ue,Ue>W)ue+=2;else if(Ce>X)se+=2;else if(!Y){var ce;if((ve=fe+Q-Fe)>=0&&ve<we&&ye[ve]!==-1&&(Oe=fe+(ce=ye[ve])-ve,ce>=(Ue=W-Ue)))return m(D,$,ce,Oe)}}}return[[u,D],[1,$]]}(I,N)}(g=g.substring(0,g.length-O),d=d.substring(0,d.length-O));return _&&x.unshift([0,_]),k&&x.push([0,k]),l(x,S),x}function m(g,d,A,S){var E=g.substring(0,A),O=d.substring(0,S),_=g.substring(A),k=d.substring(S),x=c(E,O),I=c(_,k);return x.concat(I)}function y(g,d){if(!g||!d||g.charAt(0)!==d.charAt(0))return 0;for(var A=0,S=Math.min(g.length,d.length),E=S,O=0;A<E;)g.substring(O,E)==d.substring(O,E)?O=A=E:S=E,E=Math.floor((S-A)/2+A);return a(g.charCodeAt(E-1))&&E--,E}function f(g,d){if(!g||!d||g.slice(-1)!==d.slice(-1))return 0;for(var A=0,S=Math.min(g.length,d.length),E=S,O=0;A<E;)g.substring(g.length-E,g.length-O)==d.substring(d.length-E,d.length-O)?O=A=E:S=E,E=Math.floor((S-A)/2+A);return p(g.charCodeAt(g.length-E))&&E--,E}function l(g,d){g.push([0,""]);for(var A,S=0,E=0,O=0,_="",k="";S<g.length;)if(S<g.length-1&&!g[S][1])g.splice(S,1);else switch(g[S][0]){case 1:O++,k+=g[S][1],S++;break;case u:E++,_+=g[S][1],S++;break;case 0:var x=S-O-E-1;if(d){if(x>=0&&w(g[x][1])){var I=g[x][1].slice(-1);if(g[x][1]=g[x][1].slice(0,-1),_=I+_,k=I+k,!g[x][1]){g.splice(x,1),S--;var N=x-1;g[N]&&g[N][0]===1&&(O++,k=g[N][1]+k,N--),g[N]&&g[N][0]===u&&(E++,_=g[N][1]+_,N--),x=N}}b(g[S][1])&&(I=g[S][1].charAt(0),g[S][1]=g[S][1].slice(1),_+=I,k+=I)}if(S<g.length-1&&!g[S][1]){g.splice(S,1);break}if(_.length>0||k.length>0){_.length>0&&k.length>0&&((A=y(k,_))!==0&&(x>=0?g[x][1]+=k.substring(0,A):(g.splice(0,0,[0,k.substring(0,A)]),S++),k=k.substring(A),_=_.substring(A)),(A=f(k,_))!==0&&(g[S][1]=k.substring(k.length-A)+g[S][1],k=k.substring(0,k.length-A),_=_.substring(0,_.length-A)));var P=O+E;_.length===0&&k.length===0?(g.splice(S-P,P),S-=P):_.length===0?(g.splice(S-P,P,[1,k]),S=S-P+1):k.length===0?(g.splice(S-P,P,[u,_]),S=S-P+1):(g.splice(S-P,P,[u,_],[1,k]),S=S-P+2)}S!==0&&g[S-1][0]===0?(g[S-1][1]+=g[S][1],g.splice(S,1)):S++,O=0,E=0,_="",k=""}g[g.length-1][1]===""&&g.pop();var R=!1;for(S=1;S<g.length-1;)g[S-1][0]===0&&g[S+1][0]===0&&(g[S][1].substring(g[S][1].length-g[S-1][1].length)===g[S-1][1]?(g[S][1]=g[S-1][1]+g[S][1].substring(0,g[S][1].length-g[S-1][1].length),g[S+1][1]=g[S-1][1]+g[S+1][1],g.splice(S-1,1),R=!0):g[S][1].substring(0,g[S+1][1].length)==g[S+1][1]&&(g[S-1][1]+=g[S+1][1],g[S][1]=g[S][1].substring(g[S+1][1].length)+g[S+1][1],g.splice(S+1,1),R=!0)),S++;R&&l(g,d)}function a(g){return g>=55296&&g<=56319}function p(g){return g>=56320&&g<=57343}function b(g){return p(g.charCodeAt(0))}function w(g){return a(g.charCodeAt(g.length-1))}function v(g,d,A,S){return w(g)||b(S)?null:function(E){for(var O=[],_=0;_<E.length;_++)E[_][1].length>0&&O.push(E[_]);return O}([[0,g],[u,d],[1,A],[0,S]])}function h(g,d,A){return c(g,d,A,!0)}h.INSERT=1,h.DELETE=u,h.EQUAL=0,s.exports=h},165:function(s,u,c){var m,y;(y=typeof(m=function(){var f,l={};function a(w,v,h){var g=w.getClientRects();if(g.length===2){var d=w.getBoundingClientRect();return g[v][h]<d[h]}return!1}function p(w){if(!w||screen.deviceXDPI===screen.logicalXDPI)return w;if("length"in w)return Array.prototype.map.call(w,p);var v=screen.deviceXDPI/screen.logicalXDPI;return{top:w.top/v,bottom:w.bottom/v,left:w.left/v,right:w.right/v,width:w.width/v,height:w.height/v}}function b(w,v){var h,g=0,d=1024;if(d>=v.length)return Array.prototype.push.apply(w,v);for(;g<v.length;)h=Array.prototype.push.apply(w,Array.prototype.slice.call(v,g,g+d)),g+=d;return h}return l.isBroken=function(){if(f===void 0){var w=document.createElement("p"),v=document.createElement("span"),h=document.createTextNode("aa"),g=document.createTextNode("aa"),d=document.createElement("img");d.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");var A=document.createRange();if(f={},w.appendChild(h),w.appendChild(v),v.appendChild(d),v.appendChild(g),document.body.appendChild(w),A.setStart(h,1),A.setEnd(v,0),f.getClientRects=f.getBoundingClientRect=A.getClientRects().length>1,f.getClientRects||(A.setEnd(g,1),f.getClientRects=f.getBoundingClientRect=A.getClientRects().length===2),!f.getBoundingClientRect){A.setEnd(A.startContainer,A.startOffset);var S=A.getBoundingClientRect();f.getBoundingClientRect=S.top===0&&S.left===0}if(document.body.removeChild(w),!f.getBoundingClientRect){var E=document.createElement("p");E.style.width="0px",E.style.fontSize="20px",E.style.whiteSpace="normal",E.style.wordBreak="normal";var O=document.createTextNode("m mm");E.appendChild(O),document.body.appendChild(E),A.setStart(O,1),A.setEnd(O,2),a(A,1,"left")?f.getBoundingClientRect=!0:(A.setStart(O,1),A.setEnd(O,3),a(A,0,"top")&&(f.getBoundingClientRect=!0)),document.body.removeChild(E)}var _=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")();f.ieZoom=!!_&&_<=10}return f},l.getClientRects=function(w){var v=this.isBroken();if(v.ieZoom)return p(w.getClientRects());if(!v.getClientRects)return w.getClientRects();var h=[],g=[],d=w.endContainer,A=w.endOffset,S=document.createRange();function E(O){for(var _=0;O=O.previousSibling;)_++;return _}for(;d!==w.commonAncestorContainer;)S.setStart(d,0),S.setEnd(d,A),b(g,S.getClientRects()),A=E(d),d=d.parentNode;return(S=w.cloneRange()).setEnd(d,A),b(h,S.getClientRects()),b(h,g),h},l.getBoundingClientRect=function(w){var v=this.getClientRects(w);if(v.length===0)return null;var h,g=w.getBoundingClientRect(),d=this.isBroken();if(d.ieZoom)return p(g);if(!d.getBoundingClientRect)return g;if(g.width===0&&g.height===0)return v[0];for(var A=0,S=v.length;A<S;A++){var E=v[A];h?(h.left=Math.min(h.left,E.left),h.top=Math.min(h.top,E.top),h.right=Math.max(h.right,E.right),h.bottom=Math.max(h.bottom,E.bottom)):h={left:E.left,top:E.top,right:E.right,bottom:E.bottom}}return h&&(h.width=h.right-h.left,h.height=h.bottom-h.top),h},l})=="function"?m.call(u,c,u,s):m)===void 0||(s.exports=y)},33:(s,u,c)=>{c.r(u),c.d(u,{default:()=>N});var m=function(){if(typeof Map<"u")return Map;function P(R,q){var J=-1;return R.some(function(ee,z){return ee[0]===q&&(J=z,!0)}),J}return function(){function R(){this.__entries__=[]}return Object.defineProperty(R.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),R.prototype.get=function(q){var J=P(this.__entries__,q),ee=this.__entries__[J];return ee&&ee[1]},R.prototype.set=function(q,J){var ee=P(this.__entries__,q);~ee?this.__entries__[ee][1]=J:this.__entries__.push([q,J])},R.prototype.delete=function(q){var J=this.__entries__,ee=P(J,q);~ee&&J.splice(ee,1)},R.prototype.has=function(q){return!!~P(this.__entries__,q)},R.prototype.clear=function(){this.__entries__.splice(0)},R.prototype.forEach=function(q,J){J===void 0&&(J=null);for(var ee=0,z=this.__entries__;ee<z.length;ee++){var F=z[ee];q.call(J,F[1],F[0])}},R}()}(),y=typeof window<"u"&&typeof document<"u"&&window.document===document,f=c.g!==void 0&&c.g.Math===Math?c.g:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")(),l=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(f):function(P){return setTimeout(function(){return P(Date.now())},1e3/60)},a=["top","right","bottom","left","width","height","size","weight"],p=typeof MutationObserver<"u",b=function(){function P(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(R,q){var J=!1,ee=!1,z=0;function F(){J&&(J=!1,R()),ee&&M()}function C(){l(F)}function M(){var B=Date.now();if(J){if(B-z<2)return;ee=!0}else J=!0,ee=!1,setTimeout(C,20);z=B}return M}(this.refresh.bind(this))}return P.prototype.addObserver=function(R){~this.observers_.indexOf(R)||this.observers_.push(R),this.connected_||this.connect_()},P.prototype.removeObserver=function(R){var q=this.observers_,J=q.indexOf(R);~J&&q.splice(J,1),!q.length&&this.connected_&&this.disconnect_()},P.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},P.prototype.updateObservers_=function(){var R=this.observers_.filter(function(q){return q.gatherActive(),q.hasActive()});return R.forEach(function(q){return q.broadcastActive()}),R.length>0},P.prototype.connect_=function(){y&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),p?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},P.prototype.disconnect_=function(){y&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},P.prototype.onTransitionEnd_=function(R){var q=R.propertyName,J=q===void 0?"":q;a.some(function(ee){return!!~J.indexOf(ee)})&&this.refresh()},P.getInstance=function(){return this.instance_||(this.instance_=new P),this.instance_},P.instance_=null,P}(),w=function(P,R){for(var q=0,J=Object.keys(R);q<J.length;q++){var ee=J[q];Object.defineProperty(P,ee,{value:R[ee],enumerable:!1,writable:!1,configurable:!0})}return P},v=function(P){return P&&P.ownerDocument&&P.ownerDocument.defaultView||f},h=E(0,0,0,0);function g(P){return parseFloat(P)||0}function d(P){for(var R=[],q=1;q<arguments.length;q++)R[q-1]=arguments[q];return R.reduce(function(J,ee){return J+g(P["border-"+ee+"-width"])},0)}var A=typeof SVGGraphicsElement<"u"?function(P){return P instanceof v(P).SVGGraphicsElement}:function(P){return P instanceof v(P).SVGElement&&typeof P.getBBox=="function"};function S(P){return y?A(P)?function(R){var q=R.getBBox();return E(0,0,q.width,q.height)}(P):function(R){var q=R.clientWidth,J=R.clientHeight;if(!q&&!J)return h;var ee=v(R).getComputedStyle(R),z=function(D){for(var $={},W=0,X=["top","right","bottom","left"];W<X.length;W++){var ie=X[W],fe=D["padding-"+ie];$[ie]=g(fe)}return $}(ee),F=z.left+z.right,C=z.top+z.bottom,M=g(ee.width),B=g(ee.height);if(ee.boxSizing==="border-box"&&(Math.round(M+F)!==q&&(M-=d(ee,"left","right")+F),Math.round(B+C)!==J&&(B-=d(ee,"top","bottom")+C)),!function(D){return D===v(D).document.documentElement}(R)){var H=Math.round(M+F)-q,V=Math.round(B+C)-J;Math.abs(H)!==1&&(M-=H),Math.abs(V)!==1&&(B-=V)}return E(z.left,z.top,M,B)}(P):h}function E(P,R,q,J){return{x:P,y:R,width:q,height:J}}var O=function(){function P(R){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=E(0,0,0,0),this.target=R}return P.prototype.isActive=function(){var R=S(this.target);return this.contentRect_=R,R.width!==this.broadcastWidth||R.height!==this.broadcastHeight},P.prototype.broadcastRect=function(){var R=this.contentRect_;return this.broadcastWidth=R.width,this.broadcastHeight=R.height,R},P}(),_=function(P,R){var q,J,ee,z,F,C,M,B=(J=(q=R).x,ee=q.y,z=q.width,F=q.height,C=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,M=Object.create(C.prototype),w(M,{x:J,y:ee,width:z,height:F,top:ee,right:J+z,bottom:F+ee,left:J}),M);w(this,{target:P,contentRect:B})},k=function(){function P(R,q,J){if(this.activeObservations_=[],this.observations_=new m,typeof R!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=R,this.controller_=q,this.callbackCtx_=J}return P.prototype.observe=function(R){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(R instanceof v(R).Element))throw new TypeError('parameter 1 is not of type "Element".');var q=this.observations_;q.has(R)||(q.set(R,new O(R)),this.controller_.addObserver(this),this.controller_.refresh())}},P.prototype.unobserve=function(R){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(R instanceof v(R).Element))throw new TypeError('parameter 1 is not of type "Element".');var q=this.observations_;q.has(R)&&(q.delete(R),q.size||this.controller_.removeObserver(this))}},P.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},P.prototype.gatherActive=function(){var R=this;this.clearActive(),this.observations_.forEach(function(q){q.isActive()&&R.activeObservations_.push(q)})},P.prototype.broadcastActive=function(){if(this.hasActive()){var R=this.callbackCtx_,q=this.activeObservations_.map(function(J){return new _(J.target,J.broadcastRect())});this.callback_.call(R,q,R),this.clearActive()}},P.prototype.clearActive=function(){this.activeObservations_.splice(0)},P.prototype.hasActive=function(){return this.activeObservations_.length>0},P}(),x=typeof WeakMap<"u"?new WeakMap:new m,I=function P(R){if(!(this instanceof P))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var q=b.getInstance(),J=new k(R,q,this);x.set(this,J)};["observe","unobserve","disconnect"].forEach(function(P){I.prototype[P]=function(){var R;return(R=x.get(this))[P].apply(R,arguments)}});const N=f.ResizeObserver!==void 0?f.ResizeObserver:I},413:(s,u,c)=>{c.r(u),c.d(u,{default:()=>E});var m=c(379),y=c.n(m),f=c(795),l=c.n(f),a=c(569),p=c.n(a),b=c(565),w=c.n(b),v=c(216),h=c.n(v),g=c(589),d=c.n(g),A=c(582),S={};S.styleTagTransform=d(),S.setAttributes=w(),S.insert=p().bind(null,"head"),S.domAPI=l(),S.insertStyleElement=h(),y()(A.Z,S);const E=A.Z&&A.Z.locals?A.Z.locals:void 0},379:s=>{var u=[];function c(f){for(var l=-1,a=0;a<u.length;a++)if(u[a].identifier===f){l=a;break}return l}function m(f,l){for(var a={},p=[],b=0;b<f.length;b++){var w=f[b],v=l.base?w[0]+l.base:w[0],h=a[v]||0,g="".concat(v," ").concat(h);a[v]=h+1;var d=c(g),A={css:w[1],media:w[2],sourceMap:w[3],supports:w[4],layer:w[5]};if(d!==-1)u[d].references++,u[d].updater(A);else{var S=y(A,l);l.byIndex=b,u.splice(b,0,{identifier:g,updater:S,references:1})}p.push(g)}return p}function y(f,l){var a=l.domAPI(l);return a.update(f),function(p){if(p){if(p.css===f.css&&p.media===f.media&&p.sourceMap===f.sourceMap&&p.supports===f.supports&&p.layer===f.layer)return;a.update(f=p)}else a.remove()}}s.exports=function(f,l){var a=m(f=f||[],l=l||{});return function(p){p=p||[];for(var b=0;b<a.length;b++){var w=c(a[b]);u[w].references--}for(var v=m(p,l),h=0;h<a.length;h++){var g=c(a[h]);u[g].references===0&&(u[g].updater(),u.splice(g,1))}a=v}}},569:s=>{var u={};s.exports=function(c,m){var y=function(f){if(u[f]===void 0){var l=document.querySelector(f);if(window.HTMLIFrameElement&&l instanceof window.HTMLIFrameElement)try{l=l.contentDocument.head}catch{l=null}u[f]=l}return u[f]}(c);if(!y)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");y.appendChild(m)}},216:s=>{s.exports=function(u){var c=document.createElement("style");return u.setAttributes(c,u.attributes),u.insert(c,u.options),c}},565:(s,u,c)=>{s.exports=function(m){var y=c.nc;y&&m.setAttribute("nonce",y)}},795:s=>{s.exports=function(u){var c=u.insertStyleElement(u);return{update:function(m){(function(y,f,l){var a="";l.supports&&(a+="@supports (".concat(l.supports,") {")),l.media&&(a+="@media ".concat(l.media," {"));var p=l.layer!==void 0;p&&(a+="@layer".concat(l.layer.length>0?" ".concat(l.layer):""," {")),a+=l.css,p&&(a+="}"),l.media&&(a+="}"),l.supports&&(a+="}");var b=l.sourceMap;b&&typeof btoa<"u"&&(a+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(b))))," */")),f.styleTagTransform(a,y,f.options)})(c,u,m)},remove:function(){(function(m){if(m.parentNode===null)return!1;m.parentNode.removeChild(m)})(c)}}}},589:s=>{s.exports=function(u,c){if(c.styleSheet)c.styleSheet.cssText=u;else{for(;c.firstChild;)c.removeChild(c.firstChild);c.appendChild(document.createTextNode(u))}}},621:(s,u,c)=>{var m;(function(y){var f=/^\s+/,l=/\s+$/,a=0,p=y.round,b=y.min,w=y.max,v=y.random;function h(U,Q){if(Q=Q||{},(U=U||"")instanceof h)return U;if(!(this instanceof h))return new h(U,Q);var Y=function(j){var G,se,ue,re={r:0,g:0,b:0},ge=1,ve=null,Oe=null,Fe=null,Ue=!1,_e=!1;return typeof j=="string"&&(j=function(Ce){Ce=Ce.replace(f,"").replace(l,"").toLowerCase();var ce,De=!1;if(F[Ce])Ce=F[Ce],De=!0;else if(Ce=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(ce=ye.rgb.exec(Ce))?{r:ce[1],g:ce[2],b:ce[3]}:(ce=ye.rgba.exec(Ce))?{r:ce[1],g:ce[2],b:ce[3],a:ce[4]}:(ce=ye.hsl.exec(Ce))?{h:ce[1],s:ce[2],l:ce[3]}:(ce=ye.hsla.exec(Ce))?{h:ce[1],s:ce[2],l:ce[3],a:ce[4]}:(ce=ye.hsv.exec(Ce))?{h:ce[1],s:ce[2],v:ce[3]}:(ce=ye.hsva.exec(Ce))?{h:ce[1],s:ce[2],v:ce[3],a:ce[4]}:(ce=ye.hex8.exec(Ce))?{r:V(ce[1]),g:V(ce[2]),b:V(ce[3]),a:X(ce[4]),format:De?"name":"hex8"}:(ce=ye.hex6.exec(Ce))?{r:V(ce[1]),g:V(ce[2]),b:V(ce[3]),format:De?"name":"hex"}:(ce=ye.hex4.exec(Ce))?{r:V(ce[1]+""+ce[1]),g:V(ce[2]+""+ce[2]),b:V(ce[3]+""+ce[3]),a:X(ce[4]+""+ce[4]),format:De?"name":"hex8"}:!!(ce=ye.hex3.exec(Ce))&&{r:V(ce[1]+""+ce[1]),g:V(ce[2]+""+ce[2]),b:V(ce[3]+""+ce[3]),format:De?"name":"hex"}}(j)),typeof j=="object"&&(be(j.r)&&be(j.g)&&be(j.b)?(G=j.r,se=j.g,ue=j.b,re={r:255*B(G,255),g:255*B(se,255),b:255*B(ue,255)},Ue=!0,_e=String(j.r).substr(-1)==="%"?"prgb":"rgb"):be(j.h)&&be(j.s)&&be(j.v)?(ve=$(j.s),Oe=$(j.v),re=function(Ce,ce,De){Ce=6*B(Ce,360),ce=B(ce,100),De=B(De,100);var At=y.floor(Ce),dn=Ce-At,vt=De*(1-ce),Zt=De*(1-dn*ce),Dt=De*(1-(1-dn)*ce),Ot=At%6;return{r:255*[De,Zt,vt,vt,Dt,De][Ot],g:255*[Dt,De,De,Zt,vt,vt][Ot],b:255*[vt,vt,Dt,De,De,Zt][Ot]}}(j.h,ve,Oe),Ue=!0,_e="hsv"):be(j.h)&&be(j.s)&&be(j.l)&&(ve=$(j.s),Fe=$(j.l),re=function(Ce,ce,De){var At,dn,vt;function Zt(Tt,Xt,ot){return ot<0&&(ot+=1),ot>1&&(ot-=1),ot<1/6?Tt+6*(Xt-Tt)*ot:ot<.5?Xt:ot<2/3?Tt+(Xt-Tt)*(2/3-ot)*6:Tt}if(Ce=B(Ce,360),ce=B(ce,100),De=B(De,100),ce===0)At=dn=vt=De;else{var Dt=De<.5?De*(1+ce):De+ce-De*ce,Ot=2*De-Dt;At=Zt(Ot,Dt,Ce+1/3),dn=Zt(Ot,Dt,Ce),vt=Zt(Ot,Dt,Ce-1/3)}return{r:255*At,g:255*dn,b:255*vt}}(j.h,ve,Fe),Ue=!0,_e="hsl"),j.hasOwnProperty("a")&&(ge=j.a)),ge=M(ge),{ok:Ue,format:j.format||_e,r:b(255,w(re.r,0)),g:b(255,w(re.g,0)),b:b(255,w(re.b,0)),a:ge}}(U);this._originalInput=U,this._r=Y.r,this._g=Y.g,this._b=Y.b,this._a=Y.a,this._roundA=p(100*this._a)/100,this._format=Q.format||Y.format,this._gradientType=Q.gradientType,this._r<1&&(this._r=p(this._r)),this._g<1&&(this._g=p(this._g)),this._b<1&&(this._b=p(this._b)),this._ok=Y.ok,this._tc_id=a++}function g(U,Q,Y){U=B(U,255),Q=B(Q,255),Y=B(Y,255);var j,G,se=w(U,Q,Y),ue=b(U,Q,Y),re=(se+ue)/2;if(se==ue)j=G=0;else{var ge=se-ue;switch(G=re>.5?ge/(2-se-ue):ge/(se+ue),se){case U:j=(Q-Y)/ge+(Q<Y?6:0);break;case Q:j=(Y-U)/ge+2;break;case Y:j=(U-Q)/ge+4}j/=6}return{h:j,s:G,l:re}}function d(U,Q,Y){U=B(U,255),Q=B(Q,255),Y=B(Y,255);var j,G,se=w(U,Q,Y),ue=b(U,Q,Y),re=se,ge=se-ue;if(G=se===0?0:ge/se,se==ue)j=0;else{switch(se){case U:j=(Q-Y)/ge+(Q<Y?6:0);break;case Q:j=(Y-U)/ge+2;break;case Y:j=(U-Q)/ge+4}j/=6}return{h:j,s:G,v:re}}function A(U,Q,Y,j){var G=[D(p(U).toString(16)),D(p(Q).toString(16)),D(p(Y).toString(16))];return j&&G[0].charAt(0)==G[0].charAt(1)&&G[1].charAt(0)==G[1].charAt(1)&&G[2].charAt(0)==G[2].charAt(1)?G[0].charAt(0)+G[1].charAt(0)+G[2].charAt(0):G.join("")}function S(U,Q,Y,j){return[D(W(j)),D(p(U).toString(16)),D(p(Q).toString(16)),D(p(Y).toString(16))].join("")}function E(U,Q){Q=Q===0?0:Q||10;var Y=h(U).toHsl();return Y.s-=Q/100,Y.s=H(Y.s),h(Y)}function O(U,Q){Q=Q===0?0:Q||10;var Y=h(U).toHsl();return Y.s+=Q/100,Y.s=H(Y.s),h(Y)}function _(U){return h(U).desaturate(100)}function k(U,Q){Q=Q===0?0:Q||10;var Y=h(U).toHsl();return Y.l+=Q/100,Y.l=H(Y.l),h(Y)}function x(U,Q){Q=Q===0?0:Q||10;var Y=h(U).toRgb();return Y.r=w(0,b(255,Y.r-p(-Q/100*255))),Y.g=w(0,b(255,Y.g-p(-Q/100*255))),Y.b=w(0,b(255,Y.b-p(-Q/100*255))),h(Y)}function I(U,Q){Q=Q===0?0:Q||10;var Y=h(U).toHsl();return Y.l-=Q/100,Y.l=H(Y.l),h(Y)}function N(U,Q){var Y=h(U).toHsl(),j=(Y.h+Q)%360;return Y.h=j<0?360+j:j,h(Y)}function P(U){var Q=h(U).toHsl();return Q.h=(Q.h+180)%360,h(Q)}function R(U){var Q=h(U).toHsl(),Y=Q.h;return[h(U),h({h:(Y+120)%360,s:Q.s,l:Q.l}),h({h:(Y+240)%360,s:Q.s,l:Q.l})]}function q(U){var Q=h(U).toHsl(),Y=Q.h;return[h(U),h({h:(Y+90)%360,s:Q.s,l:Q.l}),h({h:(Y+180)%360,s:Q.s,l:Q.l}),h({h:(Y+270)%360,s:Q.s,l:Q.l})]}function J(U){var Q=h(U).toHsl(),Y=Q.h;return[h(U),h({h:(Y+72)%360,s:Q.s,l:Q.l}),h({h:(Y+216)%360,s:Q.s,l:Q.l})]}function ee(U,Q,Y){Q=Q||6,Y=Y||30;var j=h(U).toHsl(),G=360/Y,se=[h(U)];for(j.h=(j.h-(G*Q>>1)+720)%360;--Q;)j.h=(j.h+G)%360,se.push(h(j));return se}function z(U,Q){Q=Q||6;for(var Y=h(U).toHsv(),j=Y.h,G=Y.s,se=Y.v,ue=[],re=1/Q;Q--;)ue.push(h({h:j,s:G,v:se})),se=(se+re)%1;return ue}h.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var U=this.toRgb();return(299*U.r+587*U.g+114*U.b)/1e3},getLuminance:function(){var U,Q,Y,j=this.toRgb();return U=j.r/255,Q=j.g/255,Y=j.b/255,.2126*(U<=.03928?U/12.92:y.pow((U+.055)/1.055,2.4))+.7152*(Q<=.03928?Q/12.92:y.pow((Q+.055)/1.055,2.4))+.0722*(Y<=.03928?Y/12.92:y.pow((Y+.055)/1.055,2.4))},setAlpha:function(U){return this._a=M(U),this._roundA=p(100*this._a)/100,this},toHsv:function(){var U=d(this._r,this._g,this._b);return{h:360*U.h,s:U.s,v:U.v,a:this._a}},toHsvString:function(){var U=d(this._r,this._g,this._b),Q=p(360*U.h),Y=p(100*U.s),j=p(100*U.v);return this._a==1?"hsv("+Q+", "+Y+"%, "+j+"%)":"hsva("+Q+", "+Y+"%, "+j+"%, "+this._roundA+")"},toHsl:function(){var U=g(this._r,this._g,this._b);return{h:360*U.h,s:U.s,l:U.l,a:this._a}},toHslString:function(){var U=g(this._r,this._g,this._b),Q=p(360*U.h),Y=p(100*U.s),j=p(100*U.l);return this._a==1?"hsl("+Q+", "+Y+"%, "+j+"%)":"hsla("+Q+", "+Y+"%, "+j+"%, "+this._roundA+")"},toHex:function(U){return A(this._r,this._g,this._b,U)},toHexString:function(U){return"#"+this.toHex(U)},toHex8:function(U){return function(Q,Y,j,G,se){var ue=[D(p(Q).toString(16)),D(p(Y).toString(16)),D(p(j).toString(16)),D(W(G))];return se&&ue[0].charAt(0)==ue[0].charAt(1)&&ue[1].charAt(0)==ue[1].charAt(1)&&ue[2].charAt(0)==ue[2].charAt(1)&&ue[3].charAt(0)==ue[3].charAt(1)?ue[0].charAt(0)+ue[1].charAt(0)+ue[2].charAt(0)+ue[3].charAt(0):ue.join("")}(this._r,this._g,this._b,this._a,U)},toHex8String:function(U){return"#"+this.toHex8(U)},toRgb:function(){return{r:p(this._r),g:p(this._g),b:p(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+p(this._r)+", "+p(this._g)+", "+p(this._b)+")":"rgba("+p(this._r)+", "+p(this._g)+", "+p(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:p(100*B(this._r,255))+"%",g:p(100*B(this._g,255))+"%",b:p(100*B(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+p(100*B(this._r,255))+"%, "+p(100*B(this._g,255))+"%, "+p(100*B(this._b,255))+"%)":"rgba("+p(100*B(this._r,255))+"%, "+p(100*B(this._g,255))+"%, "+p(100*B(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(C[A(this._r,this._g,this._b,!0)]||!1)},toFilter:function(U){var Q="#"+S(this._r,this._g,this._b,this._a),Y=Q,j=this._gradientType?"GradientType = 1, ":"";if(U){var G=h(U);Y="#"+S(G._r,G._g,G._b,G._a)}return"progid:DXImageTransform.Microsoft.gradient("+j+"startColorstr="+Q+",endColorstr="+Y+")"},toString:function(U){var Q=!!U;U=U||this._format;var Y=!1,j=this._a<1&&this._a>=0;return Q||!j||U!=="hex"&&U!=="hex6"&&U!=="hex3"&&U!=="hex4"&&U!=="hex8"&&U!=="name"?(U==="rgb"&&(Y=this.toRgbString()),U==="prgb"&&(Y=this.toPercentageRgbString()),U!=="hex"&&U!=="hex6"||(Y=this.toHexString()),U==="hex3"&&(Y=this.toHexString(!0)),U==="hex4"&&(Y=this.toHex8String(!0)),U==="hex8"&&(Y=this.toHex8String()),U==="name"&&(Y=this.toName()),U==="hsl"&&(Y=this.toHslString()),U==="hsv"&&(Y=this.toHsvString()),Y||this.toHexString()):U==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return h(this.toString())},_applyModification:function(U,Q){var Y=U.apply(null,[this].concat([].slice.call(Q)));return this._r=Y._r,this._g=Y._g,this._b=Y._b,this.setAlpha(Y._a),this},lighten:function(){return this._applyModification(k,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(I,arguments)},desaturate:function(){return this._applyModification(E,arguments)},saturate:function(){return this._applyModification(O,arguments)},greyscale:function(){return this._applyModification(_,arguments)},spin:function(){return this._applyModification(N,arguments)},_applyCombination:function(U,Q){return U.apply(null,[this].concat([].slice.call(Q)))},analogous:function(){return this._applyCombination(ee,arguments)},complement:function(){return this._applyCombination(P,arguments)},monochromatic:function(){return this._applyCombination(z,arguments)},splitcomplement:function(){return this._applyCombination(J,arguments)},triad:function(){return this._applyCombination(R,arguments)},tetrad:function(){return this._applyCombination(q,arguments)}},h.fromRatio=function(U,Q){if(typeof U=="object"){var Y={};for(var j in U)U.hasOwnProperty(j)&&(Y[j]=j==="a"?U[j]:$(U[j]));U=Y}return h(U,Q)},h.equals=function(U,Q){return!(!U||!Q)&&h(U).toRgbString()==h(Q).toRgbString()},h.random=function(){return h.fromRatio({r:v(),g:v(),b:v()})},h.mix=function(U,Q,Y){Y=Y===0?0:Y||50;var j=h(U).toRgb(),G=h(Q).toRgb(),se=Y/100;return h({r:(G.r-j.r)*se+j.r,g:(G.g-j.g)*se+j.g,b:(G.b-j.b)*se+j.b,a:(G.a-j.a)*se+j.a})},h.readability=function(U,Q){var Y=h(U),j=h(Q);return(y.max(Y.getLuminance(),j.getLuminance())+.05)/(y.min(Y.getLuminance(),j.getLuminance())+.05)},h.isReadable=function(U,Q,Y){var j,G,se,ue,re,ge=h.readability(U,Q);switch(G=!1,(se=Y,(ue=((se=se||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&ue!=="AAA"&&(ue="AA"),(re=(se.size||"small").toLowerCase())!=="small"&&re!=="large"&&(re="small"),j={level:ue,size:re}).level+j.size){case"AAsmall":case"AAAlarge":G=ge>=4.5;break;case"AAlarge":G=ge>=3;break;case"AAAsmall":G=ge>=7}return G},h.mostReadable=function(U,Q,Y){var j,G,se,ue,re=null,ge=0;G=(Y=Y||{}).includeFallbackColors,se=Y.level,ue=Y.size;for(var ve=0;ve<Q.length;ve++)(j=h.readability(U,Q[ve]))>ge&&(ge=j,re=h(Q[ve]));return h.isReadable(U,re,{level:se,size:ue})||!G?re:(Y.includeFallbackColors=!1,h.mostReadable(U,["#fff","#000"],Y))};var F=h.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=h.hexNames=function(U){var Q={};for(var Y in U)U.hasOwnProperty(Y)&&(Q[U[Y]]=Y);return Q}(F);function M(U){return U=parseFloat(U),(isNaN(U)||U<0||U>1)&&(U=1),U}function B(U,Q){(function(j){return typeof j=="string"&&j.indexOf(".")!=-1&&parseFloat(j)===1})(U)&&(U="100%");var Y=function(j){return typeof j=="string"&&j.indexOf("%")!=-1}(U);return U=b(Q,w(0,parseFloat(U))),Y&&(U=parseInt(U*Q,10)/100),y.abs(U-Q)<1e-6?1:U%Q/parseFloat(Q)}function H(U){return b(1,w(0,U))}function V(U){return parseInt(U,16)}function D(U){return U.length==1?"0"+U:""+U}function $(U){return U<=1&&(U=100*U+"%"),U}function W(U){return y.round(255*parseFloat(U)).toString(16)}function X(U){return V(U)/255}var ie,fe,we,ye=(fe="[\\s|\\(]+("+(ie="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")\\s*\\)?",we="[\\s|\\(]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")\\s*\\)?",{CSS_UNIT:new RegExp(ie),rgb:new RegExp("rgb"+fe),rgba:new RegExp("rgba"+we),hsl:new RegExp("hsl"+fe),hsla:new RegExp("hsla"+we),hsv:new RegExp("hsv"+fe),hsva:new RegExp("hsva"+we),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function be(U){return!!ye.CSS_UNIT.exec(U)}s.exports?s.exports=h:(m=(function(){return h}).call(u,c,u,s))===void 0||(s.exports=m)})(Math)},607:function(s,u,c){var m=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(u,"__esModule",{value:!0}),u.Cursor=u.default=void 0;var y=m(c(678));u.default=y.default;var f=m(c(353));u.Cursor=f.default,c(413)},353:(s,u,c)=>{Object.defineProperty(u,"__esModule",{value:!0});var m=c(621),y=function(){function f(l,a,p){this.id=l,this.name=a,this.color=p,this.toggleNearCursor=this.toggleNearCursor.bind(this),this._toggleOpenedCursor=this._toggleOpenedCursor.bind(this),this._setHoverState=this._setHoverState.bind(this)}return f.prototype.build=function(l){var a=document.createElement(f.CONTAINER_ELEMENT_TAG);a.classList.add(f.CURSOR_CLASS),a.id="ql-cursor-".concat(this.id),a.innerHTML=l.template;var p=a.getElementsByClassName(f.SELECTION_CLASS)[0],b=a.getElementsByClassName(f.CARET_CONTAINER_CLASS)[0],w=b.getElementsByClassName(f.CARET_CLASS)[0],v=a.getElementsByClassName(f.FLAG_CLASS)[0];return v.style.backgroundColor=this.color,w.style.backgroundColor=this.color,a.getElementsByClassName(f.NAME_CLASS)[0].textContent=this.name,this._hideDelay="".concat(l.hideDelayMs,"ms"),this._hideSpeedMs=l.hideSpeedMs,this._positionFlag=l.positionFlag,v.style.transitionDelay=this._hideDelay,v.style.transitionDuration="".concat(this._hideSpeedMs,"ms"),this._el=a,this._selectionEl=p,this._caretEl=b,this._flagEl=v,b.addEventListener("mouseover",this._setHoverState),this._el},f.prototype.show=function(){this._el.classList.remove(f.HIDDEN_CLASS)},f.prototype.hide=function(){this._el.classList.add(f.HIDDEN_CLASS)},f.prototype.remove=function(){this._el.parentNode.removeChild(this._el)},f.prototype.toggleNearCursor=function(l,a){var p=this._getCoordinates(),b=p.left,w=p.right,v=p.top,h=p.bottom,g=l>=b&&l<=w&&a>=v&&a<=h;return this._caretEl.classList.toggle(f.CONTAINER_HOVER_CLASS,g),g},f.prototype.toggleFlag=function(l){var a=this;this._caretEl.classList.toggle(f.CONTAINER_HOVER_CLASS,l)||(this._flagEl.classList.add(f.NO_DELAY_CLASS),setTimeout(function(){return a._flagEl.classList.remove(f.NO_DELAY_CLASS)},this._hideSpeedMs))},f.prototype.updateCaret=function(l,a){this._caretEl.style.top="".concat(l.top,"px"),this._caretEl.style.left="".concat(l.left,"px"),this._caretEl.style.height="".concat(l.height,"px"),this._positionFlag?this._positionFlag(this._flagEl,l,a):this._updateCaretFlag(l,a)},f.prototype.updateSelection=function(l,a){var p=this;this._clearSelection(),l=l||[],l=Array.from(l),l=this._sanitize(l),(l=this._sortByDomPosition(l)).forEach(function(b){return p._addSelection(b,a)})},f.prototype._setHoverState=function(){document.addEventListener("mousemove",this._toggleOpenedCursor)},f.prototype._toggleOpenedCursor=function(l){var a=this.toggleNearCursor(l.clientX,l.clientY);this._caretEl.classList.toggle(f.CONTAINER_NO_POINTER_CLASS,a),a||document.removeEventListener("mousemove",this._toggleOpenedCursor)},f.prototype._getCoordinates=function(){return this._caretEl.getBoundingClientRect()},f.prototype._updateCaretFlag=function(l,a){this._flagEl.style.width="";var p=this._flagEl.getBoundingClientRect();this._flagEl.classList.remove(f.FLAG_FLIPPED_CLASS),l.left>a.width-p.width&&this._flagEl.classList.add(f.FLAG_FLIPPED_CLASS),this._flagEl.style.left="".concat(l.left,"px"),this._flagEl.style.top="".concat(l.top,"px"),this._flagEl.style.width="".concat(Math.ceil(p.width),"px")},f.prototype._clearSelection=function(){this._selectionEl.innerHTML=""},f.prototype._addSelection=function(l,a){var p=this._selectionBlock(l,a);this._selectionEl.appendChild(p)},f.prototype._selectionBlock=function(l,a){var p=document.createElement(f.SELECTION_ELEMENT_TAG);return p.classList.add(f.SELECTION_BLOCK_CLASS),p.style.top="".concat(l.top-a.top,"px"),p.style.left="".concat(l.left-a.left,"px"),p.style.width="".concat(l.width,"px"),p.style.height="".concat(l.height,"px"),p.style.backgroundColor=m(this.color).setAlpha(.3).toString(),p},f.prototype._sortByDomPosition=function(l){return l.sort(function(a,p){return a.top===p.top?a.left-p.left:a.top-p.top})},f.prototype._sanitize=function(l){var a=this,p=new Set;return l.filter(function(b){if(!b.width||!b.height)return!1;var w=a._serialize(b);return!p.has(w)&&(p.add(w),!0)})},f.prototype._serialize=function(l){return["top:".concat(l.top),"right:".concat(l.right),"bottom:".concat(l.bottom),"left:".concat(l.left)].join(";")},f.CONTAINER_ELEMENT_TAG="SPAN",f.SELECTION_ELEMENT_TAG="SPAN",f.CURSOR_CLASS="ql-cursor",f.SELECTION_CLASS="ql-cursor-selections",f.SELECTION_BLOCK_CLASS="ql-cursor-selection-block",f.CARET_CLASS="ql-cursor-caret",f.CARET_CONTAINER_CLASS="ql-cursor-caret-container",f.CONTAINER_HOVER_CLASS="hover",f.CONTAINER_NO_POINTER_CLASS="no-pointer",f.FLAG_CLASS="ql-cursor-flag",f.FLAG_FLIPPED_CLASS="flag-flipped",f.NAME_CLASS="ql-cursor-name",f.HIDDEN_CLASS="hidden",f.NO_DELAY_CLASS="no-delay",f}();u.default=y},678:function(s,u,c){var m=this&&this.__createBinding||(Object.create?function(g,d,A,S){S===void 0&&(S=A),Object.defineProperty(g,S,{enumerable:!0,get:function(){return d[A]}})}:function(g,d,A,S){S===void 0&&(S=A),g[S]=d[A]}),y=this&&this.__setModuleDefault||(Object.create?function(g,d){Object.defineProperty(g,"default",{enumerable:!0,value:d})}:function(g,d){g.default=d}),f=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var d={};if(g!=null)for(var A in g)A!=="default"&&Object.prototype.hasOwnProperty.call(g,A)&&m(d,g,A);return y(d,g),d},l=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(u,"__esModule",{value:!0});var a=l(c(353)),p=f(c(165)),b=l(c(338)),w=l(c(33)),v=c(895),h=function(){function g(d,A){A===void 0&&(A={}),this._cursors={},this._isObserving=!1,this._handleCursorTouch=this._handleCursorTouch.bind(this),this.quill=d,this.options=this._setDefaults(A),this._container=this.quill.addContainer(this.options.containerClass),this._boundsContainer=this.options.boundsContainer||this.quill.container,this._currentSelection=this.quill.getSelection(),this._registerSelectionChangeListeners(),this._registerTextChangeListener(),this._registerDomListeners()}return g.prototype.createCursor=function(d,A,S){var E=this._cursors[d];if(!E){E=new a.default(d,A,S),this._cursors[d]=E;var O=E.build(this.options);this._container.appendChild(O)}return E},g.prototype.moveCursor=function(d,A){var S=this._cursors[d];S&&(S.range=A,this._updateCursor(S))},g.prototype.removeCursor=function(d){var A=this._cursors[d];A&&(A.remove(),delete this._cursors[d])},g.prototype.update=function(){var d=this;this.cursors().forEach(function(A){return d._updateCursor(A)})},g.prototype.clearCursors=function(){var d=this;this.cursors().forEach(function(A){return d.removeCursor(A.id)})},g.prototype.toggleFlag=function(d,A){var S=this._cursors[d];S&&S.toggleFlag(A)},g.prototype.cursors=function(){var d=this;return Object.keys(this._cursors).map(function(A){return d._cursors[A]})},g.prototype._registerSelectionChangeListeners=function(){var d=this;this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(A){d._currentSelection=A})},g.prototype._registerTextChangeListener=function(){var d=this;this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(A){return d._handleTextChange(A)})},g.prototype._registerDomListeners=function(){var d=this,A=this.quill.container.getElementsByClassName("ql-editor")[0];A.addEventListener("scroll",function(){return d.update()}),A.addEventListener("touchstart",this._handleCursorTouch)},g.prototype._handleCursorTouch=function(d){var A=this;this.cursors().forEach(function(S){S.toggleNearCursor(d.pageX,d.pageY),setTimeout(function(){return S.toggleFlag(!1)},A.options.hideDelayMs)})},g.prototype._registerResizeObserver=function(){var d=this;if(!this._isObserving){var A=this.quill.container.getElementsByClassName("ql-editor")[0],S=new w.default(function(E){E[0].target.isConnected||(S.disconnect(),d._isObserving=!1),d.update()});S.observe(A),this._isObserving=!0}},g.prototype._updateCursor=function(d){if(this._registerResizeObserver(),!d.range)return d.hide();var A=this._indexWithinQuillBounds(d.range.index),S=this._indexWithinQuillBounds(d.range.index+d.range.length),E=this.quill.getLeaf(A),O=this.quill.getLeaf(S);if(!this._leafIsValid(E)||!this._leafIsValid(O))return d.hide();d.show();var _=this._boundsContainer.getBoundingClientRect(),k=this.quill.getBounds(S);d.updateCaret(k,_);var x=this._lineRanges(d,E,O).reduce(function(I,N){return I.concat(Array.from(p.getClientRects(N)))},[]);d.updateSelection(x,_)},g.prototype._indexWithinQuillBounds=function(d){var A=this.quill.getLength(),S=A?A-1:0;return d=Math.max(d,0),Math.min(d,S)},g.prototype._leafIsValid=function(d){return d&&d[0]&&d[0].domNode&&d[1]>=0},g.prototype._handleTextChange=function(d){var A=this;window.setTimeout(function(){A.options.transformOnTextChange&&A._transformCursors(d),A.options.selectionChangeSource&&(A._emitSelection(),A.update())})},g.prototype._emitSelection=function(){this.quill.emitter.emit(this.quill.constructor.events.SELECTION_CHANGE,this.quill.getSelection(),this._currentSelection,this.options.selectionChangeSource)},g.prototype._setDefaults=function(d){return(d=Object.assign({},d)).template||(d.template=g.DEFAULTS.template),d.containerClass||(d.containerClass=g.DEFAULTS.containerClass),d.selectionChangeSource!==null&&(d.selectionChangeSource||(d.selectionChangeSource=g.DEFAULTS.selectionChangeSource)),d.hideDelayMs=Number.isInteger(d.hideDelayMs)?d.hideDelayMs:g.DEFAULTS.hideDelayMs,d.hideSpeedMs=Number.isInteger(d.hideSpeedMs)?d.hideSpeedMs:g.DEFAULTS.hideSpeedMs,d.transformOnTextChange=!!d.transformOnTextChange,d},g.prototype._lineRanges=function(d,A,S){var E=this.quill.getLines(d.range);return E.reduce(function(O,_,k){if(!_.children){var x=document.createRange();return x.selectNode(_.domNode),O.concat(x)}var I=k===0?A:_.path(0).pop(),N=I[0],P=I[1],R=k===E.length-1?S:_.path(_.length()-1).pop(),q=R[0],J=R[1],ee=document.createRange();return N.domNode.nodeType===Node.TEXT_NODE?ee.setStart(N.domNode,P):ee.setStartBefore(N.domNode),q.domNode.nodeType===Node.TEXT_NODE?ee.setEnd(q.domNode,J):ee.setEndAfter(q.domNode),O.concat(ee)},[])},g.prototype._transformCursors=function(d){var A=this;d=new v(d),this.cursors().filter(function(S){return S.range}).forEach(function(S){S.range.index=d.transformPosition(S.range.index),A._updateCursor(S)})},g.DEFAULTS={template:b.default,containerClass:"ql-cursors",selectionChangeSource:"api",hideDelayMs:3e3,hideSpeedMs:400},g}();u.default=h},338:function(s,u,c){var m=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(u,"__esModule",{value:!0});var y=m(c(353)),f=`
  <span class="`.concat(y.default.SELECTION_CLASS,`"></span>
  <span class="`).concat(y.default.CARET_CONTAINER_CLASS,`">
    <span class="`).concat(y.default.CARET_CLASS,`"></span>
  </span>
  <div class="`).concat(y.default.FLAG_CLASS,`">
    <small class="`).concat(y.default.NAME_CLASS,`"></small>
  </div>
`);u.default=f}},n={};function r(s){var u=n[s];if(u!==void 0)return u.exports;var c=n[s]={id:s,loaded:!1,exports:{}};return e[s].call(c.exports,c,c.exports,r),c.loaded=!0,c.exports}r.n=s=>{var u=s&&s.__esModule?()=>s.default:()=>s;return r.d(u,{a:u}),u},r.d=(s,u)=>{for(var c in u)r.o(u,c)&&!r.o(s,c)&&Object.defineProperty(s,c,{enumerable:!0,get:u[c]})},r.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),r.o=(s,u)=>Object.prototype.hasOwnProperty.call(s,u),r.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.nmd=s=>(s.paths=[],s.children||(s.children=[]),s),r.nc=void 0;var o=r(607);return o.default})())})(Vu);var Qh=Vu.exports;const ed=$u(Qh);var Le=function(i,t,e){if(!t.has(i))throw new TypeError("attempted to set private field on non-instance");return t.set(i,e),e},Te=function(i,t){if(!t.has(i))throw new TypeError("attempted to get private field on non-instance");return t.get(i)},ai,Ai,on,ji,lo,wn,An,Tn,Sn,En,xn,kn,On,Ti,Ui,li,es,ui;const td=function(i){var t=131,e=137,n=0;i+="x";var r=Math.floor(9007199254740991/e);for(let o=0;o<i.length;o++)n>r&&(n=Math.floor(n/e)),n=n*t+i.charCodeAt(o);return n},Se="0123456789abcdef".split(""),nd=[-2147483648,8388608,32768,128],rn=[24,16,8,0],Ko=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],gt=[];class rd{constructor(t=!1,e=!1){ai.set(this,void 0),Ai.set(this,void 0),on.set(this,void 0),ji.set(this,void 0),lo.set(this,void 0),wn.set(this,void 0),An.set(this,void 0),Tn.set(this,void 0),Sn.set(this,void 0),En.set(this,void 0),xn.set(this,void 0),kn.set(this,void 0),On.set(this,void 0),Ti.set(this,void 0),Ui.set(this,void 0),li.set(this,void 0),es.set(this,0),ui.set(this,void 0),this.init(t,e)}init(t,e){e?(gt[0]=gt[16]=gt[1]=gt[2]=gt[3]=gt[4]=gt[5]=gt[6]=gt[7]=gt[8]=gt[9]=gt[10]=gt[11]=gt[12]=gt[13]=gt[14]=gt[15]=0,Le(this,Ai,gt)):Le(this,Ai,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),t?(Le(this,wn,3238371032),Le(this,An,914150663),Le(this,Tn,812702999),Le(this,Sn,4144912697),Le(this,En,4290775857),Le(this,xn,1750603025),Le(this,kn,1694076839),Le(this,On,3204075428)):(Le(this,wn,1779033703),Le(this,An,3144134277),Le(this,Tn,1013904242),Le(this,Sn,2773480762),Le(this,En,1359893119),Le(this,xn,2600822924),Le(this,kn,528734635),Le(this,On,1541459225)),Le(this,ai,Le(this,ui,Le(this,on,Le(this,Ui,0)))),Le(this,ji,Le(this,Ti,!1)),Le(this,lo,!0),Le(this,li,t)}update(t){if(Te(this,ji))return this;let e;t instanceof ArrayBuffer?e=new Uint8Array(t):e=t;let n=0;const r=e.length,o=Te(this,Ai);for(;n<r;){let s;if(Te(this,Ti)&&(Le(this,Ti,!1),o[0]=Te(this,ai),o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),typeof e!="string")for(s=Te(this,ui);n<r&&s<64;++n)o[s>>2]|=e[n]<<rn[s++&3];else for(s=Te(this,ui);n<r&&s<64;++n){let u=e.charCodeAt(n);u<128?o[s>>2]|=u<<rn[s++&3]:u<2048?(o[s>>2]|=(192|u>>6)<<rn[s++&3],o[s>>2]|=(128|u&63)<<rn[s++&3]):u<55296||u>=57344?(o[s>>2]|=(224|u>>12)<<rn[s++&3],o[s>>2]|=(128|u>>6&63)<<rn[s++&3],o[s>>2]|=(128|u&63)<<rn[s++&3]):(u=65536+((u&1023)<<10|e.charCodeAt(++n)&1023),o[s>>2]|=(240|u>>18)<<rn[s++&3],o[s>>2]|=(128|u>>12&63)<<rn[s++&3],o[s>>2]|=(128|u>>6&63)<<rn[s++&3],o[s>>2]|=(128|u&63)<<rn[s++&3])}Le(this,es,s),Le(this,on,Te(this,on)+(s-Te(this,ui))),s>=64?(Le(this,ai,o[16]),Le(this,ui,s-64),this.hash(),Le(this,Ti,!0)):Le(this,ui,s)}return Te(this,on)>4294967295&&(Le(this,Ui,Te(this,Ui)+(Te(this,on)/4294967296<<0)),Le(this,on,Te(this,on)%4294967296)),this}finalize(){if(Te(this,ji))return;Le(this,ji,!0);const t=Te(this,Ai),e=Te(this,es);t[16]=Te(this,ai),t[e>>2]|=nd[e&3],Le(this,ai,t[16]),e>=56&&(Te(this,Ti)||this.hash(),t[0]=Te(this,ai),t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=Te(this,Ui)<<3|Te(this,on)>>>29,t[15]=Te(this,on)<<3,this.hash()}hash(){let t=Te(this,wn),e=Te(this,An),n=Te(this,Tn),r=Te(this,Sn),o=Te(this,En),s=Te(this,xn),u=Te(this,kn),c=Te(this,On);const m=Te(this,Ai);let y,f,l,a,p,b,w,v,h,g;for(let d=16;d<64;++d)a=m[d-15],y=(a>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,a=m[d-2],f=(a>>>17|a<<15)^(a>>>19|a<<13)^a>>>10,m[d]=m[d-16]+y+m[d-7]+f<<0;g=e&n;for(let d=0;d<64;d+=4)Te(this,lo)?(Te(this,li)?(w=300032,a=m[0]-1413257819,c=a-150054599<<0,r=a+24177077<<0):(w=704751109,a=m[0]-210244248,c=a-1521486534<<0,r=a+143694565<<0),Le(this,lo,!1)):(y=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),f=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),w=t&e,l=w^t&n^g,b=o&s^~o&u,a=c+f+b+Ko[d]+m[d],p=y+l,c=r+a<<0,r=a+p<<0),y=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),f=(c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7),v=r&t,l=v^r&e^w,b=c&o^~c&s,a=u+f+b+Ko[d+1]+m[d+1],p=y+l,u=n+a<<0,n=a+p<<0,y=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),f=(u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7),h=n&r,l=h^n&t^v,b=u&c^~u&o,a=s+f+b+Ko[d+2]+m[d+2],p=y+l,s=e+a<<0,e=a+p<<0,y=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),f=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),g=e&n,l=g^e&r^h,b=s&u^~s&c,a=o+f+b+Ko[d+3]+m[d+3],p=y+l,o=t+a<<0,t=a+p<<0;Le(this,wn,Te(this,wn)+t<<0),Le(this,An,Te(this,An)+e<<0),Le(this,Tn,Te(this,Tn)+n<<0),Le(this,Sn,Te(this,Sn)+r<<0),Le(this,En,Te(this,En)+o<<0),Le(this,xn,Te(this,xn)+s<<0),Le(this,kn,Te(this,kn)+u<<0),Le(this,On,Te(this,On)+c<<0)}hex(){this.finalize();const t=Te(this,wn),e=Te(this,An),n=Te(this,Tn),r=Te(this,Sn),o=Te(this,En),s=Te(this,xn),u=Te(this,kn),c=Te(this,On);let m=Se[t>>28&15]+Se[t>>24&15]+Se[t>>20&15]+Se[t>>16&15]+Se[t>>12&15]+Se[t>>8&15]+Se[t>>4&15]+Se[t&15]+Se[e>>28&15]+Se[e>>24&15]+Se[e>>20&15]+Se[e>>16&15]+Se[e>>12&15]+Se[e>>8&15]+Se[e>>4&15]+Se[e&15]+Se[n>>28&15]+Se[n>>24&15]+Se[n>>20&15]+Se[n>>16&15]+Se[n>>12&15]+Se[n>>8&15]+Se[n>>4&15]+Se[n&15]+Se[r>>28&15]+Se[r>>24&15]+Se[r>>20&15]+Se[r>>16&15]+Se[r>>12&15]+Se[r>>8&15]+Se[r>>4&15]+Se[r&15]+Se[o>>28&15]+Se[o>>24&15]+Se[o>>20&15]+Se[o>>16&15]+Se[o>>12&15]+Se[o>>8&15]+Se[o>>4&15]+Se[o&15]+Se[s>>28&15]+Se[s>>24&15]+Se[s>>20&15]+Se[s>>16&15]+Se[s>>12&15]+Se[s>>8&15]+Se[s>>4&15]+Se[s&15]+Se[u>>28&15]+Se[u>>24&15]+Se[u>>20&15]+Se[u>>16&15]+Se[u>>12&15]+Se[u>>8&15]+Se[u>>4&15]+Se[u&15];return Te(this,li)||(m+=Se[c>>28&15]+Se[c>>24&15]+Se[c>>20&15]+Se[c>>16&15]+Se[c>>12&15]+Se[c>>8&15]+Se[c>>4&15]+Se[c&15]),m}toString(){return this.hex()}digest(){this.finalize();const t=Te(this,wn),e=Te(this,An),n=Te(this,Tn),r=Te(this,Sn),o=Te(this,En),s=Te(this,xn),u=Te(this,kn),c=Te(this,On),m=[t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24&255,n>>16&255,n>>8&255,n&255,r>>24&255,r>>16&255,r>>8&255,r&255,o>>24&255,o>>16&255,o>>8&255,o&255,s>>24&255,s>>16&255,s>>8&255,s&255,u>>24&255,u>>16&255,u>>8&255,u&255];return Te(this,li)||m.push(c>>24&255,c>>16&255,c>>8&255,c&255),m}array(){return this.digest()}arrayBuffer(){this.finalize();const t=new ArrayBuffer(Te(this,li)?28:32),e=new DataView(t);return e.setUint32(0,Te(this,wn)),e.setUint32(4,Te(this,An)),e.setUint32(8,Te(this,Tn)),e.setUint32(12,Te(this,Sn)),e.setUint32(16,Te(this,En)),e.setUint32(20,Te(this,xn)),e.setUint32(24,Te(this,kn)),Te(this,li)||e.setUint32(28,Te(this,On)),t}}ai=new WeakMap,Ai=new WeakMap,on=new WeakMap,ji=new WeakMap,lo=new WeakMap,wn=new WeakMap,An=new WeakMap,Tn=new WeakMap,Sn=new WeakMap,En=new WeakMap,xn=new WeakMap,kn=new WeakMap,On=new WeakMap,Ti=new WeakMap,Ui=new WeakMap,li=new WeakMap,es=new WeakMap,ui=new WeakMap;function id(i){const t=new rd;return t.update(i),parseInt(t.hex().substring(0,8),16)}const od=function(i){var t="#";return i.forEach(function(e){e<16&&(t+=0),t+=e.toString(16)}),t},sd=function(i,t,e){i/=360;var n=e<.5?e*(1+t):e+t-e*t,r=2*e-n;return[i+1/3,i,i-1/3].map(function(o){return o<0&&o++,o>1&&o--,o<1/6?o=r+(n-r)*6*o:o<.5?o=n:o<2/3?o=r+(n-r)*6*(2/3-o):o=r,Math.round(o*255)})};class ad{constructor(t={}){const[e,n]=[t.lightness,t.saturation].map(function(r){return r=r!==void 0?r:[.35,.5,.65],Array.isArray(r)?r.concat():[r]});this.L=e,this.S=n,typeof t.hue=="number"&&(t.hue={min:t.hue,max:t.hue}),typeof t.hue=="object"&&!Array.isArray(t.hue)&&(t.hue=[t.hue]),typeof t.hue>"u"&&(t.hue=[]),this.hueRanges=t.hue.map(function(r){return{min:typeof r.min>"u"?0:r.min,max:typeof r.max>"u"?360:r.max}}),this.hash=id,typeof t.hash=="function"&&(this.hash=t.hash),t.hash==="bkdr"&&(this.hash=td)}hsl(t){var e,n,r,o=this.hash(t),s=727;if(this.hueRanges.length){const u=this.hueRanges[o%this.hueRanges.length];e=o/this.hueRanges.length%s*(u.max-u.min)/s+u.min}else e=o%359;return o=Math.ceil(o/360),n=this.S[o%this.S.length],o=Math.ceil(o/this.S.length),r=this.L[o%this.L.length],[e,n,r]}rgb(t){var e=this.hsl(t);return sd.apply(this,e)}hex(t){var e=this.rgb(t);return od(e)}}const Si={isOnline:!1,showOffline:i=>{Si.isOnline=!1,i.innerHTML='<span class="red"> </span>'},showOnline:i=>{Si.isOnline=!0,i.innerHTML='<span class="green"> </span>'},statusListener:i=>t=>{Si.isOnline&&t.value==xo.Disconnected?Si.showOffline(i):!Si.isOnline&&t.value==xo.Connected&&Si.showOnline(i)}};function ld(i,t,e){const n=[];for(const{clientID:r,presence:o}of t)n.push(e===r?`<b>${o.username}</b>`:o.username);i.innerHTML=JSON.stringify(n)}function Pl(i,t,e){i.innerText=e.toJSON(),t.innerText=e.getRoot().content.toTestString()}const ud=document.getElementById("peers"),Cl=document.getElementById("document"),Ll=document.getElementById("document-text"),cd=document.getElementById("network-status"),fd=new ad,hd=`vanilla-quill-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`;function Vs(i){const{embed:t,...e}=i.attributes??{};return t?{insert:t,attributes:e}:{insert:i.content||"",attributes:i.attributes}}async function dd(){const i=new zs.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"});await i.activate();const t=new zs.Document(hd,{enableDevtools:!0});t.subscribe("connection",c=>{Si.statusListener(cd)(c)}),t.subscribe("presence",c=>{c.type!==ft.PresenceChanged&&ld(ud,t.getPresences(),i.getID())}),await i.attach(t,{initialPresence:{username:i.getID().slice(-2),color:fd.hex(i.getID().slice(-2)),selection:void 0}}),t.update(c=>{c.content||(c.content=new zs.Text,c.content.edit(0,0,`
`))},"create content if not exists"),t.subscribe(c=>{c.type==="snapshot"&&u(),Pl(Cl,Ll,t)}),t.subscribe("$.content",c=>{c.type==="remote-change"&&s(c.value.operations),n()}),t.subscribe("others",c=>{c.type===ft.Unwatched?o.removeCursor(c.value.clientID):c.type===ft.PresenceChanged&&e(c.value)});function e(c){const{clientID:m,presence:y}=c;if(m===i.getID()||!y)return;const{username:f,color:l,selection:a}=y;if(!a)return;const p=t.getRoot().content.posRangeToIndexRange(a);o.createCursor(m,f,l),o.moveCursor(m,{index:p[0],length:p[1]-p[0]})}function n(){for(const c of t.getPresences())e(c)}await i.sync(),_l.register("modules/cursors",ed);const r=new _l("#editor",{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["image","video"],["clean"]],cursors:!0},theme:"snow"}),o=r.getModule("cursors");r.on("text-change",(c,m,y)=>{if(y==="api"||!c.ops)return;let f=0,l=0;console.log(`%c quill: ${JSON.stringify(c.ops)}`,"color: green");for(const a of c.ops)a.attributes!==void 0||a.insert!==void 0?(a.retain!==void 0&&(l=f+a.retain),console.log(`%c local: ${f}-${l}: ${a.insert} ${a.attributes?JSON.stringify(a.attributes):"{}"}`,"color: green"),t.update((p,b)=>{let w;a.attributes!==void 0&&a.insert===void 0?p.content.setStyle(f,l,a.attributes):a.insert!==void 0&&(l<f&&(l=f),typeof a.insert=="object"?w=p.content.edit(f,l," ",{embed:JSON.stringify(a.insert),...a.attributes}):w=p.content.edit(f,l,a.insert,a.attributes),f=l+a.insert.length),w&&b.set({selection:p.content.indexRangeToPosRange(w)})},`update style by ${i.getID()}`)):a.delete!==void 0?(l=f+a.delete,console.log(`%c local: ${f}-${l}: ''`,"color: green"),t.update((p,b)=>{const w=p.content.edit(f,l,"");w&&b.set({selection:p.content.indexRangeToPosRange(w)})},`update content by ${i.getID()}`)):a.retain!==void 0&&(f=l+a.retain,l=f)}).on("selection-change",(c,m,y)=>{if(c){if(y==="api"){const{selection:f}=t.getMyPresence();if(f){const[l,a]=t.getRoot().content.posRangeToIndexRange(f),{index:p,length:b}=c;if(l===p&&a===p+b)return}}t.update((f,l)=>{l.set({selection:f.content.indexRangeToPosRange([c.index,c.index+c.length])})},`update selection by ${i.getID()}`)}});function s(c){const m=[];let y=0;for(const f of c)if(f.type==="edit"){const l=f.from,a=f.to,p=l-y,b=a-l,{insert:w,attributes:v}=Vs(f.value);if(console.log(`%c remote: ${l}-${a}: ${w}`,"color: skyblue"),p&&m.push({retain:p}),b&&m.push({delete:b}),w){const h={insert:w};v&&(h.attributes=v),m.push(h)}y=a}else if(f.type==="style"){const l=f.from,a=f.to,p=l-y,b=a-l,{attributes:w}=Vs(f.value);if(console.log(`%c remote: ${l}-${a}: ${JSON.stringify(w)}`,"color: skyblue"),p&&m.push({retain:p}),w){const v={attributes:w};b&&(v.retain=b),m.push(v)}y=a}if(m.length){console.log(`%c to quill: ${JSON.stringify(m)}`,"color: green");const f={ops:m};r.updateContents(f,"api")}}function u(){const m={ops:t.getRoot().content.values().map(y=>Vs(y))};r.setContents(m,"api")}u(),n(),Pl(Cl,Ll,t)}dd();
