var il=Object.defineProperty;var ol=(i,e,t)=>e in i?il(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var J=(i,e,t)=>ol(i,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();var Ke;(function(i){i[i.Canceled=1]="Canceled",i[i.Unknown=2]="Unknown",i[i.InvalidArgument=3]="InvalidArgument",i[i.DeadlineExceeded=4]="DeadlineExceeded",i[i.NotFound=5]="NotFound",i[i.AlreadyExists=6]="AlreadyExists",i[i.PermissionDenied=7]="PermissionDenied",i[i.ResourceExhausted=8]="ResourceExhausted",i[i.FailedPrecondition=9]="FailedPrecondition",i[i.Aborted=10]="Aborted",i[i.OutOfRange=11]="OutOfRange",i[i.Unimplemented=12]="Unimplemented",i[i.Internal=13]="Internal",i[i.Unavailable=14]="Unavailable",i[i.DataLoss=15]="DataLoss",i[i.Unauthenticated=16]="Unauthenticated"})(Ke||(Ke={}));function qo(i){const e=Ke[i];return typeof e!="string"?i.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class ot extends Error{constructor(e,t=Ke.Unknown,n,r,o){super(sl(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(n??{}),this.details=r??[],this.cause=o}static from(e,t=Ke.Unknown){return e instanceof ot?e:e instanceof Error?e.name=="AbortError"?new ot(e.message,Ke.Canceled):new ot(e.message,t,void 0,void 0,e):new ot(String(e),t,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===ot.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const t="typeName"in e?{findMessage:r=>r===e.typeName?e:void 0}:e,n=[];for(const r of this.details){if("getType"in r){t.findMessage(r.getType().typeName)&&n.push(r);continue}const o=t.findMessage(r.type);if(o)try{n.push(o.fromBinary(r.value))}catch{}}return n}}function sl(i,e){return i.length?`[${qo(e)}] ${i}`:`[${qo(e)}]`}function et(i,e){if(!i)throw new Error(e)}const al=34028234663852886e22,ll=-34028234663852886e22,ul=4294967295,cl=2147483647,fl=-2147483648;function Si(i){if(typeof i!="number")throw new Error("invalid int 32: "+typeof i);if(!Number.isInteger(i)||i>cl||i<fl)throw new Error("invalid int 32: "+i)}function co(i){if(typeof i!="number")throw new Error("invalid uint 32: "+typeof i);if(!Number.isInteger(i)||i>ul||i<0)throw new Error("invalid uint 32: "+i)}function xs(i){if(typeof i!="number")throw new Error("invalid float 32: "+typeof i);if(Number.isFinite(i)&&(i>al||i<ll))throw new Error("invalid float 32: "+i)}const Ns=Symbol("@bufbuild/protobuf/enum-type");function hl(i){const e=i[Ns];return et(e,"missing enum type on enum object"),e}function Is(i,e,t,n){i[Ns]=Ps(e,t.map(r=>({no:r.no,name:r.name,localName:i[r.no]})))}function Ps(i,e,t){const n=Object.create(null),r=Object.create(null),o=[];for(const s of e){const u=Cs(s);o.push(u),n[s.name]=u,r[s.no]=u}return{typeName:i,values:o,findName(s){return n[s]},findNumber(s){return r[s]}}}function dl(i,e,t){const n={};for(const r of e){const o=Cs(r);n[o.localName]=o.no,n[o.no]=o.localName}return Is(n,i,e),n}function Cs(i){return"localName"in i?i:Object.assign(Object.assign({},i),{localName:i.name})}class yt{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const n=this.getType(),r=n.runtime.bin,o=r.makeReadOptions(t);return r.readMessage(this,o.readerFactory(e),e.byteLength,o),this}fromJson(e,t){const n=this.getType(),r=n.runtime.json,o=r.makeReadOptions(t);return r.readMessage(n,e,o,this),this}fromJsonString(e,t){let n;try{n=JSON.parse(e)}catch(r){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${r instanceof Error?r.message:String(r)}`)}return this.fromJson(n,t)}toBinary(e){const t=this.getType(),n=t.runtime.bin,r=n.makeWriteOptions(e),o=r.writerFactory();return n.writeMessage(this,o,r),o.finish()}toJson(e){const t=this.getType(),n=t.runtime.json,r=n.makeWriteOptions(e);return n.writeMessage(this,r)}toJsonString(e){var t;const n=this.toJson(e);return JSON.stringify(n,null,(t=e==null?void 0:e.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function gl(i,e,t,n){var r;const o=(r=n==null?void 0:n.localName)!==null&&r!==void 0?r:e.substring(e.lastIndexOf(".")+1),s={[o]:function(u){i.util.initFields(this),i.util.initPartial(u,this)}}[o];return Object.setPrototypeOf(s.prototype,new yt),Object.assign(s,{runtime:i,typeName:e,fields:i.util.newFieldList(t),fromBinary(u,f){return new s().fromBinary(u,f)},fromJson(u,f){return new s().fromJson(u,f)},fromJsonString(u,f){return new s().fromJsonString(u,f)},equals(u,f){return i.util.equals(s,u,f)}}),s}function pl(){let i=0,e=0;for(let n=0;n<28;n+=7){let r=this.buf[this.pos++];if(i|=(r&127)<<n,!(r&128))return this.assertBounds(),[i,e]}let t=this.buf[this.pos++];if(i|=(t&15)<<28,e=(t&112)>>4,!(t&128))return this.assertBounds(),[i,e];for(let n=3;n<=31;n+=7){let r=this.buf[this.pos++];if(e|=(r&127)<<n,!(r&128))return this.assertBounds(),[i,e]}throw new Error("invalid varint")}function eo(i,e,t){for(let o=0;o<28;o=o+7){const s=i>>>o,u=!(!(s>>>7)&&e==0),f=(u?s|128:s)&255;if(t.push(f),!u)return}const n=i>>>28&15|(e&7)<<4,r=!!(e>>3);if(t.push((r?n|128:n)&255),!!r){for(let o=3;o<31;o=o+7){const s=e>>>o,u=!!(s>>>7),f=(u?s|128:s)&255;if(t.push(f),!u)return}t.push(e>>>31&1)}}const ki=4294967296;function Fo(i){const e=i[0]==="-";e&&(i=i.slice(1));const t=1e6;let n=0,r=0;function o(s,u){const f=Number(i.slice(s,u));r*=t,n=n*t+f,n>=ki&&(r=r+(n/ki|0),n=n%ki)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),e?Ds(n,r):vo(n,r)}function ml(i,e){let t=vo(i,e);const n=t.hi&2147483648;n&&(t=Ds(t.lo,t.hi));const r=Rs(t.lo,t.hi);return n?"-"+r:r}function Rs(i,e){if({lo:i,hi:e}=yl(i,e),e<=2097151)return String(ki*e+i);const t=i&16777215,n=(i>>>24|e<<8)&16777215,r=e>>16&65535;let o=t+n*6777216+r*6710656,s=n+r*8147497,u=r*2;const f=1e7;return o>=f&&(s+=Math.floor(o/f),o%=f),s>=f&&(u+=Math.floor(s/f),s%=f),u.toString()+jo(s)+jo(o)}function yl(i,e){return{lo:i>>>0,hi:e>>>0}}function vo(i,e){return{lo:i|0,hi:e|0}}function Ds(i,e){return e=~e,i?i=~i+1:e+=1,vo(i,e)}const jo=i=>{const e=String(i);return"0000000".slice(e.length)+e};function Uo(i,e){if(i>=0){for(;i>127;)e.push(i&127|128),i=i>>>7;e.push(i)}else{for(let t=0;t<9;t++)e.push(i&127|128),i=i>>7;e.push(1)}}function vl(){let i=this.buf[this.pos++],e=i&127;if(!(i&128))return this.assertBounds(),e;if(i=this.buf[this.pos++],e|=(i&127)<<7,!(i&128))return this.assertBounds(),e;if(i=this.buf[this.pos++],e|=(i&127)<<14,!(i&128))return this.assertBounds(),e;if(i=this.buf[this.pos++],e|=(i&127)<<21,!(i&128))return this.assertBounds(),e;i=this.buf[this.pos++],e|=(i&15)<<28;for(let t=5;i&128&&t<10;t++)i=this.buf[this.pos++];if(i&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var $o={};function bl(){const i=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof i.getBigInt64=="function"&&typeof i.getBigUint64=="function"&&typeof i.setBigInt64=="function"&&typeof i.setBigUint64=="function"&&(typeof process!="object"||typeof $o!="object"||$o.BUF_BIGINT_DISABLE!=="1")){const r=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),s=BigInt("0"),u=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(f){const g=typeof f=="bigint"?f:BigInt(f);if(g>o||g<r)throw new Error(`int64 invalid: ${f}`);return g},uParse(f){const g=typeof f=="bigint"?f:BigInt(f);if(g>u||g<s)throw new Error(`uint64 invalid: ${f}`);return g},enc(f){return i.setBigInt64(0,this.parse(f),!0),{lo:i.getInt32(0,!0),hi:i.getInt32(4,!0)}},uEnc(f){return i.setBigInt64(0,this.uParse(f),!0),{lo:i.getInt32(0,!0),hi:i.getInt32(4,!0)}},dec(f,g){return i.setInt32(0,f,!0),i.setInt32(4,g,!0),i.getBigInt64(0,!0)},uDec(f,g){return i.setInt32(0,f,!0),i.setInt32(4,g,!0),i.getBigUint64(0,!0)}}}const t=r=>et(/^-?[0-9]+$/.test(r),`int64 invalid: ${r}`),n=r=>et(/^[0-9]+$/.test(r),`uint64 invalid: ${r}`);return{zero:"0",supported:!1,parse(r){return typeof r!="string"&&(r=r.toString()),t(r),r},uParse(r){return typeof r!="string"&&(r=r.toString()),n(r),r},enc(r){return typeof r!="string"&&(r=r.toString()),t(r),Fo(r)},uEnc(r){return typeof r!="string"&&(r=r.toString()),n(r),Fo(r)},dec(r,o){return ml(r,o)},uDec(r,o){return Rs(r,o)}}}const st=bl();var oe;(function(i){i[i.DOUBLE=1]="DOUBLE",i[i.FLOAT=2]="FLOAT",i[i.INT64=3]="INT64",i[i.UINT64=4]="UINT64",i[i.INT32=5]="INT32",i[i.FIXED64=6]="FIXED64",i[i.FIXED32=7]="FIXED32",i[i.BOOL=8]="BOOL",i[i.STRING=9]="STRING",i[i.BYTES=12]="BYTES",i[i.UINT32=13]="UINT32",i[i.SFIXED32=15]="SFIXED32",i[i.SFIXED64=16]="SFIXED64",i[i.SINT32=17]="SINT32",i[i.SINT64=18]="SINT64"})(oe||(oe={}));var Yn;(function(i){i[i.BIGINT=0]="BIGINT",i[i.STRING=1]="STRING"})(Yn||(Yn={}));function jn(i,e,t){if(e===t)return!0;if(i==oe.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}switch(i){case oe.UINT64:case oe.FIXED64:case oe.INT64:case oe.SFIXED64:case oe.SINT64:return e==t}return!1}function xr(i,e){switch(i){case oe.BOOL:return!1;case oe.UINT64:case oe.FIXED64:case oe.INT64:case oe.SFIXED64:case oe.SINT64:return e==0?st.zero:"0";case oe.DOUBLE:case oe.FLOAT:return 0;case oe.BYTES:return new Uint8Array(0);case oe.STRING:return"";default:return 0}}function Ls(i,e){switch(i){case oe.BOOL:return e===!1;case oe.STRING:return e==="";case oe.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var rt;(function(i){i[i.Varint=0]="Varint",i[i.Bit64=1]="Bit64",i[i.LengthDelimited=2]="LengthDelimited",i[i.StartGroup=3]="StartGroup",i[i.EndGroup=4]="EndGroup",i[i.Bit32=5]="Bit32"})(rt||(rt={}));class wl{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let t=new Uint8Array(e),n=0;for(let r=0;r<this.chunks.length;r++)t.set(this.chunks[r],n),n+=this.chunks[r].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(co(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Si(e),Uo(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){xs(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){co(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){Si(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return Si(e),e=(e<<1^e>>31)>>>0,Uo(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=st.enc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=st.uEnc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=st.enc(e);return eo(t.lo,t.hi,this.buf),this}sint64(e){let t=st.enc(e),n=t.hi>>31,r=t.lo<<1^n,o=(t.hi<<1|t.lo>>>31)^n;return eo(r,o,this.buf),this}uint64(e){let t=st.uEnc(e);return eo(t.lo,t.hi,this.buf),this}}class Al{constructor(e,t){this.varint64=pl,this.uint32=vl,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t??new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,n=e&7;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e,t){let n=this.pos;switch(e){case rt.Varint:for(;this.buf[this.pos++]&128;);break;case rt.Bit64:this.pos+=4;case rt.Bit32:this.pos+=4;break;case rt.LengthDelimited:let r=this.uint32();this.pos+=r;break;case rt.StartGroup:for(;;){const[o,s]=this.tag();if(s===rt.EndGroup){if(t!==void 0&&o!==t)throw new Error("invalid end group tag");break}this.skip(s,o)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return st.dec(...this.varint64())}uint64(){return st.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(e&1);return e=(e>>>1|(t&1)<<31)^n,t=t>>>1^n,st.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return st.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return st.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function Tl(i,e,t,n){let r;return{typeName:e,extendee:t,get field(){if(!r){const o=typeof n=="function"?n():n;o.name=e.split(".").pop(),o.jsonName=`[${e}]`,r=i.util.newFieldList([o]).list()[0]}return r},runtime:i}}function Ms(i){const e=i.field.localName,t=Object.create(null);return t[e]=_l(i),[t,()=>t[e]]}function _l(i){const e=i.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return xr(e.T,e.L);case"message":const t=e.T,n=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(n):n;case"map":throw"map fields are not allowed to be extensions"}}function El(i,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let t=i.length-1;t>=0;--t)if(i[t].no==e.no)return[i[t]];return[]}return i.filter(t=>t.no===e.no)}let kn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Ui=[];for(let i=0;i<kn.length;i++)Ui[kn[i].charCodeAt(0)]=i;Ui[45]=kn.indexOf("+");Ui[95]=kn.indexOf("/");const bo={dec(i){let e=i.length*3/4;i[i.length-2]=="="?e-=2:i[i.length-1]=="="&&(e-=1);let t=new Uint8Array(e),n=0,r=0,o,s=0;for(let u=0;u<i.length;u++){if(o=Ui[i.charCodeAt(u)],o===void 0)switch(i[u]){case"=":r=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:s=o,r=1;break;case 1:t[n++]=s<<2|(o&48)>>4,s=o,r=2;break;case 2:t[n++]=(s&15)<<4|(o&60)>>2,s=o,r=3;break;case 3:t[n++]=(s&3)<<6|o,r=0;break}}if(r==1)throw Error("invalid base64 string.");return t.subarray(0,n)},enc(i){let e="",t=0,n,r=0;for(let o=0;o<i.length;o++)switch(n=i[o],t){case 0:e+=kn[n>>2],r=(n&3)<<4,t=1;break;case 1:e+=kn[r|n>>4],r=(n&15)<<2,t=2;break;case 2:e+=kn[r|n>>6],e+=kn[n&63],t=0;break}return t&&(e+=kn[r],e+="=",t==1&&(e+="=")),e}};function Ol(i,e,t){qs(e,i);const n=e.runtime.bin.makeReadOptions(t),r=El(i.getType().runtime.bin.listUnknownFields(i),e.field),[o,s]=Ms(e);for(const u of r)e.runtime.bin.readField(o,n.readerFactory(u.data),e.field,u.wireType,n);return s()}function Sl(i,e,t,n){qs(e,i);const r=e.runtime.bin.makeReadOptions(n),o=e.runtime.bin.makeWriteOptions(n);if(Bs(i,e)){const g=i.getType().runtime.bin.listUnknownFields(i).filter(v=>v.no!=e.field.no);i.getType().runtime.bin.discardUnknownFields(i);for(const v of g)i.getType().runtime.bin.onUnknownField(i,v.no,v.wireType,v.data)}const s=o.writerFactory();let u=e.field;!u.opt&&!u.repeated&&(u.kind=="enum"||u.kind=="scalar")&&(u=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(u,t,s,o);const f=r.readerFactory(s.finish());for(;f.pos<f.len;){const[g,v]=f.tag(),h=f.skip(v,g);i.getType().runtime.bin.onUnknownField(i,g,v,h)}}function Bs(i,e){const t=i.getType();return e.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(i).find(n=>n.no==e.field.no)}function qs(i,e){et(i.extendee.typeName==e.getType().typeName,`extension ${i.typeName} can only be applied to message ${i.extendee.typeName}`)}function Fs(i,e){const t=i.localName;if(i.repeated)return e[t].length>0;if(i.oneof)return e[i.oneof.localName].case===t;switch(i.kind){case"enum":case"scalar":return i.opt||i.req?e[t]!==void 0:i.kind=="enum"?e[t]!==i.T.values[0].no:!Ls(i.T,e[t]);case"message":return e[t]!==void 0;case"map":return Object.keys(e[t]).length>0}}function zo(i,e){const t=i.localName,n=!i.opt&&!i.req;if(i.repeated)e[t]=[];else if(i.oneof)e[i.oneof.localName]={case:void 0};else switch(i.kind){case"map":e[t]={};break;case"enum":e[t]=n?i.T.values[0].no:void 0;break;case"scalar":e[t]=n?xr(i.T,i.L):void 0;break;case"message":e[t]=void 0;break}}function cr(i,e){if(i===null||typeof i!="object"||!Object.getOwnPropertyNames(yt.prototype).every(n=>n in i&&typeof i[n]=="function"))return!1;const t=i.getType();return t===null||typeof t!="function"||!("typeName"in t)||typeof t.typeName!="string"?!1:e===void 0?!0:t.typeName==e.typeName}function js(i,e){return cr(e)||!i.fieldWrapper?e:i.fieldWrapper.wrapField(e)}oe.DOUBLE,oe.FLOAT,oe.INT64,oe.UINT64,oe.INT32,oe.UINT32,oe.BOOL,oe.STRING,oe.BYTES;const Jo={ignoreUnknownFields:!1},Vo={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function kl(i){return i?Object.assign(Object.assign({},Jo),i):Jo}function xl(i){return i?Object.assign(Object.assign({},Vo),i):Vo}const Di=Symbol(),xi=Symbol();function Nl(){return{makeReadOptions:kl,makeWriteOptions:xl,readMessage(i,e,t,n){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${i.typeName} from JSON: ${cn(e)}`);n=n??new i;const r=new Map,o=t.typeRegistry;for(const[s,u]of Object.entries(e)){const f=i.fields.findJsonName(s);if(f){if(f.oneof){if(u===null&&f.kind=="scalar")continue;const g=r.get(f.oneof);if(g!==void 0)throw new Error(`cannot decode message ${i.typeName} from JSON: multiple keys for oneof "${f.oneof.name}" present: "${g}", "${s}"`);r.set(f.oneof,s)}Ko(n,u,f,t,i)}else{let g=!1;if(o!=null&&o.findExtension&&s.startsWith("[")&&s.endsWith("]")){const v=o.findExtension(s.substring(1,s.length-1));if(v&&v.extendee.typeName==i.typeName){g=!0;const[h,l]=Ms(v);Ko(h,u,v.field,t,v),Sl(n,v,l(),t)}}if(!g&&!t.ignoreUnknownFields)throw new Error(`cannot decode message ${i.typeName} from JSON: key "${s}" is unknown`)}}return n},writeMessage(i,e){const t=i.getType(),n={};let r;try{for(r of t.fields.byNumber()){if(!Fs(r,i)){if(r.req)throw"required field not set";if(!e.emitDefaultValues||!Pl(r))continue}const s=r.oneof?i[r.oneof.localName].value:i[r.localName],u=Ho(r,s,e);u!==void 0&&(n[e.useProtoFieldName?r.name:r.jsonName]=u)}const o=e.typeRegistry;if(o!=null&&o.findExtensionFor)for(const s of t.runtime.bin.listUnknownFields(i)){const u=o.findExtensionFor(t.typeName,s.no);if(u&&Bs(i,u)){const f=Ol(i,u,e),g=Ho(u.field,f,e);g!==void 0&&(n[u.field.jsonName]=g)}}}catch(o){const s=r?`cannot encode field ${t.typeName}.${r.name} to JSON`:`cannot encode message ${t.typeName} to JSON`,u=o instanceof Error?o.message:String(o);throw new Error(s+(u.length>0?`: ${u}`:""))}return n},readScalar(i,e,t){return zr(i,e,t??Yn.BIGINT,!0)},writeScalar(i,e,t){if(e!==void 0&&(t||Ls(i,e)))return Ni(i,e)},debug:cn}}function cn(i){if(i===null)return"null";switch(typeof i){case"object":return Array.isArray(i)?"array":"object";case"string":return i.length>100?"string":`"${i.split('"').join('\\"')}"`;default:return String(i)}}function Ko(i,e,t,n,r){let o=t.localName;if(t.repeated){if(et(t.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${r.typeName}.${t.name} from JSON: ${cn(e)}`);const s=i[o];for(const u of e){if(u===null)throw new Error(`cannot decode field ${r.typeName}.${t.name} from JSON: ${cn(u)}`);switch(t.kind){case"message":s.push(t.T.fromJson(u,n));break;case"enum":const f=to(t.T,u,n.ignoreUnknownFields,!0);f!==xi&&s.push(f);break;case"scalar":try{s.push(zr(t.T,u,t.L,!0))}catch(g){let v=`cannot decode field ${r.typeName}.${t.name} from JSON: ${cn(u)}`;throw g instanceof Error&&g.message.length>0&&(v+=`: ${g.message}`),new Error(v)}break}}}else if(t.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${r.typeName}.${t.name} from JSON: ${cn(e)}`);const s=i[o];for(const[u,f]of Object.entries(e)){if(f===null)throw new Error(`cannot decode field ${r.typeName}.${t.name} from JSON: map value null`);let g;try{g=Il(t.K,u)}catch(v){let h=`cannot decode map key for field ${r.typeName}.${t.name} from JSON: ${cn(e)}`;throw v instanceof Error&&v.message.length>0&&(h+=`: ${v.message}`),new Error(h)}switch(t.V.kind){case"message":s[g]=t.V.T.fromJson(f,n);break;case"enum":const v=to(t.V.T,f,n.ignoreUnknownFields,!0);v!==xi&&(s[g]=v);break;case"scalar":try{s[g]=zr(t.V.T,f,Yn.BIGINT,!0)}catch(h){let l=`cannot decode map value for field ${r.typeName}.${t.name} from JSON: ${cn(e)}`;throw h instanceof Error&&h.message.length>0&&(l+=`: ${h.message}`),new Error(l)}break}}}else switch(t.oneof&&(i=i[t.oneof.localName]={case:o},o="value"),t.kind){case"message":const s=t.T;if(e===null&&s.typeName!="google.protobuf.Value")return;let u=i[o];cr(u)?u.fromJson(e,n):(i[o]=u=s.fromJson(e,n),s.fieldWrapper&&!t.oneof&&(i[o]=s.fieldWrapper.unwrapField(u)));break;case"enum":const f=to(t.T,e,n.ignoreUnknownFields,!1);switch(f){case Di:zo(t,i);break;case xi:break;default:i[o]=f;break}break;case"scalar":try{const g=zr(t.T,e,t.L,!1);switch(g){case Di:zo(t,i);break;default:i[o]=g;break}}catch(g){let v=`cannot decode field ${r.typeName}.${t.name} from JSON: ${cn(e)}`;throw g instanceof Error&&g.message.length>0&&(v+=`: ${g.message}`),new Error(v)}break}}function Il(i,e){if(i===oe.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return zr(i,e,Yn.BIGINT,!0).toString()}function zr(i,e,t,n){if(e===null)return n?xr(i,t):Di;switch(i){case oe.DOUBLE:case oe.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return i==oe.FLOAT&&xs(r),r;case oe.INT32:case oe.FIXED32:case oe.SFIXED32:case oe.SINT32:case oe.UINT32:let o;if(typeof e=="number"?o=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(o=Number(e)),o===void 0)break;return i==oe.UINT32||i==oe.FIXED32?co(o):Si(o),o;case oe.INT64:case oe.SFIXED64:case oe.SINT64:if(typeof e!="number"&&typeof e!="string")break;const s=st.parse(e);return t?s.toString():s;case oe.FIXED64:case oe.UINT64:if(typeof e!="number"&&typeof e!="string")break;const u=st.uParse(e);return t?u.toString():u;case oe.BOOL:if(typeof e!="boolean")break;return e;case oe.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case oe.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return bo.dec(e)}throw new Error}function to(i,e,t,n){if(e===null)return i.typeName=="google.protobuf.NullValue"?0:n?i.values[0].no:Di;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=i.findName(e);if(r!==void 0)return r.no;if(t)return xi;break}throw new Error(`cannot decode enum ${i.typeName} from JSON: ${cn(e)}`)}function Pl(i){return i.repeated||i.kind=="map"?!0:!(i.oneof||i.kind=="message"||i.opt||i.req)}function Ho(i,e,t){if(i.kind=="map"){et(typeof e=="object"&&e!=null);const n={},r=Object.entries(e);switch(i.V.kind){case"scalar":for(const[s,u]of r)n[s.toString()]=Ni(i.V.T,u);break;case"message":for(const[s,u]of r)n[s.toString()]=u.toJson(t);break;case"enum":const o=i.V.T;for(const[s,u]of r)n[s.toString()]=no(o,u,t.enumAsInteger);break}return t.emitDefaultValues||r.length>0?n:void 0}if(i.repeated){et(Array.isArray(e));const n=[];switch(i.kind){case"scalar":for(let r=0;r<e.length;r++)n.push(Ni(i.T,e[r]));break;case"enum":for(let r=0;r<e.length;r++)n.push(no(i.T,e[r],t.enumAsInteger));break;case"message":for(let r=0;r<e.length;r++)n.push(e[r].toJson(t));break}return t.emitDefaultValues||n.length>0?n:void 0}switch(i.kind){case"scalar":return Ni(i.T,e);case"enum":return no(i.T,e,t.enumAsInteger);case"message":return js(i.T,e).toJson(t)}}function no(i,e,t){var n;if(et(typeof e=="number"),i.typeName=="google.protobuf.NullValue")return null;if(t)return e;const r=i.findNumber(e);return(n=r==null?void 0:r.name)!==null&&n!==void 0?n:e}function Ni(i,e){switch(i){case oe.INT32:case oe.SFIXED32:case oe.SINT32:case oe.FIXED32:case oe.UINT32:return et(typeof e=="number"),e;case oe.FLOAT:case oe.DOUBLE:return et(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case oe.STRING:return et(typeof e=="string"),e;case oe.BOOL:return et(typeof e=="boolean"),e;case oe.UINT64:case oe.FIXED64:case oe.INT64:case oe.SFIXED64:case oe.SINT64:return et(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case oe.BYTES:return et(e instanceof Uint8Array),bo.enc(e)}}const vr=Symbol("@bufbuild/protobuf/unknown-fields"),Wo={readUnknownFields:!0,readerFactory:i=>new Al(i)},Go={writeUnknownFields:!0,writerFactory:()=>new wl};function Cl(i){return i?Object.assign(Object.assign({},Wo),i):Wo}function Rl(i){return i?Object.assign(Object.assign({},Go),i):Go}function Dl(){return{makeReadOptions:Cl,makeWriteOptions:Rl,listUnknownFields(i){var e;return(e=i[vr])!==null&&e!==void 0?e:[]},discardUnknownFields(i){delete i[vr]},writeUnknownFields(i,e){const n=i[vr];if(n)for(const r of n)e.tag(r.no,r.wireType).raw(r.data)},onUnknownField(i,e,t,n){const r=i;Array.isArray(r[vr])||(r[vr]=[]),r[vr].push({no:e,wireType:t,data:n})},readMessage(i,e,t,n,r){const o=i.getType(),s=r?e.len:e.pos+t;let u,f;for(;e.pos<s&&([u,f]=e.tag(),!(r===!0&&f==rt.EndGroup));){const g=o.fields.find(u);if(!g){const v=e.skip(f,u);n.readUnknownFields&&this.onUnknownField(i,u,f,v);continue}Yo(i,e,g,f,n)}if(r&&(f!=rt.EndGroup||u!==t))throw new Error("invalid end group tag")},readField:Yo,writeMessage(i,e,t){const n=i.getType();for(const r of n.fields.byNumber()){if(!Fs(r,i)){if(r.req)throw new Error(`cannot encode field ${n.typeName}.${r.name} to binary: required field not set`);continue}const o=r.oneof?i[r.oneof.localName].value:i[r.localName];Zo(r,o,e,t)}return t.writeUnknownFields&&this.writeUnknownFields(i,e),e},writeField(i,e,t,n){e!==void 0&&Zo(i,e,t,n)}}}function Yo(i,e,t,n,r){let{repeated:o,localName:s}=t;switch(t.oneof&&(i=i[t.oneof.localName],i.case!=s&&delete i.value,i.case=s,s="value"),t.kind){case"scalar":case"enum":const u=t.kind=="enum"?oe.INT32:t.T;let f=Li;if(t.kind=="scalar"&&t.L>0&&(f=Ml),o){let l=i[s];if(n==rt.LengthDelimited&&u!=oe.STRING&&u!=oe.BYTES){let y=e.uint32()+e.pos;for(;e.pos<y;)l.push(f(e,u))}else l.push(f(e,u))}else i[s]=f(e,u);break;case"message":const g=t.T;o?i[s].push(Ii(e,new g,r,t)):cr(i[s])?Ii(e,i[s],r,t):(i[s]=Ii(e,new g,r,t),g.fieldWrapper&&!t.oneof&&!t.repeated&&(i[s]=g.fieldWrapper.unwrapField(i[s])));break;case"map":let[v,h]=Ll(t,e,r);i[s][v]=h;break}}function Ii(i,e,t,n){const r=e.getType().runtime.bin,o=n==null?void 0:n.delimited;return r.readMessage(e,i,o?n.no:i.uint32(),t,o),e}function Ll(i,e,t){const n=e.uint32(),r=e.pos+n;let o,s;for(;e.pos<r;){const[u]=e.tag();switch(u){case 1:o=Li(e,i.K);break;case 2:switch(i.V.kind){case"scalar":s=Li(e,i.V.T);break;case"enum":s=e.int32();break;case"message":s=Ii(e,new i.V.T,t,void 0);break}break}}if(o===void 0&&(o=xr(i.K,Yn.BIGINT)),typeof o!="string"&&typeof o!="number"&&(o=o.toString()),s===void 0)switch(i.V.kind){case"scalar":s=xr(i.V.T,Yn.BIGINT);break;case"enum":s=i.V.T.values[0].no;break;case"message":s=new i.V.T;break}return[o,s]}function Ml(i,e){const t=Li(i,e);return typeof t=="bigint"?t.toString():t}function Li(i,e){switch(e){case oe.STRING:return i.string();case oe.BOOL:return i.bool();case oe.DOUBLE:return i.double();case oe.FLOAT:return i.float();case oe.INT32:return i.int32();case oe.INT64:return i.int64();case oe.UINT64:return i.uint64();case oe.FIXED64:return i.fixed64();case oe.BYTES:return i.bytes();case oe.FIXED32:return i.fixed32();case oe.SFIXED32:return i.sfixed32();case oe.SFIXED64:return i.sfixed64();case oe.SINT64:return i.sint64();case oe.UINT32:return i.uint32();case oe.SINT32:return i.sint32()}}function Zo(i,e,t,n){et(e!==void 0);const r=i.repeated;switch(i.kind){case"scalar":case"enum":let o=i.kind=="enum"?oe.INT32:i.T;if(r)if(et(Array.isArray(e)),i.packed)ql(t,o,i.no,e);else for(const s of e)Jr(t,o,i.no,s);else Jr(t,o,i.no,e);break;case"message":if(r){et(Array.isArray(e));for(const s of e)Xo(t,n,i,s)}else Xo(t,n,i,e);break;case"map":et(typeof e=="object"&&e!=null);for(const[s,u]of Object.entries(e))Bl(t,n,i,s,u);break}}function Bl(i,e,t,n,r){i.tag(t.no,rt.LengthDelimited),i.fork();let o=n;switch(t.K){case oe.INT32:case oe.FIXED32:case oe.UINT32:case oe.SFIXED32:case oe.SINT32:o=Number.parseInt(n);break;case oe.BOOL:et(n=="true"||n=="false"),o=n=="true";break}switch(Jr(i,t.K,1,o),t.V.kind){case"scalar":Jr(i,t.V.T,2,r);break;case"enum":Jr(i,oe.INT32,2,r);break;case"message":et(r!==void 0),i.tag(2,rt.LengthDelimited).bytes(r.toBinary(e));break}i.join()}function Xo(i,e,t,n){const r=js(t.T,n);t.delimited?i.tag(t.no,rt.StartGroup).raw(r.toBinary(e)).tag(t.no,rt.EndGroup):i.tag(t.no,rt.LengthDelimited).bytes(r.toBinary(e))}function Jr(i,e,t,n){et(n!==void 0);let[r,o]=Us(e);i.tag(t,r)[o](n)}function ql(i,e,t,n){if(!n.length)return;i.tag(t,rt.LengthDelimited).fork();let[,r]=Us(e);for(let o=0;o<n.length;o++)i[r](n[o]);i.join()}function Us(i){let e=rt.Varint;switch(i){case oe.BYTES:case oe.STRING:e=rt.LengthDelimited;break;case oe.DOUBLE:case oe.FIXED64:case oe.SFIXED64:e=rt.Bit64;break;case oe.FIXED32:case oe.SFIXED32:case oe.FLOAT:e=rt.Bit32;break}const t=oe[i].toLowerCase();return[e,t]}function Fl(){return{setEnumType:Is,initPartial(i,e){if(i===void 0)return;const t=e.getType();for(const n of t.fields.byMember()){const r=n.localName,o=e,s=i;if(s[r]!=null)switch(n.kind){case"oneof":const u=s[r].case;if(u===void 0)continue;const f=n.findField(u);let g=s[r].value;f&&f.kind=="message"&&!cr(g,f.T)?g=new f.T(g):f&&f.kind==="scalar"&&f.T===oe.BYTES&&(g=jr(g)),o[r]={case:u,value:g};break;case"scalar":case"enum":let v=s[r];n.T===oe.BYTES&&(v=n.repeated?v.map(jr):jr(v)),o[r]=v;break;case"map":switch(n.V.kind){case"scalar":case"enum":if(n.V.T===oe.BYTES)for(const[a,y]of Object.entries(s[r]))o[r][a]=jr(y);else Object.assign(o[r],s[r]);break;case"message":const l=n.V.T;for(const a of Object.keys(s[r])){let y=s[r][a];l.fieldWrapper||(y=new l(y)),o[r][a]=y}break}break;case"message":const h=n.T;if(n.repeated)o[r]=s[r].map(l=>cr(l,h)?l:new h(l));else{const l=s[r];h.fieldWrapper?h.typeName==="google.protobuf.BytesValue"?o[r]=jr(l):o[r]=l:o[r]=cr(l,h)?l:new h(l)}break}}},equals(i,e,t){return e===t?!0:!e||!t?!1:i.fields.byMember().every(n=>{const r=e[n.localName],o=t[n.localName];if(n.repeated){if(r.length!==o.length)return!1;switch(n.kind){case"message":return r.every((s,u)=>n.T.equals(s,o[u]));case"scalar":return r.every((s,u)=>jn(n.T,s,o[u]));case"enum":return r.every((s,u)=>jn(oe.INT32,s,o[u]))}throw new Error(`repeated cannot contain ${n.kind}`)}switch(n.kind){case"message":return n.T.equals(r,o);case"enum":return jn(oe.INT32,r,o);case"scalar":return jn(n.T,r,o);case"oneof":if(r.case!==o.case)return!1;const s=n.findField(r.case);if(s===void 0)return!0;switch(s.kind){case"message":return s.T.equals(r.value,o.value);case"enum":return jn(oe.INT32,r.value,o.value);case"scalar":return jn(s.T,r.value,o.value)}throw new Error(`oneof cannot contain ${s.kind}`);case"map":const u=Object.keys(r).concat(Object.keys(o));switch(n.V.kind){case"message":const f=n.V.T;return u.every(v=>f.equals(r[v],o[v]));case"enum":return u.every(v=>jn(oe.INT32,r[v],o[v]));case"scalar":const g=n.V.T;return u.every(v=>jn(g,r[v],o[v]))}break}})},clone(i){const e=i.getType(),t=new e,n=t;for(const r of e.fields.byMember()){const o=i[r.localName];let s;if(r.repeated)s=o.map(bi);else if(r.kind=="map"){s=n[r.localName];for(const[u,f]of Object.entries(o))s[u]=bi(f)}else r.kind=="oneof"?s=r.findField(o.case)?{case:o.case,value:bi(o.value)}:{case:void 0}:s=bi(o);n[r.localName]=s}for(const r of e.runtime.bin.listUnknownFields(i))e.runtime.bin.onUnknownField(n,r.no,r.wireType,r.data);return t}}}function bi(i){if(i===void 0)return i;if(cr(i))return i.clone();if(i instanceof Uint8Array){const e=new Uint8Array(i.byteLength);return e.set(i),e}return i}function jr(i){return i instanceof Uint8Array?i:new Uint8Array(i)}function jl(i,e,t){return{syntax:i,json:Nl(),bin:Dl(),util:Object.assign(Object.assign({},Fl()),{newFieldList:e,initFields:t}),makeMessageType(n,r,o){return gl(this,n,r,o)},makeEnum:dl,makeEnumType:Ps,getEnumType:hl,makeExtension(n,r,o){return Tl(this,n,r,o)}}}class Ul{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const n of this.list())t[n.jsonName]=t[n.name]=n;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const n of this.list())t[n.no]=n;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const n of this.list())n.oneof?n.oneof!==t&&(t=n.oneof,e.push(t)):e.push(n)}return this.members}}function $s(i,e){const t=zs(i);return e?t:Hl(Kl(t))}function $l(i){return $s(i,!1)}const zl=zs;function zs(i){let e=!1;const t=[];for(let n=0;n<i.length;n++){let r=i.charAt(n);switch(r){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(r),e=!1;break;default:e&&(e=!1,r=r.toUpperCase()),t.push(r);break}}return t.join("")}const Jl=new Set(["constructor","toString","toJSON","valueOf"]),Vl=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Js=i=>`${i}$`,Kl=i=>Vl.has(i)?Js(i):i,Hl=i=>Jl.has(i)?Js(i):i;class Wl{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=$l(e)}addField(e){et(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}function Gl(i,e){var t,n,r,o,s,u;const f=[];let g;for(const v of typeof i=="function"?i():i){const h=v;if(h.localName=$s(v.name,v.oneof!==void 0),h.jsonName=(t=v.jsonName)!==null&&t!==void 0?t:zl(v.name),h.repeated=(n=v.repeated)!==null&&n!==void 0?n:!1,v.kind=="scalar"&&(h.L=(r=v.L)!==null&&r!==void 0?r:Yn.BIGINT),h.delimited=(o=v.delimited)!==null&&o!==void 0?o:!1,h.req=(s=v.req)!==null&&s!==void 0?s:!1,h.opt=(u=v.opt)!==null&&u!==void 0?u:!1,v.packed===void 0&&(h.packed=v.kind=="enum"||v.kind=="scalar"&&v.T!=oe.BYTES&&v.T!=oe.STRING),v.oneof!==void 0){const l=typeof v.oneof=="string"?v.oneof:v.oneof.name;(!g||g.name!=l)&&(g=new Wl(l)),h.oneof=g,g.addField(h)}f.push(h)}return f}const X=jl("proto3",i=>new Ul(i,e=>Gl(e)),i=>{for(const e of i.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,n=i;if(e.repeated){n[t]=[];continue}switch(e.kind){case"oneof":n[t]={case:void 0};break;case"enum":n[t]=0;break;case"map":n[t]={};break;case"scalar":n[t]=xr(e.T,e.L);break}}});var pt;(function(i){i[i.Unary=0]="Unary",i[i.ServerStreaming=1]="ServerStreaming",i[i.ClientStreaming=2]="ClientStreaming",i[i.BiDiStreaming=3]="BiDiStreaming"})(pt||(pt={}));var Qo;(function(i){i[i.NoSideEffects=1]="NoSideEffects",i[i.Idempotent=2]="Idempotent"})(Qo||(Qo={}));class dt extends yt{constructor(e){super(),this.seconds=st.zero,this.nanos=0,X.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${X.json.debug(e)}`);const n=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const r=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(r))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=st.parse(r/1e3),this.nanos=0,n[7]&&(this.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let n="Z";if(this.nanos>0){const r=(this.nanos+1e9).toString().substring(1);r.substring(3)==="000000"?n="."+r.substring(0,3)+"Z":r.substring(6)==="000"?n="."+r.substring(0,6)+"Z":n="."+r+"Z"}return new Date(t).toISOString().replace(".000Z",n)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return dt.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new dt({seconds:st.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new dt().fromBinary(e,t)}static fromJson(e,t){return new dt().fromJson(e,t)}static fromJsonString(e,t){return new dt().fromJsonString(e,t)}static equals(e,t){return X.util.equals(dt,e,t)}}dt.runtime=X;dt.typeName="google.protobuf.Timestamp";dt.fields=X.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class xn extends yt{constructor(e){super(),this.seconds=st.zero,this.nanos=0,X.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${X.json.debug(e)}`);const n=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(n===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${X.json.debug(e)}`);const r=Number(n[1]);if(r>315576e6||r<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${X.json.debug(e)}`);if(this.seconds=st.parse(r),typeof n[2]=="string"){const o=n[2]+"0".repeat(9-n[2].length);this.nanos=parseInt(o),(r<0||Object.is(r,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let t=this.seconds.toString();if(this.nanos!==0){let n=Math.abs(this.nanos).toString();n="0".repeat(9-n.length)+n,n.substring(3)==="000000"?n=n.substring(0,3):n.substring(6)==="000"&&(n=n.substring(0,6)),t+="."+n,this.nanos<0&&Number(this.seconds)==0&&(t="-"+t)}return t+"s"}static fromBinary(e,t){return new xn().fromBinary(e,t)}static fromJson(e,t){return new xn().fromJson(e,t)}static fromJsonString(e,t){return new xn().fromJsonString(e,t)}static equals(e,t){return X.util.equals(xn,e,t)}}xn.runtime=X;xn.typeName="google.protobuf.Duration";xn.fields=X.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class fn extends yt{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),X.util.initPartial(e,this)}toJson(e){var t;if(this.typeUrl==="")return{};const n=this.typeUrlToName(this.typeUrl),r=(t=e==null?void 0:e.typeRegistry)===null||t===void 0?void 0:t.findMessage(n);if(!r)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let s=r.fromBinary(this.value).toJson(e);return(n.startsWith("google.protobuf.")||s===null||Array.isArray(s)||typeof s!="object")&&(s={value:s}),s["@type"]=this.typeUrl,s}fromJson(e,t){var n;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const r=e["@type"];if(typeof r!="string"||r=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const o=this.typeUrlToName(r),s=(n=t==null?void 0:t.typeRegistry)===null||n===void 0?void 0:n.findMessage(o);if(!s)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${r} is not in the type registry`);let u;if(o.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))u=s.fromJson(e.value,t);else{const f=Object.assign({},e);delete f["@type"],u=s.fromJson(f,t)}return this.packFrom(u),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const t=e.findMessage(this.typeUrlToName(this.typeUrl));if(t)return t.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const t=this.typeUrlToName(this.typeUrl);let n="";return typeof e=="string"?n=e:n=e.typeName,t===n}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const t=e.lastIndexOf("/"),n=t>=0?e.substring(t+1):e;if(!n.length)throw new Error(`invalid type url: ${e}`);return n}static pack(e){const t=new fn;return t.packFrom(e),t}static fromBinary(e,t){return new fn().fromBinary(e,t)}static fromJson(e,t){return new fn().fromJson(e,t)}static fromJsonString(e,t){return new fn().fromJsonString(e,t)}static equals(e,t){return X.util.equals(fn,e,t)}}fn.runtime=X;fn.typeName="google.protobuf.Any";fn.fields=X.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class hn extends yt{constructor(e){super(),this.value=0,X.util.initPartial(e,this)}toJson(e){return X.json.writeScalar(oe.DOUBLE,this.value,!0)}fromJson(e,t){try{this.value=X.json.readScalar(oe.DOUBLE,e)}catch(n){let r='cannot decode message google.protobuf.DoubleValue from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(e,t){return new hn().fromBinary(e,t)}static fromJson(e,t){return new hn().fromJson(e,t)}static fromJsonString(e,t){return new hn().fromJsonString(e,t)}static equals(e,t){return X.util.equals(hn,e,t)}}hn.runtime=X;hn.typeName="google.protobuf.DoubleValue";hn.fields=X.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);hn.fieldWrapper={wrapField(i){return new hn({value:i})},unwrapField(i){return i.value}};class dn extends yt{constructor(e){super(),this.value=0,X.util.initPartial(e,this)}toJson(e){return X.json.writeScalar(oe.FLOAT,this.value,!0)}fromJson(e,t){try{this.value=X.json.readScalar(oe.FLOAT,e)}catch(n){let r='cannot decode message google.protobuf.FloatValue from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(e,t){return new dn().fromBinary(e,t)}static fromJson(e,t){return new dn().fromJson(e,t)}static fromJsonString(e,t){return new dn().fromJsonString(e,t)}static equals(e,t){return X.util.equals(dn,e,t)}}dn.runtime=X;dn.typeName="google.protobuf.FloatValue";dn.fields=X.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);dn.fieldWrapper={wrapField(i){return new dn({value:i})},unwrapField(i){return i.value}};class gn extends yt{constructor(e){super(),this.value=st.zero,X.util.initPartial(e,this)}toJson(e){return X.json.writeScalar(oe.INT64,this.value,!0)}fromJson(e,t){try{this.value=X.json.readScalar(oe.INT64,e)}catch(n){let r='cannot decode message google.protobuf.Int64Value from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(e,t){return new gn().fromBinary(e,t)}static fromJson(e,t){return new gn().fromJson(e,t)}static fromJsonString(e,t){return new gn().fromJsonString(e,t)}static equals(e,t){return X.util.equals(gn,e,t)}}gn.runtime=X;gn.typeName="google.protobuf.Int64Value";gn.fields=X.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);gn.fieldWrapper={wrapField(i){return new gn({value:i})},unwrapField(i){return i.value}};class pn extends yt{constructor(e){super(),this.value=st.zero,X.util.initPartial(e,this)}toJson(e){return X.json.writeScalar(oe.UINT64,this.value,!0)}fromJson(e,t){try{this.value=X.json.readScalar(oe.UINT64,e)}catch(n){let r='cannot decode message google.protobuf.UInt64Value from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(e,t){return new pn().fromBinary(e,t)}static fromJson(e,t){return new pn().fromJson(e,t)}static fromJsonString(e,t){return new pn().fromJsonString(e,t)}static equals(e,t){return X.util.equals(pn,e,t)}}pn.runtime=X;pn.typeName="google.protobuf.UInt64Value";pn.fields=X.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);pn.fieldWrapper={wrapField(i){return new pn({value:i})},unwrapField(i){return i.value}};class mn extends yt{constructor(e){super(),this.value=0,X.util.initPartial(e,this)}toJson(e){return X.json.writeScalar(oe.INT32,this.value,!0)}fromJson(e,t){try{this.value=X.json.readScalar(oe.INT32,e)}catch(n){let r='cannot decode message google.protobuf.Int32Value from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(e,t){return new mn().fromBinary(e,t)}static fromJson(e,t){return new mn().fromJson(e,t)}static fromJsonString(e,t){return new mn().fromJsonString(e,t)}static equals(e,t){return X.util.equals(mn,e,t)}}mn.runtime=X;mn.typeName="google.protobuf.Int32Value";mn.fields=X.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);mn.fieldWrapper={wrapField(i){return new mn({value:i})},unwrapField(i){return i.value}};class yn extends yt{constructor(e){super(),this.value=0,X.util.initPartial(e,this)}toJson(e){return X.json.writeScalar(oe.UINT32,this.value,!0)}fromJson(e,t){try{this.value=X.json.readScalar(oe.UINT32,e)}catch(n){let r='cannot decode message google.protobuf.UInt32Value from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(e,t){return new yn().fromBinary(e,t)}static fromJson(e,t){return new yn().fromJson(e,t)}static fromJsonString(e,t){return new yn().fromJsonString(e,t)}static equals(e,t){return X.util.equals(yn,e,t)}}yn.runtime=X;yn.typeName="google.protobuf.UInt32Value";yn.fields=X.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);yn.fieldWrapper={wrapField(i){return new yn({value:i})},unwrapField(i){return i.value}};class vn extends yt{constructor(e){super(),this.value=!1,X.util.initPartial(e,this)}toJson(e){return X.json.writeScalar(oe.BOOL,this.value,!0)}fromJson(e,t){try{this.value=X.json.readScalar(oe.BOOL,e)}catch(n){let r='cannot decode message google.protobuf.BoolValue from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(e,t){return new vn().fromBinary(e,t)}static fromJson(e,t){return new vn().fromJson(e,t)}static fromJsonString(e,t){return new vn().fromJsonString(e,t)}static equals(e,t){return X.util.equals(vn,e,t)}}vn.runtime=X;vn.typeName="google.protobuf.BoolValue";vn.fields=X.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);vn.fieldWrapper={wrapField(i){return new vn({value:i})},unwrapField(i){return i.value}};class St extends yt{constructor(e){super(),this.value="",X.util.initPartial(e,this)}toJson(e){return X.json.writeScalar(oe.STRING,this.value,!0)}fromJson(e,t){try{this.value=X.json.readScalar(oe.STRING,e)}catch(n){let r='cannot decode message google.protobuf.StringValue from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(e,t){return new St().fromBinary(e,t)}static fromJson(e,t){return new St().fromJson(e,t)}static fromJsonString(e,t){return new St().fromJsonString(e,t)}static equals(e,t){return X.util.equals(St,e,t)}}St.runtime=X;St.typeName="google.protobuf.StringValue";St.fields=X.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);St.fieldWrapper={wrapField(i){return new St({value:i})},unwrapField(i){return i.value}};class bn extends yt{constructor(e){super(),this.value=new Uint8Array(0),X.util.initPartial(e,this)}toJson(e){return X.json.writeScalar(oe.BYTES,this.value,!0)}fromJson(e,t){try{this.value=X.json.readScalar(oe.BYTES,e)}catch(n){let r='cannot decode message google.protobuf.BytesValue from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(e,t){return new bn().fromBinary(e,t)}static fromJson(e,t){return new bn().fromJson(e,t)}static fromJsonString(e,t){return new bn().fromJsonString(e,t)}static equals(e,t){return X.util.equals(bn,e,t)}}bn.runtime=X;bn.typeName="google.protobuf.BytesValue";bn.fields=X.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);bn.fieldWrapper={wrapField(i){return new bn({value:i})},unwrapField(i){return i.value}};function Yl(i,e,t){try{const n=bo.dec(i);return e?e.fromBinary(n,t):n}catch(n){throw ot.from(n,Ke.DataLoss)}}function Zl(i,e){const t={};for(const[n,r]of Object.entries(i.methods)){const o=e(Object.assign(Object.assign({},r),{localName:n,service:i}));o!=null&&(t[n]=o)}return t}function es(i){let e,t=new Uint8Array(0);function n(r){const o=new Uint8Array(t.length+r.length);o.set(t),o.set(r,t.length),t=o}return new ReadableStream({start(){e=i.getReader()},async pull(r){let o;for(;;){if(o===void 0&&t.byteLength>=5){let f=0;for(let g=1;g<5;g++)f=(f<<8)+t[g];o={flags:t[0],length:f}}if(o!==void 0&&t.byteLength>=o.length+5)break;const u=await e.read();if(u.done)break;n(u.value)}if(o===void 0){if(t.byteLength==0){r.close();return}r.error(new ot("premature end of stream",Ke.DataLoss));return}const s=t.subarray(5,5+o.length);t=t.subarray(5+o.length),r.enqueue({flags:o.flags,data:s})}})}function ts(i,e){const t=new Uint8Array(e.length+5);t.set(e,5);const n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setUint8(0,i),n.setUint32(1,e.length),t}var Xl=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=i[o]&&function(s){return new Promise(function(u,f){s=i[o](s),r(u,f,s.done,s.value)})}}function r(o,s,u,f){Promise.resolve(f).then(function(g){o({value:g,done:u})},s)}},Wr=function(i){return this instanceof Wr?(this.v=i,this):new Wr(i)},Ql=function(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),r,o=[];return r={},u("next"),u("throw"),u("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(a){return function(y){return Promise.resolve(y).then(a,h)}}function u(a,y){n[a]&&(r[a]=function(b){return new Promise(function(w,m){o.push([a,b,w,m])>1||f(a,b)})},y&&(r[a]=y(r[a])))}function f(a,y){try{g(n[a](y))}catch(b){l(o[0][3],b)}}function g(a){a.value instanceof Wr?Promise.resolve(a.value.v).then(v,h):l(o[0][2],a)}function v(a){f("next",a)}function h(a){f("throw",a)}function l(a,y){a(y),o.shift(),o.length&&f(o[0][0],o[0][1])}},eu=function(i){var e,t;return e={},n("next"),n("throw",function(r){throw r}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(r,o){e[r]=i[r]?function(s){return(t=!t)?{value:Wr(i[r](s)),done:!1}:o?o(s):s}:o}};function tu(i){return Ql(this,arguments,function*(){yield Wr(yield*eu(Xl(i)))})}var Vs=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=i[o]&&function(s){return new Promise(function(u,f){s=i[o](s),r(u,f,s.done,s.value)})}}function r(o,s,u,f){Promise.resolve(f).then(function(g){o({value:g,done:u})},s)}},Nr=function(i){return this instanceof Nr?(this.v=i,this):new Nr(i)},nu=function(i){var e,t;return e={},n("next"),n("throw",function(r){throw r}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(r,o){e[r]=i[r]?function(s){return(t=!t)?{value:Nr(i[r](s)),done:!1}:o?o(s):s}:o}},ru=function(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),r,o=[];return r={},u("next"),u("throw"),u("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(a){return function(y){return Promise.resolve(y).then(a,h)}}function u(a,y){n[a]&&(r[a]=function(b){return new Promise(function(w,m){o.push([a,b,w,m])>1||f(a,b)})},y&&(r[a]=y(r[a])))}function f(a,y){try{g(n[a](y))}catch(b){l(o[0][3],b)}}function g(a){a.value instanceof Nr?Promise.resolve(a.value.v).then(v,h):l(o[0][2],a)}function v(a){f("next",a)}function h(a){f("throw",a)}function l(a,y){a(y),o.shift(),o.length&&f(o[0][0],o[0][1])}};function iu(i,e){return Zl(i,t=>{switch(t.kind){case pt.Unary:return ou(e,i,t);case pt.ServerStreaming:return su(e,i,t);case pt.ClientStreaming:return au(e,i,t);case pt.BiDiStreaming:return lu(e,i,t);default:return null}})}function ou(i,e,t){return async function(n,r){var o,s;const u=await i.unary(e,t,r==null?void 0:r.signal,r==null?void 0:r.timeoutMs,r==null?void 0:r.headers,n,r==null?void 0:r.contextValues);return(o=r==null?void 0:r.onHeader)===null||o===void 0||o.call(r,u.header),(s=r==null?void 0:r.onTrailer)===null||s===void 0||s.call(r,u.trailer),u.message}}function su(i,e,t){return function(n,r){return Ks(i.stream(e,t,r==null?void 0:r.signal,r==null?void 0:r.timeoutMs,r==null?void 0:r.headers,tu([n]),r==null?void 0:r.contextValues),r)}}function au(i,e,t){return async function(n,r){var o,s,u,f,g,v;const h=await i.stream(e,t,r==null?void 0:r.signal,r==null?void 0:r.timeoutMs,r==null?void 0:r.headers,n,r==null?void 0:r.contextValues);(g=r==null?void 0:r.onHeader)===null||g===void 0||g.call(r,h.header);let l;try{for(var a=!0,y=Vs(h.message),b;b=await y.next(),o=b.done,!o;a=!0)f=b.value,a=!1,l=f}catch(w){s={error:w}}finally{try{!a&&!o&&(u=y.return)&&await u.call(y)}finally{if(s)throw s.error}}if(!l)throw new ot("protocol error: missing response message",Ke.Internal);return(v=r==null?void 0:r.onTrailer)===null||v===void 0||v.call(r,h.trailer),l}}function lu(i,e,t){return function(n,r){return Ks(i.stream(e,t,r==null?void 0:r.signal,r==null?void 0:r.timeoutMs,r==null?void 0:r.headers,n,r==null?void 0:r.contextValues),r)}}function Ks(i,e){const t=function(){var n,r;return ru(this,arguments,function*(){const o=yield Nr(i);(n=e==null?void 0:e.onHeader)===null||n===void 0||n.call(e,o.header),yield Nr(yield*nu(Vs(o.message))),(r=e==null?void 0:e.onTrailer)===null||r===void 0||r.call(e,o.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function uu(...i){const e=new AbortController,t=i.filter(r=>r!==void 0).concat(e.signal);for(const r of t){if(r.aborted){n.apply(r);break}r.addEventListener("abort",n)}function n(){e.signal.aborted||e.abort(Hs(this));for(const r of t)r.removeEventListener("abort",n)}return e}function cu(i){const e=new AbortController,t=()=>{e.abort(new ot("the operation timed out",Ke.DeadlineExceeded))};let n;return i!==void 0&&(i<=0?t():n=setTimeout(t,i)),{signal:e.signal,cleanup:()=>clearTimeout(n)}}function Hs(i){if(!i.aborted)return;if(i.reason!==void 0)return i.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function ns(){return{get(i){return i.id in this?this[i.id]:i.defaultValue},set(i,e){return this[i.id]=e,this},delete(i){return delete this[i.id],this}}}const ro=128;function rs(i){const e=new Headers,t=new TextDecoder().decode(i).split(`\r
`);for(const n of t){if(n==="")continue;const r=n.indexOf(":");if(r>0){const o=n.substring(0,r).trim(),s=n.substring(r+1).trim();e.append(o,s)}}return e}const fu="Content-Type",hu="Grpc-Timeout",Ws="Grpc-Status",Gs="Grpc-Message",du="Grpc-Status-Details-Bin",gu="X-User-Agent",pu="X-Grpc-Web",mu="application/grpc-web+proto",yu="application/grpc-web+json";class Nn extends yt{constructor(e){super(),this.code=0,this.message="",this.details=[],X.util.initPartial(e,this)}static fromBinary(e,t){return new Nn().fromBinary(e,t)}static fromJson(e,t){return new Nn().fromJson(e,t)}static fromJsonString(e,t){return new Nn().fromJsonString(e,t)}static equals(e,t){return X.util.equals(Nn,e,t)}}Nn.runtime=X;Nn.typeName="google.rpc.Status";Nn.fields=X.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:fn,repeated:!0}]);const vu="0";function Ys(i){var e;const t=i.get(du);if(t!=null){const r=Yl(t,Nn);if(r.code==0)return;const o=new ot(r.message,r.code,i);return o.details=r.details.map(s=>({type:s.typeUrl.substring(s.typeUrl.lastIndexOf("/")+1),value:s.value})),o}const n=i.get(Ws);if(n!=null){if(n===vu)return;const r=parseInt(n,10);return r in Ke?new ot(decodeURIComponent((e=i.get(Gs))!==null&&e!==void 0?e:""),r,i):new ot(`invalid grpc-status: ${n}`,Ke.Internal,i)}}function is(i,e,t){const n=typeof e=="string"?e:e.typeName,r=typeof t=="string"?t:t.name;return i.toString().replace(/\/?$/,`/${n}/${r}`)}function Zs(i,e){return e instanceof i?e:new i(e)}function bu(i,e){function t(n){return n.done===!0?n:{done:n.done,value:Zs(i,n.value)}}return{[Symbol.asyncIterator](){const n=e[Symbol.asyncIterator](),r={next:()=>n.next().then(t)};return n.throw!==void 0&&(r.throw=o=>n.throw(o).then(t)),n.return!==void 0&&(r.return=o=>n.return(o).then(t)),r}}}function Xs(i,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((n,r)=>r(n),i))!==null&&t!==void 0?t:i}function wu(i){var e;const t=Object.assign({},i);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function os(i,e,t,n){const r=e?ss(i.I,n):as(i.I,t);return{parse:(e?ss(i.O,n):as(i.O,t)).parse,serialize:r.serialize}}function ss(i,e){return{parse(t){try{return i.fromBinary(t,e)}catch(n){const r=n instanceof Error?n.message:String(n);throw new ot(`parse binary: ${r}`,Ke.InvalidArgument)}},serialize(t){try{return t.toBinary(e)}catch(n){const r=n instanceof Error?n.message:String(n);throw new ot(`serialize binary: ${r}`,Ke.Internal)}}}}function as(i,e){var t,n;const r=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,o=(n=e==null?void 0:e.textDecoder)!==null&&n!==void 0?n:new TextDecoder,s=wu(e);return{parse(u){try{const f=o.decode(u);return i.fromJsonString(f,s)}catch(f){throw ot.from(f,Ke.InvalidArgument)}},serialize(u){try{const f=u.toJsonString(s);return r.encode(f)}catch(f){throw ot.from(f,Ke.Internal)}}}}function Au(i){const e=Xs(i.next,i.interceptors),[t,n,r]=Qs(i),o=Object.assign(Object.assign({},i.req),{message:Zs(i.req.method.I,i.req.message),signal:t});return e(o).then(s=>(r(),s),n)}function Tu(i){const e=Xs(i.next,i.interceptors),[t,n,r]=Qs(i),o=Object.assign(Object.assign({},i.req),{message:bu(i.req.method.I,i.req.message),signal:t});let s=!1;return t.addEventListener("abort",function(){var u,f;const g=i.req.message[Symbol.asyncIterator]();s||(u=g.throw)===null||u===void 0||u.call(g,this.reason).catch(()=>{}),(f=g.return)===null||f===void 0||f.call(g).catch(()=>{})}),e(o).then(u=>Object.assign(Object.assign({},u),{message:{[Symbol.asyncIterator](){const f=u.message[Symbol.asyncIterator]();return{next(){return f.next().then(g=>(g.done==!0&&(s=!0,r()),g),n)}}}}}),n)}function Qs(i){const{signal:e,cleanup:t}=cu(i.timeoutMs),n=uu(i.signal,e);return[n.signal,function(o){const s=ot.from(e.aborted?Hs(e):o);return n.abort(s),t(),Promise.reject(s)},function(){t(),n.abort()}]}function _u(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function ls(i,e){const t=Ys(i);if(t)throw e.forEach((n,r)=>{t.metadata.append(r,n)}),t}function us(i,e,t,n){const r=new Headers(t??{});return r.set(fu,i?mu:yu),r.set(pu,"1"),r.set(gu,"connect-es/1.4.0"),e!==void 0&&r.set(hu,`${e}m`),r}function Eu(i){switch(i){case 400:return Ke.Internal;case 401:return Ke.Unauthenticated;case 403:return Ke.PermissionDenied;case 404:return Ke.Unimplemented;case 429:return Ke.Unavailable;case 502:return Ke.Unavailable;case 503:return Ke.Unavailable;case 504:return Ke.Unavailable;default:return Ke.Unknown}}function cs(i,e){var t;if(i>=200&&i<300){const n=Ys(e);if(n)throw n;return{foundStatus:e.has(Ws)}}throw new ot(decodeURIComponent((t=e.get(Gs))!==null&&t!==void 0?t:`HTTP ${i}`),Eu(i),e)}var lr=function(i){return this instanceof lr?(this.v=i,this):new lr(i)},Ou=function(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),r,o=[];return r={},u("next"),u("throw"),u("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(a){return function(y){return Promise.resolve(y).then(a,h)}}function u(a,y){n[a]&&(r[a]=function(b){return new Promise(function(w,m){o.push([a,b,w,m])>1||f(a,b)})},y&&(r[a]=y(r[a])))}function f(a,y){try{g(n[a](y))}catch(b){l(o[0][3],b)}}function g(a){a.value instanceof lr?Promise.resolve(a.value.v).then(v,h):l(o[0][2],a)}function v(a){f("next",a)}function h(a){f("throw",a)}function l(a,y){a(y),o.shift(),o.length&&f(o[0][0],o[0][1])}};function Su(i){var e;_u();const t=(e=i.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(n,r,o,s,u,f,g){var v;const{serialize:h,parse:l}=os(r,t,i.jsonOptions,i.binaryOptions);return s=s===void 0?i.defaultTimeoutMs:s<=0?void 0:s,await Au({interceptors:i.interceptors,signal:o,timeoutMs:s,req:{stream:!1,service:n,method:r,url:is(i.baseUrl,n,r),init:{method:"POST",credentials:(v=i.credentials)!==null&&v!==void 0?v:"same-origin",redirect:"error",mode:"cors"},header:us(t,s,u),contextValues:g??ns(),message:f},next:async a=>{var y;const w=await((y=i.fetch)!==null&&y!==void 0?y:globalThis.fetch)(a.url,Object.assign(Object.assign({},a.init),{headers:a.header,signal:a.signal,body:ts(0,h(a.message))}));if(cs(w.status,w.headers),!w.body)throw"missing response body";const m=es(w.body).getReader();let d,p;for(;;){const c=await m.read();if(c.done)break;const{flags:A,data:T}=c.value;if(A===ro){if(d!==void 0)throw"extra trailer";d=rs(T);continue}if(p!==void 0)throw"extra message";p=l(T)}if(d===void 0)throw"missing trailer";if(ls(d,w.headers),p===void 0)throw"missing message";return{stream:!1,service:n,method:r,header:w.headers,message:p,trailer:d}}})},async stream(n,r,o,s,u,f,g){var v;const{serialize:h,parse:l}=os(r,t,i.jsonOptions,i.binaryOptions);function a(b,w,m,d){return Ou(this,arguments,function*(){const c=es(b).getReader();if(w){if(!(yield lr(c.read())).done)throw"extra data for trailers-only";return yield lr(void 0)}let A=!1;for(;;){const T=yield lr(c.read());if(T.done)break;const{flags:_,data:k}=T.value;if((_&ro)===ro){if(A)throw"extra trailer";A=!0;const P=rs(k);ls(P,d),P.forEach((O,E)=>m.set(E,O));continue}if(A)throw"extra message";yield yield lr(l(k))}if(!A)throw"missing trailer"})}async function y(b){if(r.kind!=pt.ServerStreaming)throw"The fetch API does not support streaming request bodies";const w=await b[Symbol.asyncIterator]().next();if(w.done==!0)throw"missing request message";return ts(0,h(w.value))}return s=s===void 0?i.defaultTimeoutMs:s<=0?void 0:s,Tu({interceptors:i.interceptors,signal:o,timeoutMs:s,req:{stream:!0,service:n,method:r,url:is(i.baseUrl,n,r),init:{method:"POST",credentials:(v=i.credentials)!==null&&v!==void 0?v:"same-origin",redirect:"error",mode:"cors"},header:us(t,s,u),contextValues:g??ns(),message:f},next:async b=>{var w;const d=await((w=i.fetch)!==null&&w!==void 0?w:globalThis.fetch)(b.url,Object.assign(Object.assign({},b.init),{headers:b.header,signal:b.signal,body:await y(b.message)})),{foundStatus:p}=cs(d.status,d.headers);if(!d.body)throw"missing response body";const c=new Headers;return Object.assign(Object.assign({},b),{header:d.headers,trailer:c,message:a(d.body,p,c,d.headers)})}})}}}const Ce=X.makeEnum("yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL",localName:"NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN",localName:"BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER",localName:"INTEGER"},{no:3,name:"VALUE_TYPE_LONG",localName:"LONG"},{no:4,name:"VALUE_TYPE_DOUBLE",localName:"DOUBLE"},{no:5,name:"VALUE_TYPE_STRING",localName:"STRING"},{no:6,name:"VALUE_TYPE_BYTES",localName:"BYTES"},{no:7,name:"VALUE_TYPE_DATE",localName:"DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT",localName:"JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY",localName:"JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT",localName:"TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT",localName:"INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT",localName:"LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE",localName:"TREE"}]),Mi=X.makeEnum("yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED",localName:"DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED",localName:"DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED",localName:"DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST",localName:"DOCUMENT_BROADCAST"}]),ku=X.makeMessageType("yorkie.v1.Snapshot",()=>[{no:1,name:"root",kind:"message",T:Dt},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:_o}}]),Dn=X.makeMessageType("yorkie.v1.ChangePack",()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:ba},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:ea,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:_e},{no:6,name:"is_removed",kind:"scalar",T:8}]),ea=X.makeMessageType("yorkie.v1.Change",()=>[{no:1,name:"id",kind:"message",T:$i},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:wo,repeated:!0},{no:4,name:"presence_change",kind:"message",T:ho}]),$i=X.makeMessageType("yorkie.v1.ChangeID",()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3,L:1},{no:3,name:"lamport",kind:"scalar",T:3,L:1},{no:4,name:"actor_id",kind:"scalar",T:12}]),wo=X.makeMessageType("yorkie.v1.Operation",()=>[{no:1,name:"set",kind:"message",T:ta,oneof:"body"},{no:2,name:"add",kind:"message",T:na,oneof:"body"},{no:3,name:"move",kind:"message",T:ra,oneof:"body"},{no:4,name:"remove",kind:"message",T:ia,oneof:"body"},{no:5,name:"edit",kind:"message",T:oa,oneof:"body"},{no:6,name:"select",kind:"message",T:xu,oneof:"body"},{no:7,name:"style",kind:"message",T:sa,oneof:"body"},{no:8,name:"increase",kind:"message",T:aa,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:la,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:ua,oneof:"body"}]),ta=X.makeMessageType("yorkie.v1.Operation.Set",()=>[{no:1,name:"parent_created_at",kind:"message",T:_e},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:Sn},{no:4,name:"executed_at",kind:"message",T:_e}],{localName:"Operation_Set"}),na=X.makeMessageType("yorkie.v1.Operation.Add",()=>[{no:1,name:"parent_created_at",kind:"message",T:_e},{no:2,name:"prev_created_at",kind:"message",T:_e},{no:3,name:"value",kind:"message",T:Sn},{no:4,name:"executed_at",kind:"message",T:_e}],{localName:"Operation_Add"}),ra=X.makeMessageType("yorkie.v1.Operation.Move",()=>[{no:1,name:"parent_created_at",kind:"message",T:_e},{no:2,name:"prev_created_at",kind:"message",T:_e},{no:3,name:"created_at",kind:"message",T:_e},{no:4,name:"executed_at",kind:"message",T:_e}],{localName:"Operation_Move"}),ia=X.makeMessageType("yorkie.v1.Operation.Remove",()=>[{no:1,name:"parent_created_at",kind:"message",T:_e},{no:2,name:"created_at",kind:"message",T:_e},{no:3,name:"executed_at",kind:"message",T:_e}],{localName:"Operation_Remove"}),oa=X.makeMessageType("yorkie.v1.Operation.Edit",()=>[{no:1,name:"parent_created_at",kind:"message",T:_e},{no:2,name:"from",kind:"message",T:fr},{no:3,name:"to",kind:"message",T:fr},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:_e}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:_e},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"Operation_Edit"}),xu=X.makeMessageType("yorkie.v1.Operation.Select",()=>[{no:1,name:"parent_created_at",kind:"message",T:_e},{no:2,name:"from",kind:"message",T:fr},{no:3,name:"to",kind:"message",T:fr},{no:4,name:"executed_at",kind:"message",T:_e}],{localName:"Operation_Select"}),sa=X.makeMessageType("yorkie.v1.Operation.Style",()=>[{no:1,name:"parent_created_at",kind:"message",T:_e},{no:2,name:"from",kind:"message",T:fr},{no:3,name:"to",kind:"message",T:fr},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:_e},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:_e}}],{localName:"Operation_Style"}),aa=X.makeMessageType("yorkie.v1.Operation.Increase",()=>[{no:1,name:"parent_created_at",kind:"message",T:_e},{no:2,name:"value",kind:"message",T:Sn},{no:3,name:"executed_at",kind:"message",T:_e}],{localName:"Operation_Increase"}),la=X.makeMessageType("yorkie.v1.Operation.TreeEdit",()=>[{no:1,name:"parent_created_at",kind:"message",T:_e},{no:2,name:"from",kind:"message",T:Gr},{no:3,name:"to",kind:"message",T:Gr},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:_e}},{no:5,name:"contents",kind:"message",T:va,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:_e}],{localName:"Operation_TreeEdit"}),ua=X.makeMessageType("yorkie.v1.Operation.TreeStyle",()=>[{no:1,name:"parent_created_at",kind:"message",T:_e},{no:2,name:"from",kind:"message",T:Gr},{no:3,name:"to",kind:"message",T:Gr},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:_e},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:_e}}],{localName:"Operation_TreeStyle"}),Sn=X.makeMessageType("yorkie.v1.JSONElementSimple",()=>[{no:1,name:"created_at",kind:"message",T:_e},{no:2,name:"moved_at",kind:"message",T:_e},{no:3,name:"removed_at",kind:"message",T:_e},{no:4,name:"type",kind:"enum",T:X.getEnumType(Ce)},{no:5,name:"value",kind:"scalar",T:12}]),Dt=X.makeMessageType("yorkie.v1.JSONElement",()=>[{no:1,name:"json_object",kind:"message",T:ca,oneof:"body"},{no:2,name:"json_array",kind:"message",T:fa,oneof:"body"},{no:3,name:"primitive",kind:"message",T:ha,oneof:"body"},{no:5,name:"text",kind:"message",T:da,oneof:"body"},{no:6,name:"counter",kind:"message",T:ga,oneof:"body"},{no:7,name:"tree",kind:"message",T:pa,oneof:"body"}]),ca=X.makeMessageType("yorkie.v1.JSONElement.JSONObject",()=>[{no:1,name:"nodes",kind:"message",T:ma,repeated:!0},{no:2,name:"created_at",kind:"message",T:_e},{no:3,name:"moved_at",kind:"message",T:_e},{no:4,name:"removed_at",kind:"message",T:_e}],{localName:"JSONElement_JSONObject"}),fa=X.makeMessageType("yorkie.v1.JSONElement.JSONArray",()=>[{no:1,name:"nodes",kind:"message",T:Ao,repeated:!0},{no:2,name:"created_at",kind:"message",T:_e},{no:3,name:"moved_at",kind:"message",T:_e},{no:4,name:"removed_at",kind:"message",T:_e}],{localName:"JSONElement_JSONArray"}),ha=X.makeMessageType("yorkie.v1.JSONElement.Primitive",()=>[{no:1,name:"type",kind:"enum",T:X.getEnumType(Ce)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:_e},{no:4,name:"moved_at",kind:"message",T:_e},{no:5,name:"removed_at",kind:"message",T:_e}],{localName:"JSONElement_Primitive"}),da=X.makeMessageType("yorkie.v1.JSONElement.Text",()=>[{no:1,name:"nodes",kind:"message",T:ya,repeated:!0},{no:2,name:"created_at",kind:"message",T:_e},{no:3,name:"moved_at",kind:"message",T:_e},{no:4,name:"removed_at",kind:"message",T:_e}],{localName:"JSONElement_Text"}),ga=X.makeMessageType("yorkie.v1.JSONElement.Counter",()=>[{no:1,name:"type",kind:"enum",T:X.getEnumType(Ce)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:_e},{no:4,name:"moved_at",kind:"message",T:_e},{no:5,name:"removed_at",kind:"message",T:_e}],{localName:"JSONElement_Counter"}),pa=X.makeMessageType("yorkie.v1.JSONElement.Tree",()=>[{no:1,name:"nodes",kind:"message",T:To,repeated:!0},{no:2,name:"created_at",kind:"message",T:_e},{no:3,name:"moved_at",kind:"message",T:_e},{no:4,name:"removed_at",kind:"message",T:_e}],{localName:"JSONElement_Tree"}),ma=X.makeMessageType("yorkie.v1.RHTNode",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:Dt}]),Ao=X.makeMessageType("yorkie.v1.RGANode",()=>[{no:1,name:"next",kind:"message",T:Ao},{no:2,name:"element",kind:"message",T:Dt}]),zi=X.makeMessageType("yorkie.v1.NodeAttr",()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:_e},{no:3,name:"is_removed",kind:"scalar",T:8}]),ya=X.makeMessageType("yorkie.v1.TextNode",()=>[{no:1,name:"id",kind:"message",T:fo},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:_e},{no:4,name:"ins_prev_id",kind:"message",T:fo},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:zi}}]),fo=X.makeMessageType("yorkie.v1.TextNodeID",()=>[{no:1,name:"created_at",kind:"message",T:_e},{no:2,name:"offset",kind:"scalar",T:5}]),To=X.makeMessageType("yorkie.v1.TreeNode",()=>[{no:1,name:"id",kind:"message",T:Or},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:_e},{no:5,name:"ins_prev_id",kind:"message",T:Or},{no:6,name:"ins_next_id",kind:"message",T:Or},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:zi}}]),va=X.makeMessageType("yorkie.v1.TreeNodes",()=>[{no:1,name:"content",kind:"message",T:To,repeated:!0}]),Or=X.makeMessageType("yorkie.v1.TreeNodeID",()=>[{no:1,name:"created_at",kind:"message",T:_e},{no:2,name:"offset",kind:"scalar",T:5}]),Gr=X.makeMessageType("yorkie.v1.TreePos",()=>[{no:1,name:"parent_id",kind:"message",T:Or},{no:2,name:"left_sibling_id",kind:"message",T:Or}]);X.makeMessageType("yorkie.v1.User",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:dt}]);X.makeMessageType("yorkie.v1.Project",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:dt},{no:9,name:"updated_at",kind:"message",T:dt}]);X.makeMessageType("yorkie.v1.UpdatableProjectFields",()=>[{no:1,name:"name",kind:"message",T:St},{no:2,name:"auth_webhook_url",kind:"message",T:St},{no:3,name:"auth_webhook_methods",kind:"message",T:Nu},{no:4,name:"client_deactivate_threshold",kind:"message",T:St}]);const Nu=X.makeMessageType("yorkie.v1.UpdatableProjectFields.AuthWebhookMethods",()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}],{localName:"UpdatableProjectFields_AuthWebhookMethods"});X.makeMessageType("yorkie.v1.DocumentSummary",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:dt},{no:5,name:"accessed_at",kind:"message",T:dt},{no:6,name:"updated_at",kind:"message",T:dt}]);const ho=X.makeMessageType("yorkie.v1.PresenceChange",()=>[{no:1,name:"type",kind:"enum",T:X.getEnumType(Yr)},{no:2,name:"presence",kind:"message",T:_o}]),Yr=X.makeEnum("yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT",localName:"PUT"},{no:2,name:"CHANGE_TYPE_DELETE",localName:"DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR",localName:"CLEAR"}]),_o=X.makeMessageType("yorkie.v1.Presence",()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]),ba=X.makeMessageType("yorkie.v1.Checkpoint",()=>[{no:1,name:"server_seq",kind:"scalar",T:3,L:1},{no:2,name:"client_seq",kind:"scalar",T:13}]),fr=X.makeMessageType("yorkie.v1.TextNodePos",()=>[{no:1,name:"created_at",kind:"message",T:_e},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]),_e=X.makeMessageType("yorkie.v1.TimeTicket",()=>[{no:1,name:"lamport",kind:"scalar",T:3,L:1},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}]),Iu=X.makeMessageType("yorkie.v1.DocEventBody",()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]),Pu=X.makeMessageType("yorkie.v1.DocEvent",()=>[{no:1,name:"type",kind:"enum",T:X.getEnumType(Mi)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Iu}]),Cu=X.makeMessageType("yorkie.v1.ActivateClientRequest",()=>[{no:1,name:"client_key",kind:"scalar",T:9}]),Ru=X.makeMessageType("yorkie.v1.ActivateClientResponse",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),Du=X.makeMessageType("yorkie.v1.DeactivateClientRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),Lu=X.makeMessageType("yorkie.v1.DeactivateClientResponse",[]),Mu=X.makeMessageType("yorkie.v1.AttachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Dn}]),Bu=X.makeMessageType("yorkie.v1.AttachDocumentResponse",()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Dn}]),qu=X.makeMessageType("yorkie.v1.DetachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Dn},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]),Fu=X.makeMessageType("yorkie.v1.DetachDocumentResponse",()=>[{no:2,name:"change_pack",kind:"message",T:Dn}]),ju=X.makeMessageType("yorkie.v1.WatchDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]),Uu=X.makeMessageType("yorkie.v1.WatchDocumentResponse",()=>[{no:1,name:"initialization",kind:"message",T:$u,oneof:"body"},{no:2,name:"event",kind:"message",T:Pu,oneof:"body"}]),$u=X.makeMessageType("yorkie.v1.WatchDocumentResponse.Initialization",()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}],{localName:"WatchDocumentResponse_Initialization"}),zu=X.makeMessageType("yorkie.v1.RemoveDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Dn}]),Ju=X.makeMessageType("yorkie.v1.RemoveDocumentResponse",()=>[{no:1,name:"change_pack",kind:"message",T:Dn}]),Vu=X.makeMessageType("yorkie.v1.PushPullChangesRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Dn},{no:4,name:"push_only",kind:"scalar",T:8}]),Ku=X.makeMessageType("yorkie.v1.PushPullChangesResponse",()=>[{no:1,name:"change_pack",kind:"message",T:Dn}]),Hu=X.makeMessageType("yorkie.v1.BroadcastRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]),Wu=X.makeMessageType("yorkie.v1.BroadcastResponse",[]),Gu={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Cu,O:Ru,kind:pt.Unary},deactivateClient:{name:"DeactivateClient",I:Du,O:Lu,kind:pt.Unary},attachDocument:{name:"AttachDocument",I:Mu,O:Bu,kind:pt.Unary},detachDocument:{name:"DetachDocument",I:qu,O:Fu,kind:pt.Unary},removeDocument:{name:"RemoveDocument",I:zu,O:Ju,kind:pt.Unary},pushPullChanges:{name:"PushPullChanges",I:Vu,O:Ku,kind:pt.Unary},watchDocument:{name:"WatchDocument",I:ju,O:Uu,kind:pt.ServerStreaming},broadcast:{name:"Broadcast",I:Hu,O:Wu,kind:pt.Unary}}};/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var It=null;try{It=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Ie(i,e,t){this.low=i|0,this.high=e|0,this.unsigned=!!t}Ie.prototype.__isLong__;Object.defineProperty(Ie.prototype,"__isLong__",{value:!0});function gt(i){return(i&&i.__isLong__)===!0}function fs(i){var e=Math.clz32(i&-i);return i?31-e:e}Ie.isLong=gt;var hs={},ds={};function dr(i,e){var t,n,r;return e?(i>>>=0,(r=0<=i&&i<256)&&(n=ds[i],n)?n:(t=ze(i,0,!0),r&&(ds[i]=t),t)):(i|=0,(r=-128<=i&&i<128)&&(n=hs[i],n)?n:(t=ze(i,i<0?-1:0,!1),r&&(hs[i]=t),t))}Ie.fromInt=dr;function Pt(i,e){if(isNaN(i))return e?In:zt;if(e){if(i<0)return In;if(i>=wa)return _a}else{if(i<=-ps)return wt;if(i+1>=ps)return Ta}return i<0?Pt(-i,e).neg():ze(i%Ir|0,i/Ir|0,e)}Ie.fromNumber=Pt;function ze(i,e,t){return new Ie(i,e,t)}Ie.fromBits=ze;var Bi=Math.pow;function Eo(i,e,t){if(i.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,i==="NaN"||i==="Infinity"||i==="+Infinity"||i==="-Infinity")return e?In:zt;if(t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=i.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return Eo(i.substring(1),e,t).neg();for(var r=Pt(Bi(t,8)),o=zt,s=0;s<i.length;s+=8){var u=Math.min(8,i.length-s),f=parseInt(i.substring(s,s+u),t);if(u<8){var g=Pt(Bi(t,u));o=o.mul(g).add(Pt(f))}else o=o.mul(r),o=o.add(Pt(f))}return o.unsigned=e,o}Ie.fromString=Eo;function Wt(i,e){return typeof i=="number"?Pt(i,e):typeof i=="string"?Eo(i,e):ze(i.low,i.high,typeof e=="boolean"?e:i.unsigned)}Ie.fromValue=Wt;var gs=65536,Yu=1<<24,Ir=gs*gs,wa=Ir*Ir,ps=wa/2,ms=dr(Yu),zt=dr(0);Ie.ZERO=zt;var In=dr(0,!0);Ie.UZERO=In;var _r=dr(1);Ie.ONE=_r;var Aa=dr(1,!0);Ie.UONE=Aa;var go=dr(-1);Ie.NEG_ONE=go;var Ta=ze(-1,2147483647,!1);Ie.MAX_VALUE=Ta;var _a=ze(-1,-1,!0);Ie.MAX_UNSIGNED_VALUE=_a;var wt=ze(0,-2147483648,!1);Ie.MIN_VALUE=wt;var le=Ie.prototype;le.toInt=function(){return this.unsigned?this.low>>>0:this.low};le.toNumber=function(){return this.unsigned?(this.high>>>0)*Ir+(this.low>>>0):this.high*Ir+(this.low>>>0)};le.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(wt)){var t=Pt(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var o=Pt(Bi(e,6),this.unsigned),s=this,u="";;){var f=s.div(o),g=s.sub(f.mul(o)).toInt()>>>0,v=g.toString(e);if(s=f,s.isZero())return v+u;for(;v.length<6;)v="0"+v;u=""+v+u}};le.getHighBits=function(){return this.high};le.getHighBitsUnsigned=function(){return this.high>>>0};le.getLowBits=function(){return this.low};le.getLowBitsUnsigned=function(){return this.low>>>0};le.getNumBitsAbs=function(){if(this.isNegative())return this.eq(wt)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1};le.isZero=function(){return this.high===0&&this.low===0};le.eqz=le.isZero;le.isNegative=function(){return!this.unsigned&&this.high<0};le.isPositive=function(){return this.unsigned||this.high>=0};le.isOdd=function(){return(this.low&1)===1};le.isEven=function(){return(this.low&1)===0};le.equals=function(e){return gt(e)||(e=Wt(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};le.eq=le.equals;le.notEquals=function(e){return!this.eq(e)};le.neq=le.notEquals;le.ne=le.notEquals;le.lessThan=function(e){return this.comp(e)<0};le.lt=le.lessThan;le.lessThanOrEqual=function(e){return this.comp(e)<=0};le.lte=le.lessThanOrEqual;le.le=le.lessThanOrEqual;le.greaterThan=function(e){return this.comp(e)>0};le.gt=le.greaterThan;le.greaterThanOrEqual=function(e){return this.comp(e)>=0};le.gte=le.greaterThanOrEqual;le.ge=le.greaterThanOrEqual;le.compare=function(e){if(gt(e)||(e=Wt(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};le.comp=le.compare;le.negate=function(){return!this.unsigned&&this.eq(wt)?wt:this.not().add(_r)};le.neg=le.negate;le.add=function(e){gt(e)||(e=Wt(e));var t=this.high>>>16,n=this.high&65535,r=this.low>>>16,o=this.low&65535,s=e.high>>>16,u=e.high&65535,f=e.low>>>16,g=e.low&65535,v=0,h=0,l=0,a=0;return a+=o+g,l+=a>>>16,a&=65535,l+=r+f,h+=l>>>16,l&=65535,h+=n+u,v+=h>>>16,h&=65535,v+=t+s,v&=65535,ze(l<<16|a,v<<16|h,this.unsigned)};le.subtract=function(e){return gt(e)||(e=Wt(e)),this.add(e.neg())};le.sub=le.subtract;le.multiply=function(e){if(this.isZero())return this;if(gt(e)||(e=Wt(e)),It){var t=It.mul(this.low,this.high,e.low,e.high);return ze(t,It.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?In:zt;if(this.eq(wt))return e.isOdd()?wt:zt;if(e.eq(wt))return this.isOdd()?wt:zt;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(ms)&&e.lt(ms))return Pt(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,r=this.high&65535,o=this.low>>>16,s=this.low&65535,u=e.high>>>16,f=e.high&65535,g=e.low>>>16,v=e.low&65535,h=0,l=0,a=0,y=0;return y+=s*v,a+=y>>>16,y&=65535,a+=o*v,l+=a>>>16,a&=65535,a+=s*g,l+=a>>>16,a&=65535,l+=r*v,h+=l>>>16,l&=65535,l+=o*g,h+=l>>>16,l&=65535,l+=s*f,h+=l>>>16,l&=65535,h+=n*v+r*g+o*f+s*u,h&=65535,ze(a<<16|y,h<<16|l,this.unsigned)};le.mul=le.multiply;le.divide=function(e){if(gt(e)||(e=Wt(e)),e.isZero())throw Error("division by zero");if(It){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?It.div_u:It.div_s)(this.low,this.high,e.low,e.high);return ze(t,It.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?In:zt;var n,r,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return In;if(e.gt(this.shru(1)))return Aa;o=In}else{if(this.eq(wt)){if(e.eq(_r)||e.eq(go))return wt;if(e.eq(wt))return _r;var s=this.shr(1);return n=s.div(e).shl(1),n.eq(zt)?e.isNegative()?_r:go:(r=this.sub(e.mul(n)),o=n.add(r.div(e)),o)}else if(e.eq(wt))return this.unsigned?In:zt;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=zt}for(r=this;r.gte(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var u=Math.ceil(Math.log(n)/Math.LN2),f=u<=48?1:Bi(2,u-48),g=Pt(n),v=g.mul(e);v.isNegative()||v.gt(r);)n-=f,g=Pt(n,this.unsigned),v=g.mul(e);g.isZero()&&(g=_r),o=o.add(g),r=r.sub(v)}return o};le.div=le.divide;le.modulo=function(e){if(gt(e)||(e=Wt(e)),It){var t=(this.unsigned?It.rem_u:It.rem_s)(this.low,this.high,e.low,e.high);return ze(t,It.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};le.mod=le.modulo;le.rem=le.modulo;le.not=function(){return ze(~this.low,~this.high,this.unsigned)};le.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};le.clz=le.countLeadingZeros;le.countTrailingZeros=function(){return this.low?fs(this.low):fs(this.high)+32};le.ctz=le.countTrailingZeros;le.and=function(e){return gt(e)||(e=Wt(e)),ze(this.low&e.low,this.high&e.high,this.unsigned)};le.or=function(e){return gt(e)||(e=Wt(e)),ze(this.low|e.low,this.high|e.high,this.unsigned)};le.xor=function(e){return gt(e)||(e=Wt(e)),ze(this.low^e.low,this.high^e.high,this.unsigned)};le.shiftLeft=function(e){return gt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ze(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):ze(0,this.low<<e-32,this.unsigned)};le.shl=le.shiftLeft;le.shiftRight=function(e){return gt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ze(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):ze(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};le.shr=le.shiftRight;le.shiftRightUnsigned=function(e){return gt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ze(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?ze(this.high,0,this.unsigned):ze(this.high>>>e-32,0,this.unsigned)};le.shru=le.shiftRightUnsigned;le.shr_u=le.shiftRightUnsigned;le.rotateLeft=function(e){var t;return gt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?ze(this.high,this.low,this.unsigned):e<32?(t=32-e,ze(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,ze(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))};le.rotl=le.rotateLeft;le.rotateRight=function(e){var t;return gt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?ze(this.high,this.low,this.unsigned):e<32?(t=32-e,ze(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,ze(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))};le.rotr=le.rotateRight;le.toSigned=function(){return this.unsigned?ze(this.low,this.high,!1):this};le.toUnsigned=function(){return this.unsigned?this:ze(this.low,this.high,!0)};le.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};le.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};le.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};Ie.fromBytes=function(e,t,n){return n?Ie.fromBytesLE(e,t):Ie.fromBytesBE(e,t)};Ie.fromBytesLE=function(e,t){return new Ie(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};Ie.fromBytesBE=function(e,t){return new Ie(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};const Zu=X.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);X.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:xn}]);X.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);X.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:Xu,repeated:!0}]);const Xu=X.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"QuotaFailure_Violation"});X.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:Qu,repeated:!0}]);const Qu=X.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});X.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:ec,repeated:!0}]);const ec=X.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"BadRequest_FieldViolation"});X.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);X.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);X.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:tc,repeated:!0}]);const tc=X.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"});X.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var Q=(i=>(i.Ok="ok",i.ErrClientNotActivated="ErrClientNotActivated",i.ErrClientNotFound="ErrClientNotFound",i.ErrUnimplemented="ErrUnimplemented",i.ErrInvalidType="ErrInvalidType",i.ErrDummy="ErrDummy",i.ErrDocumentNotAttached="ErrDocumentNotAttached",i.ErrDocumentNotDetached="ErrDocumentNotDetached",i.ErrDocumentRemoved="ErrDocumentRemoved",i.ErrInvalidObjectKey="ErrInvalidObjectKey",i.ErrInvalidArgument="ErrInvalidArgument",i.ErrNotInitialized="ErrNotInitialized",i.ErrNotReady="ErrNotReady",i.ErrRefused="ErrRefused",i.ErrContextNotProvided="ErrContextNotProvided",i))(Q||{});class ee extends Error{constructor(t,n){super(n);J(this,"name","YorkieError");J(this,"stack");this.code=t,this.message=n,this.toString=()=>`[code=${this.code}]: ${this.message}`}}function $t(i){if(i instanceof Map){const e=Array.from(i);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(i))}const Ea=i=>i?Object.entries(i).length===0:!0,Pr=i=>{const e={};for(const[t,n]of Object.entries(i))e[t]=JSON.stringify(n);return e},Sr=i=>{const e={};for(const[t,n]of Object.entries(i))e[t]=JSON.parse(n);return e};var Zn=(i=>(i.Put="put",i.Clear="clear",i))(Zn||{});class io{constructor(e,t){J(this,"context");J(this,"presence");this.context=e,this.presence=t}set(e,t){for(const n of Object.keys(e))this.presence[n]=e[n];this.context.setPresenceChange({type:"put",presence:$t(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:"clear"})}}const Ji="000000000000000000000000",nc="FFFFFFFFFFFFFFFFFFFFFFFF";class At{constructor(e,t,n){J(this,"lamport");J(this,"delimiter");J(this,"actorID");this.lamport=e,this.delimiter=t,this.actorID=n}static of(e,t,n){return new At(e,t,n)}static fromStruct(e){return At.of(Ie.fromString(e.lamport,!0),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new At(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport.greaterThan(e.lamport))return 1;if(e.lamport.greaterThan(this.lamport))return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const Oo=0,rc=4294967295,ic=Ie.MAX_VALUE,Vt=new At(Ie.fromNumber(0),Oo,Ji);new At(Ie.fromNumber(1),Oo+1,Ji);const Vr=new At(ic,rc,nc);function wn(i){return i.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class ii{constructor(e){J(this,"createdAt");J(this,"movedAt");J(this,"removedAt");this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class Wn extends ii{constructor(e){super(e)}}class So{constructor(e,t){J(this,"strKey");J(this,"value");this.strKey=e,this.value=t}static of(e,t){return new So(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class Zr{constructor(){J(this,"nodeMapByKey");J(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new Zr}set(e,t,n){let r;const o=this.nodeMapByKey.get(e);o!=null&&!o.isRemoved()&&o.remove(n)&&(r=o.getValue());const s=So.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),s),(o==null||n.after(o.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,s),t.setMovedAt(n)),r}delete(e,t){if(!this.nodeMapByCreatedAt.has(e.toIDString()))throw new ee(Q.ErrInvalidArgument,`fail to find ${e.toIDString()}`);const n=this.nodeMapByCreatedAt.get(e.toIDString());return n.remove(t),n.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new ee(Q.ErrInvalidArgument,`fail to find ${e.getCreatedAt().toIDString()}`);const n=this.nodeMapByKey.get(t.getStrKey());t===n&&this.nodeMapByKey.delete(n.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const n=this.nodeMapByKey.get(e);if(n!=null&&n.remove(t))return n.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class Tt extends Wn{constructor(t,n){super(t);J(this,"memberNodes");this.memberNodes=n}static create(t,n){if(!n)return new Tt(t,Zr.create());const r=Zr.create();for(const[o,s]of Object.entries(n))r.set(o,s.deepcopy(),s.getCreatedAt());return new Tt(t,r)}subPathOf(t){return this.memberNodes.subPathOf(t)}purge(t){this.memberNodes.purge(t)}set(t,n,r){return this.memberNodes.set(t,n,r)}delete(t,n){return this.memberNodes.delete(t,n)}deleteByKey(t,n){return this.memberNodes.deleteByKey(t,n)}get(t){const n=this.memberNodes.get(t);return n==null?void 0:n.getValue()}getByID(t){const n=this.memberNodes.getByID(t);return n==null?void 0:n.getValue()}has(t){return this.memberNodes.has(t)}toJSON(){const t=[];for(const[n,r]of this)t.push(`"${wn(n)}":${r.toJSON()}`);return`{${t.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(const[n,r]of this){const{createdAt:o,value:s,type:u}=r.toJSForTest();t[n]={key:n,createdAt:o,value:s,type:u}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_OBJECT"}}getKeys(){const t=Array();for(const[n]of this)t.push(n);return t}toSortedJSON(){var r;const t=Array();for(const[o]of this)t.push(o);const n=[];for(const o of t.sort()){const s=(r=this.memberNodes.get(o))==null?void 0:r.getValue();n.push(`"${wn(o)}":${s.toSortedJSON()}`)}return`{${n.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const t=Tt.create(this.getCreatedAt());for(const n of this.memberNodes)t.memberNodes.set(n.getStrKey(),n.getValue().deepcopy(),this.getPositionedAt());return t.remove(this.getRemovedAt()),t}getDescendants(t){for(const n of this.memberNodes){const r=n.getValue();if(t(r,this))return;r instanceof Wn&&r.getDescendants(t)}}*[Symbol.iterator](){const t=new Set;for(const n of this.memberNodes)t.has(n.getStrKey())||(t.add(n.getStrKey()),n.isRemoved()||(yield[n.getStrKey(),n.getValue()]))}}var He=(i=>(i.Local="local",i.Remote="remote",i.UndoRedo="undoredo",i))(He||{});class Ht{constructor(e,t){J(this,"parentCreatedAt");J(this,"executedAt");this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new ee(Q.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class Oa{constructor(e){J(this,"value");J(this,"left");J(this,"right");J(this,"parent");J(this,"weight");this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class Xr{constructor(e){J(this,"root");this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}if(e>t.getLength())throw new ee(Q.ErrInvalidArgument,`out of index range: pos: ${e} > node.length: ${t.getLength()}`);return[t,e]}indexOf(e){if(!e||e!==this.root&&!e.hasLinks())return-1;let t=0,n=e,r;for(;n;)(!r||r===n.getRight())&&(t+=n.getLength()+(n.hasLeft()?n.getLeftWeight():0)),r=n,n=n.getParent();return t-e.getLength()}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new Xr(e.getLeft());t.root&&t.root.setParent();const n=new Xr(e.getRight());if(n.root&&n.root.setParent(),t.root){const r=t.getRightmost();t.splayNode(r),t.root.setRight(n.root),n.root&&n.root.setParent(t.root),this.root=t.root}else this.root=n.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const n of t)n.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){e&&(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){e&&(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}var at=(i=>(i[i.Null=0]="Null",i[i.Boolean=1]="Boolean",i[i.Integer=2]="Integer",i[i.Long=3]="Long",i[i.Double=4]="Double",i[i.String=5]="String",i[i.Bytes=6]="Bytes",i[i.Date=7]="Date",i))(at||{});class Ye extends ii{constructor(t,n){super(n);J(this,"valueType");J(this,"value");this.valueType=Ye.getPrimitiveType(t),this.value=t===void 0?null:t}static of(t,n){return new Ye(t,n)}static valueFromBytes(t,n){switch(t){case 0:return null;case 1:return!!n[0];case 2:return n[0]|n[1]<<8|n[2]<<16|n[3]<<24;case 4:{const r=new DataView(n.buffer);return n.forEach(function(o,s){r.setUint8(s,o)}),r.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(n);case 3:return Ie.fromBytesLE(Array.from(n));case 6:return n;case 7:return new Date(Ie.fromBytesLE(Array.from(n),!0).toNumber());default:throw new ee(Q.ErrUnimplemented,`unimplemented type: ${t}`)}}toJSON(){return this.valueType===5?`"${wn(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const t=Ye.of(this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t.setRemovedAt(this.getRemovedAt()),t}getType(){return this.valueType}static getPrimitiveType(t){switch(typeof t){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(t)?2:4;case"string":return 5;case"object":if(t===null)return 0;if(t instanceof Ie)return 3;if(t instanceof Uint8Array)return 6;if(t instanceof Date)return 7}}static isSupport(t){return Ye.getPrimitiveType(t)!==void 0}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===2||t===3||t===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 4:{const t=this.value,n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,t,!0),n}case 5:return new TextEncoder().encode(this.value);case 3:{const n=this.value.toBytesLE();return Uint8Array.from(n)}case 6:return this.value;case 7:{const t=this.value,n=Ie.fromNumber(t.getTime(),!0).toBytesLE();return Uint8Array.from(n)}default:throw new ee(Q.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class qi extends Oa{constructor(t){super(t);J(this,"prev");J(this,"next");this.value=t}static createAfter(t,n){const r=new qi(n),o=t.next;return t.next=r,r.prev=t,r.next=o,o&&(o.prev=r),r}remove(t){return this.value.remove(t)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Qr{constructor(){J(this,"dummyHead");J(this,"last");J(this,"nodeMapByIndex");J(this,"nodeMapByCreatedAt");const e=Ye.of(0,Vt);e.setRemovedAt(Vt),this.dummyHead=new qi(e),this.last=this.dummyHead,this.nodeMapByIndex=new Xr,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Qr}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let n=this.nodeMapByCreatedAt.get(e.toIDString());if(!n)throw new ee(Q.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);for(;n.getNext()&&n.getNext().getPositionedAt().after(t);)n=n.getNext();return n}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,n=t.getCreatedAt()){const r=this.findNextBeforeExecutedAt(e,n),o=qi.createAfter(r,t);r===this.last&&(this.last=o),this.nodeMapByIndex.insertAfter(r,o),this.nodeMapByCreatedAt.set(o.getCreatedAt().toIDString(),o)}moveAfter(e,t,n){const r=this.nodeMapByCreatedAt.get(e.toIDString());if(!r)throw new ee(Q.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);const o=this.nodeMapByCreatedAt.get(t.toIDString());if(!o)throw new ee(Q.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);r!==o&&(!o.getValue().getMovedAt()||n.after(o.getValue().getMovedAt()))&&(this.release(o),this.insertAfter(r.getCreatedAt(),o.getValue(),n),o.getValue().setMovedAt(n))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new ee(Q.ErrInvalidArgument,`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`);this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,n]=this.nodeMapByIndex.find(e);let r=t;if(e===0&&t===this.dummyHead||n>0)do r&&(r=r.getNext());while(r&&r.isRemoved());return r}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const n=this.nodeMapByCreatedAt.get(e.toIDString()),r=n.isRemoved();return n.remove(t)&&!r&&this.nodeMapByIndex.splayNode(n),n.getValue()}deleteByIndex(e,t){const n=this.getByIndex(e);if(n)return n.remove(t)&&this.nodeMapByIndex.splayNode(n),n.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const n=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${n}}`):e.push(`[${n}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class xt extends Wn{constructor(t,n){super(t);J(this,"elements");this.elements=n}static create(t,n){if(!n)return new xt(t,Qr.create());const r=Qr.create();for(const o of n)r.insertAfter(r.getLastCreatedAt(),o.deepcopy());return new xt(t,r)}subPathOf(t){return this.elements.subPathOf(t)}purge(t){this.elements.purge(t)}insertAfter(t,n){this.elements.insertAfter(t,n)}moveAfter(t,n,r){this.elements.moveAfter(t,n,r)}get(t){const n=this.elements.getByIndex(t);return n==null?void 0:n.getValue()}getByID(t){const n=this.elements.getByID(t);return n==null?void 0:n.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(t){return this.elements.getPrevCreatedAt(t)}delete(t,n){return this.elements.delete(t,n)}deleteByIndex(t,n){return this.elements.deleteByIndex(t,n)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const t of this.elements)t.isRemoved()||(yield t.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(t){for(const n of this.elements){const r=n.getValue();if(t(r,this))return;r instanceof Wn&&r.getDescendants(t)}}toJSON(){const t=[];for(const n of this)t.push(n.toJSON());return`[${t.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(let n=0;n<this.length;n++){const{createdAt:r,value:o,type:s}=this.get(n).toJSForTest();t[n]={key:String(n),createdAt:r,value:o,type:s}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const t=xt.create(this.getCreatedAt());for(const n of this.elements)t.elements.insertAfter(t.getLastCreatedAt(),n.getValue().deepcopy());return t.remove(this.getRemovedAt()),t}}class Xn extends Ht{constructor(t,n,r){super(t,r);J(this,"createdAt");this.createdAt=n}static create(t,n,r){return new Xn(t,n,r)}execute(t,n){var g;const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new ee(Q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Wn))throw new ee(Q.ErrInvalidArgument,`only object and array can execute remove: ${r}`);if(n===He.UndoRedo){let v=r.getByID(this.createdAt);for(;v;){if(v.getRemovedAt())return;v=(g=t.findElementPairByCreatedAt(v.getCreatedAt()))==null?void 0:g.parent}}const o=r.subPathOf(this.createdAt),s=this.toReverseOperation(r),u=r.delete(this.createdAt,this.getExecutedAt());return t.registerRemovedElement(u),{opInfos:r instanceof xt?[{type:"remove",path:t.createPath(this.getParentCreatedAt()),index:Number(o)}]:[{type:"remove",path:t.createPath(this.getParentCreatedAt()),key:o}],reverseOp:s}}toReverseOperation(t){if(t instanceof Tt){const n=t.subPathOf(this.createdAt);if(n!==void 0){const r=t.get(n);if(r!==void 0)return hr.create(n,r.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class hr extends Ht{constructor(t,n,r,o){super(r,o);J(this,"key");J(this,"value");this.key=t,this.value=n}static create(t,n,r,o){return new hr(t,n,r,o)}execute(t,n){var g;const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new ee(Q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Tt))throw new ee(Q.ErrInvalidArgument,"fail to execute, only object can execute set");if(n===He.UndoRedo){let v=r;for(;v;){if(v.getRemovedAt())return;v=(g=t.findElementPairByCreatedAt(v.getCreatedAt()))==null?void 0:g.parent}}const o=r.get(this.key),s=this.toReverseOperation(o),u=this.value.deepcopy(),f=r.set(this.key,u,this.getExecutedAt());return n===He.UndoRedo&&t.findByCreatedAt(u.getCreatedAt())&&t.deregisterElement(u),t.registerElement(u,r),f&&t.registerRemovedElement(f),{opInfos:[{type:"set",path:t.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:s}}toReverseOperation(t){let n=Xn.create(this.getParentCreatedAt(),this.value.getCreatedAt());return t!==void 0&&!t.isRemoved()&&(n=hr.create(this.key,t.deepcopy(),this.getParentCreatedAt())),n}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class oi extends Ht{constructor(t,n,r,o){super(t,o);J(this,"prevCreatedAt");J(this,"value");this.prevCreatedAt=n,this.value=r}static create(t,n,r,o){return new oi(t,n,r,o)}execute(t){const n=t.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new ee(Q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof xt))throw new ee(Q.ErrInvalidArgument,"fail to execute, only array can execute add");const r=n,o=this.value.deepcopy();return r.insertAfter(this.prevCreatedAt,o),t.registerElement(o,r),{opInfos:[{type:"add",path:t.createPath(this.getParentCreatedAt()),index:Number(r.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class Hn extends Ht{constructor(t,n,r,o){super(t,o);J(this,"prevCreatedAt");J(this,"createdAt");this.prevCreatedAt=n,this.createdAt=r}static create(t,n,r,o){return new Hn(t,n,r,o)}execute(t){const n=t.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new ee(Q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof xt))throw new ee(Q.ErrInvalidArgument,"fail to execute, only array can execute move");const r=n,o=Number(r.subPathOf(this.createdAt));r.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const s=Number(r.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:t.createPath(this.getParentCreatedAt()),index:s,previousIndex:o}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class ur{constructor(e,t,n,r){J(this,"key");J(this,"value");J(this,"updatedAt");J(this,"_isRemoved");this.key=e,this.value=t,this.updatedAt=n,this._isRemoved=r}static of(e,t,n,r){return new ur(e,t,n,r)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}}class Rn{constructor(){J(this,"nodeMapByKey");J(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Rn}getNodeMapByKey(){return this.nodeMapByKey}set(e,t,n){const r=this.nodeMapByKey.get(e);if(r&&r.isRemoved()&&n.after(r.getUpdatedAt())&&(this.numberOfRemovedElement-=1),r===void 0||n.after(r.getUpdatedAt())){const o=ur.of(e,t,n,!1);return this.nodeMapByKey.set(e,o),r!==void 0&&r.isRemoved()?[r,o]:[void 0,o]}return r.isRemoved()?[r,void 0]:[void 0,void 0]}setInternal(e,t,n,r){const o=ur.of(e,t,n,r);this.nodeMapByKey.set(e,o),r&&this.numberOfRemovedElement++}remove(e,t){const n=this.nodeMapByKey.get(e),r=[];if(n===void 0||t.after(n.getUpdatedAt())){if(n===void 0){this.numberOfRemovedElement+=1;const u=ur.of(e,"",t,!0);return this.nodeMapByKey.set(e,u),r.push(u),r}const o=n.isRemoved();o||(this.numberOfRemovedElement+=1),o&&r.push(n);const s=ur.of(e,n.getValue(),t,!0);return this.nodeMapByKey.set(e,s),r.push(s),r}return r}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new Rn;for(const[,t]of this.nodeMapByKey)e.setInternal(t.getKey(),t.getValue(),t.getUpdatedAt(),t.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,n]of this.nodeMapByKey)n.isRemoved()||e.push(`"${wn(t)}":"${wn(n.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,n]of this.nodeMapByKey)n.isRemoved()||(e[t]=n.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const t=this.nodeMapByKey.get(e.getKey());t==null||t.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}class ei{constructor(e){J(this,"attributes");J(this,"content");this.attributes=Rn.create(),this.content=e}static create(e){return new ei(e)}get length(){return this.content.length}substring(e,t){const n=new ei(this.content.substring(e,t));return n.attributes=this.attributes.deepcopy(),n}setAttr(e,t,n){return this.attributes.set(e,t,n)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=wn(this.content),t=this.attributes.toObject(),n=[];for(const[r,o]of Object.entries(t)){const s=JSON.parse(o),u=typeof s=="string"?`"${wn(r)}":"${wn(s)}"`:`"${wn(r)}":${String(s)}`;n.push(u)}return n.sort(),n.length===0?`{"val":"${e}"}`:`{"attrs":{${n.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof ur&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const t of this.attributes)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}class Ct extends ii{constructor(t,n){super(n);J(this,"rgaTreeSplit");this.rgaTreeSplit=t}static create(t,n){return new Ct(t,n)}edit(t,n,r,o,s){const u=n?ei.create(n):void 0;if(u&&o)for(const[a,y]of Object.entries(o))u.setAttr(a,y,r);const[f,g,v,h]=this.rgaTreeSplit.edit(t,r,u,s),l=h.map(a=>({...a,value:a.value?{attributes:Sr(a.value.getAttributes()),content:a.value.getContent()}:{attributes:void 0,content:""},type:"content"}));return[g,l,v,[f,f]]}setStyle(t,n,r,o){const[,s]=this.rgaTreeSplit.findNodeWithSplit(t[1],r),[,u]=this.rgaTreeSplit.findNodeWithSplit(t[0],r),f=[],g=this.rgaTreeSplit.findBetween(u,s),v=new Map,h=[];for(const a of g){const y=a.getCreatedAt().getActorID(),b=o!=null&&o.size?o.has(y)?o.get(y):Vt:Vr;if(a.canStyle(r,b)){const w=v.get(y),m=a.getCreatedAt();(!w||m.after(w))&&v.set(y,m),h.push(a)}}const l=[];for(const a of h){if(a.isRemoved())continue;const[y,b]=this.rgaTreeSplit.findIndexesFromRange(a.createPosRange());f.push({type:"style",actor:r.getActorID(),from:y,to:b,value:{attributes:Sr(n)}});for(const[w,m]of Object.entries(n)){const[d]=a.getValue().setAttr(w,m,r);d!==void 0&&l.push({parent:a.getValue(),child:d})}}return[v,l,f]}indexRangeToPosRange(t,n){const r=this.rgaTreeSplit.indexToPos(t);return t===n?[r,r]:[r,this.rgaTreeSplit.indexToPos(n)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}toJSON(){const t=[];for(const n of this.rgaTreeSplit)n.isRemoved()||t.push(n.getValue().toJSON());return`[${t.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const t=[];for(const n of this.rgaTreeSplit)if(!n.isRemoved()){const r=n.getValue();t.push({attributes:Sr(r.getAttributes()),content:r.getContent()})}return t}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const t=new Ct(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return t.remove(this.getRemovedAt()),t}findIndexesFromRange(t){return this.rgaTreeSplit.findIndexesFromRange(t)}getGCPairs(){const t=[];for(const n of this.rgaTreeSplit){n.getRemovedAt()&&t.push({parent:this.rgaTreeSplit,child:n});for(const r of n.getValue().getGCPairs())t.push(r)}return t}}class si extends Ht{constructor(t,n,r,o,s,u,f){super(t,f);J(this,"fromPos");J(this,"toPos");J(this,"maxCreatedAtMapByActor");J(this,"content");J(this,"attributes");this.fromPos=n,this.toPos=r,this.maxCreatedAtMapByActor=o,this.content=s,this.attributes=u}static create(t,n,r,o,s,u,f){return new si(t,n,r,o,s,u,f)}execute(t){const n=t.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new ee(Q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof Ct))throw new ee(Q.ErrInvalidArgument,"fail to execute, only Text can execute edit");const r=n,[,o,s]=r.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);for(const u of s)t.registerGCPair(u);return{opInfos:o.map(({from:u,to:f,value:g})=>({type:"edit",from:u,to:f,value:g,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),n=this.fromPos.toTestString(),r=this.toPos.toTestString(),o=this.content;return`${t}.EDIT(${n},${r},${o})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class ai extends Ht{constructor(t,n,r,o,s,u){super(t,u);J(this,"fromPos");J(this,"toPos");J(this,"maxCreatedAtMapByActor");J(this,"attributes");this.fromPos=n,this.toPos=r,this.maxCreatedAtMapByActor=o,this.attributes=s}static create(t,n,r,o,s,u){return new ai(t,n,r,o,s,u)}execute(t){const n=t.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new ee(Q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof Ct))throw new ee(Q.ErrInvalidArgument,"fail to execute, only Text can execute edit");const r=n,[,o,s]=r.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);for(const u of o)t.registerGCPair(u);return{opInfos:s.map(({from:u,to:f,value:g})=>({type:"style",from:u,to:f,value:g,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),n=this.fromPos.toTestString(),r=this.toPos.toTestString(),o=this.attributes;return`${t}.STYL(${n},${r},${JSON.stringify(o)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const oc=2,sc="root",Pn="text";function Ur(i,e){let t=0;const n=i.children;for(let r=0;r<e;r++){const o=n[r];!o||o.isRemoved||(t+=o.paddedSize)}return t}class ac{constructor(e,t=[]){J(this,"type");J(this,"parent");J(this,"_children");J(this,"size");if(this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new ee(Q.ErrRefused,"Text node cannot have children")}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*t,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const t of this._children){const n=t.updateDescendantsSize();t.isRemoved||(e+=n)}return this.size+=e,this.paddedSize}get isText(){return this.type===Pn}get paddedSize(){return this.size+(this.isText?0:oc)}isAncestorOf(e){return lc(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}get prevSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e-1];if(t)return t}splitText(e,t){if(e===0||e===this.size)return;const n=this.value.slice(0,e),r=this.value.slice(e);if(!r.length)return;this.value=n;const o=this.cloneText(e+t);return o.value=r,this.parent.insertAfterInternal(o,this),o}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}append(...e){if(this.isText)throw new ee(Q.ErrRefused,"Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new ee(Q.ErrRefused,"Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this}insertBefore(e,t){if(this.isText)throw new ee(Q.ErrRefused,"Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new ee(Q.ErrInvalidArgument,"child not found");this.insertAtInternal(e,n),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new ee(Q.ErrRefused,"Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new ee(Q.ErrInvalidArgument,"child not found");this.insertAtInternal(e,n+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new ee(Q.ErrRefused,"Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new ee(Q.ErrRefused,"Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new ee(Q.ErrInvalidArgument,"child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const n=this.cloneElement(t);this.parent.insertAfterInternal(n,this),n.updateAncestorsSize();const r=this.children.slice(0,e),o=this.children.slice(e);this._children=r,n._children=o,this.size=this._children.reduce((s,u)=>s+u.paddedSize,0),n.size=n._children.reduce((s,u)=>s+u.paddedSize,0);for(const s of n._children)s.parent=n;return n}insertAfterInternal(e,t){if(this.isText)throw new ee(Q.ErrRefused,"Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new ee(Q.ErrInvalidArgument,"child not found");this.insertAtInternal(e,n+1)}insertAtInternal(e,t){if(this.isText)throw new ee(Q.ErrRefused,"Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new ee(Q.ErrRefused,"Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(r=>!r.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new ee(Q.ErrRefused,"Text node cannot have children");let t=e;for(;t;){const n=this._children.indexOf(t);if(n!==-1)return n;t=t.parent}return-1}}function lc(i,e){if(i===e)return!1;for(;e.parent;){if(e.parent===i)return!0;e=e.parent}return!1}var it=(i=>(i.Start="Start",i.End="End",i.Text="Text",i))(it||{});function Sa(i,e,t,n){if(e>t)throw new ee(Q.ErrInvalidArgument,`from is greater than to: ${e} > ${t}`);if(e>i.size)throw new ee(Q.ErrInvalidArgument,`from is out of range: ${e} > ${i.size}`);if(t>i.size)throw new ee(Q.ErrInvalidArgument,`to is out of range: ${t} > ${i.size}`);if(e===t)return;let r=0;for(const o of i.children){if(e-o.paddedSize<r&&r<t){const s=o.isText?e-r:e-r-1,u=o.isText?t-r:t-r-1,f=!o.isText&&s<0,g=!o.isText&&u>o.size;(o.isText||f)&&n([o,o.isText?"Text":"Start"],g),Sa(o,Math.max(0,s),Math.min(u,o.size),n),g&&n([o,"End"],g)}r+=o.paddedSize}}function ka(i,e,t=0){for(const n of i.children)ka(n,e,t+1);e(i,t)}function Vi(i,e,t=0){for(const n of i._children)Vi(n,e,t+1);e(i,t)}function po(i,e,t=!0){if(e>i.size)throw new ee(Q.ErrInvalidArgument,`index is out of range: ${e} > ${i.size}`);if(i.isText)return{node:i,offset:e};let n=0,r=0;for(const o of i.children){if(t&&o.isText&&o.size>=e-r)return po(o,e-r,t);if(e===r)return{node:i,offset:n};if(!t&&o.paddedSize===e-r)return{node:i,offset:n+1};if(o.paddedSize>e-r)return po(o,e-r-1,t);r+=o.paddedSize,n+=1}return{node:i,offset:n}}function xa(i){return i.isText||i.children.length===0?i:xa(i.children[0])}function uc(i,e){if(i.size<e)throw new ee(Q.ErrInvalidArgument,"unacceptable path");for(let t=0;t<i.children.length;t++){const n=i.children[t];if(n.size<e)e-=n.size;else{i=n;break}}return{node:i,offset:e}}class cc{constructor(e){J(this,"root");this.root=e}tokensBetween(e,t,n){Sa(this.root,e,t,n)}traverse(e){ka(this.root,e,0)}traverseAll(e){Vi(this.root,e,0)}findTreePos(e,t=!0){return po(this.root,e,t)}treePosToPath(e){const t=[];let n=e.node;if(n.isText){const r=n.parent.findOffset(n);if(r===-1)throw new ee(Q.ErrInvalidArgument,"invalid treePos");const o=Ur(n.parent,r);t.push(o+e.offset),n=n.parent}else if(n.hasTextChild()){const r=Ur(n,e.offset);t.push(r)}else t.push(e.offset);for(;n.parent;){const r=n.parent.findOffset(n);if(r===-1)throw new ee(Q.ErrInvalidArgument,"invalid treePos");t.push(r),n=n.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new ee(Q.ErrInvalidArgument,"unacceptable path");let t=this.root;for(let n=0;n<e.length-1;n++){const r=e[n];if(t=t.children[r],!t)throw new ee(Q.ErrInvalidArgument,"unacceptable path")}if(t.hasTextChild())return uc(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new ee(Q.ErrInvalidArgument,"unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:n}=e;if(t.isText){if(t.size===n){const r=t.nextSibling;return r||t.parent}return t}return t.children.length===n?t:xa(t.children[n])}indexOf(e){let{node:t}=e;const{offset:n}=e;let r=0,o=1;if(t.isText){r+=n;const s=t.parent,u=s.findOffset(t);if(u===-1)throw new ee(Q.ErrInvalidArgument,"invalid pos");r+=Ur(s,u),t=t.parent}else r+=Ur(t,n);for(;t!=null&&t.parent;){const s=t.parent,u=s.findOffset(t);if(u===-1)throw new ee(Q.ErrInvalidArgument,"invalid pos");r+=Ur(s,u),o++,t=t.parent}return r+o-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const fc=(i,e)=>i===e?0:i<e?-1:1;class hc{constructor(e,t,n){J(this,"key");J(this,"value");J(this,"parent");J(this,"left");J(this,"right");J(this,"isRed");this.key=e,this.value=t,this.isRed=n}}class dc{constructor(e){J(this,"stack");this.stack=[],this.traverseInorder(e)}traverseInorder(e){e&&(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class Na{constructor(e){J(this,"root");J(this,"comparator");J(this,"counter");this.comparator=typeof e<"u"?e:fc,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new dc(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const n=this.comparator(e,t.key);if(n>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(n<0)if(t.left)t.left.parent=t,t=t.left;else{let r=t.parent,o=t;for(;r&&o===r.left;)o=r,r=r.parent;return r}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const n=this.comparator(e,t.key);if(n===0)return t;n<0?t=t.left:n>0&&(t=t.right)}}putInternal(e,t,n){if(!n)return this.counter+=1,new hc(e,t,!0);const r=this.comparator(e,n.key);return r<0?n.left=this.putInternal(e,t,n.left):r>0?n.right=this.putInternal(e,t,n.right):n.value=t,this.isRed(n.right)&&!this.isRed(n.left)&&(n=this.rotateLeft(n)),this.isRed(n.left)&&this.isRed(n.left.left)&&(n=this.rotateRight(n)),this.isRed(n.left)&&this.isRed(n.right)&&this.flipColors(n),n}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const n=this.min(e.right);e.value=n.value,e.key=n.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class Jt{constructor(e,t){J(this,"parentID");J(this,"leftSiblingID");this.parentID=e,this.leftSiblingID=t}static of(e,t){return new Jt(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:n}=e,r;return n.isText?(n.parent.children[0]===n&&t===0?r=n.parent:r=n,n=n.parent):t===0?r=n:r=n.children[t-1],Jt.of(n.id,ht.of(r.getCreatedAt(),r.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return Jt.of(ht.of(At.fromStruct(e.parentID.createdAt),e.parentID.offset),ht.of(At.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const t=this.getParentID(),n=this.getLeftSiblingID(),r=e.findFloorNode(t);let o=e.findFloorNode(n);if(!r||!o)throw new ee(Q.ErrRefused,`cannot find node of CRDTTreePos(${t.toTestString()}, ${n.toTestString()})`);return!n.equals(t)&&n.getOffset()>0&&n.getOffset()===o.id.getOffset()&&o.insPrevID&&(o=e.findFloorNode(o.insPrevID)),[r,o]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class ht{constructor(e,t){J(this,"createdAt");J(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new ht(e,t)}static fromStruct(e){return ht.of(At.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const n=e.getCreatedAt().compare(t.getCreatedAt());return n!==0?n:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class kt extends ac{constructor(t,n,r,o,s){super(n);J(this,"id");J(this,"removedAt");J(this,"attrs");J(this,"insPrevID");J(this,"insNextID");J(this,"_value","");this.id=t,this.removedAt=s,o&&(this.attrs=o),typeof r=="string"?this.value=r:Array.isArray(r)&&(this._children=r)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(t,n,r,o){return new kt(t,n,r,o)}deepcopy(){var n;const t=new kt(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(n=this.attrs)==null?void 0:n.deepcopy(),t._children=this._children.map(r=>{const o=r.deepcopy();return o.parent=t,o}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new ee(Q.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(t){if(!this.isText)throw new ee(Q.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=t,this.size=t.length}get isRemoved(){return!!this.removedAt}remove(t){const n=!this.removedAt;(!this.removedAt||this.removedAt.compare(t)>0)&&(this.removedAt=t),n&&this.updateAncestorsSize()}cloneText(t){return new kt(ht.of(this.id.getCreatedAt(),t),this.type,void 0,void 0,this.removedAt)}cloneElement(t){return new kt(ht.of(t(),0),this.type,void 0,void 0,this.removedAt)}split(t,n,r){const o=this.isText?this.splitText(n,this.id.getOffset()):this.splitElement(n,r);if(o){if(o.insPrevID=this.id,this.insNextID){const s=t.findFloorNode(this.insNextID);s.insPrevID=o.id,o.insNextID=this.insNextID}this.insNextID=o.id,t.registerNode(o)}return o}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(t,n){return!this.getCreatedAt().after(n)&&(!this.removedAt||t.after(this.removedAt))}canStyle(t,n){return this.isText?!1:!this.getCreatedAt().after(n)&&(!this.removedAt||t.after(this.removedAt))}setAttrs(t,n){this.attrs||(this.attrs=new Rn);const r=new Array;for(const[o,s]of Object.entries(t))r.push(this.attrs.set(o,s,n));return r}purge(t){this.attrs&&this.attrs.purge(t)}getGCPairs(){const t=[];if(!this.attrs)return t;for(const n of this.attrs)n.getRemovedAt()&&t.push({parent:this,child:n});return t}}function mo(i){var t;if(i.isText){const n=i;return{type:n.type,value:n.value}}const e={type:i.type,children:i.children.map(mo)};return i.attrs&&(e.attributes=Sr((t=i.attrs)==null?void 0:t.toObject())),e}function ko(i){if(i.isText)return i.value;let e="";return i.attrs&&i.attrs.size()&&(e=" "+Array.from(i.attrs).filter(t=>!t.isRemoved()).sort((t,n)=>t.getKey().localeCompare(n.getKey())).map(t=>{const n=JSON.parse(t.getValue());return typeof n=="string"?`${t.getKey()}="${n}"`:`${t.getKey()}="${wn(t.getValue())}"`}).join(" ")),`<${i.type}${e}>${i.children.map(t=>ko(t)).join("")}</${i.type}>`}function Ia(i){if(i.isText){const e=i;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:i.type,children:i.children.map(Ia),size:i.size,isRemoved:i.isRemoved}}class Rt extends ii{constructor(t,n){super(n);J(this,"indexTree");J(this,"nodeMapByID");this.indexTree=new cc(t),this.nodeMapByID=new Na(ht.createComparator()),this.indexTree.traverseAll(r=>{this.nodeMapByID.put(r.id,r)})}static create(t,n){return new Rt(t,n)}findFloorNode(t){const n=this.nodeMapByID.floorEntry(t);if(!(!n||!n.key.getCreatedAt().equals(t.getCreatedAt())))return n.value}registerNode(t){this.nodeMapByID.put(t.id,t)}findNodesAndSplitText(t,n){const[r,o]=t.toTreeNodePair(this);let s=o;const u=r===s,f=s.parent&&!u?s.parent:r;if(s.isText&&s.split(this,t.getLeftSiblingID().getOffset()-s.id.getOffset()),n){const g=f.allChildren,v=u?0:g.indexOf(s)+1;for(let h=v;h<g.length;h++){const l=g[h];if(!l.id.getCreatedAt().after(n))break;s=l}}return[f,s]}style(t,n,r,o){const[s,u]=this.findNodesAndSplitText(t[0],r),[f,g]=this.findNodesAndSplitText(t[1],r),v=[],h=n?Sr(n):{},l=new Map,a=[];return this.traverseInPosRange(s,u,f,g,([y])=>{const b=y.getCreatedAt().getActorID(),w=o?o.has(b)?o.get(b):Vt:Vr;if(y.canStyle(r,w)&&n){const m=l.get(b),d=y.getCreatedAt();(!m||d.after(m))&&l.set(b,d);const p=y.setAttrs(n,r),c=p.reduce((_,[,k])=>(k&&(_[k.getKey()]=h[k.getKey()]),_),{}),A=y.parent,T=y.prevSibling||y.parent;Object.keys(c).length>0&&v.push({type:"style",from:this.toIndex(A,T),to:this.toIndex(y,y),fromPath:this.toPath(A,T),toPath:this.toPath(y,y),actor:r.getActorID(),value:c});for(const[_]of p)_&&a.push({parent:y,child:_})}}),[l,a,v]}removeStyle(t,n,r,o){const[s,u]=this.findNodesAndSplitText(t[0],r),[f,g]=this.findNodesAndSplitText(t[1],r),v=[],h=new Map,l=[];return this.traverseInPosRange(s,u,f,g,([a])=>{const y=a.getCreatedAt().getActorID(),b=o?o.has(y)?o.get(y):Vt:Vr;if(a.canStyle(r,b)&&n){const w=h.get(y),m=a.getCreatedAt();(!w||m.after(w))&&h.set(y,m),a.attrs||(a.attrs=new Rn);for(const c of n){const A=a.attrs.remove(c,r);for(const T of A)l.push({parent:a,child:T})}const d=a.parent,p=a.prevSibling||a.parent;v.push({actor:r.getActorID(),type:"removeStyle",from:this.toIndex(d,p),to:this.toIndex(a,a),fromPath:this.toPath(d,p),toPath:this.toPath(a,a),value:n})}}),[h,l,v]}edit(t,n,r,o,s,u){const[f,g]=this.findNodesAndSplitText(t[0],o),[v,h]=this.findNodesAndSplitText(t[1],o),l=this.toIndex(f,g),a=this.toPath(f,g),y=[],b=[],w=[],m=new Map;this.traverseInPosRange(f,g,v,h,([c,A],T)=>{if(A===it.Start&&!T)for(const P of c.children)w.push(P);const _=c.getCreatedAt().getActorID(),k=u?u.has(_)?u.get(_):Vt:Vr;if(c.canDelete(o,k)||y.includes(c.parent)){const P=m.get(_),O=c.getCreatedAt();(!P||O.after(P))&&m.set(_,O),(A===it.Text||A===it.Start)&&y.push(c),b.push([c,A])}});const d=this.makeDeletionChanges(b,o),p=[];for(const c of y)c.remove(o),c.isRemoved&&p.push({parent:this,child:c});for(const c of w)c.removedAt||f.append(c);if(r>0){let c=0,A=f,T=g;for(;c<r;)A.split(this,A.findOffset(T)+1,s),T=A,A=A.parent,c++;d.push({type:"content",from:l,to:l,fromPath:a,toPath:a,actor:o.getActorID()})}if(n!=null&&n.length){const c=[];let A=g;for(const T of n)A===f?f.insertAt(T,0):f.insertAfter(T,A),A=T,Vi(T,_=>{f.isRemoved&&(_.remove(o),p.push({parent:this,child:_})),this.nodeMapByID.put(_.id,_)}),T.isRemoved||c.push(T);if(c.length){const T=c.map(_=>mo(_));d.length&&d[d.length-1].from===l?d[d.length-1].value=T:d.push({type:"content",from:l,to:l,fromPath:a,toPath:a,actor:o.getActorID(),value:T})}}return[d,p,m]}editT(t,n,r,o,s){const u=this.findPos(t[0]),f=this.findPos(t[1]);this.edit([u,f],n,r,o,s)}move(t,n,r){throw new ee(Q.ErrUnimplemented,`not implemented: ${t}, ${n}, ${r}`)}purge(t){var o;(o=t.parent)==null||o.removeChild(t),this.nodeMapByID.remove(t.id);const n=t.insPrevID,r=t.insNextID;if(n){const s=this.findFloorNode(n);s.insNextID=r}if(r){const s=this.findFloorNode(r);s.insPrevID=n}t.insPrevID=void 0,t.insNextID=void 0}getGCPairs(){const t=[];return this.indexTree.traverse(n=>{n.getRemovedAt()&&t.push({parent:this,child:n});for(const r of n.getGCPairs())t.push(r)}),t}findPos(t,n=!0){const r=this.indexTree.findTreePos(t,n);return Jt.fromTreePos(r)}pathToPosRange(t){const n=this.pathToIndex(t);return[this.findPos(n),this.findPos(n+1)]}pathToPos(t){const n=this.indexTree.pathToIndex(t);return this.findPos(n)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return ko(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const t=this.indexTree.getRoot(),n=(r,o=void 0,s=void 0,u=0)=>{var a,y,b,w;let f,g,v;const h=r.isText?{node:r,offset:0}:o&&s?this.toTreePos(o,s):null;h&&(f=this.indexTree.indexOf(h),g=this.indexTree.treePosToPath(h),v=Jt.fromTreePos(h).toStruct());const l={type:r.type,parent:o==null?void 0:o.id.toTestString(),size:r.size,id:r.id.toTestString(),removedAt:(a=r.removedAt)==null?void 0:a.toTestString(),insPrev:(y=r.insPrevID)==null?void 0:y.toTestString(),insNext:(b=r.insNextID)==null?void 0:b.toTestString(),value:r.isText?r.value:void 0,isRemoved:r.isRemoved,children:[],depth:u,attributes:r.attrs?Sr((w=r.attrs)==null?void 0:w.toObject()):void 0,index:f,path:g,pos:v};for(let m=0;m<r.allChildren.length;m++){const d=m===0?r:r.allChildren[m-1];l.children.push(n(r.allChildren[m],r,d,u+1))}return l};return n(t)}getRootTreeNode(){return mo(this.indexTree.getRoot())}toTestTreeNode(){return Ia(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const t=this.getRoot();return new Rt(t.deepcopy(),this.getCreatedAt())}toPath(t,n){const r=this.toTreePos(t,n);return r?this.indexTree.treePosToPath(r):[]}toIndex(t,n){const r=this.toTreePos(t,n);return r?this.indexTree.indexOf(r):-1}indexToPath(t){return this.indexTree.indexToPath(t)}pathToIndex(t){return this.indexTree.pathToIndex(t)}indexRangeToPosRange(t){const n=this.findPos(t[0]);return t[0]===t[1]?[n,n]:[n,this.findPos(t[1])]}indexRangeToPosStructRange(t){const[n,r]=t,o=this.findPos(n);return n===r?[o.toStruct(),o.toStruct()]:[o.toStruct(),this.findPos(r).toStruct()]}posRangeToPathRange(t){const[n,r]=this.findNodesAndSplitText(t[0]),[o,s]=this.findNodesAndSplitText(t[1]);return[this.toPath(n,r),this.toPath(o,s)]}posRangeToIndexRange(t){const[n,r]=this.findNodesAndSplitText(t[0]),[o,s]=this.findNodesAndSplitText(t[1]);return[this.toIndex(n,r),this.toIndex(o,s)]}traverseInPosRange(t,n,r,o,s){const u=this.toIndex(t,n),f=this.toIndex(r,o);return this.indexTree.tokensBetween(u,f,s)}toTreePos(t,n){if(!t||!n)return;if(t.isRemoved){let o;for(;t.isRemoved;)o=t,t=o.parent;const s=t.findOffset(o);return{node:t,offset:s}}if(t===n)return{node:t,offset:0};let r=t.findOffset(n);if(!n.isRemoved){if(n.isText)return{node:n,offset:n.paddedSize};r++}return{node:t,offset:r}}makeDeletionChanges(t,n){const r=[],o=[];let s=null,u=null;for(let f=0;f<t.length;f++){const g=t[f],v=t[f+1];s||(s=g),u=g;const h=this.findRightToken(g);(!h||!v||h[0]!==v[0]||h[1]!==v[1])&&(o.push([s,u]),s=null,u=null)}for(const f of o){const[g,v]=f,[h,l]=this.findLeftToken(g),[a,y]=v,b=l===it.Start?h:h.parent,w=y===it.Start?a:a.parent,m=this.toIndex(b,h),d=this.toIndex(w,a);m<d&&(r.length>0&&m===r[r.length-1].to?(r[r.length-1].to=d,r[r.length-1].toPath=this.toPath(w,a)):r.push({type:"content",from:m,to:d,fromPath:this.toPath(b,h),toPath:this.toPath(w,a),actor:n.getActorID()}))}return r.reverse()}findRightToken([t,n]){if(n===it.Start){const f=t.allChildren;return f.length>0?[f[0],f[0].isText?it.Text:it.Start]:[t,it.End]}const r=t.parent,o=r.allChildren,s=o.indexOf(t);if(r&&s===o.length-1)return[r,it.End];const u=o[s+1];return[u,u.isText?it.Text:it.Start]}findLeftToken([t,n]){if(n===it.End){const f=t.allChildren;if(f.length>0){const g=f[f.length-1];return[g,g.isText?it.Text:it.End]}return[t,it.Start]}const r=t.parent,o=r.allChildren,s=o.indexOf(t);if(r&&s===0)return[r,it.Start];const u=o[s-1];return[u,u.isText?it.Text:it.End]}}class li extends Ht{constructor(t,n,r,o,s,u,f){super(t,f);J(this,"fromPos");J(this,"toPos");J(this,"contents");J(this,"splitLevel");J(this,"maxCreatedAtMapByActor");this.fromPos=n,this.toPos=r,this.contents=o,this.splitLevel=s,this.maxCreatedAtMapByActor=u}static create(t,n,r,o,s,u,f){return new li(t,n,r,o,s,u,f)}execute(t){var f;const n=t.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new ee(Q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof Rt))throw new ee(Q.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const r=this.getExecutedAt(),o=n,[s,u]=o.edit([this.fromPos,this.toPos],(f=this.contents)==null?void 0:f.map(g=>g.deepcopy()),this.splitLevel,r,(()=>{let g=r.getDelimiter();return this.contents!==void 0&&(g+=this.contents.length),()=>At.of(r.getLamport(),++g,r.getActorID())})(),this.maxCreatedAtMapByActor);for(const g of u)t.registerGCPair(g);return{opInfos:s.map(({from:g,to:v,value:h,splitLevel:l,fromPath:a,toPath:y})=>({type:"tree-edit",path:t.createPath(this.getParentCreatedAt()),from:g,to:v,value:h,splitLevel:l,fromPath:a,toPath:y}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),n=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,r=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,o=this.contents||[];return`${t}.EDIT(${n},${r},${o.map(s=>ko(s)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Kn{constructor(e,t,n,r){J(this,"clientSeq");J(this,"serverSeq");J(this,"lamport");J(this,"actor");this.clientSeq=e,this.serverSeq=r,this.lamport=t,this.actor=n}static of(e,t,n,r){return new Kn(e,t,n,r)}next(){return new Kn(this.clientSeq+1,this.lamport.add(1),this.actor)}syncLamport(e){return e.greaterThan(this.lamport)?new Kn(this.clientSeq,e,this.actor):new Kn(this.clientSeq,this.lamport.add(1),this.actor)}createTimeTicket(e){return At.of(this.lamport,e,this.actor)}setActor(e){return new Kn(this.clientSeq,this.lamport,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const gc=new Kn(0,Ie.fromInt(0,!0),Ji);class Cr{constructor({id:e,operations:t,presenceChange:n,message:r}){J(this,"id");J(this,"operations");J(this,"presenceChange");J(this,"message");this.id=e,this.operations=t||[],this.presenceChange=n,this.message=r}static create({id:e,operations:t,presenceChange:n,message:r}){return new Cr({id:e,operations:t,presenceChange:n,message:r})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,n){const r=[],o=[];for(const s of this.operations){const u=s.execute(e,n);if(!u)continue;const{opInfos:f,reverseOp:g}=u;r.push(...f),g&&o.unshift(g)}return this.presenceChange&&(this.presenceChange.type===Zn.Put?t.set(this.id.getActorID(),$t(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:r,reverseOps:o}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:lt.bytesToHex(lt.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>lt.bytesToHex(lt.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:n,presenceChange:r,message:o}=e;return Cr.create({id:lt.bytesToChangeID(lt.hexToBytes(t)),operations:n==null?void 0:n.map(s=>lt.bytesToOperation(lt.hexToBytes(s))),presenceChange:r,message:o})}}class Ki{constructor(e,t,n,r,o,s){J(this,"documentKey");J(this,"checkpoint");J(this,"isRemoved");J(this,"changes");J(this,"snapshot");J(this,"minSyncedTicket");this.documentKey=e,this.checkpoint=t,this.isRemoved=n,this.changes=r,this.snapshot=o,this.minSyncedTicket=s}static create(e,t,n,r,o,s){return new Ki(e,t,n,r,o,s)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}}class kr{constructor(e,t){J(this,"serverSeq");J(this,"clientSeq");this.serverSeq=e,this.clientSeq=t}static of(e,t){return new kr(e,t)}increaseClientSeq(e){return e===0?this:new kr(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq.greaterThan(e.serverSeq)?this.serverSeq:e.serverSeq,n=Math.max(this.clientSeq,e.clientSeq);return kr.of(t,n)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq.equals(e.serverSeq)}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const pc=new kr(Ie.fromInt(0,!0),0);class An{constructor(e,t){J(this,"createdAt");J(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new An(e,t)}static fromStruct(e){return An.of(At.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new An(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const mc=An.of(Vt,0);class Kt{constructor(e,t){J(this,"id");J(this,"relativeOffset");this.id=e,this.relativeOffset=t}static of(e,t){return new Kt(e,t)}static fromStruct(e){const t=An.fromStruct(e.id);return Kt.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return An.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class Gn extends Oa{constructor(t,n,r){super(n);J(this,"id");J(this,"removedAt");J(this,"prev");J(this,"next");J(this,"insPrev");J(this,"insNext");this.id=t,this.removedAt=r}static create(t,n){return new Gn(t,n)}static createComparator(){return(t,n)=>{const r=t.getCreatedAt().compare(n.getCreatedAt());return r!==0?r:t.getOffset()>n.getOffset()?1:t.getOffset()<n.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(t){this.prev=t,t&&(t.next=this)}setNext(t){this.next=t,t&&(t.prev=this)}setInsPrev(t){this.insPrev=t,t&&(t.insNext=this)}setInsNext(t){this.insNext=t,t&&(t.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(t){return new Gn(this.id.split(t),this.splitValue(t),this.removedAt)}canDelete(t,n){const r=!this.removedAt;return!this.getCreatedAt().after(n)&&(!this.removedAt||t.after(this.removedAt))?r:!1}canStyle(t,n){return!this.getCreatedAt().after(n)&&(!this.removedAt||t.after(this.removedAt))}remove(t){this.removedAt=t}createPosRange(){return[Kt.of(this.id,0),Kt.of(this.id,this.getLength())]}deepcopy(){return new Gn(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(t){const n=this.value;return this.value=n.substring(0,t),n.substring(t,n.length)}toIDString(){return this.id.toIDString()}}class Rr{constructor(){J(this,"head");J(this,"treeByIndex");J(this,"treeByID");this.head=Gn.create(mc),this.treeByIndex=new Xr,this.treeByID=new Na(Gn.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Rr}edit(e,t,n,r){const[o,s]=this.findNodeWithSplit(e[1],t),[u,f]=this.findNodeWithSplit(e[0],t),g=this.findBetween(f,s),[v,h,l]=this.deleteNodes(g,t,r),a=s?s.getID():o.getID();let y=Kt.of(a,0);if(n){const w=this.posToIndex(u.createPosRange()[1],!0),m=this.insertAfter(u,Gn.create(An.of(t,0),n));v.length&&v[v.length-1].from===w?v[v.length-1].value=n:v.push({actor:t.getActorID(),from:w,to:w,value:n}),y=Kt.of(m.getID(),m.getContentLength())}const b=[];for(const[,w]of l)b.push({parent:this,child:w});return[y,h,b,v]}indexToPos(e){const[t,n]=this.treeByIndex.find(e),r=t;return Kt.of(r.getID(),n)}findIndexesFromRange(e){const[t,n]=e;return[this.posToIndex(t,!1),this.posToIndex(n,!0)]}posToIndex(e,t){const n=e.getAbsoluteID(),r=t?this.findFloorNodePreferToLeft(n):this.findFloorNode(n);if(!r)throw new ee(Q.ErrInvalidArgument,`the node of the given id should be found: ${n.toTestString()}`);const o=this.treeByIndex.indexOf(r),s=r.isRemoved()?0:n.getOffset()-r.getID().getOffset();return o+s}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new Rr;let t=this.head.getNext(),n=e.head,r;for(;t;){if(r=e.insertAfter(n,t.deepcopy()),t.hasInsPrev()){const o=e.findNode(t.getInsPrevID());r.setInsPrev(o)}n=r,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const n=e.getNext();return t.setPrev(e),n&&n.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const n=e.getAbsoluteID();let r=this.findFloorNodePreferToLeft(n);const o=n.getOffset()-r.getID().getOffset();for(this.splitNode(r,o);r.hasNext()&&r.getNext().getCreatedAt().after(t);)r=r.getNext();return[r,r.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(!t)throw new ee(Q.ErrInvalidArgument,`the node of the given id should be found: ${e.toTestString()}`);if(e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const n=[];let r=e;for(;r&&r!==t;)n.push(r),r=r.getNext();return n}splitNode(e,t){if(t>e.getContentLength())throw new ee(Q.ErrInvalidArgument,"offset should be less than or equal to length");if(t===0)return e;if(t===e.getContentLength())return e.getNext();const n=e.split(t);this.treeByIndex.updateWeight(n),this.insertAfter(e,n);const r=e.getInsNext();return r&&r.setInsPrev(n),n.setInsPrev(e),n}deleteNodes(e,t,n){if(!e.length)return[[],new Map,new Map];const[r,o]=this.filterNodes(e,t,n),s=new Map,u=new Map,f=this.makeChanges(o,t);for(const g of r){const v=g.getCreatedAt().getActorID();(!s.has(v)||g.getID().getCreatedAt().after(s.get(v)))&&s.set(v,g.getID().getCreatedAt()),u.set(g.getID().toIDString(),g),g.remove(t)}return this.deleteIndexNodes(o),[f,s,u]}filterNodes(e,t,n){const r=!!n,o=[],s=[],[u,f]=this.findEdgesOfCandidates(e);s.push(u);for(const g of e){const v=g.getCreatedAt().getActorID(),h=r?n.has(v)?n.get(v):Vt:Vr;g.canDelete(t,h)?o.push(g):s.push(g)}return s.push(f),[o,s]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const n=[];let r,o;for(let s=0;s<e.length-1;s++){const u=e[s],f=e[s+1];u.getNext()!=f&&([r]=this.findIndexesFromRange(u.getNext().createPosRange()),f?[,o]=this.findIndexesFromRange(f.getPrev().createPosRange()):o=this.treeByIndex.length,r<o&&n.push({actor:t.getActorID(),from:r,to:o}))}return n.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const n=e[t],r=e[t+1];n.getNext()!=r&&this.treeByIndex.deleteRange(n,r)}}purge(e){this.treeByIndex.delete(e),this.treeByID.remove(e.getID());const t=e.getPrev(),n=e.getNext(),r=e.getInsPrev(),o=e.getInsNext();t&&t.setNext(n),n&&n.setPrev(t),e.setPrev(void 0),e.setNext(void 0),r&&r.setInsNext(o),o&&o.setInsPrev(r),e.setInsPrev(void 0),e.setInsNext(void 0)}}const ys=i=>i<0?Math.ceil(i):Math.floor(i);var Tn=(i=>(i[i.IntegerCnt=0]="IntegerCnt",i[i.LongCnt=1]="LongCnt",i))(Tn||{});class Nt extends ii{constructor(t,n,r){super(r);J(this,"valueType");J(this,"value");switch(this.valueType=t,t){case 0:typeof n=="number"?n>Math.pow(2,31)-1||n<-Math.pow(2,31)?this.value=Ie.fromNumber(n).toInt():this.value=ys(n):this.value=n.toInt();break;case 1:typeof n=="number"?this.value=Ie.fromNumber(n):this.value=n;break;default:throw new ee(Q.ErrUnimplemented,`unimplemented type: ${t}`)}}static create(t,n,r){return new Nt(t,n,r)}static valueFromBytes(t,n){switch(t){case 0:return n[0]|n[1]<<8|n[2]<<16|n[3]<<24;case 1:return Ie.fromBytesLE(Array.from(n));default:throw new ee(Q.ErrUnimplemented,`unimplemented type: ${t}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const t=Nt.create(this.valueType,this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t}getType(){return this.valueType}static getCounterType(t){switch(typeof t){case"object":return t instanceof Ie?1:void 0;case"number":return t>Math.pow(2,31)-1||t<-Math.pow(2,31)?1:0;default:return}}static isSupport(t){return!!Nt.getCounterType(t)}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===0||t===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 1:{const n=this.value.toBytesLE();return Uint8Array.from(n)}default:throw new ee(Q.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(t){function n(r){if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`)}return n(this),n(t),this.valueType===1?this.value=this.value.add(t.getValue()):t.getType()===at.Long?this.value=this.value+t.getValue().toInt():this.value=Ie.fromNumber(this.value+ys(t.getValue())).toInt(),this}}class Dr extends Ht{constructor(t,n,r){super(t,r);J(this,"value");this.value=n}static create(t,n,r){return new Dr(t,n,r)}execute(t){const n=t.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new ee(Q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof Nt))throw new ee(Q.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const r=n,o=this.value.deepcopy();return r.increase(o),{opInfos:[{type:"increase",path:t.createPath(this.getParentCreatedAt()),value:o.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const t=this.value.deepcopy(),r=t.getType()===at.Long?t.getValue().multiply(-1):t.getValue()*-1;return Dr.create(this.getParentCreatedAt(),Ye.of(r,t.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class Cn extends Ht{constructor(t,n,r,o,s,u,f){super(t,f);J(this,"fromPos");J(this,"toPos");J(this,"maxCreatedAtMapByActor");J(this,"attributes");J(this,"attributesToRemove");this.fromPos=n,this.toPos=r,this.maxCreatedAtMapByActor=o,this.attributes=s,this.attributesToRemove=u}static create(t,n,r,o,s,u){return new Cn(t,n,r,o,s,new Array,u)}static createTreeRemoveStyleOperation(t,n,r,o,s,u){return new Cn(t,n,r,o,new Map,s,u)}execute(t){const n=t.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new ee(Q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof Rt))throw new ee(Q.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const r=n;let o,s;if(this.attributes.size){const u={};[...this.attributes].forEach(([f,g])=>u[f]=g),[,s,o]=r.style([this.fromPos,this.toPos],u,this.getExecutedAt(),this.maxCreatedAtMapByActor)}else{const u=this.attributesToRemove;[,s,o]=r.removeStyle([this.fromPos,this.toPos],u,this.getExecutedAt(),this.maxCreatedAtMapByActor)}for(const u of s)t.registerGCPair(u);return{opInfos:o.map(({from:u,to:f,value:g,fromPath:v,toPath:h})=>({type:"tree-style",from:u,to:f,value:this.attributes.size?{attributes:g}:{attributesToRemove:g},fromPath:v,toPath:h,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),n=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,r=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${t}.STYLE(${n},${r},${Object.entries(this.attributes||{}).map(([o,s])=>`${o}:"${s}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}function yc(i){const e=new _o,t=e.data;for(const[n,r]of Object.entries(i))t[n]=JSON.stringify(r);return e}function vc(i){if(i.type===Zn.Put)return new ho({type:Yr.PUT,presence:yc(i.presence)});if(i.type===Zn.Clear)return new ho({type:Yr.CLEAR});throw new ee(Q.ErrUnimplemented,"unimplemented type")}function bc(i){return new ba({serverSeq:i.getServerSeqAsString(),clientSeq:i.getClientSeq()})}function Pa(i){return new $i({clientSeq:i.getClientSeq(),lamport:i.getLamportAsString(),actorId:Do(i.getActorID())})}function Ae(i){if(i)return new _e({lamport:i.getLamportAsString(),delimiter:i.getDelimiter(),actorId:Do(i.getActorID())})}function Ca(i){switch(i){case at.Null:return Ce.NULL;case at.Boolean:return Ce.BOOLEAN;case at.Integer:return Ce.INTEGER;case at.Long:return Ce.LONG;case at.Double:return Ce.DOUBLE;case at.String:return Ce.STRING;case at.Bytes:return Ce.BYTES;case at.Date:return Ce.DATE;default:throw new ee(Q.ErrInvalidType,`unsupported type: ${i}`)}}function Ra(i){switch(i){case Tn.IntegerCnt:return Ce.INTEGER_CNT;case Tn.LongCnt:return Ce.LONG_CNT;default:throw new ee(Q.ErrInvalidType,`unsupported type: ${i}`)}}function oo(i){if(i instanceof Tt)return new Sn({type:Ce.JSON_OBJECT,createdAt:Ae(i.getCreatedAt()),value:Ka(i)});if(i instanceof xt)return new Sn({type:Ce.JSON_ARRAY,createdAt:Ae(i.getCreatedAt()),value:Wc(i)});if(i instanceof Ct)return new Sn({type:Ce.TEXT,createdAt:Ae(i.getCreatedAt())});if(i instanceof Ye)return new Sn({type:Ca(i.getType()),createdAt:Ae(i.getCreatedAt()),value:i.toBytes()});if(i instanceof Nt)return new Sn({type:Ra(i.getType()),createdAt:Ae(i.getCreatedAt()),value:i.toBytes()});if(i instanceof Rt)return new Sn({type:Ce.TREE,createdAt:Ae(i.getCreatedAt()),value:Yc(i)});throw new ee(Q.ErrUnimplemented,"unimplemented element")}function wc(i){return new fo({createdAt:Ae(i.getCreatedAt()),offset:i.getOffset()})}function wi(i){return new fr({createdAt:Ae(i.getID().getCreatedAt()),offset:i.getID().getOffset(),relativeOffset:i.getRelativeOffset()})}function Ai(i){return new Gr({parentId:Kr(i.getParentID()),leftSiblingId:Kr(i.getLeftSiblingID())})}function Kr(i){return new Or({createdAt:Ae(i.getCreatedAt()),offset:i.getOffset()})}function Da(i){const e=new wo;if(i instanceof hr){const t=i,n=new ta;n.parentCreatedAt=Ae(t.getParentCreatedAt()),n.key=t.getKey(),n.value=oo(t.getValue()),n.executedAt=Ae(t.getExecutedAt()),e.body.case="set",e.body.value=n}else if(i instanceof oi){const t=i,n=new na;n.parentCreatedAt=Ae(t.getParentCreatedAt()),n.prevCreatedAt=Ae(t.getPrevCreatedAt()),n.value=oo(t.getValue()),n.executedAt=Ae(t.getExecutedAt()),e.body.case="add",e.body.value=n}else if(i instanceof Hn){const t=i,n=new ra;n.parentCreatedAt=Ae(t.getParentCreatedAt()),n.prevCreatedAt=Ae(t.getPrevCreatedAt()),n.createdAt=Ae(t.getCreatedAt()),n.executedAt=Ae(t.getExecutedAt()),e.body.case="move",e.body.value=n}else if(i instanceof Xn){const t=i,n=new ia;n.parentCreatedAt=Ae(t.getParentCreatedAt()),n.createdAt=Ae(t.getCreatedAt()),n.executedAt=Ae(t.getExecutedAt()),e.body.case="remove",e.body.value=n}else if(i instanceof si){const t=i,n=new oa;n.parentCreatedAt=Ae(t.getParentCreatedAt()),n.from=wi(t.getFromPos()),n.to=wi(t.getToPos());const r=n.createdAtMapByActor;for(const[s,u]of t.getMaxCreatedAtMapByActor())r[s]=Ae(u);n.content=t.getContent();const o=n.attributes;for(const[s,u]of t.getAttributes())o[s]=u;n.executedAt=Ae(t.getExecutedAt()),e.body.case="edit",e.body.value=n}else if(i instanceof ai){const t=i,n=new sa;n.parentCreatedAt=Ae(t.getParentCreatedAt()),n.from=wi(t.getFromPos()),n.to=wi(t.getToPos());const r=n.createdAtMapByActor;for(const[s,u]of t.getMaxCreatedAtMapByActor())r[s]=Ae(u);const o=n.attributes;for(const[s,u]of t.getAttributes())o[s]=u;n.executedAt=Ae(t.getExecutedAt()),e.body.case="style",e.body.value=n}else if(i instanceof Dr){const t=i,n=new aa;n.parentCreatedAt=Ae(t.getParentCreatedAt()),n.value=oo(t.getValue()),n.executedAt=Ae(t.getExecutedAt()),e.body.case="increase",e.body.value=n}else if(i instanceof li){const t=i,n=new la,r=n.createdAtMapByActor;for(const[o,s]of t.getMaxCreatedAtMapByActor())r[o]=Ae(s);n.parentCreatedAt=Ae(t.getParentCreatedAt()),n.from=Ai(t.getFromPos()),n.to=Ai(t.getToPos()),n.contents=kc(t.getContents()),n.splitLevel=t.getSplitLevel(),n.executedAt=Ae(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=n}else if(i instanceof Cn){const t=i,n=new ua;n.parentCreatedAt=Ae(t.getParentCreatedAt()),n.from=Ai(t.getFromPos()),n.to=Ai(t.getToPos());const r=n.createdAtMapByActor;for(const[s,u]of t.getMaxCreatedAtMapByActor())r[s]=Ae(u);const o=t.getAttributesToRemove();if(o.length>0)n.attributesToRemove=o;else{const s=n.attributes;for(const[u,f]of t.getAttributes())s[u]=f}n.executedAt=Ae(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=n}else throw new ee(Q.ErrUnimplemented,"unimplemented operation");return e}function Ac(i){const e=[];for(const t of i)e.push(Da(t));return e}function Tc(i){const e=new ea({id:Pa(i.getID()),message:i.getMessage()});return i.hasOperations()&&(e.operations=Ac(i.getOperations())),i.hasPresenceChange()&&(e.presenceChange=vc(i.getPresenceChange())),e}function _c(i){const e=[];for(const t of i)e.push(Tc(t));return e}function Ec(i){const e=[];for(const t of i)e.push(new ma({key:t.getStrKey(),element:No(t.getValue())}));return e}function Oc(i){const e=[];for(const t of i)e.push(new Ao({element:No(t.getValue())}));return e}function Sc(i){const e=[];for(const t of i){const n=new ya;n.id=wc(t.getID()),n.value=t.getValue().getContent(),n.removedAt=Ae(t.getRemovedAt());const r=n.attributes,o=t.getValue().getAttrs();for(const s of o){const u=new zi;u.value=s.getValue(),u.updatedAt=Ae(s.getUpdatedAt()),r[s.getKey()]=u}e.push(n)}return e}function kc(i){const e=[];if(!i||!i.length)return e;for(const t of i)e.push(new va({content:xo(t)}));return e}function xc(i){const e={};for(const t of i)e[t.getKey()]=new zi({value:t.getValue(),updatedAt:Ae(t.getUpdatedAt()),isRemoved:t.isRemoved()});return e}function xo(i){if(!i)return[];const e=[];return Vi(i,(t,n)=>{const r=new To({id:Kr(t.id),type:t.type,removedAt:Ae(t.removedAt),depth:n});t.isText&&(r.value=t.value),t.insPrevID&&(r.insPrevId=Kr(t.insPrevID)),t.insNextID&&(r.insNextId=Kr(t.insNextID)),t.attrs&&(r.attributes=xc(t.attrs)),e.push(r)}),e}function Nc(i){const e=new Dt;return e.body.case="jsonObject",e.body.value=new ca({nodes:Ec(i.getRHT()),createdAt:Ae(i.getCreatedAt()),movedAt:Ae(i.getMovedAt()),removedAt:Ae(i.getRemovedAt())}),e}function La(i){const e=new Dt;return e.body.case="jsonArray",e.body.value=new fa({nodes:Oc(i.getElements()),createdAt:Ae(i.getCreatedAt()),movedAt:Ae(i.getMovedAt()),removedAt:Ae(i.getRemovedAt())}),e}function Ic(i){const e=new Dt;return e.body.case="primitive",e.body.value=new ha({type:Ca(i.getType()),value:i.toBytes(),createdAt:Ae(i.getCreatedAt()),movedAt:Ae(i.getMovedAt()),removedAt:Ae(i.getRemovedAt())}),e}function Pc(i){const e=new Dt;return e.body.case="text",e.body.value=new da({nodes:Sc(i.getRGATreeSplit()),createdAt:Ae(i.getCreatedAt()),movedAt:Ae(i.getMovedAt()),removedAt:Ae(i.getRemovedAt())}),e}function Cc(i){const e=new Dt;return e.body.case="counter",e.body.value=new ga({type:Ra(i.getType()),value:i.toBytes(),createdAt:Ae(i.getCreatedAt()),movedAt:Ae(i.getMovedAt()),removedAt:Ae(i.getRemovedAt())}),e}function Ma(i){const e=new Dt;return e.body.case="tree",e.body.value=new pa({nodes:xo(i.getRoot()),createdAt:Ae(i.getCreatedAt()),movedAt:Ae(i.getMovedAt()),removedAt:Ae(i.getRemovedAt())}),e}function No(i){if(i instanceof Tt)return Nc(i);if(i instanceof xt)return La(i);if(i instanceof Ye)return Ic(i);if(i instanceof Ct)return Pc(i);if(i instanceof Nt)return Cc(i);if(i instanceof Rt)return Ma(i);throw new ee(Q.ErrUnimplemented,"unimplemented element")}function Rc(i){return new Dn({documentKey:i.getDocumentKey(),checkpoint:bc(i.getCheckpoint()),isRemoved:i.getIsRemoved(),changes:_c(i.getChanges()),snapshot:i.getSnapshot(),minSyncedTicket:Ae(i.getMinSyncedTicket())})}function vs(i){const e=i.findDetails(Zu);for(const t of e)if(t.metadata.code)return t.metadata.code;return""}function Ba(i){let e;return i.serverSeq&&(e=Ie.fromString(i.serverSeq,!0)),Kn.of(i.clientSeq,Ie.fromString(i.lamport,!0),Ro(i.actorId),e)}function Te(i){if(i)return At.of(Ie.fromString(i.lamport,!0),i.delimiter,Ro(i.actorId))}function Io(i){const e={};return Object.entries(i.data).forEach(([t,n])=>{e[t]=JSON.parse(n)}),e}function Dc(i){const e=i.type;if(e===Yr.PUT){const t=Io(i.presence);return{type:Zn.Put,presence:t}}if(e===Yr.CLEAR)return{type:Zn.Clear};throw new ee(Q.ErrInvalidType,`unsupported type: ${e}`)}function Lc(i){const e=new Map;return Object.entries(i).forEach(([t,n])=>{e.set(t,Io(n))}),e}function qa(i){switch(i){case Ce.NULL:return at.Null;case Ce.BOOLEAN:return at.Boolean;case Ce.INTEGER:return at.Integer;case Ce.LONG:return at.Long;case Ce.DOUBLE:return at.Double;case Ce.STRING:return at.String;case Ce.BYTES:return at.Bytes;case Ce.DATE:return at.Date}throw new ee(Q.ErrUnimplemented,`unimplemented value type: ${i}`)}function Fi(i){switch(i){case Ce.INTEGER_CNT:return Tn.IntegerCnt;case Ce.LONG_CNT:return Tn.LongCnt}throw new ee(Q.ErrUnimplemented,`unimplemented value type: ${i}`)}function so(i){switch(i.type){case Ce.JSON_OBJECT:return i.value?Va(i.value):Tt.create(Te(i.createdAt));case Ce.JSON_ARRAY:return i.value?Hc(i.value):xt.create(Te(i.createdAt));case Ce.TEXT:return Ct.create(Rr.create(),Te(i.createdAt));case Ce.TREE:return Gc(i.value);case Ce.NULL:case Ce.BOOLEAN:case Ce.INTEGER:case Ce.LONG:case Ce.DOUBLE:case Ce.STRING:case Ce.BYTES:case Ce.DATE:return Ye.of(Ye.valueFromBytes(qa(i.type),i.value),Te(i.createdAt));case Ce.INTEGER_CNT:case Ce.LONG_CNT:return Nt.create(Fi(i.type),Nt.valueFromBytes(Fi(i.type),i.value),Te(i.createdAt))}}function Ti(i){return Kt.of(An.of(Te(i.createdAt),i.offset),i.relativeOffset)}function Fa(i){return An.of(Te(i.createdAt),i.offset)}function Mc(i){const e=ei.create(i.value);Object.entries(i.attributes).forEach(([n,r])=>{e.setAttr(n,r.value,Te(r.updatedAt))});const t=Gn.create(Fa(i.id),e);return t.remove(Te(i.removedAt)),t}function br(i){return Jt.of(Hr(i.parentId),Hr(i.leftSiblingId))}function Hr(i){return ht.of(Te(i.createdAt),i.offset)}function Bc(i){if(!i.length)return;const e=[];return i.forEach(t=>{const n=Po(t.content);e.push(n)}),e}function Po(i){if(i.length===0)return;const e=[];for(const r of i)e.push(Fc(r));const t=e[e.length-1],n=new Map;n.set(i[e.length-1].depth,e[e.length-1]);for(let r=e.length-2;r>=0;r--)n.get(i[r].depth-1).prepend(e[r]),n.set(i[r].depth,e[r]);return t.updateDescendantsSize(),Rt.create(t,Vt).getRoot()}function qc(i){const e=Rn.create();for(const[t,n]of Object.entries(i))e.setInternal(t,n.value,Te(n.updatedAt),n.isRemoved);return e}function Fc(i){const e=Hr(i.id),t=kt.create(e,i.type),n=Object.entries(i.attributes);return t.isText?t.value=i.value:n.length&&(t.attrs=qc(i.attributes)),i.insPrevId&&(t.insPrevID=Hr(i.insPrevId)),i.insNextId&&(t.insNextID=Hr(i.insNextId)),t.removedAt=Te(i.removedAt),t}function ja(i){if(i.body.case==="set"){const e=i.body.value;return hr.create(e.key,so(e.value),Te(e.parentCreatedAt),Te(e.executedAt))}else if(i.body.case==="add"){const e=i.body.value;return oi.create(Te(e.parentCreatedAt),Te(e.prevCreatedAt),so(e.value),Te(e.executedAt))}else if(i.body.case==="move"){const e=i.body.value;return Hn.create(Te(e.parentCreatedAt),Te(e.prevCreatedAt),Te(e.createdAt),Te(e.executedAt))}else if(i.body.case==="remove"){const e=i.body.value;return Xn.create(Te(e.parentCreatedAt),Te(e.createdAt),Te(e.executedAt))}else if(i.body.case==="edit"){const e=i.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([r,o])=>{t.set(r,Te(o))});const n=new Map;return Object.entries(e.attributes).forEach(([r,o])=>{n.set(r,o)}),si.create(Te(e.parentCreatedAt),Ti(e.from),Ti(e.to),t,e.content,n,Te(e.executedAt))}else if(i.body.case==="style"){const e=i.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([r,o])=>{t.set(r,Te(o))});const n=new Map;return Object.entries(e.attributes).forEach(([r,o])=>{n.set(r,o)}),ai.create(Te(e.parentCreatedAt),Ti(e.from),Ti(e.to),t,n,Te(e.executedAt))}else{if(i.body.case==="select")return;if(i.body.case==="increase"){const e=i.body.value;return Dr.create(Te(e.parentCreatedAt),so(e.value),Te(e.executedAt))}else if(i.body.case==="treeEdit"){const e=i.body.value,t=new Map;return Object.entries(e.createdAtMapByActor).forEach(([n,r])=>{t.set(n,Te(r))}),li.create(Te(e.parentCreatedAt),br(e.from),br(e.to),Bc(e.contents),e.splitLevel,t,Te(e.executedAt))}else if(i.body.case==="treeStyle"){const e=i.body.value,t=new Map,n=e.attributesToRemove,r=new Map;return e!=null&&e.createdAtMapByActor&&Object.entries(e.createdAtMapByActor).forEach(([o,s])=>{r.set(o,Te(s))}),(n==null?void 0:n.length)>0?Cn.createTreeRemoveStyleOperation(Te(e.parentCreatedAt),br(e.from),br(e.to),r,n,Te(e.executedAt)):(Object.entries(e.attributes).forEach(([o,s])=>{t.set(o,s)}),Cn.create(Te(e.parentCreatedAt),br(e.from),br(e.to),r,t,Te(e.executedAt)))}else throw new ee(Q.ErrUnimplemented,"unimplemented operation")}}function jc(i){const e=[];for(const t of i){const n=ja(t);n&&e.push(n)}return e}function Ua(i){const e=[];for(const t of i)e.push(Cr.create({id:Ba(t.id),operations:jc(t.operations),presenceChange:t.presenceChange?Dc(t.presenceChange):void 0,message:t.message}));return e}function Uc(i){return kr.of(Ie.fromString(i.serverSeq,!0),i.clientSeq)}function $c(i){return Ki.create(i.documentKey,Uc(i.checkpoint),i.isRemoved,Ua(i.changes),i.snapshot,Te(i.minSyncedTicket))}function $a(i){const e=new Zr;for(const n of i.nodes){const r=Co(n.element);e.set(n.key,r,r.getPositionedAt())}const t=new Tt(Te(i.createdAt),e);return t.setMovedAt(Te(i.movedAt)),t.setRemovedAt(Te(i.removedAt)),t}function za(i){const e=new Qr;for(const n of i.nodes)e.insert(Co(n.element));const t=new xt(Te(i.createdAt),e);return t.setMovedAt(Te(i.movedAt)),t.setRemovedAt(Te(i.removedAt)),t}function zc(i){const e=Ye.of(Ye.valueFromBytes(qa(i.type),i.value),Te(i.createdAt));return e.setMovedAt(Te(i.movedAt)),e.setRemovedAt(Te(i.removedAt)),e}function Jc(i){const e=new Rr;let t=e.getHead();for(const r of i.nodes){const o=e.insertAfter(t,Mc(r));r.insPrevId&&o.setInsPrev(e.findNode(Fa(r.insPrevId))),t=o}const n=new Ct(e,Te(i.createdAt));return n.setMovedAt(Te(i.movedAt)),n.setRemovedAt(Te(i.removedAt)),n}function Vc(i){const e=Nt.create(Fi(i.type),Nt.valueFromBytes(Fi(i.type),i.value),Te(i.createdAt));return e.setMovedAt(Te(i.movedAt)),e.setRemovedAt(Te(i.removedAt)),e}function Ja(i){const e=Po(i.nodes);return Rt.create(e,Te(i.createdAt))}function Co(i){if(i.body.case==="jsonObject")return $a(i.body.value);if(i.body.case==="jsonArray")return za(i.body.value);if(i.body.case==="primitive")return zc(i.body.value);if(i.body.case==="text")return Jc(i.body.value);if(i.body.case==="counter")return Vc(i.body.value);if(i.body.case==="tree")return Ja(i.body.value);throw new ee(Q.ErrUnimplemented,"unimplemented element")}function Kc(i){if(!i)return{root:Tt.create(Vt),presences:new Map};const e=ku.fromBinary(i);return{root:Co(e.root),presences:Lc(e.presences)}}function Va(i){if(!i)throw new ee(Q.ErrInvalidArgument,"bytes is empty");const e=Dt.fromBinary(i);return $a(e.body.value)}function Ka(i){return No(i).toBinary()}function Hc(i){if(!i)throw new ee(Q.ErrInvalidArgument,"bytes is empty");const e=Dt.fromBinary(i);return za(e.body.value)}function Wc(i){return La(i).toBinary()}function Gc(i){if(!i)throw new ee(Q.ErrInvalidArgument,"bytes is empty");const e=Dt.fromBinary(i);return Ja(e.body.value)}function Yc(i){return Ma(i).toBinary()}function Ha(i){return i?Array.from(i).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function Ro(i){return Ha(i)}function Wa(i){return new Uint8Array(i.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Do(i){return Wa(i)}function Zc(i){const e=$i.fromBinary(i);return Ba(e)}function Xc(i){const e=wo.fromBinary(i);return ja(e)}const lt={fromPresence:Io,toChangePack:Rc,fromChangePack:$c,fromChanges:Ua,toTreeNodes:xo,fromTreeNodes:Po,objectToBytes:Ka,bytesToObject:Va,bytesToSnapshot:Kc,bytesToHex:Ha,hexToBytes:Wa,toHexString:Ro,toUint8Array:Do,toOperation:Da,toChangeID:Pa,PbChangeID:$i,bytesToChangeID:Zc,bytesToOperation:Xc};var mt=(i=>(i[i.Trivial=0]="Trivial",i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal",i))(mt||{});let rr=3;function Ga(i){rr=i}const Se={trivial:(...i)=>{rr>0||typeof console<"u"&&console.log("YORKIE T:",...i)},debug:(...i)=>{rr>1||typeof console<"u"&&console.log("YORKIE D:",...i)},info:(...i)=>{rr>2||typeof console<"u"&&console.log("YORKIE I:",...i)},warn:(...i)=>{rr>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...i):console.log("YORKIE W:",...i))},error:(...i)=>{rr>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...i):console.log("YORKIE E:",...i))},fatal:(...i)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...i):console.log("YORKIE F:",...i))},isEnabled:i=>rr<=i};function Ya(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,i=>{const e=Math.random()*16|0;return(i==="x"?e:e&3|8).toString(16)})}class Qc{constructor(e,t,n,r){J(this,"reconnectStreamDelay");J(this,"doc");J(this,"docID");J(this,"syncMode");J(this,"remoteChangeEventReceived");J(this,"watchStream");J(this,"watchLoopTimerID");J(this,"watchAbortController");this.reconnectStreamDelay=e,this.doc=t,this.docID=n,this.syncMode=r,this.remoteChangeEventReceived=!1}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===Ci.RealtimeSyncOff?!1:this.syncMode===Ci.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Ci.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const ao=()=>{};class ef{constructor(e){J(this,"finalized",!1);J(this,"observers",[]);J(this,"finalError");try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(!e)throw new ee(Q.ErrInvalidArgument,"missing observer");if(this.finalized)throw new ee(Q.ErrRefused,"observable is finalized due to previous error");typeof e=="object"?r=e:r={next:e,error:t,complete:n},r.next===void 0&&(r.next=ao),r.error===void 0&&(r.error=ao),r.complete===void 0&&(r.complete=ao);const o=Ya(),s=this.unsubscribeOne.bind(this,o);if(this.observers.push({subscriptionID:o,observer:r}),this.finalized)try{this.finalError?r.error(this.finalError):r.complete()}catch(u){Se.warn(u)}return s}unsubscribeOne(e){var t;this.observers=(t=this.observers)==null?void 0:t.filter(n=>n.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(n){Se.error(n)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function tf(i){const e=new ef(i);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class Er{constructor(e,t,n,r){J(this,"id");J(this,"delimiter");J(this,"message");J(this,"root");J(this,"operations");J(this,"presenceChange");J(this,"previousPresence");J(this,"reversePresenceKeys");this.id=e,this.delimiter=Oo,this.root=t,this.operations=[],this.previousPresence=$t(n),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=r}static create(e,t,n,r){return new Er(e,t,n,r)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getChange(){return Cr.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const n of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(n):this.reversePresenceKeys.delete(n)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class ti{constructor(e){J(this,"rootObject");J(this,"elementPairMapByCreatedAt");J(this,"gcElementSetByCreatedAt");J(this,"gcPairMap");this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(e,void 0),e.getDescendants(t=>{if(t.getRemovedAt()&&this.registerRemovedElement(t),t instanceof Ct||t instanceof Rt)for(const n of t.getGCPairs())this.registerGCPair(n);return!1})}static create(){return new ti(Tt.create(Vt))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const n=[];for(;t.parent;){const r=t.element.getCreatedAt(),o=t.parent.subPathOf(r);if(o===void 0)throw new ee(Q.ErrInvalidArgument,`cant find the given element: ${r.toIDString()}`);n.unshift(o),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return n.unshift("$"),n}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),e instanceof Wn&&e.getDescendants((n,r)=>(this.registerElement(n,r),!1))}deregisterElement(e){let t=0;const n=r=>{const o=r.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(o),this.gcElementSetByCreatedAt.delete(o),t++};return n(e),e instanceof Wn&&e.getDescendants(r=>(n(r),!1)),t}registerRemovedElement(e){this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const t of this.gcElementSetByCreatedAt){e.add(t);const n=this.elementPairMapByCreatedAt.get(t);n.element instanceof Wn&&n.element.getDescendants(r=>(e.add(r.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}deepcopy(){return new ti(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const n of this.gcElementSetByCreatedAt){const r=this.elementPairMapByCreatedAt.get(n);r.element.getRemovedAt()&&e.compare(r.element.getRemovedAt())>=0&&(r.parent.purge(r.element),t+=this.deregisterElement(r.element))}for(const[,n]of this.gcPairMap){const r=n.child.getRemovedAt();r!==void 0&&e.compare(r)>=0&&(n.parent.purge(n.child),this.gcPairMap.delete(n.child.toIDString()),t+=1)}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}}function Za(i,e){const t=new ni(i);return new Proxy(e,t.getHandlers())}class ni{constructor(e){J(this,"context");J(this,"handlers");this.context=e,this.handlers={set:(t,n,r)=>(Se.isEnabled(mt.Trivial)&&Se.trivial(`obj[${n}]=${JSON.stringify(r)}`),ni.setInternal(e,t,n,r),!0),get:(t,n)=>(Se.isEnabled(mt.Trivial)&&Se.trivial(`obj[${n}]`),n==="getID"?()=>t.getCreatedAt():n==="toJSON"||n==="toString"?()=>t.toJSON():n==="toJS"?()=>t.toJS():n==="toJSForTest"?()=>t.toJSForTest():ir(e,t.get(n))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,n)=>(Se.isEnabled(mt.Trivial)&&Se.trivial(`obj[${n}]`),ni.deleteInternal(e,t,n),!0)}}static setInternal(e,t,n,r){if(n.includes("."))throw new ee(Q.ErrInvalidObjectKey,"key must not contain the '.'.");const o=e.issueTimeTicket(),s=ji(e,r,o),u=t.set(n,s,o);e.registerElement(s,t),u&&e.registerRemovedElement(u),e.push(hr.create(n,s.deepcopy(),t.getCreatedAt(),o))}static buildObjectMembers(e,t){const n={};for(const[r,o]of Object.entries(t)){if(r.includes("."))throw new ee(Q.ErrInvalidObjectKey,"key must not contain the '.'.");const s=e.issueTimeTicket(),u=ji(e,o,s);n[r]=u}return n}static deleteInternal(e,t,n){const r=e.issueTimeTicket(),o=t.deleteByKey(n,r);o&&(e.push(Xn.create(t.getCreatedAt(),o.getCreatedAt(),r)),e.registerRemovedElement(o))}getHandlers(){return this.handlers}}function nf(i,e){const t=new Qe(i,e);return new Proxy(e,t.getHandlers())}function rf(i){return typeof i=="string"||i instanceof String?!isNaN(i):!1}function of(i){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(i)}class Qe{constructor(e,t){J(this,"context");J(this,"handlers");J(this,"array");this.context=e,this.array=t,this.handlers={get:(n,r,o)=>r==="getID"?()=>n.getCreatedAt():r==="getElementByID"?s=>{const u=n.getByID(s);if(!(!u||u.isRemoved()))return Un(e,u)}:r==="getElementByIndex"?s=>{const u=n.get(s);return Un(e,u)}:r==="getLast"?()=>Un(e,n.getLast()):r==="deleteByID"?s=>{const u=Qe.deleteInternalByID(e,n,s);return Un(e,u)}:r==="insertAfter"?(s,u)=>{const f=Qe.insertAfterInternal(e,n,s,u);return Un(e,f)}:r==="insertBefore"?(s,u)=>{const f=Qe.insertBeforeInternal(e,n,s,u);return Un(e,f)}:r==="moveBefore"?(s,u)=>{Qe.moveBeforeInternal(e,n,s,u)}:r==="moveAfter"?(s,u)=>{Qe.moveAfterInternal(e,n,s,u)}:r==="moveFront"?s=>{Qe.moveFrontInternal(e,n,s)}:r==="moveLast"?s=>{Qe.moveLastInternal(e,n,s)}:rf(r)?ir(e,n.get(Number(r))):r==="push"?s=>Qe.pushInternal(e,n,s):r==="splice"?(s,u,...f)=>Qe.splice(e,n,s,u,...f):r==="length"?n.length:typeof r=="symbol"&&r===Symbol.iterator?Qe.iteratorInternal.bind(this,e,n):r==="includes"?(s,u)=>Qe.includes(e,n,s,u):r==="indexOf"?(s,u)=>Qe.indexOf(e,n,s,u):r==="lastIndexOf"?(s,u)=>Qe.lastIndexOf(e,n,s,u):r==="toJSForTest"?()=>n.toJSForTest():r==="toTestString"?()=>Qe.toTestString(n):typeof r=="string"&&of(r)?(...s)=>{const u=Array.from(n).map(f=>ir(e,f));return Array.prototype[r].apply(u,s)}:Reflect.get(n,r,o),deleteProperty:(n,r)=>(Se.isEnabled(mt.Trivial)&&Se.trivial(`array[${r}]`),Qe.deleteInternalByIndex(e,n,Number.parseInt(r)),!0)}}static*iteratorInternal(e,t){for(const n of t)yield Un(e,n)}static buildArrayElements(e,t){const n=[];for(const r of t){const o=e.issueTimeTicket(),s=ji(e,r,o);n.push(s)}return n}static pushInternal(e,t,n){return Qe.insertAfterInternal(e,t,t.getLastCreatedAt(),n),t.length}static moveBeforeInternal(e,t,n,r){const o=e.issueTimeTicket(),s=t.getPrevCreatedAt(n);t.moveAfter(s,r,o),e.push(Hn.create(t.getCreatedAt(),s,r,o))}static moveAfterInternal(e,t,n,r){const o=e.issueTimeTicket();t.moveAfter(n,r,o),e.push(Hn.create(t.getCreatedAt(),n,r,o))}static moveFrontInternal(e,t,n){const r=e.issueTimeTicket(),o=t.getHead();t.moveAfter(o.getCreatedAt(),n,r),e.push(Hn.create(t.getCreatedAt(),o.getCreatedAt(),n,r))}static moveLastInternal(e,t,n){const r=e.issueTimeTicket(),o=t.getLastCreatedAt();t.moveAfter(o,n,r),e.push(Hn.create(t.getCreatedAt(),o,n,r))}static insertAfterInternal(e,t,n,r){const o=e.issueTimeTicket(),s=ji(e,r,o);return t.insertAfter(n,s),e.registerElement(s,t),e.push(oi.create(t.getCreatedAt(),n,s.deepcopy(),o)),s}static insertBeforeInternal(e,t,n,r){return Qe.insertAfterInternal(e,t,t.getPrevCreatedAt(n),r)}static deleteInternalByIndex(e,t,n){const r=e.issueTimeTicket(),o=t.deleteByIndex(n,r);if(o)return e.push(Xn.create(t.getCreatedAt(),o.getCreatedAt(),r)),e.registerRemovedElement(o),o}static deleteInternalByID(e,t,n){const r=e.issueTimeTicket(),o=t.delete(n,r);return e.push(Xn.create(t.getCreatedAt(),o.getCreatedAt(),r)),e.registerRemovedElement(o),o}static splice(e,t,n,r,...o){const s=t.length,u=n>=0?Math.min(n,s):Math.max(s+n,0),f=r===void 0?s:r<0?u:Math.min(u+r,s),g=[];for(let v=u;v<f;v++){const h=Qe.deleteInternalByIndex(e,t,u);if(h){const l=h.deepcopy();l.setRemovedAt(),g.push(ir(e,l))}}if(o){let v=u===0?t.getHead().getID():t.get(u-1).getID();for(const h of o)v=Qe.insertAfterInternal(e,t,v,h).getID()}return g}static includes(e,t,n,r){var u;const o=t.length,s=r===void 0?0:r<0?Math.max(r+o,0):r;if(s>=o)return!1;if(Ye.isSupport(n))return Array.from(t).map(g=>ir(e,g)).includes(n,s);for(let f=s;f<o;f++)if(((u=t.get(f))==null?void 0:u.getID())===n.getID())return!0;return!1}static indexOf(e,t,n,r){var u;const o=t.length,s=r===void 0?0:r<0?Math.max(r+o,0):r;if(s>=o)return-1;if(Ye.isSupport(n))return Array.from(t).map(g=>ir(e,g)).indexOf(n,s);for(let f=s;f<o;f++)if(((u=t.get(f))==null?void 0:u.getID())===n.getID())return f;return-1}static lastIndexOf(e,t,n,r){var u;const o=t.length,s=r===void 0||r>=o?o-1:r<0?r+o:r;if(s<0)return-1;if(Ye.isSupport(n))return Array.from(t).map(g=>ir(e,g)).lastIndexOf(n,s);for(let f=s;f>0;f--)if(((u=t.get(f))==null?void 0:u.getID())===n.getID())return f;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}let Hi=class{constructor(e,t){J(this,"context");J(this,"text");this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,n,r){if(!this.context||!this.text)throw new ee(Q.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new ee(Q.ErrInvalidArgument,"from should be less than or equal to to");const o=this.text.indexRangeToPosRange(e,t);Se.isEnabled(mt.Debug)&&Se.debug(`EDIT: f:${e}->${o[0].toTestString()}, t:${t}->${o[1].toTestString()} c:${n}`);const s=r?Pr(r):void 0,u=this.context.issueTimeTicket(),[f,,g,v]=this.text.edit(o,n,u,s);for(const h of g)this.context.registerGCPair(h);return this.context.push(new si(this.text.getCreatedAt(),o[0],o[1],f,n,s?new Map(Object.entries(s)):new Map,u)),this.text.findIndexesFromRange(v)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,n){if(!this.context||!this.text)throw new ee(Q.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new ee(Q.ErrInvalidArgument,"from should be less than or equal to to");const r=this.text.indexRangeToPosRange(e,t);Se.isEnabled(mt.Debug)&&Se.debug(`STYL: f:${e}->${r[0].toTestString()}, t:${t}->${r[1].toTestString()} a:${JSON.stringify(n)}`);const o=Pr(n),s=this.context.issueTimeTicket(),[u,f]=this.text.setStyle(r,o,s);for(const g of f)this.context.registerGCPair(g);return this.context.push(new ai(this.text.getCreatedAt(),r[0],r[1],u,new Map(Object.entries(o)),s)),!0}indexRangeToPosRange(e){if(!this.context||!this.text)throw new ee(Q.ErrNotInitialized,"Text is not initialized yet");const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text)throw new ee(Q.ErrNotInitialized,"Text is not initialized yet");const t=this.text.findIndexesFromRange([Kt.fromStruct(e[0]),Kt.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text)throw new ee(Q.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new ee(Q.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new ee(Q.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new ee(Q.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new ee(Q.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text)throw new ee(Q.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(e,t)}};class Wi{constructor(e,t){J(this,"valueType");J(this,"value");J(this,"context");J(this,"counter");this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter)throw new ee(Q.ErrNotInitialized,"Counter is not initialized yet");const t=this.context.issueTimeTicket(),n=Ye.of(e,t);if(!n.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof n.getValue()}`);return this.counter.increase(n),this.context.push(Dr.create(this.counter.getCreatedAt(),n,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new ee(Q.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function Lo(i,e,t){const{type:n}=i,r=t.issueTimeTicket();if(n===Pn){Xa(i);const{value:o}=i,s=kt.create(ht.of(r,0),n,o);e.append(s)}else{const{children:o=[]}=i;let{attributes:s}=i,u;if(typeof s=="object"&&!Ea(s)){s=Pr(s),u=new Rn;for(const[g,v]of Object.entries(s))u.set(g,v,r)}const f=kt.create(ht.of(r,0),n,void 0,u);e.append(f);for(const g of o)Lo(g,f,t)}}function sf(i,e){const{type:t}=e,n=i.issueTimeTicket();let r;if(e.type===Pn){const{value:o}=e;r=kt.create(ht.of(n,0),t,o)}else if(e){const{children:o=[]}=e;let{attributes:s}=e,u;if(typeof s=="object"&&!Ea(s)){s=Pr(s),u=new Rn;for(const[f,g]of Object.entries(s))u.set(f,g,n)}r=kt.create(ht.of(i.issueTimeTicket(),0),t,void 0,u);for(const f of o)Lo(f,r,i)}return r}function Xa(i){if(!i.value.length)throw new ee(Q.ErrInvalidArgument,"text node cannot have empty value");return!0}function bs(i){if(!i.length)return!0;if(i[0].type===Pn)for(const t of i){const{type:n}=t;if(n!==Pn)throw new ee(Q.ErrInvalidArgument,"element node and text node cannot be passed together");Xa(t)}else for(const t of i){const{type:n}=t;if(n===Pn)throw new ee(Q.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class Gi{constructor(e){J(this,"initialRoot");J(this,"context");J(this,"tree");this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return kt.create(ht.of(e.issueTimeTicket(),0),sc);const t=kt.create(ht.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const n of this.initialRoot.children)Lo(n,t,e);return t}getSize(){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,t){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new ee(Q.ErrInvalidArgument,"path should not be empty");const[n,r]=this.tree.pathToPosRange(e),o=this.context.issueTimeTicket(),s=t?Pr(t):void 0,[u]=this.tree.style([n,r],s,o);this.context.push(Cn.create(this.tree.getCreatedAt(),n,r,u,s?new Map(Object.entries(s)):new Map,o))}style(e,t,n){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new ee(Q.ErrInvalidArgument,"from should be less than or equal to to");const r=this.tree.findPos(e),o=this.tree.findPos(t),s=this.context.issueTimeTicket(),u=n?Pr(n):void 0,[f,g]=this.tree.style([r,o],u,s);for(const v of g)this.context.registerGCPair(v);this.context.push(Cn.create(this.tree.getCreatedAt(),r,o,f,u?new Map(Object.entries(u)):new Map,s))}removeStyle(e,t,n){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new ee(Q.ErrInvalidArgument,"from should be less than or equal to to");const r=this.tree.findPos(e),o=this.tree.findPos(t),s=this.context.issueTimeTicket(),[u,f]=this.tree.removeStyle([r,o],n,s);for(const g of f)this.context.registerGCPair(g);this.context.push(Cn.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),r,o,u,n,s))}editInternal(e,t,n,r=0){var g;if(n.length!==0&&n[0]&&(bs(n),n[0].type!==Pn))for(const v of n){const{children:h=[]}=v;bs(h)}const o=this.context.getLastTimeTicket();let s=new Array;if(((g=n[0])==null?void 0:g.type)===Pn){let v="";for(const h of n){const{value:l}=h;v+=l}s.push(kt.create(ht.of(this.context.issueTimeTicket(),0),Pn,v))}else s=n.map(v=>v&&sf(this.context,v)).filter(v=>v);const[,u,f]=this.tree.edit([e,t],s.length?s.map(v=>v==null?void 0:v.deepcopy()):void 0,r,o,()=>this.context.issueTimeTicket());for(const v of u)this.context.registerGCPair(v);return this.context.push(li.create(this.tree.getCreatedAt(),e,t,s.length?s:void 0,r,f,o)),!0}editByPath(e,t,n,r=0){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new ee(Q.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new ee(Q.ErrInvalidArgument,"path should not be empty");const o=this.tree.pathToPos(e),s=this.tree.pathToPos(t);return this.editInternal(o,s,n?[n]:[],r)}editBulkByPath(e,t,n,r=0){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new ee(Q.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new ee(Q.ErrInvalidArgument,"path should not be empty");const o=this.tree.pathToPos(e),s=this.tree.pathToPos(t);return this.editInternal(o,s,n,r)}edit(e,t,n,r=0){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new ee(Q.ErrInvalidArgument,"from should be less than or equal to to");const o=this.tree.findPos(e),s=this.tree.findPos(t);return this.editInternal(o,s,n?[n]:[],r)}editBulk(e,t,n,r=0){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new ee(Q.ErrInvalidArgument,"from should be less than or equal to to");const o=this.tree.findPos(e),s=this.tree.findPos(t);return this.editInternal(o,s,n,r)}toXML(){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],n=this.tree.indexRangeToPosRange(t);return[n[0].toStruct(),n[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");const t=[Jt.fromStruct(e[0]),Jt.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree)throw new ee(Q.ErrNotInitialized,"Tree is not initialized yet");const t=[Jt.fromStruct(e[0]),Jt.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function ws(i,e){return Za(i,e)}function Un(i,e){if(e){if(e instanceof Ye)return e;if(e instanceof Tt)return Za(i,e);if(e instanceof xt)return nf(i,e);if(e instanceof Ct)return new Hi(i,e);if(e instanceof Nt){const t=new Wi(Tn.IntegerCnt,0);return t.initialize(i,e),t}else if(e instanceof Rt){const t=new Gi;return t.initialize(i,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function ir(i,e){const t=Un(i,e);return t instanceof Ye?t.getValue():t}function ji(i,e,t){let n;if(Ye.isSupport(e))n=Ye.of(e,t);else if(Array.isArray(e))n=xt.create(t,Qe.buildArrayElements(i,e));else if(typeof e=="object")e instanceof Hi?(n=Ct.create(Rr.create(),t),e.initialize(i,n)):e instanceof Wi?(n=Nt.create(e.getValueType(),e.getValue(),t),e.initialize(i,n)):e instanceof Gi?(n=Rt.create(e.buildRoot(i),t),e.initialize(i,n)):n=Tt.create(t,ni.buildObjectMembers(i,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return n}const As=50;class af{constructor(){J(this,"undoStack",[]);J(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=As&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=As&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const lf="yorkie-devtools-panel",uf="yorkie-devtools-sdk";let wr="disconnected";const Ts=new Map,Pi=new Map;typeof window<"u"&&(window.transactionEventsByDocKey=Pi);function _i(i,e){(e!=null&&e.force||wr!=="disconnected")&&window.postMessage({source:uf,...i},"*")}function cf(i){if(!i.isEnableDevtools()||typeof window>"u"||Ts.has(i.getKey()))return;Pi.set(i.getKey(),[]);const e=i.subscribe("all",t=>{t.some(n=>n.type!==ft.StatusChanged&&n.type!==ft.Snapshot&&n.type!==ft.LocalChange&&n.type!==ft.RemoteChange&&n.type!==ft.Initialized&&n.type!==ft.Watched&&n.type!==ft.Unwatched&&n.type!==ft.PresenceChanged)||(Pi.get(i.getKey()).push(t),wr==="synced"&&_i({msg:"doc::sync::partial",docKey:i.getKey(),event:t}))});Ts.set(i.getKey(),[e]),_i({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var r;if(((r=t.data)==null?void 0:r.source)!==lf)return;switch(t.data.msg){case"devtools::connect":if(wr!=="disconnected")break;wr="connected",_i({msg:"doc::available",docKey:i.getKey()}),Se.info(`[YD] Devtools connected. Doc: ${i.getKey()}`);break;case"devtools::disconnect":wr="disconnected",Se.info(`[YD] Devtools disconnected. Doc: ${i.getKey()}`);break;case"devtools::subscribe":wr="synced",_i({msg:"doc::sync::full",docKey:i.getKey(),events:Pi.get(i.getKey())}),Se.info(`[YD] Devtools subscribed. Doc: ${i.getKey()}`);break}})}var $n=(i=>(i.Detached="detached",i.Attached="attached",i.Removed="removed",i))($n||{}),ft=(i=>(i.StatusChanged="status-changed",i.ConnectionChanged="connection-changed",i.SyncStatusChanged="sync-status-changed",i.Snapshot="snapshot",i.LocalChange="local-change",i.RemoteChange="remote-change",i.Initialized="initialized",i.Watched="watched",i.Unwatched="unwatched",i.PresenceChanged="presence-changed",i))(ft||{}),ri=(i=>(i.Connected="connected",i.Disconnected="disconnected",i))(ri||{}),yo=(i=>(i.Synced="synced",i.SyncFailed="sync-failed",i))(yo||{});class Qa{constructor(e,t){J(this,"key");J(this,"status");J(this,"opts");J(this,"changeID");J(this,"checkpoint");J(this,"localChanges");J(this,"root");J(this,"clone");J(this,"eventStream");J(this,"eventStreamObserver");J(this,"onlineClients");J(this,"presences");J(this,"history");J(this,"internalHistory");J(this,"isUpdating");this.opts=t||{},this.key=e,this.status="detached",this.root=ti.create(),this.changeID=gc,this.checkpoint=pc,this.localChanges=[],this.eventStream=tf(n=>{this.eventStreamObserver=n}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new af,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},cf(this)}update(e,t){if(this.getStatus()==="removed")throw new ee(Q.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const n=this.changeID.getActorID(),r=Er.create(this.changeID.next(),this.clone.root,this.clone.presences.get(n)||{},t);try{const o=ws(r,this.clone.root.getObject());this.presences.has(n)||this.clone.presences.set(n,{}),this.isUpdating=!0,e(o,new io(r,this.clone.presences.get(n)))}catch(o){throw this.clone=void 0,o}finally{this.isUpdating=!1}if(r.hasChange()){Se.isEnabled(mt.Trivial)&&Se.trivial(`trying to update a local change: ${this.toJSON()}`);const o=r.getChange(),{opInfos:s,reverseOps:u}=o.execute(this.root,this.presences,He.Local),f=r.getReversePresence();f&&u.push({type:"presence",value:f}),this.localChanges.push(o),u.length>0&&this.internalHistory.pushUndo(u),s.length>0&&this.internalHistory.clearRedo(),this.changeID=o.getID();const g=[];s.length>0&&g.push({type:"local-change",source:He.Local,value:{message:o.getMessage()||"",operations:s,actor:n,clientSeq:o.getID().getClientSeq(),serverSeq:o.getID().getServerSeq()},rawChange:this.isEnableDevtools()?o.toStruct():void 0}),o.hasPresenceChange()&&g.push({type:"presence-changed",source:He.Local,value:{clientID:n,presence:this.getPresence(n)}}),this.publish(g),Se.isEnabled(mt.Trivial)&&Se.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,n,r){if(typeof e=="string"){if(typeof t!="function")throw new ee(Q.ErrInvalidArgument,"Second argument must be a callback function");if(e==="presence"){const u=t;return this.eventStream.subscribe(f=>{for(const g of f)g.type!=="initialized"&&g.type!=="watched"&&g.type!=="unwatched"&&g.type!=="presence-changed"||u(g)},n,r)}if(e==="my-presence"){const u=t;return this.eventStream.subscribe(f=>{for(const g of f)g.type!=="initialized"&&g.type!=="presence-changed"||g.type==="presence-changed"&&g.value.clientID!==this.changeID.getActorID()||u(g)},n,r)}if(e==="others"){const u=t;return this.eventStream.subscribe(f=>{for(const g of f)g.type!=="watched"&&g.type!=="unwatched"&&g.type!=="presence-changed"||g.value.clientID!==this.changeID.getActorID()&&u(g)},n,r)}if(e==="connection"){const u=t;return this.eventStream.subscribe(f=>{for(const g of f)g.type==="connection-changed"&&u(g)},n,r)}if(e==="status"){const u=t;return this.eventStream.subscribe(f=>{for(const g of f)g.type==="status-changed"&&u(g)},n,r)}if(e==="sync"){const u=t;return this.eventStream.subscribe(f=>{for(const g of f)g.type==="sync-status-changed"&&u(g)},n,r)}if(e==="all"){const u=t;return this.eventStream.subscribe(u,n,r)}const o=e,s=t;return this.eventStream.subscribe(u=>{for(const f of u){if(f.type!=="local-change"&&f.type!=="remote-change")continue;const g=[];for(const v of f.value.operations)this.isSameElementOrChildOf(v.path,o)&&g.push(v);g.length&&s({...f,value:{...f.value,operations:g}})}},n,r)}if(typeof e=="function"){const o=e,s=t,u=n;return this.eventStream.subscribe(f=>{for(const g of f)g.type!=="snapshot"&&g.type!=="local-change"&&g.type!=="remote-change"||o(g)},s,u)}throw new ee(Q.ErrInvalidArgument,`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const n=e.split(".");return t.split(".").every((o,s)=>o===n[s])}applyChangePack(e){for(e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges(),He.Remote);this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();e.hasSnapshot()&&this.applyChanges(this.localChanges,He.Remote),this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),this.garbageCollect(e.getMinSyncedTicket()),e.getIsRemoved()&&this.applyStatus("removed"),Se.isEnabled(mt.Trivial)&&Se.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:$t(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return Ki.create(this.key,t,!1,e)}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Er.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return ws(e,this.clone.root.getObject())}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t){const{root:n,presences:r}=lt.bytesToSnapshot(t);this.root=new ti(n),this.presences=r,this.changeID=this.changeID.syncLamport(e),this.clone=void 0,this.publish([{type:"snapshot",source:He.Remote,value:{snapshot:this.isEnableDevtools()?lt.bytesToHex(t):void 0,serverSeq:e.toString()}}])}applyChanges(e,t){Se.isEnabled(mt.Debug)&&Se.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),Se.isEnabled(mt.Trivial)&&Se.trivial(e.map(n=>`${n.getID().toTestString()}	${n.toTestString()}`).join(`
`));for(const n of e)this.applyChange(n,t);Se.isEnabled(mt.Debug)&&Se.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const n=[],r=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(r)){const s=e.getPresenceChange();switch(s.type){case Zn.Put:n.push(this.presences.has(r)?{type:"presence-changed",source:t,value:{clientID:r,presence:s.presence}}:{type:"watched",source:He.Remote,value:{clientID:r,presence:s.presence}});break;case Zn.Clear:n.push({type:"unwatched",source:He.Remote,value:{clientID:r,presence:this.getPresence(r)}}),this.removeOnlineClient(r);break}}const{opInfos:o}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncLamport(e.getID().getLamport()),o.length>0){const s=this.isEnableDevtools()?e.toStruct():void 0;n.push(t===He.Remote?{type:"remote-change",source:t,value:{actor:r,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:o},rawChange:s}:{type:"local-change",source:t,value:{actor:r,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:o},rawChange:s})}n.length>0&&this.publish(n)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,n=new Set;for(const r of t)r!==this.changeID.getActorID()&&n.add(r);this.setOnlineClients(n),this.publish([{type:"initialized",source:He.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:n}=e.body.value,r=[];if(t===Mi.DOCUMENT_WATCHED)this.addOnlineClient(n),this.hasPresence(n)&&r.push({type:"watched",source:He.Remote,value:{clientID:n,presence:this.getPresence(n)}});else if(t===Mi.DOCUMENT_UNWATCHED){const o=this.getPresence(n);this.removeOnlineClient(n),o&&r.push({type:"unwatched",source:He.Remote,value:{clientID:n,presence:o}})}r.length>0&&this.publish(r)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(Ji),this.publish([{source:e==="removed"?He.Remote:He.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEvent(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:t,serverSeq:n}=e.value;if(!t)return;this.applySnapshot(Ie.fromString(n),lt.hexToBytes(t));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const t=Cr.fromStruct(e.rawChange);this.applyChange(t,e.source)}if(e.type==="initialized"){const t=new Set;for(const{clientID:n,presence:r}of e.value)t.add(n),this.presences.set(n,r);this.setOnlineClients(t);return}if(e.type==="watched"){const{clientID:t,presence:n}=e.value;this.addOnlineClient(t),this.presences.set(t,n);return}if(e.type==="unwatched"){const{clientID:t}=e.value;this.removeOnlineClient(t),this.presences.delete(t)}if(e.type==="presence-changed"){const{clientID:t,presence:n}=e.value;this.presences.set(t,n)}}applyTransactionEvent(e){for(const t of e)this.applyDocEvent(t)}getValueByPath(e){if(!e.startsWith("$"))throw new ee(Q.ErrInvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let n=this.getRoot();for(const r of t)if(n=n[r],n===void 0)return;return n}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?$t(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?$t(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?$t(t):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:$t(this.getMyPresence())});for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:$t(this.presences.get(t))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,n)=>t.clientID>n.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new ee(Q.ErrRefused,"Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new ee(Q.ErrRefused,"There is no operation to be undone");this.ensureClone();const t=Er.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const g of e){if(!(g instanceof Ht)){new io(t,$t(this.clone.presences.get(this.changeID.getActorID()))).set(g.value,{addToHistory:!0});continue}const v=t.issueTimeTicket();g.setExecutedAt(v),t.push(g)}const n=t.getChange();n.execute(this.clone.root,this.clone.presences,He.UndoRedo);const{opInfos:r,reverseOps:o}=n.execute(this.root,this.presences,He.UndoRedo),s=t.getReversePresence();if(s&&o.push({type:"presence",value:s}),o.length>0&&this.internalHistory.pushRedo(o),!n.hasPresenceChange()&&r.length===0)return;this.localChanges.push(n),this.changeID=n.getID();const u=this.changeID.getActorID(),f=[];r.length>0&&f.push({type:"local-change",source:He.UndoRedo,value:{message:n.getMessage()||"",operations:r,actor:u,clientSeq:n.getID().getClientSeq(),serverSeq:n.getID().getServerSeq()},rawChange:this.isEnableDevtools()?n.toStruct():void 0}),n.hasPresenceChange()&&f.push({type:"presence-changed",source:He.UndoRedo,value:{clientID:u,presence:this.getPresence(u)}}),this.publish(f)}redo(){if(this.isUpdating)throw new ee(Q.ErrRefused,"Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new ee(Q.ErrRefused,"There is no operation to be redone");this.ensureClone();const t=Er.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const g of e){if(!(g instanceof Ht)){new io(t,$t(this.clone.presences.get(this.changeID.getActorID()))).set(g.value,{addToHistory:!0});continue}const v=t.issueTimeTicket();g.setExecutedAt(v),t.push(g)}const n=t.getChange();n.execute(this.clone.root,this.clone.presences,He.UndoRedo);const{opInfos:r,reverseOps:o}=n.execute(this.root,this.presences,He.UndoRedo),s=t.getReversePresence();if(s&&o.push({type:"presence",value:s}),o.length>0&&this.internalHistory.pushUndo(o),!n.hasPresenceChange()&&r.length===0)return;this.localChanges.push(n),this.changeID=n.getID();const u=this.changeID.getActorID(),f=[];r.length>0&&f.push({type:"local-change",source:He.UndoRedo,value:{message:n.getMessage()||"",operations:r,actor:u,clientSeq:n.getID().getClientSeq(),serverSeq:n.getID().getServerSeq()},rawChange:this.isEnableDevtools()?n.toStruct():void 0}),n.hasPresenceChange()&&f.push({type:"presence-changed",source:He.UndoRedo,value:{clientID:u,presence:this.getPresence(u)}}),this.publish(f)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}}function ff(i,e){return t=>async n=>(i&&n.header.set("x-api-key",i),e&&n.header.set("authorization",e),await t(n))}const hf="yorkie-js-sdk",df="0.4.28",gf="Yorkie JS SDK",pf="./src/yorkie.ts",mf={access:"public",main:"./dist/yorkie-js-sdk.js",typings:"./dist/yorkie-js-sdk.d.ts"},yf=["dist"],vf={build:"tsc && vite build","build:proto":"npx buf generate","build:docs":"typedoc","build:ghpages":"mkdir -p ghpages/examples && cp -r docs ghpages/api-reference && find ../../examples -name 'dist' -type d -exec sh -c 'cp -r {} ghpages/examples/$(basename $(dirname {}))' \\;",dev:"vite build -c vite.preview.ts && vite preview",test:"vitest run","test:watch":"vitest","test:bench":"vitest bench","test:ci":"vitest run --coverage","test:yorkie.dev":"TEST_RPC_ADDR=https://api.yorkie.dev vitest run --coverage",lint:"eslint . --fix --max-warnings=0 --ext .ts",prepare:"pnpm build"},bf={node:">=18.0.0",npm:">=7.1.0"},wf={type:"git",url:"git+https://github.com/yorkie-team/yorkie-js-sdk.git"},Af={name:"hackerwins",email:"susukang98@gmail.com"},Tf="Apache-2.0",_f={url:"https://github.com/yorkie-team/yorkie-js-sdk/issues"},Ef="https://github.com/yorkie-team/yorkie-js-sdk#readme",Of={"@buf/googleapis_googleapis.bufbuild_es":"^1.4.0-20240524201209-f0e53af8f2fc.3","@bufbuild/buf":"^1.28.1","@bufbuild/protoc-gen-es":"^1.6.0","@connectrpc/protoc-gen-connect-es":"^1.4.0","@types/google-protobuf":"^3.15.5","@types/long":"^4.0.1","@typescript-eslint/eslint-plugin":"^6.21.0","@typescript-eslint/parser":"^6.21.0","@vitest/coverage-istanbul":"^0.34.5","@vitest/coverage-v8":"^0.34.5",eslint:"^8.19.0","eslint-plugin-jsdoc":"^39.3.3","eslint-plugin-prettier":"^4.2.1","eslint-plugin-tsdoc":"^0.2.16",husky:"^8.0.3",prettier:"^2.7.1","ts-node":"^10.9.1",typedoc:"^0.25.13",typescript:"^5.3.3","typescript-transform-paths":"^3.3.1",vite:"^5.0.12","vite-plugin-commonjs":"^0.10.1","vite-plugin-dts":"^3.9.1","vite-tsconfig-paths":"^4.2.1",vitest:"^0.34.5"},Sf={"@bufbuild/protobuf":"^1.6.0","@connectrpc/connect":"^1.4.0","@connectrpc/connect-web":"^1.4.0",long:"^5.2.0"},kf={hooks:{"pre-commit":"pnpm lint"}},_s={name:hf,version:df,description:gf,main:pf,publishConfig:mf,files:yf,scripts:vf,engines:bf,repository:wf,author:Af,license:Tf,bugs:_f,homepage:Ef,devDependencies:Of,dependencies:Sf,husky:kf};function xf(){return i=>async e=>(e.header.set("x-yorkie-user-agent",_s.name+"/"+_s.version),await i(e))}var Ci=(i=>(i.Manual="manual",i.Realtime="realtime",i.RealtimePushOnly="realtime-pushonly",i.RealtimeSyncOff="realtime-syncoff",i))(Ci||{});const Ei={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3};class el{constructor(e,t){J(this,"id");J(this,"key");J(this,"status");J(this,"attachmentMap");J(this,"apiKey");J(this,"conditions");J(this,"syncLoopDuration");J(this,"reconnectStreamDelay");J(this,"retrySyncLoopDelay");J(this,"rpcClient");J(this,"taskQueue");J(this,"processing",!1);t=t||Ei,this.key=t.key?t.key:Ya(),this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=t.syncLoopDuration||Ei.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay||Ei.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay||Ei.retrySyncLoopDelay,this.rpcClient=iu(Gu,Su({baseUrl:e,interceptors:[ff(t.apiKey,t.token),xf()]})),this.taskQueue=[]}activate(){return this.isActive()?Promise.resolve():this.enqueueTask(async()=>this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status="activated",this.runSyncLoop(),Se.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw Se.error(`[AC] c:"${this.getKey()}" err :`,e),this.handleConnectError(e),e}))}deactivate(){return this.status==="deactivated"?Promise.resolve():this.enqueueTask(async()=>this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{this.deactivateInternal(),Se.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw Se.error(`[DC] c:"${this.getKey()}" err :`,e),this.handleConnectError(e),e}))}attach(e,t={}){if(!this.isActive())throw new ee(Q.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==$n.Detached)throw new ee(Q.ErrDocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((r,o)=>o.set(t.initialPresence||{}));const n=t.syncMode??"realtime";return this.enqueueTask(async()=>this.rpcClient.attachDocument({clientId:this.id,changePack:lt.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async r=>{const o=lt.fromChangePack(r.changePack);return e.applyChangePack(o),e.getStatus()===$n.Removed||(e.applyStatus($n.Attached),this.attachmentMap.set(e.getKey(),new Qc(this.reconnectStreamDelay,e,r.documentId,n)),n!=="manual"&&await this.runWatchLoop(e.getKey()),Se.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`)),e}).catch(r=>{throw Se.error(`[AD] c:"${this.getKey()}" err :`,r),this.handleConnectError(r),r}))}detach(e,t={}){if(!this.isActive())throw new ee(Q.ErrClientNotActivated,`${this.key} is not active`);const n=this.attachmentMap.get(e.getKey());if(!n)throw new ee(Q.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return e.update((r,o)=>o.clear()),this.enqueueTask(async()=>this.rpcClient.detachDocument({clientId:this.id,documentId:n.docID,changePack:lt.toChangePack(e.createChangePack()),removeIfNotAttached:t.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(r=>{const o=lt.fromChangePack(r.changePack);return e.applyChangePack(o),e.getStatus()!==$n.Removed&&e.applyStatus($n.Detached),this.detachInternal(e.getKey()),Se.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(r=>{throw Se.error(`[DD] c:"${this.getKey()}" err :`,r),this.handleConnectError(r),r}))}async changeSyncMode(e,t){if(!this.isActive())throw new ee(Q.ErrClientNotActivated,`${this.key} is not active`);const n=this.attachmentMap.get(e.getKey());if(!n)throw new ee(Q.ErrDocumentNotAttached,`${e.getKey()} is not attached`);const r=n.syncMode;return r===t?e:(n.changeSyncMode(t),t==="manual"?(n.cancelWatchStream(),e):(t==="realtime"&&(n.remoteChangeEventReceived=!0),r==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new ee(Q.ErrClientNotActivated,`${this.key} is not active`);if(e){const t=this.attachmentMap.get(e.getKey());if(!t)throw new ee(Q.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(t,"realtime").catch(n=>{throw Se.error(`[SY] c:"${this.getKey()}" err :`,n),this.handleConnectError(n),n}))}return this.enqueueTask(async()=>{const t=[];for(const[,n]of this.attachmentMap)t.push(this.syncInternal(n,n.syncMode));return Promise.all(t).catch(n=>{throw Se.error(`[SY] c:"${this.getKey()}" err :`,n),this.handleConnectError(n),n})})}remove(e){if(!this.isActive())throw new ee(Q.ErrClientNotActivated,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new ee(Q.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const n=lt.toChangePack(e.createChangePack());return n.isRemoved=!0,this.enqueueTask(async()=>this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:n},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(r=>{const o=lt.fromChangePack(r.changePack);e.applyChangePack(o),this.detachInternal(e.getKey()),Se.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(r=>{throw Se.error(`[RD] c:"${this.getKey()}" err :`,r),this.handleConnectError(r),r}))}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(e){return this.conditions[e]}runSyncLoop(){const e=()=>{if(!this.isActive()){Se.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const t=[];for(const[,n]of this.attachmentMap)n.needRealtimeSync()&&(n.remoteChangeEventReceived=!1,t.push(this.syncInternal(n,n.syncMode)));Promise.all(t).then(()=>setTimeout(e,this.syncLoopDuration)).catch(n=>{Se.error(`[SL] c:"${this.getKey()}" sync failed:`,n),this.handleConnectError(n)?setTimeout(e,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};Se.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new ee(Q.ErrDocumentNotAttached,`${e} is not attached`);return this.conditions.WatchLoop=!0,t.runWatchLoop(n=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new ee(Q.ErrClientNotActivated,`${this.key} is not active`));const r=new AbortController,o=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:r.signal});return t.doc.publish([{type:ft.ConnectionChanged,value:ri.Connected}]),Se.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((s,u)=>{(async()=>{try{for await(const g of o)this.handleWatchDocumentsResponse(t,g),g.body.case==="initialization"&&s([o,r])}catch(g){t.doc.resetOnlineClients(),t.doc.publish([{type:ft.Initialized,source:He.Local,value:t.doc.getPresences()}]),t.doc.publish([{type:ft.ConnectionChanged,value:ri.Disconnected}]),Se.debug(`[WD] c:"${this.getKey()}" unwatches`),this.handleConnectError(g)?n():this.conditions.WatchLoop=!1,u(g)}})()})})}handleWatchDocumentsResponse(e,t){if(t.body.case==="event"&&t.body.value.type===Mi.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(t)}deactivateInternal(){this.status="deactivated";for(const[e,t]of this.attachmentMap)this.detachInternal(e),t.doc.applyStatus($n.Detached)}detachInternal(e){const t=this.attachmentMap.get(e);t&&(t.cancelWatchStream(),this.attachmentMap.delete(e))}syncInternal(e,t){const{doc:n,docID:r}=e,o=n.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:r,changePack:lt.toChangePack(o),pushOnly:t==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${n.getKey()}`}}).then(s=>{const u=lt.fromChangePack(s.changePack);if(u.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return n;n.applyChangePack(u),e.doc.publish([{type:ft.SyncStatusChanged,value:yo.Synced}]),n.getStatus()===$n.Removed&&this.detachInternal(n.getKey());const f=n.getKey(),g=u.getChangeSize();return Se.info(`[PP] c:"${this.getKey()}" sync d:"${f}", push:${o.getChangeSize()} pull:${g} cp:${u.getCheckpoint().toTestString()}`),n}).catch(s=>{throw n.publish([{type:ft.SyncStatusChanged,value:yo.SyncFailed}]),Se.error(`[PP] c:"${this.getKey()}" err :`,s),s})}handleConnectError(e){return e instanceof ot?e.code===Ke.Canceled||e.code===Ke.Unknown||e.code===Ke.ResourceExhausted||e.code===Ke.Unavailable?!0:((vs(e)===Q.ErrClientNotActivated||vs(e)===Q.ErrClientNotFound)&&this.deactivateInternal(),!1):!1}enqueueTask(e){return new Promise((t,n)=>{this.taskQueue.push(()=>e().then(t).catch(n)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{Se.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}const lo={Client:el,Document:Qa,Primitive:Ye,Text:Hi,Counter:Wi,Tree:Gi,LogLevel:mt,setLogLevel:Ga,IntType:Tn.IntegerCnt,LongType:Tn.LongCnt};typeof globalThis<"u"&&(globalThis.yorkie={Client:el,Document:Qa,Primitive:Ye,Text:Hi,Counter:Wi,Tree:Gi,LogLevel:mt,setLogLevel:Ga,IntType:Tn.IntegerCnt,LongType:Tn.LongCnt});var Nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tl(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var nl={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(i,e){(function(n,r){i.exports=r()})(typeof self<"u"?self:Nf,function(){return function(t){var n={};function r(o){if(n[o])return n[o].exports;var s=n[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=n,r.d=function(o,s,u){r.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:u})},r.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(s,"a",s),s},r.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},r.p="",r(r.s=109)}([function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(17),s=r(18),u=r(19),f=r(45),g=r(46),v=r(47),h=r(48),l=r(49),a=r(12),y=r(32),b=r(33),w=r(31),m=r(1),d={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:o.default,Format:s.default,Leaf:u.default,Embed:h.default,Scroll:f.default,Block:v.default,Inline:g.default,Text:l.default,Attributor:{Attribute:a.default,Class:y.default,Style:b.default,Store:w.default}};n.default=d},function(t,n,r){var o=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,d){m.__proto__=d}||function(m,d){for(var p in d)d.hasOwnProperty(p)&&(m[p]=d[p])};return function(m,d){w(m,d);function p(){this.constructor=m}m.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=function(w){o(m,w);function m(d){var p=this;return d="[Parchment] "+d,p=w.call(this,d)||this,p.message=d,p.name=p.constructor.name,p}return m}(Error);n.ParchmentError=s;var u={},f={},g={},v={};n.DATA_KEY="__blot";var h;(function(w){w[w.TYPE=3]="TYPE",w[w.LEVEL=12]="LEVEL",w[w.ATTRIBUTE=13]="ATTRIBUTE",w[w.BLOT=14]="BLOT",w[w.INLINE=7]="INLINE",w[w.BLOCK=11]="BLOCK",w[w.BLOCK_BLOT=10]="BLOCK_BLOT",w[w.INLINE_BLOT=6]="INLINE_BLOT",w[w.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",w[w.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",w[w.ANY=15]="ANY"})(h=n.Scope||(n.Scope={}));function l(w,m){var d=y(w);if(d==null)throw new s("Unable to create "+w+" blot");var p=d,c=w instanceof Node||w.nodeType===Node.TEXT_NODE?w:p.create(m);return new p(c,m)}n.create=l;function a(w,m){return m===void 0&&(m=!1),w==null?null:w[n.DATA_KEY]!=null?w[n.DATA_KEY].blot:m?a(w.parentNode,m):null}n.find=a;function y(w,m){m===void 0&&(m=h.ANY);var d;if(typeof w=="string")d=v[w]||u[w];else if(w instanceof Text||w.nodeType===Node.TEXT_NODE)d=v.text;else if(typeof w=="number")w&h.LEVEL&h.BLOCK?d=v.block:w&h.LEVEL&h.INLINE&&(d=v.inline);else if(w instanceof HTMLElement){var p=(w.getAttribute("class")||"").split(/\s+/);for(var c in p)if(d=f[p[c]],d)break;d=d||g[w.tagName]}return d==null?null:m&h.LEVEL&d.scope&&m&h.TYPE&d.scope?d:null}n.query=y;function b(){for(var w=[],m=0;m<arguments.length;m++)w[m]=arguments[m];if(w.length>1)return w.map(function(c){return b(c)});var d=w[0];if(typeof d.blotName!="string"&&typeof d.attrName!="string")throw new s("Invalid definition");if(d.blotName==="abstract")throw new s("Cannot register abstract class");if(v[d.blotName||d.attrName]=d,typeof d.keyName=="string")u[d.keyName]=d;else if(d.className!=null&&(f[d.className]=d),d.tagName!=null){Array.isArray(d.tagName)?d.tagName=d.tagName.map(function(c){return c.toUpperCase()}):d.tagName=d.tagName.toUpperCase();var p=Array.isArray(d.tagName)?d.tagName:[d.tagName];p.forEach(function(c){(g[c]==null||d.className==null)&&(g[c]=d)})}return d}n.register=b},function(t,n,r){var o=r(51),s=r(11),u=r(3),f=r(20),g="\0",v=function(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]};v.prototype.insert=function(h,l){var a={};return h.length===0?this:(a.insert=h,l!=null&&typeof l=="object"&&Object.keys(l).length>0&&(a.attributes=l),this.push(a))},v.prototype.delete=function(h){return h<=0?this:this.push({delete:h})},v.prototype.retain=function(h,l){if(h<=0)return this;var a={retain:h};return l!=null&&typeof l=="object"&&Object.keys(l).length>0&&(a.attributes=l),this.push(a)},v.prototype.push=function(h){var l=this.ops.length,a=this.ops[l-1];if(h=u(!0,{},h),typeof a=="object"){if(typeof h.delete=="number"&&typeof a.delete=="number")return this.ops[l-1]={delete:a.delete+h.delete},this;if(typeof a.delete=="number"&&h.insert!=null&&(l-=1,a=this.ops[l-1],typeof a!="object"))return this.ops.unshift(h),this;if(s(h.attributes,a.attributes)){if(typeof h.insert=="string"&&typeof a.insert=="string")return this.ops[l-1]={insert:a.insert+h.insert},typeof h.attributes=="object"&&(this.ops[l-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof a.retain=="number")return this.ops[l-1]={retain:a.retain+h.retain},typeof h.attributes=="object"&&(this.ops[l-1].attributes=h.attributes),this}}return l===this.ops.length?this.ops.push(h):this.ops.splice(l,0,h),this},v.prototype.chop=function(){var h=this.ops[this.ops.length-1];return h&&h.retain&&!h.attributes&&this.ops.pop(),this},v.prototype.filter=function(h){return this.ops.filter(h)},v.prototype.forEach=function(h){this.ops.forEach(h)},v.prototype.map=function(h){return this.ops.map(h)},v.prototype.partition=function(h){var l=[],a=[];return this.forEach(function(y){var b=h(y)?l:a;b.push(y)}),[l,a]},v.prototype.reduce=function(h,l){return this.ops.reduce(h,l)},v.prototype.changeLength=function(){return this.reduce(function(h,l){return l.insert?h+f.length(l):l.delete?h-l.delete:h},0)},v.prototype.length=function(){return this.reduce(function(h,l){return h+f.length(l)},0)},v.prototype.slice=function(h,l){h=h||0,typeof l!="number"&&(l=1/0);for(var a=[],y=f.iterator(this.ops),b=0;b<l&&y.hasNext();){var w;b<h?w=y.next(h-b):(w=y.next(l-b),a.push(w)),b+=f.length(w)}return new v(a)},v.prototype.compose=function(h){var l=f.iterator(this.ops),a=f.iterator(h.ops),y=[],b=a.peek();if(b!=null&&typeof b.retain=="number"&&b.attributes==null){for(var w=b.retain;l.peekType()==="insert"&&l.peekLength()<=w;)w-=l.peekLength(),y.push(l.next());b.retain-w>0&&a.next(b.retain-w)}for(var m=new v(y);l.hasNext()||a.hasNext();)if(a.peekType()==="insert")m.push(a.next());else if(l.peekType()==="delete")m.push(l.next());else{var d=Math.min(l.peekLength(),a.peekLength()),p=l.next(d),c=a.next(d);if(typeof c.retain=="number"){var A={};typeof p.retain=="number"?A.retain=d:A.insert=p.insert;var T=f.attributes.compose(p.attributes,c.attributes,typeof p.retain=="number");if(T&&(A.attributes=T),m.push(A),!a.hasNext()&&s(m.ops[m.ops.length-1],A)){var _=new v(l.rest());return m.concat(_).chop()}}else typeof c.delete=="number"&&typeof p.retain=="number"&&m.push(c)}return m.chop()},v.prototype.concat=function(h){var l=new v(this.ops.slice());return h.ops.length>0&&(l.push(h.ops[0]),l.ops=l.ops.concat(h.ops.slice(1))),l},v.prototype.diff=function(h,l){if(this.ops===h.ops)return new v;var a=[this,h].map(function(d){return d.map(function(p){if(p.insert!=null)return typeof p.insert=="string"?p.insert:g;var c=d===h?"on":"with";throw new Error("diff() called "+c+" non-document")}).join("")}),y=new v,b=o(a[0],a[1],l),w=f.iterator(this.ops),m=f.iterator(h.ops);return b.forEach(function(d){for(var p=d[1].length;p>0;){var c=0;switch(d[0]){case o.INSERT:c=Math.min(m.peekLength(),p),y.push(m.next(c));break;case o.DELETE:c=Math.min(p,w.peekLength()),w.next(c),y.delete(c);break;case o.EQUAL:c=Math.min(w.peekLength(),m.peekLength(),p);var A=w.next(c),T=m.next(c);s(A.insert,T.insert)?y.retain(c,f.attributes.diff(A.attributes,T.attributes)):y.push(T).delete(c);break}p-=c}}),y.chop()},v.prototype.eachLine=function(h,l){l=l||`
`;for(var a=f.iterator(this.ops),y=new v,b=0;a.hasNext();){if(a.peekType()!=="insert")return;var w=a.peek(),m=f.length(w)-a.peekLength(),d=typeof w.insert=="string"?w.insert.indexOf(l,m)-m:-1;if(d<0)y.push(a.next());else if(d>0)y.push(a.next(d));else{if(h(y,a.next(1).attributes||{},b)===!1)return;b+=1,y=new v}}y.length()>0&&h(y,{},b)},v.prototype.transform=function(h,l){if(l=!!l,typeof h=="number")return this.transformPosition(h,l);for(var a=f.iterator(this.ops),y=f.iterator(h.ops),b=new v;a.hasNext()||y.hasNext();)if(a.peekType()==="insert"&&(l||y.peekType()!=="insert"))b.retain(f.length(a.next()));else if(y.peekType()==="insert")b.push(y.next());else{var w=Math.min(a.peekLength(),y.peekLength()),m=a.next(w),d=y.next(w);if(m.delete)continue;d.delete?b.push(d):b.retain(w,f.attributes.transform(m.attributes,d.attributes,l))}return b.chop()},v.prototype.transformPosition=function(h,l){l=!!l;for(var a=f.iterator(this.ops),y=0;a.hasNext()&&y<=h;){var b=a.peekLength(),w=a.peekType();if(a.next(),w==="delete"){h-=Math.min(b,h-y);continue}else w==="insert"&&(y<h||!l)&&(h+=b);y+=b}return h},t.exports=v},function(t,n){var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=Object.defineProperty,u=Object.getOwnPropertyDescriptor,f=function(a){return typeof Array.isArray=="function"?Array.isArray(a):o.call(a)==="[object Array]"},g=function(a){if(!a||o.call(a)!=="[object Object]")return!1;var y=r.call(a,"constructor"),b=a.constructor&&a.constructor.prototype&&r.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!y&&!b)return!1;var w;for(w in a);return typeof w>"u"||r.call(a,w)},v=function(a,y){s&&y.name==="__proto__"?s(a,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):a[y.name]=y.newValue},h=function(a,y){if(y==="__proto__")if(r.call(a,y)){if(u)return u(a,y).value}else return;return a[y]};t.exports=function l(){var a,y,b,w,m,d,p=arguments[0],c=1,A=arguments.length,T=!1;for(typeof p=="boolean"&&(T=p,p=arguments[1]||{},c=2),(p==null||typeof p!="object"&&typeof p!="function")&&(p={});c<A;++c)if(a=arguments[c],a!=null)for(y in a)b=h(p,y),w=h(a,y),p!==w&&(T&&w&&(g(w)||(m=f(w)))?(m?(m=!1,d=b&&f(b)?b:[]):d=b&&g(b)?b:{},v(p,{name:y,newValue:l(T,d,w)})):typeof w<"u"&&v(p,{name:y,newValue:w}));return p}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var o=function(){function E(x,N){for(var I=0;I<N.length;I++){var L=N[I];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(x,L.key,L)}}return function(x,N,I){return N&&E(x.prototype,N),I&&E(x,I),x}}(),s=function E(x,N,I){x===null&&(x=Function.prototype);var L=Object.getOwnPropertyDescriptor(x,N);if(L===void 0){var F=Object.getPrototypeOf(x);return F===null?void 0:E(F,N,I)}else{if("value"in L)return L.value;var U=L.get;return U===void 0?void 0:U.call(I)}},u=r(3),f=p(u),g=r(2),v=p(g),h=r(0),l=p(h),a=r(16),y=p(a),b=r(6),w=p(b),m=r(7),d=p(m);function p(E){return E&&E.__esModule?E:{default:E}}function c(E,x){if(!(E instanceof x))throw new TypeError("Cannot call a class as a function")}function A(E,x){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:E}function T(E,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);E.prototype=Object.create(x&&x.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(E,x):E.__proto__=x)}var _=1,k=function(E){T(x,E);function x(){return c(this,x),A(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return o(x,[{key:"attach",value:function(){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"attach",this).call(this),this.attributes=new l.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new v.default().insert(this.value(),(0,f.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(I,L){var F=l.default.query(I,l.default.Scope.BLOCK_ATTRIBUTE);F!=null&&this.attributes.attribute(F,L)}},{key:"formatAt",value:function(I,L,F,U){this.format(F,U)}},{key:"insertAt",value:function(I,L,F){if(typeof L=="string"&&L.endsWith(`
`)){var U=l.default.create(P.blotName);this.parent.insertBefore(U,I===0?this:this.next),U.insertAt(0,L.slice(0,-1))}else s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,I,L,F)}}]),x}(l.default.Embed);k.scope=l.default.Scope.BLOCK_BLOT;var P=function(E){T(x,E);function x(N){c(this,x);var I=A(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,N));return I.cache={},I}return o(x,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(l.default.Leaf).reduce(function(I,L){return L.length()===0?I:I.insert(L.value(),O(L))},new v.default).insert(`
`,O(this))),this.cache.delta}},{key:"deleteAt",value:function(I,L){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"deleteAt",this).call(this,I,L),this.cache={}}},{key:"formatAt",value:function(I,L,F,U){L<=0||(l.default.query(F,l.default.Scope.BLOCK)?I+L===this.length()&&this.format(F,U):s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"formatAt",this).call(this,I,Math.min(L,this.length()-I-1),F,U),this.cache={})}},{key:"insertAt",value:function(I,L,F){if(F!=null)return s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,I,L,F);if(L.length!==0){var U=L.split(`
`),G=U.shift();G.length>0&&(I<this.length()-1||this.children.tail==null?s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,Math.min(I,this.length()-1),G):this.children.tail.insertAt(this.children.tail.length(),G),this.cache={});var z=this;U.reduce(function(j,R){return z=z.split(j,!0),z.insertAt(0,R),R.length},I+G.length)}}},{key:"insertBefore",value:function(I,L){var F=this.children.head;s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertBefore",this).call(this,I,L),F instanceof y.default&&F.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"length",this).call(this)+_),this.cache.length}},{key:"moveChildren",value:function(I,L){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"moveChildren",this).call(this,I,L),this.cache={}}},{key:"optimize",value:function(I){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,I),this.cache={}}},{key:"path",value:function(I){return s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"path",this).call(this,I,!0)}},{key:"removeChild",value:function(I){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"removeChild",this).call(this,I),this.cache={}}},{key:"split",value:function(I){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(L&&(I===0||I>=this.length()-_)){var F=this.clone();return I===0?(this.parent.insertBefore(F,this),this):(this.parent.insertBefore(F,this.next),F)}else{var U=s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"split",this).call(this,I,L);return this.cache={},U}}}]),x}(l.default.Block);P.blotName="block",P.tagName="P",P.defaultChild="break",P.allowedChildren=[w.default,l.default.Embed,d.default];function O(E){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return E==null||(typeof E.formats=="function"&&(x=(0,f.default)(x,E.formats())),E.parent==null||E.parent.blotName=="scroll"||E.parent.statics.scope!==E.statics.scope)?x:O(E.parent,x)}n.bubbleFormats=O,n.BlockEmbed=k,n.default=P},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},s=function(){function z(j,R){var B=[],M=!0,K=!1,C=void 0;try{for(var S=j[Symbol.iterator](),D;!(M=(D=S.next()).done)&&(B.push(D.value),!(R&&B.length===R));M=!0);}catch(q){K=!0,C=q}finally{try{!M&&S.return&&S.return()}finally{if(K)throw C}}return B}return function(j,R){if(Array.isArray(j))return j;if(Symbol.iterator in Object(j))return z(j,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function z(j,R){for(var B=0;B<R.length;B++){var M=R[B];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(j,M.key,M)}}return function(j,R,B){return R&&z(j.prototype,R),B&&z(j,B),j}}();r(50);var f=r(2),g=O(f),v=r(14),h=O(v),l=r(8),a=O(l),y=r(9),b=O(y),w=r(0),m=O(w),d=r(15),p=O(d),c=r(3),A=O(c),T=r(10),_=O(T),k=r(34),P=O(k);function O(z){return z&&z.__esModule?z:{default:z}}function E(z,j,R){return j in z?Object.defineProperty(z,j,{value:R,enumerable:!0,configurable:!0,writable:!0}):z[j]=R,z}function x(z,j){if(!(z instanceof j))throw new TypeError("Cannot call a class as a function")}var N=(0,_.default)("quill"),I=function(){u(z,null,[{key:"debug",value:function(R){R===!0&&(R="log"),_.default.level(R)}},{key:"find",value:function(R){return R.__quill||m.default.find(R)}},{key:"import",value:function(R){return this.imports[R]==null&&N.error("Cannot import "+R+". Are you sure it was registered?"),this.imports[R]}},{key:"register",value:function(R,B){var M=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof R!="string"){var C=R.attrName||R.blotName;typeof C=="string"?this.register("formats/"+C,R,B):Object.keys(R).forEach(function(S){M.register(S,R[S],B)})}else this.imports[R]!=null&&!K&&N.warn("Overwriting "+R+" with",B),this.imports[R]=B,(R.startsWith("blots/")||R.startsWith("formats/"))&&B.blotName!=="abstract"?m.default.register(B):R.startsWith("modules")&&typeof B.register=="function"&&B.register()}}]);function z(j){var R=this,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(x(this,z),this.options=L(j,B),this.container=this.options.container,this.container==null)return N.error("Invalid Quill container",j);this.options.debug&&z.debug(this.options.debug);var M=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new a.default,this.scroll=m.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new h.default(this.scroll),this.selection=new p.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(a.default.events.EDITOR_CHANGE,function(C){C===a.default.events.TEXT_CHANGE&&R.root.classList.toggle("ql-blank",R.editor.isBlank())}),this.emitter.on(a.default.events.SCROLL_UPDATE,function(C,S){var D=R.selection.lastRange,q=D&&D.length===0?D.index:void 0;F.call(R,function(){return R.editor.update(null,S,q)},C)});var K=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+M+"<p><br></p></div>");this.setContents(K),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return u(z,[{key:"addContainer",value:function(R){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof R=="string"){var M=R;R=document.createElement("div"),R.classList.add(M)}return this.container.insertBefore(R,B),R}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(R,B,M){var K=this,C=U(R,B,M),S=s(C,4);return R=S[0],B=S[1],M=S[3],F.call(this,function(){return K.editor.deleteText(R,B)},M,R,-1*B)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(R),this.container.classList.toggle("ql-disabled",!R)}},{key:"focus",value:function(){var R=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=R,this.scrollIntoView()}},{key:"format",value:function(R,B){var M=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a.default.sources.API;return F.call(this,function(){var C=M.getSelection(!0),S=new g.default;if(C==null)return S;if(m.default.query(R,m.default.Scope.BLOCK))S=M.editor.formatLine(C.index,C.length,E({},R,B));else{if(C.length===0)return M.selection.format(R,B),S;S=M.editor.formatText(C.index,C.length,E({},R,B))}return M.setSelection(C,a.default.sources.SILENT),S},K)}},{key:"formatLine",value:function(R,B,M,K,C){var S=this,D=void 0,q=U(R,B,M,K,C),$=s(q,4);return R=$[0],B=$[1],D=$[2],C=$[3],F.call(this,function(){return S.editor.formatLine(R,B,D)},C,R,0)}},{key:"formatText",value:function(R,B,M,K,C){var S=this,D=void 0,q=U(R,B,M,K,C),$=s(q,4);return R=$[0],B=$[1],D=$[2],C=$[3],F.call(this,function(){return S.editor.formatText(R,B,D)},C,R,0)}},{key:"getBounds",value:function(R){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,M=void 0;typeof R=="number"?M=this.selection.getBounds(R,B):M=this.selection.getBounds(R.index,R.length);var K=this.container.getBoundingClientRect();return{bottom:M.bottom-K.top,height:M.height,left:M.left-K.left,right:M.right-K.left,top:M.top-K.top,width:M.width}}},{key:"getContents",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-R,M=U(R,B),K=s(M,2);return R=K[0],B=K[1],this.editor.getContents(R,B)}},{key:"getFormat",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof R=="number"?this.editor.getFormat(R,B):this.editor.getFormat(R.index,R.length)}},{key:"getIndex",value:function(R){return R.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(R){return this.scroll.leaf(R)}},{key:"getLine",value:function(R){return this.scroll.line(R)}},{key:"getLines",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof R!="number"?this.scroll.lines(R.index,R.length):this.scroll.lines(R,B)}},{key:"getModule",value:function(R){return this.theme.modules[R]}},{key:"getSelection",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return R&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-R,M=U(R,B),K=s(M,2);return R=K[0],B=K[1],this.editor.getText(R,B)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(R,B,M){var K=this,C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:z.sources.API;return F.call(this,function(){return K.editor.insertEmbed(R,B,M)},C,R)}},{key:"insertText",value:function(R,B,M,K,C){var S=this,D=void 0,q=U(R,0,M,K,C),$=s(q,4);return R=$[0],D=$[2],C=$[3],F.call(this,function(){return S.editor.insertText(R,B,D)},C,R,B.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(R,B,M){this.clipboard.dangerouslyPasteHTML(R,B,M)}},{key:"removeFormat",value:function(R,B,M){var K=this,C=U(R,B,M),S=s(C,4);return R=S[0],B=S[1],M=S[3],F.call(this,function(){return K.editor.removeFormat(R,B)},M,R)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(R){var B=this,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.default.sources.API;return F.call(this,function(){R=new g.default(R);var K=B.getLength(),C=B.editor.deleteText(0,K),S=B.editor.applyDelta(R),D=S.ops[S.ops.length-1];D!=null&&typeof D.insert=="string"&&D.insert[D.insert.length-1]===`
`&&(B.editor.deleteText(B.getLength()-1,1),S.delete(1));var q=C.compose(S);return q},M)}},{key:"setSelection",value:function(R,B,M){if(R==null)this.selection.setRange(null,B||z.sources.API);else{var K=U(R,B,M),C=s(K,4);R=C[0],B=C[1],M=C[3],this.selection.setRange(new d.Range(R,B),M),M!==a.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(R){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.default.sources.API,M=new g.default().insert(R);return this.setContents(M,B)}},{key:"update",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.default.sources.USER,B=this.scroll.update(R);return this.selection.update(R),B}},{key:"updateContents",value:function(R){var B=this,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.default.sources.API;return F.call(this,function(){return R=new g.default(R),B.editor.applyDelta(R,M)},M,!0)}}]),z}();I.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},I.events=a.default.events,I.sources=a.default.sources,I.version="1.3.7",I.imports={delta:g.default,parchment:m.default,"core/module":b.default,"core/theme":P.default};function L(z,j){if(j=(0,A.default)(!0,{container:z,modules:{clipboard:!0,keyboard:!0,history:!0}},j),!j.theme||j.theme===I.DEFAULTS.theme)j.theme=P.default;else if(j.theme=I.import("themes/"+j.theme),j.theme==null)throw new Error("Invalid theme "+j.theme+". Did you register it?");var R=(0,A.default)(!0,{},j.theme.DEFAULTS);[R,j].forEach(function(K){K.modules=K.modules||{},Object.keys(K.modules).forEach(function(C){K.modules[C]===!0&&(K.modules[C]={})})});var B=Object.keys(R.modules).concat(Object.keys(j.modules)),M=B.reduce(function(K,C){var S=I.import("modules/"+C);return S==null?N.error("Cannot load "+C+" module. Are you sure you registered it?"):K[C]=S.DEFAULTS||{},K},{});return j.modules!=null&&j.modules.toolbar&&j.modules.toolbar.constructor!==Object&&(j.modules.toolbar={container:j.modules.toolbar}),j=(0,A.default)(!0,{},I.DEFAULTS,{modules:M},R,j),["bounds","container","scrollingContainer"].forEach(function(K){typeof j[K]=="string"&&(j[K]=document.querySelector(j[K]))}),j.modules=Object.keys(j.modules).reduce(function(K,C){return j.modules[C]&&(K[C]=j.modules[C]),K},{}),j}function F(z,j,R,B){if(this.options.strict&&!this.isEnabled()&&j===a.default.sources.USER)return new g.default;var M=R==null?null:this.getSelection(),K=this.editor.delta,C=z();if(M!=null&&(R===!0&&(R=M.index),B==null?M=G(M,C,j):B!==0&&(M=G(M,R,B,j)),this.setSelection(M,a.default.sources.SILENT)),C.length()>0){var S,D=[a.default.events.TEXT_CHANGE,C,K,j];if((S=this.emitter).emit.apply(S,[a.default.events.EDITOR_CHANGE].concat(D)),j!==a.default.sources.SILENT){var q;(q=this.emitter).emit.apply(q,D)}}return C}function U(z,j,R,B,M){var K={};return typeof z.index=="number"&&typeof z.length=="number"?typeof j!="number"?(M=B,B=R,R=j,j=z.length,z=z.index):(j=z.length,z=z.index):typeof j!="number"&&(M=B,B=R,R=j,j=0),(typeof R>"u"?"undefined":o(R))==="object"?(K=R,M=B):typeof R=="string"&&(B!=null?K[R]=B:M=R),M=M||a.default.sources.API,[z,j,K,M]}function G(z,j,R,B){if(z==null)return null;var M=void 0,K=void 0;if(j instanceof g.default){var C=[z.index,z.index+z.length].map(function($){return j.transformPosition($,B!==a.default.sources.USER)}),S=s(C,2);M=S[0],K=S[1]}else{var D=[z.index,z.index+z.length].map(function($){return $<j||$===j&&B===a.default.sources.USER?$:R>=0?$+R:Math.max(j,$+R)}),q=s(D,2);M=q[0],K=q[1]}return new d.Range(M,K-M)}n.expandConfig=L,n.overload=U,n.default=I},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function w(m,d){for(var p=0;p<d.length;p++){var c=d[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(m,c.key,c)}}return function(m,d,p){return d&&w(m.prototype,d),p&&w(m,p),m}}(),s=function w(m,d,p){m===null&&(m=Function.prototype);var c=Object.getOwnPropertyDescriptor(m,d);if(c===void 0){var A=Object.getPrototypeOf(m);return A===null?void 0:w(A,d,p)}else{if("value"in c)return c.value;var T=c.get;return T===void 0?void 0:T.call(p)}},u=r(7),f=h(u),g=r(0),v=h(g);function h(w){return w&&w.__esModule?w:{default:w}}function l(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}function a(w,m){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:w}function y(w,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);w.prototype=Object.create(m&&m.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(w,m):w.__proto__=m)}var b=function(w){y(m,w);function m(){return l(this,m),a(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"formatAt",value:function(p,c,A,T){if(m.compare(this.statics.blotName,A)<0&&v.default.query(A,v.default.Scope.BLOT)){var _=this.isolate(p,c);T&&_.wrap(A,T)}else s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"formatAt",this).call(this,p,c,A,T)}},{key:"optimize",value:function(p){if(s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"optimize",this).call(this,p),this.parent instanceof m&&m.compare(this.statics.blotName,this.parent.statics.blotName)>0){var c=this.parent.isolate(this.offset(),this.length());this.moveChildren(c),c.wrap(this)}}}],[{key:"compare",value:function(p,c){var A=m.order.indexOf(p),T=m.order.indexOf(c);return A>=0||T>=0?A-T:p===c?0:p<c?-1:1}}]),m}(v.default.Inline);b.allowedChildren=[b,v.default.Embed,f.default],b.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=b},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(0),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}function f(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function g(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function v(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var h=function(l){v(a,l);function a(){return f(this,a),g(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(s.default.Text);n.default=h},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function d(p,c){for(var A=0;A<c.length;A++){var T=c[A];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(p,T.key,T)}}return function(p,c,A){return c&&d(p.prototype,c),A&&d(p,A),p}}(),s=function d(p,c,A){p===null&&(p=Function.prototype);var T=Object.getOwnPropertyDescriptor(p,c);if(T===void 0){var _=Object.getPrototypeOf(p);return _===null?void 0:d(_,c,A)}else{if("value"in T)return T.value;var k=T.get;return k===void 0?void 0:k.call(A)}},u=r(54),f=h(u),g=r(10),v=h(g);function h(d){return d&&d.__esModule?d:{default:d}}function l(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}function a(d,p){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:d}function y(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(d,p):d.__proto__=p)}var b=(0,v.default)("quill:events"),w=["selectionchange","mousedown","mouseup","click"];w.forEach(function(d){document.addEventListener(d,function(){for(var p=arguments.length,c=Array(p),A=0;A<p;A++)c[A]=arguments[A];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(T){if(T.__quill&&T.__quill.emitter){var _;(_=T.__quill.emitter).handleDOM.apply(_,c)}})})});var m=function(d){y(p,d);function p(){l(this,p);var c=a(this,(p.__proto__||Object.getPrototypeOf(p)).call(this));return c.listeners={},c.on("error",b.error),c}return o(p,[{key:"emit",value:function(){b.log.apply(b,arguments),s(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(A){for(var T=arguments.length,_=Array(T>1?T-1:0),k=1;k<T;k++)_[k-1]=arguments[k];(this.listeners[A.type]||[]).forEach(function(P){var O=P.node,E=P.handler;(A.target===O||O.contains(A.target))&&E.apply(void 0,[A].concat(_))})}},{key:"listenDOM",value:function(A,T,_){this.listeners[A]||(this.listeners[A]=[]),this.listeners[A].push({node:T,handler:_})}}]),p}(f.default);m.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},m.sources={API:"api",SILENT:"silent",USER:"user"},n.default=m},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}var s=function u(f){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,u),this.quill=f,this.options=g};s.DEFAULTS={},n.default=s},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=["error","warn","log","info"],s="warn";function u(g){if(o.indexOf(g)<=o.indexOf(s)){for(var v,h=arguments.length,l=Array(h>1?h-1:0),a=1;a<h;a++)l[a-1]=arguments[a];(v=console)[g].apply(v,l)}}function f(g){return o.reduce(function(v,h){return v[h]=u.bind(console,h,g),v},{})}u.level=f.level=function(g){s=g},n.default=f},function(t,n,r){var o=Array.prototype.slice,s=r(52),u=r(53),f=t.exports=function(l,a,y){return y||(y={}),l===a?!0:l instanceof Date&&a instanceof Date?l.getTime()===a.getTime():!l||!a||typeof l!="object"&&typeof a!="object"?y.strict?l===a:l==a:h(l,a,y)};function g(l){return l==null}function v(l){return!(!l||typeof l!="object"||typeof l.length!="number"||typeof l.copy!="function"||typeof l.slice!="function"||l.length>0&&typeof l[0]!="number")}function h(l,a,y){var b,w;if(g(l)||g(a)||l.prototype!==a.prototype)return!1;if(u(l))return u(a)?(l=o.call(l),a=o.call(a),f(l,a,y)):!1;if(v(l)){if(!v(a)||l.length!==a.length)return!1;for(b=0;b<l.length;b++)if(l[b]!==a[b])return!1;return!0}try{var m=s(l),d=s(a)}catch{return!1}if(m.length!=d.length)return!1;for(m.sort(),d.sort(),b=m.length-1;b>=0;b--)if(m[b]!=d[b])return!1;for(b=m.length-1;b>=0;b--)if(w=m[b],!f(l[w],a[w],y))return!1;return typeof l==typeof a}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(1),s=function(){function u(f,g,v){v===void 0&&(v={}),this.attrName=f,this.keyName=g;var h=o.Scope.TYPE&o.Scope.ATTRIBUTE;v.scope!=null?this.scope=v.scope&o.Scope.LEVEL|h:this.scope=o.Scope.ATTRIBUTE,v.whitelist!=null&&(this.whitelist=v.whitelist)}return u.keys=function(f){return[].map.call(f.attributes,function(g){return g.name})},u.prototype.add=function(f,g){return this.canAdd(f,g)?(f.setAttribute(this.keyName,g),!0):!1},u.prototype.canAdd=function(f,g){var v=o.query(f,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return v==null?!1:this.whitelist==null?!0:typeof g=="string"?this.whitelist.indexOf(g.replace(/["']/g,""))>-1:this.whitelist.indexOf(g)>-1},u.prototype.remove=function(f){f.removeAttribute(this.keyName)},u.prototype.value=function(f){var g=f.getAttribute(this.keyName);return this.canAdd(f,g)&&g?g:""},u}();n.default=s},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var o=function(){function k(P,O){var E=[],x=!0,N=!1,I=void 0;try{for(var L=P[Symbol.iterator](),F;!(x=(F=L.next()).done)&&(E.push(F.value),!(O&&E.length===O));x=!0);}catch(U){N=!0,I=U}finally{try{!x&&L.return&&L.return()}finally{if(N)throw I}}return E}return function(P,O){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return k(P,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function k(P,O){for(var E=0;E<O.length;E++){var x=O[E];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(P,x.key,x)}}return function(P,O,E){return O&&k(P.prototype,O),E&&k(P,E),P}}(),u=function k(P,O,E){P===null&&(P=Function.prototype);var x=Object.getOwnPropertyDescriptor(P,O);if(x===void 0){var N=Object.getPrototypeOf(P);return N===null?void 0:k(N,O,E)}else{if("value"in x)return x.value;var I=x.get;return I===void 0?void 0:I.call(E)}},f=r(2),g=d(f),v=r(0),h=d(v),l=r(4),a=d(l),y=r(6),b=d(y),w=r(7),m=d(w);function d(k){return k&&k.__esModule?k:{default:k}}function p(k,P){if(!(k instanceof P))throw new TypeError("Cannot call a class as a function")}function c(k,P){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:k}function A(k,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);k.prototype=Object.create(P&&P.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(k,P):k.__proto__=P)}var T=function(k){A(P,k);function P(){return p(this,P),c(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return P}(b.default);T.blotName="code",T.tagName="CODE";var _=function(k){A(P,k);function P(){return p(this,P),c(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return s(P,[{key:"delta",value:function(){var E=this,x=this.domNode.textContent;return x.endsWith(`
`)&&(x=x.slice(0,-1)),x.split(`
`).reduce(function(N,I){return N.insert(I).insert(`
`,E.formats())},new g.default)}},{key:"format",value:function(E,x){if(!(E===this.statics.blotName&&x)){var N=this.descendant(m.default,this.length()-1),I=o(N,1),L=I[0];L!=null&&L.deleteAt(L.length()-1,1),u(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"format",this).call(this,E,x)}}},{key:"formatAt",value:function(E,x,N,I){if(x!==0&&!(h.default.query(N,h.default.Scope.BLOCK)==null||N===this.statics.blotName&&I===this.statics.formats(this.domNode))){var L=this.newlineIndex(E);if(!(L<0||L>=E+x)){var F=this.newlineIndex(E,!0)+1,U=L-F+1,G=this.isolate(F,U),z=G.next;G.format(N,I),z instanceof P&&z.formatAt(0,E-F+x-U,N,I)}}}},{key:"insertAt",value:function(E,x,N){if(N==null){var I=this.descendant(m.default,E),L=o(I,2),F=L[0],U=L[1];F.insertAt(U,x)}}},{key:"length",value:function(){var E=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?E:E+1}},{key:"newlineIndex",value:function(E){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(x)return this.domNode.textContent.slice(0,E).lastIndexOf(`
`);var N=this.domNode.textContent.slice(E).indexOf(`
`);return N>-1?E+N:-1}},{key:"optimize",value:function(E){this.domNode.textContent.endsWith(`
`)||this.appendChild(h.default.create("text",`
`)),u(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"optimize",this).call(this,E);var x=this.next;x!=null&&x.prev===this&&x.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===x.statics.formats(x.domNode)&&(x.optimize(E),x.moveChildren(this),x.remove())}},{key:"replace",value:function(E){u(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replace",this).call(this,E),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(x){var N=h.default.find(x);N==null?x.parentNode.removeChild(x):N instanceof h.default.Embed?N.remove():N.unwrap()})}}],[{key:"create",value:function(E){var x=u(P.__proto__||Object.getPrototypeOf(P),"create",this).call(this,E);return x.setAttribute("spellcheck",!1),x}},{key:"formats",value:function(){return!0}}]),P}(a.default);_.blotName="code-block",_.tagName="PRE",_.TAB="  ",n.Code=T,n.default=_},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},s=function(){function z(j,R){var B=[],M=!0,K=!1,C=void 0;try{for(var S=j[Symbol.iterator](),D;!(M=(D=S.next()).done)&&(B.push(D.value),!(R&&B.length===R));M=!0);}catch(q){K=!0,C=q}finally{try{!M&&S.return&&S.return()}finally{if(K)throw C}}return B}return function(j,R){if(Array.isArray(j))return j;if(Symbol.iterator in Object(j))return z(j,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function z(j,R){for(var B=0;B<R.length;B++){var M=R[B];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(j,M.key,M)}}return function(j,R,B){return R&&z(j.prototype,R),B&&z(j,B),j}}(),f=r(2),g=x(f),v=r(20),h=x(v),l=r(0),a=x(l),y=r(13),b=x(y),w=r(24),m=x(w),d=r(4),p=x(d),c=r(16),A=x(c),T=r(21),_=x(T),k=r(11),P=x(k),O=r(3),E=x(O);function x(z){return z&&z.__esModule?z:{default:z}}function N(z,j,R){return j in z?Object.defineProperty(z,j,{value:R,enumerable:!0,configurable:!0,writable:!0}):z[j]=R,z}function I(z,j){if(!(z instanceof j))throw new TypeError("Cannot call a class as a function")}var L=/^[ -~]*$/,F=function(){function z(j){I(this,z),this.scroll=j,this.delta=this.getDelta()}return u(z,[{key:"applyDelta",value:function(R){var B=this,M=!1;this.scroll.update();var K=this.scroll.length();return this.scroll.batchStart(),R=G(R),R.reduce(function(C,S){var D=S.retain||S.delete||S.insert.length||1,q=S.attributes||{};if(S.insert!=null){if(typeof S.insert=="string"){var $=S.insert;$.endsWith(`
`)&&M&&(M=!1,$=$.slice(0,-1)),C>=K&&!$.endsWith(`
`)&&(M=!0),B.scroll.insertAt(C,$);var H=B.scroll.line(C),ne=s(H,2),ce=ne[0],fe=ne[1],ge=(0,E.default)({},(0,d.bubbleFormats)(ce));if(ce instanceof p.default){var Oe=ce.descendant(a.default.Leaf,fe),$e=s(Oe,1),Fe=$e[0];ge=(0,E.default)(ge,(0,d.bubbleFormats)(Fe))}q=h.default.attributes.diff(ge,q)||{}}else if(o(S.insert)==="object"){var te=Object.keys(S.insert)[0];if(te==null)return C;B.scroll.insertAt(C,te,S.insert[te])}K+=D}return Object.keys(q).forEach(function(Y){B.scroll.formatAt(C,D,Y,q[Y])}),C+D},0),R.reduce(function(C,S){return typeof S.delete=="number"?(B.scroll.deleteAt(C,S.delete),C):C+(S.retain||S.insert.length||1)},0),this.scroll.batchEnd(),this.update(R)}},{key:"deleteText",value:function(R,B){return this.scroll.deleteAt(R,B),this.update(new g.default().retain(R).delete(B))}},{key:"formatLine",value:function(R,B){var M=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(K).forEach(function(C){if(!(M.scroll.whitelist!=null&&!M.scroll.whitelist[C])){var S=M.scroll.lines(R,Math.max(B,1)),D=B;S.forEach(function(q){var $=q.length();if(!(q instanceof b.default))q.format(C,K[C]);else{var H=R-q.offset(M.scroll),ne=q.newlineIndex(H+D)-H+1;q.formatAt(H,ne,C,K[C])}D-=$})}}),this.scroll.optimize(),this.update(new g.default().retain(R).retain(B,(0,_.default)(K)))}},{key:"formatText",value:function(R,B){var M=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(K).forEach(function(C){M.scroll.formatAt(R,B,C,K[C])}),this.update(new g.default().retain(R).retain(B,(0,_.default)(K)))}},{key:"getContents",value:function(R,B){return this.delta.slice(R,R+B)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(R,B){return R.concat(B.delta())},new g.default)}},{key:"getFormat",value:function(R){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,M=[],K=[];B===0?this.scroll.path(R).forEach(function(S){var D=s(S,1),q=D[0];q instanceof p.default?M.push(q):q instanceof a.default.Leaf&&K.push(q)}):(M=this.scroll.lines(R,B),K=this.scroll.descendants(a.default.Leaf,R,B));var C=[M,K].map(function(S){if(S.length===0)return{};for(var D=(0,d.bubbleFormats)(S.shift());Object.keys(D).length>0;){var q=S.shift();if(q==null)return D;D=U((0,d.bubbleFormats)(q),D)}return D});return E.default.apply(E.default,C)}},{key:"getText",value:function(R,B){return this.getContents(R,B).filter(function(M){return typeof M.insert=="string"}).map(function(M){return M.insert}).join("")}},{key:"insertEmbed",value:function(R,B,M){return this.scroll.insertAt(R,B,M),this.update(new g.default().retain(R).insert(N({},B,M)))}},{key:"insertText",value:function(R,B){var M=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return B=B.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(R,B),Object.keys(K).forEach(function(C){M.scroll.formatAt(R,B.length,C,K[C])}),this.update(new g.default().retain(R).insert(B,(0,_.default)(K)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var R=this.scroll.children.head;return R.statics.blotName!==p.default.blotName||R.children.length>1?!1:R.children.head instanceof A.default}},{key:"removeFormat",value:function(R,B){var M=this.getText(R,B),K=this.scroll.line(R+B),C=s(K,2),S=C[0],D=C[1],q=0,$=new g.default;S!=null&&(S instanceof b.default?q=S.newlineIndex(D)-D+1:q=S.length()-D,$=S.delta().slice(D,D+q-1).insert(`
`));var H=this.getContents(R,B+q),ne=H.diff(new g.default().insert(M).concat($)),ce=new g.default().retain(R).concat(ne);return this.applyDelta(ce)}},{key:"update",value:function(R){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,K=this.delta;if(B.length===1&&B[0].type==="characterData"&&B[0].target.data.match(L)&&a.default.find(B[0].target)){var C=a.default.find(B[0].target),S=(0,d.bubbleFormats)(C),D=C.offset(this.scroll),q=B[0].oldValue.replace(m.default.CONTENTS,""),$=new g.default().insert(q),H=new g.default().insert(C.value()),ne=new g.default().retain(D).concat($.diff(H,M));R=ne.reduce(function(ce,fe){return fe.insert?ce.insert(fe.insert,S):ce.push(fe)},new g.default),this.delta=K.compose(R)}else this.delta=this.getDelta(),(!R||!(0,P.default)(K.compose(R),this.delta))&&(R=K.diff(this.delta,M));return R}}]),z}();function U(z,j){return Object.keys(j).reduce(function(R,B){return z[B]==null||(j[B]===z[B]?R[B]=j[B]:Array.isArray(j[B])?j[B].indexOf(z[B])<0&&(R[B]=j[B].concat([z[B]])):R[B]=[j[B],z[B]]),R},{})}function G(z){return z.reduce(function(j,R){if(R.insert===1){var B=(0,_.default)(R.attributes);return delete B.image,j.insert({image:R.attributes.image},B)}if(R.attributes!=null&&(R.attributes.list===!0||R.attributes.bullet===!0)&&(R=(0,_.default)(R),R.attributes.list?R.attributes.list="ordered":(R.attributes.list="bullet",delete R.attributes.bullet)),typeof R.insert=="string"){var M=R.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return j.insert(M,R.attributes)}return j.push(R)},new g.default)}n.default=F},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var o=function(){function k(P,O){var E=[],x=!0,N=!1,I=void 0;try{for(var L=P[Symbol.iterator](),F;!(x=(F=L.next()).done)&&(E.push(F.value),!(O&&E.length===O));x=!0);}catch(U){N=!0,I=U}finally{try{!x&&L.return&&L.return()}finally{if(N)throw I}}return E}return function(P,O){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return k(P,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function k(P,O){for(var E=0;E<O.length;E++){var x=O[E];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(P,x.key,x)}}return function(P,O,E){return O&&k(P.prototype,O),E&&k(P,E),P}}(),u=r(0),f=m(u),g=r(21),v=m(g),h=r(11),l=m(h),a=r(8),y=m(a),b=r(10),w=m(b);function m(k){return k&&k.__esModule?k:{default:k}}function d(k){if(Array.isArray(k)){for(var P=0,O=Array(k.length);P<k.length;P++)O[P]=k[P];return O}else return Array.from(k)}function p(k,P){if(!(k instanceof P))throw new TypeError("Cannot call a class as a function")}var c=(0,w.default)("quill:selection"),A=function k(P){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;p(this,k),this.index=P,this.length=O},T=function(){function k(P,O){var E=this;p(this,k),this.emitter=O,this.scroll=P,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=f.default.create("cursor",this),this.lastRange=this.savedRange=new A(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){E.mouseDown||setTimeout(E.update.bind(E,y.default.sources.USER),1)}),this.emitter.on(y.default.events.EDITOR_CHANGE,function(x,N){x===y.default.events.TEXT_CHANGE&&N.length()>0&&E.update(y.default.sources.SILENT)}),this.emitter.on(y.default.events.SCROLL_BEFORE_UPDATE,function(){if(E.hasFocus()){var x=E.getNativeRange();x!=null&&x.start.node!==E.cursor.textNode&&E.emitter.once(y.default.events.SCROLL_UPDATE,function(){try{E.setNativeRange(x.start.node,x.start.offset,x.end.node,x.end.offset)}catch{}})}}),this.emitter.on(y.default.events.SCROLL_OPTIMIZE,function(x,N){if(N.range){var I=N.range,L=I.startNode,F=I.startOffset,U=I.endNode,G=I.endOffset;E.setNativeRange(L,F,U,G)}}),this.update(y.default.sources.SILENT)}return s(k,[{key:"handleComposition",value:function(){var O=this;this.root.addEventListener("compositionstart",function(){O.composing=!0}),this.root.addEventListener("compositionend",function(){if(O.composing=!1,O.cursor.parent){var E=O.cursor.restore();if(!E)return;setTimeout(function(){O.setNativeRange(E.startNode,E.startOffset,E.endNode,E.endOffset)},1)}})}},{key:"handleDragging",value:function(){var O=this;this.emitter.listenDOM("mousedown",document.body,function(){O.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){O.mouseDown=!1,O.update(y.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(O,E){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[O])){this.scroll.update();var x=this.getNativeRange();if(!(x==null||!x.native.collapsed||f.default.query(O,f.default.Scope.BLOCK))){if(x.start.node!==this.cursor.textNode){var N=f.default.find(x.start.node,!1);if(N==null)return;if(N instanceof f.default.Leaf){var I=N.split(x.start.offset);N.parent.insertBefore(this.cursor,I)}else N.insertBefore(this.cursor,x.start.node);this.cursor.attach()}this.cursor.format(O,E),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(O){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=this.scroll.length();O=Math.min(O,x-1),E=Math.min(O+E,x-1)-O;var N=void 0,I=this.scroll.leaf(O),L=o(I,2),F=L[0],U=L[1];if(F==null)return null;var G=F.position(U,!0),z=o(G,2);N=z[0],U=z[1];var j=document.createRange();if(E>0){j.setStart(N,U);var R=this.scroll.leaf(O+E),B=o(R,2);if(F=B[0],U=B[1],F==null)return null;var M=F.position(U,!0),K=o(M,2);return N=K[0],U=K[1],j.setEnd(N,U),j.getBoundingClientRect()}else{var C="left",S=void 0;return N instanceof Text?(U<N.data.length?(j.setStart(N,U),j.setEnd(N,U+1)):(j.setStart(N,U-1),j.setEnd(N,U),C="right"),S=j.getBoundingClientRect()):(S=F.domNode.getBoundingClientRect(),U>0&&(C="right")),{bottom:S.top+S.height,height:S.height,left:S[C],right:S[C],top:S.top,width:0}}}},{key:"getNativeRange",value:function(){var O=document.getSelection();if(O==null||O.rangeCount<=0)return null;var E=O.getRangeAt(0);if(E==null)return null;var x=this.normalizeNative(E);return c.info("getNativeRange",x),x}},{key:"getRange",value:function(){var O=this.getNativeRange();if(O==null)return[null,null];var E=this.normalizedToRange(O);return[E,O]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(O){var E=this,x=[[O.start.node,O.start.offset]];O.native.collapsed||x.push([O.end.node,O.end.offset]);var N=x.map(function(F){var U=o(F,2),G=U[0],z=U[1],j=f.default.find(G,!0),R=j.offset(E.scroll);return z===0?R:j instanceof f.default.Container?R+j.length():R+j.index(G,z)}),I=Math.min(Math.max.apply(Math,d(N)),this.scroll.length()-1),L=Math.min.apply(Math,[I].concat(d(N)));return new A(L,I-L)}},{key:"normalizeNative",value:function(O){if(!_(this.root,O.startContainer)||!O.collapsed&&!_(this.root,O.endContainer))return null;var E={start:{node:O.startContainer,offset:O.startOffset},end:{node:O.endContainer,offset:O.endOffset},native:O};return[E.start,E.end].forEach(function(x){for(var N=x.node,I=x.offset;!(N instanceof Text)&&N.childNodes.length>0;)if(N.childNodes.length>I)N=N.childNodes[I],I=0;else if(N.childNodes.length===I)N=N.lastChild,I=N instanceof Text?N.data.length:N.childNodes.length+1;else break;x.node=N,x.offset=I}),E}},{key:"rangeToNative",value:function(O){var E=this,x=O.collapsed?[O.index]:[O.index,O.index+O.length],N=[],I=this.scroll.length();return x.forEach(function(L,F){L=Math.min(I-1,L);var U=void 0,G=E.scroll.leaf(L),z=o(G,2),j=z[0],R=z[1],B=j.position(R,F!==0),M=o(B,2);U=M[0],R=M[1],N.push(U,R)}),N.length<2&&(N=N.concat(N)),N}},{key:"scrollIntoView",value:function(O){var E=this.lastRange;if(E!=null){var x=this.getBounds(E.index,E.length);if(x!=null){var N=this.scroll.length()-1,I=this.scroll.line(Math.min(E.index,N)),L=o(I,1),F=L[0],U=F;if(E.length>0){var G=this.scroll.line(Math.min(E.index+E.length,N)),z=o(G,1);U=z[0]}if(!(F==null||U==null)){var j=O.getBoundingClientRect();x.top<j.top?O.scrollTop-=j.top-x.top:x.bottom>j.bottom&&(O.scrollTop+=x.bottom-j.bottom)}}}}},{key:"setNativeRange",value:function(O,E){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:O,N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:E,I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(c.info("setNativeRange",O,E,x,N),!(O!=null&&(this.root.parentNode==null||O.parentNode==null||x.parentNode==null))){var L=document.getSelection();if(L!=null)if(O!=null){this.hasFocus()||this.root.focus();var F=(this.getNativeRange()||{}).native;if(F==null||I||O!==F.startContainer||E!==F.startOffset||x!==F.endContainer||N!==F.endOffset){O.tagName=="BR"&&(E=[].indexOf.call(O.parentNode.childNodes,O),O=O.parentNode),x.tagName=="BR"&&(N=[].indexOf.call(x.parentNode.childNodes,x),x=x.parentNode);var U=document.createRange();U.setStart(O,E),U.setEnd(x,N),L.removeAllRanges(),L.addRange(U)}}else L.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(O){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof E=="string"&&(x=E,E=!1),c.info("setRange",O),O!=null){var N=this.rangeToNative(O);this.setNativeRange.apply(this,d(N).concat([E]))}else this.setNativeRange(null);this.update(x)}},{key:"update",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,E=this.lastRange,x=this.getRange(),N=o(x,2),I=N[0],L=N[1];if(this.lastRange=I,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,l.default)(E,this.lastRange)){var F;!this.composing&&L!=null&&L.native.collapsed&&L.start.node!==this.cursor.textNode&&this.cursor.restore();var U=[y.default.events.SELECTION_CHANGE,(0,v.default)(this.lastRange),(0,v.default)(E),O];if((F=this.emitter).emit.apply(F,[y.default.events.EDITOR_CHANGE].concat(U)),O!==y.default.sources.SILENT){var G;(G=this.emitter).emit.apply(G,U)}}}}]),k}();function _(k,P){try{P.parentNode}catch{return!1}return P instanceof Text&&(P=P.parentNode),k.contains(P)}n.Range=A,n.default=T},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function y(b,w){for(var m=0;m<w.length;m++){var d=w[m];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(b,d.key,d)}}return function(b,w,m){return w&&y(b.prototype,w),m&&y(b,m),b}}(),s=function y(b,w,m){b===null&&(b=Function.prototype);var d=Object.getOwnPropertyDescriptor(b,w);if(d===void 0){var p=Object.getPrototypeOf(b);return p===null?void 0:y(p,w,m)}else{if("value"in d)return d.value;var c=d.get;return c===void 0?void 0:c.call(m)}},u=r(0),f=g(u);function g(y){return y&&y.__esModule?y:{default:y}}function v(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function h(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function l(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var a=function(y){l(b,y);function b(){return v(this,b),h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,[{key:"insertInto",value:function(m,d){m.children.length===0?s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"insertInto",this).call(this,m,d):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),b}(f.default.Embed);a.blotName="break",a.tagName="BR",n.default=a},function(t,n,r){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var y in a)a.hasOwnProperty(y)&&(l[y]=a[y])};return function(l,a){h(l,a);function y(){this.constructor=l}l.prototype=a===null?Object.create(a):(y.prototype=a.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(44),u=r(30),f=r(1),g=function(h){o(l,h);function l(a){var y=h.call(this,a)||this;return y.build(),y}return l.prototype.appendChild=function(a){this.insertBefore(a)},l.prototype.attach=function(){h.prototype.attach.call(this),this.children.forEach(function(a){a.attach()})},l.prototype.build=function(){var a=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(y){try{var b=v(y);a.insertBefore(b,a.children.head||void 0)}catch(w){if(w instanceof f.ParchmentError)return;throw w}})},l.prototype.deleteAt=function(a,y){if(a===0&&y===this.length())return this.remove();this.children.forEachAt(a,y,function(b,w,m){b.deleteAt(w,m)})},l.prototype.descendant=function(a,y){var b=this.children.find(y),w=b[0],m=b[1];return a.blotName==null&&a(w)||a.blotName!=null&&w instanceof a?[w,m]:w instanceof l?w.descendant(a,m):[null,-1]},l.prototype.descendants=function(a,y,b){y===void 0&&(y=0),b===void 0&&(b=Number.MAX_VALUE);var w=[],m=b;return this.children.forEachAt(y,b,function(d,p,c){(a.blotName==null&&a(d)||a.blotName!=null&&d instanceof a)&&w.push(d),d instanceof l&&(w=w.concat(d.descendants(a,p,m))),m-=c}),w},l.prototype.detach=function(){this.children.forEach(function(a){a.detach()}),h.prototype.detach.call(this)},l.prototype.formatAt=function(a,y,b,w){this.children.forEachAt(a,y,function(m,d,p){m.formatAt(d,p,b,w)})},l.prototype.insertAt=function(a,y,b){var w=this.children.find(a),m=w[0],d=w[1];if(m)m.insertAt(d,y,b);else{var p=b==null?f.create("text",y):f.create(y,b);this.appendChild(p)}},l.prototype.insertBefore=function(a,y){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(b){return a instanceof b}))throw new f.ParchmentError("Cannot insert "+a.statics.blotName+" into "+this.statics.blotName);a.insertInto(this,y)},l.prototype.length=function(){return this.children.reduce(function(a,y){return a+y.length()},0)},l.prototype.moveChildren=function(a,y){this.children.forEach(function(b){a.insertBefore(b,y)})},l.prototype.optimize=function(a){if(h.prototype.optimize.call(this,a),this.children.length===0)if(this.statics.defaultChild!=null){var y=f.create(this.statics.defaultChild);this.appendChild(y),y.optimize(a)}else this.remove()},l.prototype.path=function(a,y){y===void 0&&(y=!1);var b=this.children.find(a,y),w=b[0],m=b[1],d=[[this,a]];return w instanceof l?d.concat(w.path(m,y)):(w!=null&&d.push([w,m]),d)},l.prototype.removeChild=function(a){this.children.remove(a)},l.prototype.replace=function(a){a instanceof l&&a.moveChildren(this),h.prototype.replace.call(this,a)},l.prototype.split=function(a,y){if(y===void 0&&(y=!1),!y){if(a===0)return this;if(a===this.length())return this.next}var b=this.clone();return this.parent.insertBefore(b,this.next),this.children.forEachAt(a,this.length(),function(w,m,d){w=w.split(m,y),b.appendChild(w)}),b},l.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},l.prototype.update=function(a,y){var b=this,w=[],m=[];a.forEach(function(d){d.target===b.domNode&&d.type==="childList"&&(w.push.apply(w,d.addedNodes),m.push.apply(m,d.removedNodes))}),m.forEach(function(d){if(!(d.parentNode!=null&&d.tagName!=="IFRAME"&&document.body.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var p=f.find(d);p!=null&&(p.domNode.parentNode==null||p.domNode.parentNode===b.domNode)&&p.detach()}}),w.filter(function(d){return d.parentNode==b.domNode}).sort(function(d,p){return d===p?0:d.compareDocumentPosition(p)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(d){var p=null;d.nextSibling!=null&&(p=f.find(d.nextSibling));var c=v(d);(c.next!=p||c.next==null)&&(c.parent!=null&&c.parent.removeChild(b),b.insertBefore(c,p||void 0))})},l}(u.default);function v(h){var l=f.find(h);if(l==null)try{l=f.create(h)}catch{l=f.create(f.Scope.INLINE),[].slice.call(h.childNodes).forEach(function(y){l.domNode.appendChild(y)}),h.parentNode&&h.parentNode.replaceChild(l.domNode,h),l.attach()}return l}n.default=g},function(t,n,r){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var y in a)a.hasOwnProperty(y)&&(l[y]=a[y])};return function(l,a){h(l,a);function y(){this.constructor=l}l.prototype=a===null?Object.create(a):(y.prototype=a.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(12),u=r(31),f=r(17),g=r(1),v=function(h){o(l,h);function l(a){var y=h.call(this,a)||this;return y.attributes=new u.default(y.domNode),y}return l.formats=function(a){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return a.tagName.toLowerCase()},l.prototype.format=function(a,y){var b=g.query(a);b instanceof s.default?this.attributes.attribute(b,y):y&&b!=null&&(a!==this.statics.blotName||this.formats()[a]!==y)&&this.replaceWith(a,y)},l.prototype.formats=function(){var a=this.attributes.values(),y=this.statics.formats(this.domNode);return y!=null&&(a[this.statics.blotName]=y),a},l.prototype.replaceWith=function(a,y){var b=h.prototype.replaceWith.call(this,a,y);return this.attributes.copy(b),b},l.prototype.update=function(a,y){var b=this;h.prototype.update.call(this,a,y),a.some(function(w){return w.target===b.domNode&&w.type==="attributes"})&&this.attributes.build()},l.prototype.wrap=function(a,y){var b=h.prototype.wrap.call(this,a,y);return b instanceof l&&b.statics.scope===this.statics.scope&&this.attributes.move(b),b},l}(f.default);n.default=v},function(t,n,r){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,h){v.__proto__=h}||function(v,h){for(var l in h)h.hasOwnProperty(l)&&(v[l]=h[l])};return function(v,h){g(v,h);function l(){this.constructor=v}v.prototype=h===null?Object.create(h):(l.prototype=h.prototype,new l)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(30),u=r(1),f=function(g){o(v,g);function v(){return g!==null&&g.apply(this,arguments)||this}return v.value=function(h){return!0},v.prototype.index=function(h,l){return this.domNode===h||this.domNode.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(l,1):-1},v.prototype.position=function(h,l){var a=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return h>0&&(a+=1),[this.parent.domNode,a]},v.prototype.value=function(){var h;return h={},h[this.statics.blotName]=this.statics.value(this.domNode)||!0,h},v.scope=u.Scope.INLINE_BLOT,v}(s.default);n.default=f},function(t,n,r){var o=r(11),s=r(3),u={attributes:{compose:function(g,v,h){typeof g!="object"&&(g={}),typeof v!="object"&&(v={});var l=s(!0,{},v);h||(l=Object.keys(l).reduce(function(y,b){return l[b]!=null&&(y[b]=l[b]),y},{}));for(var a in g)g[a]!==void 0&&v[a]===void 0&&(l[a]=g[a]);return Object.keys(l).length>0?l:void 0},diff:function(g,v){typeof g!="object"&&(g={}),typeof v!="object"&&(v={});var h=Object.keys(g).concat(Object.keys(v)).reduce(function(l,a){return o(g[a],v[a])||(l[a]=v[a]===void 0?null:v[a]),l},{});return Object.keys(h).length>0?h:void 0},transform:function(g,v,h){if(typeof g!="object")return v;if(typeof v=="object"){if(!h)return v;var l=Object.keys(v).reduce(function(a,y){return g[y]===void 0&&(a[y]=v[y]),a},{});return Object.keys(l).length>0?l:void 0}}},iterator:function(g){return new f(g)},length:function(g){return typeof g.delete=="number"?g.delete:typeof g.retain=="number"?g.retain:typeof g.insert=="string"?g.insert.length:1}};function f(g){this.ops=g,this.index=0,this.offset=0}f.prototype.hasNext=function(){return this.peekLength()<1/0},f.prototype.next=function(g){g||(g=1/0);var v=this.ops[this.index];if(v){var h=this.offset,l=u.length(v);if(g>=l-h?(g=l-h,this.index+=1,this.offset=0):this.offset+=g,typeof v.delete=="number")return{delete:g};var a={};return v.attributes&&(a.attributes=v.attributes),typeof v.retain=="number"?a.retain=g:typeof v.insert=="string"?a.insert=v.insert.substr(h,g):a.insert=v.insert,a}else return{retain:1/0}},f.prototype.peek=function(){return this.ops[this.index]},f.prototype.peekLength=function(){return this.ops[this.index]?u.length(this.ops[this.index])-this.offset:1/0},f.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},f.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var g=this.offset,v=this.index,h=this.next(),l=this.ops.slice(this.index);return this.offset=g,this.index=v,[h].concat(l)}else return[]},t.exports=u},function(t,n){var r=function(){function o(b,w){return w!=null&&b instanceof w}var s;try{s=Map}catch{s=function(){}}var u;try{u=Set}catch{u=function(){}}var f;try{f=Promise}catch{f=function(){}}function g(b,w,m,d,p){typeof w=="object"&&(m=w.depth,d=w.prototype,p=w.includeNonEnumerable,w=w.circular);var c=[],A=[],T=typeof Buffer<"u";typeof w>"u"&&(w=!0),typeof m>"u"&&(m=1/0);function _(k,P){if(k===null)return null;if(P===0)return k;var O,E;if(typeof k!="object")return k;if(o(k,s))O=new s;else if(o(k,u))O=new u;else if(o(k,f))O=new f(function(j,R){k.then(function(B){j(_(B,P-1))},function(B){R(_(B,P-1))})});else if(g.__isArray(k))O=[];else if(g.__isRegExp(k))O=new RegExp(k.source,y(k)),k.lastIndex&&(O.lastIndex=k.lastIndex);else if(g.__isDate(k))O=new Date(k.getTime());else{if(T&&Buffer.isBuffer(k))return Buffer.allocUnsafe?O=Buffer.allocUnsafe(k.length):O=new Buffer(k.length),k.copy(O),O;o(k,Error)?O=Object.create(k):typeof d>"u"?(E=Object.getPrototypeOf(k),O=Object.create(E)):(O=Object.create(d),E=d)}if(w){var x=c.indexOf(k);if(x!=-1)return A[x];c.push(k),A.push(O)}o(k,s)&&k.forEach(function(j,R){var B=_(R,P-1),M=_(j,P-1);O.set(B,M)}),o(k,u)&&k.forEach(function(j){var R=_(j,P-1);O.add(R)});for(var N in k){var I;E&&(I=Object.getOwnPropertyDescriptor(E,N)),!(I&&I.set==null)&&(O[N]=_(k[N],P-1))}if(Object.getOwnPropertySymbols)for(var L=Object.getOwnPropertySymbols(k),N=0;N<L.length;N++){var F=L[N],U=Object.getOwnPropertyDescriptor(k,F);U&&!U.enumerable&&!p||(O[F]=_(k[F],P-1),U.enumerable||Object.defineProperty(O,F,{enumerable:!1}))}if(p)for(var G=Object.getOwnPropertyNames(k),N=0;N<G.length;N++){var z=G[N],U=Object.getOwnPropertyDescriptor(k,z);U&&U.enumerable||(O[z]=_(k[z],P-1),Object.defineProperty(O,z,{enumerable:!1}))}return O}return _(b,m)}g.clonePrototype=function(w){if(w===null)return null;var m=function(){};return m.prototype=w,new m};function v(b){return Object.prototype.toString.call(b)}g.__objToStr=v;function h(b){return typeof b=="object"&&v(b)==="[object Date]"}g.__isDate=h;function l(b){return typeof b=="object"&&v(b)==="[object Array]"}g.__isArray=l;function a(b){return typeof b=="object"&&v(b)==="[object RegExp]"}g.__isRegExp=a;function y(b){var w="";return b.global&&(w+="g"),b.ignoreCase&&(w+="i"),b.multiline&&(w+="m"),w}return g.__getRegExpFlags=y,g}();typeof t=="object"&&t.exports&&(t.exports=r)},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function O(E,x){var N=[],I=!0,L=!1,F=void 0;try{for(var U=E[Symbol.iterator](),G;!(I=(G=U.next()).done)&&(N.push(G.value),!(x&&N.length===x));I=!0);}catch(z){L=!0,F=z}finally{try{!I&&U.return&&U.return()}finally{if(L)throw F}}return N}return function(E,x){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return O(E,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function O(E,x){for(var N=0;N<x.length;N++){var I=x[N];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(E,I.key,I)}}return function(E,x,N){return x&&O(E.prototype,x),N&&O(E,N),E}}(),u=function O(E,x,N){E===null&&(E=Function.prototype);var I=Object.getOwnPropertyDescriptor(E,x);if(I===void 0){var L=Object.getPrototypeOf(E);return L===null?void 0:O(L,x,N)}else{if("value"in I)return I.value;var F=I.get;return F===void 0?void 0:F.call(N)}},f=r(0),g=c(f),v=r(8),h=c(v),l=r(4),a=c(l),y=r(16),b=c(y),w=r(13),m=c(w),d=r(25),p=c(d);function c(O){return O&&O.__esModule?O:{default:O}}function A(O,E){if(!(O instanceof E))throw new TypeError("Cannot call a class as a function")}function T(O,E){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:O}function _(O,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);O.prototype=Object.create(E&&E.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(O,E):O.__proto__=E)}function k(O){return O instanceof a.default||O instanceof l.BlockEmbed}var P=function(O){_(E,O);function E(x,N){A(this,E);var I=T(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,x));return I.emitter=N.emitter,Array.isArray(N.whitelist)&&(I.whitelist=N.whitelist.reduce(function(L,F){return L[F]=!0,L},{})),I.domNode.addEventListener("DOMNodeInserted",function(){}),I.optimize(),I.enable(),I}return s(E,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(N,I){var L=this.line(N),F=o(L,2),U=F[0],G=F[1],z=this.line(N+I),j=o(z,1),R=j[0];if(u(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,N,I),R!=null&&U!==R&&G>0){if(U instanceof l.BlockEmbed||R instanceof l.BlockEmbed){this.optimize();return}if(U instanceof m.default){var B=U.newlineIndex(U.length(),!0);if(B>-1&&(U=U.split(B+1),U===R)){this.optimize();return}}else if(R instanceof m.default){var M=R.newlineIndex(0);M>-1&&R.split(M+1)}var K=R.children.head instanceof b.default?null:R.children.head;U.moveChildren(R,K),U.remove()}this.optimize()}},{key:"enable",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",N)}},{key:"formatAt",value:function(N,I,L,F){this.whitelist!=null&&!this.whitelist[L]||(u(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,N,I,L,F),this.optimize())}},{key:"insertAt",value:function(N,I,L){if(!(L!=null&&this.whitelist!=null&&!this.whitelist[I])){if(N>=this.length())if(L==null||g.default.query(I,g.default.Scope.BLOCK)==null){var F=g.default.create(this.statics.defaultChild);this.appendChild(F),L==null&&I.endsWith(`
`)&&(I=I.slice(0,-1)),F.insertAt(0,I,L)}else{var U=g.default.create(I,L);this.appendChild(U)}else u(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,N,I,L);this.optimize()}}},{key:"insertBefore",value:function(N,I){if(N.statics.scope===g.default.Scope.INLINE_BLOT){var L=g.default.create(this.statics.defaultChild);L.appendChild(N),N=L}u(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,N,I)}},{key:"leaf",value:function(N){return this.path(N).pop()||[null,-1]}},{key:"line",value:function(N){return N===this.length()?this.line(N-1):this.descendant(k,N)}},{key:"lines",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,L=function F(U,G,z){var j=[],R=z;return U.children.forEachAt(G,z,function(B,M,K){k(B)?j.push(B):B instanceof g.default.Container&&(j=j.concat(F(B,M,R))),R-=K}),j};return L(this,N,I)}},{key:"optimize",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(u(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,N,I),N.length>0&&this.emitter.emit(h.default.events.SCROLL_OPTIMIZE,N,I))}},{key:"path",value:function(N){return u(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,N).slice(1)}},{key:"update",value:function(N){if(this.batch!==!0){var I=h.default.sources.USER;typeof N=="string"&&(I=N),Array.isArray(N)||(N=this.observer.takeRecords()),N.length>0&&this.emitter.emit(h.default.events.SCROLL_BEFORE_UPDATE,I,N),u(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"update",this).call(this,N.concat([])),N.length>0&&this.emitter.emit(h.default.events.SCROLL_UPDATE,I,N)}}}]),E}(g.default.Scroll);P.blotName="scroll",P.className="ql-editor",P.tagName="DIV",P.defaultChild="block",P.allowedChildren=[a.default,l.BlockEmbed,p.default],n.default=P},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},s=function(){function S(D,q){var $=[],H=!0,ne=!1,ce=void 0;try{for(var fe=D[Symbol.iterator](),ge;!(H=(ge=fe.next()).done)&&($.push(ge.value),!(q&&$.length===q));H=!0);}catch(Oe){ne=!0,ce=Oe}finally{try{!H&&fe.return&&fe.return()}finally{if(ne)throw ce}}return $}return function(D,q){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return S(D,q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function S(D,q){for(var $=0;$<q.length;$++){var H=q[$];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(D,H.key,H)}}return function(D,q,$){return q&&S(D.prototype,q),$&&S(D,$),D}}(),f=r(21),g=O(f),v=r(11),h=O(v),l=r(3),a=O(l),y=r(2),b=O(y),w=r(20),m=O(w),d=r(0),p=O(d),c=r(5),A=O(c),T=r(10),_=O(T),k=r(9),P=O(k);function O(S){return S&&S.__esModule?S:{default:S}}function E(S,D,q){return D in S?Object.defineProperty(S,D,{value:q,enumerable:!0,configurable:!0,writable:!0}):S[D]=q,S}function x(S,D){if(!(S instanceof D))throw new TypeError("Cannot call a class as a function")}function N(S,D){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:S}function I(S,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);S.prototype=Object.create(D&&D.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(S,D):S.__proto__=D)}var L=(0,_.default)("quill:keyboard"),F=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",U=function(S){I(D,S),u(D,null,[{key:"match",value:function($,H){return H=C(H),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ne){return!!H[ne]!==$[ne]&&H[ne]!==null})?!1:H.key===($.which||$.keyCode)}}]);function D(q,$){x(this,D);var H=N(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,q,$));return H.bindings={},Object.keys(H.options.bindings).forEach(function(ne){ne==="list autofill"&&q.scroll.whitelist!=null&&!q.scroll.whitelist.list||H.options.bindings[ne]&&H.addBinding(H.options.bindings[ne])}),H.addBinding({key:D.keys.ENTER,shiftKey:null},B),H.addBinding({key:D.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(H.addBinding({key:D.keys.BACKSPACE},{collapsed:!0},z),H.addBinding({key:D.keys.DELETE},{collapsed:!0},j)):(H.addBinding({key:D.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},z),H.addBinding({key:D.keys.DELETE},{collapsed:!0,suffix:/^.?$/},j)),H.addBinding({key:D.keys.BACKSPACE},{collapsed:!1},R),H.addBinding({key:D.keys.DELETE},{collapsed:!1},R),H.addBinding({key:D.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},z),H.listen(),H}return u(D,[{key:"addBinding",value:function($){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ce=C($);if(ce==null||ce.key==null)return L.warn("Attempted to add invalid keyboard binding",ce);typeof H=="function"&&(H={handler:H}),typeof ne=="function"&&(ne={handler:ne}),ce=(0,a.default)(ce,H,ne),this.bindings[ce.key]=this.bindings[ce.key]||[],this.bindings[ce.key].push(ce)}},{key:"listen",value:function(){var $=this;this.quill.root.addEventListener("keydown",function(H){if(!H.defaultPrevented){var ne=H.which||H.keyCode,ce=($.bindings[ne]||[]).filter(function(ke){return D.match(H,ke)});if(ce.length!==0){var fe=$.quill.getSelection();if(!(fe==null||!$.quill.hasFocus())){var ge=$.quill.getLine(fe.index),Oe=s(ge,2),$e=Oe[0],Fe=Oe[1],te=$.quill.getLeaf(fe.index),Y=s(te,2),Z=Y[0],ae=Y[1],se=fe.length===0?[Z,ae]:$.quill.getLeaf(fe.index+fe.length),ye=s(se,2),de=ye[0],be=ye[1],Pe=Z instanceof p.default.Text?Z.value().slice(0,ae):"",Le=de instanceof p.default.Text?de.value().slice(be):"",Ee={collapsed:fe.length===0,empty:fe.length===0&&$e.length()<=1,format:$.quill.getFormat(fe),offset:Fe,prefix:Pe,suffix:Le},Ze=ce.some(function(ke){if(ke.collapsed!=null&&ke.collapsed!==Ee.collapsed||ke.empty!=null&&ke.empty!==Ee.empty||ke.offset!=null&&ke.offset!==Ee.offset)return!1;if(Array.isArray(ke.format)){if(ke.format.every(function(vt){return Ee.format[vt]==null}))return!1}else if(o(ke.format)==="object"&&!Object.keys(ke.format).every(function(vt){return ke.format[vt]===!0?Ee.format[vt]!=null:ke.format[vt]===!1?Ee.format[vt]==null:(0,h.default)(ke.format[vt],Ee.format[vt])}))return!1;return ke.prefix!=null&&!ke.prefix.test(Ee.prefix)||ke.suffix!=null&&!ke.suffix.test(Ee.suffix)?!1:ke.handler.call($,fe,Ee)!==!0});Ze&&H.preventDefault()}}}})}}]),D}(P.default);U.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},U.DEFAULTS={bindings:{bold:K("bold"),italic:K("italic"),underline:K("underline"),indent:{key:U.keys.TAB,format:["blockquote","indent","list"],handler:function(D,q){if(q.collapsed&&q.offset!==0)return!0;this.quill.format("indent","+1",A.default.sources.USER)}},outdent:{key:U.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(D,q){if(q.collapsed&&q.offset!==0)return!0;this.quill.format("indent","-1",A.default.sources.USER)}},"outdent backspace":{key:U.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(D,q){q.format.indent!=null?this.quill.format("indent","-1",A.default.sources.USER):q.format.list!=null&&this.quill.format("list",!1,A.default.sources.USER)}},"indent code-block":M(!0),"outdent code-block":M(!1),"remove tab":{key:U.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(D){this.quill.deleteText(D.index-1,1,A.default.sources.USER)}},tab:{key:U.keys.TAB,handler:function(D){this.quill.history.cutoff();var q=new b.default().retain(D.index).delete(D.length).insert("	");this.quill.updateContents(q,A.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(D.index+1,A.default.sources.SILENT)}},"list empty enter":{key:U.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(D,q){this.quill.format("list",!1,A.default.sources.USER),q.format.indent&&this.quill.format("indent",!1,A.default.sources.USER)}},"checklist enter":{key:U.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(D){var q=this.quill.getLine(D.index),$=s(q,2),H=$[0],ne=$[1],ce=(0,a.default)({},H.formats(),{list:"checked"}),fe=new b.default().retain(D.index).insert(`
`,ce).retain(H.length()-ne-1).retain(1,{list:"unchecked"});this.quill.updateContents(fe,A.default.sources.USER),this.quill.setSelection(D.index+1,A.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:U.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(D,q){var $=this.quill.getLine(D.index),H=s($,2),ne=H[0],ce=H[1],fe=new b.default().retain(D.index).insert(`
`,q.format).retain(ne.length()-ce-1).retain(1,{header:null});this.quill.updateContents(fe,A.default.sources.USER),this.quill.setSelection(D.index+1,A.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(D,q){var $=q.prefix.length,H=this.quill.getLine(D.index),ne=s(H,2),ce=ne[0],fe=ne[1];if(fe>$)return!0;var ge=void 0;switch(q.prefix.trim()){case"[]":case"[ ]":ge="unchecked";break;case"[x]":ge="checked";break;case"-":case"*":ge="bullet";break;default:ge="ordered"}this.quill.insertText(D.index," ",A.default.sources.USER),this.quill.history.cutoff();var Oe=new b.default().retain(D.index-fe).delete($+1).retain(ce.length()-2-fe).retain(1,{list:ge});this.quill.updateContents(Oe,A.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(D.index-$,A.default.sources.SILENT)}},"code exit":{key:U.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(D){var q=this.quill.getLine(D.index),$=s(q,2),H=$[0],ne=$[1],ce=new b.default().retain(D.index+H.length()-ne-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ce,A.default.sources.USER)}},"embed left":G(U.keys.LEFT,!1),"embed left shift":G(U.keys.LEFT,!0),"embed right":G(U.keys.RIGHT,!1),"embed right shift":G(U.keys.RIGHT,!0)}};function G(S,D){var q,$=S===U.keys.LEFT?"prefix":"suffix";return q={key:S,shiftKey:D,altKey:null},E(q,$,/^$/),E(q,"handler",function(ne){var ce=ne.index;S===U.keys.RIGHT&&(ce+=ne.length+1);var fe=this.quill.getLeaf(ce),ge=s(fe,1),Oe=ge[0];return Oe instanceof p.default.Embed?(S===U.keys.LEFT?D?this.quill.setSelection(ne.index-1,ne.length+1,A.default.sources.USER):this.quill.setSelection(ne.index-1,A.default.sources.USER):D?this.quill.setSelection(ne.index,ne.length+1,A.default.sources.USER):this.quill.setSelection(ne.index+ne.length+1,A.default.sources.USER),!1):!0}),q}function z(S,D){if(!(S.index===0||this.quill.getLength()<=1)){var q=this.quill.getLine(S.index),$=s(q,1),H=$[0],ne={};if(D.offset===0){var ce=this.quill.getLine(S.index-1),fe=s(ce,1),ge=fe[0];if(ge!=null&&ge.length()>1){var Oe=H.formats(),$e=this.quill.getFormat(S.index-1,1);ne=m.default.attributes.diff(Oe,$e)||{}}}var Fe=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(D.prefix)?2:1;this.quill.deleteText(S.index-Fe,Fe,A.default.sources.USER),Object.keys(ne).length>0&&this.quill.formatLine(S.index-Fe,Fe,ne,A.default.sources.USER),this.quill.focus()}}function j(S,D){var q=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(D.suffix)?2:1;if(!(S.index>=this.quill.getLength()-q)){var $={},H=0,ne=this.quill.getLine(S.index),ce=s(ne,1),fe=ce[0];if(D.offset>=fe.length()-1){var ge=this.quill.getLine(S.index+1),Oe=s(ge,1),$e=Oe[0];if($e){var Fe=fe.formats(),te=this.quill.getFormat(S.index,1);$=m.default.attributes.diff(Fe,te)||{},H=$e.length()}}this.quill.deleteText(S.index,q,A.default.sources.USER),Object.keys($).length>0&&this.quill.formatLine(S.index+H-1,q,$,A.default.sources.USER)}}function R(S){var D=this.quill.getLines(S),q={};if(D.length>1){var $=D[0].formats(),H=D[D.length-1].formats();q=m.default.attributes.diff(H,$)||{}}this.quill.deleteText(S,A.default.sources.USER),Object.keys(q).length>0&&this.quill.formatLine(S.index,1,q,A.default.sources.USER),this.quill.setSelection(S.index,A.default.sources.SILENT),this.quill.focus()}function B(S,D){var q=this;S.length>0&&this.quill.scroll.deleteAt(S.index,S.length);var $=Object.keys(D.format).reduce(function(H,ne){return p.default.query(ne,p.default.Scope.BLOCK)&&!Array.isArray(D.format[ne])&&(H[ne]=D.format[ne]),H},{});this.quill.insertText(S.index,`
`,$,A.default.sources.USER),this.quill.setSelection(S.index+1,A.default.sources.SILENT),this.quill.focus(),Object.keys(D.format).forEach(function(H){$[H]==null&&(Array.isArray(D.format[H])||H!=="link"&&q.quill.format(H,D.format[H],A.default.sources.USER))})}function M(S){return{key:U.keys.TAB,shiftKey:!S,format:{"code-block":!0},handler:function(q){var $=p.default.query("code-block"),H=q.index,ne=q.length,ce=this.quill.scroll.descendant($,H),fe=s(ce,2),ge=fe[0],Oe=fe[1];if(ge!=null){var $e=this.quill.getIndex(ge),Fe=ge.newlineIndex(Oe,!0)+1,te=ge.newlineIndex($e+Oe+ne),Y=ge.domNode.textContent.slice(Fe,te).split(`
`);Oe=0,Y.forEach(function(Z,ae){S?(ge.insertAt(Fe+Oe,$.TAB),Oe+=$.TAB.length,ae===0?H+=$.TAB.length:ne+=$.TAB.length):Z.startsWith($.TAB)&&(ge.deleteAt(Fe+Oe,$.TAB.length),Oe-=$.TAB.length,ae===0?H-=$.TAB.length:ne-=$.TAB.length),Oe+=Z.length+1}),this.quill.update(A.default.sources.USER),this.quill.setSelection(H,ne,A.default.sources.SILENT)}}}}function K(S){return{key:S[0].toUpperCase(),shortKey:!0,handler:function(q,$){this.quill.format(S,!$.format[S],A.default.sources.USER)}}}function C(S){if(typeof S=="string"||typeof S=="number")return C({key:S});if((typeof S>"u"?"undefined":o(S))==="object"&&(S=(0,g.default)(S,!1)),typeof S.key=="string")if(U.keys[S.key.toUpperCase()]!=null)S.key=U.keys[S.key.toUpperCase()];else if(S.key.length===1)S.key=S.key.toUpperCase().charCodeAt(0);else return null;return S.shortKey&&(S[F]=S.shortKey,delete S.shortKey),S}n.default=U,n.SHORTKEY=F},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function m(d,p){var c=[],A=!0,T=!1,_=void 0;try{for(var k=d[Symbol.iterator](),P;!(A=(P=k.next()).done)&&(c.push(P.value),!(p&&c.length===p));A=!0);}catch(O){T=!0,_=O}finally{try{!A&&k.return&&k.return()}finally{if(T)throw _}}return c}return function(d,p){if(Array.isArray(d))return d;if(Symbol.iterator in Object(d))return m(d,p);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function m(d,p,c){d===null&&(d=Function.prototype);var A=Object.getOwnPropertyDescriptor(d,p);if(A===void 0){var T=Object.getPrototypeOf(d);return T===null?void 0:m(T,p,c)}else{if("value"in A)return A.value;var _=A.get;return _===void 0?void 0:_.call(c)}},u=function(){function m(d,p){for(var c=0;c<p.length;c++){var A=p[c];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(d,A.key,A)}}return function(d,p,c){return p&&m(d.prototype,p),c&&m(d,c),d}}(),f=r(0),g=l(f),v=r(7),h=l(v);function l(m){return m&&m.__esModule?m:{default:m}}function a(m,d){if(!(m instanceof d))throw new TypeError("Cannot call a class as a function")}function y(m,d){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:m}function b(m,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);m.prototype=Object.create(d&&d.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(m,d):m.__proto__=d)}var w=function(m){b(d,m),u(d,null,[{key:"value",value:function(){}}]);function d(p,c){a(this,d);var A=y(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,p));return A.selection=c,A.textNode=document.createTextNode(d.CONTENTS),A.domNode.appendChild(A.textNode),A._length=0,A}return u(d,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(c,A){if(this._length!==0)return s(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"format",this).call(this,c,A);for(var T=this,_=0;T!=null&&T.statics.scope!==g.default.Scope.BLOCK_BLOT;)_+=T.offset(T.parent),T=T.parent;T!=null&&(this._length=d.CONTENTS.length,T.optimize(),T.formatAt(_,d.CONTENTS.length,c,A),this._length=0)}},{key:"index",value:function(c,A){return c===this.textNode?0:s(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"index",this).call(this,c,A)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var c=this.textNode,A=this.selection.getNativeRange(),T=void 0,_=void 0,k=void 0;if(A!=null&&A.start.node===c&&A.end.node===c){var P=[c,A.start.offset,A.end.offset];T=P[0],_=P[1],k=P[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==d.CONTENTS){var O=this.textNode.data.split(d.CONTENTS).join("");this.next instanceof h.default?(T=this.next.domNode,this.next.insertAt(0,O),this.textNode.data=d.CONTENTS):(this.textNode.data=O,this.parent.insertBefore(g.default.create(this.textNode),this),this.textNode=document.createTextNode(d.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),_!=null){var E=[_,k].map(function(N){return Math.max(0,Math.min(T.data.length,N-1))}),x=o(E,2);return _=x[0],k=x[1],{startNode:T,startOffset:_,endNode:T,endOffset:k}}}}},{key:"update",value:function(c,A){var T=this;if(c.some(function(k){return k.type==="characterData"&&k.target===T.textNode})){var _=this.restore();_&&(A.range=_)}}},{key:"value",value:function(){return""}}]),d}(g.default.Embed);w.blotName="cursor",w.className="ql-cursor",w.tagName="span",w.CONTENTS="\uFEFF",n.default=w},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(0),s=g(o),u=r(4),f=g(u);function g(y){return y&&y.__esModule?y:{default:y}}function v(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function h(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function l(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var a=function(y){l(b,y);function b(){return v(this,b),h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return b}(s.default.Container);a.allowedChildren=[f.default,u.BlockEmbed,a],n.default=a},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var o=function(){function w(m,d){for(var p=0;p<d.length;p++){var c=d[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(m,c.key,c)}}return function(m,d,p){return d&&w(m.prototype,d),p&&w(m,p),m}}(),s=function w(m,d,p){m===null&&(m=Function.prototype);var c=Object.getOwnPropertyDescriptor(m,d);if(c===void 0){var A=Object.getPrototypeOf(m);return A===null?void 0:w(A,d,p)}else{if("value"in c)return c.value;var T=c.get;return T===void 0?void 0:T.call(p)}},u=r(0),f=g(u);function g(w){return w&&w.__esModule?w:{default:w}}function v(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}function h(w,m){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:w}function l(w,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);w.prototype=Object.create(m&&m.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(w,m):w.__proto__=m)}var a=function(w){l(m,w);function m(){return v(this,m),h(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"value",value:function(p){var c=s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,p);return c.startsWith("rgb(")?(c=c.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+c.split(",").map(function(A){return("00"+parseInt(A).toString(16)).slice(-2)}).join("")):c}}]),m}(f.default.Attributor.Style),y=new f.default.Attributor.Class("color","ql-color",{scope:f.default.Scope.INLINE}),b=new a("color","color",{scope:f.default.Scope.INLINE});n.ColorAttributor=a,n.ColorClass=y,n.ColorStyle=b},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var o=function(){function b(w,m){for(var d=0;d<m.length;d++){var p=m[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(w,p.key,p)}}return function(w,m,d){return m&&b(w.prototype,m),d&&b(w,d),w}}(),s=function b(w,m,d){w===null&&(w=Function.prototype);var p=Object.getOwnPropertyDescriptor(w,m);if(p===void 0){var c=Object.getPrototypeOf(w);return c===null?void 0:b(c,m,d)}else{if("value"in p)return p.value;var A=p.get;return A===void 0?void 0:A.call(d)}},u=r(6),f=g(u);function g(b){return b&&b.__esModule?b:{default:b}}function v(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function h(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function l(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var a=function(b){l(w,b);function w(){return v(this,w),h(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return o(w,[{key:"format",value:function(d,p){if(d!==this.statics.blotName||!p)return s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,d,p);p=this.constructor.sanitize(p),this.domNode.setAttribute("href",p)}}],[{key:"create",value:function(d){var p=s(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,d);return d=this.sanitize(d),p.setAttribute("href",d),p.setAttribute("rel","noopener noreferrer"),p.setAttribute("target","_blank"),p}},{key:"formats",value:function(d){return d.getAttribute("href")}},{key:"sanitize",value:function(d){return y(d,this.PROTOCOL_WHITELIST)?d:this.SANITIZED_URL}}]),w}(f.default);a.blotName="link",a.tagName="A",a.SANITIZED_URL="about:blank",a.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function y(b,w){var m=document.createElement("a");m.href=b;var d=m.href.slice(0,m.href.indexOf(":"));return w.indexOf(d)>-1}n.default=a,n.sanitize=y},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},s=function(){function w(m,d){for(var p=0;p<d.length;p++){var c=d[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(m,c.key,c)}}return function(m,d,p){return d&&w(m.prototype,d),p&&w(m,p),m}}(),u=r(23),f=h(u),g=r(107),v=h(g);function h(w){return w&&w.__esModule?w:{default:w}}function l(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}var a=0;function y(w,m){w.setAttribute(m,w.getAttribute(m)!=="true")}var b=function(){function w(m){var d=this;l(this,w),this.select=m,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){d.togglePicker()}),this.label.addEventListener("keydown",function(p){switch(p.keyCode){case f.default.keys.ENTER:d.togglePicker();break;case f.default.keys.ESCAPE:d.escape(),p.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return s(w,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),y(this.label,"aria-expanded"),y(this.options,"aria-hidden")}},{key:"buildItem",value:function(d){var p=this,c=document.createElement("span");return c.tabIndex="0",c.setAttribute("role","button"),c.classList.add("ql-picker-item"),d.hasAttribute("value")&&c.setAttribute("data-value",d.getAttribute("value")),d.textContent&&c.setAttribute("data-label",d.textContent),c.addEventListener("click",function(){p.selectItem(c,!0)}),c.addEventListener("keydown",function(A){switch(A.keyCode){case f.default.keys.ENTER:p.selectItem(c,!0),A.preventDefault();break;case f.default.keys.ESCAPE:p.escape(),A.preventDefault();break}}),c}},{key:"buildLabel",value:function(){var d=document.createElement("span");return d.classList.add("ql-picker-label"),d.innerHTML=v.default,d.tabIndex="0",d.setAttribute("role","button"),d.setAttribute("aria-expanded","false"),this.container.appendChild(d),d}},{key:"buildOptions",value:function(){var d=this,p=document.createElement("span");p.classList.add("ql-picker-options"),p.setAttribute("aria-hidden","true"),p.tabIndex="-1",p.id="ql-picker-options-"+a,a+=1,this.label.setAttribute("aria-controls",p.id),this.options=p,[].slice.call(this.select.options).forEach(function(c){var A=d.buildItem(c);p.appendChild(A),c.selected===!0&&d.selectItem(A)}),this.container.appendChild(p)}},{key:"buildPicker",value:function(){var d=this;[].slice.call(this.select.attributes).forEach(function(p){d.container.setAttribute(p.name,p.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var d=this;this.close(),setTimeout(function(){return d.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(d){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=this.container.querySelector(".ql-selected");if(d!==c&&(c!=null&&c.classList.remove("ql-selected"),d!=null&&(d.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(d.parentNode.children,d),d.hasAttribute("data-value")?this.label.setAttribute("data-value",d.getAttribute("data-value")):this.label.removeAttribute("data-value"),d.hasAttribute("data-label")?this.label.setAttribute("data-label",d.getAttribute("data-label")):this.label.removeAttribute("data-label"),p))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":o(Event))==="object"){var A=document.createEvent("Event");A.initEvent("change",!0,!0),this.select.dispatchEvent(A)}this.close()}}},{key:"update",value:function(){var d=void 0;if(this.select.selectedIndex>-1){var p=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];d=this.select.options[this.select.selectedIndex],this.selectItem(p)}else this.selectItem(null);var c=d!=null&&d!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",c)}}]),w}();n.default=b},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(0),s=L(o),u=r(5),f=L(u),g=r(4),v=L(g),h=r(16),l=L(h),a=r(25),y=L(a),b=r(24),w=L(b),m=r(35),d=L(m),p=r(6),c=L(p),A=r(22),T=L(A),_=r(7),k=L(_),P=r(55),O=L(P),E=r(42),x=L(E),N=r(23),I=L(N);function L(F){return F&&F.__esModule?F:{default:F}}f.default.register({"blots/block":v.default,"blots/block/embed":g.BlockEmbed,"blots/break":l.default,"blots/container":y.default,"blots/cursor":w.default,"blots/embed":d.default,"blots/inline":c.default,"blots/scroll":T.default,"blots/text":k.default,"modules/clipboard":O.default,"modules/history":x.default,"modules/keyboard":I.default}),s.default.register(v.default,l.default,w.default,c.default,T.default,k.default),n.default=f.default},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(1),s=function(){function u(f){this.domNode=f,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(u.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),u.create=function(f){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var g;return Array.isArray(this.tagName)?(typeof f=="string"&&(f=f.toUpperCase(),parseInt(f).toString()===f&&(f=parseInt(f))),typeof f=="number"?g=document.createElement(this.tagName[f-1]):this.tagName.indexOf(f)>-1?g=document.createElement(f):g=document.createElement(this.tagName[0])):g=document.createElement(this.tagName),this.className&&g.classList.add(this.className),g},u.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},u.prototype.clone=function(){var f=this.domNode.cloneNode(!1);return o.create(f)},u.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},u.prototype.deleteAt=function(f,g){var v=this.isolate(f,g);v.remove()},u.prototype.formatAt=function(f,g,v,h){var l=this.isolate(f,g);if(o.query(v,o.Scope.BLOT)!=null&&h)l.wrap(v,h);else if(o.query(v,o.Scope.ATTRIBUTE)!=null){var a=o.create(this.statics.scope);l.wrap(a),a.format(v,h)}},u.prototype.insertAt=function(f,g,v){var h=v==null?o.create("text",g):o.create(g,v),l=this.split(f);this.parent.insertBefore(h,l)},u.prototype.insertInto=function(f,g){g===void 0&&(g=null),this.parent!=null&&this.parent.children.remove(this);var v=null;f.children.insertBefore(this,g),g!=null&&(v=g.domNode),(this.domNode.parentNode!=f.domNode||this.domNode.nextSibling!=v)&&f.domNode.insertBefore(this.domNode,v),this.parent=f,this.attach()},u.prototype.isolate=function(f,g){var v=this.split(f);return v.split(g),v},u.prototype.length=function(){return 1},u.prototype.offset=function(f){return f===void 0&&(f=this.parent),this.parent==null||this==f?0:this.parent.children.offset(this)+this.parent.offset(f)},u.prototype.optimize=function(f){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},u.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},u.prototype.replace=function(f){f.parent!=null&&(f.parent.insertBefore(this,f.next),f.remove())},u.prototype.replaceWith=function(f,g){var v=typeof f=="string"?o.create(f,g):f;return v.replace(this),v},u.prototype.split=function(f,g){return f===0?this:this.next},u.prototype.update=function(f,g){},u.prototype.wrap=function(f,g){var v=typeof f=="string"?o.create(f,g):f;return this.parent!=null&&this.parent.insertBefore(v,this.next),v.appendChild(this),v},u.blotName="abstract",u}();n.default=s},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(12),s=r(32),u=r(33),f=r(1),g=function(){function v(h){this.attributes={},this.domNode=h,this.build()}return v.prototype.attribute=function(h,l){l?h.add(this.domNode,l)&&(h.value(this.domNode)!=null?this.attributes[h.attrName]=h:delete this.attributes[h.attrName]):(h.remove(this.domNode),delete this.attributes[h.attrName])},v.prototype.build=function(){var h=this;this.attributes={};var l=o.default.keys(this.domNode),a=s.default.keys(this.domNode),y=u.default.keys(this.domNode);l.concat(a).concat(y).forEach(function(b){var w=f.query(b,f.Scope.ATTRIBUTE);w instanceof o.default&&(h.attributes[w.attrName]=w)})},v.prototype.copy=function(h){var l=this;Object.keys(this.attributes).forEach(function(a){var y=l.attributes[a].value(l.domNode);h.format(a,y)})},v.prototype.move=function(h){var l=this;this.copy(h),Object.keys(this.attributes).forEach(function(a){l.attributes[a].remove(l.domNode)}),this.attributes={}},v.prototype.values=function(){var h=this;return Object.keys(this.attributes).reduce(function(l,a){return l[a]=h.attributes[a].value(h.domNode),l},{})},v}();n.default=g},function(t,n,r){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,h){v.__proto__=h}||function(v,h){for(var l in h)h.hasOwnProperty(l)&&(v[l]=h[l])};return function(v,h){g(v,h);function l(){this.constructor=v}v.prototype=h===null?Object.create(h):(l.prototype=h.prototype,new l)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(12);function u(g,v){var h=g.getAttribute("class")||"";return h.split(/\s+/).filter(function(l){return l.indexOf(v+"-")===0})}var f=function(g){o(v,g);function v(){return g!==null&&g.apply(this,arguments)||this}return v.keys=function(h){return(h.getAttribute("class")||"").split(/\s+/).map(function(l){return l.split("-").slice(0,-1).join("-")})},v.prototype.add=function(h,l){return this.canAdd(h,l)?(this.remove(h),h.classList.add(this.keyName+"-"+l),!0):!1},v.prototype.remove=function(h){var l=u(h,this.keyName);l.forEach(function(a){h.classList.remove(a)}),h.classList.length===0&&h.removeAttribute("class")},v.prototype.value=function(h){var l=u(h,this.keyName)[0]||"",a=l.slice(this.keyName.length+1);return this.canAdd(h,a)?a:""},v}(s.default);n.default=f},function(t,n,r){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,h){v.__proto__=h}||function(v,h){for(var l in h)h.hasOwnProperty(l)&&(v[l]=h[l])};return function(v,h){g(v,h);function l(){this.constructor=v}v.prototype=h===null?Object.create(h):(l.prototype=h.prototype,new l)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(12);function u(g){var v=g.split("-"),h=v.slice(1).map(function(l){return l[0].toUpperCase()+l.slice(1)}).join("");return v[0]+h}var f=function(g){o(v,g);function v(){return g!==null&&g.apply(this,arguments)||this}return v.keys=function(h){return(h.getAttribute("style")||"").split(";").map(function(l){var a=l.split(":");return a[0].trim()})},v.prototype.add=function(h,l){return this.canAdd(h,l)?(h.style[u(this.keyName)]=l,!0):!1},v.prototype.remove=function(h){h.style[u(this.keyName)]="",h.getAttribute("style")||h.removeAttribute("style")},v.prototype.value=function(h){var l=h.style[u(this.keyName)];return this.canAdd(h,l)?l:""},v}(s.default);n.default=f},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function f(g,v){for(var h=0;h<v.length;h++){var l=v[h];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(g,l.key,l)}}return function(g,v,h){return v&&f(g.prototype,v),h&&f(g,h),g}}();function s(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}var u=function(){function f(g,v){s(this,f),this.quill=g,this.options=v,this.modules={}}return o(f,[{key:"init",value:function(){var v=this;Object.keys(this.options.modules).forEach(function(h){v.modules[h]==null&&v.addModule(h)})}},{key:"addModule",value:function(v){var h=this.quill.constructor.import("modules/"+v);return this.modules[v]=new h(this.quill,this.options.modules[v]||{}),this.modules[v]}}]),f}();u.DEFAULTS={modules:{}},u.themes={default:u},n.default=u},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function m(d,p){for(var c=0;c<p.length;c++){var A=p[c];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(d,A.key,A)}}return function(d,p,c){return p&&m(d.prototype,p),c&&m(d,c),d}}(),s=function m(d,p,c){d===null&&(d=Function.prototype);var A=Object.getOwnPropertyDescriptor(d,p);if(A===void 0){var T=Object.getPrototypeOf(d);return T===null?void 0:m(T,p,c)}else{if("value"in A)return A.value;var _=A.get;return _===void 0?void 0:_.call(c)}},u=r(0),f=h(u),g=r(7),v=h(g);function h(m){return m&&m.__esModule?m:{default:m}}function l(m,d){if(!(m instanceof d))throw new TypeError("Cannot call a class as a function")}function a(m,d){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:m}function y(m,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);m.prototype=Object.create(d&&d.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(m,d):m.__proto__=d)}var b="\uFEFF",w=function(m){y(d,m);function d(p){l(this,d);var c=a(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,p));return c.contentNode=document.createElement("span"),c.contentNode.setAttribute("contenteditable",!1),[].slice.call(c.domNode.childNodes).forEach(function(A){c.contentNode.appendChild(A)}),c.leftGuard=document.createTextNode(b),c.rightGuard=document.createTextNode(b),c.domNode.appendChild(c.leftGuard),c.domNode.appendChild(c.contentNode),c.domNode.appendChild(c.rightGuard),c}return o(d,[{key:"index",value:function(c,A){return c===this.leftGuard?0:c===this.rightGuard?1:s(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"index",this).call(this,c,A)}},{key:"restore",value:function(c){var A=void 0,T=void 0,_=c.data.split(b).join("");if(c===this.leftGuard)if(this.prev instanceof v.default){var k=this.prev.length();this.prev.insertAt(k,_),A={startNode:this.prev.domNode,startOffset:k+_.length}}else T=document.createTextNode(_),this.parent.insertBefore(f.default.create(T),this),A={startNode:T,startOffset:_.length};else c===this.rightGuard&&(this.next instanceof v.default?(this.next.insertAt(0,_),A={startNode:this.next.domNode,startOffset:_.length}):(T=document.createTextNode(_),this.parent.insertBefore(f.default.create(T),this.next),A={startNode:T,startOffset:_.length}));return c.data=b,A}},{key:"update",value:function(c,A){var T=this;c.forEach(function(_){if(_.type==="characterData"&&(_.target===T.leftGuard||_.target===T.rightGuard)){var k=T.restore(_.target);k&&(A.range=k)}})}}]),d}(f.default.Embed);n.default=w},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var o=r(0),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}var f={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},g=new s.default.Attributor.Attribute("align","align",f),v=new s.default.Attributor.Class("align","ql-align",f),h=new s.default.Attributor.Style("align","text-align",f);n.AlignAttribute=g,n.AlignClass=v,n.AlignStyle=h},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var o=r(0),s=f(o),u=r(26);function f(h){return h&&h.__esModule?h:{default:h}}var g=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),v=new u.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});n.BackgroundClass=g,n.BackgroundStyle=v},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var o=r(0),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}var f={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},g=new s.default.Attributor.Attribute("direction","dir",f),v=new s.default.Attributor.Class("direction","ql-direction",f),h=new s.default.Attributor.Style("direction","direction",f);n.DirectionAttribute=g,n.DirectionClass=v,n.DirectionStyle=h},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var o=function(){function m(d,p){for(var c=0;c<p.length;c++){var A=p[c];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(d,A.key,A)}}return function(d,p,c){return p&&m(d.prototype,p),c&&m(d,c),d}}(),s=function m(d,p,c){d===null&&(d=Function.prototype);var A=Object.getOwnPropertyDescriptor(d,p);if(A===void 0){var T=Object.getPrototypeOf(d);return T===null?void 0:m(T,p,c)}else{if("value"in A)return A.value;var _=A.get;return _===void 0?void 0:_.call(c)}},u=r(0),f=g(u);function g(m){return m&&m.__esModule?m:{default:m}}function v(m,d){if(!(m instanceof d))throw new TypeError("Cannot call a class as a function")}function h(m,d){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:m}function l(m,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);m.prototype=Object.create(d&&d.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(m,d):m.__proto__=d)}var a={scope:f.default.Scope.INLINE,whitelist:["serif","monospace"]},y=new f.default.Attributor.Class("font","ql-font",a),b=function(m){l(d,m);function d(){return v(this,d),h(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return o(d,[{key:"value",value:function(c){return s(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"value",this).call(this,c).replace(/["']/g,"")}}]),d}(f.default.Attributor.Style),w=new b("font","font-family",a);n.FontStyle=w,n.FontClass=y},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var o=r(0),s=u(o);function u(v){return v&&v.__esModule?v:{default:v}}var f=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),g=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=f,n.SizeStyle=g},function(t,n,r){t.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var o=function(){function p(c,A){for(var T=0;T<A.length;T++){var _=A[T];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(c,_.key,_)}}return function(c,A,T){return A&&p(c.prototype,A),T&&p(c,T),c}}(),s=r(0),u=l(s),f=r(5),g=l(f),v=r(9),h=l(v);function l(p){return p&&p.__esModule?p:{default:p}}function a(p,c){if(!(p instanceof c))throw new TypeError("Cannot call a class as a function")}function y(p,c){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:p}function b(p,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);p.prototype=Object.create(c&&c.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(p,c):p.__proto__=c)}var w=function(p){b(c,p);function c(A,T){a(this,c);var _=y(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,A,T));return _.lastRecorded=0,_.ignoreChange=!1,_.clear(),_.quill.on(g.default.events.EDITOR_CHANGE,function(k,P,O,E){k!==g.default.events.TEXT_CHANGE||_.ignoreChange||(!_.options.userOnly||E===g.default.sources.USER?_.record(P,O):_.transform(P))}),_.quill.keyboard.addBinding({key:"Z",shortKey:!0},_.undo.bind(_)),_.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},_.redo.bind(_)),/Win/i.test(navigator.platform)&&_.quill.keyboard.addBinding({key:"Y",shortKey:!0},_.redo.bind(_)),_}return o(c,[{key:"change",value:function(T,_){if(this.stack[T].length!==0){var k=this.stack[T].pop();this.stack[_].push(k),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(k[T],g.default.sources.USER),this.ignoreChange=!1;var P=d(k[T]);this.quill.setSelection(P)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(T,_){if(T.ops.length!==0){this.stack.redo=[];var k=this.quill.getContents().diff(_),P=Date.now();if(this.lastRecorded+this.options.delay>P&&this.stack.undo.length>0){var O=this.stack.undo.pop();k=k.compose(O.undo),T=O.redo.compose(T)}else this.lastRecorded=P;this.stack.undo.push({redo:T,undo:k}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(T){this.stack.undo.forEach(function(_){_.undo=T.transform(_.undo,!0),_.redo=T.transform(_.redo,!0)}),this.stack.redo.forEach(function(_){_.undo=T.transform(_.undo,!0),_.redo=T.transform(_.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),c}(h.default);w.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function m(p){var c=p.ops[p.ops.length-1];return c==null?!1:c.insert!=null?typeof c.insert=="string"&&c.insert.endsWith(`
`):c.attributes!=null?Object.keys(c.attributes).some(function(A){return u.default.query(A,u.default.Scope.BLOCK)!=null}):!1}function d(p){var c=p.reduce(function(T,_){return T+=_.delete||0,T},0),A=p.length()-c;return m(p)&&(A-=1),A}n.default=w,n.getLastChangeIndex=d},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var o=function(){function B(M,K){for(var C=0;C<K.length;C++){var S=K[C];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(M,S.key,S)}}return function(M,K,C){return K&&B(M.prototype,K),C&&B(M,C),M}}(),s=function B(M,K,C){M===null&&(M=Function.prototype);var S=Object.getOwnPropertyDescriptor(M,K);if(S===void 0){var D=Object.getPrototypeOf(M);return D===null?void 0:B(D,K,C)}else{if("value"in S)return S.value;var q=S.get;return q===void 0?void 0:q.call(C)}},u=r(3),f=P(u),g=r(2),v=P(g),h=r(8),l=P(h),a=r(23),y=P(a),b=r(34),w=P(b),m=r(59),d=P(m),p=r(60),c=P(p),A=r(28),T=P(A),_=r(61),k=P(_);function P(B){return B&&B.__esModule?B:{default:B}}function O(B,M){if(!(B instanceof M))throw new TypeError("Cannot call a class as a function")}function E(B,M){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:B}function x(B,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);B.prototype=Object.create(M&&M.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(B,M):B.__proto__=M)}var N=[!1,"center","right","justify"],I=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],L=[!1,"serif","monospace"],F=["1","2","3",!1],U=["small",!1,"large","huge"],G=function(B){x(M,B);function M(K,C){O(this,M);var S=E(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,K,C)),D=function q($){if(!document.body.contains(K.root))return document.body.removeEventListener("click",q);S.tooltip!=null&&!S.tooltip.root.contains($.target)&&document.activeElement!==S.tooltip.textbox&&!S.quill.hasFocus()&&S.tooltip.hide(),S.pickers!=null&&S.pickers.forEach(function(H){H.container.contains($.target)||H.close()})};return K.emitter.listenDOM("click",document.body,D),S}return o(M,[{key:"addModule",value:function(C){var S=s(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"addModule",this).call(this,C);return C==="toolbar"&&this.extendToolbar(S),S}},{key:"buildButtons",value:function(C,S){C.forEach(function(D){var q=D.getAttribute("class")||"";q.split(/\s+/).forEach(function($){if($.startsWith("ql-")&&($=$.slice(3),S[$]!=null))if($==="direction")D.innerHTML=S[$][""]+S[$].rtl;else if(typeof S[$]=="string")D.innerHTML=S[$];else{var H=D.value||"";H!=null&&S[$][H]&&(D.innerHTML=S[$][H])}})})}},{key:"buildPickers",value:function(C,S){var D=this;this.pickers=C.map(function($){if($.classList.contains("ql-align"))return $.querySelector("option")==null&&R($,N),new c.default($,S.align);if($.classList.contains("ql-background")||$.classList.contains("ql-color")){var H=$.classList.contains("ql-background")?"background":"color";return $.querySelector("option")==null&&R($,I,H==="background"?"#ffffff":"#000000"),new d.default($,S[H])}else return $.querySelector("option")==null&&($.classList.contains("ql-font")?R($,L):$.classList.contains("ql-header")?R($,F):$.classList.contains("ql-size")&&R($,U)),new T.default($)});var q=function(){D.pickers.forEach(function(H){H.update()})};this.quill.on(l.default.events.EDITOR_CHANGE,q)}}]),M}(w.default);G.DEFAULTS=(0,f.default)(!0,{},w.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var M=this,K=this.container.querySelector("input.ql-image[type=file]");K==null&&(K=document.createElement("input"),K.setAttribute("type","file"),K.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),K.classList.add("ql-image"),K.addEventListener("change",function(){if(K.files!=null&&K.files[0]!=null){var C=new FileReader;C.onload=function(S){var D=M.quill.getSelection(!0);M.quill.updateContents(new v.default().retain(D.index).delete(D.length).insert({image:S.target.result}),l.default.sources.USER),M.quill.setSelection(D.index+1,l.default.sources.SILENT),K.value=""},C.readAsDataURL(K.files[0])}}),this.container.appendChild(K)),K.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var z=function(B){x(M,B);function M(K,C){O(this,M);var S=E(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,K,C));return S.textbox=S.root.querySelector('input[type="text"]'),S.listen(),S}return o(M,[{key:"listen",value:function(){var C=this;this.textbox.addEventListener("keydown",function(S){y.default.match(S,"enter")?(C.save(),S.preventDefault()):y.default.match(S,"escape")&&(C.cancel(),S.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),S!=null?this.textbox.value=S:C!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+C)||""),this.root.setAttribute("data-mode",C)}},{key:"restoreFocus",value:function(){var C=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=C}},{key:"save",value:function(){var C=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var S=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",C,l.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",C,l.default.sources.USER)),this.quill.root.scrollTop=S;break}case"video":C=j(C);case"formula":{if(!C)break;var D=this.quill.getSelection(!0);if(D!=null){var q=D.index+D.length;this.quill.insertEmbed(q,this.root.getAttribute("data-mode"),C,l.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(q+1," ",l.default.sources.USER),this.quill.setSelection(q+2,l.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),M}(k.default);function j(B){var M=B.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||B.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return M?(M[1]||"https")+"://www.youtube.com/embed/"+M[2]+"?showinfo=0":(M=B.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(M[1]||"https")+"://player.vimeo.com/video/"+M[2]+"/":B}function R(B,M){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;M.forEach(function(C){var S=document.createElement("option");C===K?S.setAttribute("selected","selected"):S.setAttribute("value",C),B.appendChild(S)})}n.BaseTooltip=z,n.default=G},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function s(){this.head=this.tail=null,this.length=0}return s.prototype.append=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];this.insertBefore(u[0],null),u.length>1&&this.append.apply(this,u.slice(1))},s.prototype.contains=function(u){for(var f,g=this.iterator();f=g();)if(f===u)return!0;return!1},s.prototype.insertBefore=function(u,f){u&&(u.next=f,f!=null?(u.prev=f.prev,f.prev!=null&&(f.prev.next=u),f.prev=u,f===this.head&&(this.head=u)):this.tail!=null?(this.tail.next=u,u.prev=this.tail,this.tail=u):(u.prev=null,this.head=this.tail=u),this.length+=1)},s.prototype.offset=function(u){for(var f=0,g=this.head;g!=null;){if(g===u)return f;f+=g.length(),g=g.next}return-1},s.prototype.remove=function(u){this.contains(u)&&(u.prev!=null&&(u.prev.next=u.next),u.next!=null&&(u.next.prev=u.prev),u===this.head&&(this.head=u.next),u===this.tail&&(this.tail=u.prev),this.length-=1)},s.prototype.iterator=function(u){return u===void 0&&(u=this.head),function(){var f=u;return u!=null&&(u=u.next),f}},s.prototype.find=function(u,f){f===void 0&&(f=!1);for(var g,v=this.iterator();g=v();){var h=g.length();if(u<h||f&&u===h&&(g.next==null||g.next.length()!==0))return[g,u];u-=h}return[null,0]},s.prototype.forEach=function(u){for(var f,g=this.iterator();f=g();)u(f)},s.prototype.forEachAt=function(u,f,g){if(!(f<=0))for(var v=this.find(u),h=v[0],l=v[1],a,y=u-l,b=this.iterator(h);(a=b())&&y<u+f;){var w=a.length();u>y?g(a,u-y,Math.min(f,y+w-u)):g(a,0,Math.min(w,u+f-y)),y+=w}},s.prototype.map=function(u){return this.reduce(function(f,g){return f.push(u(g)),f},[])},s.prototype.reduce=function(u,f){for(var g,v=this.iterator();g=v();)f=u(f,g);return f},s}();n.default=o},function(t,n,r){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var y in a)a.hasOwnProperty(y)&&(l[y]=a[y])};return function(l,a){h(l,a);function y(){this.constructor=l}l.prototype=a===null?Object.create(a):(y.prototype=a.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(17),u=r(1),f={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},g=100,v=function(h){o(l,h);function l(a){var y=h.call(this,a)||this;return y.scroll=y,y.observer=new MutationObserver(function(b){y.update(b)}),y.observer.observe(y.domNode,f),y.attach(),y}return l.prototype.detach=function(){h.prototype.detach.call(this),this.observer.disconnect()},l.prototype.deleteAt=function(a,y){this.update(),a===0&&y===this.length()?this.children.forEach(function(b){b.remove()}):h.prototype.deleteAt.call(this,a,y)},l.prototype.formatAt=function(a,y,b,w){this.update(),h.prototype.formatAt.call(this,a,y,b,w)},l.prototype.insertAt=function(a,y,b){this.update(),h.prototype.insertAt.call(this,a,y,b)},l.prototype.optimize=function(a,y){var b=this;a===void 0&&(a=[]),y===void 0&&(y={}),h.prototype.optimize.call(this,y);for(var w=[].slice.call(this.observer.takeRecords());w.length>0;)a.push(w.pop());for(var m=function(A,T){T===void 0&&(T=!0),!(A==null||A===b)&&A.domNode.parentNode!=null&&(A.domNode[u.DATA_KEY].mutations==null&&(A.domNode[u.DATA_KEY].mutations=[]),T&&m(A.parent))},d=function(A){A.domNode[u.DATA_KEY]==null||A.domNode[u.DATA_KEY].mutations==null||(A instanceof s.default&&A.children.forEach(d),A.optimize(y))},p=a,c=0;p.length>0;c+=1){if(c>=g)throw new Error("[Parchment] Maximum optimize iterations reached");for(p.forEach(function(A){var T=u.find(A.target,!0);T!=null&&(T.domNode===A.target&&(A.type==="childList"?(m(u.find(A.previousSibling,!1)),[].forEach.call(A.addedNodes,function(_){var k=u.find(_,!1);m(k,!1),k instanceof s.default&&k.children.forEach(function(P){m(P,!1)})})):A.type==="attributes"&&m(T.prev)),m(T))}),this.children.forEach(d),p=[].slice.call(this.observer.takeRecords()),w=p.slice();w.length>0;)a.push(w.pop())}},l.prototype.update=function(a,y){var b=this;y===void 0&&(y={}),a=a||this.observer.takeRecords(),a.map(function(w){var m=u.find(w.target,!0);return m==null?null:m.domNode[u.DATA_KEY].mutations==null?(m.domNode[u.DATA_KEY].mutations=[w],m):(m.domNode[u.DATA_KEY].mutations.push(w),null)}).forEach(function(w){w==null||w===b||w.domNode[u.DATA_KEY]==null||w.update(w.domNode[u.DATA_KEY].mutations||[],y)}),this.domNode[u.DATA_KEY].mutations!=null&&h.prototype.update.call(this,this.domNode[u.DATA_KEY].mutations,y),this.optimize(a,y)},l.blotName="scroll",l.defaultChild="block",l.scope=u.Scope.BLOCK_BLOT,l.tagName="DIV",l}(s.default);n.default=v},function(t,n,r){var o=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,l){h.__proto__=l}||function(h,l){for(var a in l)l.hasOwnProperty(a)&&(h[a]=l[a])};return function(h,l){v(h,l);function a(){this.constructor=h}h.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(18),u=r(1);function f(v,h){if(Object.keys(v).length!==Object.keys(h).length)return!1;for(var l in v)if(v[l]!==h[l])return!1;return!0}var g=function(v){o(h,v);function h(){return v!==null&&v.apply(this,arguments)||this}return h.formats=function(l){if(l.tagName!==h.tagName)return v.formats.call(this,l)},h.prototype.format=function(l,a){var y=this;l===this.statics.blotName&&!a?(this.children.forEach(function(b){b instanceof s.default||(b=b.wrap(h.blotName,!0)),y.attributes.copy(b)}),this.unwrap()):v.prototype.format.call(this,l,a)},h.prototype.formatAt=function(l,a,y,b){if(this.formats()[y]!=null||u.query(y,u.Scope.ATTRIBUTE)){var w=this.isolate(l,a);w.format(y,b)}else v.prototype.formatAt.call(this,l,a,y,b)},h.prototype.optimize=function(l){v.prototype.optimize.call(this,l);var a=this.formats();if(Object.keys(a).length===0)return this.unwrap();var y=this.next;y instanceof h&&y.prev===this&&f(a,y.formats())&&(y.moveChildren(this),y.remove())},h.blotName="inline",h.scope=u.Scope.INLINE_BLOT,h.tagName="SPAN",h}(s.default);n.default=g},function(t,n,r){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,h){v.__proto__=h}||function(v,h){for(var l in h)h.hasOwnProperty(l)&&(v[l]=h[l])};return function(v,h){g(v,h);function l(){this.constructor=v}v.prototype=h===null?Object.create(h):(l.prototype=h.prototype,new l)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(18),u=r(1),f=function(g){o(v,g);function v(){return g!==null&&g.apply(this,arguments)||this}return v.formats=function(h){var l=u.query(v.blotName).tagName;if(h.tagName!==l)return g.formats.call(this,h)},v.prototype.format=function(h,l){u.query(h,u.Scope.BLOCK)!=null&&(h===this.statics.blotName&&!l?this.replaceWith(v.blotName):g.prototype.format.call(this,h,l))},v.prototype.formatAt=function(h,l,a,y){u.query(a,u.Scope.BLOCK)!=null?this.format(a,y):g.prototype.formatAt.call(this,h,l,a,y)},v.prototype.insertAt=function(h,l,a){if(a==null||u.query(l,u.Scope.INLINE)!=null)g.prototype.insertAt.call(this,h,l,a);else{var y=this.split(h),b=u.create(l,a);y.parent.insertBefore(b,y)}},v.prototype.update=function(h,l){navigator.userAgent.match(/Trident/)?this.build():g.prototype.update.call(this,h,l)},v.blotName="block",v.scope=u.Scope.BLOCK_BLOT,v.tagName="P",v}(s.default);n.default=f},function(t,n,r){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,v){g.__proto__=v}||function(g,v){for(var h in v)v.hasOwnProperty(h)&&(g[h]=v[h])};return function(g,v){f(g,v);function h(){this.constructor=g}g.prototype=v===null?Object.create(v):(h.prototype=v.prototype,new h)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(19),u=function(f){o(g,f);function g(){return f!==null&&f.apply(this,arguments)||this}return g.formats=function(v){},g.prototype.format=function(v,h){f.prototype.formatAt.call(this,0,this.length(),v,h)},g.prototype.formatAt=function(v,h,l,a){v===0&&h===this.length()?this.format(l,a):f.prototype.formatAt.call(this,v,h,l,a)},g.prototype.formats=function(){return this.statics.formats(this.domNode)},g}(s.default);n.default=u},function(t,n,r){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,h){v.__proto__=h}||function(v,h){for(var l in h)h.hasOwnProperty(l)&&(v[l]=h[l])};return function(v,h){g(v,h);function l(){this.constructor=v}v.prototype=h===null?Object.create(h):(l.prototype=h.prototype,new l)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(19),u=r(1),f=function(g){o(v,g);function v(h){var l=g.call(this,h)||this;return l.text=l.statics.value(l.domNode),l}return v.create=function(h){return document.createTextNode(h)},v.value=function(h){var l=h.data;return l.normalize&&(l=l.normalize()),l},v.prototype.deleteAt=function(h,l){this.domNode.data=this.text=this.text.slice(0,h)+this.text.slice(h+l)},v.prototype.index=function(h,l){return this.domNode===h?l:-1},v.prototype.insertAt=function(h,l,a){a==null?(this.text=this.text.slice(0,h)+l+this.text.slice(h),this.domNode.data=this.text):g.prototype.insertAt.call(this,h,l,a)},v.prototype.length=function(){return this.text.length},v.prototype.optimize=function(h){g.prototype.optimize.call(this,h),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof v&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},v.prototype.position=function(h,l){return[this.domNode,h]},v.prototype.split=function(h,l){if(l===void 0&&(l=!1),!l){if(h===0)return this;if(h===this.length())return this.next}var a=u.create(this.domNode.splitText(h));return this.parent.insertBefore(a,this.next),this.text=this.statics.value(this.domNode),a},v.prototype.update=function(h,l){var a=this;h.some(function(y){return y.type==="characterData"&&y.target===a.domNode})&&(this.text=this.statics.value(this.domNode))},v.prototype.value=function(){return this.text},v.blotName="text",v.scope=u.Scope.INLINE_BLOT,v}(s.default);n.default=f},function(t,n,r){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(u,f){return arguments.length>1&&!this.contains(u)==!f?f:s.call(this,u)}}String.prototype.startsWith||(String.prototype.startsWith=function(u,f){return f=f||0,this.substr(f,u.length)===u}),String.prototype.endsWith||(String.prototype.endsWith=function(u,f){var g=this.toString();(typeof f!="number"||!isFinite(f)||Math.floor(f)!==f||f>g.length)&&(f=g.length),f-=u.length;var v=g.indexOf(u,f);return v!==-1&&v===f}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(f){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof f!="function")throw new TypeError("predicate must be a function");for(var g=Object(this),v=g.length>>>0,h=arguments[1],l,a=0;a<v;a++)if(l=g[a],f.call(h,l,a,g))return l}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,n){var r=-1,o=1,s=0;function u(c,A,T){if(c==A)return c?[[s,c]]:[];(T<0||c.length<T)&&(T=null);var _=h(c,A),k=c.substring(0,_);c=c.substring(_),A=A.substring(_),_=l(c,A);var P=c.substring(c.length-_);c=c.substring(0,c.length-_),A=A.substring(0,A.length-_);var O=f(c,A);return k&&O.unshift([s,k]),P&&O.push([s,P]),y(O),T!=null&&(O=m(O,T)),O=d(O),O}function f(c,A){var T;if(!c)return[[o,A]];if(!A)return[[r,c]];var _=c.length>A.length?c:A,k=c.length>A.length?A:c,P=_.indexOf(k);if(P!=-1)return T=[[o,_.substring(0,P)],[s,k],[o,_.substring(P+k.length)]],c.length>A.length&&(T[0][0]=T[2][0]=r),T;if(k.length==1)return[[r,c],[o,A]];var O=a(c,A);if(O){var E=O[0],x=O[1],N=O[2],I=O[3],L=O[4],F=u(E,N),U=u(x,I);return F.concat([[s,L]],U)}return g(c,A)}function g(c,A){for(var T=c.length,_=A.length,k=Math.ceil((T+_)/2),P=k,O=2*k,E=new Array(O),x=new Array(O),N=0;N<O;N++)E[N]=-1,x[N]=-1;E[P+1]=0,x[P+1]=0;for(var I=T-_,L=I%2!=0,F=0,U=0,G=0,z=0,j=0;j<k;j++){for(var R=-j+F;R<=j-U;R+=2){var B=P+R,M;R==-j||R!=j&&E[B-1]<E[B+1]?M=E[B+1]:M=E[B-1]+1;for(var K=M-R;M<T&&K<_&&c.charAt(M)==A.charAt(K);)M++,K++;if(E[B]=M,M>T)U+=2;else if(K>_)F+=2;else if(L){var C=P+I-R;if(C>=0&&C<O&&x[C]!=-1){var S=T-x[C];if(M>=S)return v(c,A,M,K)}}}for(var D=-j+G;D<=j-z;D+=2){var C=P+D,S;D==-j||D!=j&&x[C-1]<x[C+1]?S=x[C+1]:S=x[C-1]+1;for(var q=S-D;S<T&&q<_&&c.charAt(T-S-1)==A.charAt(_-q-1);)S++,q++;if(x[C]=S,S>T)z+=2;else if(q>_)G+=2;else if(!L){var B=P+I-D;if(B>=0&&B<O&&E[B]!=-1){var M=E[B],K=P+M-B;if(S=T-S,M>=S)return v(c,A,M,K)}}}}return[[r,c],[o,A]]}function v(c,A,T,_){var k=c.substring(0,T),P=A.substring(0,_),O=c.substring(T),E=A.substring(_),x=u(k,P),N=u(O,E);return x.concat(N)}function h(c,A){if(!c||!A||c.charAt(0)!=A.charAt(0))return 0;for(var T=0,_=Math.min(c.length,A.length),k=_,P=0;T<k;)c.substring(P,k)==A.substring(P,k)?(T=k,P=T):_=k,k=Math.floor((_-T)/2+T);return k}function l(c,A){if(!c||!A||c.charAt(c.length-1)!=A.charAt(A.length-1))return 0;for(var T=0,_=Math.min(c.length,A.length),k=_,P=0;T<k;)c.substring(c.length-k,c.length-P)==A.substring(A.length-k,A.length-P)?(T=k,P=T):_=k,k=Math.floor((_-T)/2+T);return k}function a(c,A){var T=c.length>A.length?c:A,_=c.length>A.length?A:c;if(T.length<4||_.length*2<T.length)return null;function k(U,G,z){for(var j=U.substring(z,z+Math.floor(U.length/4)),R=-1,B="",M,K,C,S;(R=G.indexOf(j,R+1))!=-1;){var D=h(U.substring(z),G.substring(R)),q=l(U.substring(0,z),G.substring(0,R));B.length<q+D&&(B=G.substring(R-q,R)+G.substring(R,R+D),M=U.substring(0,z-q),K=U.substring(z+D),C=G.substring(0,R-q),S=G.substring(R+D))}return B.length*2>=U.length?[M,K,C,S,B]:null}var P=k(T,_,Math.ceil(T.length/4)),O=k(T,_,Math.ceil(T.length/2)),E;if(!P&&!O)return null;O?P?E=P[4].length>O[4].length?P:O:E=O:E=P;var x,N,I,L;c.length>A.length?(x=E[0],N=E[1],I=E[2],L=E[3]):(I=E[0],L=E[1],x=E[2],N=E[3]);var F=E[4];return[x,N,I,L,F]}function y(c){c.push([s,""]);for(var A=0,T=0,_=0,k="",P="",O;A<c.length;)switch(c[A][0]){case o:_++,P+=c[A][1],A++;break;case r:T++,k+=c[A][1],A++;break;case s:T+_>1?(T!==0&&_!==0&&(O=h(P,k),O!==0&&(A-T-_>0&&c[A-T-_-1][0]==s?c[A-T-_-1][1]+=P.substring(0,O):(c.splice(0,0,[s,P.substring(0,O)]),A++),P=P.substring(O),k=k.substring(O)),O=l(P,k),O!==0&&(c[A][1]=P.substring(P.length-O)+c[A][1],P=P.substring(0,P.length-O),k=k.substring(0,k.length-O))),T===0?c.splice(A-_,T+_,[o,P]):_===0?c.splice(A-T,T+_,[r,k]):c.splice(A-T-_,T+_,[r,k],[o,P]),A=A-T-_+(T?1:0)+(_?1:0)+1):A!==0&&c[A-1][0]==s?(c[A-1][1]+=c[A][1],c.splice(A,1)):A++,_=0,T=0,k="",P="";break}c[c.length-1][1]===""&&c.pop();var E=!1;for(A=1;A<c.length-1;)c[A-1][0]==s&&c[A+1][0]==s&&(c[A][1].substring(c[A][1].length-c[A-1][1].length)==c[A-1][1]?(c[A][1]=c[A-1][1]+c[A][1].substring(0,c[A][1].length-c[A-1][1].length),c[A+1][1]=c[A-1][1]+c[A+1][1],c.splice(A-1,1),E=!0):c[A][1].substring(0,c[A+1][1].length)==c[A+1][1]&&(c[A-1][1]+=c[A+1][1],c[A][1]=c[A][1].substring(c[A+1][1].length)+c[A+1][1],c.splice(A+1,1),E=!0)),A++;E&&y(c)}var b=u;b.INSERT=o,b.DELETE=r,b.EQUAL=s,t.exports=b;function w(c,A){if(A===0)return[s,c];for(var T=0,_=0;_<c.length;_++){var k=c[_];if(k[0]===r||k[0]===s){var P=T+k[1].length;if(A===P)return[_+1,c];if(A<P){c=c.slice();var O=A-T,E=[k[0],k[1].slice(0,O)],x=[k[0],k[1].slice(O)];return c.splice(_,1,E,x),[_+1,c]}else T=P}}throw new Error("cursor_pos is out of bounds!")}function m(c,A){var T=w(c,A),_=T[1],k=T[0],P=_[k],O=_[k+1];if(P==null)return c;if(P[0]!==s)return c;if(O!=null&&P[1]+O[1]===O[1]+P[1])return _.splice(k,2,O,P),p(_,k,2);if(O!=null&&O[1].indexOf(P[1])===0){_.splice(k,2,[O[0],P[1]],[0,P[1]]);var E=O[1].slice(P[1].length);return E.length>0&&_.splice(k+2,0,[O[0],E]),p(_,k,3)}else return c}function d(c){for(var A=!1,T=function(O){return O.charCodeAt(0)>=56320&&O.charCodeAt(0)<=57343},_=function(O){return O.charCodeAt(O.length-1)>=55296&&O.charCodeAt(O.length-1)<=56319},k=2;k<c.length;k+=1)c[k-2][0]===s&&_(c[k-2][1])&&c[k-1][0]===r&&T(c[k-1][1])&&c[k][0]===o&&T(c[k][1])&&(A=!0,c[k-1][1]=c[k-2][1].slice(-1)+c[k-1][1],c[k][1]=c[k-2][1].slice(-1)+c[k][1],c[k-2][1]=c[k-2][1].slice(0,-1));if(!A)return c;for(var P=[],k=0;k<c.length;k+=1)c[k][1].length>0&&P.push(c[k]);return P}function p(c,A,T){for(var _=A+T-1;_>=0&&_>=A-1;_--)if(_+1<c.length){var k=c[_],P=c[_+1];k[0]===P[1]&&c.splice(_,2,[k[0],k[1]+P[1]])}return c}},function(t,n){n=t.exports=typeof Object.keys=="function"?Object.keys:r,n.shim=r;function r(o){var s=[];for(var u in o)s.push(u);return s}},function(t,n){var r=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=t.exports=r?o:s,n.supported=o;function o(u){return Object.prototype.toString.call(u)=="[object Arguments]"}n.unsupported=s;function s(u){return u&&typeof u=="object"&&typeof u.length=="number"&&Object.prototype.hasOwnProperty.call(u,"callee")&&!Object.prototype.propertyIsEnumerable.call(u,"callee")||!1}},function(t,n){var r=Object.prototype.hasOwnProperty,o="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1));function u(g,v,h){this.fn=g,this.context=v,this.once=h||!1}function f(){this._events=new s,this._eventsCount=0}f.prototype.eventNames=function(){var v=[],h,l;if(this._eventsCount===0)return v;for(l in h=this._events)r.call(h,l)&&v.push(o?l.slice(1):l);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(h)):v},f.prototype.listeners=function(v,h){var l=o?o+v:v,a=this._events[l];if(h)return!!a;if(!a)return[];if(a.fn)return[a.fn];for(var y=0,b=a.length,w=new Array(b);y<b;y++)w[y]=a[y].fn;return w},f.prototype.emit=function(v,h,l,a,y,b){var w=o?o+v:v;if(!this._events[w])return!1;var m=this._events[w],d=arguments.length,p,c;if(m.fn){switch(m.once&&this.removeListener(v,m.fn,void 0,!0),d){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,h),!0;case 3:return m.fn.call(m.context,h,l),!0;case 4:return m.fn.call(m.context,h,l,a),!0;case 5:return m.fn.call(m.context,h,l,a,y),!0;case 6:return m.fn.call(m.context,h,l,a,y,b),!0}for(c=1,p=new Array(d-1);c<d;c++)p[c-1]=arguments[c];m.fn.apply(m.context,p)}else{var A=m.length,T;for(c=0;c<A;c++)switch(m[c].once&&this.removeListener(v,m[c].fn,void 0,!0),d){case 1:m[c].fn.call(m[c].context);break;case 2:m[c].fn.call(m[c].context,h);break;case 3:m[c].fn.call(m[c].context,h,l);break;case 4:m[c].fn.call(m[c].context,h,l,a);break;default:if(!p)for(T=1,p=new Array(d-1);T<d;T++)p[T-1]=arguments[T];m[c].fn.apply(m[c].context,p)}}return!0},f.prototype.on=function(v,h,l){var a=new u(h,l||this),y=o?o+v:v;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],a]:this._events[y].push(a):(this._events[y]=a,this._eventsCount++),this},f.prototype.once=function(v,h,l){var a=new u(h,l||this,!0),y=o?o+v:v;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],a]:this._events[y].push(a):(this._events[y]=a,this._eventsCount++),this},f.prototype.removeListener=function(v,h,l,a){var y=o?o+v:v;if(!this._events[y])return this;if(!h)return--this._eventsCount===0?this._events=new s:delete this._events[y],this;var b=this._events[y];if(b.fn)b.fn===h&&(!a||b.once)&&(!l||b.context===l)&&(--this._eventsCount===0?this._events=new s:delete this._events[y]);else{for(var w=0,m=[],d=b.length;w<d;w++)(b[w].fn!==h||a&&!b[w].once||l&&b[w].context!==l)&&m.push(b[w]);m.length?this._events[y]=m.length===1?m[0]:m:--this._eventsCount===0?this._events=new s:delete this._events[y]}return this},f.prototype.removeAllListeners=function(v){var h;return v?(h=o?o+v:v,this._events[h]&&(--this._eventsCount===0?this._events=new s:delete this._events[h])):(this._events=new s,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prototype.setMaxListeners=function(){return this},f.prefixed=o,f.EventEmitter=f,typeof t<"u"&&(t.exports=f)},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},s=function(){function te(Y,Z){var ae=[],se=!0,ye=!1,de=void 0;try{for(var be=Y[Symbol.iterator](),Pe;!(se=(Pe=be.next()).done)&&(ae.push(Pe.value),!(Z&&ae.length===Z));se=!0);}catch(Le){ye=!0,de=Le}finally{try{!se&&be.return&&be.return()}finally{if(ye)throw de}}return ae}return function(Y,Z){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return te(Y,Z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function te(Y,Z){for(var ae=0;ae<Z.length;ae++){var se=Z[ae];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(Y,se.key,se)}}return function(Y,Z,ae){return Z&&te(Y.prototype,Z),ae&&te(Y,ae),Y}}(),f=r(3),g=x(f),v=r(2),h=x(v),l=r(0),a=x(l),y=r(5),b=x(y),w=r(10),m=x(w),d=r(9),p=x(d),c=r(36),A=r(37),T=r(13),_=x(T),k=r(26),P=r(38),O=r(39),E=r(40);function x(te){return te&&te.__esModule?te:{default:te}}function N(te,Y,Z){return Y in te?Object.defineProperty(te,Y,{value:Z,enumerable:!0,configurable:!0,writable:!0}):te[Y]=Z,te}function I(te,Y){if(!(te instanceof Y))throw new TypeError("Cannot call a class as a function")}function L(te,Y){if(!te)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:te}function F(te,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);te.prototype=Object.create(Y&&Y.prototype,{constructor:{value:te,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(te,Y):te.__proto__=Y)}var U=(0,m.default)("quill:clipboard"),G="__ql-matcher",z=[[Node.TEXT_NODE,Fe],[Node.TEXT_NODE,ge],["br",ne],[Node.ELEMENT_NODE,ge],[Node.ELEMENT_NODE,H],[Node.ELEMENT_NODE,Oe],[Node.ELEMENT_NODE,$],[Node.ELEMENT_NODE,$e],["li",fe],["b",q.bind(q,"bold")],["i",q.bind(q,"italic")],["style",ce]],j=[c.AlignAttribute,P.DirectionAttribute].reduce(function(te,Y){return te[Y.keyName]=Y,te},{}),R=[c.AlignStyle,A.BackgroundStyle,k.ColorStyle,P.DirectionStyle,O.FontStyle,E.SizeStyle].reduce(function(te,Y){return te[Y.keyName]=Y,te},{}),B=function(te){F(Y,te);function Y(Z,ae){I(this,Y);var se=L(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,Z,ae));return se.quill.root.addEventListener("paste",se.onPaste.bind(se)),se.container=se.quill.addContainer("ql-clipboard"),se.container.setAttribute("contenteditable",!0),se.container.setAttribute("tabindex",-1),se.matchers=[],z.concat(se.options.matchers).forEach(function(ye){var de=s(ye,2),be=de[0],Pe=de[1];!ae.matchVisual&&Pe===Oe||se.addMatcher(be,Pe)}),se}return u(Y,[{key:"addMatcher",value:function(ae,se){this.matchers.push([ae,se])}},{key:"convert",value:function(ae){if(typeof ae=="string")return this.container.innerHTML=ae.replace(/\>\r?\n +\</g,"><"),this.convert();var se=this.quill.getFormat(this.quill.selection.savedRange.index);if(se[_.default.blotName]){var ye=this.container.innerText;return this.container.innerHTML="",new h.default().insert(ye,N({},_.default.blotName,se[_.default.blotName]))}var de=this.prepareMatching(),be=s(de,2),Pe=be[0],Le=be[1],Ee=D(this.container,Pe,Le);return C(Ee,`
`)&&Ee.ops[Ee.ops.length-1].attributes==null&&(Ee=Ee.compose(new h.default().retain(Ee.length()-1).delete(1))),U.log("convert",this.container.innerHTML,Ee),this.container.innerHTML="",Ee}},{key:"dangerouslyPasteHTML",value:function(ae,se){var ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof ae=="string")this.quill.setContents(this.convert(ae),se),this.quill.setSelection(0,b.default.sources.SILENT);else{var de=this.convert(se);this.quill.updateContents(new h.default().retain(ae).concat(de),ye),this.quill.setSelection(ae+de.length(),b.default.sources.SILENT)}}},{key:"onPaste",value:function(ae){var se=this;if(!(ae.defaultPrevented||!this.quill.isEnabled())){var ye=this.quill.getSelection(),de=new h.default().retain(ye.index),be=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(b.default.sources.SILENT),setTimeout(function(){de=de.concat(se.convert()).delete(ye.length),se.quill.updateContents(de,b.default.sources.USER),se.quill.setSelection(de.length()-ye.length,b.default.sources.SILENT),se.quill.scrollingContainer.scrollTop=be,se.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ae=this,se=[],ye=[];return this.matchers.forEach(function(de){var be=s(de,2),Pe=be[0],Le=be[1];switch(Pe){case Node.TEXT_NODE:ye.push(Le);break;case Node.ELEMENT_NODE:se.push(Le);break;default:[].forEach.call(ae.container.querySelectorAll(Pe),function(Ee){Ee[G]=Ee[G]||[],Ee[G].push(Le)});break}}),[se,ye]}}]),Y}(p.default);B.DEFAULTS={matchers:[],matchVisual:!0};function M(te,Y,Z){return(typeof Y>"u"?"undefined":o(Y))==="object"?Object.keys(Y).reduce(function(ae,se){return M(ae,se,Y[se])},te):te.reduce(function(ae,se){return se.attributes&&se.attributes[Y]?ae.push(se):ae.insert(se.insert,(0,g.default)({},N({},Y,Z),se.attributes))},new h.default)}function K(te){if(te.nodeType!==Node.ELEMENT_NODE)return{};var Y="__ql-computed-style";return te[Y]||(te[Y]=window.getComputedStyle(te))}function C(te,Y){for(var Z="",ae=te.ops.length-1;ae>=0&&Z.length<Y.length;--ae){var se=te.ops[ae];if(typeof se.insert!="string")break;Z=se.insert+Z}return Z.slice(-1*Y.length)===Y}function S(te){if(te.childNodes.length===0)return!1;var Y=K(te);return["block","list-item"].indexOf(Y.display)>-1}function D(te,Y,Z){return te.nodeType===te.TEXT_NODE?Z.reduce(function(ae,se){return se(te,ae)},new h.default):te.nodeType===te.ELEMENT_NODE?[].reduce.call(te.childNodes||[],function(ae,se){var ye=D(se,Y,Z);return se.nodeType===te.ELEMENT_NODE&&(ye=Y.reduce(function(de,be){return be(se,de)},ye),ye=(se[G]||[]).reduce(function(de,be){return be(se,de)},ye)),ae.concat(ye)},new h.default):new h.default}function q(te,Y,Z){return M(Z,te,!0)}function $(te,Y){var Z=a.default.Attributor.Attribute.keys(te),ae=a.default.Attributor.Class.keys(te),se=a.default.Attributor.Style.keys(te),ye={};return Z.concat(ae).concat(se).forEach(function(de){var be=a.default.query(de,a.default.Scope.ATTRIBUTE);be!=null&&(ye[be.attrName]=be.value(te),ye[be.attrName])||(be=j[de],be!=null&&(be.attrName===de||be.keyName===de)&&(ye[be.attrName]=be.value(te)||void 0),be=R[de],be!=null&&(be.attrName===de||be.keyName===de)&&(be=R[de],ye[be.attrName]=be.value(te)||void 0))}),Object.keys(ye).length>0&&(Y=M(Y,ye)),Y}function H(te,Y){var Z=a.default.query(te);if(Z==null)return Y;if(Z.prototype instanceof a.default.Embed){var ae={},se=Z.value(te);se!=null&&(ae[Z.blotName]=se,Y=new h.default().insert(ae,Z.formats(te)))}else typeof Z.formats=="function"&&(Y=M(Y,Z.blotName,Z.formats(te)));return Y}function ne(te,Y){return C(Y,`
`)||Y.insert(`
`),Y}function ce(){return new h.default}function fe(te,Y){var Z=a.default.query(te);if(Z==null||Z.blotName!=="list-item"||!C(Y,`
`))return Y;for(var ae=-1,se=te.parentNode;!se.classList.contains("ql-clipboard");)(a.default.query(se)||{}).blotName==="list"&&(ae+=1),se=se.parentNode;return ae<=0?Y:Y.compose(new h.default().retain(Y.length()-1).retain(1,{indent:ae}))}function ge(te,Y){return C(Y,`
`)||(S(te)||Y.length()>0&&te.nextSibling&&S(te.nextSibling))&&Y.insert(`
`),Y}function Oe(te,Y){if(S(te)&&te.nextElementSibling!=null&&!C(Y,`

`)){var Z=te.offsetHeight+parseFloat(K(te).marginTop)+parseFloat(K(te).marginBottom);te.nextElementSibling.offsetTop>te.offsetTop+Z*1.5&&Y.insert(`
`)}return Y}function $e(te,Y){var Z={},ae=te.style||{};return ae.fontStyle&&K(te).fontStyle==="italic"&&(Z.italic=!0),ae.fontWeight&&(K(te).fontWeight.startsWith("bold")||parseInt(K(te).fontWeight)>=700)&&(Z.bold=!0),Object.keys(Z).length>0&&(Y=M(Y,Z)),parseFloat(ae.textIndent||0)>0&&(Y=new h.default().insert("	").concat(Y)),Y}function Fe(te,Y){var Z=te.data;if(te.parentNode.tagName==="O:P")return Y.insert(Z.trim());if(Z.trim().length===0&&te.parentNode.classList.contains("ql-clipboard"))return Y;if(!K(te.parentNode).whiteSpace.startsWith("pre")){var ae=function(ye,de){return de=de.replace(/[^\u00a0]/g,""),de.length<1&&ye?" ":de};Z=Z.replace(/\r\n/g," ").replace(/\n/g," "),Z=Z.replace(/\s\s+/g,ae.bind(ae,!0)),(te.previousSibling==null&&S(te.parentNode)||te.previousSibling!=null&&S(te.previousSibling))&&(Z=Z.replace(/^\s+/,ae.bind(ae,!1))),(te.nextSibling==null&&S(te.parentNode)||te.nextSibling!=null&&S(te.nextSibling))&&(Z=Z.replace(/\s+$/,ae.bind(ae,!1)))}return Y.insert(Z)}n.default=B,n.matchAttributor=$,n.matchBlot=H,n.matchNewline=ge,n.matchSpacing=Oe,n.matchText=Fe},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function y(b,w){for(var m=0;m<w.length;m++){var d=w[m];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(b,d.key,d)}}return function(b,w,m){return w&&y(b.prototype,w),m&&y(b,m),b}}(),s=function y(b,w,m){b===null&&(b=Function.prototype);var d=Object.getOwnPropertyDescriptor(b,w);if(d===void 0){var p=Object.getPrototypeOf(b);return p===null?void 0:y(p,w,m)}else{if("value"in d)return d.value;var c=d.get;return c===void 0?void 0:c.call(m)}},u=r(6),f=g(u);function g(y){return y&&y.__esModule?y:{default:y}}function v(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function h(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function l(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var a=function(y){l(b,y);function b(){return v(this,b),h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,[{key:"optimize",value:function(m){s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,m),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return s(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),b}(f.default);a.blotName="bold",a.tagName=["STRONG","B"],n.default=a},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var o=function(){function E(x,N){var I=[],L=!0,F=!1,U=void 0;try{for(var G=x[Symbol.iterator](),z;!(L=(z=G.next()).done)&&(I.push(z.value),!(N&&I.length===N));L=!0);}catch(j){F=!0,U=j}finally{try{!L&&G.return&&G.return()}finally{if(F)throw U}}return I}return function(x,N){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return E(x,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function E(x,N){for(var I=0;I<N.length;I++){var L=N[I];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(x,L.key,L)}}return function(x,N,I){return N&&E(x.prototype,N),I&&E(x,I),x}}(),u=r(2),f=m(u),g=r(0),v=m(g),h=r(5),l=m(h),a=r(10),y=m(a),b=r(9),w=m(b);function m(E){return E&&E.__esModule?E:{default:E}}function d(E,x,N){return x in E?Object.defineProperty(E,x,{value:N,enumerable:!0,configurable:!0,writable:!0}):E[x]=N,E}function p(E,x){if(!(E instanceof x))throw new TypeError("Cannot call a class as a function")}function c(E,x){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:E}function A(E,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);E.prototype=Object.create(x&&x.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(E,x):E.__proto__=x)}var T=(0,y.default)("quill:toolbar"),_=function(E){A(x,E);function x(N,I){p(this,x);var L=c(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,N,I));if(Array.isArray(L.options.container)){var F=document.createElement("div");P(F,L.options.container),N.container.parentNode.insertBefore(F,N.container),L.container=F}else typeof L.options.container=="string"?L.container=document.querySelector(L.options.container):L.container=L.options.container;if(!(L.container instanceof HTMLElement)){var U;return U=T.error("Container required for toolbar",L.options),c(L,U)}return L.container.classList.add("ql-toolbar"),L.controls=[],L.handlers={},Object.keys(L.options.handlers).forEach(function(G){L.addHandler(G,L.options.handlers[G])}),[].forEach.call(L.container.querySelectorAll("button, select"),function(G){L.attach(G)}),L.quill.on(l.default.events.EDITOR_CHANGE,function(G,z){G===l.default.events.SELECTION_CHANGE&&L.update(z)}),L.quill.on(l.default.events.SCROLL_OPTIMIZE,function(){var G=L.quill.selection.getRange(),z=o(G,1),j=z[0];L.update(j)}),L}return s(x,[{key:"addHandler",value:function(I,L){this.handlers[I]=L}},{key:"attach",value:function(I){var L=this,F=[].find.call(I.classList,function(G){return G.indexOf("ql-")===0});if(F){if(F=F.slice(3),I.tagName==="BUTTON"&&I.setAttribute("type","button"),this.handlers[F]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[F]==null){T.warn("ignoring attaching to disabled format",F,I);return}if(v.default.query(F)==null){T.warn("ignoring attaching to nonexistent format",F,I);return}}var U=I.tagName==="SELECT"?"change":"click";I.addEventListener(U,function(G){var z=void 0;if(I.tagName==="SELECT"){if(I.selectedIndex<0)return;var j=I.options[I.selectedIndex];j.hasAttribute("selected")?z=!1:z=j.value||!1}else I.classList.contains("ql-active")?z=!1:z=I.value||!I.hasAttribute("value"),G.preventDefault();L.quill.focus();var R=L.quill.selection.getRange(),B=o(R,1),M=B[0];if(L.handlers[F]!=null)L.handlers[F].call(L,z);else if(v.default.query(F).prototype instanceof v.default.Embed){if(z=prompt("Enter "+F),!z)return;L.quill.updateContents(new f.default().retain(M.index).delete(M.length).insert(d({},F,z)),l.default.sources.USER)}else L.quill.format(F,z,l.default.sources.USER);L.update(M)}),this.controls.push([F,I])}}},{key:"update",value:function(I){var L=I==null?{}:this.quill.getFormat(I);this.controls.forEach(function(F){var U=o(F,2),G=U[0],z=U[1];if(z.tagName==="SELECT"){var j=void 0;if(I==null)j=null;else if(L[G]==null)j=z.querySelector("option[selected]");else if(!Array.isArray(L[G])){var R=L[G];typeof R=="string"&&(R=R.replace(/\"/g,'\\"')),j=z.querySelector('option[value="'+R+'"]')}j==null?(z.value="",z.selectedIndex=-1):j.selected=!0}else if(I==null)z.classList.remove("ql-active");else if(z.hasAttribute("value")){var B=L[G]===z.getAttribute("value")||L[G]!=null&&L[G].toString()===z.getAttribute("value")||L[G]==null&&!z.getAttribute("value");z.classList.toggle("ql-active",B)}else z.classList.toggle("ql-active",L[G]!=null)})}}]),x}(w.default);_.DEFAULTS={};function k(E,x,N){var I=document.createElement("button");I.setAttribute("type","button"),I.classList.add("ql-"+x),N!=null&&(I.value=N),E.appendChild(I)}function P(E,x){Array.isArray(x[0])||(x=[x]),x.forEach(function(N){var I=document.createElement("span");I.classList.add("ql-formats"),N.forEach(function(L){if(typeof L=="string")k(I,L);else{var F=Object.keys(L)[0],U=L[F];Array.isArray(U)?O(I,F,U):k(I,F,U)}}),E.appendChild(I)})}function O(E,x,N){var I=document.createElement("select");I.classList.add("ql-"+x),N.forEach(function(L){var F=document.createElement("option");L!==!1?F.setAttribute("value",L):F.setAttribute("selected","selected"),I.appendChild(F)}),E.appendChild(I)}_.DEFAULTS={container:null,handlers:{clean:function(){var x=this,N=this.quill.getSelection();if(N!=null)if(N.length==0){var I=this.quill.getFormat();Object.keys(I).forEach(function(L){v.default.query(L,v.default.Scope.INLINE)!=null&&x.quill.format(L,!1)})}else this.quill.removeFormat(N,l.default.sources.USER)},direction:function(x){var N=this.quill.getFormat().align;x==="rtl"&&N==null?this.quill.format("align","right",l.default.sources.USER):!x&&N==="right"&&this.quill.format("align",!1,l.default.sources.USER),this.quill.format("direction",x,l.default.sources.USER)},indent:function(x){var N=this.quill.getSelection(),I=this.quill.getFormat(N),L=parseInt(I.indent||0);if(x==="+1"||x==="-1"){var F=x==="+1"?1:-1;I.direction==="rtl"&&(F*=-1),this.quill.format("indent",L+F,l.default.sources.USER)}},link:function(x){x===!0&&(x=prompt("Enter link URL:")),this.quill.format("link",x,l.default.sources.USER)},list:function(x){var N=this.quill.getSelection(),I=this.quill.getFormat(N);x==="check"?I.list==="checked"||I.list==="unchecked"?this.quill.format("list",!1,l.default.sources.USER):this.quill.format("list","unchecked",l.default.sources.USER):this.quill.format("list",x,l.default.sources.USER)}}},n.default=_,n.addControls=P},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function y(b,w){for(var m=0;m<w.length;m++){var d=w[m];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(b,d.key,d)}}return function(b,w,m){return w&&y(b.prototype,w),m&&y(b,m),b}}(),s=function y(b,w,m){b===null&&(b=Function.prototype);var d=Object.getOwnPropertyDescriptor(b,w);if(d===void 0){var p=Object.getPrototypeOf(b);return p===null?void 0:y(p,w,m)}else{if("value"in d)return d.value;var c=d.get;return c===void 0?void 0:c.call(m)}},u=r(28),f=g(u);function g(y){return y&&y.__esModule?y:{default:y}}function v(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function h(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function l(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var a=function(y){l(b,y);function b(w,m){v(this,b);var d=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,w));return d.label.innerHTML=m,d.container.classList.add("ql-color-picker"),[].slice.call(d.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(p){p.classList.add("ql-primary")}),d}return o(b,[{key:"buildItem",value:function(m){var d=s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"buildItem",this).call(this,m);return d.style.backgroundColor=m.getAttribute("value")||"",d}},{key:"selectItem",value:function(m,d){s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,m,d);var p=this.label.querySelector(".ql-color-label"),c=m&&m.getAttribute("data-value")||"";p&&(p.tagName==="line"?p.style.stroke=c:p.style.fill=c)}}]),b}(f.default);n.default=a},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function y(b,w){for(var m=0;m<w.length;m++){var d=w[m];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(b,d.key,d)}}return function(b,w,m){return w&&y(b.prototype,w),m&&y(b,m),b}}(),s=function y(b,w,m){b===null&&(b=Function.prototype);var d=Object.getOwnPropertyDescriptor(b,w);if(d===void 0){var p=Object.getPrototypeOf(b);return p===null?void 0:y(p,w,m)}else{if("value"in d)return d.value;var c=d.get;return c===void 0?void 0:c.call(m)}},u=r(28),f=g(u);function g(y){return y&&y.__esModule?y:{default:y}}function v(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function h(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function l(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var a=function(y){l(b,y);function b(w,m){v(this,b);var d=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,w));return d.container.classList.add("ql-icon-picker"),[].forEach.call(d.container.querySelectorAll(".ql-picker-item"),function(p){p.innerHTML=m[p.getAttribute("data-value")||""]}),d.defaultItem=d.container.querySelector(".ql-selected"),d.selectItem(d.defaultItem),d}return o(b,[{key:"selectItem",value:function(m,d){s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,m,d),m=m||this.defaultItem,this.label.innerHTML=m.innerHTML}}]),b}(f.default);n.default=a},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function f(g,v){for(var h=0;h<v.length;h++){var l=v[h];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(g,l.key,l)}}return function(g,v,h){return v&&f(g.prototype,v),h&&f(g,h),g}}();function s(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}var u=function(){function f(g,v){var h=this;s(this,f),this.quill=g,this.boundsContainer=v||document.body,this.root=g.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){h.root.style.marginTop=-1*h.quill.root.scrollTop+"px"}),this.hide()}return o(f,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(v){var h=v.left+v.width/2-this.root.offsetWidth/2,l=v.bottom+this.quill.root.scrollTop;this.root.style.left=h+"px",this.root.style.top=l+"px",this.root.classList.remove("ql-flip");var a=this.boundsContainer.getBoundingClientRect(),y=this.root.getBoundingClientRect(),b=0;if(y.right>a.right&&(b=a.right-y.right,this.root.style.left=h+b+"px"),y.left<a.left&&(b=a.left-y.left,this.root.style.left=h+b+"px"),y.bottom>a.bottom){var w=y.bottom-y.top,m=v.bottom-v.top+w;this.root.style.top=l-m+"px",this.root.classList.add("ql-flip")}return b}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),f}();n.default=u},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function O(E,x){var N=[],I=!0,L=!1,F=void 0;try{for(var U=E[Symbol.iterator](),G;!(I=(G=U.next()).done)&&(N.push(G.value),!(x&&N.length===x));I=!0);}catch(z){L=!0,F=z}finally{try{!I&&U.return&&U.return()}finally{if(L)throw F}}return N}return function(E,x){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return O(E,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function O(E,x,N){E===null&&(E=Function.prototype);var I=Object.getOwnPropertyDescriptor(E,x);if(I===void 0){var L=Object.getPrototypeOf(E);return L===null?void 0:O(L,x,N)}else{if("value"in I)return I.value;var F=I.get;return F===void 0?void 0:F.call(N)}},u=function(){function O(E,x){for(var N=0;N<x.length;N++){var I=x[N];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(E,I.key,I)}}return function(E,x,N){return x&&O(E.prototype,x),N&&O(E,N),E}}(),f=r(3),g=p(f),v=r(8),h=p(v),l=r(43),a=p(l),y=r(27),b=p(y),w=r(15),m=r(41),d=p(m);function p(O){return O&&O.__esModule?O:{default:O}}function c(O,E){if(!(O instanceof E))throw new TypeError("Cannot call a class as a function")}function A(O,E){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:O}function T(O,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);O.prototype=Object.create(E&&E.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(O,E):O.__proto__=E)}var _=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],k=function(O){T(E,O);function E(x,N){c(this,E),N.modules.toolbar!=null&&N.modules.toolbar.container==null&&(N.modules.toolbar.container=_);var I=A(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,x,N));return I.quill.container.classList.add("ql-snow"),I}return u(E,[{key:"extendToolbar",value:function(N){N.container.classList.add("ql-snow"),this.buildButtons([].slice.call(N.container.querySelectorAll("button")),d.default),this.buildPickers([].slice.call(N.container.querySelectorAll("select")),d.default),this.tooltip=new P(this.quill,this.options.bounds),N.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(I,L){N.handlers.link.call(N,!L.format.link)})}}]),E}(a.default);k.DEFAULTS=(0,g.default)(!0,{},a.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){if(E){var x=this.quill.getSelection();if(x==null||x.length==0)return;var N=this.quill.getText(x);/^\S+@\S+\.\S+$/.test(N)&&N.indexOf("mailto:")!==0&&(N="mailto:"+N);var I=this.quill.theme.tooltip;I.edit("link",N)}else this.quill.format("link",!1)}}}}});var P=function(O){T(E,O);function E(x,N){c(this,E);var I=A(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,x,N));return I.preview=I.root.querySelector("a.ql-preview"),I}return u(E,[{key:"listen",value:function(){var N=this;s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(I){N.root.classList.contains("ql-editing")?N.save():N.edit("link",N.preview.textContent),I.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(I){if(N.linkRange!=null){var L=N.linkRange;N.restoreFocus(),N.quill.formatText(L,"link",!1,h.default.sources.USER),delete N.linkRange}I.preventDefault(),N.hide()}),this.quill.on(h.default.events.SELECTION_CHANGE,function(I,L,F){if(I!=null){if(I.length===0&&F===h.default.sources.USER){var U=N.quill.scroll.descendant(b.default,I.index),G=o(U,2),z=G[0],j=G[1];if(z!=null){N.linkRange=new w.Range(I.index-j,z.length());var R=b.default.formats(z.domNode);N.preview.textContent=R,N.preview.setAttribute("href",R),N.show(),N.position(N.quill.getBounds(N.linkRange));return}}else delete N.linkRange;N.hide()}})}},{key:"show",value:function(){s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),E}(l.BaseTooltip);P.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=k},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(29),s=se(o),u=r(36),f=r(38),g=r(64),v=r(65),h=se(v),l=r(66),a=se(l),y=r(67),b=se(y),w=r(37),m=r(26),d=r(39),p=r(40),c=r(56),A=se(c),T=r(68),_=se(T),k=r(27),P=se(k),O=r(69),E=se(O),x=r(70),N=se(x),I=r(71),L=se(I),F=r(72),U=se(F),G=r(73),z=se(G),j=r(13),R=se(j),B=r(74),M=se(B),K=r(75),C=se(K),S=r(57),D=se(S),q=r(41),$=se(q),H=r(28),ne=se(H),ce=r(59),fe=se(ce),ge=r(60),Oe=se(ge),$e=r(61),Fe=se($e),te=r(108),Y=se(te),Z=r(62),ae=se(Z);function se(ye){return ye&&ye.__esModule?ye:{default:ye}}s.default.register({"attributors/attribute/direction":f.DirectionAttribute,"attributors/class/align":u.AlignClass,"attributors/class/background":w.BackgroundClass,"attributors/class/color":m.ColorClass,"attributors/class/direction":f.DirectionClass,"attributors/class/font":d.FontClass,"attributors/class/size":p.SizeClass,"attributors/style/align":u.AlignStyle,"attributors/style/background":w.BackgroundStyle,"attributors/style/color":m.ColorStyle,"attributors/style/direction":f.DirectionStyle,"attributors/style/font":d.FontStyle,"attributors/style/size":p.SizeStyle},!0),s.default.register({"formats/align":u.AlignClass,"formats/direction":f.DirectionClass,"formats/indent":g.IndentClass,"formats/background":w.BackgroundStyle,"formats/color":m.ColorStyle,"formats/font":d.FontClass,"formats/size":p.SizeClass,"formats/blockquote":h.default,"formats/code-block":R.default,"formats/header":a.default,"formats/list":b.default,"formats/bold":A.default,"formats/code":j.Code,"formats/italic":_.default,"formats/link":P.default,"formats/script":E.default,"formats/strike":N.default,"formats/underline":L.default,"formats/image":U.default,"formats/video":z.default,"formats/list/item":y.ListItem,"modules/formula":M.default,"modules/syntax":C.default,"modules/toolbar":D.default,"themes/bubble":Y.default,"themes/snow":ae.default,"ui/icons":$.default,"ui/picker":ne.default,"ui/icon-picker":Oe.default,"ui/color-picker":fe.default,"ui/tooltip":Fe.default},!0),n.default=s.default},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var o=function(){function b(w,m){for(var d=0;d<m.length;d++){var p=m[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(w,p.key,p)}}return function(w,m,d){return m&&b(w.prototype,m),d&&b(w,d),w}}(),s=function b(w,m,d){w===null&&(w=Function.prototype);var p=Object.getOwnPropertyDescriptor(w,m);if(p===void 0){var c=Object.getPrototypeOf(w);return c===null?void 0:b(c,m,d)}else{if("value"in p)return p.value;var A=p.get;return A===void 0?void 0:A.call(d)}},u=r(0),f=g(u);function g(b){return b&&b.__esModule?b:{default:b}}function v(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function h(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function l(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var a=function(b){l(w,b);function w(){return v(this,w),h(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return o(w,[{key:"add",value:function(d,p){if(p==="+1"||p==="-1"){var c=this.value(d)||0;p=p==="+1"?c+1:c-1}return p===0?(this.remove(d),!0):s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"add",this).call(this,d,p)}},{key:"canAdd",value:function(d,p){return s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,d,p)||s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,d,parseInt(p))}},{key:"value",value:function(d){return parseInt(s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,d))||void 0}}]),w}(f.default.Attributor.Class),y=new a("indent","ql-indent",{scope:f.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=y},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(4),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}function f(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function g(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function v(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var h=function(l){v(a,l);function a(){return f(this,a),g(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(s.default);h.blotName="blockquote",h.tagName="blockquote",n.default=h},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function a(y,b){for(var w=0;w<b.length;w++){var m=b[w];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(y,m.key,m)}}return function(y,b,w){return b&&a(y.prototype,b),w&&a(y,w),y}}(),s=r(4),u=f(s);function f(a){return a&&a.__esModule?a:{default:a}}function g(a,y){if(!(a instanceof y))throw new TypeError("Cannot call a class as a function")}function v(a,y){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:a}function h(a,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);a.prototype=Object.create(y&&y.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(a,y):a.__proto__=y)}var l=function(a){h(y,a);function y(){return g(this,y),v(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return o(y,null,[{key:"formats",value:function(w){return this.tagName.indexOf(w.tagName)+1}}]),y}(u.default);l.blotName="header",l.tagName=["H1","H2","H3","H4","H5","H6"],n.default=l},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var o=function(){function c(A,T){for(var _=0;_<T.length;_++){var k=T[_];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(A,k.key,k)}}return function(A,T,_){return T&&c(A.prototype,T),_&&c(A,_),A}}(),s=function c(A,T,_){A===null&&(A=Function.prototype);var k=Object.getOwnPropertyDescriptor(A,T);if(k===void 0){var P=Object.getPrototypeOf(A);return P===null?void 0:c(P,T,_)}else{if("value"in k)return k.value;var O=k.get;return O===void 0?void 0:O.call(_)}},u=r(0),f=a(u),g=r(4),v=a(g),h=r(25),l=a(h);function a(c){return c&&c.__esModule?c:{default:c}}function y(c,A,T){return A in c?Object.defineProperty(c,A,{value:T,enumerable:!0,configurable:!0,writable:!0}):c[A]=T,c}function b(c,A){if(!(c instanceof A))throw new TypeError("Cannot call a class as a function")}function w(c,A){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:c}function m(c,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);c.prototype=Object.create(A&&A.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(c,A):c.__proto__=A)}var d=function(c){m(A,c);function A(){return b(this,A),w(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return o(A,[{key:"format",value:function(_,k){_===p.blotName&&!k?this.replaceWith(f.default.create(this.statics.scope)):s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,_,k)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(_,k){return this.parent.isolate(this.offset(this.parent),this.length()),_===this.parent.statics.blotName?(this.parent.replaceWith(_,k),this):(this.parent.unwrap(),s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replaceWith",this).call(this,_,k))}}],[{key:"formats",value:function(_){return _.tagName===this.tagName?void 0:s(A.__proto__||Object.getPrototypeOf(A),"formats",this).call(this,_)}}]),A}(v.default);d.blotName="list-item",d.tagName="LI";var p=function(c){m(A,c),o(A,null,[{key:"create",value:function(_){var k=_==="ordered"?"OL":"UL",P=s(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,k);return(_==="checked"||_==="unchecked")&&P.setAttribute("data-checked",_==="checked"),P}},{key:"formats",value:function(_){if(_.tagName==="OL")return"ordered";if(_.tagName==="UL")return _.hasAttribute("data-checked")?_.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function A(T){b(this,A);var _=w(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,T)),k=function(O){if(O.target.parentNode===T){var E=_.statics.formats(T),x=f.default.find(O.target);E==="checked"?x.format("list","unchecked"):E==="unchecked"&&x.format("list","checked")}};return T.addEventListener("touchstart",k),T.addEventListener("mousedown",k),_}return o(A,[{key:"format",value:function(_,k){this.children.length>0&&this.children.tail.format(_,k)}},{key:"formats",value:function(){return y({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(_,k){if(_ instanceof d)s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,_,k);else{var P=k==null?this.length():k.offset(this),O=this.split(P);O.parent.insertBefore(_,O)}}},{key:"optimize",value:function(_){s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,_);var k=this.next;k!=null&&k.prev===this&&k.statics.blotName===this.statics.blotName&&k.domNode.tagName===this.domNode.tagName&&k.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(k.moveChildren(this),k.remove())}},{key:"replace",value:function(_){if(_.statics.blotName!==this.statics.blotName){var k=f.default.create(this.statics.defaultChild);_.moveChildren(k),this.appendChild(k)}s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replace",this).call(this,_)}}]),A}(l.default);p.blotName="list",p.scope=f.default.Scope.BLOCK_BLOT,p.tagName=["OL","UL"],p.defaultChild="list-item",p.allowedChildren=[d],n.ListItem=d,n.default=p},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(56),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}function f(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function g(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function v(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var h=function(l){v(a,l);function a(){return f(this,a),g(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(s.default);h.blotName="italic",h.tagName=["EM","I"],n.default=h},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function y(b,w){for(var m=0;m<w.length;m++){var d=w[m];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(b,d.key,d)}}return function(b,w,m){return w&&y(b.prototype,w),m&&y(b,m),b}}(),s=function y(b,w,m){b===null&&(b=Function.prototype);var d=Object.getOwnPropertyDescriptor(b,w);if(d===void 0){var p=Object.getPrototypeOf(b);return p===null?void 0:y(p,w,m)}else{if("value"in d)return d.value;var c=d.get;return c===void 0?void 0:c.call(m)}},u=r(6),f=g(u);function g(y){return y&&y.__esModule?y:{default:y}}function v(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function h(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function l(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var a=function(y){l(b,y);function b(){return v(this,b),h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,null,[{key:"create",value:function(m){return m==="super"?document.createElement("sup"):m==="sub"?document.createElement("sub"):s(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,m)}},{key:"formats",value:function(m){if(m.tagName==="SUB")return"sub";if(m.tagName==="SUP")return"super"}}]),b}(f.default);a.blotName="script",a.tagName=["SUB","SUP"],n.default=a},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(6),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}function f(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function g(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function v(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var h=function(l){v(a,l);function a(){return f(this,a),g(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(s.default);h.blotName="strike",h.tagName="S",n.default=h},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(6),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}function f(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function g(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function v(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var h=function(l){v(a,l);function a(){return f(this,a),g(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(s.default);h.blotName="underline",h.tagName="U",n.default=h},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function w(m,d){for(var p=0;p<d.length;p++){var c=d[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(m,c.key,c)}}return function(m,d,p){return d&&w(m.prototype,d),p&&w(m,p),m}}(),s=function w(m,d,p){m===null&&(m=Function.prototype);var c=Object.getOwnPropertyDescriptor(m,d);if(c===void 0){var A=Object.getPrototypeOf(m);return A===null?void 0:w(A,d,p)}else{if("value"in c)return c.value;var T=c.get;return T===void 0?void 0:T.call(p)}},u=r(0),f=v(u),g=r(27);function v(w){return w&&w.__esModule?w:{default:w}}function h(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}function l(w,m){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:w}function a(w,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);w.prototype=Object.create(m&&m.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(w,m):w.__proto__=m)}var y=["alt","height","width"],b=function(w){a(m,w);function m(){return h(this,m),l(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"format",value:function(p,c){y.indexOf(p)>-1?c?this.domNode.setAttribute(p,c):this.domNode.removeAttribute(p):s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,p,c)}}],[{key:"create",value:function(p){var c=s(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,p);return typeof p=="string"&&c.setAttribute("src",this.sanitize(p)),c}},{key:"formats",value:function(p){return y.reduce(function(c,A){return p.hasAttribute(A)&&(c[A]=p.getAttribute(A)),c},{})}},{key:"match",value:function(p){return/\.(jpe?g|gif|png)$/.test(p)||/^data:image\/.+;base64/.test(p)}},{key:"sanitize",value:function(p){return(0,g.sanitize)(p,["http","https","data"])?p:"//:0"}},{key:"value",value:function(p){return p.getAttribute("src")}}]),m}(f.default.Embed);b.blotName="image",b.tagName="IMG",n.default=b},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function w(m,d){for(var p=0;p<d.length;p++){var c=d[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(m,c.key,c)}}return function(m,d,p){return d&&w(m.prototype,d),p&&w(m,p),m}}(),s=function w(m,d,p){m===null&&(m=Function.prototype);var c=Object.getOwnPropertyDescriptor(m,d);if(c===void 0){var A=Object.getPrototypeOf(m);return A===null?void 0:w(A,d,p)}else{if("value"in c)return c.value;var T=c.get;return T===void 0?void 0:T.call(p)}},u=r(4),f=r(27),g=v(f);function v(w){return w&&w.__esModule?w:{default:w}}function h(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}function l(w,m){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:w}function a(w,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);w.prototype=Object.create(m&&m.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(w,m):w.__proto__=m)}var y=["height","width"],b=function(w){a(m,w);function m(){return h(this,m),l(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"format",value:function(p,c){y.indexOf(p)>-1?c?this.domNode.setAttribute(p,c):this.domNode.removeAttribute(p):s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,p,c)}}],[{key:"create",value:function(p){var c=s(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,p);return c.setAttribute("frameborder","0"),c.setAttribute("allowfullscreen",!0),c.setAttribute("src",this.sanitize(p)),c}},{key:"formats",value:function(p){return y.reduce(function(c,A){return p.hasAttribute(A)&&(c[A]=p.getAttribute(A)),c},{})}},{key:"sanitize",value:function(p){return g.default.sanitize(p)}},{key:"value",value:function(p){return p.getAttribute("src")}}]),m}(u.BlockEmbed);b.blotName="video",b.className="ql-video",b.tagName="IFRAME",n.default=b},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var o=function(){function p(c,A){for(var T=0;T<A.length;T++){var _=A[T];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(c,_.key,_)}}return function(c,A,T){return A&&p(c.prototype,A),T&&p(c,T),c}}(),s=function p(c,A,T){c===null&&(c=Function.prototype);var _=Object.getOwnPropertyDescriptor(c,A);if(_===void 0){var k=Object.getPrototypeOf(c);return k===null?void 0:p(k,A,T)}else{if("value"in _)return _.value;var P=_.get;return P===void 0?void 0:P.call(T)}},u=r(35),f=a(u),g=r(5),v=a(g),h=r(9),l=a(h);function a(p){return p&&p.__esModule?p:{default:p}}function y(p,c){if(!(p instanceof c))throw new TypeError("Cannot call a class as a function")}function b(p,c){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:p}function w(p,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);p.prototype=Object.create(c&&c.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(p,c):p.__proto__=c)}var m=function(p){w(c,p);function c(){return y(this,c),b(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return o(c,null,[{key:"create",value:function(T){var _=s(c.__proto__||Object.getPrototypeOf(c),"create",this).call(this,T);return typeof T=="string"&&(window.katex.render(T,_,{throwOnError:!1,errorColor:"#f00"}),_.setAttribute("data-value",T)),_}},{key:"value",value:function(T){return T.getAttribute("data-value")}}]),c}(f.default);m.blotName="formula",m.className="ql-formula",m.tagName="SPAN";var d=function(p){w(c,p),o(c,null,[{key:"register",value:function(){v.default.register(m,!0)}}]);function c(){y(this,c);var A=b(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return A}return c}(l.default);n.FormulaBlot=m,n.default=d},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var o=function(){function T(_,k){for(var P=0;P<k.length;P++){var O=k[P];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(_,O.key,O)}}return function(_,k,P){return k&&T(_.prototype,k),P&&T(_,P),_}}(),s=function T(_,k,P){_===null&&(_=Function.prototype);var O=Object.getOwnPropertyDescriptor(_,k);if(O===void 0){var E=Object.getPrototypeOf(_);return E===null?void 0:T(E,k,P)}else{if("value"in O)return O.value;var x=O.get;return x===void 0?void 0:x.call(P)}},u=r(0),f=b(u),g=r(5),v=b(g),h=r(9),l=b(h),a=r(13),y=b(a);function b(T){return T&&T.__esModule?T:{default:T}}function w(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function m(T,_){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:T}function d(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);T.prototype=Object.create(_&&_.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(T,_):T.__proto__=_)}var p=function(T){d(_,T);function _(){return w(this,_),m(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,[{key:"replaceWith",value:function(P){this.domNode.textContent=this.domNode.textContent,this.attach(),s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"replaceWith",this).call(this,P)}},{key:"highlight",value:function(P){var O=this.domNode.textContent;this.cachedText!==O&&((O.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=P(O),this.domNode.normalize(),this.attach()),this.cachedText=O)}}]),_}(y.default);p.className="ql-syntax";var c=new f.default.Attributor.Class("token","hljs",{scope:f.default.Scope.INLINE}),A=function(T){d(_,T),o(_,null,[{key:"register",value:function(){v.default.register(c,!0),v.default.register(p,!0)}}]);function _(k,P){w(this,_);var O=m(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,k,P));if(typeof O.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var E=null;return O.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(E),E=setTimeout(function(){O.highlight(),E=null},O.options.interval)}),O.highlight(),O}return o(_,[{key:"highlight",value:function(){var P=this;if(!this.quill.selection.composing){this.quill.update(v.default.sources.USER);var O=this.quill.getSelection();this.quill.scroll.descendants(p).forEach(function(E){E.highlight(P.options.highlight)}),this.quill.update(v.default.sources.SILENT),O!=null&&this.quill.setSelection(O,v.default.sources.SILENT)}}}]),_}(l.default);A.DEFAULTS={highlight:function(){return window.hljs==null?null:function(T){var _=window.hljs.highlightAuto(T);return _.value}}(),interval:1e3},n.CodeBlock=p,n.CodeToken=c,n.default=A},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,n){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,n){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,n){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,n){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var o=function _(k,P,O){k===null&&(k=Function.prototype);var E=Object.getOwnPropertyDescriptor(k,P);if(E===void 0){var x=Object.getPrototypeOf(k);return x===null?void 0:_(x,P,O)}else{if("value"in E)return E.value;var N=E.get;return N===void 0?void 0:N.call(O)}},s=function(){function _(k,P){for(var O=0;O<P.length;O++){var E=P[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(k,E.key,E)}}return function(k,P,O){return P&&_(k.prototype,P),O&&_(k,O),k}}(),u=r(3),f=w(u),g=r(8),v=w(g),h=r(43),l=w(h),a=r(15),y=r(41),b=w(y);function w(_){return _&&_.__esModule?_:{default:_}}function m(_,k){if(!(_ instanceof k))throw new TypeError("Cannot call a class as a function")}function d(_,k){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:_}function p(_,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);_.prototype=Object.create(k&&k.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(_,k):_.__proto__=k)}var c=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],A=function(_){p(k,_);function k(P,O){m(this,k),O.modules.toolbar!=null&&O.modules.toolbar.container==null&&(O.modules.toolbar.container=c);var E=d(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,P,O));return E.quill.container.classList.add("ql-bubble"),E}return s(k,[{key:"extendToolbar",value:function(O){this.tooltip=new T(this.quill,this.options.bounds),this.tooltip.root.appendChild(O.container),this.buildButtons([].slice.call(O.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(O.container.querySelectorAll("select")),b.default)}}]),k}(l.default);A.DEFAULTS=(0,f.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(k){k?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var T=function(_){p(k,_);function k(P,O){m(this,k);var E=d(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,P,O));return E.quill.on(v.default.events.EDITOR_CHANGE,function(x,N,I,L){if(x===v.default.events.SELECTION_CHANGE)if(N!=null&&N.length>0&&L===v.default.sources.USER){E.show(),E.root.style.left="0px",E.root.style.width="",E.root.style.width=E.root.offsetWidth+"px";var F=E.quill.getLines(N.index,N.length);if(F.length===1)E.position(E.quill.getBounds(N));else{var U=F[F.length-1],G=E.quill.getIndex(U),z=Math.min(U.length()-1,N.index+N.length-G),j=E.quill.getBounds(new a.Range(G,z));E.position(j)}}else document.activeElement!==E.textbox&&E.quill.hasFocus()&&E.hide()}),E}return s(k,[{key:"listen",value:function(){var O=this;o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){O.root.classList.remove("ql-editing")}),this.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!O.root.classList.contains("ql-hidden")){var E=O.quill.getSelection();E!=null&&O.position(O.quill.getBounds(E))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(O){var E=o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"position",this).call(this,O),x=this.root.querySelector(".ql-tooltip-arrow");if(x.style.marginLeft="",E===0)return E;x.style.marginLeft=-1*E-x.offsetWidth/2+"px"}}]),k}(h.BaseTooltip);T.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=T,n.default=A},function(t,n,r){t.exports=r(63)}]).default})})(nl);var If=nl.exports;const Es=tl(If);var rl={exports:{}};/*! For license information please see quill-cursors.js.LICENSE.txt */(function(i,e){(function(t,n){i.exports=n()})(self,()=>(()=>{var t={582:(s,u,f)=>{f.d(u,{Z:()=>a});var g=f(81),v=f.n(g),h=f(645),l=f.n(h)()(v());l.push([s.id,".ql-container{position:relative;overflow:hidden}@media(pointer: coarse){.ql-cursor-caret-container{z-index:-1}}.ql-cursor.hidden{display:none}.ql-cursor .ql-cursor-caret-container,.ql-cursor .ql-cursor-flag{position:absolute}.ql-cursor .ql-cursor-flag{z-index:1;transform:translate3d(-1px, -100%, 0);opacity:0;visibility:hidden;color:#fff;padding-bottom:2px;border-radius:0 3px 3px 0}.ql-cursor .ql-cursor-flag.flag-flipped{border-radius:3px 0 0 3px;transform:translate3d(calc(-100% + 1px ), -100%, 0)}@media screen{.ql-cursor .ql-cursor-flag{transition:opacity 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms,visibility 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms}}.ql-cursor .ql-cursor-flag .ql-cursor-name{margin-left:5px;margin-right:5px;display:inline-block;margin-top:-2px;white-space:nowrap}.ql-cursor .ql-cursor-flag.no-delay[style]{transition-delay:unset !important}.ql-cursor .ql-cursor-caret-container{cursor:text;margin-left:-9px;padding:0 9px}.ql-cursor .ql-cursor-caret-container.hover+.ql-cursor-flag{opacity:1;visibility:visible;transition:none}.ql-cursor .ql-cursor-caret-container.no-pointer{pointer-events:none}.ql-cursor .ql-cursor-caret-container .ql-cursor-caret{position:absolute;top:0;bottom:0;width:2px;margin-left:-1px;background-color:attr(data-color)}.ql-cursor .ql-cursor-selection-block{position:absolute;pointer-events:none}",""]);const a=l},645:s=>{s.exports=function(u){var f=[];return f.toString=function(){return this.map(function(g){var v="",h=g[5]!==void 0;return g[4]&&(v+="@supports (".concat(g[4],") {")),g[2]&&(v+="@media ".concat(g[2]," {")),h&&(v+="@layer".concat(g[5].length>0?" ".concat(g[5]):""," {")),v+=u(g),h&&(v+="}"),g[2]&&(v+="}"),g[4]&&(v+="}"),v}).join("")},f.i=function(g,v,h,l,a){typeof g=="string"&&(g=[[null,g,void 0]]);var y={};if(h)for(var b=0;b<this.length;b++){var w=this[b][0];w!=null&&(y[w]=!0)}for(var m=0;m<g.length;m++){var d=[].concat(g[m]);h&&y[d[0]]||(a!==void 0&&(d[5]===void 0||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),v&&(d[2]&&(d[1]="@media ".concat(d[2]," {").concat(d[1],"}")),d[2]=v),l&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=l):d[4]="".concat(l)),f.push(d))}},f}},81:s=>{s.exports=function(u){return u[1]}},529:s=>{var u=-1;function f(p,c,A,T){if(p===c)return p?[[0,p]]:[];if(A!=null){var _=function(x,N,I){var L=typeof I=="number"?{index:I,length:0}:I.oldRange,F=typeof I=="number"?null:I.newRange,U=x.length,G=N.length;if(L.length===0&&(F===null||F.length===0)){var z=L.index,j=x.slice(0,z),R=x.slice(z),B=F?F.index:null,M=z+G-U;if((B===null||B===M)&&!(M<0||M>G)){var K=N.slice(0,M);if((D=N.slice(M))===R){var C=Math.min(z,M);if(($=j.slice(0,C))===(ne=K.slice(0,C)))return m($,j.slice(C),K.slice(C),R)}}if(B===null||B===z){var S=z,D=(K=N.slice(0,S),N.slice(S));if(K===j){var q=Math.min(U-S,G-S);if((H=R.slice(R.length-q))===(ce=D.slice(D.length-q)))return m(j,R.slice(0,R.length-q),D.slice(0,D.length-q),H)}}}if(L.length>0&&F&&F.length===0){var $=x.slice(0,L.index),H=x.slice(L.index+L.length);if(!(G<(C=$.length)+(q=H.length))){var ne=N.slice(0,C),ce=N.slice(G-q);if($===ne&&H===ce)return m($,x.slice(C,U-q),N.slice(C,G-q),H)}}return null}(p,c,A);if(_)return _}var k=v(p,c),P=p.substring(0,k);k=h(p=p.substring(k),c=c.substring(k));var O=p.substring(p.length-k),E=function(x,N){var I;if(!x)return[[1,N]];if(!N)return[[u,x]];var L=x.length>N.length?x:N,F=x.length>N.length?N:x,U=L.indexOf(F);if(U!==-1)return I=[[1,L.substring(0,U)],[0,F],[1,L.substring(U+F.length)]],x.length>N.length&&(I[0][0]=I[2][0]=u),I;if(F.length===1)return[[u,x],[1,N]];var G=function(S,D){var q=S.length>D.length?S:D,$=S.length>D.length?D:S;if(q.length<4||2*$.length<q.length)return null;function H(te,Y,Z){for(var ae,se,ye,de,be=te.substring(Z,Z+Math.floor(te.length/4)),Pe=-1,Le="";(Pe=Y.indexOf(be,Pe+1))!==-1;){var Ee=v(te.substring(Z),Y.substring(Pe)),Ze=h(te.substring(0,Z),Y.substring(0,Pe));Le.length<Ze+Ee&&(Le=Y.substring(Pe-Ze,Pe)+Y.substring(Pe,Pe+Ee),ae=te.substring(0,Z-Ze),se=te.substring(Z+Ee),ye=Y.substring(0,Pe-Ze),de=Y.substring(Pe+Ee))}return 2*Le.length>=te.length?[ae,se,ye,de,Le]:null}var ne,ce,fe,ge,Oe,$e=H(q,$,Math.ceil(q.length/4)),Fe=H(q,$,Math.ceil(q.length/2));return $e||Fe?(ne=Fe?$e&&$e[4].length>Fe[4].length?$e:Fe:$e,S.length>D.length?(ce=ne[0],fe=ne[1],ge=ne[2],Oe=ne[3]):(ge=ne[0],Oe=ne[1],ce=ne[2],fe=ne[3]),[ce,fe,ge,Oe,ne[4]]):null}(x,N);if(G){var z=G[0],j=G[1],R=G[2],B=G[3],M=G[4],K=f(z,R),C=f(j,B);return K.concat([[0,M]],C)}return function(S,D){for(var q=S.length,$=D.length,H=Math.ceil((q+$)/2),ne=H,ce=2*H,fe=new Array(ce),ge=new Array(ce),Oe=0;Oe<ce;Oe++)fe[Oe]=-1,ge[Oe]=-1;fe[ne+1]=0,ge[ne+1]=0;for(var $e=q-$,Fe=$e%2!=0,te=0,Y=0,Z=0,ae=0,se=0;se<H;se++){for(var ye=-se+te;ye<=se-Y;ye+=2){for(var de=ne+ye,be=(ke=ye===-se||ye!==se&&fe[de-1]<fe[de+1]?fe[de+1]:fe[de-1]+1)-ye;ke<q&&be<$&&S.charAt(ke)===D.charAt(be);)ke++,be++;if(fe[de]=ke,ke>q)Y+=2;else if(be>$)te+=2;else if(Fe&&(Ee=ne+$e-ye)>=0&&Ee<ce&&ge[Ee]!==-1&&ke>=(Le=q-ge[Ee]))return g(S,D,ke,be)}for(var Pe=-se+Z;Pe<=se-ae;Pe+=2){for(var Le,Ee=ne+Pe,Ze=(Le=Pe===-se||Pe!==se&&ge[Ee-1]<ge[Ee+1]?ge[Ee+1]:ge[Ee-1]+1)-Pe;Le<q&&Ze<$&&S.charAt(q-Le-1)===D.charAt($-Ze-1);)Le++,Ze++;if(ge[Ee]=Le,Le>q)ae+=2;else if(Ze>$)Z+=2;else if(!Fe){var ke;if((de=ne+$e-Pe)>=0&&de<ce&&fe[de]!==-1&&(be=ne+(ke=fe[de])-de,ke>=(Le=q-Le)))return g(S,D,ke,be)}}}return[[u,S],[1,D]]}(x,N)}(p=p.substring(0,p.length-k),c=c.substring(0,c.length-k));return P&&E.unshift([0,P]),O&&E.push([0,O]),l(E,T),E}function g(p,c,A,T){var _=p.substring(0,A),k=c.substring(0,T),P=p.substring(A),O=c.substring(T),E=f(_,k),x=f(P,O);return E.concat(x)}function v(p,c){if(!p||!c||p.charAt(0)!==c.charAt(0))return 0;for(var A=0,T=Math.min(p.length,c.length),_=T,k=0;A<_;)p.substring(k,_)==c.substring(k,_)?k=A=_:T=_,_=Math.floor((T-A)/2+A);return a(p.charCodeAt(_-1))&&_--,_}function h(p,c){if(!p||!c||p.slice(-1)!==c.slice(-1))return 0;for(var A=0,T=Math.min(p.length,c.length),_=T,k=0;A<_;)p.substring(p.length-_,p.length-k)==c.substring(c.length-_,c.length-k)?k=A=_:T=_,_=Math.floor((T-A)/2+A);return y(p.charCodeAt(p.length-_))&&_--,_}function l(p,c){p.push([0,""]);for(var A,T=0,_=0,k=0,P="",O="";T<p.length;)if(T<p.length-1&&!p[T][1])p.splice(T,1);else switch(p[T][0]){case 1:k++,O+=p[T][1],T++;break;case u:_++,P+=p[T][1],T++;break;case 0:var E=T-k-_-1;if(c){if(E>=0&&w(p[E][1])){var x=p[E][1].slice(-1);if(p[E][1]=p[E][1].slice(0,-1),P=x+P,O=x+O,!p[E][1]){p.splice(E,1),T--;var N=E-1;p[N]&&p[N][0]===1&&(k++,O=p[N][1]+O,N--),p[N]&&p[N][0]===u&&(_++,P=p[N][1]+P,N--),E=N}}b(p[T][1])&&(x=p[T][1].charAt(0),p[T][1]=p[T][1].slice(1),P+=x,O+=x)}if(T<p.length-1&&!p[T][1]){p.splice(T,1);break}if(P.length>0||O.length>0){P.length>0&&O.length>0&&((A=v(O,P))!==0&&(E>=0?p[E][1]+=O.substring(0,A):(p.splice(0,0,[0,O.substring(0,A)]),T++),O=O.substring(A),P=P.substring(A)),(A=h(O,P))!==0&&(p[T][1]=O.substring(O.length-A)+p[T][1],O=O.substring(0,O.length-A),P=P.substring(0,P.length-A)));var I=k+_;P.length===0&&O.length===0?(p.splice(T-I,I),T-=I):P.length===0?(p.splice(T-I,I,[1,O]),T=T-I+1):O.length===0?(p.splice(T-I,I,[u,P]),T=T-I+1):(p.splice(T-I,I,[u,P],[1,O]),T=T-I+2)}T!==0&&p[T-1][0]===0?(p[T-1][1]+=p[T][1],p.splice(T,1)):T++,k=0,_=0,P="",O=""}p[p.length-1][1]===""&&p.pop();var L=!1;for(T=1;T<p.length-1;)p[T-1][0]===0&&p[T+1][0]===0&&(p[T][1].substring(p[T][1].length-p[T-1][1].length)===p[T-1][1]?(p[T][1]=p[T-1][1]+p[T][1].substring(0,p[T][1].length-p[T-1][1].length),p[T+1][1]=p[T-1][1]+p[T+1][1],p.splice(T-1,1),L=!0):p[T][1].substring(0,p[T+1][1].length)==p[T+1][1]&&(p[T-1][1]+=p[T+1][1],p[T][1]=p[T][1].substring(p[T+1][1].length)+p[T+1][1],p.splice(T+1,1),L=!0)),T++;L&&l(p,c)}function a(p){return p>=55296&&p<=56319}function y(p){return p>=56320&&p<=57343}function b(p){return y(p.charCodeAt(0))}function w(p){return a(p.charCodeAt(p.length-1))}function m(p,c,A,T){return w(p)||b(T)?null:function(_){for(var k=[],P=0;P<_.length;P++)_[P][1].length>0&&k.push(_[P]);return k}([[0,p],[u,c],[1,A],[0,T]])}function d(p,c,A){return f(p,c,A,!0)}d.INSERT=1,d.DELETE=u,d.EQUAL=0,s.exports=d},465:(s,u,f)=>{s=f.nmd(s);var g="__lodash_hash_undefined__",v=9007199254740991,h="[object Arguments]",l="[object Boolean]",a="[object Date]",y="[object Function]",b="[object GeneratorFunction]",w="[object Map]",m="[object Number]",d="[object Object]",p="[object Promise]",c="[object RegExp]",A="[object Set]",T="[object String]",_="[object Symbol]",k="[object WeakMap]",P="[object ArrayBuffer]",O="[object DataView]",E="[object Float32Array]",x="[object Float64Array]",N="[object Int8Array]",I="[object Int16Array]",L="[object Int32Array]",F="[object Uint8Array]",U="[object Uint8ClampedArray]",G="[object Uint16Array]",z="[object Uint32Array]",j=/\w*$/,R=/^\[object .+?Constructor\]$/,B=/^(?:0|[1-9]\d*)$/,M={};M[h]=M["[object Array]"]=M[P]=M[O]=M[l]=M[a]=M[E]=M[x]=M[N]=M[I]=M[L]=M[w]=M[m]=M[d]=M[c]=M[A]=M[T]=M[_]=M[F]=M[U]=M[G]=M[z]=!0,M["[object Error]"]=M[y]=M[k]=!1;var K=typeof f.g=="object"&&f.g&&f.g.Object===Object&&f.g,C=typeof self=="object"&&self&&self.Object===Object&&self,S=K||C||Function("return this")(),D=u&&!u.nodeType&&u,q=D&&s&&!s.nodeType&&s,$=q&&q.exports===D;function H(V,re){return V.set(re[0],re[1]),V}function ne(V,re){return V.add(re),V}function ce(V,re,he,pe){var De=-1,Ve=V?V.length:0;for(pe;++De<Ve;)he=re(he,V[De],De,V);return he}function fe(V){var re=!1;if(V!=null&&typeof V.toString!="function")try{re=!!(V+"")}catch{}return re}function ge(V){var re=-1,he=Array(V.size);return V.forEach(function(pe,De){he[++re]=[De,pe]}),he}function Oe(V,re){return function(he){return V(re(he))}}function $e(V){var re=-1,he=Array(V.size);return V.forEach(function(pe){he[++re]=pe}),he}var Fe,te=Array.prototype,Y=Function.prototype,Z=Object.prototype,ae=S["__core-js_shared__"],se=(Fe=/[^.]+$/.exec(ae&&ae.keys&&ae.keys.IE_PROTO||""))?"Symbol(src)_1."+Fe:"",ye=Y.toString,de=Z.hasOwnProperty,be=Z.toString,Pe=RegExp("^"+ye.call(de).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Le=$?S.Buffer:void 0,Ee=S.Symbol,Ze=S.Uint8Array,ke=Oe(Object.getPrototypeOf,Object),vt=Object.create,Qn=Z.propertyIsEnumerable,Yi=te.splice,ui=Object.getOwnPropertySymbols,Zi=Le?Le.isBuffer:void 0,Xi=Oe(Object.keys,Object),Lr=Zt(S,"DataView"),Ln=Zt(S,"Map"),er=Zt(S,"Promise"),Lt=Zt(S,"Set"),_t=Zt(S,"WeakMap"),Et=Zt(Object,"create"),gr=Qt(Lr),Gt=Qt(Ln),pr=Qt(er),tr=Qt(Lt),ci=Qt(_t),Mr=Ee?Ee.prototype:void 0,Br=Mr?Mr.valueOf:void 0;function Yt(V){var re=-1,he=V?V.length:0;for(this.clear();++re<he;){var pe=V[re];this.set(pe[0],pe[1])}}function bt(V){var re=-1,he=V?V.length:0;for(this.clear();++re<he;){var pe=V[re];this.set(pe[0],pe[1])}}function Ot(V){var re=-1,he=V?V.length:0;for(this.clear();++re<he;){var pe=V[re];this.set(pe[0],pe[1])}}function Mn(V){this.__data__=new bt(V)}function Mt(V,re,he){var pe=V[re];de.call(V,re)&&di(pe,he)&&(he!==void 0||re in V)||(V[re]=he)}function mr(V,re){for(var he=V.length;he--;)if(di(V[he][0],re))return he;return-1}function Bt(V,re,he,pe,De,Ve,We){var Be;if(pe&&(Be=Ve?pe(V,De,Ve,We):pe(V)),Be!==void 0)return Be;if(!Ue(V))return V;var tt=W(V);if(tt){if(Be=function(xe){var Je=xe.length,nt=xe.constructor(Je);return Je&&typeof xe[0]=="string"&&de.call(xe,"index")&&(nt.index=xe.index,nt.input=xe.input),nt}(V),!re)return function(xe,Je){var nt=-1,Me=xe.length;for(Je||(Je=Array(Me));++nt<Me;)Je[nt]=xe[nt];return Je}(V,Be)}else{var Ge=Xt(V),en=Ge==y||Ge==b;if(ue(V))return function(xe,Je){if(Je)return xe.slice();var nt=new xe.constructor(xe.length);return xe.copy(nt),nt}(V,re);if(Ge==d||Ge==h||en&&!Ve){if(fe(V))return Ve?V:{};if(Be=function(xe){return typeof xe.constructor!="function"||Bn(xe)?{}:Ue(Je=ke(xe))?vt(Je):{};var Je}(en?{}:V),!re)return function(xe,Je){return fi(xe,qr(xe),Je)}(V,function(xe,Je){return xe&&fi(Je,Re(Je),xe)}(Be,V))}else{if(!M[Ge])return Ve?V:{};Be=function(xe,Je,nt,Me){var je,qt=xe.constructor;switch(Je){case P:return yr(xe);case l:case a:return new qt(+xe);case O:return function(qe,ut){var Xe=ut?yr(qe.buffer):qe.buffer;return new qe.constructor(Xe,qe.byteOffset,qe.byteLength)}(xe,Me);case E:case x:case N:case I:case L:case F:case U:case G:case z:return function(qe,ut){var Xe=ut?yr(qe.buffer):qe.buffer;return new qe.constructor(Xe,qe.byteOffset,qe.length)}(xe,Me);case w:return function(qe,ut,Xe){return ce(ut?Xe(ge(qe),!0):ge(qe),H,new qe.constructor)}(xe,Me,nt);case m:case T:return new qt(xe);case c:return function(qe){var ut=new qe.constructor(qe.source,j.exec(qe));return ut.lastIndex=qe.lastIndex,ut}(xe);case A:return function(qe,ut,Xe){return ce(ut?Xe($e(qe),!0):$e(qe),ne,new qe.constructor)}(xe,Me,nt);case _:return je=xe,Br?Object(Br.call(je)):{}}}(V,Ge,Bt,re)}}We||(We=new Mn);var En=We.get(V);if(En)return En;if(We.set(V,Be),!tt)var qn=he?function(xe){return function(Je,nt,Me){var je=nt(Je);return W(Je)?je:function(qt,qe){for(var ut=-1,Xe=qe.length,Ft=qt.length;++ut<Xe;)qt[Ft+ut]=qe[ut];return qt}(je,Me(Je))}(xe,Re,qr)}(V):Re(V);return function(xe,Je){for(var nt=-1,Me=xe?xe.length:0;++nt<Me&&Je(xe[nt],nt)!==!1;);}(qn||V,function(xe,Je){qn&&(xe=V[Je=xe]),Mt(Be,Je,Bt(xe,re,he,pe,Je,V,We))}),Be}function yr(V){var re=new V.constructor(V.byteLength);return new Ze(re).set(new Ze(V)),re}function fi(V,re,he,pe){he||(he={});for(var De=-1,Ve=re.length;++De<Ve;){var We=re[De],Be=void 0;Mt(he,We,Be===void 0?V[We]:Be)}return he}function _n(V,re){var he,pe,De=V.__data__;return((pe=typeof(he=re))=="string"||pe=="number"||pe=="symbol"||pe=="boolean"?he!=="__proto__":he===null)?De[typeof re=="string"?"string":"hash"]:De.map}function Zt(V,re){var he=function(pe,De){return pe==null?void 0:pe[De]}(V,re);return function(pe){return!(!Ue(pe)||(De=pe,se&&se in De))&&(we(pe)||fe(pe)?Pe:R).test(Qt(pe));var De}(he)?he:void 0}Yt.prototype.clear=function(){this.__data__=Et?Et(null):{}},Yt.prototype.delete=function(V){return this.has(V)&&delete this.__data__[V]},Yt.prototype.get=function(V){var re=this.__data__;if(Et){var he=re[V];return he===g?void 0:he}return de.call(re,V)?re[V]:void 0},Yt.prototype.has=function(V){var re=this.__data__;return Et?re[V]!==void 0:de.call(re,V)},Yt.prototype.set=function(V,re){return this.__data__[V]=Et&&re===void 0?g:re,this},bt.prototype.clear=function(){this.__data__=[]},bt.prototype.delete=function(V){var re=this.__data__,he=mr(re,V);return!(he<0||(he==re.length-1?re.pop():Yi.call(re,he,1),0))},bt.prototype.get=function(V){var re=this.__data__,he=mr(re,V);return he<0?void 0:re[he][1]},bt.prototype.has=function(V){return mr(this.__data__,V)>-1},bt.prototype.set=function(V,re){var he=this.__data__,pe=mr(he,V);return pe<0?he.push([V,re]):he[pe][1]=re,this},Ot.prototype.clear=function(){this.__data__={hash:new Yt,map:new(Ln||bt),string:new Yt}},Ot.prototype.delete=function(V){return _n(this,V).delete(V)},Ot.prototype.get=function(V){return _n(this,V).get(V)},Ot.prototype.has=function(V){return _n(this,V).has(V)},Ot.prototype.set=function(V,re){return _n(this,V).set(V,re),this},Mn.prototype.clear=function(){this.__data__=new bt},Mn.prototype.delete=function(V){return this.__data__.delete(V)},Mn.prototype.get=function(V){return this.__data__.get(V)},Mn.prototype.has=function(V){return this.__data__.has(V)},Mn.prototype.set=function(V,re){var he=this.__data__;if(he instanceof bt){var pe=he.__data__;if(!Ln||pe.length<199)return pe.push([V,re]),this;he=this.__data__=new Ot(pe)}return he.set(V,re),this};var qr=ui?Oe(ui,Object):function(){return[]},Xt=function(V){return be.call(V)};function hi(V,re){return!!(re=re??v)&&(typeof V=="number"||B.test(V))&&V>-1&&V%1==0&&V<re}function Bn(V){var re=V&&V.constructor;return V===(typeof re=="function"&&re.prototype||Z)}function Qt(V){if(V!=null){try{return ye.call(V)}catch{}try{return V+""}catch{}}return""}function di(V,re){return V===re||V!=V&&re!=re}(Lr&&Xt(new Lr(new ArrayBuffer(1)))!=O||Ln&&Xt(new Ln)!=w||er&&Xt(er.resolve())!=p||Lt&&Xt(new Lt)!=A||_t&&Xt(new _t)!=k)&&(Xt=function(V){var re=be.call(V),he=re==d?V.constructor:void 0,pe=he?Qt(he):void 0;if(pe)switch(pe){case gr:return O;case Gt:return w;case pr:return p;case tr:return A;case ci:return k}return re});var W=Array.isArray;function ie(V){return V!=null&&function(re){return typeof re=="number"&&re>-1&&re%1==0&&re<=v}(V.length)&&!we(V)}var ue=Zi||function(){return!1};function we(V){var re=Ue(V)?be.call(V):"";return re==y||re==b}function Ue(V){var re=typeof V;return!!V&&(re=="object"||re=="function")}function Re(V){return ie(V)?function(re,he){var pe=W(re)||function(Be){return function(tt){return function(Ge){return!!Ge&&typeof Ge=="object"}(tt)&&ie(tt)}(Be)&&de.call(Be,"callee")&&(!Qn.call(Be,"callee")||be.call(Be)==h)}(re)?function(Be,tt){for(var Ge=-1,en=Array(Be);++Ge<Be;)en[Ge]=tt(Ge);return en}(re.length,String):[],De=pe.length,Ve=!!De;for(var We in re)!de.call(re,We)||Ve&&(We=="length"||hi(We,De))||pe.push(We);return pe}(V):function(re){if(!Bn(re))return Xi(re);var he=[];for(var pe in Object(re))de.call(re,pe)&&pe!="constructor"&&he.push(pe);return he}(V)}s.exports=function(V){return Bt(V,!0,!0)}},307:(s,u,f)=>{s=f.nmd(s);var g="__lodash_hash_undefined__",v=9007199254740991,h="[object Arguments]",l="[object Array]",a="[object Boolean]",y="[object Date]",b="[object Error]",w="[object Function]",m="[object Map]",d="[object Number]",p="[object Object]",c="[object Promise]",A="[object RegExp]",T="[object Set]",_="[object String]",k="[object WeakMap]",P="[object ArrayBuffer]",O="[object DataView]",E=/^\[object .+?Constructor\]$/,x=/^(?:0|[1-9]\d*)$/,N={};N["[object Float32Array]"]=N["[object Float64Array]"]=N["[object Int8Array]"]=N["[object Int16Array]"]=N["[object Int32Array]"]=N["[object Uint8Array]"]=N["[object Uint8ClampedArray]"]=N["[object Uint16Array]"]=N["[object Uint32Array]"]=!0,N[h]=N[l]=N[P]=N[a]=N[O]=N[y]=N[b]=N[w]=N[m]=N[d]=N[p]=N[A]=N[T]=N[_]=N[k]=!1;var I=typeof f.g=="object"&&f.g&&f.g.Object===Object&&f.g,L=typeof self=="object"&&self&&self.Object===Object&&self,F=I||L||Function("return this")(),U=u&&!u.nodeType&&u,G=U&&s&&!s.nodeType&&s,z=G&&G.exports===U,j=z&&I.process,R=function(){try{return j&&j.binding&&j.binding("util")}catch{}}(),B=R&&R.isTypedArray;function M(W,ie){for(var ue=-1,we=W==null?0:W.length;++ue<we;)if(ie(W[ue],ue,W))return!0;return!1}function K(W){var ie=-1,ue=Array(W.size);return W.forEach(function(we,Ue){ue[++ie]=[Ue,we]}),ue}function C(W){var ie=-1,ue=Array(W.size);return W.forEach(function(we){ue[++ie]=we}),ue}var S,D,q,$=Array.prototype,H=Function.prototype,ne=Object.prototype,ce=F["__core-js_shared__"],fe=H.toString,ge=ne.hasOwnProperty,Oe=(S=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",$e=ne.toString,Fe=RegExp("^"+fe.call(ge).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=z?F.Buffer:void 0,Y=F.Symbol,Z=F.Uint8Array,ae=ne.propertyIsEnumerable,se=$.splice,ye=Y?Y.toStringTag:void 0,de=Object.getOwnPropertySymbols,be=te?te.isBuffer:void 0,Pe=(D=Object.keys,q=Object,function(W){return D(q(W))}),Le=Ot(F,"DataView"),Ee=Ot(F,"Map"),Ze=Ot(F,"Promise"),ke=Ot(F,"Set"),vt=Ot(F,"WeakMap"),Qn=Ot(Object,"create"),Yi=Bt(Le),ui=Bt(Ee),Zi=Bt(Ze),Xi=Bt(ke),Lr=Bt(vt),Ln=Y?Y.prototype:void 0,er=Ln?Ln.valueOf:void 0;function Lt(W){var ie=-1,ue=W==null?0:W.length;for(this.clear();++ie<ue;){var we=W[ie];this.set(we[0],we[1])}}function _t(W){var ie=-1,ue=W==null?0:W.length;for(this.clear();++ie<ue;){var we=W[ie];this.set(we[0],we[1])}}function Et(W){var ie=-1,ue=W==null?0:W.length;for(this.clear();++ie<ue;){var we=W[ie];this.set(we[0],we[1])}}function gr(W){var ie=-1,ue=W==null?0:W.length;for(this.__data__=new Et;++ie<ue;)this.add(W[ie])}function Gt(W){var ie=this.__data__=new _t(W);this.size=ie.size}function pr(W,ie){for(var ue=W.length;ue--;)if(yr(W[ue][0],ie))return ue;return-1}function tr(W){return W==null?W===void 0?"[object Undefined]":"[object Null]":ye&&ye in Object(W)?function(ie){var ue=ge.call(ie,ye),we=ie[ye];try{ie[ye]=void 0;var Ue=!0}catch{}var Re=$e.call(ie);return Ue&&(ue?ie[ye]=we:delete ie[ye]),Re}(W):function(ie){return $e.call(ie)}(W)}function ci(W){return Bn(W)&&tr(W)==h}function Mr(W,ie,ue,we,Ue){return W===ie||(W==null||ie==null||!Bn(W)&&!Bn(ie)?W!=W&&ie!=ie:function(Re,V,re,he,pe,De){var Ve=_n(Re),We=_n(V),Be=Ve?l:Mt(Re),tt=We?l:Mt(V),Ge=(Be=Be==h?p:Be)==p,en=(tt=tt==h?p:tt)==p,En=Be==tt;if(En&&Zt(Re)){if(!Zt(V))return!1;Ve=!0,Ge=!1}if(En&&!Ge)return De||(De=new Gt),Ve||Qt(Re)?Br(Re,V,re,he,pe,De):function(Me,je,qt,qe,ut,Xe,Ft){switch(qt){case O:if(Me.byteLength!=je.byteLength||Me.byteOffset!=je.byteOffset)return!1;Me=Me.buffer,je=je.buffer;case P:return!(Me.byteLength!=je.byteLength||!Xe(new Z(Me),new Z(je)));case a:case y:case d:return yr(+Me,+je);case b:return Me.name==je.name&&Me.message==je.message;case A:case _:return Me==je+"";case m:var Fn=K;case T:var Fr=1&qe;if(Fn||(Fn=C),Me.size!=je.size&&!Fr)return!1;var nr=Ft.get(Me);if(nr)return nr==je;qe|=2,Ft.set(Me,je);var On=Br(Fn(Me),Fn(je),qe,ut,Xe,Ft);return Ft.delete(Me),On;case"[object Symbol]":if(er)return er.call(Me)==er.call(je)}return!1}(Re,V,Be,re,he,pe,De);if(!(1&re)){var qn=Ge&&ge.call(Re,"__wrapped__"),xe=en&&ge.call(V,"__wrapped__");if(qn||xe){var Je=qn?Re.value():Re,nt=xe?V.value():V;return De||(De=new Gt),pe(Je,nt,re,he,De)}}return!!En&&(De||(De=new Gt),function(Me,je,qt,qe,ut,Xe){var Ft=1&qt,Fn=Yt(Me),Fr=Fn.length;if(Fr!=Yt(je).length&&!Ft)return!1;for(var nr=Fr;nr--;){var On=Fn[nr];if(!(Ft?On in je:ge.call(je,On)))return!1}var Mo=Xe.get(Me);if(Mo&&Xe.get(je))return Mo==je;var gi=!0;Xe.set(Me,je),Xe.set(je,Me);for(var Qi=Ft;++nr<Fr;){var pi=Me[On=Fn[nr]],mi=je[On];if(qe)var Bo=Ft?qe(mi,pi,On,je,Me,Xe):qe(pi,mi,On,Me,je,Xe);if(!(Bo===void 0?pi===mi||ut(pi,mi,qt,qe,Xe):Bo)){gi=!1;break}Qi||(Qi=On=="constructor")}if(gi&&!Qi){var yi=Me.constructor,vi=je.constructor;yi==vi||!("constructor"in Me)||!("constructor"in je)||typeof yi=="function"&&yi instanceof yi&&typeof vi=="function"&&vi instanceof vi||(gi=!1)}return Xe.delete(Me),Xe.delete(je),gi}(Re,V,re,he,pe,De))}(W,ie,ue,we,Mr,Ue))}function Br(W,ie,ue,we,Ue,Re){var V=1&ue,re=W.length,he=ie.length;if(re!=he&&!(V&&he>re))return!1;var pe=Re.get(W);if(pe&&Re.get(ie))return pe==ie;var De=-1,Ve=!0,We=2&ue?new gr:void 0;for(Re.set(W,ie),Re.set(ie,W);++De<re;){var Be=W[De],tt=ie[De];if(we)var Ge=V?we(tt,Be,De,ie,W,Re):we(Be,tt,De,W,ie,Re);if(Ge!==void 0){if(Ge)continue;Ve=!1;break}if(We){if(!M(ie,function(en,En){if(qn=En,!We.has(qn)&&(Be===en||Ue(Be,en,ue,we,Re)))return We.push(En);var qn})){Ve=!1;break}}else if(Be!==tt&&!Ue(Be,tt,ue,we,Re)){Ve=!1;break}}return Re.delete(W),Re.delete(ie),Ve}function Yt(W){return function(ie,ue,we){var Ue=ue(ie);return _n(ie)?Ue:function(Re,V){for(var re=-1,he=V.length,pe=Re.length;++re<he;)Re[pe+re]=V[re];return Re}(Ue,we(ie))}(W,di,Mn)}function bt(W,ie){var ue,we,Ue=W.__data__;return((we=typeof(ue=ie))=="string"||we=="number"||we=="symbol"||we=="boolean"?ue!=="__proto__":ue===null)?Ue[typeof ie=="string"?"string":"hash"]:Ue.map}function Ot(W,ie){var ue=function(we,Ue){return we==null?void 0:we[Ue]}(W,ie);return function(we){return!(!hi(we)||function(Ue){return!!Oe&&Oe in Ue}(we))&&(qr(we)?Fe:E).test(Bt(we))}(ue)?ue:void 0}Lt.prototype.clear=function(){this.__data__=Qn?Qn(null):{},this.size=0},Lt.prototype.delete=function(W){var ie=this.has(W)&&delete this.__data__[W];return this.size-=ie?1:0,ie},Lt.prototype.get=function(W){var ie=this.__data__;if(Qn){var ue=ie[W];return ue===g?void 0:ue}return ge.call(ie,W)?ie[W]:void 0},Lt.prototype.has=function(W){var ie=this.__data__;return Qn?ie[W]!==void 0:ge.call(ie,W)},Lt.prototype.set=function(W,ie){var ue=this.__data__;return this.size+=this.has(W)?0:1,ue[W]=Qn&&ie===void 0?g:ie,this},_t.prototype.clear=function(){this.__data__=[],this.size=0},_t.prototype.delete=function(W){var ie=this.__data__,ue=pr(ie,W);return!(ue<0||(ue==ie.length-1?ie.pop():se.call(ie,ue,1),--this.size,0))},_t.prototype.get=function(W){var ie=this.__data__,ue=pr(ie,W);return ue<0?void 0:ie[ue][1]},_t.prototype.has=function(W){return pr(this.__data__,W)>-1},_t.prototype.set=function(W,ie){var ue=this.__data__,we=pr(ue,W);return we<0?(++this.size,ue.push([W,ie])):ue[we][1]=ie,this},Et.prototype.clear=function(){this.size=0,this.__data__={hash:new Lt,map:new(Ee||_t),string:new Lt}},Et.prototype.delete=function(W){var ie=bt(this,W).delete(W);return this.size-=ie?1:0,ie},Et.prototype.get=function(W){return bt(this,W).get(W)},Et.prototype.has=function(W){return bt(this,W).has(W)},Et.prototype.set=function(W,ie){var ue=bt(this,W),we=ue.size;return ue.set(W,ie),this.size+=ue.size==we?0:1,this},gr.prototype.add=gr.prototype.push=function(W){return this.__data__.set(W,g),this},gr.prototype.has=function(W){return this.__data__.has(W)},Gt.prototype.clear=function(){this.__data__=new _t,this.size=0},Gt.prototype.delete=function(W){var ie=this.__data__,ue=ie.delete(W);return this.size=ie.size,ue},Gt.prototype.get=function(W){return this.__data__.get(W)},Gt.prototype.has=function(W){return this.__data__.has(W)},Gt.prototype.set=function(W,ie){var ue=this.__data__;if(ue instanceof _t){var we=ue.__data__;if(!Ee||we.length<199)return we.push([W,ie]),this.size=++ue.size,this;ue=this.__data__=new Et(we)}return ue.set(W,ie),this.size=ue.size,this};var Mn=de?function(W){return W==null?[]:(W=Object(W),function(ie,ue){for(var we=-1,Ue=ie==null?0:ie.length,Re=0,V=[];++we<Ue;){var re=ie[we];he=re,ae.call(W,he)&&(V[Re++]=re)}var he;return V}(de(W)))}:function(){return[]},Mt=tr;function mr(W,ie){return!!(ie=ie??v)&&(typeof W=="number"||x.test(W))&&W>-1&&W%1==0&&W<ie}function Bt(W){if(W!=null){try{return fe.call(W)}catch{}try{return W+""}catch{}}return""}function yr(W,ie){return W===ie||W!=W&&ie!=ie}(Le&&Mt(new Le(new ArrayBuffer(1)))!=O||Ee&&Mt(new Ee)!=m||Ze&&Mt(Ze.resolve())!=c||ke&&Mt(new ke)!=T||vt&&Mt(new vt)!=k)&&(Mt=function(W){var ie=tr(W),ue=ie==p?W.constructor:void 0,we=ue?Bt(ue):"";if(we)switch(we){case Yi:return O;case ui:return m;case Zi:return c;case Xi:return T;case Lr:return k}return ie});var fi=ci(function(){return arguments}())?ci:function(W){return Bn(W)&&ge.call(W,"callee")&&!ae.call(W,"callee")},_n=Array.isArray,Zt=be||function(){return!1};function qr(W){if(!hi(W))return!1;var ie=tr(W);return ie==w||ie=="[object GeneratorFunction]"||ie=="[object AsyncFunction]"||ie=="[object Proxy]"}function Xt(W){return typeof W=="number"&&W>-1&&W%1==0&&W<=v}function hi(W){var ie=typeof W;return W!=null&&(ie=="object"||ie=="function")}function Bn(W){return W!=null&&typeof W=="object"}var Qt=B?function(W){return function(ie){return W(ie)}}(B):function(W){return Bn(W)&&Xt(W.length)&&!!N[tr(W)]};function di(W){return(ie=W)!=null&&Xt(ie.length)&&!qr(ie)?function(ue,we){var Ue=_n(ue),Re=!Ue&&fi(ue),V=!Ue&&!Re&&Zt(ue),re=!Ue&&!Re&&!V&&Qt(ue),he=Ue||Re||V||re,pe=he?function(We,Be){for(var tt=-1,Ge=Array(We);++tt<We;)Ge[tt]=Be(tt);return Ge}(ue.length,String):[],De=pe.length;for(var Ve in ue)!ge.call(ue,Ve)||he&&(Ve=="length"||V&&(Ve=="offset"||Ve=="parent")||re&&(Ve=="buffer"||Ve=="byteLength"||Ve=="byteOffset")||mr(Ve,De))||pe.push(Ve);return pe}(W):function(ue){if(Ue=(we=ue)&&we.constructor,we!==(typeof Ue=="function"&&Ue.prototype||ne))return Pe(ue);var we,Ue,Re=[];for(var V in Object(ue))ge.call(ue,V)&&V!="constructor"&&Re.push(V);return Re}(W);var ie}s.exports=function(W,ie){return Mr(W,ie)}},210:function(s,u,f){var g=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(u,"__esModule",{value:!0});var v,h=g(f(465)),l=g(f(307));(function(a){a.compose=function(y,b,w){y===void 0&&(y={}),b===void 0&&(b={}),typeof y!="object"&&(y={}),typeof b!="object"&&(b={});var m=h.default(b);for(var d in w||(m=Object.keys(m).reduce(function(p,c){return m[c]!=null&&(p[c]=m[c]),p},{})),y)y[d]!==void 0&&b[d]===void 0&&(m[d]=y[d]);return Object.keys(m).length>0?m:void 0},a.diff=function(y,b){y===void 0&&(y={}),b===void 0&&(b={}),typeof y!="object"&&(y={}),typeof b!="object"&&(b={});var w=Object.keys(y).concat(Object.keys(b)).reduce(function(m,d){return l.default(y[d],b[d])||(m[d]=b[d]===void 0?null:b[d]),m},{});return Object.keys(w).length>0?w:void 0},a.invert=function(y,b){y===void 0&&(y={}),b===void 0&&(b={}),y=y||{};var w=Object.keys(b).reduce(function(m,d){return b[d]!==y[d]&&y[d]!==void 0&&(m[d]=b[d]),m},{});return Object.keys(y).reduce(function(m,d){return y[d]!==b[d]&&b[d]===void 0&&(m[d]=null),m},w)},a.transform=function(y,b,w){if(w===void 0&&(w=!1),typeof y!="object")return b;if(typeof b=="object"){if(!w)return b;var m=Object.keys(b).reduce(function(d,p){return y[p]===void 0&&(d[p]=b[p]),d},{});return Object.keys(m).length>0?m:void 0}}})(v||(v={})),u.default=v},895:function(s,u,f){var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}},v=g(f(529)),h=g(f(465)),l=g(f(307)),a=g(f(210)),y=g(f(430)),b="\0",w=function(){function m(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]}return m.prototype.insert=function(d,p){var c={};return typeof d=="string"&&d.length===0?this:(c.insert=d,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(c.attributes=p),this.push(c))},m.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},m.prototype.retain=function(d,p){if(d<=0)return this;var c={retain:d};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(c.attributes=p),this.push(c)},m.prototype.push=function(d){var p=this.ops.length,c=this.ops[p-1];if(d=h.default(d),typeof c=="object"){if(typeof d.delete=="number"&&typeof c.delete=="number")return this.ops[p-1]={delete:c.delete+d.delete},this;if(typeof c.delete=="number"&&d.insert!=null&&(p-=1,typeof(c=this.ops[p-1])!="object"))return this.ops.unshift(d),this;if(l.default(d.attributes,c.attributes)){if(typeof d.insert=="string"&&typeof c.insert=="string")return this.ops[p-1]={insert:c.insert+d.insert},typeof d.attributes=="object"&&(this.ops[p-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof c.retain=="number")return this.ops[p-1]={retain:c.retain+d.retain},typeof d.attributes=="object"&&(this.ops[p-1].attributes=d.attributes),this}}return p===this.ops.length?this.ops.push(d):this.ops.splice(p,0,d),this},m.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},m.prototype.filter=function(d){return this.ops.filter(d)},m.prototype.forEach=function(d){this.ops.forEach(d)},m.prototype.map=function(d){return this.ops.map(d)},m.prototype.partition=function(d){var p=[],c=[];return this.forEach(function(A){(d(A)?p:c).push(A)}),[p,c]},m.prototype.reduce=function(d,p){return this.ops.reduce(d,p)},m.prototype.changeLength=function(){return this.reduce(function(d,p){return p.insert?d+y.default.length(p):p.delete?d-p.delete:d},0)},m.prototype.length=function(){return this.reduce(function(d,p){return d+y.default.length(p)},0)},m.prototype.slice=function(d,p){d===void 0&&(d=0),p===void 0&&(p=1/0);for(var c=[],A=y.default.iterator(this.ops),T=0;T<p&&A.hasNext();){var _=void 0;T<d?_=A.next(d-T):(_=A.next(p-T),c.push(_)),T+=y.default.length(_)}return new m(c)},m.prototype.compose=function(d){var p=y.default.iterator(this.ops),c=y.default.iterator(d.ops),A=[],T=c.peek();if(T!=null&&typeof T.retain=="number"&&T.attributes==null){for(var _=T.retain;p.peekType()==="insert"&&p.peekLength()<=_;)_-=p.peekLength(),A.push(p.next());T.retain-_>0&&c.next(T.retain-_)}for(var k=new m(A);p.hasNext()||c.hasNext();)if(c.peekType()==="insert")k.push(c.next());else if(p.peekType()==="delete")k.push(p.next());else{var P=Math.min(p.peekLength(),c.peekLength()),O=p.next(P),E=c.next(P);if(typeof E.retain=="number"){var x={};typeof O.retain=="number"?x.retain=P:x.insert=O.insert;var N=a.default.compose(O.attributes,E.attributes,typeof O.retain=="number");if(N&&(x.attributes=N),k.push(x),!c.hasNext()&&l.default(k.ops[k.ops.length-1],x)){var I=new m(p.rest());return k.concat(I).chop()}}else typeof E.delete=="number"&&typeof O.retain=="number"&&k.push(E)}return k.chop()},m.prototype.concat=function(d){var p=new m(this.ops.slice());return d.ops.length>0&&(p.push(d.ops[0]),p.ops=p.ops.concat(d.ops.slice(1))),p},m.prototype.diff=function(d,p){if(this.ops===d.ops)return new m;var c=[this,d].map(function(P){return P.map(function(O){if(O.insert!=null)return typeof O.insert=="string"?O.insert:b;throw new Error("diff() called "+(P===d?"on":"with")+" non-document")}).join("")}),A=new m,T=v.default(c[0],c[1],p),_=y.default.iterator(this.ops),k=y.default.iterator(d.ops);return T.forEach(function(P){for(var O=P[1].length;O>0;){var E=0;switch(P[0]){case v.default.INSERT:E=Math.min(k.peekLength(),O),A.push(k.next(E));break;case v.default.DELETE:E=Math.min(O,_.peekLength()),_.next(E),A.delete(E);break;case v.default.EQUAL:E=Math.min(_.peekLength(),k.peekLength(),O);var x=_.next(E),N=k.next(E);l.default(x.insert,N.insert)?A.retain(E,a.default.diff(x.attributes,N.attributes)):A.push(N).delete(E)}O-=E}}),A.chop()},m.prototype.eachLine=function(d,p){p===void 0&&(p=`
`);for(var c=y.default.iterator(this.ops),A=new m,T=0;c.hasNext();){if(c.peekType()!=="insert")return;var _=c.peek(),k=y.default.length(_)-c.peekLength(),P=typeof _.insert=="string"?_.insert.indexOf(p,k)-k:-1;if(P<0)A.push(c.next());else if(P>0)A.push(c.next(P));else{if(d(A,c.next(1).attributes||{},T)===!1)return;T+=1,A=new m}}A.length()>0&&d(A,{},T)},m.prototype.invert=function(d){var p=new m;return this.reduce(function(c,A){if(A.insert)p.delete(y.default.length(A));else{if(A.retain&&A.attributes==null)return p.retain(A.retain),c+A.retain;if(A.delete||A.retain&&A.attributes){var T=A.delete||A.retain;return d.slice(c,c+T).forEach(function(_){A.delete?p.push(_):A.retain&&A.attributes&&p.retain(y.default.length(_),a.default.invert(A.attributes,_.attributes))}),c+T}}return c},0),p.chop()},m.prototype.transform=function(d,p){if(p===void 0&&(p=!1),p=!!p,typeof d=="number")return this.transformPosition(d,p);for(var c=d,A=y.default.iterator(this.ops),T=y.default.iterator(c.ops),_=new m;A.hasNext()||T.hasNext();)if(A.peekType()!=="insert"||!p&&T.peekType()==="insert")if(T.peekType()==="insert")_.push(T.next());else{var k=Math.min(A.peekLength(),T.peekLength()),P=A.next(k),O=T.next(k);if(P.delete)continue;O.delete?_.push(O):_.retain(k,a.default.transform(P.attributes,O.attributes,p))}else _.retain(y.default.length(A.next()));return _.chop()},m.prototype.transformPosition=function(d,p){p===void 0&&(p=!1),p=!!p;for(var c=y.default.iterator(this.ops),A=0;c.hasNext()&&A<=d;){var T=c.peekLength(),_=c.peekType();c.next(),_!=="delete"?(_==="insert"&&(A<d||!p)&&(d+=T),A+=T):d-=Math.min(T,d-A)}return d},m.Op=y.default,m.AttributeMap=a.default,m}();s.exports=w},977:function(s,u,f){var g=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(u,"__esModule",{value:!0});var v=g(f(430)),h=function(){function l(a){this.ops=a,this.index=0,this.offset=0}return l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(a){a||(a=1/0);var y=this.ops[this.index];if(y){var b=this.offset,w=v.default.length(y);if(a>=w-b?(a=w-b,this.index+=1,this.offset=0):this.offset+=a,typeof y.delete=="number")return{delete:a};var m={};return y.attributes&&(m.attributes=y.attributes),typeof y.retain=="number"?m.retain=a:typeof y.insert=="string"?m.insert=y.insert.substr(b,a):m.insert=y.insert,m}return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?v.default.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var a=this.offset,y=this.index,b=this.next(),w=this.ops.slice(this.index);return this.offset=a,this.index=y,[b].concat(w)}return[]},l}();u.default=h},430:function(s,u,f){var g=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(u,"__esModule",{value:!0});var v,h=g(f(977));(function(l){l.iterator=function(a){return new h.default(a)},l.length=function(a){return typeof a.delete=="number"?a.delete:typeof a.retain=="number"?a.retain:typeof a.insert=="string"?a.insert.length:1}})(v||(v={})),u.default=v},165:function(s,u,f){var g,v;(v=typeof(g=function(){var h,l={};function a(w,m,d){var p=w.getClientRects();if(p.length===2){var c=w.getBoundingClientRect();return p[m][d]<c[d]}return!1}function y(w){if(!w||screen.deviceXDPI===screen.logicalXDPI)return w;if("length"in w)return Array.prototype.map.call(w,y);var m=screen.deviceXDPI/screen.logicalXDPI;return{top:w.top/m,bottom:w.bottom/m,left:w.left/m,right:w.right/m,width:w.width/m,height:w.height/m}}function b(w,m){var d,p=0,c=1024;if(c>=m.length)return Array.prototype.push.apply(w,m);for(;p<m.length;)d=Array.prototype.push.apply(w,Array.prototype.slice.call(m,p,p+c)),p+=c;return d}return l.isBroken=function(){if(h===void 0){var w=document.createElement("p"),m=document.createElement("span"),d=document.createTextNode("aa"),p=document.createTextNode("aa"),c=document.createElement("img");c.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");var A=document.createRange();if(h={},w.appendChild(d),w.appendChild(m),m.appendChild(c),m.appendChild(p),document.body.appendChild(w),A.setStart(d,1),A.setEnd(m,0),h.getClientRects=h.getBoundingClientRect=A.getClientRects().length>1,h.getClientRects||(A.setEnd(p,1),h.getClientRects=h.getBoundingClientRect=A.getClientRects().length===2),!h.getBoundingClientRect){A.setEnd(A.startContainer,A.startOffset);var T=A.getBoundingClientRect();h.getBoundingClientRect=T.top===0&&T.left===0}if(document.body.removeChild(w),!h.getBoundingClientRect){var _=document.createElement("p");_.style.width="0px",_.style.fontSize="20px",_.style.whiteSpace="normal",_.style.wordBreak="normal";var k=document.createTextNode("m mm");_.appendChild(k),document.body.appendChild(_),A.setStart(k,1),A.setEnd(k,2),a(A,1,"left")?h.getBoundingClientRect=!0:(A.setStart(k,1),A.setEnd(k,3),a(A,0,"top")&&(h.getBoundingClientRect=!0)),document.body.removeChild(_)}var P=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")();h.ieZoom=!!P&&P<=10}return h},l.getClientRects=function(w){var m=this.isBroken();if(m.ieZoom)return y(w.getClientRects());if(!m.getClientRects)return w.getClientRects();var d=[],p=[],c=w.endContainer,A=w.endOffset,T=document.createRange();function _(k){for(var P=0;k=k.previousSibling;)P++;return P}for(;c!==w.commonAncestorContainer;)T.setStart(c,0),T.setEnd(c,A),b(p,T.getClientRects()),A=_(c),c=c.parentNode;return(T=w.cloneRange()).setEnd(c,A),b(d,T.getClientRects()),b(d,p),d},l.getBoundingClientRect=function(w){var m=this.getClientRects(w);if(m.length===0)return null;var d,p=w.getBoundingClientRect(),c=this.isBroken();if(c.ieZoom)return y(p);if(!c.getBoundingClientRect)return p;if(p.width===0&&p.height===0)return m[0];for(var A=0,T=m.length;A<T;A++){var _=m[A];d?(d.left=Math.min(d.left,_.left),d.top=Math.min(d.top,_.top),d.right=Math.max(d.right,_.right),d.bottom=Math.max(d.bottom,_.bottom)):d={left:_.left,top:_.top,right:_.right,bottom:_.bottom}}return d&&(d.width=d.right-d.left,d.height=d.bottom-d.top),d},l})=="function"?g.call(u,f,u,s):g)===void 0||(s.exports=v)},33:(s,u,f)=>{f.r(u),f.d(u,{default:()=>N});var g=function(){if(typeof Map<"u")return Map;function I(L,F){var U=-1;return L.some(function(G,z){return G[0]===F&&(U=z,!0)}),U}return function(){function L(){this.__entries__=[]}return Object.defineProperty(L.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),L.prototype.get=function(F){var U=I(this.__entries__,F),G=this.__entries__[U];return G&&G[1]},L.prototype.set=function(F,U){var G=I(this.__entries__,F);~G?this.__entries__[G][1]=U:this.__entries__.push([F,U])},L.prototype.delete=function(F){var U=this.__entries__,G=I(U,F);~G&&U.splice(G,1)},L.prototype.has=function(F){return!!~I(this.__entries__,F)},L.prototype.clear=function(){this.__entries__.splice(0)},L.prototype.forEach=function(F,U){U===void 0&&(U=null);for(var G=0,z=this.__entries__;G<z.length;G++){var j=z[G];F.call(U,j[1],j[0])}},L}()}(),v=typeof window<"u"&&typeof document<"u"&&window.document===document,h=f.g!==void 0&&f.g.Math===Math?f.g:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")(),l=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(h):function(I){return setTimeout(function(){return I(Date.now())},1e3/60)},a=["top","right","bottom","left","width","height","size","weight"],y=typeof MutationObserver<"u",b=function(){function I(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(L,F){var U=!1,G=!1,z=0;function j(){U&&(U=!1,L()),G&&B()}function R(){l(j)}function B(){var M=Date.now();if(U){if(M-z<2)return;G=!0}else U=!0,G=!1,setTimeout(R,20);z=M}return B}(this.refresh.bind(this))}return I.prototype.addObserver=function(L){~this.observers_.indexOf(L)||this.observers_.push(L),this.connected_||this.connect_()},I.prototype.removeObserver=function(L){var F=this.observers_,U=F.indexOf(L);~U&&F.splice(U,1),!F.length&&this.connected_&&this.disconnect_()},I.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},I.prototype.updateObservers_=function(){var L=this.observers_.filter(function(F){return F.gatherActive(),F.hasActive()});return L.forEach(function(F){return F.broadcastActive()}),L.length>0},I.prototype.connect_=function(){v&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),y?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},I.prototype.disconnect_=function(){v&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},I.prototype.onTransitionEnd_=function(L){var F=L.propertyName,U=F===void 0?"":F;a.some(function(G){return!!~U.indexOf(G)})&&this.refresh()},I.getInstance=function(){return this.instance_||(this.instance_=new I),this.instance_},I.instance_=null,I}(),w=function(I,L){for(var F=0,U=Object.keys(L);F<U.length;F++){var G=U[F];Object.defineProperty(I,G,{value:L[G],enumerable:!1,writable:!1,configurable:!0})}return I},m=function(I){return I&&I.ownerDocument&&I.ownerDocument.defaultView||h},d=_(0,0,0,0);function p(I){return parseFloat(I)||0}function c(I){for(var L=[],F=1;F<arguments.length;F++)L[F-1]=arguments[F];return L.reduce(function(U,G){return U+p(I["border-"+G+"-width"])},0)}var A=typeof SVGGraphicsElement<"u"?function(I){return I instanceof m(I).SVGGraphicsElement}:function(I){return I instanceof m(I).SVGElement&&typeof I.getBBox=="function"};function T(I){return v?A(I)?function(L){var F=L.getBBox();return _(0,0,F.width,F.height)}(I):function(L){var F=L.clientWidth,U=L.clientHeight;if(!F&&!U)return d;var G=m(L).getComputedStyle(L),z=function(S){for(var D={},q=0,$=["top","right","bottom","left"];q<$.length;q++){var H=$[q],ne=S["padding-"+H];D[H]=p(ne)}return D}(G),j=z.left+z.right,R=z.top+z.bottom,B=p(G.width),M=p(G.height);if(G.boxSizing==="border-box"&&(Math.round(B+j)!==F&&(B-=c(G,"left","right")+j),Math.round(M+R)!==U&&(M-=c(G,"top","bottom")+R)),!function(S){return S===m(S).document.documentElement}(L)){var K=Math.round(B+j)-F,C=Math.round(M+R)-U;Math.abs(K)!==1&&(B-=K),Math.abs(C)!==1&&(M-=C)}return _(z.left,z.top,B,M)}(I):d}function _(I,L,F,U){return{x:I,y:L,width:F,height:U}}var k=function(){function I(L){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=_(0,0,0,0),this.target=L}return I.prototype.isActive=function(){var L=T(this.target);return this.contentRect_=L,L.width!==this.broadcastWidth||L.height!==this.broadcastHeight},I.prototype.broadcastRect=function(){var L=this.contentRect_;return this.broadcastWidth=L.width,this.broadcastHeight=L.height,L},I}(),P=function(I,L){var F,U,G,z,j,R,B,M=(U=(F=L).x,G=F.y,z=F.width,j=F.height,R=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,B=Object.create(R.prototype),w(B,{x:U,y:G,width:z,height:j,top:G,right:U+z,bottom:j+G,left:U}),B);w(this,{target:I,contentRect:M})},O=function(){function I(L,F,U){if(this.activeObservations_=[],this.observations_=new g,typeof L!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=L,this.controller_=F,this.callbackCtx_=U}return I.prototype.observe=function(L){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(L instanceof m(L).Element))throw new TypeError('parameter 1 is not of type "Element".');var F=this.observations_;F.has(L)||(F.set(L,new k(L)),this.controller_.addObserver(this),this.controller_.refresh())}},I.prototype.unobserve=function(L){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(L instanceof m(L).Element))throw new TypeError('parameter 1 is not of type "Element".');var F=this.observations_;F.has(L)&&(F.delete(L),F.size||this.controller_.removeObserver(this))}},I.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},I.prototype.gatherActive=function(){var L=this;this.clearActive(),this.observations_.forEach(function(F){F.isActive()&&L.activeObservations_.push(F)})},I.prototype.broadcastActive=function(){if(this.hasActive()){var L=this.callbackCtx_,F=this.activeObservations_.map(function(U){return new P(U.target,U.broadcastRect())});this.callback_.call(L,F,L),this.clearActive()}},I.prototype.clearActive=function(){this.activeObservations_.splice(0)},I.prototype.hasActive=function(){return this.activeObservations_.length>0},I}(),E=typeof WeakMap<"u"?new WeakMap:new g,x=function I(L){if(!(this instanceof I))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var F=b.getInstance(),U=new O(L,F,this);E.set(this,U)};["observe","unobserve","disconnect"].forEach(function(I){x.prototype[I]=function(){var L;return(L=E.get(this))[I].apply(L,arguments)}});const N=h.ResizeObserver!==void 0?h.ResizeObserver:x},413:(s,u,f)=>{f.r(u),f.d(u,{default:()=>_});var g=f(379),v=f.n(g),h=f(795),l=f.n(h),a=f(569),y=f.n(a),b=f(565),w=f.n(b),m=f(216),d=f.n(m),p=f(589),c=f.n(p),A=f(582),T={};T.styleTagTransform=c(),T.setAttributes=w(),T.insert=y().bind(null,"head"),T.domAPI=l(),T.insertStyleElement=d(),v()(A.Z,T);const _=A.Z&&A.Z.locals?A.Z.locals:void 0},379:s=>{var u=[];function f(h){for(var l=-1,a=0;a<u.length;a++)if(u[a].identifier===h){l=a;break}return l}function g(h,l){for(var a={},y=[],b=0;b<h.length;b++){var w=h[b],m=l.base?w[0]+l.base:w[0],d=a[m]||0,p="".concat(m," ").concat(d);a[m]=d+1;var c=f(p),A={css:w[1],media:w[2],sourceMap:w[3],supports:w[4],layer:w[5]};if(c!==-1)u[c].references++,u[c].updater(A);else{var T=v(A,l);l.byIndex=b,u.splice(b,0,{identifier:p,updater:T,references:1})}y.push(p)}return y}function v(h,l){var a=l.domAPI(l);return a.update(h),function(y){if(y){if(y.css===h.css&&y.media===h.media&&y.sourceMap===h.sourceMap&&y.supports===h.supports&&y.layer===h.layer)return;a.update(h=y)}else a.remove()}}s.exports=function(h,l){var a=g(h=h||[],l=l||{});return function(y){y=y||[];for(var b=0;b<a.length;b++){var w=f(a[b]);u[w].references--}for(var m=g(y,l),d=0;d<a.length;d++){var p=f(a[d]);u[p].references===0&&(u[p].updater(),u.splice(p,1))}a=m}}},569:s=>{var u={};s.exports=function(f,g){var v=function(h){if(u[h]===void 0){var l=document.querySelector(h);if(window.HTMLIFrameElement&&l instanceof window.HTMLIFrameElement)try{l=l.contentDocument.head}catch{l=null}u[h]=l}return u[h]}(f);if(!v)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");v.appendChild(g)}},216:s=>{s.exports=function(u){var f=document.createElement("style");return u.setAttributes(f,u.attributes),u.insert(f,u.options),f}},565:(s,u,f)=>{s.exports=function(g){var v=f.nc;v&&g.setAttribute("nonce",v)}},795:s=>{s.exports=function(u){var f=u.insertStyleElement(u);return{update:function(g){(function(v,h,l){var a="";l.supports&&(a+="@supports (".concat(l.supports,") {")),l.media&&(a+="@media ".concat(l.media," {"));var y=l.layer!==void 0;y&&(a+="@layer".concat(l.layer.length>0?" ".concat(l.layer):""," {")),a+=l.css,y&&(a+="}"),l.media&&(a+="}"),l.supports&&(a+="}");var b=l.sourceMap;b&&typeof btoa<"u"&&(a+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(b))))," */")),h.styleTagTransform(a,v,h.options)})(f,u,g)},remove:function(){(function(g){if(g.parentNode===null)return!1;g.parentNode.removeChild(g)})(f)}}}},589:s=>{s.exports=function(u,f){if(f.styleSheet)f.styleSheet.cssText=u;else{for(;f.firstChild;)f.removeChild(f.firstChild);f.appendChild(document.createTextNode(u))}}},607:function(s,u,f){var g=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(u,"__esModule",{value:!0}),u.Cursor=u.default=void 0;var v=g(f(678));u.default=v.default;var h=g(f(353));u.Cursor=h.default,f(413)},353:(s,u,f)=>{Object.defineProperty(u,"__esModule",{value:!0});var g=f(207),v=function(){function h(l,a,y){this.id=l,this.name=a,this.color=y,this.toggleNearCursor=this.toggleNearCursor.bind(this),this._toggleOpenedCursor=this._toggleOpenedCursor.bind(this),this._setHoverState=this._setHoverState.bind(this)}return h.prototype.build=function(l){var a=document.createElement(h.CONTAINER_ELEMENT_TAG);a.classList.add(h.CURSOR_CLASS),a.id="ql-cursor-".concat(this.id),a.innerHTML=l.template;var y=a.getElementsByClassName(h.SELECTION_CLASS)[0],b=a.getElementsByClassName(h.CARET_CONTAINER_CLASS)[0],w=b.getElementsByClassName(h.CARET_CLASS)[0],m=a.getElementsByClassName(h.FLAG_CLASS)[0];return m.style.backgroundColor=this.color,w.style.backgroundColor=this.color,a.getElementsByClassName(h.NAME_CLASS)[0].textContent=this.name,this._hideDelay="".concat(l.hideDelayMs,"ms"),this._hideSpeedMs=l.hideSpeedMs,this._positionFlag=l.positionFlag,m.style.transitionDelay=this._hideDelay,m.style.transitionDuration="".concat(this._hideSpeedMs,"ms"),this._el=a,this._selectionEl=y,this._caretEl=b,this._flagEl=m,b.addEventListener("mouseover",this._setHoverState,{passive:!0}),this._el},h.prototype.show=function(){this._el.classList.remove(h.HIDDEN_CLASS)},h.prototype.hide=function(){this._el.classList.add(h.HIDDEN_CLASS)},h.prototype.remove=function(){this._el.parentNode.removeChild(this._el)},h.prototype.toggleNearCursor=function(l,a){var y=this._getCoordinates(),b=y.left,w=y.right,m=y.top,d=y.bottom,p=l>=b&&l<=w&&a>=m&&a<=d;return this._caretEl.classList.toggle(h.CONTAINER_HOVER_CLASS,p),p},h.prototype.toggleFlag=function(l){var a=this;this._caretEl.classList.toggle(h.CONTAINER_HOVER_CLASS,l)||(this._flagEl.classList.add(h.NO_DELAY_CLASS),setTimeout(function(){return a._flagEl.classList.remove(h.NO_DELAY_CLASS)},this._hideSpeedMs))},h.prototype.updateCaret=function(l,a){this._caretEl.style.top="".concat(l.top,"px"),this._caretEl.style.left="".concat(l.left,"px"),this._caretEl.style.height="".concat(l.height,"px"),this._positionFlag?this._positionFlag(this._flagEl,l,a):this._updateCaretFlag(l,a)},h.prototype.updateSelection=function(l,a){var y=this;this._clearSelection(),l=l||[],l=Array.from(l),l=this._sanitize(l),(l=this._sortByDomPosition(l)).forEach(function(b){return y._addSelection(b,a)})},h.prototype._setHoverState=function(){document.addEventListener("mousemove",this._toggleOpenedCursor,{passive:!0})},h.prototype._toggleOpenedCursor=function(l){var a=this.toggleNearCursor(l.clientX,l.clientY);this._caretEl.classList.toggle(h.CONTAINER_NO_POINTER_CLASS,a),a||document.removeEventListener("mousemove",this._toggleOpenedCursor)},h.prototype._getCoordinates=function(){return this._caretEl.getBoundingClientRect()},h.prototype._updateCaretFlag=function(l,a){this._flagEl.style.width="";var y=this._flagEl.getBoundingClientRect();this._flagEl.classList.remove(h.FLAG_FLIPPED_CLASS),l.left>a.width-y.width&&this._flagEl.classList.add(h.FLAG_FLIPPED_CLASS),this._flagEl.style.left="".concat(l.left,"px"),this._flagEl.style.top="".concat(l.top,"px"),this._flagEl.style.width="".concat(Math.ceil(y.width),"px")},h.prototype._clearSelection=function(){this._selectionEl.innerHTML=""},h.prototype._addSelection=function(l,a){var y=this._selectionBlock(l,a);this._selectionEl.appendChild(y)},h.prototype._selectionBlock=function(l,a){var y=document.createElement(h.SELECTION_ELEMENT_TAG);return y.classList.add(h.SELECTION_BLOCK_CLASS),y.style.top="".concat(l.top-a.top,"px"),y.style.left="".concat(l.left-a.left,"px"),y.style.width="".concat(l.width,"px"),y.style.height="".concat(l.height,"px"),y.style.backgroundColor=g(this.color).setAlpha(.3).toString(),y},h.prototype._sortByDomPosition=function(l){return l.sort(function(a,y){return a.top===y.top?a.left-y.left:a.top-y.top})},h.prototype._sanitize=function(l){var a=this,y=new Set;return l.filter(function(b){if(!b.width||!b.height)return!1;var w=a._serialize(b);return!y.has(w)&&(y.add(w),!0)})},h.prototype._serialize=function(l){return["top:".concat(l.top),"right:".concat(l.right),"bottom:".concat(l.bottom),"left:".concat(l.left)].join(";")},h.CONTAINER_ELEMENT_TAG="SPAN",h.SELECTION_ELEMENT_TAG="SPAN",h.CURSOR_CLASS="ql-cursor",h.SELECTION_CLASS="ql-cursor-selections",h.SELECTION_BLOCK_CLASS="ql-cursor-selection-block",h.CARET_CLASS="ql-cursor-caret",h.CARET_CONTAINER_CLASS="ql-cursor-caret-container",h.CONTAINER_HOVER_CLASS="hover",h.CONTAINER_NO_POINTER_CLASS="no-pointer",h.FLAG_CLASS="ql-cursor-flag",h.FLAG_FLIPPED_CLASS="flag-flipped",h.NAME_CLASS="ql-cursor-name",h.HIDDEN_CLASS="hidden",h.NO_DELAY_CLASS="no-delay",h}();u.default=v},678:function(s,u,f){var g=this&&this.__createBinding||(Object.create?function(p,c,A,T){T===void 0&&(T=A);var _=Object.getOwnPropertyDescriptor(c,A);_&&!("get"in _?!c.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return c[A]}}),Object.defineProperty(p,T,_)}:function(p,c,A,T){T===void 0&&(T=A),p[T]=c[A]}),v=this&&this.__setModuleDefault||(Object.create?function(p,c){Object.defineProperty(p,"default",{enumerable:!0,value:c})}:function(p,c){p.default=c}),h=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var c={};if(p!=null)for(var A in p)A!=="default"&&Object.prototype.hasOwnProperty.call(p,A)&&g(c,p,A);return v(c,p),c},l=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(u,"__esModule",{value:!0});var a=l(f(353)),y=h(f(165)),b=l(f(338)),w=l(f(33)),m=f(895),d=function(){function p(c,A){A===void 0&&(A={}),this._cursors={},this._isObserving=!1,this._handleCursorTouch=this._handleCursorTouch.bind(this),this.quill=c,this.options=this._setDefaults(A),this._container=this.quill.addContainer(this.options.containerClass),this._boundsContainer=this.options.boundsContainer||this.quill.container,this._currentSelection=this.quill.getSelection(),this._registerSelectionChangeListeners(),this._registerTextChangeListener(),this._registerDomListeners()}return p.prototype.createCursor=function(c,A,T){var _=this._cursors[c];if(!_){_=new a.default(c,A,T),this._cursors[c]=_;var k=_.build(this.options);this._container.appendChild(k)}return _},p.prototype.moveCursor=function(c,A){var T=this._cursors[c];T&&(T.range=A,this._updateCursor(T))},p.prototype.removeCursor=function(c){var A=this._cursors[c];A&&(A.remove(),delete this._cursors[c])},p.prototype.update=function(){var c=this;this.cursors().forEach(function(A){return c._updateCursor(A)})},p.prototype.clearCursors=function(){var c=this;this.cursors().forEach(function(A){return c.removeCursor(A.id)})},p.prototype.toggleFlag=function(c,A){var T=this._cursors[c];T&&T.toggleFlag(A)},p.prototype.cursors=function(){var c=this;return Object.keys(this._cursors).map(function(A){return c._cursors[A]})},p.prototype._registerSelectionChangeListeners=function(){var c=this;this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(A){c._currentSelection=A})},p.prototype._registerTextChangeListener=function(){var c=this;this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(A){return c._handleTextChange(A)})},p.prototype._registerDomListeners=function(){var c=this,A=this.quill.container.getElementsByClassName("ql-editor")[0];A.addEventListener("scroll",function(){return c.update()},{passive:!0}),A.addEventListener("touchstart",this._handleCursorTouch,{passive:!0})},p.prototype._handleCursorTouch=function(c){var A=this;this.cursors().forEach(function(T){T.toggleNearCursor(c.pageX,c.pageY),setTimeout(function(){return T.toggleFlag(!1)},A.options.hideDelayMs)})},p.prototype._registerResizeObserver=function(){var c=this;if(!this._isObserving){var A=this.quill.container.getElementsByClassName("ql-editor")[0],T=new w.default(function(_){if(!_[0].target.isConnected)return T.disconnect(),void(c._isObserving=!1);c.update()});T.observe(A),this._isObserving=!0}},p.prototype._updateCursor=function(c){if(this._registerResizeObserver(),!c.range)return c.hide();var A=this._indexWithinQuillBounds(c.range.index),T=this._indexWithinQuillBounds(c.range.index+c.range.length),_=this.quill.getLeaf(A),k=this.quill.getLeaf(T);if(!this._leafIsValid(_)||!this._leafIsValid(k))return c.hide();c.show();var P=this._boundsContainer.getBoundingClientRect(),O=this.quill.getBounds(T);c.updateCaret(O,P);var E=this._lineRanges(c,_,k).reduce(function(x,N){return x.concat(Array.from(y.getClientRects(N)))},[]);c.updateSelection(E,P)},p.prototype._indexWithinQuillBounds=function(c){var A=this.quill.getLength(),T=A?A-1:0;return c=Math.max(c,0),Math.min(c,T)},p.prototype._leafIsValid=function(c){return c&&c[0]&&c[0].domNode&&c[1]>=0},p.prototype._handleTextChange=function(c){var A=this;window.setTimeout(function(){A.options.transformOnTextChange&&A._transformCursors(c),A.options.selectionChangeSource&&(A._emitSelection(),A.update())})},p.prototype._emitSelection=function(){this.quill.emitter.emit(this.quill.constructor.events.SELECTION_CHANGE,this.quill.getSelection(),this._currentSelection,this.options.selectionChangeSource)},p.prototype._setDefaults=function(c){return(c=Object.assign({},c)).template||(c.template=p.DEFAULTS.template),c.containerClass||(c.containerClass=p.DEFAULTS.containerClass),c.selectionChangeSource!==null&&(c.selectionChangeSource||(c.selectionChangeSource=p.DEFAULTS.selectionChangeSource)),c.hideDelayMs=Number.isInteger(c.hideDelayMs)?c.hideDelayMs:p.DEFAULTS.hideDelayMs,c.hideSpeedMs=Number.isInteger(c.hideSpeedMs)?c.hideSpeedMs:p.DEFAULTS.hideSpeedMs,c.transformOnTextChange=!!c.transformOnTextChange,c},p.prototype._lineRanges=function(c,A,T){var _=this.quill.getLines(c.range);return _.reduce(function(k,P,O){if(!P.children){var E=document.createRange();return E.selectNode(P.domNode),k.concat(E)}var x=O===0?A:P.path(0).pop(),N=x[0],I=x[1],L=O===_.length-1?T:P.path(P.length()-1).pop(),F=L[0],U=L[1],G=document.createRange();return N.domNode.nodeType===Node.TEXT_NODE?G.setStart(N.domNode,I):G.setStartBefore(N.domNode),F.domNode.nodeType===Node.TEXT_NODE?G.setEnd(F.domNode,U):G.setEndAfter(F.domNode),k.concat(G)},[])},p.prototype._transformCursors=function(c){var A=this;c=new m(c),this.cursors().filter(function(T){return T.range}).forEach(function(T){T.range.index=c.transformPosition(T.range.index),A._updateCursor(T)})},p.DEFAULTS={template:b.default,containerClass:"ql-cursors",selectionChangeSource:"api",hideDelayMs:3e3,hideSpeedMs:400},p}();u.default=d},338:function(s,u,f){var g=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(u,"__esModule",{value:!0});var v=g(f(353)),h=`
  <span class="`.concat(v.default.SELECTION_CLASS,`"></span>
  <span class="`).concat(v.default.CARET_CONTAINER_CLASS,`">
    <span class="`).concat(v.default.CARET_CLASS,`"></span>
  </span>
  <div class="`).concat(v.default.FLAG_CLASS,`">
    <small class="`).concat(v.default.NAME_CLASS,`"></small>
  </div>
`);u.default=h},207:function(s){s.exports=function(){const u=/^\s+/,f=/\s+$/;function g(C,S){if(S=S||{},(C=C||"")instanceof g)return C;if(!(this instanceof g))return new g(C,S);var D=function(q){var $={r:0,g:0,b:0},H=1,ne=null,ce=null,fe=null,ge=!1,Oe=!1;return typeof q=="string"&&(q=function(Y){Y=Y.replace(u,"").replace(f,"").toLowerCase();var Z,ae=!1;if(O[Y])Y=O[Y],ae=!0;else if(Y=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(Z=M.rgb.exec(Y))?{r:Z[1],g:Z[2],b:Z[3]}:(Z=M.rgba.exec(Y))?{r:Z[1],g:Z[2],b:Z[3],a:Z[4]}:(Z=M.hsl.exec(Y))?{h:Z[1],s:Z[2],l:Z[3]}:(Z=M.hsla.exec(Y))?{h:Z[1],s:Z[2],l:Z[3],a:Z[4]}:(Z=M.hsv.exec(Y))?{h:Z[1],s:Z[2],v:Z[3]}:(Z=M.hsva.exec(Y))?{h:Z[1],s:Z[2],v:Z[3],a:Z[4]}:(Z=M.hex8.exec(Y))?{r:L(Z[1]),g:L(Z[2]),b:L(Z[3]),a:z(Z[4]),format:ae?"name":"hex8"}:(Z=M.hex6.exec(Y))?{r:L(Z[1]),g:L(Z[2]),b:L(Z[3]),format:ae?"name":"hex"}:(Z=M.hex4.exec(Y))?{r:L(Z[1]+""+Z[1]),g:L(Z[2]+""+Z[2]),b:L(Z[3]+""+Z[3]),a:z(Z[4]+""+Z[4]),format:ae?"name":"hex8"}:!!(Z=M.hex3.exec(Y))&&{r:L(Z[1]+""+Z[1]),g:L(Z[2]+""+Z[2]),b:L(Z[3]+""+Z[3]),format:ae?"name":"hex"}}(q)),typeof q=="object"&&(K(q.r)&&K(q.g)&&K(q.b)?($e=q.r,Fe=q.g,te=q.b,$={r:255*N($e,255),g:255*N(Fe,255),b:255*N(te,255)},ge=!0,Oe=String(q.r).substr(-1)==="%"?"prgb":"rgb"):K(q.h)&&K(q.s)&&K(q.v)?(ne=U(q.s),ce=U(q.v),$=function(Y,Z,ae){Y=6*N(Y,360),Z=N(Z,100),ae=N(ae,100);var se=Math.floor(Y),ye=Y-se,de=ae*(1-Z),be=ae*(1-ye*Z),Pe=ae*(1-(1-ye)*Z),Le=se%6;return{r:255*[ae,be,de,de,Pe,ae][Le],g:255*[Pe,ae,ae,be,de,de][Le],b:255*[de,de,Pe,ae,ae,be][Le]}}(q.h,ne,ce),ge=!0,Oe="hsv"):K(q.h)&&K(q.s)&&K(q.l)&&(ne=U(q.s),fe=U(q.l),$=function(Y,Z,ae){var se,ye,de;function be(Ee,Ze,ke){return ke<0&&(ke+=1),ke>1&&(ke-=1),ke<1/6?Ee+6*(Ze-Ee)*ke:ke<.5?Ze:ke<2/3?Ee+(Ze-Ee)*(2/3-ke)*6:Ee}if(Y=N(Y,360),Z=N(Z,100),ae=N(ae,100),Z===0)se=ye=de=ae;else{var Pe=ae<.5?ae*(1+Z):ae+Z-ae*Z,Le=2*ae-Pe;se=be(Le,Pe,Y+1/3),ye=be(Le,Pe,Y),de=be(Le,Pe,Y-1/3)}return{r:255*se,g:255*ye,b:255*de}}(q.h,ne,fe),ge=!0,Oe="hsl"),q.hasOwnProperty("a")&&(H=q.a)),H=x(H),{ok:ge,format:q.format||Oe,r:Math.min(255,Math.max($.r,0)),g:Math.min(255,Math.max($.g,0)),b:Math.min(255,Math.max($.b,0)),a:H};var $e,Fe,te}(C);this._originalInput=C,this._r=D.r,this._g=D.g,this._b=D.b,this._a=D.a,this._roundA=Math.round(100*this._a)/100,this._format=S.format||D.format,this._gradientType=S.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=D.ok}function v(C,S,D){C=N(C,255),S=N(S,255),D=N(D,255);var q,$,H=Math.max(C,S,D),ne=Math.min(C,S,D),ce=(H+ne)/2;if(H==ne)q=$=0;else{var fe=H-ne;switch($=ce>.5?fe/(2-H-ne):fe/(H+ne),H){case C:q=(S-D)/fe+(S<D?6:0);break;case S:q=(D-C)/fe+2;break;case D:q=(C-S)/fe+4}q/=6}return{h:q,s:$,l:ce}}function h(C,S,D){C=N(C,255),S=N(S,255),D=N(D,255);var q,$,H=Math.max(C,S,D),ne=Math.min(C,S,D),ce=H,fe=H-ne;if($=H===0?0:fe/H,H==ne)q=0;else{switch(H){case C:q=(S-D)/fe+(S<D?6:0);break;case S:q=(D-C)/fe+2;break;case D:q=(C-S)/fe+4}q/=6}return{h:q,s:$,v:ce}}function l(C,S,D,q){var $=[F(Math.round(C).toString(16)),F(Math.round(S).toString(16)),F(Math.round(D).toString(16))];return q&&$[0].charAt(0)==$[0].charAt(1)&&$[1].charAt(0)==$[1].charAt(1)&&$[2].charAt(0)==$[2].charAt(1)?$[0].charAt(0)+$[1].charAt(0)+$[2].charAt(0):$.join("")}function a(C,S,D,q){return[F(G(q)),F(Math.round(C).toString(16)),F(Math.round(S).toString(16)),F(Math.round(D).toString(16))].join("")}function y(C,S){S=S===0?0:S||10;var D=g(C).toHsl();return D.s-=S/100,D.s=I(D.s),g(D)}function b(C,S){S=S===0?0:S||10;var D=g(C).toHsl();return D.s+=S/100,D.s=I(D.s),g(D)}function w(C){return g(C).desaturate(100)}function m(C,S){S=S===0?0:S||10;var D=g(C).toHsl();return D.l+=S/100,D.l=I(D.l),g(D)}function d(C,S){S=S===0?0:S||10;var D=g(C).toRgb();return D.r=Math.max(0,Math.min(255,D.r-Math.round(-S/100*255))),D.g=Math.max(0,Math.min(255,D.g-Math.round(-S/100*255))),D.b=Math.max(0,Math.min(255,D.b-Math.round(-S/100*255))),g(D)}function p(C,S){S=S===0?0:S||10;var D=g(C).toHsl();return D.l-=S/100,D.l=I(D.l),g(D)}function c(C,S){var D=g(C).toHsl(),q=(D.h+S)%360;return D.h=q<0?360+q:q,g(D)}function A(C){var S=g(C).toHsl();return S.h=(S.h+180)%360,g(S)}function T(C,S){if(isNaN(S)||S<=0)throw new Error("Argument to polyad must be a positive number");for(var D=g(C).toHsl(),q=[g(C)],$=360/S,H=1;H<S;H++)q.push(g({h:(D.h+H*$)%360,s:D.s,l:D.l}));return q}function _(C){var S=g(C).toHsl(),D=S.h;return[g(C),g({h:(D+72)%360,s:S.s,l:S.l}),g({h:(D+216)%360,s:S.s,l:S.l})]}function k(C,S,D){S=S||6,D=D||30;var q=g(C).toHsl(),$=360/D,H=[g(C)];for(q.h=(q.h-($*S>>1)+720)%360;--S;)q.h=(q.h+$)%360,H.push(g(q));return H}function P(C,S){S=S||6;for(var D=g(C).toHsv(),q=D.h,$=D.s,H=D.v,ne=[],ce=1/S;S--;)ne.push(g({h:q,s:$,v:H})),H=(H+ce)%1;return ne}g.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var C=this.toRgb();return(299*C.r+587*C.g+114*C.b)/1e3},getLuminance:function(){var C,S,D,q=this.toRgb();return C=q.r/255,S=q.g/255,D=q.b/255,.2126*(C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4))+.7152*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.0722*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))},setAlpha:function(C){return this._a=x(C),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var C=h(this._r,this._g,this._b);return{h:360*C.h,s:C.s,v:C.v,a:this._a}},toHsvString:function(){var C=h(this._r,this._g,this._b),S=Math.round(360*C.h),D=Math.round(100*C.s),q=Math.round(100*C.v);return this._a==1?"hsv("+S+", "+D+"%, "+q+"%)":"hsva("+S+", "+D+"%, "+q+"%, "+this._roundA+")"},toHsl:function(){var C=v(this._r,this._g,this._b);return{h:360*C.h,s:C.s,l:C.l,a:this._a}},toHslString:function(){var C=v(this._r,this._g,this._b),S=Math.round(360*C.h),D=Math.round(100*C.s),q=Math.round(100*C.l);return this._a==1?"hsl("+S+", "+D+"%, "+q+"%)":"hsla("+S+", "+D+"%, "+q+"%, "+this._roundA+")"},toHex:function(C){return l(this._r,this._g,this._b,C)},toHexString:function(C){return"#"+this.toHex(C)},toHex8:function(C){return function(S,D,q,$,H){var ne=[F(Math.round(S).toString(16)),F(Math.round(D).toString(16)),F(Math.round(q).toString(16)),F(G($))];return H&&ne[0].charAt(0)==ne[0].charAt(1)&&ne[1].charAt(0)==ne[1].charAt(1)&&ne[2].charAt(0)==ne[2].charAt(1)&&ne[3].charAt(0)==ne[3].charAt(1)?ne[0].charAt(0)+ne[1].charAt(0)+ne[2].charAt(0)+ne[3].charAt(0):ne.join("")}(this._r,this._g,this._b,this._a,C)},toHex8String:function(C){return"#"+this.toHex8(C)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*N(this._r,255))+"%",g:Math.round(100*N(this._g,255))+"%",b:Math.round(100*N(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(100*N(this._r,255))+"%, "+Math.round(100*N(this._g,255))+"%, "+Math.round(100*N(this._b,255))+"%)":"rgba("+Math.round(100*N(this._r,255))+"%, "+Math.round(100*N(this._g,255))+"%, "+Math.round(100*N(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(E[l(this._r,this._g,this._b,!0)]||!1)},toFilter:function(C){var S="#"+a(this._r,this._g,this._b,this._a),D=S,q=this._gradientType?"GradientType = 1, ":"";if(C){var $=g(C);D="#"+a($._r,$._g,$._b,$._a)}return"progid:DXImageTransform.Microsoft.gradient("+q+"startColorstr="+S+",endColorstr="+D+")"},toString:function(C){var S=!!C;C=C||this._format;var D=!1,q=this._a<1&&this._a>=0;return S||!q||C!=="hex"&&C!=="hex6"&&C!=="hex3"&&C!=="hex4"&&C!=="hex8"&&C!=="name"?(C==="rgb"&&(D=this.toRgbString()),C==="prgb"&&(D=this.toPercentageRgbString()),C!=="hex"&&C!=="hex6"||(D=this.toHexString()),C==="hex3"&&(D=this.toHexString(!0)),C==="hex4"&&(D=this.toHex8String(!0)),C==="hex8"&&(D=this.toHex8String()),C==="name"&&(D=this.toName()),C==="hsl"&&(D=this.toHslString()),C==="hsv"&&(D=this.toHsvString()),D||this.toHexString()):C==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return g(this.toString())},_applyModification:function(C,S){var D=C.apply(null,[this].concat([].slice.call(S)));return this._r=D._r,this._g=D._g,this._b=D._b,this.setAlpha(D._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(d,arguments)},darken:function(){return this._applyModification(p,arguments)},desaturate:function(){return this._applyModification(y,arguments)},saturate:function(){return this._applyModification(b,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(c,arguments)},_applyCombination:function(C,S){return C.apply(null,[this].concat([].slice.call(S)))},analogous:function(){return this._applyCombination(k,arguments)},complement:function(){return this._applyCombination(A,arguments)},monochromatic:function(){return this._applyCombination(P,arguments)},splitcomplement:function(){return this._applyCombination(_,arguments)},triad:function(){return this._applyCombination(T,[3])},tetrad:function(){return this._applyCombination(T,[4])}},g.fromRatio=function(C,S){if(typeof C=="object"){var D={};for(var q in C)C.hasOwnProperty(q)&&(D[q]=q==="a"?C[q]:U(C[q]));C=D}return g(C,S)},g.equals=function(C,S){return!(!C||!S)&&g(C).toRgbString()==g(S).toRgbString()},g.random=function(){return g.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},g.mix=function(C,S,D){D=D===0?0:D||50;var q=g(C).toRgb(),$=g(S).toRgb(),H=D/100;return g({r:($.r-q.r)*H+q.r,g:($.g-q.g)*H+q.g,b:($.b-q.b)*H+q.b,a:($.a-q.a)*H+q.a})},g.readability=function(C,S){var D=g(C),q=g(S);return(Math.max(D.getLuminance(),q.getLuminance())+.05)/(Math.min(D.getLuminance(),q.getLuminance())+.05)},g.isReadable=function(C,S,D){var q,$,H,ne,ce,fe=g.readability(C,S);switch($=!1,(H=D,(ne=((H=H||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&ne!=="AAA"&&(ne="AA"),(ce=(H.size||"small").toLowerCase())!=="small"&&ce!=="large"&&(ce="small"),q={level:ne,size:ce}).level+q.size){case"AAsmall":case"AAAlarge":$=fe>=4.5;break;case"AAlarge":$=fe>=3;break;case"AAAsmall":$=fe>=7}return $},g.mostReadable=function(C,S,D){var q,$,H,ne,ce=null,fe=0;$=(D=D||{}).includeFallbackColors,H=D.level,ne=D.size;for(var ge=0;ge<S.length;ge++)(q=g.readability(C,S[ge]))>fe&&(fe=q,ce=g(S[ge]));return g.isReadable(C,ce,{level:H,size:ne})||!$?ce:(D.includeFallbackColors=!1,g.mostReadable(C,["#fff","#000"],D))};var O=g.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},E=g.hexNames=function(C){var S={};for(var D in C)C.hasOwnProperty(D)&&(S[C[D]]=D);return S}(O);function x(C){return C=parseFloat(C),(isNaN(C)||C<0||C>1)&&(C=1),C}function N(C,S){(function(q){return typeof q=="string"&&q.indexOf(".")!=-1&&parseFloat(q)===1})(C)&&(C="100%");var D=function(q){return typeof q=="string"&&q.indexOf("%")!=-1}(C);return C=Math.min(S,Math.max(0,parseFloat(C))),D&&(C=parseInt(C*S,10)/100),Math.abs(C-S)<1e-6?1:C%S/parseFloat(S)}function I(C){return Math.min(1,Math.max(0,C))}function L(C){return parseInt(C,16)}function F(C){return C.length==1?"0"+C:""+C}function U(C){return C<=1&&(C=100*C+"%"),C}function G(C){return Math.round(255*parseFloat(C)).toString(16)}function z(C){return L(C)/255}var j,R,B,M=(R="[\\s|\\(]+("+(j="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",B="[\\s|\\(]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",{CSS_UNIT:new RegExp(j),rgb:new RegExp("rgb"+R),rgba:new RegExp("rgba"+B),hsl:new RegExp("hsl"+R),hsla:new RegExp("hsla"+B),hsv:new RegExp("hsv"+R),hsva:new RegExp("hsva"+B),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function K(C){return!!M.CSS_UNIT.exec(C)}return g}()}},n={};function r(s){var u=n[s];if(u!==void 0)return u.exports;var f=n[s]={id:s,loaded:!1,exports:{}};return t[s].call(f.exports,f,f.exports,r),f.loaded=!0,f.exports}r.n=s=>{var u=s&&s.__esModule?()=>s.default:()=>s;return r.d(u,{a:u}),u},r.d=(s,u)=>{for(var f in u)r.o(u,f)&&!r.o(s,f)&&Object.defineProperty(s,f,{enumerable:!0,get:u[f]})},r.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),r.o=(s,u)=>Object.prototype.hasOwnProperty.call(s,u),r.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.nmd=s=>(s.paths=[],s.children||(s.children=[]),s),r.nc=void 0;var o=r(607);return o.default})())})(rl);var Pf=rl.exports;const Cf=tl(Pf);var Ne=function(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t},me=function(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)},zn,or,Ut,Ar,$r,tn,nn,rn,on,sn,an,ln,un,sr,Tr,Jn,Ri,Vn;const Rf=function(i){var e=131,t=137,n=0;i+="x";var r=Math.floor(9007199254740991/t);for(let o=0;o<i.length;o++)n>r&&(n=Math.floor(n/t)),n=n*e+i.charCodeAt(o);return n},ve="0123456789abcdef".split(""),Df=[-2147483648,8388608,32768,128],jt=[24,16,8,0],Oi=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ct=[];class Lf{constructor(e=!1,t=!1){zn.set(this,void 0),or.set(this,void 0),Ut.set(this,void 0),Ar.set(this,void 0),$r.set(this,void 0),tn.set(this,void 0),nn.set(this,void 0),rn.set(this,void 0),on.set(this,void 0),sn.set(this,void 0),an.set(this,void 0),ln.set(this,void 0),un.set(this,void 0),sr.set(this,void 0),Tr.set(this,void 0),Jn.set(this,void 0),Ri.set(this,0),Vn.set(this,void 0),this.init(e,t)}init(e,t){t?(ct[0]=ct[16]=ct[1]=ct[2]=ct[3]=ct[4]=ct[5]=ct[6]=ct[7]=ct[8]=ct[9]=ct[10]=ct[11]=ct[12]=ct[13]=ct[14]=ct[15]=0,Ne(this,or,ct)):Ne(this,or,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),e?(Ne(this,tn,3238371032),Ne(this,nn,914150663),Ne(this,rn,812702999),Ne(this,on,4144912697),Ne(this,sn,4290775857),Ne(this,an,1750603025),Ne(this,ln,1694076839),Ne(this,un,3204075428)):(Ne(this,tn,1779033703),Ne(this,nn,3144134277),Ne(this,rn,1013904242),Ne(this,on,2773480762),Ne(this,sn,1359893119),Ne(this,an,2600822924),Ne(this,ln,528734635),Ne(this,un,1541459225)),Ne(this,zn,Ne(this,Vn,Ne(this,Ut,Ne(this,Tr,0)))),Ne(this,Ar,Ne(this,sr,!1)),Ne(this,$r,!0),Ne(this,Jn,e)}update(e){if(me(this,Ar))return this;let t;e instanceof ArrayBuffer?t=new Uint8Array(e):t=e;let n=0;const r=t.length,o=me(this,or);for(;n<r;){let s;if(me(this,sr)&&(Ne(this,sr,!1),o[0]=me(this,zn),o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),typeof t!="string")for(s=me(this,Vn);n<r&&s<64;++n)o[s>>2]|=t[n]<<jt[s++&3];else for(s=me(this,Vn);n<r&&s<64;++n){let u=t.charCodeAt(n);u<128?o[s>>2]|=u<<jt[s++&3]:u<2048?(o[s>>2]|=(192|u>>6)<<jt[s++&3],o[s>>2]|=(128|u&63)<<jt[s++&3]):u<55296||u>=57344?(o[s>>2]|=(224|u>>12)<<jt[s++&3],o[s>>2]|=(128|u>>6&63)<<jt[s++&3],o[s>>2]|=(128|u&63)<<jt[s++&3]):(u=65536+((u&1023)<<10|t.charCodeAt(++n)&1023),o[s>>2]|=(240|u>>18)<<jt[s++&3],o[s>>2]|=(128|u>>12&63)<<jt[s++&3],o[s>>2]|=(128|u>>6&63)<<jt[s++&3],o[s>>2]|=(128|u&63)<<jt[s++&3])}Ne(this,Ri,s),Ne(this,Ut,me(this,Ut)+(s-me(this,Vn))),s>=64?(Ne(this,zn,o[16]),Ne(this,Vn,s-64),this.hash(),Ne(this,sr,!0)):Ne(this,Vn,s)}return me(this,Ut)>4294967295&&(Ne(this,Tr,me(this,Tr)+(me(this,Ut)/4294967296<<0)),Ne(this,Ut,me(this,Ut)%4294967296)),this}finalize(){if(me(this,Ar))return;Ne(this,Ar,!0);const e=me(this,or),t=me(this,Ri);e[16]=me(this,zn),e[t>>2]|=Df[t&3],Ne(this,zn,e[16]),t>=56&&(me(this,sr)||this.hash(),e[0]=me(this,zn),e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=me(this,Tr)<<3|me(this,Ut)>>>29,e[15]=me(this,Ut)<<3,this.hash()}hash(){let e=me(this,tn),t=me(this,nn),n=me(this,rn),r=me(this,on),o=me(this,sn),s=me(this,an),u=me(this,ln),f=me(this,un);const g=me(this,or);let v,h,l,a,y,b,w,m,d,p;for(let c=16;c<64;++c)a=g[c-15],v=(a>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,a=g[c-2],h=(a>>>17|a<<15)^(a>>>19|a<<13)^a>>>10,g[c]=g[c-16]+v+g[c-7]+h<<0;p=t&n;for(let c=0;c<64;c+=4)me(this,$r)?(me(this,Jn)?(w=300032,a=g[0]-1413257819,f=a-150054599<<0,r=a+24177077<<0):(w=704751109,a=g[0]-210244248,f=a-1521486534<<0,r=a+143694565<<0),Ne(this,$r,!1)):(v=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),h=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),w=e&t,l=w^e&n^p,b=o&s^~o&u,a=f+h+b+Oi[c]+g[c],y=v+l,f=r+a<<0,r=a+y<<0),v=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),h=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7),m=r&e,l=m^r&t^w,b=f&o^~f&s,a=u+h+b+Oi[c+1]+g[c+1],y=v+l,u=n+a<<0,n=a+y<<0,v=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),h=(u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7),d=n&r,l=d^n&e^m,b=u&f^~u&o,a=s+h+b+Oi[c+2]+g[c+2],y=v+l,s=t+a<<0,t=a+y<<0,v=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),h=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),p=t&n,l=p^t&r^d,b=s&u^~s&f,a=o+h+b+Oi[c+3]+g[c+3],y=v+l,o=e+a<<0,e=a+y<<0;Ne(this,tn,me(this,tn)+e<<0),Ne(this,nn,me(this,nn)+t<<0),Ne(this,rn,me(this,rn)+n<<0),Ne(this,on,me(this,on)+r<<0),Ne(this,sn,me(this,sn)+o<<0),Ne(this,an,me(this,an)+s<<0),Ne(this,ln,me(this,ln)+u<<0),Ne(this,un,me(this,un)+f<<0)}hex(){this.finalize();const e=me(this,tn),t=me(this,nn),n=me(this,rn),r=me(this,on),o=me(this,sn),s=me(this,an),u=me(this,ln),f=me(this,un);let g=ve[e>>28&15]+ve[e>>24&15]+ve[e>>20&15]+ve[e>>16&15]+ve[e>>12&15]+ve[e>>8&15]+ve[e>>4&15]+ve[e&15]+ve[t>>28&15]+ve[t>>24&15]+ve[t>>20&15]+ve[t>>16&15]+ve[t>>12&15]+ve[t>>8&15]+ve[t>>4&15]+ve[t&15]+ve[n>>28&15]+ve[n>>24&15]+ve[n>>20&15]+ve[n>>16&15]+ve[n>>12&15]+ve[n>>8&15]+ve[n>>4&15]+ve[n&15]+ve[r>>28&15]+ve[r>>24&15]+ve[r>>20&15]+ve[r>>16&15]+ve[r>>12&15]+ve[r>>8&15]+ve[r>>4&15]+ve[r&15]+ve[o>>28&15]+ve[o>>24&15]+ve[o>>20&15]+ve[o>>16&15]+ve[o>>12&15]+ve[o>>8&15]+ve[o>>4&15]+ve[o&15]+ve[s>>28&15]+ve[s>>24&15]+ve[s>>20&15]+ve[s>>16&15]+ve[s>>12&15]+ve[s>>8&15]+ve[s>>4&15]+ve[s&15]+ve[u>>28&15]+ve[u>>24&15]+ve[u>>20&15]+ve[u>>16&15]+ve[u>>12&15]+ve[u>>8&15]+ve[u>>4&15]+ve[u&15];return me(this,Jn)||(g+=ve[f>>28&15]+ve[f>>24&15]+ve[f>>20&15]+ve[f>>16&15]+ve[f>>12&15]+ve[f>>8&15]+ve[f>>4&15]+ve[f&15]),g}toString(){return this.hex()}digest(){this.finalize();const e=me(this,tn),t=me(this,nn),n=me(this,rn),r=me(this,on),o=me(this,sn),s=me(this,an),u=me(this,ln),f=me(this,un),g=[e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24&255,n>>16&255,n>>8&255,n&255,r>>24&255,r>>16&255,r>>8&255,r&255,o>>24&255,o>>16&255,o>>8&255,o&255,s>>24&255,s>>16&255,s>>8&255,s&255,u>>24&255,u>>16&255,u>>8&255,u&255];return me(this,Jn)||g.push(f>>24&255,f>>16&255,f>>8&255,f&255),g}array(){return this.digest()}arrayBuffer(){this.finalize();const e=new ArrayBuffer(me(this,Jn)?28:32),t=new DataView(e);return t.setUint32(0,me(this,tn)),t.setUint32(4,me(this,nn)),t.setUint32(8,me(this,rn)),t.setUint32(12,me(this,on)),t.setUint32(16,me(this,sn)),t.setUint32(20,me(this,an)),t.setUint32(24,me(this,ln)),me(this,Jn)||t.setUint32(28,me(this,un)),e}}zn=new WeakMap,or=new WeakMap,Ut=new WeakMap,Ar=new WeakMap,$r=new WeakMap,tn=new WeakMap,nn=new WeakMap,rn=new WeakMap,on=new WeakMap,sn=new WeakMap,an=new WeakMap,ln=new WeakMap,un=new WeakMap,sr=new WeakMap,Tr=new WeakMap,Jn=new WeakMap,Ri=new WeakMap,Vn=new WeakMap;function Mf(i){const e=new Lf;return e.update(i),parseInt(e.hex().substring(0,8),16)}const Bf=function(i){var e="#";return i.forEach(function(t){t<16&&(e+=0),e+=t.toString(16)}),e},qf=function(i,e,t){i/=360;var n=t<.5?t*(1+e):t+e-t*e,r=2*t-n;return[i+1/3,i,i-1/3].map(function(o){return o<0&&o++,o>1&&o--,o<1/6?o=r+(n-r)*6*o:o<.5?o=n:o<2/3?o=r+(n-r)*6*(2/3-o):o=r,Math.round(o*255)})};class Ff{constructor(e={}){const[t,n]=[e.lightness,e.saturation].map(function(r){return r=r!==void 0?r:[.35,.5,.65],Array.isArray(r)?r.concat():[r]});this.L=t,this.S=n,typeof e.hue=="number"&&(e.hue={min:e.hue,max:e.hue}),typeof e.hue=="object"&&!Array.isArray(e.hue)&&(e.hue=[e.hue]),typeof e.hue>"u"&&(e.hue=[]),this.hueRanges=e.hue.map(function(r){return{min:typeof r.min>"u"?0:r.min,max:typeof r.max>"u"?360:r.max}}),this.hash=Mf,typeof e.hash=="function"&&(this.hash=e.hash),e.hash==="bkdr"&&(this.hash=Rf)}hsl(e){var t,n,r,o=this.hash(e),s=727;if(this.hueRanges.length){const u=this.hueRanges[o%this.hueRanges.length];t=o/this.hueRanges.length%s*(u.max-u.min)/s+u.min}else t=o%359;return o=Math.ceil(o/360),n=this.S[o%this.S.length],o=Math.ceil(o/this.S.length),r=this.L[o%this.L.length],[t,n,r]}rgb(e){var t=this.hsl(e);return qf.apply(this,t)}hex(e){var t=this.rgb(e);return Bf(t)}}const ar={isOnline:!1,showOffline:i=>{ar.isOnline=!1,i.innerHTML='<span class="red"> </span>'},showOnline:i=>{ar.isOnline=!0,i.innerHTML='<span class="green"> </span>'},statusListener:i=>e=>{ar.isOnline&&e.value==ri.Disconnected?ar.showOffline(i):!ar.isOnline&&e.value==ri.Connected&&ar.showOnline(i)}};function jf(i,e,t){const n=[];for(const{clientID:r,presence:o}of e)n.push(t===r?`<b>${o.username}</b>`:o.username);i.innerHTML=JSON.stringify(n)}function Os(i,e,t){i.innerText=t.toJSON(),e.innerText=t.getRoot().content.toTestString()}const Uf=document.getElementById("peers"),Ss=document.getElementById("document"),ks=document.getElementById("document-text"),$f=document.getElementById("network-status"),zf=new Ff,Jf=`vanilla-quill-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`;function uo(i){const{embed:e,...t}=i.attributes??{};return e?{insert:JSON.parse(e),attributes:t}:{insert:i.content||"",attributes:i.attributes}}async function Vf(){const i=new lo.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"});await i.activate();const e=new lo.Document(Jf,{enableDevtools:!0});e.subscribe("connection",f=>{ar.statusListener($f)(f)}),e.subscribe("presence",f=>{f.type!==ft.PresenceChanged&&jf(Uf,e.getPresences(),i.getID())}),await i.attach(e,{initialPresence:{username:i.getID().slice(-2),color:zf.hex(i.getID().slice(-2)),selection:void 0}}),e.update(f=>{f.content||(f.content=new lo.Text,f.content.edit(0,0,`
`))},"create content if not exists"),e.subscribe(f=>{f.type==="snapshot"&&u(),Os(Ss,ks,e)}),e.subscribe("$.content",f=>{f.type==="remote-change"&&s(f.value.operations),n()}),e.subscribe("others",f=>{f.type===ft.Unwatched?o.removeCursor(f.value.clientID):f.type===ft.PresenceChanged&&t(f.value)});function t(f){const{clientID:g,presence:v}=f;if(g===i.getID()||!v)return;const{username:h,color:l,selection:a}=v;if(!a)return;const y=e.getRoot().content.posRangeToIndexRange(a);o.createCursor(g,h,l),o.moveCursor(g,{index:y[0],length:y[1]-y[0]})}function n(){for(const f of e.getPresences())t(f)}await i.sync(),Es.register("modules/cursors",Cf);const r=new Es("#editor",{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["image","video"],["clean"]],cursors:!0},theme:"snow"}),o=r.getModule("cursors");r.on("text-change",(f,g,v)=>{if(v==="api"||!f.ops)return;let h=0,l=0;console.log(`%c quill: ${JSON.stringify(f.ops)}`,"color: green");for(const a of f.ops)a.attributes!==void 0||a.insert!==void 0?(a.retain!==void 0&&(l=h+a.retain),console.log(`%c local: ${h}-${l}: ${a.insert} ${a.attributes?JSON.stringify(a.attributes):"{}"}`,"color: green"),e.update((y,b)=>{let w;a.attributes!==void 0&&a.insert===void 0?y.content.setStyle(h,l,a.attributes):a.insert!==void 0&&(l<h&&(l=h),typeof a.insert=="object"?w=y.content.edit(h,l," ",{embed:JSON.stringify(a.insert),...a.attributes}):w=y.content.edit(h,l,a.insert,a.attributes),h=l+a.insert.length),w&&b.set({selection:y.content.indexRangeToPosRange(w)})},`update style by ${i.getID()}`)):a.delete!==void 0?(l=h+a.delete,console.log(`%c local: ${h}-${l}: ''`,"color: green"),e.update((y,b)=>{const w=y.content.edit(h,l,"");w&&b.set({selection:y.content.indexRangeToPosRange(w)})},`update content by ${i.getID()}`)):a.retain!==void 0&&(h=l+a.retain,l=h)}).on("selection-change",(f,g,v)=>{if(f){if(v==="api"){const{selection:h}=e.getMyPresence();if(h){const[l,a]=e.getRoot().content.posRangeToIndexRange(h),{index:y,length:b}=f;if(l===y&&a===y+b)return}}e.update((h,l)=>{l.set({selection:h.content.indexRangeToPosRange([f.index,f.index+f.length])})},`update selection by ${i.getID()}`)}});function s(f){const g=[];let v=0;for(const h of f)if(h.type==="edit"){const l=h.from,a=h.to,y=l-v,b=a-l,{insert:w,attributes:m}=uo(h.value);if(console.log(`%c remote: ${l}-${a}: ${w}`,"color: skyblue"),y&&g.push({retain:y}),b&&g.push({delete:b}),w){const d={insert:w};m&&(d.attributes=m),g.push(d)}v=a}else if(h.type==="style"){const l=h.from,a=h.to,y=l-v,b=a-l,{attributes:w}=uo(h.value);if(console.log(`%c remote: ${l}-${a}: ${JSON.stringify(w)}`,"color: skyblue"),y&&g.push({retain:y}),w){const m={attributes:w};b&&(m.retain=b),g.push(m)}v=a}if(g.length){console.log(`%c to quill: ${JSON.stringify(g)}`,"color: green");const h={ops:g};r.updateContents(h,"api")}}function u(){const g={ops:e.getRoot().content.values().map(v=>uo(v))};r.setContents(g,"api")}u(),n(),Os(Ss,ks,e)}Vf();
