var il=Object.defineProperty;var ol=(i,e,t)=>e in i?il(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var J=(i,e,t)=>ol(i,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();var We;(function(i){i[i.Canceled=1]="Canceled",i[i.Unknown=2]="Unknown",i[i.InvalidArgument=3]="InvalidArgument",i[i.DeadlineExceeded=4]="DeadlineExceeded",i[i.NotFound=5]="NotFound",i[i.AlreadyExists=6]="AlreadyExists",i[i.PermissionDenied=7]="PermissionDenied",i[i.ResourceExhausted=8]="ResourceExhausted",i[i.FailedPrecondition=9]="FailedPrecondition",i[i.Aborted=10]="Aborted",i[i.OutOfRange=11]="OutOfRange",i[i.Unimplemented=12]="Unimplemented",i[i.Internal=13]="Internal",i[i.Unavailable=14]="Unavailable",i[i.DataLoss=15]="DataLoss",i[i.Unauthenticated=16]="Unauthenticated"})(We||(We={}));function qo(i){const e=We[i];return typeof e!="string"?i.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class at extends Error{constructor(e,t=We.Unknown,n,r,o){super(sl(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(n??{}),this.details=r??[],this.cause=o}static from(e,t=We.Unknown){return e instanceof at?e:e instanceof Error?e.name=="AbortError"?new at(e.message,We.Canceled):new at(e.message,t,void 0,void 0,e):new at(String(e),t,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===at.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const t="typeName"in e?{findMessage:r=>r===e.typeName?e:void 0}:e,n=[];for(const r of this.details){if("getType"in r){t.findMessage(r.getType().typeName)&&n.push(r);continue}const o=t.findMessage(r.type);if(o)try{n.push(o.fromBinary(r.value))}catch{}}return n}}function sl(i,e){return i.length?`[${qo(e)}] ${i}`:`[${qo(e)}]`}function tt(i,e){if(!i)throw new Error(e)}const al=34028234663852886e22,ll=-34028234663852886e22,ul=4294967295,cl=2147483647,fl=-2147483648;function Ni(i){if(typeof i!="number")throw new Error("invalid int 32: "+typeof i);if(!Number.isInteger(i)||i>cl||i<fl)throw new Error("invalid int 32: "+i)}function co(i){if(typeof i!="number")throw new Error("invalid uint 32: "+typeof i);if(!Number.isInteger(i)||i>ul||i<0)throw new Error("invalid uint 32: "+i)}function xs(i){if(typeof i!="number")throw new Error("invalid float 32: "+typeof i);if(Number.isFinite(i)&&(i>al||i<ll))throw new Error("invalid float 32: "+i)}const Ns=Symbol("@bufbuild/protobuf/enum-type");function hl(i){const e=i[Ns];return tt(e,"missing enum type on enum object"),e}function Is(i,e,t,n){i[Ns]=Ps(e,t.map(r=>({no:r.no,name:r.name,localName:i[r.no]})))}function Ps(i,e,t){const n=Object.create(null),r=Object.create(null),o=[];for(const s of e){const u=Cs(s);o.push(u),n[s.name]=u,r[s.no]=u}return{typeName:i,values:o,findName(s){return n[s]},findNumber(s){return r[s]}}}function dl(i,e,t){const n={};for(const r of e){const o=Cs(r);n[o.localName]=o.no,n[o.no]=o.localName}return Is(n,i,e),n}function Cs(i){return"localName"in i?i:Object.assign(Object.assign({},i),{localName:i.name})}class wt{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const n=this.getType(),r=n.runtime.bin,o=r.makeReadOptions(t);return r.readMessage(this,o.readerFactory(e),e.byteLength,o),this}fromJson(e,t){const n=this.getType(),r=n.runtime.json,o=r.makeReadOptions(t);return r.readMessage(n,e,o,this),this}fromJsonString(e,t){let n;try{n=JSON.parse(e)}catch(r){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${r instanceof Error?r.message:String(r)}`)}return this.fromJson(n,t)}toBinary(e){const t=this.getType(),n=t.runtime.bin,r=n.makeWriteOptions(e),o=r.writerFactory();return n.writeMessage(this,o,r),o.finish()}toJson(e){const t=this.getType(),n=t.runtime.json,r=n.makeWriteOptions(e);return n.writeMessage(this,r)}toJsonString(e){var t;const n=this.toJson(e);return JSON.stringify(n,null,(t=e==null?void 0:e.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function gl(i,e,t,n){var r;const o=(r=n==null?void 0:n.localName)!==null&&r!==void 0?r:e.substring(e.lastIndexOf(".")+1),s={[o]:function(u){i.util.initFields(this),i.util.initPartial(u,this)}}[o];return Object.setPrototypeOf(s.prototype,new wt),Object.assign(s,{runtime:i,typeName:e,fields:i.util.newFieldList(t),fromBinary(u,h){return new s().fromBinary(u,h)},fromJson(u,h){return new s().fromJson(u,h)},fromJsonString(u,h){return new s().fromJsonString(u,h)},equals(u,h){return i.util.equals(s,u,h)}}),s}function pl(){let i=0,e=0;for(let n=0;n<28;n+=7){let r=this.buf[this.pos++];if(i|=(r&127)<<n,!(r&128))return this.assertBounds(),[i,e]}let t=this.buf[this.pos++];if(i|=(t&15)<<28,e=(t&112)>>4,!(t&128))return this.assertBounds(),[i,e];for(let n=3;n<=31;n+=7){let r=this.buf[this.pos++];if(e|=(r&127)<<n,!(r&128))return this.assertBounds(),[i,e]}throw new Error("invalid varint")}function eo(i,e,t){for(let o=0;o<28;o=o+7){const s=i>>>o,u=!(!(s>>>7)&&e==0),h=(u?s|128:s)&255;if(t.push(h),!u)return}const n=i>>>28&15|(e&7)<<4,r=!!(e>>3);if(t.push((r?n|128:n)&255),!!r){for(let o=3;o<31;o=o+7){const s=e>>>o,u=!!(s>>>7),h=(u?s|128:s)&255;if(t.push(h),!u)return}t.push(e>>>31&1)}}const Ii=4294967296;function Fo(i){const e=i[0]==="-";e&&(i=i.slice(1));const t=1e6;let n=0,r=0;function o(s,u){const h=Number(i.slice(s,u));r*=t,n=n*t+h,n>=Ii&&(r=r+(n/Ii|0),n=n%Ii)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),e?Ds(n,r):vo(n,r)}function ml(i,e){let t=vo(i,e);const n=t.hi&2147483648;n&&(t=Ds(t.lo,t.hi));const r=Rs(t.lo,t.hi);return n?"-"+r:r}function Rs(i,e){if({lo:i,hi:e}=yl(i,e),e<=2097151)return String(Ii*e+i);const t=i&16777215,n=(i>>>24|e<<8)&16777215,r=e>>16&65535;let o=t+n*6777216+r*6710656,s=n+r*8147497,u=r*2;const h=1e7;return o>=h&&(s+=Math.floor(o/h),o%=h),s>=h&&(u+=Math.floor(s/h),s%=h),u.toString()+jo(s)+jo(o)}function yl(i,e){return{lo:i>>>0,hi:e>>>0}}function vo(i,e){return{lo:i|0,hi:e|0}}function Ds(i,e){return e=~e,i?i=~i+1:e+=1,vo(i,e)}const jo=i=>{const e=String(i);return"0000000".slice(e.length)+e};function Uo(i,e){if(i>=0){for(;i>127;)e.push(i&127|128),i=i>>>7;e.push(i)}else{for(let t=0;t<9;t++)e.push(i&127|128),i=i>>7;e.push(1)}}function vl(){let i=this.buf[this.pos++],e=i&127;if(!(i&128))return this.assertBounds(),e;if(i=this.buf[this.pos++],e|=(i&127)<<7,!(i&128))return this.assertBounds(),e;if(i=this.buf[this.pos++],e|=(i&127)<<14,!(i&128))return this.assertBounds(),e;if(i=this.buf[this.pos++],e|=(i&127)<<21,!(i&128))return this.assertBounds(),e;i=this.buf[this.pos++],e|=(i&15)<<28;for(let t=5;i&128&&t<10;t++)i=this.buf[this.pos++];if(i&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var $o={};function bl(){const i=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof i.getBigInt64=="function"&&typeof i.getBigUint64=="function"&&typeof i.setBigInt64=="function"&&typeof i.setBigUint64=="function"&&(typeof process!="object"||typeof $o!="object"||$o.BUF_BIGINT_DISABLE!=="1")){const r=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),s=BigInt("0"),u=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(h){const y=typeof h=="bigint"?h:BigInt(h);if(y>o||y<r)throw new Error(`int64 invalid: ${h}`);return y},uParse(h){const y=typeof h=="bigint"?h:BigInt(h);if(y>u||y<s)throw new Error(`uint64 invalid: ${h}`);return y},enc(h){return i.setBigInt64(0,this.parse(h),!0),{lo:i.getInt32(0,!0),hi:i.getInt32(4,!0)}},uEnc(h){return i.setBigInt64(0,this.uParse(h),!0),{lo:i.getInt32(0,!0),hi:i.getInt32(4,!0)}},dec(h,y){return i.setInt32(0,h,!0),i.setInt32(4,y,!0),i.getBigInt64(0,!0)},uDec(h,y){return i.setInt32(0,h,!0),i.setInt32(4,y,!0),i.getBigUint64(0,!0)}}}const t=r=>tt(/^-?[0-9]+$/.test(r),`int64 invalid: ${r}`),n=r=>tt(/^[0-9]+$/.test(r),`uint64 invalid: ${r}`);return{zero:"0",supported:!1,parse(r){return typeof r!="string"&&(r=r.toString()),t(r),r},uParse(r){return typeof r!="string"&&(r=r.toString()),n(r),r},enc(r){return typeof r!="string"&&(r=r.toString()),t(r),Fo(r)},uEnc(r){return typeof r!="string"&&(r=r.toString()),n(r),Fo(r)},dec(r,o){return ml(r,o)},uDec(r,o){return Rs(r,o)}}}const lt=bl();var le;(function(i){i[i.DOUBLE=1]="DOUBLE",i[i.FLOAT=2]="FLOAT",i[i.INT64=3]="INT64",i[i.UINT64=4]="UINT64",i[i.INT32=5]="INT32",i[i.FIXED64=6]="FIXED64",i[i.FIXED32=7]="FIXED32",i[i.BOOL=8]="BOOL",i[i.STRING=9]="STRING",i[i.BYTES=12]="BYTES",i[i.UINT32=13]="UINT32",i[i.SFIXED32=15]="SFIXED32",i[i.SFIXED64=16]="SFIXED64",i[i.SINT32=17]="SINT32",i[i.SINT64=18]="SINT64"})(le||(le={}));var rr;(function(i){i[i.BIGINT=0]="BIGINT",i[i.STRING=1]="STRING"})(rr||(rr={}));function Hn(i,e,t){if(e===t)return!0;if(i==le.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}switch(i){case le.UINT64:case le.FIXED64:case le.INT64:case le.SFIXED64:case le.SINT64:return e==t}return!1}function Rr(i,e){switch(i){case le.BOOL:return!1;case le.UINT64:case le.FIXED64:case le.INT64:case le.SFIXED64:case le.SINT64:return e==0?lt.zero:"0";case le.DOUBLE:case le.FLOAT:return 0;case le.BYTES:return new Uint8Array(0);case le.STRING:return"";default:return 0}}function Ls(i,e){switch(i){case le.BOOL:return e===!1;case le.STRING:return e==="";case le.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var ot;(function(i){i[i.Varint=0]="Varint",i[i.Bit64=1]="Bit64",i[i.LengthDelimited=2]="LengthDelimited",i[i.StartGroup=3]="StartGroup",i[i.EndGroup=4]="EndGroup",i[i.Bit32=5]="Bit32"})(ot||(ot={}));class wl{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let t=new Uint8Array(e),n=0;for(let r=0;r<this.chunks.length;r++)t.set(this.chunks[r],n),n+=this.chunks[r].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(co(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Ni(e),Uo(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){xs(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){co(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){Ni(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return Ni(e),e=(e<<1^e>>31)>>>0,Uo(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=lt.enc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=lt.uEnc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=lt.enc(e);return eo(t.lo,t.hi,this.buf),this}sint64(e){let t=lt.enc(e),n=t.hi>>31,r=t.lo<<1^n,o=(t.hi<<1|t.lo>>>31)^n;return eo(r,o,this.buf),this}uint64(e){let t=lt.uEnc(e);return eo(t.lo,t.hi,this.buf),this}}class Tl{constructor(e,t){this.varint64=pl,this.uint32=vl,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t??new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,n=e&7;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e,t){let n=this.pos;switch(e){case ot.Varint:for(;this.buf[this.pos++]&128;);break;case ot.Bit64:this.pos+=4;case ot.Bit32:this.pos+=4;break;case ot.LengthDelimited:let r=this.uint32();this.pos+=r;break;case ot.StartGroup:for(;;){const[o,s]=this.tag();if(s===ot.EndGroup){if(t!==void 0&&o!==t)throw new Error("invalid end group tag");break}this.skip(s,o)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return lt.dec(...this.varint64())}uint64(){return lt.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(e&1);return e=(e>>>1|(t&1)<<31)^n,t=t>>>1^n,lt.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return lt.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return lt.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function Al(i,e,t,n){let r;return{typeName:e,extendee:t,get field(){if(!r){const o=typeof n=="function"?n():n;o.name=e.split(".").pop(),o.jsonName=`[${e}]`,r=i.util.newFieldList([o]).list()[0]}return r},runtime:i}}function Ms(i){const e=i.field.localName,t=Object.create(null);return t[e]=_l(i),[t,()=>t[e]]}function _l(i){const e=i.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Rr(e.T,e.L);case"message":const t=e.T,n=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(n):n;case"map":throw"map fields are not allowed to be extensions"}}function El(i,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let t=i.length-1;t>=0;--t)if(i[t].no==e.no)return[i[t]];return[]}return i.filter(t=>t.no===e.no)}let Ln="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Ji=[];for(let i=0;i<Ln.length;i++)Ji[Ln[i].charCodeAt(0)]=i;Ji[45]=Ln.indexOf("+");Ji[95]=Ln.indexOf("/");const bo={dec(i){let e=i.length*3/4;i[i.length-2]=="="?e-=2:i[i.length-1]=="="&&(e-=1);let t=new Uint8Array(e),n=0,r=0,o,s=0;for(let u=0;u<i.length;u++){if(o=Ji[i.charCodeAt(u)],o===void 0)switch(i[u]){case"=":r=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:s=o,r=1;break;case 1:t[n++]=s<<2|(o&48)>>4,s=o,r=2;break;case 2:t[n++]=(s&15)<<4|(o&60)>>2,s=o,r=3;break;case 3:t[n++]=(s&3)<<6|o,r=0;break}}if(r==1)throw Error("invalid base64 string.");return t.subarray(0,n)},enc(i){let e="",t=0,n,r=0;for(let o=0;o<i.length;o++)switch(n=i[o],t){case 0:e+=Ln[n>>2],r=(n&3)<<4,t=1;break;case 1:e+=Ln[r|n>>4],r=(n&15)<<2,t=2;break;case 2:e+=Ln[r|n>>6],e+=Ln[n&63],t=0;break}return t&&(e+=Ln[r],e+="=",t==1&&(e+="=")),e}};function Ol(i,e,t){qs(e,i);const n=e.runtime.bin.makeReadOptions(t),r=El(i.getType().runtime.bin.listUnknownFields(i),e.field),[o,s]=Ms(e);for(const u of r)e.runtime.bin.readField(o,n.readerFactory(u.data),e.field,u.wireType,n);return s()}function Sl(i,e,t,n){qs(e,i);const r=e.runtime.bin.makeReadOptions(n),o=e.runtime.bin.makeWriteOptions(n);if(Bs(i,e)){const y=i.getType().runtime.bin.listUnknownFields(i).filter(v=>v.no!=e.field.no);i.getType().runtime.bin.discardUnknownFields(i);for(const v of y)i.getType().runtime.bin.onUnknownField(i,v.no,v.wireType,v.data)}const s=o.writerFactory();let u=e.field;!u.opt&&!u.repeated&&(u.kind=="enum"||u.kind=="scalar")&&(u=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(u,t,s,o);const h=r.readerFactory(s.finish());for(;h.pos<h.len;){const[y,v]=h.tag(),d=h.skip(v,y);i.getType().runtime.bin.onUnknownField(i,y,v,d)}}function Bs(i,e){const t=i.getType();return e.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(i).find(n=>n.no==e.field.no)}function qs(i,e){tt(i.extendee.typeName==e.getType().typeName,`extension ${i.typeName} can only be applied to message ${i.extendee.typeName}`)}function Fs(i,e){const t=i.localName;if(i.repeated)return e[t].length>0;if(i.oneof)return e[i.oneof.localName].case===t;switch(i.kind){case"enum":case"scalar":return i.opt||i.req?e[t]!==void 0:i.kind=="enum"?e[t]!==i.T.values[0].no:!Ls(i.T,e[t]);case"message":return e[t]!==void 0;case"map":return Object.keys(e[t]).length>0}}function zo(i,e){const t=i.localName,n=!i.opt&&!i.req;if(i.repeated)e[t]=[];else if(i.oneof)e[i.oneof.localName]={case:void 0};else switch(i.kind){case"map":e[t]={};break;case"enum":e[t]=n?i.T.values[0].no:void 0;break;case"scalar":e[t]=n?Rr(i.T,i.L):void 0;break;case"message":e[t]=void 0;break}}function pr(i,e){if(i===null||typeof i!="object"||!Object.getOwnPropertyNames(wt.prototype).every(n=>n in i&&typeof i[n]=="function"))return!1;const t=i.getType();return t===null||typeof t!="function"||!("typeName"in t)||typeof t.typeName!="string"?!1:e===void 0?!0:t.typeName==e.typeName}function js(i,e){return pr(e)||!i.fieldWrapper?e:i.fieldWrapper.wrapField(e)}le.DOUBLE,le.FLOAT,le.INT64,le.UINT64,le.INT32,le.UINT32,le.BOOL,le.STRING,le.BYTES;const Jo={ignoreUnknownFields:!1},Vo={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function kl(i){return i?Object.assign(Object.assign({},Jo),i):Jo}function xl(i){return i?Object.assign(Object.assign({},Vo),i):Vo}const Bi=Symbol(),Pi=Symbol();function Nl(){return{makeReadOptions:kl,makeWriteOptions:xl,readMessage(i,e,t,n){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${i.typeName} from JSON: ${vn(e)}`);n=n??new i;const r=new Map,o=t.typeRegistry;for(const[s,u]of Object.entries(e)){const h=i.fields.findJsonName(s);if(h){if(h.oneof){if(u===null&&h.kind=="scalar")continue;const y=r.get(h.oneof);if(y!==void 0)throw new Error(`cannot decode message ${i.typeName} from JSON: multiple keys for oneof "${h.oneof.name}" present: "${y}", "${s}"`);r.set(h.oneof,s)}Ko(n,u,h,t,i)}else{let y=!1;if(o!=null&&o.findExtension&&s.startsWith("[")&&s.endsWith("]")){const v=o.findExtension(s.substring(1,s.length-1));if(v&&v.extendee.typeName==i.typeName){y=!0;const[d,l]=Ms(v);Ko(d,u,v.field,t,v),Sl(n,v,l(),t)}}if(!y&&!t.ignoreUnknownFields)throw new Error(`cannot decode message ${i.typeName} from JSON: key "${s}" is unknown`)}}return n},writeMessage(i,e){const t=i.getType(),n={};let r;try{for(r of t.fields.byNumber()){if(!Fs(r,i)){if(r.req)throw"required field not set";if(!e.emitDefaultValues||!Pl(r))continue}const s=r.oneof?i[r.oneof.localName].value:i[r.localName],u=Ho(r,s,e);u!==void 0&&(n[e.useProtoFieldName?r.name:r.jsonName]=u)}const o=e.typeRegistry;if(o!=null&&o.findExtensionFor)for(const s of t.runtime.bin.listUnknownFields(i)){const u=o.findExtensionFor(t.typeName,s.no);if(u&&Bs(i,u)){const h=Ol(i,u,e),y=Ho(u.field,h,e);y!==void 0&&(n[u.field.jsonName]=y)}}}catch(o){const s=r?`cannot encode field ${t.typeName}.${r.name} to JSON`:`cannot encode message ${t.typeName} to JSON`,u=o instanceof Error?o.message:String(o);throw new Error(s+(u.length>0?`: ${u}`:""))}return n},readScalar(i,e,t){return Hr(i,e,t??rr.BIGINT,!0)},writeScalar(i,e,t){if(e!==void 0&&(t||Ls(i,e)))return Ci(i,e)},debug:vn}}function vn(i){if(i===null)return"null";switch(typeof i){case"object":return Array.isArray(i)?"array":"object";case"string":return i.length>100?"string":`"${i.split('"').join('\\"')}"`;default:return String(i)}}function Ko(i,e,t,n,r){let o=t.localName;if(t.repeated){if(tt(t.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${r.typeName}.${t.name} from JSON: ${vn(e)}`);const s=i[o];for(const u of e){if(u===null)throw new Error(`cannot decode field ${r.typeName}.${t.name} from JSON: ${vn(u)}`);switch(t.kind){case"message":s.push(t.T.fromJson(u,n));break;case"enum":const h=to(t.T,u,n.ignoreUnknownFields,!0);h!==Pi&&s.push(h);break;case"scalar":try{s.push(Hr(t.T,u,t.L,!0))}catch(y){let v=`cannot decode field ${r.typeName}.${t.name} from JSON: ${vn(u)}`;throw y instanceof Error&&y.message.length>0&&(v+=`: ${y.message}`),new Error(v)}break}}}else if(t.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${r.typeName}.${t.name} from JSON: ${vn(e)}`);const s=i[o];for(const[u,h]of Object.entries(e)){if(h===null)throw new Error(`cannot decode field ${r.typeName}.${t.name} from JSON: map value null`);let y;try{y=Il(t.K,u)}catch(v){let d=`cannot decode map key for field ${r.typeName}.${t.name} from JSON: ${vn(e)}`;throw v instanceof Error&&v.message.length>0&&(d+=`: ${v.message}`),new Error(d)}switch(t.V.kind){case"message":s[y]=t.V.T.fromJson(h,n);break;case"enum":const v=to(t.V.T,h,n.ignoreUnknownFields,!0);v!==Pi&&(s[y]=v);break;case"scalar":try{s[y]=Hr(t.V.T,h,rr.BIGINT,!0)}catch(d){let l=`cannot decode map value for field ${r.typeName}.${t.name} from JSON: ${vn(e)}`;throw d instanceof Error&&d.message.length>0&&(l+=`: ${d.message}`),new Error(l)}break}}}else switch(t.oneof&&(i=i[t.oneof.localName]={case:o},o="value"),t.kind){case"message":const s=t.T;if(e===null&&s.typeName!="google.protobuf.Value")return;let u=i[o];pr(u)?u.fromJson(e,n):(i[o]=u=s.fromJson(e,n),s.fieldWrapper&&!t.oneof&&(i[o]=s.fieldWrapper.unwrapField(u)));break;case"enum":const h=to(t.T,e,n.ignoreUnknownFields,!1);switch(h){case Bi:zo(t,i);break;case Pi:break;default:i[o]=h;break}break;case"scalar":try{const y=Hr(t.T,e,t.L,!1);switch(y){case Bi:zo(t,i);break;default:i[o]=y;break}}catch(y){let v=`cannot decode field ${r.typeName}.${t.name} from JSON: ${vn(e)}`;throw y instanceof Error&&y.message.length>0&&(v+=`: ${y.message}`),new Error(v)}break}}function Il(i,e){if(i===le.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Hr(i,e,rr.BIGINT,!0).toString()}function Hr(i,e,t,n){if(e===null)return n?Rr(i,t):Bi;switch(i){case le.DOUBLE:case le.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return i==le.FLOAT&&xs(r),r;case le.INT32:case le.FIXED32:case le.SFIXED32:case le.SINT32:case le.UINT32:let o;if(typeof e=="number"?o=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(o=Number(e)),o===void 0)break;return i==le.UINT32||i==le.FIXED32?co(o):Ni(o),o;case le.INT64:case le.SFIXED64:case le.SINT64:if(typeof e!="number"&&typeof e!="string")break;const s=lt.parse(e);return t?s.toString():s;case le.FIXED64:case le.UINT64:if(typeof e!="number"&&typeof e!="string")break;const u=lt.uParse(e);return t?u.toString():u;case le.BOOL:if(typeof e!="boolean")break;return e;case le.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case le.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return bo.dec(e)}throw new Error}function to(i,e,t,n){if(e===null)return i.typeName=="google.protobuf.NullValue"?0:n?i.values[0].no:Bi;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=i.findName(e);if(r!==void 0)return r.no;if(t)return Pi;break}throw new Error(`cannot decode enum ${i.typeName} from JSON: ${vn(e)}`)}function Pl(i){return i.repeated||i.kind=="map"?!0:!(i.oneof||i.kind=="message"||i.opt||i.req)}function Ho(i,e,t){if(i.kind=="map"){tt(typeof e=="object"&&e!=null);const n={},r=Object.entries(e);switch(i.V.kind){case"scalar":for(const[s,u]of r)n[s.toString()]=Ci(i.V.T,u);break;case"message":for(const[s,u]of r)n[s.toString()]=u.toJson(t);break;case"enum":const o=i.V.T;for(const[s,u]of r)n[s.toString()]=no(o,u,t.enumAsInteger);break}return t.emitDefaultValues||r.length>0?n:void 0}if(i.repeated){tt(Array.isArray(e));const n=[];switch(i.kind){case"scalar":for(let r=0;r<e.length;r++)n.push(Ci(i.T,e[r]));break;case"enum":for(let r=0;r<e.length;r++)n.push(no(i.T,e[r],t.enumAsInteger));break;case"message":for(let r=0;r<e.length;r++)n.push(e[r].toJson(t));break}return t.emitDefaultValues||n.length>0?n:void 0}switch(i.kind){case"scalar":return Ci(i.T,e);case"enum":return no(i.T,e,t.enumAsInteger);case"message":return js(i.T,e).toJson(t)}}function no(i,e,t){var n;if(tt(typeof e=="number"),i.typeName=="google.protobuf.NullValue")return null;if(t)return e;const r=i.findNumber(e);return(n=r==null?void 0:r.name)!==null&&n!==void 0?n:e}function Ci(i,e){switch(i){case le.INT32:case le.SFIXED32:case le.SINT32:case le.FIXED32:case le.UINT32:return tt(typeof e=="number"),e;case le.FLOAT:case le.DOUBLE:return tt(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case le.STRING:return tt(typeof e=="string"),e;case le.BOOL:return tt(typeof e=="boolean"),e;case le.UINT64:case le.FIXED64:case le.INT64:case le.SFIXED64:case le.SINT64:return tt(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case le.BYTES:return tt(e instanceof Uint8Array),bo.enc(e)}}const _r=Symbol("@bufbuild/protobuf/unknown-fields"),Wo={readUnknownFields:!0,readerFactory:i=>new Tl(i)},Go={writeUnknownFields:!0,writerFactory:()=>new wl};function Cl(i){return i?Object.assign(Object.assign({},Wo),i):Wo}function Rl(i){return i?Object.assign(Object.assign({},Go),i):Go}function Dl(){return{makeReadOptions:Cl,makeWriteOptions:Rl,listUnknownFields(i){var e;return(e=i[_r])!==null&&e!==void 0?e:[]},discardUnknownFields(i){delete i[_r]},writeUnknownFields(i,e){const n=i[_r];if(n)for(const r of n)e.tag(r.no,r.wireType).raw(r.data)},onUnknownField(i,e,t,n){const r=i;Array.isArray(r[_r])||(r[_r]=[]),r[_r].push({no:e,wireType:t,data:n})},readMessage(i,e,t,n,r){const o=i.getType(),s=r?e.len:e.pos+t;let u,h;for(;e.pos<s&&([u,h]=e.tag(),!(r===!0&&h==ot.EndGroup));){const y=o.fields.find(u);if(!y){const v=e.skip(h,u);n.readUnknownFields&&this.onUnknownField(i,u,h,v);continue}Yo(i,e,y,h,n)}if(r&&(h!=ot.EndGroup||u!==t))throw new Error("invalid end group tag")},readField:Yo,writeMessage(i,e,t){const n=i.getType();for(const r of n.fields.byNumber()){if(!Fs(r,i)){if(r.req)throw new Error(`cannot encode field ${n.typeName}.${r.name} to binary: required field not set`);continue}const o=r.oneof?i[r.oneof.localName].value:i[r.localName];Zo(r,o,e,t)}return t.writeUnknownFields&&this.writeUnknownFields(i,e),e},writeField(i,e,t,n){e!==void 0&&Zo(i,e,t,n)}}}function Yo(i,e,t,n,r){let{repeated:o,localName:s}=t;switch(t.oneof&&(i=i[t.oneof.localName],i.case!=s&&delete i.value,i.case=s,s="value"),t.kind){case"scalar":case"enum":const u=t.kind=="enum"?le.INT32:t.T;let h=qi;if(t.kind=="scalar"&&t.L>0&&(h=Ml),o){let l=i[s];if(n==ot.LengthDelimited&&u!=le.STRING&&u!=le.BYTES){let p=e.uint32()+e.pos;for(;e.pos<p;)l.push(h(e,u))}else l.push(h(e,u))}else i[s]=h(e,u);break;case"message":const y=t.T;o?i[s].push(Ri(e,new y,r,t)):pr(i[s])?Ri(e,i[s],r,t):(i[s]=Ri(e,new y,r,t),y.fieldWrapper&&!t.oneof&&!t.repeated&&(i[s]=y.fieldWrapper.unwrapField(i[s])));break;case"map":let[v,d]=Ll(t,e,r);i[s][v]=d;break}}function Ri(i,e,t,n){const r=e.getType().runtime.bin,o=n==null?void 0:n.delimited;return r.readMessage(e,i,o?n.no:i.uint32(),t,o),e}function Ll(i,e,t){const n=e.uint32(),r=e.pos+n;let o,s;for(;e.pos<r;){const[u]=e.tag();switch(u){case 1:o=qi(e,i.K);break;case 2:switch(i.V.kind){case"scalar":s=qi(e,i.V.T);break;case"enum":s=e.int32();break;case"message":s=Ri(e,new i.V.T,t,void 0);break}break}}if(o===void 0&&(o=Rr(i.K,rr.BIGINT)),typeof o!="string"&&typeof o!="number"&&(o=o.toString()),s===void 0)switch(i.V.kind){case"scalar":s=Rr(i.V.T,rr.BIGINT);break;case"enum":s=i.V.T.values[0].no;break;case"message":s=new i.V.T;break}return[o,s]}function Ml(i,e){const t=qi(i,e);return typeof t=="bigint"?t.toString():t}function qi(i,e){switch(e){case le.STRING:return i.string();case le.BOOL:return i.bool();case le.DOUBLE:return i.double();case le.FLOAT:return i.float();case le.INT32:return i.int32();case le.INT64:return i.int64();case le.UINT64:return i.uint64();case le.FIXED64:return i.fixed64();case le.BYTES:return i.bytes();case le.FIXED32:return i.fixed32();case le.SFIXED32:return i.sfixed32();case le.SFIXED64:return i.sfixed64();case le.SINT64:return i.sint64();case le.UINT32:return i.uint32();case le.SINT32:return i.sint32()}}function Zo(i,e,t,n){tt(e!==void 0);const r=i.repeated;switch(i.kind){case"scalar":case"enum":let o=i.kind=="enum"?le.INT32:i.T;if(r)if(tt(Array.isArray(e)),i.packed)ql(t,o,i.no,e);else for(const s of e)Wr(t,o,i.no,s);else Wr(t,o,i.no,e);break;case"message":if(r){tt(Array.isArray(e));for(const s of e)Xo(t,n,i,s)}else Xo(t,n,i,e);break;case"map":tt(typeof e=="object"&&e!=null);for(const[s,u]of Object.entries(e))Bl(t,n,i,s,u);break}}function Bl(i,e,t,n,r){i.tag(t.no,ot.LengthDelimited),i.fork();let o=n;switch(t.K){case le.INT32:case le.FIXED32:case le.UINT32:case le.SFIXED32:case le.SINT32:o=Number.parseInt(n);break;case le.BOOL:tt(n=="true"||n=="false"),o=n=="true";break}switch(Wr(i,t.K,1,o),t.V.kind){case"scalar":Wr(i,t.V.T,2,r);break;case"enum":Wr(i,le.INT32,2,r);break;case"message":tt(r!==void 0),i.tag(2,ot.LengthDelimited).bytes(r.toBinary(e));break}i.join()}function Xo(i,e,t,n){const r=js(t.T,n);t.delimited?i.tag(t.no,ot.StartGroup).raw(r.toBinary(e)).tag(t.no,ot.EndGroup):i.tag(t.no,ot.LengthDelimited).bytes(r.toBinary(e))}function Wr(i,e,t,n){tt(n!==void 0);let[r,o]=Us(e);i.tag(t,r)[o](n)}function ql(i,e,t,n){if(!n.length)return;i.tag(t,ot.LengthDelimited).fork();let[,r]=Us(e);for(let o=0;o<n.length;o++)i[r](n[o]);i.join()}function Us(i){let e=ot.Varint;switch(i){case le.BYTES:case le.STRING:e=ot.LengthDelimited;break;case le.DOUBLE:case le.FIXED64:case le.SFIXED64:e=ot.Bit64;break;case le.FIXED32:case le.SFIXED32:case le.FLOAT:e=ot.Bit32;break}const t=le[i].toLowerCase();return[e,t]}function Fl(){return{setEnumType:Is,initPartial(i,e){if(i===void 0)return;const t=e.getType();for(const n of t.fields.byMember()){const r=n.localName,o=e,s=i;if(s[r]!=null)switch(n.kind){case"oneof":const u=s[r].case;if(u===void 0)continue;const h=n.findField(u);let y=s[r].value;h&&h.kind=="message"&&!pr(y,h.T)?y=new h.T(y):h&&h.kind==="scalar"&&h.T===le.BYTES&&(y=Jr(y)),o[r]={case:u,value:y};break;case"scalar":case"enum":let v=s[r];n.T===le.BYTES&&(v=n.repeated?v.map(Jr):Jr(v)),o[r]=v;break;case"map":switch(n.V.kind){case"scalar":case"enum":if(n.V.T===le.BYTES)for(const[a,p]of Object.entries(s[r]))o[r][a]=Jr(p);else Object.assign(o[r],s[r]);break;case"message":const l=n.V.T;for(const a of Object.keys(s[r])){let p=s[r][a];l.fieldWrapper||(p=new l(p)),o[r][a]=p}break}break;case"message":const d=n.T;if(n.repeated)o[r]=s[r].map(l=>pr(l,d)?l:new d(l));else{const l=s[r];d.fieldWrapper?d.typeName==="google.protobuf.BytesValue"?o[r]=Jr(l):o[r]=l:o[r]=pr(l,d)?l:new d(l)}break}}},equals(i,e,t){return e===t?!0:!e||!t?!1:i.fields.byMember().every(n=>{const r=e[n.localName],o=t[n.localName];if(n.repeated){if(r.length!==o.length)return!1;switch(n.kind){case"message":return r.every((s,u)=>n.T.equals(s,o[u]));case"scalar":return r.every((s,u)=>Hn(n.T,s,o[u]));case"enum":return r.every((s,u)=>Hn(le.INT32,s,o[u]))}throw new Error(`repeated cannot contain ${n.kind}`)}switch(n.kind){case"message":return n.T.equals(r,o);case"enum":return Hn(le.INT32,r,o);case"scalar":return Hn(n.T,r,o);case"oneof":if(r.case!==o.case)return!1;const s=n.findField(r.case);if(s===void 0)return!0;switch(s.kind){case"message":return s.T.equals(r.value,o.value);case"enum":return Hn(le.INT32,r.value,o.value);case"scalar":return Hn(s.T,r.value,o.value)}throw new Error(`oneof cannot contain ${s.kind}`);case"map":const u=Object.keys(r).concat(Object.keys(o));switch(n.V.kind){case"message":const h=n.V.T;return u.every(v=>h.equals(r[v],o[v]));case"enum":return u.every(v=>Hn(le.INT32,r[v],o[v]));case"scalar":const y=n.V.T;return u.every(v=>Hn(y,r[v],o[v]))}break}})},clone(i){const e=i.getType(),t=new e,n=t;for(const r of e.fields.byMember()){const o=i[r.localName];let s;if(r.repeated)s=o.map(Ai);else if(r.kind=="map"){s=n[r.localName];for(const[u,h]of Object.entries(o))s[u]=Ai(h)}else r.kind=="oneof"?s=r.findField(o.case)?{case:o.case,value:Ai(o.value)}:{case:void 0}:s=Ai(o);n[r.localName]=s}for(const r of e.runtime.bin.listUnknownFields(i))e.runtime.bin.onUnknownField(n,r.no,r.wireType,r.data);return t}}}function Ai(i){if(i===void 0)return i;if(pr(i))return i.clone();if(i instanceof Uint8Array){const e=new Uint8Array(i.byteLength);return e.set(i),e}return i}function Jr(i){return i instanceof Uint8Array?i:new Uint8Array(i)}function jl(i,e,t){return{syntax:i,json:Nl(),bin:Dl(),util:Object.assign(Object.assign({},Fl()),{newFieldList:e,initFields:t}),makeMessageType(n,r,o){return gl(this,n,r,o)},makeEnum:dl,makeEnumType:Ps,getEnumType:hl,makeExtension(n,r,o){return Al(this,n,r,o)}}}class Ul{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const n of this.list())t[n.jsonName]=t[n.name]=n;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const n of this.list())t[n.no]=n;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const n of this.list())n.oneof?n.oneof!==t&&(t=n.oneof,e.push(t)):e.push(n)}return this.members}}function $s(i,e){const t=zs(i);return e?t:Hl(Kl(t))}function $l(i){return $s(i,!1)}const zl=zs;function zs(i){let e=!1;const t=[];for(let n=0;n<i.length;n++){let r=i.charAt(n);switch(r){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(r),e=!1;break;default:e&&(e=!1,r=r.toUpperCase()),t.push(r);break}}return t.join("")}const Jl=new Set(["constructor","toString","toJSON","valueOf"]),Vl=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Js=i=>`${i}$`,Kl=i=>Vl.has(i)?Js(i):i,Hl=i=>Jl.has(i)?Js(i):i;class Wl{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=$l(e)}addField(e){tt(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}function Gl(i,e){var t,n,r,o,s,u;const h=[];let y;for(const v of typeof i=="function"?i():i){const d=v;if(d.localName=$s(v.name,v.oneof!==void 0),d.jsonName=(t=v.jsonName)!==null&&t!==void 0?t:zl(v.name),d.repeated=(n=v.repeated)!==null&&n!==void 0?n:!1,v.kind=="scalar"&&(d.L=(r=v.L)!==null&&r!==void 0?r:rr.BIGINT),d.delimited=(o=v.delimited)!==null&&o!==void 0?o:!1,d.req=(s=v.req)!==null&&s!==void 0?s:!1,d.opt=(u=v.opt)!==null&&u!==void 0?u:!1,v.packed===void 0&&(d.packed=v.kind=="enum"||v.kind=="scalar"&&v.T!=le.BYTES&&v.T!=le.STRING),v.oneof!==void 0){const l=typeof v.oneof=="string"?v.oneof:v.oneof.name;(!y||y.name!=l)&&(y=new Wl(l)),d.oneof=y,y.addField(d)}h.push(d)}return h}const ee=jl("proto3",i=>new Ul(i,e=>Gl(e)),i=>{for(const e of i.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,n=i;if(e.repeated){n[t]=[];continue}switch(e.kind){case"oneof":n[t]={case:void 0};break;case"enum":n[t]=0;break;case"map":n[t]={};break;case"scalar":n[t]=Rr(e.T,e.L);break}}});var vt;(function(i){i[i.Unary=0]="Unary",i[i.ServerStreaming=1]="ServerStreaming",i[i.ClientStreaming=2]="ClientStreaming",i[i.BiDiStreaming=3]="BiDiStreaming"})(vt||(vt={}));var Qo;(function(i){i[i.NoSideEffects=1]="NoSideEffects",i[i.Idempotent=2]="Idempotent"})(Qo||(Qo={}));class pt extends wt{constructor(e){super(),this.seconds=lt.zero,this.nanos=0,ee.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${ee.json.debug(e)}`);const n=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const r=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(r))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=lt.parse(r/1e3),this.nanos=0,n[7]&&(this.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let n="Z";if(this.nanos>0){const r=(this.nanos+1e9).toString().substring(1);r.substring(3)==="000000"?n="."+r.substring(0,3)+"Z":r.substring(6)==="000"?n="."+r.substring(0,6)+"Z":n="."+r+"Z"}return new Date(t).toISOString().replace(".000Z",n)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return pt.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new pt({seconds:lt.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new pt().fromBinary(e,t)}static fromJson(e,t){return new pt().fromJson(e,t)}static fromJsonString(e,t){return new pt().fromJsonString(e,t)}static equals(e,t){return ee.util.equals(pt,e,t)}}pt.runtime=ee;pt.typeName="google.protobuf.Timestamp";pt.fields=ee.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Mn extends wt{constructor(e){super(),this.seconds=lt.zero,this.nanos=0,ee.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${ee.json.debug(e)}`);const n=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(n===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${ee.json.debug(e)}`);const r=Number(n[1]);if(r>315576e6||r<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${ee.json.debug(e)}`);if(this.seconds=lt.parse(r),typeof n[2]=="string"){const o=n[2]+"0".repeat(9-n[2].length);this.nanos=parseInt(o),(r<0||Object.is(r,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let t=this.seconds.toString();if(this.nanos!==0){let n=Math.abs(this.nanos).toString();n="0".repeat(9-n.length)+n,n.substring(3)==="000000"?n=n.substring(0,3):n.substring(6)==="000"&&(n=n.substring(0,6)),t+="."+n,this.nanos<0&&Number(this.seconds)==0&&(t="-"+t)}return t+"s"}static fromBinary(e,t){return new Mn().fromBinary(e,t)}static fromJson(e,t){return new Mn().fromJson(e,t)}static fromJsonString(e,t){return new Mn().fromJsonString(e,t)}static equals(e,t){return ee.util.equals(Mn,e,t)}}Mn.runtime=ee;Mn.typeName="google.protobuf.Duration";Mn.fields=ee.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class bn extends wt{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),ee.util.initPartial(e,this)}toJson(e){var t;if(this.typeUrl==="")return{};const n=this.typeUrlToName(this.typeUrl),r=(t=e==null?void 0:e.typeRegistry)===null||t===void 0?void 0:t.findMessage(n);if(!r)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let s=r.fromBinary(this.value).toJson(e);return(n.startsWith("google.protobuf.")||s===null||Array.isArray(s)||typeof s!="object")&&(s={value:s}),s["@type"]=this.typeUrl,s}fromJson(e,t){var n;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const r=e["@type"];if(typeof r!="string"||r=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const o=this.typeUrlToName(r),s=(n=t==null?void 0:t.typeRegistry)===null||n===void 0?void 0:n.findMessage(o);if(!s)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${r} is not in the type registry`);let u;if(o.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))u=s.fromJson(e.value,t);else{const h=Object.assign({},e);delete h["@type"],u=s.fromJson(h,t)}return this.packFrom(u),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const t=e.findMessage(this.typeUrlToName(this.typeUrl));if(t)return t.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const t=this.typeUrlToName(this.typeUrl);let n="";return typeof e=="string"?n=e:n=e.typeName,t===n}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const t=e.lastIndexOf("/"),n=t>=0?e.substring(t+1):e;if(!n.length)throw new Error(`invalid type url: ${e}`);return n}static pack(e){const t=new bn;return t.packFrom(e),t}static fromBinary(e,t){return new bn().fromBinary(e,t)}static fromJson(e,t){return new bn().fromJson(e,t)}static fromJsonString(e,t){return new bn().fromJsonString(e,t)}static equals(e,t){return ee.util.equals(bn,e,t)}}bn.runtime=ee;bn.typeName="google.protobuf.Any";bn.fields=ee.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class wn extends wt{constructor(e){super(),this.value=0,ee.util.initPartial(e,this)}toJson(e){return ee.json.writeScalar(le.DOUBLE,this.value,!0)}fromJson(e,t){try{this.value=ee.json.readScalar(le.DOUBLE,e)}catch(n){let r='cannot decode message google.protobuf.DoubleValue from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(e,t){return new wn().fromBinary(e,t)}static fromJson(e,t){return new wn().fromJson(e,t)}static fromJsonString(e,t){return new wn().fromJsonString(e,t)}static equals(e,t){return ee.util.equals(wn,e,t)}}wn.runtime=ee;wn.typeName="google.protobuf.DoubleValue";wn.fields=ee.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);wn.fieldWrapper={wrapField(i){return new wn({value:i})},unwrapField(i){return i.value}};class Tn extends wt{constructor(e){super(),this.value=0,ee.util.initPartial(e,this)}toJson(e){return ee.json.writeScalar(le.FLOAT,this.value,!0)}fromJson(e,t){try{this.value=ee.json.readScalar(le.FLOAT,e)}catch(n){let r='cannot decode message google.protobuf.FloatValue from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(e,t){return new Tn().fromBinary(e,t)}static fromJson(e,t){return new Tn().fromJson(e,t)}static fromJsonString(e,t){return new Tn().fromJsonString(e,t)}static equals(e,t){return ee.util.equals(Tn,e,t)}}Tn.runtime=ee;Tn.typeName="google.protobuf.FloatValue";Tn.fields=ee.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);Tn.fieldWrapper={wrapField(i){return new Tn({value:i})},unwrapField(i){return i.value}};class An extends wt{constructor(e){super(),this.value=lt.zero,ee.util.initPartial(e,this)}toJson(e){return ee.json.writeScalar(le.INT64,this.value,!0)}fromJson(e,t){try{this.value=ee.json.readScalar(le.INT64,e)}catch(n){let r='cannot decode message google.protobuf.Int64Value from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(e,t){return new An().fromBinary(e,t)}static fromJson(e,t){return new An().fromJson(e,t)}static fromJsonString(e,t){return new An().fromJsonString(e,t)}static equals(e,t){return ee.util.equals(An,e,t)}}An.runtime=ee;An.typeName="google.protobuf.Int64Value";An.fields=ee.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);An.fieldWrapper={wrapField(i){return new An({value:i})},unwrapField(i){return i.value}};class _n extends wt{constructor(e){super(),this.value=lt.zero,ee.util.initPartial(e,this)}toJson(e){return ee.json.writeScalar(le.UINT64,this.value,!0)}fromJson(e,t){try{this.value=ee.json.readScalar(le.UINT64,e)}catch(n){let r='cannot decode message google.protobuf.UInt64Value from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(e,t){return new _n().fromBinary(e,t)}static fromJson(e,t){return new _n().fromJson(e,t)}static fromJsonString(e,t){return new _n().fromJsonString(e,t)}static equals(e,t){return ee.util.equals(_n,e,t)}}_n.runtime=ee;_n.typeName="google.protobuf.UInt64Value";_n.fields=ee.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);_n.fieldWrapper={wrapField(i){return new _n({value:i})},unwrapField(i){return i.value}};class En extends wt{constructor(e){super(),this.value=0,ee.util.initPartial(e,this)}toJson(e){return ee.json.writeScalar(le.INT32,this.value,!0)}fromJson(e,t){try{this.value=ee.json.readScalar(le.INT32,e)}catch(n){let r='cannot decode message google.protobuf.Int32Value from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(e,t){return new En().fromBinary(e,t)}static fromJson(e,t){return new En().fromJson(e,t)}static fromJsonString(e,t){return new En().fromJsonString(e,t)}static equals(e,t){return ee.util.equals(En,e,t)}}En.runtime=ee;En.typeName="google.protobuf.Int32Value";En.fields=ee.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);En.fieldWrapper={wrapField(i){return new En({value:i})},unwrapField(i){return i.value}};class On extends wt{constructor(e){super(),this.value=0,ee.util.initPartial(e,this)}toJson(e){return ee.json.writeScalar(le.UINT32,this.value,!0)}fromJson(e,t){try{this.value=ee.json.readScalar(le.UINT32,e)}catch(n){let r='cannot decode message google.protobuf.UInt32Value from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(e,t){return new On().fromBinary(e,t)}static fromJson(e,t){return new On().fromJson(e,t)}static fromJsonString(e,t){return new On().fromJsonString(e,t)}static equals(e,t){return ee.util.equals(On,e,t)}}On.runtime=ee;On.typeName="google.protobuf.UInt32Value";On.fields=ee.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);On.fieldWrapper={wrapField(i){return new On({value:i})},unwrapField(i){return i.value}};class Sn extends wt{constructor(e){super(),this.value=!1,ee.util.initPartial(e,this)}toJson(e){return ee.json.writeScalar(le.BOOL,this.value,!0)}fromJson(e,t){try{this.value=ee.json.readScalar(le.BOOL,e)}catch(n){let r='cannot decode message google.protobuf.BoolValue from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(e,t){return new Sn().fromBinary(e,t)}static fromJson(e,t){return new Sn().fromJson(e,t)}static fromJsonString(e,t){return new Sn().fromJsonString(e,t)}static equals(e,t){return ee.util.equals(Sn,e,t)}}Sn.runtime=ee;Sn.typeName="google.protobuf.BoolValue";Sn.fields=ee.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);Sn.fieldWrapper={wrapField(i){return new Sn({value:i})},unwrapField(i){return i.value}};class Pt extends wt{constructor(e){super(),this.value="",ee.util.initPartial(e,this)}toJson(e){return ee.json.writeScalar(le.STRING,this.value,!0)}fromJson(e,t){try{this.value=ee.json.readScalar(le.STRING,e)}catch(n){let r='cannot decode message google.protobuf.StringValue from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(e,t){return new Pt().fromBinary(e,t)}static fromJson(e,t){return new Pt().fromJson(e,t)}static fromJsonString(e,t){return new Pt().fromJsonString(e,t)}static equals(e,t){return ee.util.equals(Pt,e,t)}}Pt.runtime=ee;Pt.typeName="google.protobuf.StringValue";Pt.fields=ee.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);Pt.fieldWrapper={wrapField(i){return new Pt({value:i})},unwrapField(i){return i.value}};class kn extends wt{constructor(e){super(),this.value=new Uint8Array(0),ee.util.initPartial(e,this)}toJson(e){return ee.json.writeScalar(le.BYTES,this.value,!0)}fromJson(e,t){try{this.value=ee.json.readScalar(le.BYTES,e)}catch(n){let r='cannot decode message google.protobuf.BytesValue from JSON"';throw n instanceof Error&&n.message.length>0&&(r+=`: ${n.message}`),new Error(r)}return this}static fromBinary(e,t){return new kn().fromBinary(e,t)}static fromJson(e,t){return new kn().fromJson(e,t)}static fromJsonString(e,t){return new kn().fromJsonString(e,t)}static equals(e,t){return ee.util.equals(kn,e,t)}}kn.runtime=ee;kn.typeName="google.protobuf.BytesValue";kn.fields=ee.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);kn.fieldWrapper={wrapField(i){return new kn({value:i})},unwrapField(i){return i.value}};function Yl(i,e,t){try{const n=bo.dec(i);return e?e.fromBinary(n,t):n}catch(n){throw at.from(n,We.DataLoss)}}function Zl(i,e){const t={};for(const[n,r]of Object.entries(i.methods)){const o=e(Object.assign(Object.assign({},r),{localName:n,service:i}));o!=null&&(t[n]=o)}return t}function es(i){let e,t=new Uint8Array(0);function n(r){const o=new Uint8Array(t.length+r.length);o.set(t),o.set(r,t.length),t=o}return new ReadableStream({start(){e=i.getReader()},async pull(r){let o;for(;;){if(o===void 0&&t.byteLength>=5){let h=0;for(let y=1;y<5;y++)h=(h<<8)+t[y];o={flags:t[0],length:h}}if(o!==void 0&&t.byteLength>=o.length+5)break;const u=await e.read();if(u.done)break;n(u.value)}if(o===void 0){if(t.byteLength==0){r.close();return}r.error(new at("premature end of stream",We.DataLoss));return}const s=t.subarray(5,5+o.length);t=t.subarray(5+o.length),r.enqueue({flags:o.flags,data:s})}})}function ts(i,e){const t=new Uint8Array(e.length+5);t.set(e,5);const n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setUint8(0,i),n.setUint32(1,e.length),t}var Xl=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=i[o]&&function(s){return new Promise(function(u,h){s=i[o](s),r(u,h,s.done,s.value)})}}function r(o,s,u,h){Promise.resolve(h).then(function(y){o({value:y,done:u})},s)}},Xr=function(i){return this instanceof Xr?(this.v=i,this):new Xr(i)},Ql=function(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),r,o=[];return r={},u("next"),u("throw"),u("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(a){return function(p){return Promise.resolve(p).then(a,d)}}function u(a,p){n[a]&&(r[a]=function(b){return new Promise(function(w,m){o.push([a,b,w,m])>1||h(a,b)})},p&&(r[a]=p(r[a])))}function h(a,p){try{y(n[a](p))}catch(b){l(o[0][3],b)}}function y(a){a.value instanceof Xr?Promise.resolve(a.value.v).then(v,d):l(o[0][2],a)}function v(a){h("next",a)}function d(a){h("throw",a)}function l(a,p){a(p),o.shift(),o.length&&h(o[0][0],o[0][1])}},eu=function(i){var e,t;return e={},n("next"),n("throw",function(r){throw r}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(r,o){e[r]=i[r]?function(s){return(t=!t)?{value:Xr(i[r](s)),done:!1}:o?o(s):s}:o}};function tu(i){return Ql(this,arguments,function*(){yield Xr(yield*eu(Xl(i)))})}var Vs=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=i[o]&&function(s){return new Promise(function(u,h){s=i[o](s),r(u,h,s.done,s.value)})}}function r(o,s,u,h){Promise.resolve(h).then(function(y){o({value:y,done:u})},s)}},Dr=function(i){return this instanceof Dr?(this.v=i,this):new Dr(i)},nu=function(i){var e,t;return e={},n("next"),n("throw",function(r){throw r}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(r,o){e[r]=i[r]?function(s){return(t=!t)?{value:Dr(i[r](s)),done:!1}:o?o(s):s}:o}},ru=function(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),r,o=[];return r={},u("next"),u("throw"),u("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(a){return function(p){return Promise.resolve(p).then(a,d)}}function u(a,p){n[a]&&(r[a]=function(b){return new Promise(function(w,m){o.push([a,b,w,m])>1||h(a,b)})},p&&(r[a]=p(r[a])))}function h(a,p){try{y(n[a](p))}catch(b){l(o[0][3],b)}}function y(a){a.value instanceof Dr?Promise.resolve(a.value.v).then(v,d):l(o[0][2],a)}function v(a){h("next",a)}function d(a){h("throw",a)}function l(a,p){a(p),o.shift(),o.length&&h(o[0][0],o[0][1])}};function iu(i,e){return Zl(i,t=>{switch(t.kind){case vt.Unary:return ou(e,i,t);case vt.ServerStreaming:return su(e,i,t);case vt.ClientStreaming:return au(e,i,t);case vt.BiDiStreaming:return lu(e,i,t);default:return null}})}function ou(i,e,t){return async function(n,r){var o,s;const u=await i.unary(e,t,r==null?void 0:r.signal,r==null?void 0:r.timeoutMs,r==null?void 0:r.headers,n,r==null?void 0:r.contextValues);return(o=r==null?void 0:r.onHeader)===null||o===void 0||o.call(r,u.header),(s=r==null?void 0:r.onTrailer)===null||s===void 0||s.call(r,u.trailer),u.message}}function su(i,e,t){return function(n,r){return Ks(i.stream(e,t,r==null?void 0:r.signal,r==null?void 0:r.timeoutMs,r==null?void 0:r.headers,tu([n]),r==null?void 0:r.contextValues),r)}}function au(i,e,t){return async function(n,r){var o,s,u,h,y,v;const d=await i.stream(e,t,r==null?void 0:r.signal,r==null?void 0:r.timeoutMs,r==null?void 0:r.headers,n,r==null?void 0:r.contextValues);(y=r==null?void 0:r.onHeader)===null||y===void 0||y.call(r,d.header);let l;try{for(var a=!0,p=Vs(d.message),b;b=await p.next(),o=b.done,!o;a=!0)h=b.value,a=!1,l=h}catch(w){s={error:w}}finally{try{!a&&!o&&(u=p.return)&&await u.call(p)}finally{if(s)throw s.error}}if(!l)throw new at("protocol error: missing response message",We.Internal);return(v=r==null?void 0:r.onTrailer)===null||v===void 0||v.call(r,d.trailer),l}}function lu(i,e,t){return function(n,r){return Ks(i.stream(e,t,r==null?void 0:r.signal,r==null?void 0:r.timeoutMs,r==null?void 0:r.headers,n,r==null?void 0:r.contextValues),r)}}function Ks(i,e){const t=function(){var n,r;return ru(this,arguments,function*(){const o=yield Dr(i);(n=e==null?void 0:e.onHeader)===null||n===void 0||n.call(e,o.header),yield Dr(yield*nu(Vs(o.message))),(r=e==null?void 0:e.onTrailer)===null||r===void 0||r.call(e,o.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function uu(...i){const e=new AbortController,t=i.filter(r=>r!==void 0).concat(e.signal);for(const r of t){if(r.aborted){n.apply(r);break}r.addEventListener("abort",n)}function n(){e.signal.aborted||e.abort(Hs(this));for(const r of t)r.removeEventListener("abort",n)}return e}function cu(i){const e=new AbortController,t=()=>{e.abort(new at("the operation timed out",We.DeadlineExceeded))};let n;return i!==void 0&&(i<=0?t():n=setTimeout(t,i)),{signal:e.signal,cleanup:()=>clearTimeout(n)}}function Hs(i){if(!i.aborted)return;if(i.reason!==void 0)return i.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function ns(){return{get(i){return i.id in this?this[i.id]:i.defaultValue},set(i,e){return this[i.id]=e,this},delete(i){return delete this[i.id],this}}}const ro=128;function rs(i){const e=new Headers,t=new TextDecoder().decode(i).split(`\r
`);for(const n of t){if(n==="")continue;const r=n.indexOf(":");if(r>0){const o=n.substring(0,r).trim(),s=n.substring(r+1).trim();e.append(o,s)}}return e}const fu="Content-Type",hu="Grpc-Timeout",Ws="Grpc-Status",Gs="Grpc-Message",du="Grpc-Status-Details-Bin",gu="X-User-Agent",pu="X-Grpc-Web",mu="application/grpc-web+proto",yu="application/grpc-web+json";class Bn extends wt{constructor(e){super(),this.code=0,this.message="",this.details=[],ee.util.initPartial(e,this)}static fromBinary(e,t){return new Bn().fromBinary(e,t)}static fromJson(e,t){return new Bn().fromJson(e,t)}static fromJsonString(e,t){return new Bn().fromJsonString(e,t)}static equals(e,t){return ee.util.equals(Bn,e,t)}}Bn.runtime=ee;Bn.typeName="google.rpc.Status";Bn.fields=ee.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:bn,repeated:!0}]);const vu="0";function Ys(i){var e;const t=i.get(du);if(t!=null){const r=Yl(t,Bn);if(r.code==0)return;const o=new at(r.message,r.code,i);return o.details=r.details.map(s=>({type:s.typeUrl.substring(s.typeUrl.lastIndexOf("/")+1),value:s.value})),o}const n=i.get(Ws);if(n!=null){if(n===vu)return;const r=parseInt(n,10);return r in We?new at(decodeURIComponent((e=i.get(Gs))!==null&&e!==void 0?e:""),r,i):new at(`invalid grpc-status: ${n}`,We.Internal,i)}}function is(i,e,t){const n=typeof e=="string"?e:e.typeName,r=typeof t=="string"?t:t.name;return i.toString().replace(/\/?$/,`/${n}/${r}`)}function Zs(i,e){return e instanceof i?e:new i(e)}function bu(i,e){function t(n){return n.done===!0?n:{done:n.done,value:Zs(i,n.value)}}return{[Symbol.asyncIterator](){const n=e[Symbol.asyncIterator](),r={next:()=>n.next().then(t)};return n.throw!==void 0&&(r.throw=o=>n.throw(o).then(t)),n.return!==void 0&&(r.return=o=>n.return(o).then(t)),r}}}function Xs(i,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((n,r)=>r(n),i))!==null&&t!==void 0?t:i}function wu(i){var e;const t=Object.assign({},i);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function os(i,e,t,n){const r=e?ss(i.I,n):as(i.I,t);return{parse:(e?ss(i.O,n):as(i.O,t)).parse,serialize:r.serialize}}function ss(i,e){return{parse(t){try{return i.fromBinary(t,e)}catch(n){const r=n instanceof Error?n.message:String(n);throw new at(`parse binary: ${r}`,We.InvalidArgument)}},serialize(t){try{return t.toBinary(e)}catch(n){const r=n instanceof Error?n.message:String(n);throw new at(`serialize binary: ${r}`,We.Internal)}}}}function as(i,e){var t,n;const r=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,o=(n=e==null?void 0:e.textDecoder)!==null&&n!==void 0?n:new TextDecoder,s=wu(e);return{parse(u){try{const h=o.decode(u);return i.fromJsonString(h,s)}catch(h){throw at.from(h,We.InvalidArgument)}},serialize(u){try{const h=u.toJsonString(s);return r.encode(h)}catch(h){throw at.from(h,We.Internal)}}}}function Tu(i){const e=Xs(i.next,i.interceptors),[t,n,r]=Qs(i),o=Object.assign(Object.assign({},i.req),{message:Zs(i.req.method.I,i.req.message),signal:t});return e(o).then(s=>(r(),s),n)}function Au(i){const e=Xs(i.next,i.interceptors),[t,n,r]=Qs(i),o=Object.assign(Object.assign({},i.req),{message:bu(i.req.method.I,i.req.message),signal:t});let s=!1;return t.addEventListener("abort",function(){var u,h;const y=i.req.message[Symbol.asyncIterator]();s||(u=y.throw)===null||u===void 0||u.call(y,this.reason).catch(()=>{}),(h=y.return)===null||h===void 0||h.call(y).catch(()=>{})}),e(o).then(u=>Object.assign(Object.assign({},u),{message:{[Symbol.asyncIterator](){const h=u.message[Symbol.asyncIterator]();return{next(){return h.next().then(y=>(y.done==!0&&(s=!0,r()),y),n)}}}}}),n)}function Qs(i){const{signal:e,cleanup:t}=cu(i.timeoutMs),n=uu(i.signal,e);return[n.signal,function(o){const s=at.from(e.aborted?Hs(e):o);return n.abort(s),t(),Promise.reject(s)},function(){t(),n.abort()}]}function _u(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function ls(i,e){const t=Ys(i);if(t)throw e.forEach((n,r)=>{t.metadata.append(r,n)}),t}function us(i,e,t,n){const r=new Headers(t??{});return r.set(fu,i?mu:yu),r.set(pu,"1"),r.set(gu,"connect-es/1.4.0"),e!==void 0&&r.set(hu,`${e}m`),r}function Eu(i){switch(i){case 400:return We.Internal;case 401:return We.Unauthenticated;case 403:return We.PermissionDenied;case 404:return We.Unimplemented;case 429:return We.Unavailable;case 502:return We.Unavailable;case 503:return We.Unavailable;case 504:return We.Unavailable;default:return We.Unknown}}function cs(i,e){var t;if(i>=200&&i<300){const n=Ys(e);if(n)throw n;return{foundStatus:e.has(Ws)}}throw new at(decodeURIComponent((t=e.get(Gs))!==null&&t!==void 0?t:`HTTP ${i}`),Eu(i),e)}var dr=function(i){return this instanceof dr?(this.v=i,this):new dr(i)},Ou=function(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),r,o=[];return r={},u("next"),u("throw"),u("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(a){return function(p){return Promise.resolve(p).then(a,d)}}function u(a,p){n[a]&&(r[a]=function(b){return new Promise(function(w,m){o.push([a,b,w,m])>1||h(a,b)})},p&&(r[a]=p(r[a])))}function h(a,p){try{y(n[a](p))}catch(b){l(o[0][3],b)}}function y(a){a.value instanceof dr?Promise.resolve(a.value.v).then(v,d):l(o[0][2],a)}function v(a){h("next",a)}function d(a){h("throw",a)}function l(a,p){a(p),o.shift(),o.length&&h(o[0][0],o[0][1])}};function Su(i){var e;_u();const t=(e=i.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(n,r,o,s,u,h,y){var v;const{serialize:d,parse:l}=os(r,t,i.jsonOptions,i.binaryOptions);return s=s===void 0?i.defaultTimeoutMs:s<=0?void 0:s,await Tu({interceptors:i.interceptors,signal:o,timeoutMs:s,req:{stream:!1,service:n,method:r,url:is(i.baseUrl,n,r),init:{method:"POST",credentials:(v=i.credentials)!==null&&v!==void 0?v:"same-origin",redirect:"error",mode:"cors"},header:us(t,s,u),contextValues:y??ns(),message:h},next:async a=>{var p;const w=await((p=i.fetch)!==null&&p!==void 0?p:globalThis.fetch)(a.url,Object.assign(Object.assign({},a.init),{headers:a.header,signal:a.signal,body:ts(0,d(a.message))}));if(cs(w.status,w.headers),!w.body)throw"missing response body";const m=es(w.body).getReader();let f,g;for(;;){const c=await m.read();if(c.done)break;const{flags:T,data:A}=c.value;if(T===ro){if(f!==void 0)throw"extra trailer";f=rs(A);continue}if(g!==void 0)throw"extra message";g=l(A)}if(f===void 0)throw"missing trailer";if(ls(f,w.headers),g===void 0)throw"missing message";return{stream:!1,service:n,method:r,header:w.headers,message:g,trailer:f}}})},async stream(n,r,o,s,u,h,y){var v;const{serialize:d,parse:l}=os(r,t,i.jsonOptions,i.binaryOptions);function a(b,w,m,f){return Ou(this,arguments,function*(){const c=es(b).getReader();if(w){if(!(yield dr(c.read())).done)throw"extra data for trailers-only";return yield dr(void 0)}let T=!1;for(;;){const A=yield dr(c.read());if(A.done)break;const{flags:_,data:S}=A.value;if((_&ro)===ro){if(T)throw"extra trailer";T=!0;const I=rs(S);ls(I,f),I.forEach((O,E)=>m.set(E,O));continue}if(T)throw"extra message";yield yield dr(l(S))}if(!T)throw"missing trailer"})}async function p(b){if(r.kind!=vt.ServerStreaming)throw"The fetch API does not support streaming request bodies";const w=await b[Symbol.asyncIterator]().next();if(w.done==!0)throw"missing request message";return ts(0,d(w.value))}return s=s===void 0?i.defaultTimeoutMs:s<=0?void 0:s,Au({interceptors:i.interceptors,signal:o,timeoutMs:s,req:{stream:!0,service:n,method:r,url:is(i.baseUrl,n,r),init:{method:"POST",credentials:(v=i.credentials)!==null&&v!==void 0?v:"same-origin",redirect:"error",mode:"cors"},header:us(t,s,u),contextValues:y??ns(),message:h},next:async b=>{var w;const f=await((w=i.fetch)!==null&&w!==void 0?w:globalThis.fetch)(b.url,Object.assign(Object.assign({},b.init),{headers:b.header,signal:b.signal,body:await p(b.message)})),{foundStatus:g}=cs(f.status,f.headers);if(!f.body)throw"missing response body";const c=new Headers;return Object.assign(Object.assign({},b),{header:f.headers,trailer:c,message:a(f.body,g,c,f.headers)})}})}}}const Le=ee.makeEnum("yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL",localName:"NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN",localName:"BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER",localName:"INTEGER"},{no:3,name:"VALUE_TYPE_LONG",localName:"LONG"},{no:4,name:"VALUE_TYPE_DOUBLE",localName:"DOUBLE"},{no:5,name:"VALUE_TYPE_STRING",localName:"STRING"},{no:6,name:"VALUE_TYPE_BYTES",localName:"BYTES"},{no:7,name:"VALUE_TYPE_DATE",localName:"DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT",localName:"JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY",localName:"JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT",localName:"TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT",localName:"INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT",localName:"LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE",localName:"TREE"}]),Fi=ee.makeEnum("yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED",localName:"DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED",localName:"DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED",localName:"DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST",localName:"DOCUMENT_BROADCAST"}]),ku=ee.makeMessageType("yorkie.v1.Snapshot",()=>[{no:1,name:"root",kind:"message",T:jt},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:_o}}]),$n=ee.makeMessageType("yorkie.v1.ChangePack",()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:ba},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:ea,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:ke},{no:6,name:"is_removed",kind:"scalar",T:8}]),ea=ee.makeMessageType("yorkie.v1.Change",()=>[{no:1,name:"id",kind:"message",T:Vi},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:wo,repeated:!0},{no:4,name:"presence_change",kind:"message",T:ho}]),Vi=ee.makeMessageType("yorkie.v1.ChangeID",()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3,L:1},{no:3,name:"lamport",kind:"scalar",T:3,L:1},{no:4,name:"actor_id",kind:"scalar",T:12}]),wo=ee.makeMessageType("yorkie.v1.Operation",()=>[{no:1,name:"set",kind:"message",T:ta,oneof:"body"},{no:2,name:"add",kind:"message",T:na,oneof:"body"},{no:3,name:"move",kind:"message",T:ra,oneof:"body"},{no:4,name:"remove",kind:"message",T:ia,oneof:"body"},{no:5,name:"edit",kind:"message",T:oa,oneof:"body"},{no:6,name:"select",kind:"message",T:xu,oneof:"body"},{no:7,name:"style",kind:"message",T:sa,oneof:"body"},{no:8,name:"increase",kind:"message",T:aa,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:la,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:ua,oneof:"body"}]),ta=ee.makeMessageType("yorkie.v1.Operation.Set",()=>[{no:1,name:"parent_created_at",kind:"message",T:ke},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:Dn},{no:4,name:"executed_at",kind:"message",T:ke}],{localName:"Operation_Set"}),na=ee.makeMessageType("yorkie.v1.Operation.Add",()=>[{no:1,name:"parent_created_at",kind:"message",T:ke},{no:2,name:"prev_created_at",kind:"message",T:ke},{no:3,name:"value",kind:"message",T:Dn},{no:4,name:"executed_at",kind:"message",T:ke}],{localName:"Operation_Add"}),ra=ee.makeMessageType("yorkie.v1.Operation.Move",()=>[{no:1,name:"parent_created_at",kind:"message",T:ke},{no:2,name:"prev_created_at",kind:"message",T:ke},{no:3,name:"created_at",kind:"message",T:ke},{no:4,name:"executed_at",kind:"message",T:ke}],{localName:"Operation_Move"}),ia=ee.makeMessageType("yorkie.v1.Operation.Remove",()=>[{no:1,name:"parent_created_at",kind:"message",T:ke},{no:2,name:"created_at",kind:"message",T:ke},{no:3,name:"executed_at",kind:"message",T:ke}],{localName:"Operation_Remove"}),oa=ee.makeMessageType("yorkie.v1.Operation.Edit",()=>[{no:1,name:"parent_created_at",kind:"message",T:ke},{no:2,name:"from",kind:"message",T:mr},{no:3,name:"to",kind:"message",T:mr},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:ke}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:ke},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"Operation_Edit"}),xu=ee.makeMessageType("yorkie.v1.Operation.Select",()=>[{no:1,name:"parent_created_at",kind:"message",T:ke},{no:2,name:"from",kind:"message",T:mr},{no:3,name:"to",kind:"message",T:mr},{no:4,name:"executed_at",kind:"message",T:ke}],{localName:"Operation_Select"}),sa=ee.makeMessageType("yorkie.v1.Operation.Style",()=>[{no:1,name:"parent_created_at",kind:"message",T:ke},{no:2,name:"from",kind:"message",T:mr},{no:3,name:"to",kind:"message",T:mr},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:ke},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:ke}}],{localName:"Operation_Style"}),aa=ee.makeMessageType("yorkie.v1.Operation.Increase",()=>[{no:1,name:"parent_created_at",kind:"message",T:ke},{no:2,name:"value",kind:"message",T:Dn},{no:3,name:"executed_at",kind:"message",T:ke}],{localName:"Operation_Increase"}),la=ee.makeMessageType("yorkie.v1.Operation.TreeEdit",()=>[{no:1,name:"parent_created_at",kind:"message",T:ke},{no:2,name:"from",kind:"message",T:Qr},{no:3,name:"to",kind:"message",T:Qr},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:ke}},{no:5,name:"contents",kind:"message",T:va,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:ke}],{localName:"Operation_TreeEdit"}),ua=ee.makeMessageType("yorkie.v1.Operation.TreeStyle",()=>[{no:1,name:"parent_created_at",kind:"message",T:ke},{no:2,name:"from",kind:"message",T:Qr},{no:3,name:"to",kind:"message",T:Qr},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:ke},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:ke}}],{localName:"Operation_TreeStyle"}),Dn=ee.makeMessageType("yorkie.v1.JSONElementSimple",()=>[{no:1,name:"created_at",kind:"message",T:ke},{no:2,name:"moved_at",kind:"message",T:ke},{no:3,name:"removed_at",kind:"message",T:ke},{no:4,name:"type",kind:"enum",T:ee.getEnumType(Le)},{no:5,name:"value",kind:"scalar",T:12}]),jt=ee.makeMessageType("yorkie.v1.JSONElement",()=>[{no:1,name:"json_object",kind:"message",T:ca,oneof:"body"},{no:2,name:"json_array",kind:"message",T:fa,oneof:"body"},{no:3,name:"primitive",kind:"message",T:ha,oneof:"body"},{no:5,name:"text",kind:"message",T:da,oneof:"body"},{no:6,name:"counter",kind:"message",T:ga,oneof:"body"},{no:7,name:"tree",kind:"message",T:pa,oneof:"body"}]),ca=ee.makeMessageType("yorkie.v1.JSONElement.JSONObject",()=>[{no:1,name:"nodes",kind:"message",T:ma,repeated:!0},{no:2,name:"created_at",kind:"message",T:ke},{no:3,name:"moved_at",kind:"message",T:ke},{no:4,name:"removed_at",kind:"message",T:ke}],{localName:"JSONElement_JSONObject"}),fa=ee.makeMessageType("yorkie.v1.JSONElement.JSONArray",()=>[{no:1,name:"nodes",kind:"message",T:To,repeated:!0},{no:2,name:"created_at",kind:"message",T:ke},{no:3,name:"moved_at",kind:"message",T:ke},{no:4,name:"removed_at",kind:"message",T:ke}],{localName:"JSONElement_JSONArray"}),ha=ee.makeMessageType("yorkie.v1.JSONElement.Primitive",()=>[{no:1,name:"type",kind:"enum",T:ee.getEnumType(Le)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:ke},{no:4,name:"moved_at",kind:"message",T:ke},{no:5,name:"removed_at",kind:"message",T:ke}],{localName:"JSONElement_Primitive"}),da=ee.makeMessageType("yorkie.v1.JSONElement.Text",()=>[{no:1,name:"nodes",kind:"message",T:ya,repeated:!0},{no:2,name:"created_at",kind:"message",T:ke},{no:3,name:"moved_at",kind:"message",T:ke},{no:4,name:"removed_at",kind:"message",T:ke}],{localName:"JSONElement_Text"}),ga=ee.makeMessageType("yorkie.v1.JSONElement.Counter",()=>[{no:1,name:"type",kind:"enum",T:ee.getEnumType(Le)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:ke},{no:4,name:"moved_at",kind:"message",T:ke},{no:5,name:"removed_at",kind:"message",T:ke}],{localName:"JSONElement_Counter"}),pa=ee.makeMessageType("yorkie.v1.JSONElement.Tree",()=>[{no:1,name:"nodes",kind:"message",T:Ao,repeated:!0},{no:2,name:"created_at",kind:"message",T:ke},{no:3,name:"moved_at",kind:"message",T:ke},{no:4,name:"removed_at",kind:"message",T:ke}],{localName:"JSONElement_Tree"}),ma=ee.makeMessageType("yorkie.v1.RHTNode",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:jt}]),To=ee.makeMessageType("yorkie.v1.RGANode",()=>[{no:1,name:"next",kind:"message",T:To},{no:2,name:"element",kind:"message",T:jt}]),Ki=ee.makeMessageType("yorkie.v1.NodeAttr",()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:ke},{no:3,name:"is_removed",kind:"scalar",T:8}]),ya=ee.makeMessageType("yorkie.v1.TextNode",()=>[{no:1,name:"id",kind:"message",T:fo},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:ke},{no:4,name:"ins_prev_id",kind:"message",T:fo},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Ki}}]),fo=ee.makeMessageType("yorkie.v1.TextNodeID",()=>[{no:1,name:"created_at",kind:"message",T:ke},{no:2,name:"offset",kind:"scalar",T:5}]),Ao=ee.makeMessageType("yorkie.v1.TreeNode",()=>[{no:1,name:"id",kind:"message",T:Ir},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:ke},{no:5,name:"ins_prev_id",kind:"message",T:Ir},{no:6,name:"ins_next_id",kind:"message",T:Ir},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Ki}}]),va=ee.makeMessageType("yorkie.v1.TreeNodes",()=>[{no:1,name:"content",kind:"message",T:Ao,repeated:!0}]),Ir=ee.makeMessageType("yorkie.v1.TreeNodeID",()=>[{no:1,name:"created_at",kind:"message",T:ke},{no:2,name:"offset",kind:"scalar",T:5}]),Qr=ee.makeMessageType("yorkie.v1.TreePos",()=>[{no:1,name:"parent_id",kind:"message",T:Ir},{no:2,name:"left_sibling_id",kind:"message",T:Ir}]);ee.makeMessageType("yorkie.v1.User",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:pt}]);ee.makeMessageType("yorkie.v1.Project",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:pt},{no:9,name:"updated_at",kind:"message",T:pt}]);ee.makeMessageType("yorkie.v1.UpdatableProjectFields",()=>[{no:1,name:"name",kind:"message",T:Pt},{no:2,name:"auth_webhook_url",kind:"message",T:Pt},{no:3,name:"auth_webhook_methods",kind:"message",T:Nu},{no:4,name:"client_deactivate_threshold",kind:"message",T:Pt}]);const Nu=ee.makeMessageType("yorkie.v1.UpdatableProjectFields.AuthWebhookMethods",()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}],{localName:"UpdatableProjectFields_AuthWebhookMethods"});ee.makeMessageType("yorkie.v1.DocumentSummary",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:pt},{no:5,name:"accessed_at",kind:"message",T:pt},{no:6,name:"updated_at",kind:"message",T:pt}]);const ho=ee.makeMessageType("yorkie.v1.PresenceChange",()=>[{no:1,name:"type",kind:"enum",T:ee.getEnumType(ei)},{no:2,name:"presence",kind:"message",T:_o}]),ei=ee.makeEnum("yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT",localName:"PUT"},{no:2,name:"CHANGE_TYPE_DELETE",localName:"DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR",localName:"CLEAR"}]),_o=ee.makeMessageType("yorkie.v1.Presence",()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]),ba=ee.makeMessageType("yorkie.v1.Checkpoint",()=>[{no:1,name:"server_seq",kind:"scalar",T:3,L:1},{no:2,name:"client_seq",kind:"scalar",T:13}]),mr=ee.makeMessageType("yorkie.v1.TextNodePos",()=>[{no:1,name:"created_at",kind:"message",T:ke},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]),ke=ee.makeMessageType("yorkie.v1.TimeTicket",()=>[{no:1,name:"lamport",kind:"scalar",T:3,L:1},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}]),Iu=ee.makeMessageType("yorkie.v1.DocEventBody",()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]),Pu=ee.makeMessageType("yorkie.v1.DocEvent",()=>[{no:1,name:"type",kind:"enum",T:ee.getEnumType(Fi)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Iu}]),Cu=ee.makeMessageType("yorkie.v1.ActivateClientRequest",()=>[{no:1,name:"client_key",kind:"scalar",T:9}]),Ru=ee.makeMessageType("yorkie.v1.ActivateClientResponse",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),Du=ee.makeMessageType("yorkie.v1.DeactivateClientRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),Lu=ee.makeMessageType("yorkie.v1.DeactivateClientResponse",[]),Mu=ee.makeMessageType("yorkie.v1.AttachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:$n}]),Bu=ee.makeMessageType("yorkie.v1.AttachDocumentResponse",()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:$n}]),qu=ee.makeMessageType("yorkie.v1.DetachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:$n},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]),Fu=ee.makeMessageType("yorkie.v1.DetachDocumentResponse",()=>[{no:2,name:"change_pack",kind:"message",T:$n}]),ju=ee.makeMessageType("yorkie.v1.WatchDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]),Uu=ee.makeMessageType("yorkie.v1.WatchDocumentResponse",()=>[{no:1,name:"initialization",kind:"message",T:$u,oneof:"body"},{no:2,name:"event",kind:"message",T:Pu,oneof:"body"}]),$u=ee.makeMessageType("yorkie.v1.WatchDocumentResponse.Initialization",()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}],{localName:"WatchDocumentResponse_Initialization"}),zu=ee.makeMessageType("yorkie.v1.RemoveDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:$n}]),Ju=ee.makeMessageType("yorkie.v1.RemoveDocumentResponse",()=>[{no:1,name:"change_pack",kind:"message",T:$n}]),Vu=ee.makeMessageType("yorkie.v1.PushPullChangesRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:$n},{no:4,name:"push_only",kind:"scalar",T:8}]),Ku=ee.makeMessageType("yorkie.v1.PushPullChangesResponse",()=>[{no:1,name:"change_pack",kind:"message",T:$n}]),Hu=ee.makeMessageType("yorkie.v1.BroadcastRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]),Wu=ee.makeMessageType("yorkie.v1.BroadcastResponse",[]),Gu={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Cu,O:Ru,kind:vt.Unary},deactivateClient:{name:"DeactivateClient",I:Du,O:Lu,kind:vt.Unary},attachDocument:{name:"AttachDocument",I:Mu,O:Bu,kind:vt.Unary},detachDocument:{name:"DetachDocument",I:qu,O:Fu,kind:vt.Unary},removeDocument:{name:"RemoveDocument",I:zu,O:Ju,kind:vt.Unary},pushPullChanges:{name:"PushPullChanges",I:Vu,O:Ku,kind:vt.Unary},watchDocument:{name:"WatchDocument",I:ju,O:Uu,kind:vt.ServerStreaming},broadcast:{name:"Broadcast",I:Hu,O:Wu,kind:vt.Unary}}};/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Mt=null;try{Mt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Re(i,e,t){this.low=i|0,this.high=e|0,this.unsigned=!!t}Re.prototype.__isLong__;Object.defineProperty(Re.prototype,"__isLong__",{value:!0});function mt(i){return(i&&i.__isLong__)===!0}function fs(i){var e=Math.clz32(i&-i);return i?31-e:e}Re.isLong=mt;var hs={},ds={};function vr(i,e){var t,n,r;return e?(i>>>=0,(r=0<=i&&i<256)&&(n=ds[i],n)?n:(t=Ve(i,0,!0),r&&(ds[i]=t),t)):(i|=0,(r=-128<=i&&i<128)&&(n=hs[i],n)?n:(t=Ve(i,i<0?-1:0,!1),r&&(hs[i]=t),t))}Re.fromInt=vr;function Bt(i,e){if(isNaN(i))return e?qn:Yt;if(e){if(i<0)return qn;if(i>=wa)return _a}else{if(i<=-ps)return Et;if(i+1>=ps)return Aa}return i<0?Bt(-i,e).neg():Ve(i%Lr|0,i/Lr|0,e)}Re.fromNumber=Bt;function Ve(i,e,t){return new Re(i,e,t)}Re.fromBits=Ve;var ji=Math.pow;function Eo(i,e,t){if(i.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,i==="NaN"||i==="Infinity"||i==="+Infinity"||i==="-Infinity")return e?qn:Yt;if(t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=i.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return Eo(i.substring(1),e,t).neg();for(var r=Bt(ji(t,8)),o=Yt,s=0;s<i.length;s+=8){var u=Math.min(8,i.length-s),h=parseInt(i.substring(s,s+u),t);if(u<8){var y=Bt(ji(t,u));o=o.mul(y).add(Bt(h))}else o=o.mul(r),o=o.add(Bt(h))}return o.unsigned=e,o}Re.fromString=Eo;function tn(i,e){return typeof i=="number"?Bt(i,e):typeof i=="string"?Eo(i,e):Ve(i.low,i.high,typeof e=="boolean"?e:i.unsigned)}Re.fromValue=tn;var gs=65536,Yu=1<<24,Lr=gs*gs,wa=Lr*Lr,ps=wa/2,ms=vr(Yu),Yt=vr(0);Re.ZERO=Yt;var qn=vr(0,!0);Re.UZERO=qn;var xr=vr(1);Re.ONE=xr;var Ta=vr(1,!0);Re.UONE=Ta;var go=vr(-1);Re.NEG_ONE=go;var Aa=Ve(-1,2147483647,!1);Re.MAX_VALUE=Aa;var _a=Ve(-1,-1,!0);Re.MAX_UNSIGNED_VALUE=_a;var Et=Ve(0,-2147483648,!1);Re.MIN_VALUE=Et;var he=Re.prototype;he.toInt=function(){return this.unsigned?this.low>>>0:this.low};he.toNumber=function(){return this.unsigned?(this.high>>>0)*Lr+(this.low>>>0):this.high*Lr+(this.low>>>0)};he.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Et)){var t=Bt(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var o=Bt(ji(e,6),this.unsigned),s=this,u="";;){var h=s.div(o),y=s.sub(h.mul(o)).toInt()>>>0,v=y.toString(e);if(s=h,s.isZero())return v+u;for(;v.length<6;)v="0"+v;u=""+v+u}};he.getHighBits=function(){return this.high};he.getHighBitsUnsigned=function(){return this.high>>>0};he.getLowBits=function(){return this.low};he.getLowBitsUnsigned=function(){return this.low>>>0};he.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Et)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1};he.isZero=function(){return this.high===0&&this.low===0};he.eqz=he.isZero;he.isNegative=function(){return!this.unsigned&&this.high<0};he.isPositive=function(){return this.unsigned||this.high>=0};he.isOdd=function(){return(this.low&1)===1};he.isEven=function(){return(this.low&1)===0};he.equals=function(e){return mt(e)||(e=tn(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};he.eq=he.equals;he.notEquals=function(e){return!this.eq(e)};he.neq=he.notEquals;he.ne=he.notEquals;he.lessThan=function(e){return this.comp(e)<0};he.lt=he.lessThan;he.lessThanOrEqual=function(e){return this.comp(e)<=0};he.lte=he.lessThanOrEqual;he.le=he.lessThanOrEqual;he.greaterThan=function(e){return this.comp(e)>0};he.gt=he.greaterThan;he.greaterThanOrEqual=function(e){return this.comp(e)>=0};he.gte=he.greaterThanOrEqual;he.ge=he.greaterThanOrEqual;he.compare=function(e){if(mt(e)||(e=tn(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};he.comp=he.compare;he.negate=function(){return!this.unsigned&&this.eq(Et)?Et:this.not().add(xr)};he.neg=he.negate;he.add=function(e){mt(e)||(e=tn(e));var t=this.high>>>16,n=this.high&65535,r=this.low>>>16,o=this.low&65535,s=e.high>>>16,u=e.high&65535,h=e.low>>>16,y=e.low&65535,v=0,d=0,l=0,a=0;return a+=o+y,l+=a>>>16,a&=65535,l+=r+h,d+=l>>>16,l&=65535,d+=n+u,v+=d>>>16,d&=65535,v+=t+s,v&=65535,Ve(l<<16|a,v<<16|d,this.unsigned)};he.subtract=function(e){return mt(e)||(e=tn(e)),this.add(e.neg())};he.sub=he.subtract;he.multiply=function(e){if(this.isZero())return this;if(mt(e)||(e=tn(e)),Mt){var t=Mt.mul(this.low,this.high,e.low,e.high);return Ve(t,Mt.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?qn:Yt;if(this.eq(Et))return e.isOdd()?Et:Yt;if(e.eq(Et))return this.isOdd()?Et:Yt;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(ms)&&e.lt(ms))return Bt(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,r=this.high&65535,o=this.low>>>16,s=this.low&65535,u=e.high>>>16,h=e.high&65535,y=e.low>>>16,v=e.low&65535,d=0,l=0,a=0,p=0;return p+=s*v,a+=p>>>16,p&=65535,a+=o*v,l+=a>>>16,a&=65535,a+=s*y,l+=a>>>16,a&=65535,l+=r*v,d+=l>>>16,l&=65535,l+=o*y,d+=l>>>16,l&=65535,l+=s*h,d+=l>>>16,l&=65535,d+=n*v+r*y+o*h+s*u,d&=65535,Ve(a<<16|p,d<<16|l,this.unsigned)};he.mul=he.multiply;he.divide=function(e){if(mt(e)||(e=tn(e)),e.isZero())throw Error("division by zero");if(Mt){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?Mt.div_u:Mt.div_s)(this.low,this.high,e.low,e.high);return Ve(t,Mt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?qn:Yt;var n,r,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return qn;if(e.gt(this.shru(1)))return Ta;o=qn}else{if(this.eq(Et)){if(e.eq(xr)||e.eq(go))return Et;if(e.eq(Et))return xr;var s=this.shr(1);return n=s.div(e).shl(1),n.eq(Yt)?e.isNegative()?xr:go:(r=this.sub(e.mul(n)),o=n.add(r.div(e)),o)}else if(e.eq(Et))return this.unsigned?qn:Yt;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=Yt}for(r=this;r.gte(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var u=Math.ceil(Math.log(n)/Math.LN2),h=u<=48?1:ji(2,u-48),y=Bt(n),v=y.mul(e);v.isNegative()||v.gt(r);)n-=h,y=Bt(n,this.unsigned),v=y.mul(e);y.isZero()&&(y=xr),o=o.add(y),r=r.sub(v)}return o};he.div=he.divide;he.modulo=function(e){if(mt(e)||(e=tn(e)),Mt){var t=(this.unsigned?Mt.rem_u:Mt.rem_s)(this.low,this.high,e.low,e.high);return Ve(t,Mt.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};he.mod=he.modulo;he.rem=he.modulo;he.not=function(){return Ve(~this.low,~this.high,this.unsigned)};he.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};he.clz=he.countLeadingZeros;he.countTrailingZeros=function(){return this.low?fs(this.low):fs(this.high)+32};he.ctz=he.countTrailingZeros;he.and=function(e){return mt(e)||(e=tn(e)),Ve(this.low&e.low,this.high&e.high,this.unsigned)};he.or=function(e){return mt(e)||(e=tn(e)),Ve(this.low|e.low,this.high|e.high,this.unsigned)};he.xor=function(e){return mt(e)||(e=tn(e)),Ve(this.low^e.low,this.high^e.high,this.unsigned)};he.shiftLeft=function(e){return mt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Ve(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Ve(0,this.low<<e-32,this.unsigned)};he.shl=he.shiftLeft;he.shiftRight=function(e){return mt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Ve(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Ve(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};he.shr=he.shiftRight;he.shiftRightUnsigned=function(e){return mt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Ve(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?Ve(this.high,0,this.unsigned):Ve(this.high>>>e-32,0,this.unsigned)};he.shru=he.shiftRightUnsigned;he.shr_u=he.shiftRightUnsigned;he.rotateLeft=function(e){var t;return mt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?Ve(this.high,this.low,this.unsigned):e<32?(t=32-e,Ve(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,Ve(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))};he.rotl=he.rotateLeft;he.rotateRight=function(e){var t;return mt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?Ve(this.high,this.low,this.unsigned):e<32?(t=32-e,Ve(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,Ve(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))};he.rotr=he.rotateRight;he.toSigned=function(){return this.unsigned?Ve(this.low,this.high,!1):this};he.toUnsigned=function(){return this.unsigned?this:Ve(this.low,this.high,!0)};he.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};he.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};he.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};Re.fromBytes=function(e,t,n){return n?Re.fromBytesLE(e,t):Re.fromBytesBE(e,t)};Re.fromBytesLE=function(e,t){return new Re(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};Re.fromBytesBE=function(e,t){return new Re(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};const Zu=ee.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);ee.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:Mn}]);ee.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);ee.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:Xu,repeated:!0}]);const Xu=ee.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"QuotaFailure_Violation"});ee.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:Qu,repeated:!0}]);const Qu=ee.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});ee.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:ec,repeated:!0}]);const ec=ee.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"BadRequest_FieldViolation"});ee.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);ee.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);ee.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:tc,repeated:!0}]);const tc=ee.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"});ee.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var te=(i=>(i.Ok="ok",i.ErrClientNotActivated="ErrClientNotActivated",i.ErrClientNotFound="ErrClientNotFound",i.ErrUnimplemented="ErrUnimplemented",i.ErrInvalidType="ErrInvalidType",i.ErrDummy="ErrDummy",i.ErrDocumentNotAttached="ErrDocumentNotAttached",i.ErrDocumentNotDetached="ErrDocumentNotDetached",i.ErrDocumentRemoved="ErrDocumentRemoved",i.ErrInvalidObjectKey="ErrInvalidObjectKey",i.ErrInvalidArgument="ErrInvalidArgument",i.ErrNotInitialized="ErrNotInitialized",i.ErrNotReady="ErrNotReady",i.ErrRefused="ErrRefused",i.ErrContextNotProvided="ErrContextNotProvided",i))(te||{});class ne extends Error{constructor(t,n){super(n);J(this,"name","YorkieError");J(this,"stack");this.code=t,this.message=n,this.toString=()=>`[code=${this.code}]: ${this.message}`}}function Gt(i){if(i instanceof Map){const e=Array.from(i);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(i))}const Ea=i=>i?Object.entries(i).length===0:!0,Mr=i=>{const e={};for(const[t,n]of Object.entries(i))e[t]=JSON.stringify(n);return e},Pr=i=>{const e={};for(const[t,n]of Object.entries(i))e[t]=JSON.parse(n);return e};var ir=(i=>(i.Put="put",i.Clear="clear",i))(ir||{});class io{constructor(e,t){J(this,"context");J(this,"presence");this.context=e,this.presence=t}set(e,t){for(const n of Object.keys(e))this.presence[n]=e[n];this.context.setPresenceChange({type:"put",presence:Gt(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:"clear"})}}const Hi="000000000000000000000000",nc="FFFFFFFFFFFFFFFFFFFFFFFF";class Ot{constructor(e,t,n){J(this,"lamport");J(this,"delimiter");J(this,"actorID");this.lamport=e,this.delimiter=t,this.actorID=n}static of(e,t,n){return new Ot(e,t,n)}static fromStruct(e){return Ot.of(Re.fromString(e.lamport,!0),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new Ot(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport.greaterThan(e.lamport))return 1;if(e.lamport.greaterThan(this.lamport))return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const Oo=0,rc=4294967295,ic=Re.MAX_VALUE,Xt=new Ot(Re.fromNumber(0),Oo,Hi);new Ot(Re.fromNumber(1),Oo+1,Hi);const Gr=new Ot(ic,rc,nc);function xn(i){return i.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class li{constructor(e){J(this,"createdAt");J(this,"movedAt");J(this,"removedAt");this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class tr extends li{constructor(e){super(e)}}class So{constructor(e,t){J(this,"strKey");J(this,"value");this.strKey=e,this.value=t}static of(e,t){return new So(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class ti{constructor(){J(this,"nodeMapByKey");J(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new ti}set(e,t,n){let r;const o=this.nodeMapByKey.get(e);o!=null&&!o.isRemoved()&&o.remove(n)&&(r=o.getValue());const s=So.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),s),(o==null||n.after(o.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,s),t.setMovedAt(n)),r}delete(e,t){if(!this.nodeMapByCreatedAt.has(e.toIDString()))throw new ne(te.ErrInvalidArgument,`fail to find ${e.toIDString()}`);const n=this.nodeMapByCreatedAt.get(e.toIDString());return n.remove(t),n.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new ne(te.ErrInvalidArgument,`fail to find ${e.getCreatedAt().toIDString()}`);const n=this.nodeMapByKey.get(t.getStrKey());t===n&&this.nodeMapByKey.delete(n.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const n=this.nodeMapByKey.get(e);if(n!=null&&n.remove(t))return n.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class St extends tr{constructor(t,n){super(t);J(this,"memberNodes");this.memberNodes=n}static create(t,n){if(!n)return new St(t,ti.create());const r=ti.create();for(const[o,s]of Object.entries(n))r.set(o,s.deepcopy(),s.getCreatedAt());return new St(t,r)}subPathOf(t){return this.memberNodes.subPathOf(t)}purge(t){this.memberNodes.purge(t)}set(t,n,r){return this.memberNodes.set(t,n,r)}delete(t,n){return this.memberNodes.delete(t,n)}deleteByKey(t,n){return this.memberNodes.deleteByKey(t,n)}get(t){const n=this.memberNodes.get(t);return n==null?void 0:n.getValue()}getByID(t){const n=this.memberNodes.getByID(t);return n==null?void 0:n.getValue()}has(t){return this.memberNodes.has(t)}toJSON(){const t=[];for(const[n,r]of this)t.push(`"${xn(n)}":${r.toJSON()}`);return`{${t.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(const[n,r]of this){const{createdAt:o,value:s,type:u}=r.toJSForTest();t[n]={key:n,createdAt:o,value:s,type:u}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_OBJECT"}}getKeys(){const t=Array();for(const[n]of this)t.push(n);return t}toSortedJSON(){var r;const t=Array();for(const[o]of this)t.push(o);const n=[];for(const o of t.sort()){const s=(r=this.memberNodes.get(o))==null?void 0:r.getValue();n.push(`"${xn(o)}":${s.toSortedJSON()}`)}return`{${n.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const t=St.create(this.getCreatedAt());for(const n of this.memberNodes)t.memberNodes.set(n.getStrKey(),n.getValue().deepcopy(),this.getPositionedAt());return t.remove(this.getRemovedAt()),t}getDescendants(t){for(const n of this.memberNodes){const r=n.getValue();if(t(r,this))return;r instanceof tr&&r.getDescendants(t)}}*[Symbol.iterator](){const t=new Set;for(const n of this.memberNodes)t.has(n.getStrKey())||(t.add(n.getStrKey()),n.isRemoved()||(yield[n.getStrKey(),n.getValue()]))}}var Ge=(i=>(i.Local="local",i.Remote="remote",i.UndoRedo="undoredo",i))(Ge||{});class en{constructor(e,t){J(this,"parentCreatedAt");J(this,"executedAt");this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new ne(te.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class Oa{constructor(e){J(this,"value");J(this,"left");J(this,"right");J(this,"parent");J(this,"weight");this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class ni{constructor(e){J(this,"root");this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}if(e>t.getLength())throw new ne(te.ErrInvalidArgument,`out of index range: pos: ${e} > node.length: ${t.getLength()}`);return[t,e]}indexOf(e){if(!e||e!==this.root&&!e.hasLinks())return-1;let t=0,n=e,r;for(;n;)(!r||r===n.getRight())&&(t+=n.getLength()+(n.hasLeft()?n.getLeftWeight():0)),r=n,n=n.getParent();return t-e.getLength()}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new ni(e.getLeft());t.root&&t.root.setParent();const n=new ni(e.getRight());if(n.root&&n.root.setParent(),t.root){const r=t.getRightmost();t.splayNode(r),t.root.setRight(n.root),n.root&&n.root.setParent(t.root),this.root=t.root}else this.root=n.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const n of t)n.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){e&&(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){e&&(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}var ut=(i=>(i[i.Null=0]="Null",i[i.Boolean=1]="Boolean",i[i.Integer=2]="Integer",i[i.Long=3]="Long",i[i.Double=4]="Double",i[i.String=5]="String",i[i.Bytes=6]="Bytes",i[i.Date=7]="Date",i))(ut||{});class Xe extends li{constructor(t,n){super(n);J(this,"valueType");J(this,"value");this.valueType=Xe.getPrimitiveType(t),this.value=t===void 0?null:t}static of(t,n){return new Xe(t,n)}static valueFromBytes(t,n){switch(t){case 0:return null;case 1:return!!n[0];case 2:return n[0]|n[1]<<8|n[2]<<16|n[3]<<24;case 4:{const r=new DataView(n.buffer);return n.forEach(function(o,s){r.setUint8(s,o)}),r.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(n);case 3:return Re.fromBytesLE(Array.from(n));case 6:return n;case 7:return new Date(Re.fromBytesLE(Array.from(n),!0).toNumber());default:throw new ne(te.ErrUnimplemented,`unimplemented type: ${t}`)}}toJSON(){return this.valueType===5?`"${xn(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const t=Xe.of(this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t.setRemovedAt(this.getRemovedAt()),t}getType(){return this.valueType}static getPrimitiveType(t){switch(typeof t){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(t)?2:4;case"string":return 5;case"object":if(t===null)return 0;if(t instanceof Re)return 3;if(t instanceof Uint8Array)return 6;if(t instanceof Date)return 7}}static isSupport(t){return Xe.getPrimitiveType(t)!==void 0}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===2||t===3||t===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 4:{const t=this.value,n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,t,!0),n}case 5:return new TextEncoder().encode(this.value);case 3:{const n=this.value.toBytesLE();return Uint8Array.from(n)}case 6:return this.value;case 7:{const t=this.value,n=Re.fromNumber(t.getTime(),!0).toBytesLE();return Uint8Array.from(n)}default:throw new ne(te.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class Ui extends Oa{constructor(t){super(t);J(this,"prev");J(this,"next");this.value=t}static createAfter(t,n){const r=new Ui(n),o=t.next;return t.next=r,r.prev=t,r.next=o,o&&(o.prev=r),r}remove(t){return this.value.remove(t)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class ri{constructor(){J(this,"dummyHead");J(this,"last");J(this,"nodeMapByIndex");J(this,"nodeMapByCreatedAt");const e=Xe.of(0,Xt);e.setRemovedAt(Xt),this.dummyHead=new Ui(e),this.last=this.dummyHead,this.nodeMapByIndex=new ni,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new ri}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let n=this.nodeMapByCreatedAt.get(e.toIDString());if(!n)throw new ne(te.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);for(;n.getNext()&&n.getNext().getPositionedAt().after(t);)n=n.getNext();return n}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,n=t.getCreatedAt()){const r=this.findNextBeforeExecutedAt(e,n),o=Ui.createAfter(r,t);r===this.last&&(this.last=o),this.nodeMapByIndex.insertAfter(r,o),this.nodeMapByCreatedAt.set(o.getCreatedAt().toIDString(),o)}moveAfter(e,t,n){const r=this.nodeMapByCreatedAt.get(e.toIDString());if(!r)throw new ne(te.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);const o=this.nodeMapByCreatedAt.get(t.toIDString());if(!o)throw new ne(te.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);r!==o&&(!o.getValue().getMovedAt()||n.after(o.getValue().getMovedAt()))&&(this.release(o),this.insertAfter(r.getCreatedAt(),o.getValue(),n),o.getValue().setMovedAt(n))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new ne(te.ErrInvalidArgument,`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`);this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,n]=this.nodeMapByIndex.find(e);let r=t;if(e===0&&t===this.dummyHead||n>0)do r&&(r=r.getNext());while(r&&r.isRemoved());return r}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const n=this.nodeMapByCreatedAt.get(e.toIDString()),r=n.isRemoved();return n.remove(t)&&!r&&this.nodeMapByIndex.splayNode(n),n.getValue()}deleteByIndex(e,t){const n=this.getByIndex(e);if(n)return n.remove(t)&&this.nodeMapByIndex.splayNode(n),n.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const n=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${n}}`):e.push(`[${n}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class Rt extends tr{constructor(t,n){super(t);J(this,"elements");this.elements=n}static create(t,n){if(!n)return new Rt(t,ri.create());const r=ri.create();for(const o of n)r.insertAfter(r.getLastCreatedAt(),o.deepcopy());return new Rt(t,r)}subPathOf(t){return this.elements.subPathOf(t)}purge(t){this.elements.purge(t)}insertAfter(t,n){this.elements.insertAfter(t,n)}moveAfter(t,n,r){this.elements.moveAfter(t,n,r)}get(t){const n=this.elements.getByIndex(t);return n==null?void 0:n.getValue()}getByID(t){const n=this.elements.getByID(t);return n==null?void 0:n.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(t){return this.elements.getPrevCreatedAt(t)}delete(t,n){return this.elements.delete(t,n)}deleteByIndex(t,n){return this.elements.deleteByIndex(t,n)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const t of this.elements)t.isRemoved()||(yield t.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(t){for(const n of this.elements){const r=n.getValue();if(t(r,this))return;r instanceof tr&&r.getDescendants(t)}}toJSON(){const t=[];for(const n of this)t.push(n.toJSON());return`[${t.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(let n=0;n<this.length;n++){const{createdAt:r,value:o,type:s}=this.get(n).toJSForTest();t[n]={key:String(n),createdAt:r,value:o,type:s}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const t=Rt.create(this.getCreatedAt());for(const n of this.elements)t.elements.insertAfter(t.getLastCreatedAt(),n.getValue().deepcopy());return t.remove(this.getRemovedAt()),t}}class or extends en{constructor(t,n,r){super(t,r);J(this,"createdAt");this.createdAt=n}static create(t,n,r){return new or(t,n,r)}execute(t,n){var y;const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new ne(te.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof tr))throw new ne(te.ErrInvalidArgument,`only object and array can execute remove: ${r}`);if(n===Ge.UndoRedo){let v=r.getByID(this.createdAt);for(;v;){if(v.getRemovedAt())return;v=(y=t.findElementPairByCreatedAt(v.getCreatedAt()))==null?void 0:y.parent}}const o=r.subPathOf(this.createdAt),s=this.toReverseOperation(r),u=r.delete(this.createdAt,this.getExecutedAt());return t.registerRemovedElement(u),{opInfos:r instanceof Rt?[{type:"remove",path:t.createPath(this.getParentCreatedAt()),index:Number(o)}]:[{type:"remove",path:t.createPath(this.getParentCreatedAt()),key:o}],reverseOp:s}}toReverseOperation(t){if(t instanceof St){const n=t.subPathOf(this.createdAt);if(n!==void 0){const r=t.get(n);if(r!==void 0)return yr.create(n,r.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class yr extends en{constructor(t,n,r,o){super(r,o);J(this,"key");J(this,"value");this.key=t,this.value=n}static create(t,n,r,o){return new yr(t,n,r,o)}execute(t,n){var y;const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new ne(te.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof St))throw new ne(te.ErrInvalidArgument,"fail to execute, only object can execute set");if(n===Ge.UndoRedo){let v=r;for(;v;){if(v.getRemovedAt())return;v=(y=t.findElementPairByCreatedAt(v.getCreatedAt()))==null?void 0:y.parent}}const o=r.get(this.key),s=this.toReverseOperation(o),u=this.value.deepcopy(),h=r.set(this.key,u,this.getExecutedAt());return n===Ge.UndoRedo&&t.findByCreatedAt(u.getCreatedAt())&&t.deregisterElement(u),t.registerElement(u,r),h&&t.registerRemovedElement(h),{opInfos:[{type:"set",path:t.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:s}}toReverseOperation(t){let n=or.create(this.getParentCreatedAt(),this.value.getCreatedAt());return t!==void 0&&!t.isRemoved()&&(n=yr.create(this.key,t.deepcopy(),this.getParentCreatedAt())),n}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class ui extends en{constructor(t,n,r,o){super(t,o);J(this,"prevCreatedAt");J(this,"value");this.prevCreatedAt=n,this.value=r}static create(t,n,r,o){return new ui(t,n,r,o)}execute(t){const n=t.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new ne(te.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof Rt))throw new ne(te.ErrInvalidArgument,"fail to execute, only array can execute add");const r=n,o=this.value.deepcopy();return r.insertAfter(this.prevCreatedAt,o),t.registerElement(o,r),{opInfos:[{type:"add",path:t.createPath(this.getParentCreatedAt()),index:Number(r.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class er extends en{constructor(t,n,r,o){super(t,o);J(this,"prevCreatedAt");J(this,"createdAt");this.prevCreatedAt=n,this.createdAt=r}static create(t,n,r,o){return new er(t,n,r,o)}execute(t){const n=t.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new ne(te.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof Rt))throw new ne(te.ErrInvalidArgument,"fail to execute, only array can execute move");const r=n,o=Number(r.subPathOf(this.createdAt));r.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const s=Number(r.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:t.createPath(this.getParentCreatedAt()),index:s,previousIndex:o}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class gr{constructor(e,t,n,r){J(this,"key");J(this,"value");J(this,"updatedAt");J(this,"_isRemoved");this.key=e,this.value=t,this.updatedAt=n,this._isRemoved=r}static of(e,t,n,r){return new gr(e,t,n,r)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}}class Un{constructor(){J(this,"nodeMapByKey");J(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Un}getNodeMapByKey(){return this.nodeMapByKey}set(e,t,n){const r=this.nodeMapByKey.get(e);if(r&&r.isRemoved()&&n.after(r.getUpdatedAt())&&(this.numberOfRemovedElement-=1),r===void 0||n.after(r.getUpdatedAt())){const o=gr.of(e,t,n,!1);return this.nodeMapByKey.set(e,o),r!==void 0&&r.isRemoved()?[r,o]:[void 0,o]}return r.isRemoved()?[r,void 0]:[void 0,void 0]}setInternal(e,t,n,r){const o=gr.of(e,t,n,r);this.nodeMapByKey.set(e,o),r&&this.numberOfRemovedElement++}remove(e,t){const n=this.nodeMapByKey.get(e),r=[];if(n===void 0||t.after(n.getUpdatedAt())){if(n===void 0){this.numberOfRemovedElement+=1;const u=gr.of(e,"",t,!0);return this.nodeMapByKey.set(e,u),r.push(u),r}const o=n.isRemoved();o||(this.numberOfRemovedElement+=1),o&&r.push(n);const s=gr.of(e,n.getValue(),t,!0);return this.nodeMapByKey.set(e,s),r.push(s),r}return r}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new Un;for(const[,t]of this.nodeMapByKey)e.setInternal(t.getKey(),t.getValue(),t.getUpdatedAt(),t.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,n]of this.nodeMapByKey)n.isRemoved()||e.push(`"${xn(t)}":"${xn(n.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,n]of this.nodeMapByKey)n.isRemoved()||(e[t]=n.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const t=this.nodeMapByKey.get(e.getKey());t==null||t.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}class ii{constructor(e){J(this,"attributes");J(this,"content");this.attributes=Un.create(),this.content=e}static create(e){return new ii(e)}get length(){return this.content.length}substring(e,t){const n=new ii(this.content.substring(e,t));return n.attributes=this.attributes.deepcopy(),n}setAttr(e,t,n){return this.attributes.set(e,t,n)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=xn(this.content),t=this.attributes.toObject(),n=[];for(const[r,o]of Object.entries(t)){const s=JSON.parse(o),u=typeof s=="string"?`"${xn(r)}":"${xn(s)}"`:`"${xn(r)}":${String(s)}`;n.push(u)}return n.sort(),n.length===0?`{"val":"${e}"}`:`{"attrs":{${n.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof gr&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const t of this.attributes)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}class qt extends li{constructor(t,n){super(n);J(this,"rgaTreeSplit");this.rgaTreeSplit=t}static create(t,n){return new qt(t,n)}edit(t,n,r,o,s){const u=n?ii.create(n):void 0;if(u&&o)for(const[a,p]of Object.entries(o))u.setAttr(a,p,r);const[h,y,v,d]=this.rgaTreeSplit.edit(t,r,u,s),l=d.map(a=>({...a,value:a.value?{attributes:Pr(a.value.getAttributes()),content:a.value.getContent()}:{attributes:void 0,content:""},type:"content"}));return[y,l,v,[h,h]]}setStyle(t,n,r,o){const[,s]=this.rgaTreeSplit.findNodeWithSplit(t[1],r),[,u]=this.rgaTreeSplit.findNodeWithSplit(t[0],r),h=[],y=this.rgaTreeSplit.findBetween(u,s),v=new Map,d=[];for(const a of y){const p=a.getCreatedAt().getActorID(),b=o!=null&&o.size?o.has(p)?o.get(p):Xt:Gr;if(a.canStyle(r,b)){const w=v.get(p),m=a.getCreatedAt();(!w||m.after(w))&&v.set(p,m),d.push(a)}}const l=[];for(const a of d){if(a.isRemoved())continue;const[p,b]=this.rgaTreeSplit.findIndexesFromRange(a.createPosRange());h.push({type:"style",actor:r.getActorID(),from:p,to:b,value:{attributes:Pr(n)}});for(const[w,m]of Object.entries(n)){const[f]=a.getValue().setAttr(w,m,r);f!==void 0&&l.push({parent:a.getValue(),child:f})}}return[v,l,h]}indexRangeToPosRange(t,n){const r=this.rgaTreeSplit.indexToPos(t);return t===n?[r,r]:[r,this.rgaTreeSplit.indexToPos(n)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}toJSON(){const t=[];for(const n of this.rgaTreeSplit)n.isRemoved()||t.push(n.getValue().toJSON());return`[${t.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const t=[];for(const n of this.rgaTreeSplit)if(!n.isRemoved()){const r=n.getValue();t.push({attributes:Pr(r.getAttributes()),content:r.getContent()})}return t}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const t=new qt(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return t.remove(this.getRemovedAt()),t}findIndexesFromRange(t){return this.rgaTreeSplit.findIndexesFromRange(t)}getGCPairs(){const t=[];for(const n of this.rgaTreeSplit){n.getRemovedAt()&&t.push({parent:this.rgaTreeSplit,child:n});for(const r of n.getValue().getGCPairs())t.push(r)}return t}}class ci extends en{constructor(t,n,r,o,s,u,h){super(t,h);J(this,"fromPos");J(this,"toPos");J(this,"maxCreatedAtMapByActor");J(this,"content");J(this,"attributes");this.fromPos=n,this.toPos=r,this.maxCreatedAtMapByActor=o,this.content=s,this.attributes=u}static create(t,n,r,o,s,u,h){return new ci(t,n,r,o,s,u,h)}execute(t){const n=t.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new ne(te.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof qt))throw new ne(te.ErrInvalidArgument,"fail to execute, only Text can execute edit");const r=n,[,o,s]=r.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);for(const u of s)t.registerGCPair(u);return{opInfos:o.map(({from:u,to:h,value:y})=>({type:"edit",from:u,to:h,value:y,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),n=this.fromPos.toTestString(),r=this.toPos.toTestString(),o=this.content;return`${t}.EDIT(${n},${r},${o})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class fi extends en{constructor(t,n,r,o,s,u){super(t,u);J(this,"fromPos");J(this,"toPos");J(this,"maxCreatedAtMapByActor");J(this,"attributes");this.fromPos=n,this.toPos=r,this.maxCreatedAtMapByActor=o,this.attributes=s}static create(t,n,r,o,s,u){return new fi(t,n,r,o,s,u)}execute(t){const n=t.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new ne(te.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof qt))throw new ne(te.ErrInvalidArgument,"fail to execute, only Text can execute edit");const r=n,[,o,s]=r.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);for(const u of o)t.registerGCPair(u);return{opInfos:s.map(({from:u,to:h,value:y})=>({type:"style",from:u,to:h,value:y,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),n=this.fromPos.toTestString(),r=this.toPos.toTestString(),o=this.attributes;return`${t}.STYL(${n},${r},${JSON.stringify(o)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const oc=2,sc="root",Fn="text";function Vr(i,e){let t=0;const n=i.children;for(let r=0;r<e;r++){const o=n[r];!o||o.isRemoved||(t+=o.paddedSize)}return t}class ac{constructor(e,t=[]){J(this,"type");J(this,"parent");J(this,"_children");J(this,"size");if(this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new ne(te.ErrRefused,"Text node cannot have children")}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*t,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const t of this._children){const n=t.updateDescendantsSize();t.isRemoved||(e+=n)}return this.size+=e,this.paddedSize}get isText(){return this.type===Fn}get paddedSize(){return this.size+(this.isText?0:oc)}isAncestorOf(e){return lc(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}get prevSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e-1];if(t)return t}splitText(e,t){if(e===0||e===this.size)return;const n=this.value.slice(0,e),r=this.value.slice(e);if(!r.length)return;this.value=n;const o=this.cloneText(e+t);return o.value=r,this.parent.insertAfterInternal(o,this),o}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}append(...e){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this}insertBefore(e,t){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new ne(te.ErrInvalidArgument,"child not found");this.insertAtInternal(e,n),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new ne(te.ErrInvalidArgument,"child not found");this.insertAtInternal(e,n+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new ne(te.ErrInvalidArgument,"child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const n=this.cloneElement(t);this.parent.insertAfterInternal(n,this),n.updateAncestorsSize();const r=this.children.slice(0,e),o=this.children.slice(e);this._children=r,n._children=o,this.size=this._children.reduce((s,u)=>s+u.paddedSize,0),n.size=n._children.reduce((s,u)=>s+u.paddedSize,0);for(const s of n._children)s.parent=n;return n}insertAfterInternal(e,t){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new ne(te.ErrInvalidArgument,"child not found");this.insertAtInternal(e,n+1)}insertAtInternal(e,t){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(r=>!r.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new ne(te.ErrRefused,"Text node cannot have children");let t=e;for(;t;){const n=this._children.indexOf(t);if(n!==-1)return n;t=t.parent}return-1}}function lc(i,e){if(i===e)return!1;for(;e.parent;){if(e.parent===i)return!0;e=e.parent}return!1}var st=(i=>(i.Start="Start",i.End="End",i.Text="Text",i))(st||{});function Sa(i,e,t,n){if(e>t)throw new ne(te.ErrInvalidArgument,`from is greater than to: ${e} > ${t}`);if(e>i.size)throw new ne(te.ErrInvalidArgument,`from is out of range: ${e} > ${i.size}`);if(t>i.size)throw new ne(te.ErrInvalidArgument,`to is out of range: ${t} > ${i.size}`);if(e===t)return;let r=0;for(const o of i.children){if(e-o.paddedSize<r&&r<t){const s=o.isText?e-r:e-r-1,u=o.isText?t-r:t-r-1,h=!o.isText&&s<0,y=!o.isText&&u>o.size;(o.isText||h)&&n([o,o.isText?"Text":"Start"],y),Sa(o,Math.max(0,s),Math.min(u,o.size),n),y&&n([o,"End"],y)}r+=o.paddedSize}}function ka(i,e,t=0){for(const n of i.children)ka(n,e,t+1);e(i,t)}function Wi(i,e,t=0){for(const n of i._children)Wi(n,e,t+1);e(i,t)}function po(i,e,t=!0){if(e>i.size)throw new ne(te.ErrInvalidArgument,`index is out of range: ${e} > ${i.size}`);if(i.isText)return{node:i,offset:e};let n=0,r=0;for(const o of i.children){if(t&&o.isText&&o.size>=e-r)return po(o,e-r,t);if(e===r)return{node:i,offset:n};if(!t&&o.paddedSize===e-r)return{node:i,offset:n+1};if(o.paddedSize>e-r)return po(o,e-r-1,t);r+=o.paddedSize,n+=1}return{node:i,offset:n}}function xa(i){return i.isText||i.children.length===0?i:xa(i.children[0])}function uc(i,e){if(i.size<e)throw new ne(te.ErrInvalidArgument,"unacceptable path");for(let t=0;t<i.children.length;t++){const n=i.children[t];if(n.size<e)e-=n.size;else{i=n;break}}return{node:i,offset:e}}class cc{constructor(e){J(this,"root");this.root=e}tokensBetween(e,t,n){Sa(this.root,e,t,n)}traverse(e){ka(this.root,e,0)}traverseAll(e){Wi(this.root,e,0)}findTreePos(e,t=!0){return po(this.root,e,t)}treePosToPath(e){const t=[];let n=e.node;if(n.isText){const r=n.parent.findOffset(n);if(r===-1)throw new ne(te.ErrInvalidArgument,"invalid treePos");const o=Vr(n.parent,r);t.push(o+e.offset),n=n.parent}else if(n.hasTextChild()){const r=Vr(n,e.offset);t.push(r)}else t.push(e.offset);for(;n.parent;){const r=n.parent.findOffset(n);if(r===-1)throw new ne(te.ErrInvalidArgument,"invalid treePos");t.push(r),n=n.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new ne(te.ErrInvalidArgument,"unacceptable path");let t=this.root;for(let n=0;n<e.length-1;n++){const r=e[n];if(t=t.children[r],!t)throw new ne(te.ErrInvalidArgument,"unacceptable path")}if(t.hasTextChild())return uc(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new ne(te.ErrInvalidArgument,"unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:n}=e;if(t.isText){if(t.size===n){const r=t.nextSibling;return r||t.parent}return t}return t.children.length===n?t:xa(t.children[n])}indexOf(e){let{node:t}=e;const{offset:n}=e;let r=0,o=1;if(t.isText){r+=n;const s=t.parent,u=s.findOffset(t);if(u===-1)throw new ne(te.ErrInvalidArgument,"invalid pos");r+=Vr(s,u),t=t.parent}else r+=Vr(t,n);for(;t!=null&&t.parent;){const s=t.parent,u=s.findOffset(t);if(u===-1)throw new ne(te.ErrInvalidArgument,"invalid pos");r+=Vr(s,u),o++,t=t.parent}return r+o-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const fc=(i,e)=>i===e?0:i<e?-1:1;class hc{constructor(e,t,n){J(this,"key");J(this,"value");J(this,"parent");J(this,"left");J(this,"right");J(this,"isRed");this.key=e,this.value=t,this.isRed=n}}class dc{constructor(e){J(this,"stack");this.stack=[],this.traverseInorder(e)}traverseInorder(e){e&&(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class Na{constructor(e){J(this,"root");J(this,"comparator");J(this,"counter");this.comparator=typeof e<"u"?e:fc,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new dc(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const n=this.comparator(e,t.key);if(n>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(n<0)if(t.left)t.left.parent=t,t=t.left;else{let r=t.parent,o=t;for(;r&&o===r.left;)o=r,r=r.parent;return r}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const n=this.comparator(e,t.key);if(n===0)return t;n<0?t=t.left:n>0&&(t=t.right)}}putInternal(e,t,n){if(!n)return this.counter+=1,new hc(e,t,!0);const r=this.comparator(e,n.key);return r<0?n.left=this.putInternal(e,t,n.left):r>0?n.right=this.putInternal(e,t,n.right):n.value=t,this.isRed(n.right)&&!this.isRed(n.left)&&(n=this.rotateLeft(n)),this.isRed(n.left)&&this.isRed(n.left.left)&&(n=this.rotateRight(n)),this.isRed(n.left)&&this.isRed(n.right)&&this.flipColors(n),n}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const n=this.min(e.right);e.value=n.value,e.key=n.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class Zt{constructor(e,t){J(this,"parentID");J(this,"leftSiblingID");this.parentID=e,this.leftSiblingID=t}static of(e,t){return new Zt(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:n}=e,r;return n.isText?(n.parent.children[0]===n&&t===0?r=n.parent:r=n,n=n.parent):t===0?r=n:r=n.children[t-1],Zt.of(n.id,gt.of(r.getCreatedAt(),r.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return Zt.of(gt.of(Ot.fromStruct(e.parentID.createdAt),e.parentID.offset),gt.of(Ot.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const t=this.getParentID(),n=this.getLeftSiblingID(),r=e.findFloorNode(t);let o=e.findFloorNode(n);if(!r||!o)throw new ne(te.ErrRefused,`cannot find node of CRDTTreePos(${t.toTestString()}, ${n.toTestString()})`);return!n.equals(t)&&n.getOffset()>0&&n.getOffset()===o.id.getOffset()&&o.insPrevID&&(o=e.findFloorNode(o.insPrevID)),[r,o]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class gt{constructor(e,t){J(this,"createdAt");J(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new gt(e,t)}static fromStruct(e){return gt.of(Ot.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const n=e.getCreatedAt().compare(t.getCreatedAt());return n!==0?n:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class Ct extends ac{constructor(t,n,r,o,s){super(n);J(this,"id");J(this,"removedAt");J(this,"attrs");J(this,"insPrevID");J(this,"insNextID");J(this,"_value","");this.id=t,this.removedAt=s,o&&(this.attrs=o),typeof r=="string"?this.value=r:Array.isArray(r)&&(this._children=r)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(t,n,r,o){return new Ct(t,n,r,o)}deepcopy(){var n;const t=new Ct(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(n=this.attrs)==null?void 0:n.deepcopy(),t._children=this._children.map(r=>{const o=r.deepcopy();return o.parent=t,o}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new ne(te.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(t){if(!this.isText)throw new ne(te.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=t,this.size=t.length}get isRemoved(){return!!this.removedAt}remove(t){const n=!this.removedAt;(!this.removedAt||this.removedAt.compare(t)>0)&&(this.removedAt=t),n&&this.updateAncestorsSize()}cloneText(t){return new Ct(gt.of(this.id.getCreatedAt(),t),this.type,void 0,void 0,this.removedAt)}cloneElement(t){return new Ct(gt.of(t(),0),this.type,void 0,void 0,this.removedAt)}split(t,n,r){const o=this.isText?this.splitText(n,this.id.getOffset()):this.splitElement(n,r);if(o){if(o.insPrevID=this.id,this.insNextID){const s=t.findFloorNode(this.insNextID);s.insPrevID=o.id,o.insNextID=this.insNextID}this.insNextID=o.id,t.registerNode(o)}return o}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(t,n){return!this.getCreatedAt().after(n)&&(!this.removedAt||t.after(this.removedAt))}canStyle(t,n){return this.isText?!1:!this.getCreatedAt().after(n)&&(!this.removedAt||t.after(this.removedAt))}setAttrs(t,n){this.attrs||(this.attrs=new Un);const r=new Array;for(const[o,s]of Object.entries(t))r.push(this.attrs.set(o,s,n));return r}purge(t){this.attrs&&this.attrs.purge(t)}getGCPairs(){const t=[];if(!this.attrs)return t;for(const n of this.attrs)n.getRemovedAt()&&t.push({parent:this,child:n});return t}}function mo(i){var t;if(i.isText){const n=i;return{type:n.type,value:n.value}}const e={type:i.type,children:i.children.map(mo)};return i.attrs&&(e.attributes=Pr((t=i.attrs)==null?void 0:t.toObject())),e}function ko(i){if(i.isText)return i.value;let e="";return i.attrs&&i.attrs.size()&&(e=" "+Array.from(i.attrs).filter(t=>!t.isRemoved()).sort((t,n)=>t.getKey().localeCompare(n.getKey())).map(t=>{const n=JSON.parse(t.getValue());return typeof n=="string"?`${t.getKey()}="${n}"`:`${t.getKey()}="${xn(t.getValue())}"`}).join(" ")),`<${i.type}${e}>${i.children.map(t=>ko(t)).join("")}</${i.type}>`}function Ia(i){if(i.isText){const e=i;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:i.type,children:i.children.map(Ia),size:i.size,isRemoved:i.isRemoved}}class Ft extends li{constructor(t,n){super(n);J(this,"indexTree");J(this,"nodeMapByID");this.indexTree=new cc(t),this.nodeMapByID=new Na(gt.createComparator()),this.indexTree.traverseAll(r=>{this.nodeMapByID.put(r.id,r)})}static create(t,n){return new Ft(t,n)}findFloorNode(t){const n=this.nodeMapByID.floorEntry(t);if(!(!n||!n.key.getCreatedAt().equals(t.getCreatedAt())))return n.value}registerNode(t){this.nodeMapByID.put(t.id,t)}findNodesAndSplitText(t,n){const[r,o]=t.toTreeNodePair(this);let s=o;const u=r===s,h=s.parent&&!u?s.parent:r;if(s.isText&&s.split(this,t.getLeftSiblingID().getOffset()-s.id.getOffset()),n){const y=h.allChildren,v=u?0:y.indexOf(s)+1;for(let d=v;d<y.length;d++){const l=y[d];if(!l.id.getCreatedAt().after(n))break;s=l}}return[h,s]}style(t,n,r,o){const[s,u]=this.findNodesAndSplitText(t[0],r),[h,y]=this.findNodesAndSplitText(t[1],r),v=[],d=n?Pr(n):{},l=new Map,a=[];return this.traverseInPosRange(s,u,h,y,([p])=>{const b=p.getCreatedAt().getActorID(),w=o?o.has(b)?o.get(b):Xt:Gr;if(p.canStyle(r,w)&&n){const m=l.get(b),f=p.getCreatedAt();(!m||f.after(m))&&l.set(b,f);const g=p.setAttrs(n,r),c=g.reduce((_,[,S])=>(S&&(_[S.getKey()]=d[S.getKey()]),_),{}),T=p.parent,A=p.prevSibling||p.parent;Object.keys(c).length>0&&v.push({type:"style",from:this.toIndex(T,A),to:this.toIndex(p,p),fromPath:this.toPath(T,A),toPath:this.toPath(p,p),actor:r.getActorID(),value:c});for(const[_]of g)_&&a.push({parent:p,child:_})}}),[l,a,v]}removeStyle(t,n,r,o){const[s,u]=this.findNodesAndSplitText(t[0],r),[h,y]=this.findNodesAndSplitText(t[1],r),v=[],d=new Map,l=[];return this.traverseInPosRange(s,u,h,y,([a])=>{const p=a.getCreatedAt().getActorID(),b=o?o.has(p)?o.get(p):Xt:Gr;if(a.canStyle(r,b)&&n){const w=d.get(p),m=a.getCreatedAt();(!w||m.after(w))&&d.set(p,m),a.attrs||(a.attrs=new Un);for(const c of n){const T=a.attrs.remove(c,r);for(const A of T)l.push({parent:a,child:A})}const f=a.parent,g=a.prevSibling||a.parent;v.push({actor:r.getActorID(),type:"removeStyle",from:this.toIndex(f,g),to:this.toIndex(a,a),fromPath:this.toPath(f,g),toPath:this.toPath(a,a),value:n})}}),[d,l,v]}edit(t,n,r,o,s,u){const[h,y]=this.findNodesAndSplitText(t[0],o),[v,d]=this.findNodesAndSplitText(t[1],o),l=this.toIndex(h,y),a=this.toPath(h,y),p=[],b=[],w=[],m=new Map;this.traverseInPosRange(h,y,v,d,([c,T],A)=>{if(T===st.Start&&!A)for(const I of c.children)w.push(I);const _=c.getCreatedAt().getActorID(),S=u?u.has(_)?u.get(_):Xt:Gr;if(c.canDelete(o,S)||p.includes(c.parent)){const I=m.get(_),O=c.getCreatedAt();(!I||O.after(I))&&m.set(_,O),(T===st.Text||T===st.Start)&&p.push(c),b.push([c,T])}});const f=this.makeDeletionChanges(b,o),g=[];for(const c of p)c.remove(o),c.isRemoved&&g.push({parent:this,child:c});for(const c of w)c.removedAt||h.append(c);if(r>0){let c=0,T=h,A=y;for(;c<r;)T.split(this,T.findOffset(A)+1,s),A=T,T=T.parent,c++;f.push({type:"content",from:l,to:l,fromPath:a,toPath:a,actor:o.getActorID()})}if(n!=null&&n.length){const c=[];let T=y;for(const A of n)T===h?h.insertAt(A,0):h.insertAfter(A,T),T=A,Wi(A,_=>{h.isRemoved&&(_.remove(o),g.push({parent:this,child:_})),this.nodeMapByID.put(_.id,_)}),A.isRemoved||c.push(A);if(c.length){const A=c.map(_=>mo(_));f.length&&f[f.length-1].from===l?f[f.length-1].value=A:f.push({type:"content",from:l,to:l,fromPath:a,toPath:a,actor:o.getActorID(),value:A})}}return[f,g,m]}editT(t,n,r,o,s){const u=this.findPos(t[0]),h=this.findPos(t[1]);this.edit([u,h],n,r,o,s)}move(t,n,r){throw new ne(te.ErrUnimplemented,`not implemented: ${t}, ${n}, ${r}`)}purge(t){var o;(o=t.parent)==null||o.removeChild(t),this.nodeMapByID.remove(t.id);const n=t.insPrevID,r=t.insNextID;if(n){const s=this.findFloorNode(n);s.insNextID=r}if(r){const s=this.findFloorNode(r);s.insPrevID=n}t.insPrevID=void 0,t.insNextID=void 0}getGCPairs(){const t=[];return this.indexTree.traverse(n=>{n.getRemovedAt()&&t.push({parent:this,child:n});for(const r of n.getGCPairs())t.push(r)}),t}findPos(t,n=!0){const r=this.indexTree.findTreePos(t,n);return Zt.fromTreePos(r)}pathToPosRange(t){const n=this.pathToIndex(t);return[this.findPos(n),this.findPos(n+1)]}pathToPos(t){const n=this.indexTree.pathToIndex(t);return this.findPos(n)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return ko(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const t=this.indexTree.getRoot(),n=(r,o=void 0,s=void 0,u=0)=>{var a,p,b,w;let h,y,v;const d=r.isText?{node:r,offset:0}:o&&s?this.toTreePos(o,s):null;d&&(h=this.indexTree.indexOf(d),y=this.indexTree.treePosToPath(d),v=Zt.fromTreePos(d).toStruct());const l={type:r.type,parent:o==null?void 0:o.id.toTestString(),size:r.size,id:r.id.toTestString(),removedAt:(a=r.removedAt)==null?void 0:a.toTestString(),insPrev:(p=r.insPrevID)==null?void 0:p.toTestString(),insNext:(b=r.insNextID)==null?void 0:b.toTestString(),value:r.isText?r.value:void 0,isRemoved:r.isRemoved,children:[],depth:u,attributes:r.attrs?Pr((w=r.attrs)==null?void 0:w.toObject()):void 0,index:h,path:y,pos:v};for(let m=0;m<r.allChildren.length;m++){const f=m===0?r:r.allChildren[m-1];l.children.push(n(r.allChildren[m],r,f,u+1))}return l};return n(t)}getRootTreeNode(){return mo(this.indexTree.getRoot())}toTestTreeNode(){return Ia(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const t=this.getRoot();return new Ft(t.deepcopy(),this.getCreatedAt())}toPath(t,n){const r=this.toTreePos(t,n);return r?this.indexTree.treePosToPath(r):[]}toIndex(t,n){const r=this.toTreePos(t,n);return r?this.indexTree.indexOf(r):-1}indexToPath(t){return this.indexTree.indexToPath(t)}pathToIndex(t){return this.indexTree.pathToIndex(t)}indexRangeToPosRange(t){const n=this.findPos(t[0]);return t[0]===t[1]?[n,n]:[n,this.findPos(t[1])]}indexRangeToPosStructRange(t){const[n,r]=t,o=this.findPos(n);return n===r?[o.toStruct(),o.toStruct()]:[o.toStruct(),this.findPos(r).toStruct()]}posRangeToPathRange(t){const[n,r]=this.findNodesAndSplitText(t[0]),[o,s]=this.findNodesAndSplitText(t[1]);return[this.toPath(n,r),this.toPath(o,s)]}posRangeToIndexRange(t){const[n,r]=this.findNodesAndSplitText(t[0]),[o,s]=this.findNodesAndSplitText(t[1]);return[this.toIndex(n,r),this.toIndex(o,s)]}traverseInPosRange(t,n,r,o,s){const u=this.toIndex(t,n),h=this.toIndex(r,o);return this.indexTree.tokensBetween(u,h,s)}toTreePos(t,n){if(!t||!n)return;if(t.isRemoved){let o;for(;t.isRemoved;)o=t,t=o.parent;const s=t.findOffset(o);return{node:t,offset:s}}if(t===n)return{node:t,offset:0};let r=t.findOffset(n);if(!n.isRemoved){if(n.isText)return{node:n,offset:n.paddedSize};r++}return{node:t,offset:r}}makeDeletionChanges(t,n){const r=[],o=[];let s=null,u=null;for(let h=0;h<t.length;h++){const y=t[h],v=t[h+1];s||(s=y),u=y;const d=this.findRightToken(y);(!d||!v||d[0]!==v[0]||d[1]!==v[1])&&(o.push([s,u]),s=null,u=null)}for(const h of o){const[y,v]=h,[d,l]=this.findLeftToken(y),[a,p]=v,b=l===st.Start?d:d.parent,w=p===st.Start?a:a.parent,m=this.toIndex(b,d),f=this.toIndex(w,a);m<f&&(r.length>0&&m===r[r.length-1].to?(r[r.length-1].to=f,r[r.length-1].toPath=this.toPath(w,a)):r.push({type:"content",from:m,to:f,fromPath:this.toPath(b,d),toPath:this.toPath(w,a),actor:n.getActorID()}))}return r.reverse()}findRightToken([t,n]){if(n===st.Start){const h=t.allChildren;return h.length>0?[h[0],h[0].isText?st.Text:st.Start]:[t,st.End]}const r=t.parent,o=r.allChildren,s=o.indexOf(t);if(r&&s===o.length-1)return[r,st.End];const u=o[s+1];return[u,u.isText?st.Text:st.Start]}findLeftToken([t,n]){if(n===st.End){const h=t.allChildren;if(h.length>0){const y=h[h.length-1];return[y,y.isText?st.Text:st.End]}return[t,st.Start]}const r=t.parent,o=r.allChildren,s=o.indexOf(t);if(r&&s===0)return[r,st.Start];const u=o[s-1];return[u,u.isText?st.Text:st.End]}}class hi extends en{constructor(t,n,r,o,s,u,h){super(t,h);J(this,"fromPos");J(this,"toPos");J(this,"contents");J(this,"splitLevel");J(this,"maxCreatedAtMapByActor");this.fromPos=n,this.toPos=r,this.contents=o,this.splitLevel=s,this.maxCreatedAtMapByActor=u}static create(t,n,r,o,s,u,h){return new hi(t,n,r,o,s,u,h)}execute(t){var h;const n=t.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new ne(te.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof Ft))throw new ne(te.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const r=this.getExecutedAt(),o=n,[s,u]=o.edit([this.fromPos,this.toPos],(h=this.contents)==null?void 0:h.map(y=>y.deepcopy()),this.splitLevel,r,(()=>{let y=r.getDelimiter();return this.contents!==void 0&&(y+=this.contents.length),()=>Ot.of(r.getLamport(),++y,r.getActorID())})(),this.maxCreatedAtMapByActor);for(const y of u)t.registerGCPair(y);return{opInfos:s.map(({from:y,to:v,value:d,splitLevel:l,fromPath:a,toPath:p})=>({type:"tree-edit",path:t.createPath(this.getParentCreatedAt()),from:y,to:v,value:d,splitLevel:l,fromPath:a,toPath:p}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),n=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,r=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,o=this.contents||[];return`${t}.EDIT(${n},${r},${o.map(s=>ko(s)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Qn{constructor(e,t,n,r){J(this,"clientSeq");J(this,"serverSeq");J(this,"lamport");J(this,"actor");this.clientSeq=e,this.serverSeq=r,this.lamport=t,this.actor=n}static of(e,t,n,r){return new Qn(e,t,n,r)}next(){return new Qn(this.clientSeq+1,this.lamport.add(1),this.actor)}syncLamport(e){return e.greaterThan(this.lamport)?new Qn(this.clientSeq,e,this.actor):new Qn(this.clientSeq,this.lamport.add(1),this.actor)}createTimeTicket(e){return Ot.of(this.lamport,e,this.actor)}setActor(e){return new Qn(this.clientSeq,this.lamport,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const gc=new Qn(0,Re.fromInt(0,!0),Hi);class Br{constructor({id:e,operations:t,presenceChange:n,message:r}){J(this,"id");J(this,"operations");J(this,"presenceChange");J(this,"message");this.id=e,this.operations=t||[],this.presenceChange=n,this.message=r}static create({id:e,operations:t,presenceChange:n,message:r}){return new Br({id:e,operations:t,presenceChange:n,message:r})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,n){const r=[],o=[];for(const s of this.operations){const u=s.execute(e,n);if(!u)continue;const{opInfos:h,reverseOp:y}=u;r.push(...h),y&&o.unshift(y)}return this.presenceChange&&(this.presenceChange.type===ir.Put?t.set(this.id.getActorID(),Gt(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:r,reverseOps:o}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:ct.bytesToHex(ct.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>ct.bytesToHex(ct.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:n,presenceChange:r,message:o}=e;return Br.create({id:ct.bytesToChangeID(ct.hexToBytes(t)),operations:n==null?void 0:n.map(s=>ct.bytesToOperation(ct.hexToBytes(s))),presenceChange:r,message:o})}}class Gi{constructor(e,t,n,r,o,s){J(this,"documentKey");J(this,"checkpoint");J(this,"isRemoved");J(this,"changes");J(this,"snapshot");J(this,"minSyncedTicket");this.documentKey=e,this.checkpoint=t,this.isRemoved=n,this.changes=r,this.snapshot=o,this.minSyncedTicket=s}static create(e,t,n,r,o,s){return new Gi(e,t,n,r,o,s)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}}class Cr{constructor(e,t){J(this,"serverSeq");J(this,"clientSeq");this.serverSeq=e,this.clientSeq=t}static of(e,t){return new Cr(e,t)}increaseClientSeq(e){return e===0?this:new Cr(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq.greaterThan(e.serverSeq)?this.serverSeq:e.serverSeq,n=Math.max(this.clientSeq,e.clientSeq);return Cr.of(t,n)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq.equals(e.serverSeq)}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const pc=new Cr(Re.fromInt(0,!0),0);class Nn{constructor(e,t){J(this,"createdAt");J(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new Nn(e,t)}static fromStruct(e){return Nn.of(Ot.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new Nn(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const mc=Nn.of(Xt,0);class Qt{constructor(e,t){J(this,"id");J(this,"relativeOffset");this.id=e,this.relativeOffset=t}static of(e,t){return new Qt(e,t)}static fromStruct(e){const t=Nn.fromStruct(e.id);return Qt.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return Nn.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class nr extends Oa{constructor(t,n,r){super(n);J(this,"id");J(this,"removedAt");J(this,"prev");J(this,"next");J(this,"insPrev");J(this,"insNext");this.id=t,this.removedAt=r}static create(t,n){return new nr(t,n)}static createComparator(){return(t,n)=>{const r=t.getCreatedAt().compare(n.getCreatedAt());return r!==0?r:t.getOffset()>n.getOffset()?1:t.getOffset()<n.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(t){this.prev=t,t&&(t.next=this)}setNext(t){this.next=t,t&&(t.prev=this)}setInsPrev(t){this.insPrev=t,t&&(t.insNext=this)}setInsNext(t){this.insNext=t,t&&(t.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(t){return new nr(this.id.split(t),this.splitValue(t),this.removedAt)}canDelete(t,n){const r=!this.removedAt;return!this.getCreatedAt().after(n)&&(!this.removedAt||t.after(this.removedAt))?r:!1}canStyle(t,n){return!this.getCreatedAt().after(n)&&(!this.removedAt||t.after(this.removedAt))}remove(t){this.removedAt=t}createPosRange(){return[Qt.of(this.id,0),Qt.of(this.id,this.getLength())]}deepcopy(){return new nr(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(t){const n=this.value;return this.value=n.substring(0,t),n.substring(t,n.length)}toIDString(){return this.id.toIDString()}}class qr{constructor(){J(this,"head");J(this,"treeByIndex");J(this,"treeByID");this.head=nr.create(mc),this.treeByIndex=new ni,this.treeByID=new Na(nr.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new qr}edit(e,t,n,r){const[o,s]=this.findNodeWithSplit(e[1],t),[u,h]=this.findNodeWithSplit(e[0],t),y=this.findBetween(h,s),[v,d,l]=this.deleteNodes(y,t,r),a=s?s.getID():o.getID();let p=Qt.of(a,0);if(n){const w=this.posToIndex(u.createPosRange()[1],!0),m=this.insertAfter(u,nr.create(Nn.of(t,0),n));v.length&&v[v.length-1].from===w?v[v.length-1].value=n:v.push({actor:t.getActorID(),from:w,to:w,value:n}),p=Qt.of(m.getID(),m.getContentLength())}const b=[];for(const[,w]of l)b.push({parent:this,child:w});return[p,d,b,v]}indexToPos(e){const[t,n]=this.treeByIndex.find(e),r=t;return Qt.of(r.getID(),n)}findIndexesFromRange(e){const[t,n]=e;return[this.posToIndex(t,!1),this.posToIndex(n,!0)]}posToIndex(e,t){const n=e.getAbsoluteID(),r=t?this.findFloorNodePreferToLeft(n):this.findFloorNode(n);if(!r)throw new ne(te.ErrInvalidArgument,`the node of the given id should be found: ${n.toTestString()}`);const o=this.treeByIndex.indexOf(r),s=r.isRemoved()?0:n.getOffset()-r.getID().getOffset();return o+s}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new qr;let t=this.head.getNext(),n=e.head,r;for(;t;){if(r=e.insertAfter(n,t.deepcopy()),t.hasInsPrev()){const o=e.findNode(t.getInsPrevID());r.setInsPrev(o)}n=r,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const n=e.getNext();return t.setPrev(e),n&&n.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const n=e.getAbsoluteID();let r=this.findFloorNodePreferToLeft(n);const o=n.getOffset()-r.getID().getOffset();for(this.splitNode(r,o);r.hasNext()&&r.getNext().getCreatedAt().after(t);)r=r.getNext();return[r,r.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(!t)throw new ne(te.ErrInvalidArgument,`the node of the given id should be found: ${e.toTestString()}`);if(e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const n=[];let r=e;for(;r&&r!==t;)n.push(r),r=r.getNext();return n}splitNode(e,t){if(t>e.getContentLength())throw new ne(te.ErrInvalidArgument,"offset should be less than or equal to length");if(t===0)return e;if(t===e.getContentLength())return e.getNext();const n=e.split(t);this.treeByIndex.updateWeight(n),this.insertAfter(e,n);const r=e.getInsNext();return r&&r.setInsPrev(n),n.setInsPrev(e),n}deleteNodes(e,t,n){if(!e.length)return[[],new Map,new Map];const[r,o]=this.filterNodes(e,t,n),s=new Map,u=new Map,h=this.makeChanges(o,t);for(const y of r){const v=y.getCreatedAt().getActorID();(!s.has(v)||y.getID().getCreatedAt().after(s.get(v)))&&s.set(v,y.getID().getCreatedAt()),u.set(y.getID().toIDString(),y),y.remove(t)}return this.deleteIndexNodes(o),[h,s,u]}filterNodes(e,t,n){const r=!!n,o=[],s=[],[u,h]=this.findEdgesOfCandidates(e);s.push(u);for(const y of e){const v=y.getCreatedAt().getActorID(),d=r?n.has(v)?n.get(v):Xt:Gr;y.canDelete(t,d)?o.push(y):s.push(y)}return s.push(h),[o,s]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const n=[];let r,o;for(let s=0;s<e.length-1;s++){const u=e[s],h=e[s+1];u.getNext()!=h&&([r]=this.findIndexesFromRange(u.getNext().createPosRange()),h?[,o]=this.findIndexesFromRange(h.getPrev().createPosRange()):o=this.treeByIndex.length,r<o&&n.push({actor:t.getActorID(),from:r,to:o}))}return n.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const n=e[t],r=e[t+1];n.getNext()!=r&&this.treeByIndex.deleteRange(n,r)}}purge(e){this.treeByIndex.delete(e),this.treeByID.remove(e.getID());const t=e.getPrev(),n=e.getNext(),r=e.getInsPrev(),o=e.getInsNext();t&&t.setNext(n),n&&n.setPrev(t),e.setPrev(void 0),e.setNext(void 0),r&&r.setInsNext(o),o&&o.setInsPrev(r),e.setInsPrev(void 0),e.setInsNext(void 0)}}const ys=i=>i<0?Math.ceil(i):Math.floor(i);var In=(i=>(i[i.IntegerCnt=0]="IntegerCnt",i[i.LongCnt=1]="LongCnt",i))(In||{});class Dt extends li{constructor(t,n,r){super(r);J(this,"valueType");J(this,"value");switch(this.valueType=t,t){case 0:typeof n=="number"?n>Math.pow(2,31)-1||n<-Math.pow(2,31)?this.value=Re.fromNumber(n).toInt():this.value=ys(n):this.value=n.toInt();break;case 1:typeof n=="number"?this.value=Re.fromNumber(n):this.value=n;break;default:throw new ne(te.ErrUnimplemented,`unimplemented type: ${t}`)}}static create(t,n,r){return new Dt(t,n,r)}static valueFromBytes(t,n){switch(t){case 0:return n[0]|n[1]<<8|n[2]<<16|n[3]<<24;case 1:return Re.fromBytesLE(Array.from(n));default:throw new ne(te.ErrUnimplemented,`unimplemented type: ${t}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const t=Dt.create(this.valueType,this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t}getType(){return this.valueType}static getCounterType(t){switch(typeof t){case"object":return t instanceof Re?1:void 0;case"number":return t>Math.pow(2,31)-1||t<-Math.pow(2,31)?1:0;default:return}}static isSupport(t){return!!Dt.getCounterType(t)}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===0||t===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 1:{const n=this.value.toBytesLE();return Uint8Array.from(n)}default:throw new ne(te.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(t){function n(r){if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`)}return n(this),n(t),this.valueType===1?this.value=this.value.add(t.getValue()):t.getType()===ut.Long?this.value=this.value+t.getValue().toInt():this.value=Re.fromNumber(this.value+ys(t.getValue())).toInt(),this}}class Fr extends en{constructor(t,n,r){super(t,r);J(this,"value");this.value=n}static create(t,n,r){return new Fr(t,n,r)}execute(t){const n=t.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new ne(te.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof Dt))throw new ne(te.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const r=n,o=this.value.deepcopy();return r.increase(o),{opInfos:[{type:"increase",path:t.createPath(this.getParentCreatedAt()),value:o.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const t=this.value.deepcopy(),r=t.getType()===ut.Long?t.getValue().multiply(-1):t.getValue()*-1;return Fr.create(this.getParentCreatedAt(),Xe.of(r,t.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class jn extends en{constructor(t,n,r,o,s,u,h){super(t,h);J(this,"fromPos");J(this,"toPos");J(this,"maxCreatedAtMapByActor");J(this,"attributes");J(this,"attributesToRemove");this.fromPos=n,this.toPos=r,this.maxCreatedAtMapByActor=o,this.attributes=s,this.attributesToRemove=u}static create(t,n,r,o,s,u){return new jn(t,n,r,o,s,new Array,u)}static createTreeRemoveStyleOperation(t,n,r,o,s,u){return new jn(t,n,r,o,new Map,s,u)}execute(t){const n=t.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new ne(te.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof Ft))throw new ne(te.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const r=n;let o,s;if(this.attributes.size){const u={};[...this.attributes].forEach(([h,y])=>u[h]=y),[,s,o]=r.style([this.fromPos,this.toPos],u,this.getExecutedAt(),this.maxCreatedAtMapByActor)}else{const u=this.attributesToRemove;[,s,o]=r.removeStyle([this.fromPos,this.toPos],u,this.getExecutedAt(),this.maxCreatedAtMapByActor)}for(const u of s)t.registerGCPair(u);return{opInfos:o.map(({from:u,to:h,value:y,fromPath:v,toPath:d})=>({type:"tree-style",from:u,to:h,value:this.attributes.size?{attributes:y}:{attributesToRemove:y},fromPath:v,toPath:d,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),n=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,r=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${t}.STYLE(${n},${r},${Object.entries(this.attributes||{}).map(([o,s])=>`${o}:"${s}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}function yc(i){const e=new _o,t=e.data;for(const[n,r]of Object.entries(i))t[n]=JSON.stringify(r);return e}function vc(i){if(i.type===ir.Put)return new ho({type:ei.PUT,presence:yc(i.presence)});if(i.type===ir.Clear)return new ho({type:ei.CLEAR});throw new ne(te.ErrUnimplemented,"unimplemented type")}function bc(i){return new ba({serverSeq:i.getServerSeqAsString(),clientSeq:i.getClientSeq()})}function Pa(i){return new Vi({clientSeq:i.getClientSeq(),lamport:i.getLamportAsString(),actorId:Do(i.getActorID())})}function Ee(i){if(i)return new ke({lamport:i.getLamportAsString(),delimiter:i.getDelimiter(),actorId:Do(i.getActorID())})}function Ca(i){switch(i){case ut.Null:return Le.NULL;case ut.Boolean:return Le.BOOLEAN;case ut.Integer:return Le.INTEGER;case ut.Long:return Le.LONG;case ut.Double:return Le.DOUBLE;case ut.String:return Le.STRING;case ut.Bytes:return Le.BYTES;case ut.Date:return Le.DATE;default:throw new ne(te.ErrInvalidType,`unsupported type: ${i}`)}}function Ra(i){switch(i){case In.IntegerCnt:return Le.INTEGER_CNT;case In.LongCnt:return Le.LONG_CNT;default:throw new ne(te.ErrInvalidType,`unsupported type: ${i}`)}}function oo(i){if(i instanceof St)return new Dn({type:Le.JSON_OBJECT,createdAt:Ee(i.getCreatedAt()),value:Ka(i)});if(i instanceof Rt)return new Dn({type:Le.JSON_ARRAY,createdAt:Ee(i.getCreatedAt()),value:Wc(i)});if(i instanceof qt)return new Dn({type:Le.TEXT,createdAt:Ee(i.getCreatedAt())});if(i instanceof Xe)return new Dn({type:Ca(i.getType()),createdAt:Ee(i.getCreatedAt()),value:i.toBytes()});if(i instanceof Dt)return new Dn({type:Ra(i.getType()),createdAt:Ee(i.getCreatedAt()),value:i.toBytes()});if(i instanceof Ft)return new Dn({type:Le.TREE,createdAt:Ee(i.getCreatedAt()),value:Yc(i)});throw new ne(te.ErrUnimplemented,"unimplemented element")}function wc(i){return new fo({createdAt:Ee(i.getCreatedAt()),offset:i.getOffset()})}function _i(i){return new mr({createdAt:Ee(i.getID().getCreatedAt()),offset:i.getID().getOffset(),relativeOffset:i.getRelativeOffset()})}function Ei(i){return new Qr({parentId:Yr(i.getParentID()),leftSiblingId:Yr(i.getLeftSiblingID())})}function Yr(i){return new Ir({createdAt:Ee(i.getCreatedAt()),offset:i.getOffset()})}function Da(i){const e=new wo;if(i instanceof yr){const t=i,n=new ta;n.parentCreatedAt=Ee(t.getParentCreatedAt()),n.key=t.getKey(),n.value=oo(t.getValue()),n.executedAt=Ee(t.getExecutedAt()),e.body.case="set",e.body.value=n}else if(i instanceof ui){const t=i,n=new na;n.parentCreatedAt=Ee(t.getParentCreatedAt()),n.prevCreatedAt=Ee(t.getPrevCreatedAt()),n.value=oo(t.getValue()),n.executedAt=Ee(t.getExecutedAt()),e.body.case="add",e.body.value=n}else if(i instanceof er){const t=i,n=new ra;n.parentCreatedAt=Ee(t.getParentCreatedAt()),n.prevCreatedAt=Ee(t.getPrevCreatedAt()),n.createdAt=Ee(t.getCreatedAt()),n.executedAt=Ee(t.getExecutedAt()),e.body.case="move",e.body.value=n}else if(i instanceof or){const t=i,n=new ia;n.parentCreatedAt=Ee(t.getParentCreatedAt()),n.createdAt=Ee(t.getCreatedAt()),n.executedAt=Ee(t.getExecutedAt()),e.body.case="remove",e.body.value=n}else if(i instanceof ci){const t=i,n=new oa;n.parentCreatedAt=Ee(t.getParentCreatedAt()),n.from=_i(t.getFromPos()),n.to=_i(t.getToPos());const r=n.createdAtMapByActor;for(const[s,u]of t.getMaxCreatedAtMapByActor())r[s]=Ee(u);n.content=t.getContent();const o=n.attributes;for(const[s,u]of t.getAttributes())o[s]=u;n.executedAt=Ee(t.getExecutedAt()),e.body.case="edit",e.body.value=n}else if(i instanceof fi){const t=i,n=new sa;n.parentCreatedAt=Ee(t.getParentCreatedAt()),n.from=_i(t.getFromPos()),n.to=_i(t.getToPos());const r=n.createdAtMapByActor;for(const[s,u]of t.getMaxCreatedAtMapByActor())r[s]=Ee(u);const o=n.attributes;for(const[s,u]of t.getAttributes())o[s]=u;n.executedAt=Ee(t.getExecutedAt()),e.body.case="style",e.body.value=n}else if(i instanceof Fr){const t=i,n=new aa;n.parentCreatedAt=Ee(t.getParentCreatedAt()),n.value=oo(t.getValue()),n.executedAt=Ee(t.getExecutedAt()),e.body.case="increase",e.body.value=n}else if(i instanceof hi){const t=i,n=new la,r=n.createdAtMapByActor;for(const[o,s]of t.getMaxCreatedAtMapByActor())r[o]=Ee(s);n.parentCreatedAt=Ee(t.getParentCreatedAt()),n.from=Ei(t.getFromPos()),n.to=Ei(t.getToPos()),n.contents=kc(t.getContents()),n.splitLevel=t.getSplitLevel(),n.executedAt=Ee(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=n}else if(i instanceof jn){const t=i,n=new ua;n.parentCreatedAt=Ee(t.getParentCreatedAt()),n.from=Ei(t.getFromPos()),n.to=Ei(t.getToPos());const r=n.createdAtMapByActor;for(const[s,u]of t.getMaxCreatedAtMapByActor())r[s]=Ee(u);const o=t.getAttributesToRemove();if(o.length>0)n.attributesToRemove=o;else{const s=n.attributes;for(const[u,h]of t.getAttributes())s[u]=h}n.executedAt=Ee(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=n}else throw new ne(te.ErrUnimplemented,"unimplemented operation");return e}function Tc(i){const e=[];for(const t of i)e.push(Da(t));return e}function Ac(i){const e=new ea({id:Pa(i.getID()),message:i.getMessage()});return i.hasOperations()&&(e.operations=Tc(i.getOperations())),i.hasPresenceChange()&&(e.presenceChange=vc(i.getPresenceChange())),e}function _c(i){const e=[];for(const t of i)e.push(Ac(t));return e}function Ec(i){const e=[];for(const t of i)e.push(new ma({key:t.getStrKey(),element:No(t.getValue())}));return e}function Oc(i){const e=[];for(const t of i)e.push(new To({element:No(t.getValue())}));return e}function Sc(i){const e=[];for(const t of i){const n=new ya;n.id=wc(t.getID()),n.value=t.getValue().getContent(),n.removedAt=Ee(t.getRemovedAt());const r=n.attributes,o=t.getValue().getAttrs();for(const s of o){const u=new Ki;u.value=s.getValue(),u.updatedAt=Ee(s.getUpdatedAt()),r[s.getKey()]=u}e.push(n)}return e}function kc(i){const e=[];if(!i||!i.length)return e;for(const t of i)e.push(new va({content:xo(t)}));return e}function xc(i){const e={};for(const t of i)e[t.getKey()]=new Ki({value:t.getValue(),updatedAt:Ee(t.getUpdatedAt()),isRemoved:t.isRemoved()});return e}function xo(i){if(!i)return[];const e=[];return Wi(i,(t,n)=>{const r=new Ao({id:Yr(t.id),type:t.type,removedAt:Ee(t.removedAt),depth:n});t.isText&&(r.value=t.value),t.insPrevID&&(r.insPrevId=Yr(t.insPrevID)),t.insNextID&&(r.insNextId=Yr(t.insNextID)),t.attrs&&(r.attributes=xc(t.attrs)),e.push(r)}),e}function Nc(i){const e=new jt;return e.body.case="jsonObject",e.body.value=new ca({nodes:Ec(i.getRHT()),createdAt:Ee(i.getCreatedAt()),movedAt:Ee(i.getMovedAt()),removedAt:Ee(i.getRemovedAt())}),e}function La(i){const e=new jt;return e.body.case="jsonArray",e.body.value=new fa({nodes:Oc(i.getElements()),createdAt:Ee(i.getCreatedAt()),movedAt:Ee(i.getMovedAt()),removedAt:Ee(i.getRemovedAt())}),e}function Ic(i){const e=new jt;return e.body.case="primitive",e.body.value=new ha({type:Ca(i.getType()),value:i.toBytes(),createdAt:Ee(i.getCreatedAt()),movedAt:Ee(i.getMovedAt()),removedAt:Ee(i.getRemovedAt())}),e}function Pc(i){const e=new jt;return e.body.case="text",e.body.value=new da({nodes:Sc(i.getRGATreeSplit()),createdAt:Ee(i.getCreatedAt()),movedAt:Ee(i.getMovedAt()),removedAt:Ee(i.getRemovedAt())}),e}function Cc(i){const e=new jt;return e.body.case="counter",e.body.value=new ga({type:Ra(i.getType()),value:i.toBytes(),createdAt:Ee(i.getCreatedAt()),movedAt:Ee(i.getMovedAt()),removedAt:Ee(i.getRemovedAt())}),e}function Ma(i){const e=new jt;return e.body.case="tree",e.body.value=new pa({nodes:xo(i.getRoot()),createdAt:Ee(i.getCreatedAt()),movedAt:Ee(i.getMovedAt()),removedAt:Ee(i.getRemovedAt())}),e}function No(i){if(i instanceof St)return Nc(i);if(i instanceof Rt)return La(i);if(i instanceof Xe)return Ic(i);if(i instanceof qt)return Pc(i);if(i instanceof Dt)return Cc(i);if(i instanceof Ft)return Ma(i);throw new ne(te.ErrUnimplemented,"unimplemented element")}function Rc(i){return new $n({documentKey:i.getDocumentKey(),checkpoint:bc(i.getCheckpoint()),isRemoved:i.getIsRemoved(),changes:_c(i.getChanges()),snapshot:i.getSnapshot(),minSyncedTicket:Ee(i.getMinSyncedTicket())})}function vs(i){const e=i.findDetails(Zu);for(const t of e)if(t.metadata.code)return t.metadata.code;return""}function Ba(i){let e;return i.serverSeq&&(e=Re.fromString(i.serverSeq,!0)),Qn.of(i.clientSeq,Re.fromString(i.lamport,!0),Ro(i.actorId),e)}function Se(i){if(i)return Ot.of(Re.fromString(i.lamport,!0),i.delimiter,Ro(i.actorId))}function Io(i){const e={};return Object.entries(i.data).forEach(([t,n])=>{e[t]=JSON.parse(n)}),e}function Dc(i){const e=i.type;if(e===ei.PUT){const t=Io(i.presence);return{type:ir.Put,presence:t}}if(e===ei.CLEAR)return{type:ir.Clear};throw new ne(te.ErrInvalidType,`unsupported type: ${e}`)}function Lc(i){const e=new Map;return Object.entries(i).forEach(([t,n])=>{e.set(t,Io(n))}),e}function qa(i){switch(i){case Le.NULL:return ut.Null;case Le.BOOLEAN:return ut.Boolean;case Le.INTEGER:return ut.Integer;case Le.LONG:return ut.Long;case Le.DOUBLE:return ut.Double;case Le.STRING:return ut.String;case Le.BYTES:return ut.Bytes;case Le.DATE:return ut.Date}throw new ne(te.ErrUnimplemented,`unimplemented value type: ${i}`)}function $i(i){switch(i){case Le.INTEGER_CNT:return In.IntegerCnt;case Le.LONG_CNT:return In.LongCnt}throw new ne(te.ErrUnimplemented,`unimplemented value type: ${i}`)}function so(i){switch(i.type){case Le.JSON_OBJECT:return i.value?Va(i.value):St.create(Se(i.createdAt));case Le.JSON_ARRAY:return i.value?Hc(i.value):Rt.create(Se(i.createdAt));case Le.TEXT:return qt.create(qr.create(),Se(i.createdAt));case Le.TREE:return Gc(i.value);case Le.NULL:case Le.BOOLEAN:case Le.INTEGER:case Le.LONG:case Le.DOUBLE:case Le.STRING:case Le.BYTES:case Le.DATE:return Xe.of(Xe.valueFromBytes(qa(i.type),i.value),Se(i.createdAt));case Le.INTEGER_CNT:case Le.LONG_CNT:return Dt.create($i(i.type),Dt.valueFromBytes($i(i.type),i.value),Se(i.createdAt))}}function Oi(i){return Qt.of(Nn.of(Se(i.createdAt),i.offset),i.relativeOffset)}function Fa(i){return Nn.of(Se(i.createdAt),i.offset)}function Mc(i){const e=ii.create(i.value);Object.entries(i.attributes).forEach(([n,r])=>{e.setAttr(n,r.value,Se(r.updatedAt))});const t=nr.create(Fa(i.id),e);return t.remove(Se(i.removedAt)),t}function Er(i){return Zt.of(Zr(i.parentId),Zr(i.leftSiblingId))}function Zr(i){return gt.of(Se(i.createdAt),i.offset)}function Bc(i){if(!i.length)return;const e=[];return i.forEach(t=>{const n=Po(t.content);e.push(n)}),e}function Po(i){if(i.length===0)return;const e=[];for(const r of i)e.push(Fc(r));const t=e[e.length-1],n=new Map;n.set(i[e.length-1].depth,e[e.length-1]);for(let r=e.length-2;r>=0;r--)n.get(i[r].depth-1).prepend(e[r]),n.set(i[r].depth,e[r]);return t.updateDescendantsSize(),Ft.create(t,Xt).getRoot()}function qc(i){const e=Un.create();for(const[t,n]of Object.entries(i))e.setInternal(t,n.value,Se(n.updatedAt),n.isRemoved);return e}function Fc(i){const e=Zr(i.id),t=Ct.create(e,i.type),n=Object.entries(i.attributes);return t.isText?t.value=i.value:n.length&&(t.attrs=qc(i.attributes)),i.insPrevId&&(t.insPrevID=Zr(i.insPrevId)),i.insNextId&&(t.insNextID=Zr(i.insNextId)),t.removedAt=Se(i.removedAt),t}function ja(i){if(i.body.case==="set"){const e=i.body.value;return yr.create(e.key,so(e.value),Se(e.parentCreatedAt),Se(e.executedAt))}else if(i.body.case==="add"){const e=i.body.value;return ui.create(Se(e.parentCreatedAt),Se(e.prevCreatedAt),so(e.value),Se(e.executedAt))}else if(i.body.case==="move"){const e=i.body.value;return er.create(Se(e.parentCreatedAt),Se(e.prevCreatedAt),Se(e.createdAt),Se(e.executedAt))}else if(i.body.case==="remove"){const e=i.body.value;return or.create(Se(e.parentCreatedAt),Se(e.createdAt),Se(e.executedAt))}else if(i.body.case==="edit"){const e=i.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([r,o])=>{t.set(r,Se(o))});const n=new Map;return Object.entries(e.attributes).forEach(([r,o])=>{n.set(r,o)}),ci.create(Se(e.parentCreatedAt),Oi(e.from),Oi(e.to),t,e.content,n,Se(e.executedAt))}else if(i.body.case==="style"){const e=i.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([r,o])=>{t.set(r,Se(o))});const n=new Map;return Object.entries(e.attributes).forEach(([r,o])=>{n.set(r,o)}),fi.create(Se(e.parentCreatedAt),Oi(e.from),Oi(e.to),t,n,Se(e.executedAt))}else{if(i.body.case==="select")return;if(i.body.case==="increase"){const e=i.body.value;return Fr.create(Se(e.parentCreatedAt),so(e.value),Se(e.executedAt))}else if(i.body.case==="treeEdit"){const e=i.body.value,t=new Map;return Object.entries(e.createdAtMapByActor).forEach(([n,r])=>{t.set(n,Se(r))}),hi.create(Se(e.parentCreatedAt),Er(e.from),Er(e.to),Bc(e.contents),e.splitLevel,t,Se(e.executedAt))}else if(i.body.case==="treeStyle"){const e=i.body.value,t=new Map,n=e.attributesToRemove,r=new Map;return e!=null&&e.createdAtMapByActor&&Object.entries(e.createdAtMapByActor).forEach(([o,s])=>{r.set(o,Se(s))}),(n==null?void 0:n.length)>0?jn.createTreeRemoveStyleOperation(Se(e.parentCreatedAt),Er(e.from),Er(e.to),r,n,Se(e.executedAt)):(Object.entries(e.attributes).forEach(([o,s])=>{t.set(o,s)}),jn.create(Se(e.parentCreatedAt),Er(e.from),Er(e.to),r,t,Se(e.executedAt)))}else throw new ne(te.ErrUnimplemented,"unimplemented operation")}}function jc(i){const e=[];for(const t of i){const n=ja(t);n&&e.push(n)}return e}function Ua(i){const e=[];for(const t of i)e.push(Br.create({id:Ba(t.id),operations:jc(t.operations),presenceChange:t.presenceChange?Dc(t.presenceChange):void 0,message:t.message}));return e}function Uc(i){return Cr.of(Re.fromString(i.serverSeq,!0),i.clientSeq)}function $c(i){return Gi.create(i.documentKey,Uc(i.checkpoint),i.isRemoved,Ua(i.changes),i.snapshot,Se(i.minSyncedTicket))}function $a(i){const e=new ti;for(const n of i.nodes){const r=Co(n.element);e.set(n.key,r,r.getPositionedAt())}const t=new St(Se(i.createdAt),e);return t.setMovedAt(Se(i.movedAt)),t.setRemovedAt(Se(i.removedAt)),t}function za(i){const e=new ri;for(const n of i.nodes)e.insert(Co(n.element));const t=new Rt(Se(i.createdAt),e);return t.setMovedAt(Se(i.movedAt)),t.setRemovedAt(Se(i.removedAt)),t}function zc(i){const e=Xe.of(Xe.valueFromBytes(qa(i.type),i.value),Se(i.createdAt));return e.setMovedAt(Se(i.movedAt)),e.setRemovedAt(Se(i.removedAt)),e}function Jc(i){const e=new qr;let t=e.getHead();for(const r of i.nodes){const o=e.insertAfter(t,Mc(r));r.insPrevId&&o.setInsPrev(e.findNode(Fa(r.insPrevId))),t=o}const n=new qt(e,Se(i.createdAt));return n.setMovedAt(Se(i.movedAt)),n.setRemovedAt(Se(i.removedAt)),n}function Vc(i){const e=Dt.create($i(i.type),Dt.valueFromBytes($i(i.type),i.value),Se(i.createdAt));return e.setMovedAt(Se(i.movedAt)),e.setRemovedAt(Se(i.removedAt)),e}function Ja(i){const e=Po(i.nodes);return Ft.create(e,Se(i.createdAt))}function Co(i){if(i.body.case==="jsonObject")return $a(i.body.value);if(i.body.case==="jsonArray")return za(i.body.value);if(i.body.case==="primitive")return zc(i.body.value);if(i.body.case==="text")return Jc(i.body.value);if(i.body.case==="counter")return Vc(i.body.value);if(i.body.case==="tree")return Ja(i.body.value);throw new ne(te.ErrUnimplemented,"unimplemented element")}function Kc(i){if(!i)return{root:St.create(Xt),presences:new Map};const e=ku.fromBinary(i);return{root:Co(e.root),presences:Lc(e.presences)}}function Va(i){if(!i)throw new ne(te.ErrInvalidArgument,"bytes is empty");const e=jt.fromBinary(i);return $a(e.body.value)}function Ka(i){return No(i).toBinary()}function Hc(i){if(!i)throw new ne(te.ErrInvalidArgument,"bytes is empty");const e=jt.fromBinary(i);return za(e.body.value)}function Wc(i){return La(i).toBinary()}function Gc(i){if(!i)throw new ne(te.ErrInvalidArgument,"bytes is empty");const e=jt.fromBinary(i);return Ja(e.body.value)}function Yc(i){return Ma(i).toBinary()}function Ha(i){return i?Array.from(i).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function Ro(i){return Ha(i)}function Wa(i){return new Uint8Array(i.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Do(i){return Wa(i)}function Zc(i){const e=Vi.fromBinary(i);return Ba(e)}function Xc(i){const e=wo.fromBinary(i);return ja(e)}const ct={fromPresence:Io,toChangePack:Rc,fromChangePack:$c,fromChanges:Ua,toTreeNodes:xo,fromTreeNodes:Po,objectToBytes:Ka,bytesToObject:Va,bytesToSnapshot:Kc,bytesToHex:Ha,hexToBytes:Wa,toHexString:Ro,toUint8Array:Do,toOperation:Da,toChangeID:Pa,PbChangeID:Vi,bytesToChangeID:Zc,bytesToOperation:Xc};var bt=(i=>(i[i.Trivial=0]="Trivial",i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal",i))(bt||{});let lr=3;function Ga(i){lr=i}const Ne={trivial:(...i)=>{lr>0||typeof console<"u"&&console.log("YORKIE T:",...i)},debug:(...i)=>{lr>1||typeof console<"u"&&console.log("YORKIE D:",...i)},info:(...i)=>{lr>2||typeof console<"u"&&console.log("YORKIE I:",...i)},warn:(...i)=>{lr>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...i):console.log("YORKIE W:",...i))},error:(...i)=>{lr>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...i):console.log("YORKIE E:",...i))},fatal:(...i)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...i):console.log("YORKIE F:",...i))},isEnabled:i=>lr<=i};function Ya(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,i=>{const e=Math.random()*16|0;return(i==="x"?e:e&3|8).toString(16)})}class Qc{constructor(e,t,n,r){J(this,"reconnectStreamDelay");J(this,"doc");J(this,"docID");J(this,"syncMode");J(this,"remoteChangeEventReceived");J(this,"watchStream");J(this,"watchLoopTimerID");J(this,"watchAbortController");this.reconnectStreamDelay=e,this.doc=t,this.docID=n,this.syncMode=r,this.remoteChangeEventReceived=!1}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===Li.RealtimeSyncOff?!1:this.syncMode===Li.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Li.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const ao=()=>{};class ef{constructor(e){J(this,"finalized",!1);J(this,"observers",[]);J(this,"finalError");try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(!e)throw new ne(te.ErrInvalidArgument,"missing observer");if(this.finalized)throw new ne(te.ErrRefused,"observable is finalized due to previous error");typeof e=="object"?r=e:r={next:e,error:t,complete:n},r.next===void 0&&(r.next=ao),r.error===void 0&&(r.error=ao),r.complete===void 0&&(r.complete=ao);const o=Ya(),s=this.unsubscribeOne.bind(this,o);if(this.observers.push({subscriptionID:o,observer:r}),this.finalized)try{this.finalError?r.error(this.finalError):r.complete()}catch(u){Ne.warn(u)}return s}unsubscribeOne(e){var t;this.observers=(t=this.observers)==null?void 0:t.filter(n=>n.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(n){Ne.error(n)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function tf(i){const e=new ef(i);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class Nr{constructor(e,t,n,r){J(this,"id");J(this,"delimiter");J(this,"message");J(this,"root");J(this,"operations");J(this,"presenceChange");J(this,"previousPresence");J(this,"reversePresenceKeys");this.id=e,this.delimiter=Oo,this.root=t,this.operations=[],this.previousPresence=Gt(n),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=r}static create(e,t,n,r){return new Nr(e,t,n,r)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getChange(){return Br.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const n of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(n):this.reversePresenceKeys.delete(n)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class oi{constructor(e){J(this,"rootObject");J(this,"elementPairMapByCreatedAt");J(this,"gcElementSetByCreatedAt");J(this,"gcPairMap");this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(e,void 0),e.getDescendants(t=>{if(t.getRemovedAt()&&this.registerRemovedElement(t),t instanceof qt||t instanceof Ft)for(const n of t.getGCPairs())this.registerGCPair(n);return!1})}static create(){return new oi(St.create(Xt))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const n=[];for(;t.parent;){const r=t.element.getCreatedAt(),o=t.parent.subPathOf(r);if(o===void 0)throw new ne(te.ErrInvalidArgument,`cant find the given element: ${r.toIDString()}`);n.unshift(o),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return n.unshift("$"),n}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),e instanceof tr&&e.getDescendants((n,r)=>(this.registerElement(n,r),!1))}deregisterElement(e){let t=0;const n=r=>{const o=r.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(o),this.gcElementSetByCreatedAt.delete(o),t++};return n(e),e instanceof tr&&e.getDescendants(r=>(n(r),!1)),t}registerRemovedElement(e){this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const t of this.gcElementSetByCreatedAt){e.add(t);const n=this.elementPairMapByCreatedAt.get(t);n.element instanceof tr&&n.element.getDescendants(r=>(e.add(r.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}deepcopy(){return new oi(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const n of this.gcElementSetByCreatedAt){const r=this.elementPairMapByCreatedAt.get(n);r.element.getRemovedAt()&&e.compare(r.element.getRemovedAt())>=0&&(r.parent.purge(r.element),t+=this.deregisterElement(r.element))}for(const[,n]of this.gcPairMap){const r=n.child.getRemovedAt();r!==void 0&&e.compare(r)>=0&&(n.parent.purge(n.child),this.gcPairMap.delete(n.child.toIDString()),t+=1)}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}}function Za(i,e){const t=new si(i);return new Proxy(e,t.getHandlers())}class si{constructor(e){J(this,"context");J(this,"handlers");this.context=e,this.handlers={set:(t,n,r)=>(Ne.isEnabled(bt.Trivial)&&Ne.trivial(`obj[${n}]=${JSON.stringify(r)}`),si.setInternal(e,t,n,r),!0),get:(t,n)=>(Ne.isEnabled(bt.Trivial)&&Ne.trivial(`obj[${n}]`),n==="getID"?()=>t.getCreatedAt():n==="toJSON"||n==="toString"?()=>t.toJSON():n==="toJS"?()=>t.toJS():n==="toJSForTest"?()=>t.toJSForTest():ur(e,t.get(n))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,n)=>(Ne.isEnabled(bt.Trivial)&&Ne.trivial(`obj[${n}]`),si.deleteInternal(e,t,n),!0)}}static setInternal(e,t,n,r){if(n.includes("."))throw new ne(te.ErrInvalidObjectKey,"key must not contain the '.'.");const o=e.issueTimeTicket(),s=zi(e,r,o),u=t.set(n,s,o);e.registerElement(s,t),u&&e.registerRemovedElement(u),e.push(yr.create(n,s.deepcopy(),t.getCreatedAt(),o))}static buildObjectMembers(e,t){const n={};for(const[r,o]of Object.entries(t)){if(r.includes("."))throw new ne(te.ErrInvalidObjectKey,"key must not contain the '.'.");const s=e.issueTimeTicket(),u=zi(e,o,s);n[r]=u}return n}static deleteInternal(e,t,n){const r=e.issueTimeTicket(),o=t.deleteByKey(n,r);o&&(e.push(or.create(t.getCreatedAt(),o.getCreatedAt(),r)),e.registerRemovedElement(o))}getHandlers(){return this.handlers}}function nf(i,e){const t=new et(i,e);return new Proxy(e,t.getHandlers())}function rf(i){return typeof i=="string"||i instanceof String?!isNaN(i):!1}function of(i){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(i)}class et{constructor(e,t){J(this,"context");J(this,"handlers");J(this,"array");this.context=e,this.array=t,this.handlers={get:(n,r,o)=>r==="getID"?()=>n.getCreatedAt():r==="getElementByID"?s=>{const u=n.getByID(s);if(!(!u||u.isRemoved()))return Wn(e,u)}:r==="getElementByIndex"?s=>{const u=n.get(s);return Wn(e,u)}:r==="getLast"?()=>Wn(e,n.getLast()):r==="deleteByID"?s=>{const u=et.deleteInternalByID(e,n,s);return Wn(e,u)}:r==="insertAfter"?(s,u)=>{const h=et.insertAfterInternal(e,n,s,u);return Wn(e,h)}:r==="insertBefore"?(s,u)=>{const h=et.insertBeforeInternal(e,n,s,u);return Wn(e,h)}:r==="moveBefore"?(s,u)=>{et.moveBeforeInternal(e,n,s,u)}:r==="moveAfter"?(s,u)=>{et.moveAfterInternal(e,n,s,u)}:r==="moveFront"?s=>{et.moveFrontInternal(e,n,s)}:r==="moveLast"?s=>{et.moveLastInternal(e,n,s)}:rf(r)?ur(e,n.get(Number(r))):r==="push"?s=>et.pushInternal(e,n,s):r==="splice"?(s,u,...h)=>et.splice(e,n,s,u,...h):r==="length"?n.length:typeof r=="symbol"&&r===Symbol.iterator?et.iteratorInternal.bind(this,e,n):r==="includes"?(s,u)=>et.includes(e,n,s,u):r==="indexOf"?(s,u)=>et.indexOf(e,n,s,u):r==="lastIndexOf"?(s,u)=>et.lastIndexOf(e,n,s,u):r==="toJSForTest"?()=>n.toJSForTest():r==="toTestString"?()=>et.toTestString(n):typeof r=="string"&&of(r)?(...s)=>{const u=Array.from(n).map(h=>ur(e,h));return Array.prototype[r].apply(u,s)}:Reflect.get(n,r,o),deleteProperty:(n,r)=>(Ne.isEnabled(bt.Trivial)&&Ne.trivial(`array[${r}]`),et.deleteInternalByIndex(e,n,Number.parseInt(r)),!0)}}static*iteratorInternal(e,t){for(const n of t)yield Wn(e,n)}static buildArrayElements(e,t){const n=[];for(const r of t){const o=e.issueTimeTicket(),s=zi(e,r,o);n.push(s)}return n}static pushInternal(e,t,n){return et.insertAfterInternal(e,t,t.getLastCreatedAt(),n),t.length}static moveBeforeInternal(e,t,n,r){const o=e.issueTimeTicket(),s=t.getPrevCreatedAt(n);t.moveAfter(s,r,o),e.push(er.create(t.getCreatedAt(),s,r,o))}static moveAfterInternal(e,t,n,r){const o=e.issueTimeTicket();t.moveAfter(n,r,o),e.push(er.create(t.getCreatedAt(),n,r,o))}static moveFrontInternal(e,t,n){const r=e.issueTimeTicket(),o=t.getHead();t.moveAfter(o.getCreatedAt(),n,r),e.push(er.create(t.getCreatedAt(),o.getCreatedAt(),n,r))}static moveLastInternal(e,t,n){const r=e.issueTimeTicket(),o=t.getLastCreatedAt();t.moveAfter(o,n,r),e.push(er.create(t.getCreatedAt(),o,n,r))}static insertAfterInternal(e,t,n,r){const o=e.issueTimeTicket(),s=zi(e,r,o);return t.insertAfter(n,s),e.registerElement(s,t),e.push(ui.create(t.getCreatedAt(),n,s.deepcopy(),o)),s}static insertBeforeInternal(e,t,n,r){return et.insertAfterInternal(e,t,t.getPrevCreatedAt(n),r)}static deleteInternalByIndex(e,t,n){const r=e.issueTimeTicket(),o=t.deleteByIndex(n,r);if(o)return e.push(or.create(t.getCreatedAt(),o.getCreatedAt(),r)),e.registerRemovedElement(o),o}static deleteInternalByID(e,t,n){const r=e.issueTimeTicket(),o=t.delete(n,r);return e.push(or.create(t.getCreatedAt(),o.getCreatedAt(),r)),e.registerRemovedElement(o),o}static splice(e,t,n,r,...o){const s=t.length,u=n>=0?Math.min(n,s):Math.max(s+n,0),h=r===void 0?s:r<0?u:Math.min(u+r,s),y=[];for(let v=u;v<h;v++){const d=et.deleteInternalByIndex(e,t,u);if(d){const l=d.deepcopy();l.setRemovedAt(),y.push(ur(e,l))}}if(o){let v=u===0?t.getHead().getID():t.get(u-1).getID();for(const d of o)v=et.insertAfterInternal(e,t,v,d).getID()}return y}static includes(e,t,n,r){var u;const o=t.length,s=r===void 0?0:r<0?Math.max(r+o,0):r;if(s>=o)return!1;if(Xe.isSupport(n))return Array.from(t).map(y=>ur(e,y)).includes(n,s);for(let h=s;h<o;h++)if(((u=t.get(h))==null?void 0:u.getID())===n.getID())return!0;return!1}static indexOf(e,t,n,r){var u;const o=t.length,s=r===void 0?0:r<0?Math.max(r+o,0):r;if(s>=o)return-1;if(Xe.isSupport(n))return Array.from(t).map(y=>ur(e,y)).indexOf(n,s);for(let h=s;h<o;h++)if(((u=t.get(h))==null?void 0:u.getID())===n.getID())return h;return-1}static lastIndexOf(e,t,n,r){var u;const o=t.length,s=r===void 0||r>=o?o-1:r<0?r+o:r;if(s<0)return-1;if(Xe.isSupport(n))return Array.from(t).map(y=>ur(e,y)).lastIndexOf(n,s);for(let h=s;h>0;h--)if(((u=t.get(h))==null?void 0:u.getID())===n.getID())return h;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}let Yi=class{constructor(e,t){J(this,"context");J(this,"text");this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,n,r){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new ne(te.ErrInvalidArgument,"from should be less than or equal to to");const o=this.text.indexRangeToPosRange(e,t);Ne.isEnabled(bt.Debug)&&Ne.debug(`EDIT: f:${e}->${o[0].toTestString()}, t:${t}->${o[1].toTestString()} c:${n}`);const s=r?Mr(r):void 0,u=this.context.issueTimeTicket(),[h,,y,v]=this.text.edit(o,n,u,s);for(const d of y)this.context.registerGCPair(d);return this.context.push(new ci(this.text.getCreatedAt(),o[0],o[1],h,n,s?new Map(Object.entries(s)):new Map,u)),this.text.findIndexesFromRange(v)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,n){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new ne(te.ErrInvalidArgument,"from should be less than or equal to to");const r=this.text.indexRangeToPosRange(e,t);Ne.isEnabled(bt.Debug)&&Ne.debug(`STYL: f:${e}->${r[0].toTestString()}, t:${t}->${r[1].toTestString()} a:${JSON.stringify(n)}`);const o=Mr(n),s=this.context.issueTimeTicket(),[u,h]=this.text.setStyle(r,o,s);for(const y of h)this.context.registerGCPair(y);return this.context.push(new fi(this.text.getCreatedAt(),r[0],r[1],u,new Map(Object.entries(o)),s)),!0}indexRangeToPosRange(e){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");const t=this.text.findIndexesFromRange([Qt.fromStruct(e[0]),Qt.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text)throw new ne(te.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(e,t)}};class Zi{constructor(e,t){J(this,"valueType");J(this,"value");J(this,"context");J(this,"counter");this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter)throw new ne(te.ErrNotInitialized,"Counter is not initialized yet");const t=this.context.issueTimeTicket(),n=Xe.of(e,t);if(!n.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof n.getValue()}`);return this.counter.increase(n),this.context.push(Fr.create(this.counter.getCreatedAt(),n,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new ne(te.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function Lo(i,e,t){const{type:n}=i,r=t.issueTimeTicket();if(n===Fn){Xa(i);const{value:o}=i,s=Ct.create(gt.of(r,0),n,o);e.append(s)}else{const{children:o=[]}=i;let{attributes:s}=i,u;if(typeof s=="object"&&!Ea(s)){s=Mr(s),u=new Un;for(const[y,v]of Object.entries(s))u.set(y,v,r)}const h=Ct.create(gt.of(r,0),n,void 0,u);e.append(h);for(const y of o)Lo(y,h,t)}}function sf(i,e){const{type:t}=e,n=i.issueTimeTicket();let r;if(e.type===Fn){const{value:o}=e;r=Ct.create(gt.of(n,0),t,o)}else if(e){const{children:o=[]}=e;let{attributes:s}=e,u;if(typeof s=="object"&&!Ea(s)){s=Mr(s),u=new Un;for(const[h,y]of Object.entries(s))u.set(h,y,n)}r=Ct.create(gt.of(i.issueTimeTicket(),0),t,void 0,u);for(const h of o)Lo(h,r,i)}return r}function Xa(i){if(!i.value.length)throw new ne(te.ErrInvalidArgument,"text node cannot have empty value");return!0}function bs(i){if(!i.length)return!0;if(i[0].type===Fn)for(const t of i){const{type:n}=t;if(n!==Fn)throw new ne(te.ErrInvalidArgument,"element node and text node cannot be passed together");Xa(t)}else for(const t of i){const{type:n}=t;if(n===Fn)throw new ne(te.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class Xi{constructor(e){J(this,"initialRoot");J(this,"context");J(this,"tree");this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return Ct.create(gt.of(e.issueTimeTicket(),0),sc);const t=Ct.create(gt.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const n of this.initialRoot.children)Lo(n,t,e);return t}getSize(){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,t){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new ne(te.ErrInvalidArgument,"path should not be empty");const[n,r]=this.tree.pathToPosRange(e),o=this.context.issueTimeTicket(),s=t?Mr(t):void 0,[u]=this.tree.style([n,r],s,o);this.context.push(jn.create(this.tree.getCreatedAt(),n,r,u,s?new Map(Object.entries(s)):new Map,o))}style(e,t,n){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new ne(te.ErrInvalidArgument,"from should be less than or equal to to");const r=this.tree.findPos(e),o=this.tree.findPos(t),s=this.context.issueTimeTicket(),u=n?Mr(n):void 0,[h,y]=this.tree.style([r,o],u,s);for(const v of y)this.context.registerGCPair(v);this.context.push(jn.create(this.tree.getCreatedAt(),r,o,h,u?new Map(Object.entries(u)):new Map,s))}removeStyle(e,t,n){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new ne(te.ErrInvalidArgument,"from should be less than or equal to to");const r=this.tree.findPos(e),o=this.tree.findPos(t),s=this.context.issueTimeTicket(),[u,h]=this.tree.removeStyle([r,o],n,s);for(const y of h)this.context.registerGCPair(y);this.context.push(jn.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),r,o,u,n,s))}editInternal(e,t,n,r=0){var y;if(n.length!==0&&n[0]&&(bs(n),n[0].type!==Fn))for(const v of n){const{children:d=[]}=v;bs(d)}const o=this.context.getLastTimeTicket();let s=new Array;if(((y=n[0])==null?void 0:y.type)===Fn){let v="";for(const d of n){const{value:l}=d;v+=l}s.push(Ct.create(gt.of(this.context.issueTimeTicket(),0),Fn,v))}else s=n.map(v=>v&&sf(this.context,v)).filter(v=>v);const[,u,h]=this.tree.edit([e,t],s.length?s.map(v=>v==null?void 0:v.deepcopy()):void 0,r,o,()=>this.context.issueTimeTicket());for(const v of u)this.context.registerGCPair(v);return this.context.push(hi.create(this.tree.getCreatedAt(),e,t,s.length?s:void 0,r,h,o)),!0}editByPath(e,t,n,r=0){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new ne(te.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new ne(te.ErrInvalidArgument,"path should not be empty");const o=this.tree.pathToPos(e),s=this.tree.pathToPos(t);return this.editInternal(o,s,n?[n]:[],r)}editBulkByPath(e,t,n,r=0){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new ne(te.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new ne(te.ErrInvalidArgument,"path should not be empty");const o=this.tree.pathToPos(e),s=this.tree.pathToPos(t);return this.editInternal(o,s,n,r)}edit(e,t,n,r=0){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new ne(te.ErrInvalidArgument,"from should be less than or equal to to");const o=this.tree.findPos(e),s=this.tree.findPos(t);return this.editInternal(o,s,n?[n]:[],r)}editBulk(e,t,n,r=0){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new ne(te.ErrInvalidArgument,"from should be less than or equal to to");const o=this.tree.findPos(e),s=this.tree.findPos(t);return this.editInternal(o,s,n,r)}toXML(){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],n=this.tree.indexRangeToPosRange(t);return[n[0].toStruct(),n[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");const t=[Zt.fromStruct(e[0]),Zt.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree)throw new ne(te.ErrNotInitialized,"Tree is not initialized yet");const t=[Zt.fromStruct(e[0]),Zt.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function ws(i,e){return Za(i,e)}function Wn(i,e){if(e){if(e instanceof Xe)return e;if(e instanceof St)return Za(i,e);if(e instanceof Rt)return nf(i,e);if(e instanceof qt)return new Yi(i,e);if(e instanceof Dt){const t=new Zi(In.IntegerCnt,0);return t.initialize(i,e),t}else if(e instanceof Ft){const t=new Xi;return t.initialize(i,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function ur(i,e){const t=Wn(i,e);return t instanceof Xe?t.getValue():t}function zi(i,e,t){let n;if(Xe.isSupport(e))n=Xe.of(e,t);else if(Array.isArray(e))n=Rt.create(t,et.buildArrayElements(i,e));else if(typeof e=="object")e instanceof Yi?(n=qt.create(qr.create(),t),e.initialize(i,n)):e instanceof Zi?(n=Dt.create(e.getValueType(),e.getValue(),t),e.initialize(i,n)):e instanceof Xi?(n=Ft.create(e.buildRoot(i),t),e.initialize(i,n)):n=St.create(t,si.buildObjectMembers(i,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return n}const Ts=50;class af{constructor(){J(this,"undoStack",[]);J(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=Ts&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=Ts&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const lf="yorkie-devtools-panel",uf="yorkie-devtools-sdk";let Or="disconnected";const As=new Map,Di=new Map;typeof window<"u"&&(window.transactionEventsByDocKey=Di);function Si(i,e){(e!=null&&e.force||Or!=="disconnected")&&window.postMessage({source:uf,...i},"*")}function cf(i){if(!i.isEnableDevtools()||typeof window>"u"||As.has(i.getKey()))return;Di.set(i.getKey(),[]);const e=i.subscribe("all",t=>{t.some(n=>n.type!==dt.StatusChanged&&n.type!==dt.Snapshot&&n.type!==dt.LocalChange&&n.type!==dt.RemoteChange&&n.type!==dt.Initialized&&n.type!==dt.Watched&&n.type!==dt.Unwatched&&n.type!==dt.PresenceChanged)||(Di.get(i.getKey()).push(t),Or==="synced"&&Si({msg:"doc::sync::partial",docKey:i.getKey(),event:t}))});As.set(i.getKey(),[e]),Si({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var r;if(((r=t.data)==null?void 0:r.source)!==lf)return;switch(t.data.msg){case"devtools::connect":if(Or!=="disconnected")break;Or="connected",Si({msg:"doc::available",docKey:i.getKey()}),Ne.info(`[YD] Devtools connected. Doc: ${i.getKey()}`);break;case"devtools::disconnect":Or="disconnected",Ne.info(`[YD] Devtools disconnected. Doc: ${i.getKey()}`);break;case"devtools::subscribe":Or="synced",Si({msg:"doc::sync::full",docKey:i.getKey(),events:Di.get(i.getKey())}),Ne.info(`[YD] Devtools subscribed. Doc: ${i.getKey()}`);break}})}var Gn=(i=>(i.Detached="detached",i.Attached="attached",i.Removed="removed",i))(Gn||{}),dt=(i=>(i.StatusChanged="status-changed",i.ConnectionChanged="connection-changed",i.SyncStatusChanged="sync-status-changed",i.Snapshot="snapshot",i.LocalChange="local-change",i.RemoteChange="remote-change",i.Initialized="initialized",i.Watched="watched",i.Unwatched="unwatched",i.PresenceChanged="presence-changed",i))(dt||{}),ai=(i=>(i.Connected="connected",i.Disconnected="disconnected",i))(ai||{}),yo=(i=>(i.Synced="synced",i.SyncFailed="sync-failed",i))(yo||{});class Qa{constructor(e,t){J(this,"key");J(this,"status");J(this,"opts");J(this,"changeID");J(this,"checkpoint");J(this,"localChanges");J(this,"root");J(this,"clone");J(this,"eventStream");J(this,"eventStreamObserver");J(this,"onlineClients");J(this,"presences");J(this,"history");J(this,"internalHistory");J(this,"isUpdating");this.opts=t||{},this.key=e,this.status="detached",this.root=oi.create(),this.changeID=gc,this.checkpoint=pc,this.localChanges=[],this.eventStream=tf(n=>{this.eventStreamObserver=n}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new af,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},cf(this)}update(e,t){if(this.getStatus()==="removed")throw new ne(te.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const n=this.changeID.getActorID(),r=Nr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(n)||{},t);try{const o=ws(r,this.clone.root.getObject());this.presences.has(n)||this.clone.presences.set(n,{}),this.isUpdating=!0,e(o,new io(r,this.clone.presences.get(n)))}catch(o){throw this.clone=void 0,o}finally{this.isUpdating=!1}if(r.hasChange()){Ne.isEnabled(bt.Trivial)&&Ne.trivial(`trying to update a local change: ${this.toJSON()}`);const o=r.getChange(),{opInfos:s,reverseOps:u}=o.execute(this.root,this.presences,Ge.Local),h=r.getReversePresence();h&&u.push({type:"presence",value:h}),this.localChanges.push(o),u.length>0&&this.internalHistory.pushUndo(u),s.length>0&&this.internalHistory.clearRedo(),this.changeID=o.getID();const y=[];s.length>0&&y.push({type:"local-change",source:Ge.Local,value:{message:o.getMessage()||"",operations:s,actor:n,clientSeq:o.getID().getClientSeq(),serverSeq:o.getID().getServerSeq()},rawChange:this.isEnableDevtools()?o.toStruct():void 0}),o.hasPresenceChange()&&y.push({type:"presence-changed",source:Ge.Local,value:{clientID:n,presence:this.getPresence(n)}}),this.publish(y),Ne.isEnabled(bt.Trivial)&&Ne.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,n,r){if(typeof e=="string"){if(typeof t!="function")throw new ne(te.ErrInvalidArgument,"Second argument must be a callback function");if(e==="presence"){const u=t;return this.eventStream.subscribe(h=>{for(const y of h)y.type!=="initialized"&&y.type!=="watched"&&y.type!=="unwatched"&&y.type!=="presence-changed"||u(y)},n,r)}if(e==="my-presence"){const u=t;return this.eventStream.subscribe(h=>{for(const y of h)y.type!=="initialized"&&y.type!=="presence-changed"||y.type==="presence-changed"&&y.value.clientID!==this.changeID.getActorID()||u(y)},n,r)}if(e==="others"){const u=t;return this.eventStream.subscribe(h=>{for(const y of h)y.type!=="watched"&&y.type!=="unwatched"&&y.type!=="presence-changed"||y.value.clientID!==this.changeID.getActorID()&&u(y)},n,r)}if(e==="connection"){const u=t;return this.eventStream.subscribe(h=>{for(const y of h)y.type==="connection-changed"&&u(y)},n,r)}if(e==="status"){const u=t;return this.eventStream.subscribe(h=>{for(const y of h)y.type==="status-changed"&&u(y)},n,r)}if(e==="sync"){const u=t;return this.eventStream.subscribe(h=>{for(const y of h)y.type==="sync-status-changed"&&u(y)},n,r)}if(e==="all"){const u=t;return this.eventStream.subscribe(u,n,r)}const o=e,s=t;return this.eventStream.subscribe(u=>{for(const h of u){if(h.type!=="local-change"&&h.type!=="remote-change")continue;const y=[];for(const v of h.value.operations)this.isSameElementOrChildOf(v.path,o)&&y.push(v);y.length&&s({...h,value:{...h.value,operations:y}})}},n,r)}if(typeof e=="function"){const o=e,s=t,u=n;return this.eventStream.subscribe(h=>{for(const y of h)y.type!=="snapshot"&&y.type!=="local-change"&&y.type!=="remote-change"||o(y)},s,u)}throw new ne(te.ErrInvalidArgument,`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const n=e.split(".");return t.split(".").every((o,s)=>o===n[s])}applyChangePack(e){for(e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges(),Ge.Remote);this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();e.hasSnapshot()&&this.applyChanges(this.localChanges,Ge.Remote),this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),this.garbageCollect(e.getMinSyncedTicket()),e.getIsRemoved()&&this.applyStatus("removed"),Ne.isEnabled(bt.Trivial)&&Ne.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Gt(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return Gi.create(this.key,t,!1,e)}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Nr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return ws(e,this.clone.root.getObject())}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t){const{root:n,presences:r}=ct.bytesToSnapshot(t);this.root=new oi(n),this.presences=r,this.changeID=this.changeID.syncLamport(e),this.clone=void 0,this.publish([{type:"snapshot",source:Ge.Remote,value:{snapshot:this.isEnableDevtools()?ct.bytesToHex(t):void 0,serverSeq:e.toString()}}])}applyChanges(e,t){Ne.isEnabled(bt.Debug)&&Ne.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),Ne.isEnabled(bt.Trivial)&&Ne.trivial(e.map(n=>`${n.getID().toTestString()}	${n.toTestString()}`).join(`
`));for(const n of e)this.applyChange(n,t);Ne.isEnabled(bt.Debug)&&Ne.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const n=[],r=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(r)){const s=e.getPresenceChange();switch(s.type){case ir.Put:n.push(this.presences.has(r)?{type:"presence-changed",source:t,value:{clientID:r,presence:s.presence}}:{type:"watched",source:Ge.Remote,value:{clientID:r,presence:s.presence}});break;case ir.Clear:n.push({type:"unwatched",source:Ge.Remote,value:{clientID:r,presence:this.getPresence(r)}}),this.removeOnlineClient(r);break}}const{opInfos:o}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncLamport(e.getID().getLamport()),o.length>0){const s=this.isEnableDevtools()?e.toStruct():void 0;n.push(t===Ge.Remote?{type:"remote-change",source:t,value:{actor:r,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:o},rawChange:s}:{type:"local-change",source:t,value:{actor:r,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:o},rawChange:s})}n.length>0&&this.publish(n)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,n=new Set;for(const r of t)r!==this.changeID.getActorID()&&n.add(r);this.setOnlineClients(n),this.publish([{type:"initialized",source:Ge.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:n}=e.body.value,r=[];if(t===Fi.DOCUMENT_WATCHED)this.addOnlineClient(n),this.hasPresence(n)&&r.push({type:"watched",source:Ge.Remote,value:{clientID:n,presence:this.getPresence(n)}});else if(t===Fi.DOCUMENT_UNWATCHED){const o=this.getPresence(n);this.removeOnlineClient(n),o&&r.push({type:"unwatched",source:Ge.Remote,value:{clientID:n,presence:o}})}r.length>0&&this.publish(r)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(Hi),this.publish([{source:e==="removed"?Ge.Remote:Ge.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEvent(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:t,serverSeq:n}=e.value;if(!t)return;this.applySnapshot(Re.fromString(n),ct.hexToBytes(t));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const t=Br.fromStruct(e.rawChange);this.applyChange(t,e.source)}if(e.type==="initialized"){const t=new Set;for(const{clientID:n,presence:r}of e.value)t.add(n),this.presences.set(n,r);this.setOnlineClients(t);return}if(e.type==="watched"){const{clientID:t,presence:n}=e.value;this.addOnlineClient(t),this.presences.set(t,n);return}if(e.type==="unwatched"){const{clientID:t}=e.value;this.removeOnlineClient(t),this.presences.delete(t)}if(e.type==="presence-changed"){const{clientID:t,presence:n}=e.value;this.presences.set(t,n)}}applyTransactionEvent(e){for(const t of e)this.applyDocEvent(t)}getValueByPath(e){if(!e.startsWith("$"))throw new ne(te.ErrInvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let n=this.getRoot();for(const r of t)if(n=n[r],n===void 0)return;return n}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?Gt(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?Gt(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?Gt(t):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:Gt(this.getMyPresence())});for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:Gt(this.presences.get(t))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,n)=>t.clientID>n.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new ne(te.ErrRefused,"Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new ne(te.ErrRefused,"There is no operation to be undone");this.ensureClone();const t=Nr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const y of e){if(!(y instanceof en)){new io(t,Gt(this.clone.presences.get(this.changeID.getActorID()))).set(y.value,{addToHistory:!0});continue}const v=t.issueTimeTicket();y.setExecutedAt(v),t.push(y)}const n=t.getChange();n.execute(this.clone.root,this.clone.presences,Ge.UndoRedo);const{opInfos:r,reverseOps:o}=n.execute(this.root,this.presences,Ge.UndoRedo),s=t.getReversePresence();if(s&&o.push({type:"presence",value:s}),o.length>0&&this.internalHistory.pushRedo(o),!n.hasPresenceChange()&&r.length===0)return;this.localChanges.push(n),this.changeID=n.getID();const u=this.changeID.getActorID(),h=[];r.length>0&&h.push({type:"local-change",source:Ge.UndoRedo,value:{message:n.getMessage()||"",operations:r,actor:u,clientSeq:n.getID().getClientSeq(),serverSeq:n.getID().getServerSeq()},rawChange:this.isEnableDevtools()?n.toStruct():void 0}),n.hasPresenceChange()&&h.push({type:"presence-changed",source:Ge.UndoRedo,value:{clientID:u,presence:this.getPresence(u)}}),this.publish(h)}redo(){if(this.isUpdating)throw new ne(te.ErrRefused,"Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new ne(te.ErrRefused,"There is no operation to be redone");this.ensureClone();const t=Nr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const y of e){if(!(y instanceof en)){new io(t,Gt(this.clone.presences.get(this.changeID.getActorID()))).set(y.value,{addToHistory:!0});continue}const v=t.issueTimeTicket();y.setExecutedAt(v),t.push(y)}const n=t.getChange();n.execute(this.clone.root,this.clone.presences,Ge.UndoRedo);const{opInfos:r,reverseOps:o}=n.execute(this.root,this.presences,Ge.UndoRedo),s=t.getReversePresence();if(s&&o.push({type:"presence",value:s}),o.length>0&&this.internalHistory.pushUndo(o),!n.hasPresenceChange()&&r.length===0)return;this.localChanges.push(n),this.changeID=n.getID();const u=this.changeID.getActorID(),h=[];r.length>0&&h.push({type:"local-change",source:Ge.UndoRedo,value:{message:n.getMessage()||"",operations:r,actor:u,clientSeq:n.getID().getClientSeq(),serverSeq:n.getID().getServerSeq()},rawChange:this.isEnableDevtools()?n.toStruct():void 0}),n.hasPresenceChange()&&h.push({type:"presence-changed",source:Ge.UndoRedo,value:{clientID:u,presence:this.getPresence(u)}}),this.publish(h)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}}function ff(i,e){return t=>async n=>(i&&n.header.set("x-api-key",i),e&&n.header.set("authorization",e),await t(n))}const hf="yorkie-js-sdk",df="0.4.31",gf="Yorkie JS SDK",pf="./src/yorkie.ts",mf={access:"public",main:"./dist/yorkie-js-sdk.js",typings:"./dist/yorkie-js-sdk.d.ts"},yf=["dist"],vf={build:"tsc && vite build","build:proto":"npx buf generate","build:docs":"typedoc","build:ghpages":"mkdir -p ghpages/examples && cp -r docs ghpages/api-reference && find ../../examples -name 'dist' -type d -exec sh -c 'cp -r {} ghpages/examples/$(basename $(dirname {}))' \\;",dev:"vite build -c vite.preview.ts && vite preview",test:"vitest run","test:watch":"vitest","test:bench":"vitest bench","test:ci":"vitest run --coverage","test:yorkie.dev":"TEST_RPC_ADDR=https://api.yorkie.dev vitest run --coverage",lint:"eslint . --fix --max-warnings=0 --ext .ts",prepare:"pnpm build"},bf={node:">=18.0.0",npm:">=7.1.0"},wf={type:"git",url:"git+https://github.com/yorkie-team/yorkie-js-sdk.git"},Tf={name:"hackerwins",email:"susukang98@gmail.com"},Af="Apache-2.0",_f={url:"https://github.com/yorkie-team/yorkie-js-sdk/issues"},Ef="https://github.com/yorkie-team/yorkie-js-sdk#readme",Of={"@buf/googleapis_googleapis.bufbuild_es":"^1.4.0-20240524201209-f0e53af8f2fc.3","@bufbuild/buf":"^1.28.1","@bufbuild/protoc-gen-es":"^1.6.0","@connectrpc/protoc-gen-connect-es":"^1.4.0","@types/google-protobuf":"^3.15.5","@types/long":"^4.0.1","@typescript-eslint/eslint-plugin":"^6.21.0","@typescript-eslint/parser":"^6.21.0","@vitest/coverage-istanbul":"^0.34.5","@vitest/coverage-v8":"^0.34.5",eslint:"^8.19.0","eslint-plugin-jsdoc":"^39.3.3","eslint-plugin-prettier":"^4.2.1","eslint-plugin-tsdoc":"^0.2.16",husky:"^8.0.3",prettier:"^2.7.1","ts-node":"^10.9.1",typedoc:"^0.25.13",typescript:"^5.3.3","typescript-transform-paths":"^3.3.1",vite:"^5.0.12","vite-plugin-commonjs":"^0.10.1","vite-plugin-dts":"^3.9.1","vite-tsconfig-paths":"^4.2.1",vitest:"^0.34.5"},Sf={"@bufbuild/protobuf":"^1.6.0","@connectrpc/connect":"^1.4.0","@connectrpc/connect-web":"^1.4.0",long:"^5.2.0"},kf={hooks:{"pre-commit":"pnpm lint"}},_s={name:hf,version:df,description:gf,main:pf,publishConfig:mf,files:yf,scripts:vf,engines:bf,repository:wf,author:Tf,license:Af,bugs:_f,homepage:Ef,devDependencies:Of,dependencies:Sf,husky:kf};function xf(){return i=>async e=>(e.header.set("x-yorkie-user-agent",_s.name+"/"+_s.version),await i(e))}var Li=(i=>(i.Manual="manual",i.Realtime="realtime",i.RealtimePushOnly="realtime-pushonly",i.RealtimeSyncOff="realtime-syncoff",i))(Li||{});const ki={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3};class el{constructor(e,t){J(this,"id");J(this,"key");J(this,"status");J(this,"attachmentMap");J(this,"apiKey");J(this,"conditions");J(this,"syncLoopDuration");J(this,"reconnectStreamDelay");J(this,"retrySyncLoopDelay");J(this,"rpcClient");J(this,"taskQueue");J(this,"processing",!1);t=t||ki,this.key=t.key?t.key:Ya(),this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=t.syncLoopDuration||ki.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay||ki.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay||ki.retrySyncLoopDelay,this.rpcClient=iu(Gu,Su({baseUrl:e,interceptors:[ff(t.apiKey,t.token),xf()]})),this.taskQueue=[]}activate(){return this.isActive()?Promise.resolve():this.enqueueTask(async()=>this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status="activated",this.runSyncLoop(),Ne.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw Ne.error(`[AC] c:"${this.getKey()}" err :`,e),this.handleConnectError(e),e}))}deactivate(){return this.status==="deactivated"?Promise.resolve():this.enqueueTask(async()=>this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{this.deactivateInternal(),Ne.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw Ne.error(`[DC] c:"${this.getKey()}" err :`,e),this.handleConnectError(e),e}))}attach(e,t={}){if(!this.isActive())throw new ne(te.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==Gn.Detached)throw new ne(te.ErrDocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((r,o)=>o.set(t.initialPresence||{}));const n=t.syncMode??"realtime";return this.enqueueTask(async()=>this.rpcClient.attachDocument({clientId:this.id,changePack:ct.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async r=>{const o=ct.fromChangePack(r.changePack);return e.applyChangePack(o),e.getStatus()===Gn.Removed||(e.applyStatus(Gn.Attached),this.attachmentMap.set(e.getKey(),new Qc(this.reconnectStreamDelay,e,r.documentId,n)),n!=="manual"&&await this.runWatchLoop(e.getKey()),Ne.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`)),e}).catch(r=>{throw Ne.error(`[AD] c:"${this.getKey()}" err :`,r),this.handleConnectError(r),r}))}detach(e,t={}){if(!this.isActive())throw new ne(te.ErrClientNotActivated,`${this.key} is not active`);const n=this.attachmentMap.get(e.getKey());if(!n)throw new ne(te.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return e.update((r,o)=>o.clear()),this.enqueueTask(async()=>this.rpcClient.detachDocument({clientId:this.id,documentId:n.docID,changePack:ct.toChangePack(e.createChangePack()),removeIfNotAttached:t.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(r=>{const o=ct.fromChangePack(r.changePack);return e.applyChangePack(o),e.getStatus()!==Gn.Removed&&e.applyStatus(Gn.Detached),this.detachInternal(e.getKey()),Ne.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(r=>{throw Ne.error(`[DD] c:"${this.getKey()}" err :`,r),this.handleConnectError(r),r}))}async changeSyncMode(e,t){if(!this.isActive())throw new ne(te.ErrClientNotActivated,`${this.key} is not active`);const n=this.attachmentMap.get(e.getKey());if(!n)throw new ne(te.ErrDocumentNotAttached,`${e.getKey()} is not attached`);const r=n.syncMode;return r===t?e:(n.changeSyncMode(t),t==="manual"?(n.cancelWatchStream(),e):(t==="realtime"&&(n.remoteChangeEventReceived=!0),r==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new ne(te.ErrClientNotActivated,`${this.key} is not active`);if(e){const t=this.attachmentMap.get(e.getKey());if(!t)throw new ne(te.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(t,"realtime").catch(n=>{throw Ne.error(`[SY] c:"${this.getKey()}" err :`,n),this.handleConnectError(n),n}))}return this.enqueueTask(async()=>{const t=[];for(const[,n]of this.attachmentMap)t.push(this.syncInternal(n,n.syncMode));return Promise.all(t).catch(n=>{throw Ne.error(`[SY] c:"${this.getKey()}" err :`,n),this.handleConnectError(n),n})})}remove(e){if(!this.isActive())throw new ne(te.ErrClientNotActivated,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new ne(te.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const n=ct.toChangePack(e.createChangePack());return n.isRemoved=!0,this.enqueueTask(async()=>this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:n},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(r=>{const o=ct.fromChangePack(r.changePack);e.applyChangePack(o),this.detachInternal(e.getKey()),Ne.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(r=>{throw Ne.error(`[RD] c:"${this.getKey()}" err :`,r),this.handleConnectError(r),r}))}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(e){return this.conditions[e]}runSyncLoop(){const e=()=>{if(!this.isActive()){Ne.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const t=[];for(const[,n]of this.attachmentMap)n.needRealtimeSync()&&(n.remoteChangeEventReceived=!1,t.push(this.syncInternal(n,n.syncMode)));Promise.all(t).then(()=>setTimeout(e,this.syncLoopDuration)).catch(n=>{Ne.error(`[SL] c:"${this.getKey()}" sync failed:`,n),this.handleConnectError(n)?setTimeout(e,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};Ne.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new ne(te.ErrDocumentNotAttached,`${e} is not attached`);return this.conditions.WatchLoop=!0,t.runWatchLoop(n=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new ne(te.ErrClientNotActivated,`${this.key} is not active`));const r=new AbortController,o=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:r.signal});return t.doc.publish([{type:dt.ConnectionChanged,value:ai.Connected}]),Ne.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((s,u)=>{(async()=>{try{for await(const y of o)this.handleWatchDocumentsResponse(t,y),y.body.case==="initialization"&&s([o,r])}catch(y){t.doc.resetOnlineClients(),t.doc.publish([{type:dt.Initialized,source:Ge.Local,value:t.doc.getPresences()}]),t.doc.publish([{type:dt.ConnectionChanged,value:ai.Disconnected}]),Ne.debug(`[WD] c:"${this.getKey()}" unwatches`),this.handleConnectError(y)?n():this.conditions.WatchLoop=!1,u(y)}})()})})}handleWatchDocumentsResponse(e,t){if(t.body.case==="event"&&t.body.value.type===Fi.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(t)}deactivateInternal(){this.status="deactivated";for(const[e,t]of this.attachmentMap)this.detachInternal(e),t.doc.applyStatus(Gn.Detached)}detachInternal(e){const t=this.attachmentMap.get(e);t&&(t.cancelWatchStream(),this.attachmentMap.delete(e))}syncInternal(e,t){const{doc:n,docID:r}=e,o=n.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:r,changePack:ct.toChangePack(o),pushOnly:t==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${n.getKey()}`}}).then(s=>{const u=ct.fromChangePack(s.changePack);if(u.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return n;n.applyChangePack(u),e.doc.publish([{type:dt.SyncStatusChanged,value:yo.Synced}]),n.getStatus()===Gn.Removed&&this.detachInternal(n.getKey());const h=n.getKey(),y=u.getChangeSize();return Ne.info(`[PP] c:"${this.getKey()}" sync d:"${h}", push:${o.getChangeSize()} pull:${y} cp:${u.getCheckpoint().toTestString()}`),n}).catch(s=>{throw n.publish([{type:dt.SyncStatusChanged,value:yo.SyncFailed}]),Ne.error(`[PP] c:"${this.getKey()}" err :`,s),s})}handleConnectError(e){return e instanceof at?e.code===We.Canceled||e.code===We.Unknown||e.code===We.ResourceExhausted||e.code===We.Unavailable?!0:((vs(e)===te.ErrClientNotActivated||vs(e)===te.ErrClientNotFound)&&this.deactivateInternal(),!1):!1}enqueueTask(e){return new Promise((t,n)=>{this.taskQueue.push(()=>e().then(t).catch(n)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{Ne.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}const lo={Client:el,Document:Qa,Primitive:Xe,Text:Yi,Counter:Zi,Tree:Xi,LogLevel:bt,setLogLevel:Ga,IntType:In.IntegerCnt,LongType:In.LongCnt};typeof globalThis<"u"&&(globalThis.yorkie={Client:el,Document:Qa,Primitive:Xe,Text:Yi,Counter:Zi,Tree:Xi,LogLevel:bt,setLogLevel:Ga,IntType:In.IntegerCnt,LongType:In.LongCnt});var Nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tl(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var nl={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(i,e){(function(n,r){i.exports=r()})(typeof self<"u"?self:Nf,function(){return function(t){var n={};function r(o){if(n[o])return n[o].exports;var s=n[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=n,r.d=function(o,s,u){r.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:u})},r.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(s,"a",s),s},r.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},r.p="",r(r.s=109)}([function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(17),s=r(18),u=r(19),h=r(45),y=r(46),v=r(47),d=r(48),l=r(49),a=r(12),p=r(32),b=r(33),w=r(31),m=r(1),f={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:o.default,Format:s.default,Leaf:u.default,Embed:d.default,Scroll:h.default,Block:v.default,Inline:y.default,Text:l.default,Attributor:{Attribute:a.default,Class:p.default,Style:b.default,Store:w.default}};n.default=f},function(t,n,r){var o=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,f){m.__proto__=f}||function(m,f){for(var g in f)f.hasOwnProperty(g)&&(m[g]=f[g])};return function(m,f){w(m,f);function g(){this.constructor=m}m.prototype=f===null?Object.create(f):(g.prototype=f.prototype,new g)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=function(w){o(m,w);function m(f){var g=this;return f="[Parchment] "+f,g=w.call(this,f)||this,g.message=f,g.name=g.constructor.name,g}return m}(Error);n.ParchmentError=s;var u={},h={},y={},v={};n.DATA_KEY="__blot";var d;(function(w){w[w.TYPE=3]="TYPE",w[w.LEVEL=12]="LEVEL",w[w.ATTRIBUTE=13]="ATTRIBUTE",w[w.BLOT=14]="BLOT",w[w.INLINE=7]="INLINE",w[w.BLOCK=11]="BLOCK",w[w.BLOCK_BLOT=10]="BLOCK_BLOT",w[w.INLINE_BLOT=6]="INLINE_BLOT",w[w.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",w[w.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",w[w.ANY=15]="ANY"})(d=n.Scope||(n.Scope={}));function l(w,m){var f=p(w);if(f==null)throw new s("Unable to create "+w+" blot");var g=f,c=w instanceof Node||w.nodeType===Node.TEXT_NODE?w:g.create(m);return new g(c,m)}n.create=l;function a(w,m){return m===void 0&&(m=!1),w==null?null:w[n.DATA_KEY]!=null?w[n.DATA_KEY].blot:m?a(w.parentNode,m):null}n.find=a;function p(w,m){m===void 0&&(m=d.ANY);var f;if(typeof w=="string")f=v[w]||u[w];else if(w instanceof Text||w.nodeType===Node.TEXT_NODE)f=v.text;else if(typeof w=="number")w&d.LEVEL&d.BLOCK?f=v.block:w&d.LEVEL&d.INLINE&&(f=v.inline);else if(w instanceof HTMLElement){var g=(w.getAttribute("class")||"").split(/\s+/);for(var c in g)if(f=h[g[c]],f)break;f=f||y[w.tagName]}return f==null?null:m&d.LEVEL&f.scope&&m&d.TYPE&f.scope?f:null}n.query=p;function b(){for(var w=[],m=0;m<arguments.length;m++)w[m]=arguments[m];if(w.length>1)return w.map(function(c){return b(c)});var f=w[0];if(typeof f.blotName!="string"&&typeof f.attrName!="string")throw new s("Invalid definition");if(f.blotName==="abstract")throw new s("Cannot register abstract class");if(v[f.blotName||f.attrName]=f,typeof f.keyName=="string")u[f.keyName]=f;else if(f.className!=null&&(h[f.className]=f),f.tagName!=null){Array.isArray(f.tagName)?f.tagName=f.tagName.map(function(c){return c.toUpperCase()}):f.tagName=f.tagName.toUpperCase();var g=Array.isArray(f.tagName)?f.tagName:[f.tagName];g.forEach(function(c){(y[c]==null||f.className==null)&&(y[c]=f)})}return f}n.register=b},function(t,n,r){var o=r(51),s=r(11),u=r(3),h=r(20),y="\0",v=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};v.prototype.insert=function(d,l){var a={};return d.length===0?this:(a.insert=d,l!=null&&typeof l=="object"&&Object.keys(l).length>0&&(a.attributes=l),this.push(a))},v.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},v.prototype.retain=function(d,l){if(d<=0)return this;var a={retain:d};return l!=null&&typeof l=="object"&&Object.keys(l).length>0&&(a.attributes=l),this.push(a)},v.prototype.push=function(d){var l=this.ops.length,a=this.ops[l-1];if(d=u(!0,{},d),typeof a=="object"){if(typeof d.delete=="number"&&typeof a.delete=="number")return this.ops[l-1]={delete:a.delete+d.delete},this;if(typeof a.delete=="number"&&d.insert!=null&&(l-=1,a=this.ops[l-1],typeof a!="object"))return this.ops.unshift(d),this;if(s(d.attributes,a.attributes)){if(typeof d.insert=="string"&&typeof a.insert=="string")return this.ops[l-1]={insert:a.insert+d.insert},typeof d.attributes=="object"&&(this.ops[l-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof a.retain=="number")return this.ops[l-1]={retain:a.retain+d.retain},typeof d.attributes=="object"&&(this.ops[l-1].attributes=d.attributes),this}}return l===this.ops.length?this.ops.push(d):this.ops.splice(l,0,d),this},v.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},v.prototype.filter=function(d){return this.ops.filter(d)},v.prototype.forEach=function(d){this.ops.forEach(d)},v.prototype.map=function(d){return this.ops.map(d)},v.prototype.partition=function(d){var l=[],a=[];return this.forEach(function(p){var b=d(p)?l:a;b.push(p)}),[l,a]},v.prototype.reduce=function(d,l){return this.ops.reduce(d,l)},v.prototype.changeLength=function(){return this.reduce(function(d,l){return l.insert?d+h.length(l):l.delete?d-l.delete:d},0)},v.prototype.length=function(){return this.reduce(function(d,l){return d+h.length(l)},0)},v.prototype.slice=function(d,l){d=d||0,typeof l!="number"&&(l=1/0);for(var a=[],p=h.iterator(this.ops),b=0;b<l&&p.hasNext();){var w;b<d?w=p.next(d-b):(w=p.next(l-b),a.push(w)),b+=h.length(w)}return new v(a)},v.prototype.compose=function(d){var l=h.iterator(this.ops),a=h.iterator(d.ops),p=[],b=a.peek();if(b!=null&&typeof b.retain=="number"&&b.attributes==null){for(var w=b.retain;l.peekType()==="insert"&&l.peekLength()<=w;)w-=l.peekLength(),p.push(l.next());b.retain-w>0&&a.next(b.retain-w)}for(var m=new v(p);l.hasNext()||a.hasNext();)if(a.peekType()==="insert")m.push(a.next());else if(l.peekType()==="delete")m.push(l.next());else{var f=Math.min(l.peekLength(),a.peekLength()),g=l.next(f),c=a.next(f);if(typeof c.retain=="number"){var T={};typeof g.retain=="number"?T.retain=f:T.insert=g.insert;var A=h.attributes.compose(g.attributes,c.attributes,typeof g.retain=="number");if(A&&(T.attributes=A),m.push(T),!a.hasNext()&&s(m.ops[m.ops.length-1],T)){var _=new v(l.rest());return m.concat(_).chop()}}else typeof c.delete=="number"&&typeof g.retain=="number"&&m.push(c)}return m.chop()},v.prototype.concat=function(d){var l=new v(this.ops.slice());return d.ops.length>0&&(l.push(d.ops[0]),l.ops=l.ops.concat(d.ops.slice(1))),l},v.prototype.diff=function(d,l){if(this.ops===d.ops)return new v;var a=[this,d].map(function(f){return f.map(function(g){if(g.insert!=null)return typeof g.insert=="string"?g.insert:y;var c=f===d?"on":"with";throw new Error("diff() called "+c+" non-document")}).join("")}),p=new v,b=o(a[0],a[1],l),w=h.iterator(this.ops),m=h.iterator(d.ops);return b.forEach(function(f){for(var g=f[1].length;g>0;){var c=0;switch(f[0]){case o.INSERT:c=Math.min(m.peekLength(),g),p.push(m.next(c));break;case o.DELETE:c=Math.min(g,w.peekLength()),w.next(c),p.delete(c);break;case o.EQUAL:c=Math.min(w.peekLength(),m.peekLength(),g);var T=w.next(c),A=m.next(c);s(T.insert,A.insert)?p.retain(c,h.attributes.diff(T.attributes,A.attributes)):p.push(A).delete(c);break}g-=c}}),p.chop()},v.prototype.eachLine=function(d,l){l=l||`
`;for(var a=h.iterator(this.ops),p=new v,b=0;a.hasNext();){if(a.peekType()!=="insert")return;var w=a.peek(),m=h.length(w)-a.peekLength(),f=typeof w.insert=="string"?w.insert.indexOf(l,m)-m:-1;if(f<0)p.push(a.next());else if(f>0)p.push(a.next(f));else{if(d(p,a.next(1).attributes||{},b)===!1)return;b+=1,p=new v}}p.length()>0&&d(p,{},b)},v.prototype.transform=function(d,l){if(l=!!l,typeof d=="number")return this.transformPosition(d,l);for(var a=h.iterator(this.ops),p=h.iterator(d.ops),b=new v;a.hasNext()||p.hasNext();)if(a.peekType()==="insert"&&(l||p.peekType()!=="insert"))b.retain(h.length(a.next()));else if(p.peekType()==="insert")b.push(p.next());else{var w=Math.min(a.peekLength(),p.peekLength()),m=a.next(w),f=p.next(w);if(m.delete)continue;f.delete?b.push(f):b.retain(w,h.attributes.transform(m.attributes,f.attributes,l))}return b.chop()},v.prototype.transformPosition=function(d,l){l=!!l;for(var a=h.iterator(this.ops),p=0;a.hasNext()&&p<=d;){var b=a.peekLength(),w=a.peekType();if(a.next(),w==="delete"){d-=Math.min(b,d-p);continue}else w==="insert"&&(p<d||!l)&&(d+=b);p+=b}return d},t.exports=v},function(t,n){var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h=function(a){return typeof Array.isArray=="function"?Array.isArray(a):o.call(a)==="[object Array]"},y=function(a){if(!a||o.call(a)!=="[object Object]")return!1;var p=r.call(a,"constructor"),b=a.constructor&&a.constructor.prototype&&r.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!p&&!b)return!1;var w;for(w in a);return typeof w>"u"||r.call(a,w)},v=function(a,p){s&&p.name==="__proto__"?s(a,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):a[p.name]=p.newValue},d=function(a,p){if(p==="__proto__")if(r.call(a,p)){if(u)return u(a,p).value}else return;return a[p]};t.exports=function l(){var a,p,b,w,m,f,g=arguments[0],c=1,T=arguments.length,A=!1;for(typeof g=="boolean"&&(A=g,g=arguments[1]||{},c=2),(g==null||typeof g!="object"&&typeof g!="function")&&(g={});c<T;++c)if(a=arguments[c],a!=null)for(p in a)b=d(g,p),w=d(a,p),g!==w&&(A&&w&&(y(w)||(m=h(w)))?(m?(m=!1,f=b&&h(b)?b:[]):f=b&&y(b)?b:{},v(g,{name:p,newValue:l(A,f,w)})):typeof w<"u"&&v(g,{name:p,newValue:w}));return g}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var o=function(){function E(k,x){for(var N=0;N<x.length;N++){var C=x[N];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(k,C.key,C)}}return function(k,x,N){return x&&E(k.prototype,x),N&&E(k,N),k}}(),s=function E(k,x,N){k===null&&(k=Function.prototype);var C=Object.getOwnPropertyDescriptor(k,x);if(C===void 0){var M=Object.getPrototypeOf(k);return M===null?void 0:E(M,x,N)}else{if("value"in C)return C.value;var j=C.get;return j===void 0?void 0:j.call(N)}},u=r(3),h=g(u),y=r(2),v=g(y),d=r(0),l=g(d),a=r(16),p=g(a),b=r(6),w=g(b),m=r(7),f=g(m);function g(E){return E&&E.__esModule?E:{default:E}}function c(E,k){if(!(E instanceof k))throw new TypeError("Cannot call a class as a function")}function T(E,k){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:E}function A(E,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);E.prototype=Object.create(k&&k.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(E,k):E.__proto__=k)}var _=1,S=function(E){A(k,E);function k(){return c(this,k),T(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return o(k,[{key:"attach",value:function(){s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"attach",this).call(this),this.attributes=new l.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new v.default().insert(this.value(),(0,h.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(N,C){var M=l.default.query(N,l.default.Scope.BLOCK_ATTRIBUTE);M!=null&&this.attributes.attribute(M,C)}},{key:"formatAt",value:function(N,C,M,j){this.format(M,j)}},{key:"insertAt",value:function(N,C,M){if(typeof C=="string"&&C.endsWith(`
`)){var j=l.default.create(I.blotName);this.parent.insertBefore(j,N===0?this:this.next),j.insertAt(0,C.slice(0,-1))}else s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertAt",this).call(this,N,C,M)}}]),k}(l.default.Embed);S.scope=l.default.Scope.BLOCK_BLOT;var I=function(E){A(k,E);function k(x){c(this,k);var N=T(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,x));return N.cache={},N}return o(k,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(l.default.Leaf).reduce(function(N,C){return C.length()===0?N:N.insert(C.value(),O(C))},new v.default).insert(`
`,O(this))),this.cache.delta}},{key:"deleteAt",value:function(N,C){s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"deleteAt",this).call(this,N,C),this.cache={}}},{key:"formatAt",value:function(N,C,M,j){C<=0||(l.default.query(M,l.default.Scope.BLOCK)?N+C===this.length()&&this.format(M,j):s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"formatAt",this).call(this,N,Math.min(C,this.length()-N-1),M,j),this.cache={})}},{key:"insertAt",value:function(N,C,M){if(M!=null)return s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertAt",this).call(this,N,C,M);if(C.length!==0){var j=C.split(`
`),Q=j.shift();Q.length>0&&(N<this.length()-1||this.children.tail==null?s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertAt",this).call(this,Math.min(N,this.length()-1),Q):this.children.tail.insertAt(this.children.tail.length(),Q),this.cache={});var $=this;j.reduce(function(B,P){return $=$.split(B,!0),$.insertAt(0,P),P.length},N+Q.length)}}},{key:"insertBefore",value:function(N,C){var M=this.children.head;s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertBefore",this).call(this,N,C),M instanceof p.default&&M.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"length",this).call(this)+_),this.cache.length}},{key:"moveChildren",value:function(N,C){s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"moveChildren",this).call(this,N,C),this.cache={}}},{key:"optimize",value:function(N){s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,N),this.cache={}}},{key:"path",value:function(N){return s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"path",this).call(this,N,!0)}},{key:"removeChild",value:function(N){s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"removeChild",this).call(this,N),this.cache={}}},{key:"split",value:function(N){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(C&&(N===0||N>=this.length()-_)){var M=this.clone();return N===0?(this.parent.insertBefore(M,this),this):(this.parent.insertBefore(M,this.next),M)}else{var j=s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"split",this).call(this,N,C);return this.cache={},j}}}]),k}(l.default.Block);I.blotName="block",I.tagName="P",I.defaultChild="break",I.allowedChildren=[w.default,l.default.Embed,f.default];function O(E){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return E==null||(typeof E.formats=="function"&&(k=(0,h.default)(k,E.formats())),E.parent==null||E.parent.blotName=="scroll"||E.parent.statics.scope!==E.statics.scope)?k:O(E.parent,k)}n.bubbleFormats=O,n.BlockEmbed=S,n.default=I},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},s=function(){function $(B,P){var L=[],D=!0,K=!1,z=void 0;try{for(var R=B[Symbol.iterator](),U;!(D=(U=R.next()).done)&&(L.push(U.value),!(P&&L.length===P));D=!0);}catch(H){K=!0,z=H}finally{try{!D&&R.return&&R.return()}finally{if(K)throw z}}return L}return function(B,P){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return $(B,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function $(B,P){for(var L=0;L<P.length;L++){var D=P[L];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(B,D.key,D)}}return function(B,P,L){return P&&$(B.prototype,P),L&&$(B,L),B}}();r(50);var h=r(2),y=O(h),v=r(14),d=O(v),l=r(8),a=O(l),p=r(9),b=O(p),w=r(0),m=O(w),f=r(15),g=O(f),c=r(3),T=O(c),A=r(10),_=O(A),S=r(34),I=O(S);function O($){return $&&$.__esModule?$:{default:$}}function E($,B,P){return B in $?Object.defineProperty($,B,{value:P,enumerable:!0,configurable:!0,writable:!0}):$[B]=P,$}function k($,B){if(!($ instanceof B))throw new TypeError("Cannot call a class as a function")}var x=(0,_.default)("quill"),N=function(){u($,null,[{key:"debug",value:function(P){P===!0&&(P="log"),_.default.level(P)}},{key:"find",value:function(P){return P.__quill||m.default.find(P)}},{key:"import",value:function(P){return this.imports[P]==null&&x.error("Cannot import "+P+". Are you sure it was registered?"),this.imports[P]}},{key:"register",value:function(P,L){var D=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof P!="string"){var z=P.attrName||P.blotName;typeof z=="string"?this.register("formats/"+z,P,L):Object.keys(P).forEach(function(R){D.register(R,P[R],L)})}else this.imports[P]!=null&&!K&&x.warn("Overwriting "+P+" with",L),this.imports[P]=L,(P.startsWith("blots/")||P.startsWith("formats/"))&&L.blotName!=="abstract"?m.default.register(L):P.startsWith("modules")&&typeof L.register=="function"&&L.register()}}]);function $(B){var P=this,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(k(this,$),this.options=C(B,L),this.container=this.options.container,this.container==null)return x.error("Invalid Quill container",B);this.options.debug&&$.debug(this.options.debug);var D=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new a.default,this.scroll=m.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new g.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(a.default.events.EDITOR_CHANGE,function(z){z===a.default.events.TEXT_CHANGE&&P.root.classList.toggle("ql-blank",P.editor.isBlank())}),this.emitter.on(a.default.events.SCROLL_UPDATE,function(z,R){var U=P.selection.lastRange,H=U&&U.length===0?U.index:void 0;M.call(P,function(){return P.editor.update(null,R,H)},z)});var K=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+D+"<p><br></p></div>");this.setContents(K),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return u($,[{key:"addContainer",value:function(P){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof P=="string"){var D=P;P=document.createElement("div"),P.classList.add(D)}return this.container.insertBefore(P,L),P}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(P,L,D){var K=this,z=j(P,L,D),R=s(z,4);return P=R[0],L=R[1],D=R[3],M.call(this,function(){return K.editor.deleteText(P,L)},D,P,-1*L)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(P),this.container.classList.toggle("ql-disabled",!P)}},{key:"focus",value:function(){var P=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=P,this.scrollIntoView()}},{key:"format",value:function(P,L){var D=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a.default.sources.API;return M.call(this,function(){var z=D.getSelection(!0),R=new y.default;if(z==null)return R;if(m.default.query(P,m.default.Scope.BLOCK))R=D.editor.formatLine(z.index,z.length,E({},P,L));else{if(z.length===0)return D.selection.format(P,L),R;R=D.editor.formatText(z.index,z.length,E({},P,L))}return D.setSelection(z,a.default.sources.SILENT),R},K)}},{key:"formatLine",value:function(P,L,D,K,z){var R=this,U=void 0,H=j(P,L,D,K,z),Z=s(H,4);return P=Z[0],L=Z[1],U=Z[2],z=Z[3],M.call(this,function(){return R.editor.formatLine(P,L,U)},z,P,0)}},{key:"formatText",value:function(P,L,D,K,z){var R=this,U=void 0,H=j(P,L,D,K,z),Z=s(H,4);return P=Z[0],L=Z[1],U=Z[2],z=Z[3],M.call(this,function(){return R.editor.formatText(P,L,U)},z,P,0)}},{key:"getBounds",value:function(P){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=void 0;typeof P=="number"?D=this.selection.getBounds(P,L):D=this.selection.getBounds(P.index,P.length);var K=this.container.getBoundingClientRect();return{bottom:D.bottom-K.top,height:D.height,left:D.left-K.left,right:D.right-K.left,top:D.top-K.top,width:D.width}}},{key:"getContents",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-P,D=j(P,L),K=s(D,2);return P=K[0],L=K[1],this.editor.getContents(P,L)}},{key:"getFormat",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof P=="number"?this.editor.getFormat(P,L):this.editor.getFormat(P.index,P.length)}},{key:"getIndex",value:function(P){return P.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(P){return this.scroll.leaf(P)}},{key:"getLine",value:function(P){return this.scroll.line(P)}},{key:"getLines",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof P!="number"?this.scroll.lines(P.index,P.length):this.scroll.lines(P,L)}},{key:"getModule",value:function(P){return this.theme.modules[P]}},{key:"getSelection",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return P&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-P,D=j(P,L),K=s(D,2);return P=K[0],L=K[1],this.editor.getText(P,L)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(P,L,D){var K=this,z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:$.sources.API;return M.call(this,function(){return K.editor.insertEmbed(P,L,D)},z,P)}},{key:"insertText",value:function(P,L,D,K,z){var R=this,U=void 0,H=j(P,0,D,K,z),Z=s(H,4);return P=Z[0],U=Z[2],z=Z[3],M.call(this,function(){return R.editor.insertText(P,L,U)},z,P,L.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(P,L,D){this.clipboard.dangerouslyPasteHTML(P,L,D)}},{key:"removeFormat",value:function(P,L,D){var K=this,z=j(P,L,D),R=s(z,4);return P=R[0],L=R[1],D=R[3],M.call(this,function(){return K.editor.removeFormat(P,L)},D,P)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(P){var L=this,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.default.sources.API;return M.call(this,function(){P=new y.default(P);var K=L.getLength(),z=L.editor.deleteText(0,K),R=L.editor.applyDelta(P),U=R.ops[R.ops.length-1];U!=null&&typeof U.insert=="string"&&U.insert[U.insert.length-1]===`
`&&(L.editor.deleteText(L.getLength()-1,1),R.delete(1));var H=z.compose(R);return H},D)}},{key:"setSelection",value:function(P,L,D){if(P==null)this.selection.setRange(null,L||$.sources.API);else{var K=j(P,L,D),z=s(K,4);P=z[0],L=z[1],D=z[3],this.selection.setRange(new f.Range(P,L),D),D!==a.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(P){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.default.sources.API,D=new y.default().insert(P);return this.setContents(D,L)}},{key:"update",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.default.sources.USER,L=this.scroll.update(P);return this.selection.update(P),L}},{key:"updateContents",value:function(P){var L=this,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.default.sources.API;return M.call(this,function(){return P=new y.default(P),L.editor.applyDelta(P,D)},D,!0)}}]),$}();N.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},N.events=a.default.events,N.sources=a.default.sources,N.version="1.3.7",N.imports={delta:y.default,parchment:m.default,"core/module":b.default,"core/theme":I.default};function C($,B){if(B=(0,T.default)(!0,{container:$,modules:{clipboard:!0,keyboard:!0,history:!0}},B),!B.theme||B.theme===N.DEFAULTS.theme)B.theme=I.default;else if(B.theme=N.import("themes/"+B.theme),B.theme==null)throw new Error("Invalid theme "+B.theme+". Did you register it?");var P=(0,T.default)(!0,{},B.theme.DEFAULTS);[P,B].forEach(function(K){K.modules=K.modules||{},Object.keys(K.modules).forEach(function(z){K.modules[z]===!0&&(K.modules[z]={})})});var L=Object.keys(P.modules).concat(Object.keys(B.modules)),D=L.reduce(function(K,z){var R=N.import("modules/"+z);return R==null?x.error("Cannot load "+z+" module. Are you sure you registered it?"):K[z]=R.DEFAULTS||{},K},{});return B.modules!=null&&B.modules.toolbar&&B.modules.toolbar.constructor!==Object&&(B.modules.toolbar={container:B.modules.toolbar}),B=(0,T.default)(!0,{},N.DEFAULTS,{modules:D},P,B),["bounds","container","scrollingContainer"].forEach(function(K){typeof B[K]=="string"&&(B[K]=document.querySelector(B[K]))}),B.modules=Object.keys(B.modules).reduce(function(K,z){return B.modules[z]&&(K[z]=B.modules[z]),K},{}),B}function M($,B,P,L){if(this.options.strict&&!this.isEnabled()&&B===a.default.sources.USER)return new y.default;var D=P==null?null:this.getSelection(),K=this.editor.delta,z=$();if(D!=null&&(P===!0&&(P=D.index),L==null?D=Q(D,z,B):L!==0&&(D=Q(D,P,L,B)),this.setSelection(D,a.default.sources.SILENT)),z.length()>0){var R,U=[a.default.events.TEXT_CHANGE,z,K,B];if((R=this.emitter).emit.apply(R,[a.default.events.EDITOR_CHANGE].concat(U)),B!==a.default.sources.SILENT){var H;(H=this.emitter).emit.apply(H,U)}}return z}function j($,B,P,L,D){var K={};return typeof $.index=="number"&&typeof $.length=="number"?typeof B!="number"?(D=L,L=P,P=B,B=$.length,$=$.index):(B=$.length,$=$.index):typeof B!="number"&&(D=L,L=P,P=B,B=0),(typeof P>"u"?"undefined":o(P))==="object"?(K=P,D=L):typeof P=="string"&&(L!=null?K[P]=L:D=P),D=D||a.default.sources.API,[$,B,K,D]}function Q($,B,P,L){if($==null)return null;var D=void 0,K=void 0;if(B instanceof y.default){var z=[$.index,$.index+$.length].map(function(Z){return B.transformPosition(Z,L!==a.default.sources.USER)}),R=s(z,2);D=R[0],K=R[1]}else{var U=[$.index,$.index+$.length].map(function(Z){return Z<B||Z===B&&L===a.default.sources.USER?Z:P>=0?Z+P:Math.max(B,Z+P)}),H=s(U,2);D=H[0],K=H[1]}return new f.Range(D,K-D)}n.expandConfig=C,n.overload=j,n.default=N},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function w(m,f){for(var g=0;g<f.length;g++){var c=f[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(m,c.key,c)}}return function(m,f,g){return f&&w(m.prototype,f),g&&w(m,g),m}}(),s=function w(m,f,g){m===null&&(m=Function.prototype);var c=Object.getOwnPropertyDescriptor(m,f);if(c===void 0){var T=Object.getPrototypeOf(m);return T===null?void 0:w(T,f,g)}else{if("value"in c)return c.value;var A=c.get;return A===void 0?void 0:A.call(g)}},u=r(7),h=d(u),y=r(0),v=d(y);function d(w){return w&&w.__esModule?w:{default:w}}function l(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}function a(w,m){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:w}function p(w,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);w.prototype=Object.create(m&&m.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(w,m):w.__proto__=m)}var b=function(w){p(m,w);function m(){return l(this,m),a(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"formatAt",value:function(g,c,T,A){if(m.compare(this.statics.blotName,T)<0&&v.default.query(T,v.default.Scope.BLOT)){var _=this.isolate(g,c);A&&_.wrap(T,A)}else s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"formatAt",this).call(this,g,c,T,A)}},{key:"optimize",value:function(g){if(s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"optimize",this).call(this,g),this.parent instanceof m&&m.compare(this.statics.blotName,this.parent.statics.blotName)>0){var c=this.parent.isolate(this.offset(),this.length());this.moveChildren(c),c.wrap(this)}}}],[{key:"compare",value:function(g,c){var T=m.order.indexOf(g),A=m.order.indexOf(c);return T>=0||A>=0?T-A:g===c?0:g<c?-1:1}}]),m}(v.default.Inline);b.allowedChildren=[b,v.default.Embed,h.default],b.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=b},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(0),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}function h(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function y(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function v(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var d=function(l){v(a,l);function a(){return h(this,a),y(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(s.default.Text);n.default=d},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function f(g,c){for(var T=0;T<c.length;T++){var A=c[T];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(g,A.key,A)}}return function(g,c,T){return c&&f(g.prototype,c),T&&f(g,T),g}}(),s=function f(g,c,T){g===null&&(g=Function.prototype);var A=Object.getOwnPropertyDescriptor(g,c);if(A===void 0){var _=Object.getPrototypeOf(g);return _===null?void 0:f(_,c,T)}else{if("value"in A)return A.value;var S=A.get;return S===void 0?void 0:S.call(T)}},u=r(54),h=d(u),y=r(10),v=d(y);function d(f){return f&&f.__esModule?f:{default:f}}function l(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}function a(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:f}function p(f,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}var b=(0,v.default)("quill:events"),w=["selectionchange","mousedown","mouseup","click"];w.forEach(function(f){document.addEventListener(f,function(){for(var g=arguments.length,c=Array(g),T=0;T<g;T++)c[T]=arguments[T];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(A){if(A.__quill&&A.__quill.emitter){var _;(_=A.__quill.emitter).handleDOM.apply(_,c)}})})});var m=function(f){p(g,f);function g(){l(this,g);var c=a(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));return c.listeners={},c.on("error",b.error),c}return o(g,[{key:"emit",value:function(){b.log.apply(b,arguments),s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(T){for(var A=arguments.length,_=Array(A>1?A-1:0),S=1;S<A;S++)_[S-1]=arguments[S];(this.listeners[T.type]||[]).forEach(function(I){var O=I.node,E=I.handler;(T.target===O||O.contains(T.target))&&E.apply(void 0,[T].concat(_))})}},{key:"listenDOM",value:function(T,A,_){this.listeners[T]||(this.listeners[T]=[]),this.listeners[T].push({node:A,handler:_})}}]),g}(h.default);m.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},m.sources={API:"api",SILENT:"silent",USER:"user"},n.default=m},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});function o(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}var s=function u(h){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,u),this.quill=h,this.options=y};s.DEFAULTS={},n.default=s},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=["error","warn","log","info"],s="warn";function u(y){if(o.indexOf(y)<=o.indexOf(s)){for(var v,d=arguments.length,l=Array(d>1?d-1:0),a=1;a<d;a++)l[a-1]=arguments[a];(v=console)[y].apply(v,l)}}function h(y){return o.reduce(function(v,d){return v[d]=u.bind(console,d,y),v},{})}u.level=h.level=function(y){s=y},n.default=h},function(t,n,r){var o=Array.prototype.slice,s=r(52),u=r(53),h=t.exports=function(l,a,p){return p||(p={}),l===a?!0:l instanceof Date&&a instanceof Date?l.getTime()===a.getTime():!l||!a||typeof l!="object"&&typeof a!="object"?p.strict?l===a:l==a:d(l,a,p)};function y(l){return l==null}function v(l){return!(!l||typeof l!="object"||typeof l.length!="number"||typeof l.copy!="function"||typeof l.slice!="function"||l.length>0&&typeof l[0]!="number")}function d(l,a,p){var b,w;if(y(l)||y(a)||l.prototype!==a.prototype)return!1;if(u(l))return u(a)?(l=o.call(l),a=o.call(a),h(l,a,p)):!1;if(v(l)){if(!v(a)||l.length!==a.length)return!1;for(b=0;b<l.length;b++)if(l[b]!==a[b])return!1;return!0}try{var m=s(l),f=s(a)}catch{return!1}if(m.length!=f.length)return!1;for(m.sort(),f.sort(),b=m.length-1;b>=0;b--)if(m[b]!=f[b])return!1;for(b=m.length-1;b>=0;b--)if(w=m[b],!h(l[w],a[w],p))return!1;return typeof l==typeof a}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(1),s=function(){function u(h,y,v){v===void 0&&(v={}),this.attrName=h,this.keyName=y;var d=o.Scope.TYPE&o.Scope.ATTRIBUTE;v.scope!=null?this.scope=v.scope&o.Scope.LEVEL|d:this.scope=o.Scope.ATTRIBUTE,v.whitelist!=null&&(this.whitelist=v.whitelist)}return u.keys=function(h){return[].map.call(h.attributes,function(y){return y.name})},u.prototype.add=function(h,y){return this.canAdd(h,y)?(h.setAttribute(this.keyName,y),!0):!1},u.prototype.canAdd=function(h,y){var v=o.query(h,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return v==null?!1:this.whitelist==null?!0:typeof y=="string"?this.whitelist.indexOf(y.replace(/["']/g,""))>-1:this.whitelist.indexOf(y)>-1},u.prototype.remove=function(h){h.removeAttribute(this.keyName)},u.prototype.value=function(h){var y=h.getAttribute(this.keyName);return this.canAdd(h,y)&&y?y:""},u}();n.default=s},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var o=function(){function S(I,O){var E=[],k=!0,x=!1,N=void 0;try{for(var C=I[Symbol.iterator](),M;!(k=(M=C.next()).done)&&(E.push(M.value),!(O&&E.length===O));k=!0);}catch(j){x=!0,N=j}finally{try{!k&&C.return&&C.return()}finally{if(x)throw N}}return E}return function(I,O){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return S(I,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function S(I,O){for(var E=0;E<O.length;E++){var k=O[E];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(I,k.key,k)}}return function(I,O,E){return O&&S(I.prototype,O),E&&S(I,E),I}}(),u=function S(I,O,E){I===null&&(I=Function.prototype);var k=Object.getOwnPropertyDescriptor(I,O);if(k===void 0){var x=Object.getPrototypeOf(I);return x===null?void 0:S(x,O,E)}else{if("value"in k)return k.value;var N=k.get;return N===void 0?void 0:N.call(E)}},h=r(2),y=f(h),v=r(0),d=f(v),l=r(4),a=f(l),p=r(6),b=f(p),w=r(7),m=f(w);function f(S){return S&&S.__esModule?S:{default:S}}function g(S,I){if(!(S instanceof I))throw new TypeError("Cannot call a class as a function")}function c(S,I){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:S}function T(S,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);S.prototype=Object.create(I&&I.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(S,I):S.__proto__=I)}var A=function(S){T(I,S);function I(){return g(this,I),c(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return I}(b.default);A.blotName="code",A.tagName="CODE";var _=function(S){T(I,S);function I(){return g(this,I),c(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return s(I,[{key:"delta",value:function(){var E=this,k=this.domNode.textContent;return k.endsWith(`
`)&&(k=k.slice(0,-1)),k.split(`
`).reduce(function(x,N){return x.insert(N).insert(`
`,E.formats())},new y.default)}},{key:"format",value:function(E,k){if(!(E===this.statics.blotName&&k)){var x=this.descendant(m.default,this.length()-1),N=o(x,1),C=N[0];C!=null&&C.deleteAt(C.length()-1,1),u(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"format",this).call(this,E,k)}}},{key:"formatAt",value:function(E,k,x,N){if(k!==0&&!(d.default.query(x,d.default.Scope.BLOCK)==null||x===this.statics.blotName&&N===this.statics.formats(this.domNode))){var C=this.newlineIndex(E);if(!(C<0||C>=E+k)){var M=this.newlineIndex(E,!0)+1,j=C-M+1,Q=this.isolate(M,j),$=Q.next;Q.format(x,N),$ instanceof I&&$.formatAt(0,E-M+k-j,x,N)}}}},{key:"insertAt",value:function(E,k,x){if(x==null){var N=this.descendant(m.default,E),C=o(N,2),M=C[0],j=C[1];M.insertAt(j,k)}}},{key:"length",value:function(){var E=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?E:E+1}},{key:"newlineIndex",value:function(E){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(k)return this.domNode.textContent.slice(0,E).lastIndexOf(`
`);var x=this.domNode.textContent.slice(E).indexOf(`
`);return x>-1?E+x:-1}},{key:"optimize",value:function(E){this.domNode.textContent.endsWith(`
`)||this.appendChild(d.default.create("text",`
`)),u(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"optimize",this).call(this,E);var k=this.next;k!=null&&k.prev===this&&k.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===k.statics.formats(k.domNode)&&(k.optimize(E),k.moveChildren(this),k.remove())}},{key:"replace",value:function(E){u(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"replace",this).call(this,E),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(k){var x=d.default.find(k);x==null?k.parentNode.removeChild(k):x instanceof d.default.Embed?x.remove():x.unwrap()})}}],[{key:"create",value:function(E){var k=u(I.__proto__||Object.getPrototypeOf(I),"create",this).call(this,E);return k.setAttribute("spellcheck",!1),k}},{key:"formats",value:function(){return!0}}]),I}(a.default);_.blotName="code-block",_.tagName="PRE",_.TAB="  ",n.Code=A,n.default=_},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},s=function(){function $(B,P){var L=[],D=!0,K=!1,z=void 0;try{for(var R=B[Symbol.iterator](),U;!(D=(U=R.next()).done)&&(L.push(U.value),!(P&&L.length===P));D=!0);}catch(H){K=!0,z=H}finally{try{!D&&R.return&&R.return()}finally{if(K)throw z}}return L}return function(B,P){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return $(B,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function $(B,P){for(var L=0;L<P.length;L++){var D=P[L];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(B,D.key,D)}}return function(B,P,L){return P&&$(B.prototype,P),L&&$(B,L),B}}(),h=r(2),y=k(h),v=r(20),d=k(v),l=r(0),a=k(l),p=r(13),b=k(p),w=r(24),m=k(w),f=r(4),g=k(f),c=r(16),T=k(c),A=r(21),_=k(A),S=r(11),I=k(S),O=r(3),E=k(O);function k($){return $&&$.__esModule?$:{default:$}}function x($,B,P){return B in $?Object.defineProperty($,B,{value:P,enumerable:!0,configurable:!0,writable:!0}):$[B]=P,$}function N($,B){if(!($ instanceof B))throw new TypeError("Cannot call a class as a function")}var C=/^[ -~]*$/,M=function(){function $(B){N(this,$),this.scroll=B,this.delta=this.getDelta()}return u($,[{key:"applyDelta",value:function(P){var L=this,D=!1;this.scroll.update();var K=this.scroll.length();return this.scroll.batchStart(),P=Q(P),P.reduce(function(z,R){var U=R.retain||R.delete||R.insert.length||1,H=R.attributes||{};if(R.insert!=null){if(typeof R.insert=="string"){var Z=R.insert;Z.endsWith(`
`)&&D&&(D=!1,Z=Z.slice(0,-1)),z>=K&&!Z.endsWith(`
`)&&(D=!0),L.scroll.insertAt(z,Z);var ie=L.scroll.line(z),fe=s(ie,2),be=fe[0],me=fe[1],ve=(0,E.default)({},(0,f.bubbleFormats)(be));if(be instanceof g.default){var F=be.descendant(a.default.Leaf,me),X=s(F,1),G=X[0];ve=(0,E.default)(ve,(0,f.bubbleFormats)(G))}H=d.default.attributes.diff(ve,H)||{}}else if(o(R.insert)==="object"){var q=Object.keys(R.insert)[0];if(q==null)return z;L.scroll.insertAt(z,q,R.insert[q])}K+=U}return Object.keys(H).forEach(function(W){L.scroll.formatAt(z,U,W,H[W])}),z+U},0),P.reduce(function(z,R){return typeof R.delete=="number"?(L.scroll.deleteAt(z,R.delete),z):z+(R.retain||R.insert.length||1)},0),this.scroll.batchEnd(),this.update(P)}},{key:"deleteText",value:function(P,L){return this.scroll.deleteAt(P,L),this.update(new y.default().retain(P).delete(L))}},{key:"formatLine",value:function(P,L){var D=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(K).forEach(function(z){if(!(D.scroll.whitelist!=null&&!D.scroll.whitelist[z])){var R=D.scroll.lines(P,Math.max(L,1)),U=L;R.forEach(function(H){var Z=H.length();if(!(H instanceof b.default))H.format(z,K[z]);else{var ie=P-H.offset(D.scroll),fe=H.newlineIndex(ie+U)-ie+1;H.formatAt(ie,fe,z,K[z])}U-=Z})}}),this.scroll.optimize(),this.update(new y.default().retain(P).retain(L,(0,_.default)(K)))}},{key:"formatText",value:function(P,L){var D=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(K).forEach(function(z){D.scroll.formatAt(P,L,z,K[z])}),this.update(new y.default().retain(P).retain(L,(0,_.default)(K)))}},{key:"getContents",value:function(P,L){return this.delta.slice(P,P+L)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(P,L){return P.concat(L.delta())},new y.default)}},{key:"getFormat",value:function(P){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=[],K=[];L===0?this.scroll.path(P).forEach(function(R){var U=s(R,1),H=U[0];H instanceof g.default?D.push(H):H instanceof a.default.Leaf&&K.push(H)}):(D=this.scroll.lines(P,L),K=this.scroll.descendants(a.default.Leaf,P,L));var z=[D,K].map(function(R){if(R.length===0)return{};for(var U=(0,f.bubbleFormats)(R.shift());Object.keys(U).length>0;){var H=R.shift();if(H==null)return U;U=j((0,f.bubbleFormats)(H),U)}return U});return E.default.apply(E.default,z)}},{key:"getText",value:function(P,L){return this.getContents(P,L).filter(function(D){return typeof D.insert=="string"}).map(function(D){return D.insert}).join("")}},{key:"insertEmbed",value:function(P,L,D){return this.scroll.insertAt(P,L,D),this.update(new y.default().retain(P).insert(x({},L,D)))}},{key:"insertText",value:function(P,L){var D=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return L=L.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(P,L),Object.keys(K).forEach(function(z){D.scroll.formatAt(P,L.length,z,K[z])}),this.update(new y.default().retain(P).insert(L,(0,_.default)(K)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var P=this.scroll.children.head;return P.statics.blotName!==g.default.blotName||P.children.length>1?!1:P.children.head instanceof T.default}},{key:"removeFormat",value:function(P,L){var D=this.getText(P,L),K=this.scroll.line(P+L),z=s(K,2),R=z[0],U=z[1],H=0,Z=new y.default;R!=null&&(R instanceof b.default?H=R.newlineIndex(U)-U+1:H=R.length()-U,Z=R.delta().slice(U,U+H-1).insert(`
`));var ie=this.getContents(P,L+H),fe=ie.diff(new y.default().insert(D).concat(Z)),be=new y.default().retain(P).concat(fe);return this.applyDelta(be)}},{key:"update",value:function(P){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,K=this.delta;if(L.length===1&&L[0].type==="characterData"&&L[0].target.data.match(C)&&a.default.find(L[0].target)){var z=a.default.find(L[0].target),R=(0,f.bubbleFormats)(z),U=z.offset(this.scroll),H=L[0].oldValue.replace(m.default.CONTENTS,""),Z=new y.default().insert(H),ie=new y.default().insert(z.value()),fe=new y.default().retain(U).concat(Z.diff(ie,D));P=fe.reduce(function(be,me){return me.insert?be.insert(me.insert,R):be.push(me)},new y.default),this.delta=K.compose(P)}else this.delta=this.getDelta(),(!P||!(0,I.default)(K.compose(P),this.delta))&&(P=K.diff(this.delta,D));return P}}]),$}();function j($,B){return Object.keys(B).reduce(function(P,L){return $[L]==null||(B[L]===$[L]?P[L]=B[L]:Array.isArray(B[L])?B[L].indexOf($[L])<0&&(P[L]=B[L].concat([$[L]])):P[L]=[B[L],$[L]]),P},{})}function Q($){return $.reduce(function(B,P){if(P.insert===1){var L=(0,_.default)(P.attributes);return delete L.image,B.insert({image:P.attributes.image},L)}if(P.attributes!=null&&(P.attributes.list===!0||P.attributes.bullet===!0)&&(P=(0,_.default)(P),P.attributes.list?P.attributes.list="ordered":(P.attributes.list="bullet",delete P.attributes.bullet)),typeof P.insert=="string"){var D=P.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return B.insert(D,P.attributes)}return B.push(P)},new y.default)}n.default=M},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var o=function(){function S(I,O){var E=[],k=!0,x=!1,N=void 0;try{for(var C=I[Symbol.iterator](),M;!(k=(M=C.next()).done)&&(E.push(M.value),!(O&&E.length===O));k=!0);}catch(j){x=!0,N=j}finally{try{!k&&C.return&&C.return()}finally{if(x)throw N}}return E}return function(I,O){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return S(I,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function S(I,O){for(var E=0;E<O.length;E++){var k=O[E];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(I,k.key,k)}}return function(I,O,E){return O&&S(I.prototype,O),E&&S(I,E),I}}(),u=r(0),h=m(u),y=r(21),v=m(y),d=r(11),l=m(d),a=r(8),p=m(a),b=r(10),w=m(b);function m(S){return S&&S.__esModule?S:{default:S}}function f(S){if(Array.isArray(S)){for(var I=0,O=Array(S.length);I<S.length;I++)O[I]=S[I];return O}else return Array.from(S)}function g(S,I){if(!(S instanceof I))throw new TypeError("Cannot call a class as a function")}var c=(0,w.default)("quill:selection"),T=function S(I){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;g(this,S),this.index=I,this.length=O},A=function(){function S(I,O){var E=this;g(this,S),this.emitter=O,this.scroll=I,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=h.default.create("cursor",this),this.lastRange=this.savedRange=new T(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){E.mouseDown||setTimeout(E.update.bind(E,p.default.sources.USER),1)}),this.emitter.on(p.default.events.EDITOR_CHANGE,function(k,x){k===p.default.events.TEXT_CHANGE&&x.length()>0&&E.update(p.default.sources.SILENT)}),this.emitter.on(p.default.events.SCROLL_BEFORE_UPDATE,function(){if(E.hasFocus()){var k=E.getNativeRange();k!=null&&k.start.node!==E.cursor.textNode&&E.emitter.once(p.default.events.SCROLL_UPDATE,function(){try{E.setNativeRange(k.start.node,k.start.offset,k.end.node,k.end.offset)}catch{}})}}),this.emitter.on(p.default.events.SCROLL_OPTIMIZE,function(k,x){if(x.range){var N=x.range,C=N.startNode,M=N.startOffset,j=N.endNode,Q=N.endOffset;E.setNativeRange(C,M,j,Q)}}),this.update(p.default.sources.SILENT)}return s(S,[{key:"handleComposition",value:function(){var O=this;this.root.addEventListener("compositionstart",function(){O.composing=!0}),this.root.addEventListener("compositionend",function(){if(O.composing=!1,O.cursor.parent){var E=O.cursor.restore();if(!E)return;setTimeout(function(){O.setNativeRange(E.startNode,E.startOffset,E.endNode,E.endOffset)},1)}})}},{key:"handleDragging",value:function(){var O=this;this.emitter.listenDOM("mousedown",document.body,function(){O.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){O.mouseDown=!1,O.update(p.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(O,E){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[O])){this.scroll.update();var k=this.getNativeRange();if(!(k==null||!k.native.collapsed||h.default.query(O,h.default.Scope.BLOCK))){if(k.start.node!==this.cursor.textNode){var x=h.default.find(k.start.node,!1);if(x==null)return;if(x instanceof h.default.Leaf){var N=x.split(k.start.offset);x.parent.insertBefore(this.cursor,N)}else x.insertBefore(this.cursor,k.start.node);this.cursor.attach()}this.cursor.format(O,E),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(O){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=this.scroll.length();O=Math.min(O,k-1),E=Math.min(O+E,k-1)-O;var x=void 0,N=this.scroll.leaf(O),C=o(N,2),M=C[0],j=C[1];if(M==null)return null;var Q=M.position(j,!0),$=o(Q,2);x=$[0],j=$[1];var B=document.createRange();if(E>0){B.setStart(x,j);var P=this.scroll.leaf(O+E),L=o(P,2);if(M=L[0],j=L[1],M==null)return null;var D=M.position(j,!0),K=o(D,2);return x=K[0],j=K[1],B.setEnd(x,j),B.getBoundingClientRect()}else{var z="left",R=void 0;return x instanceof Text?(j<x.data.length?(B.setStart(x,j),B.setEnd(x,j+1)):(B.setStart(x,j-1),B.setEnd(x,j),z="right"),R=B.getBoundingClientRect()):(R=M.domNode.getBoundingClientRect(),j>0&&(z="right")),{bottom:R.top+R.height,height:R.height,left:R[z],right:R[z],top:R.top,width:0}}}},{key:"getNativeRange",value:function(){var O=document.getSelection();if(O==null||O.rangeCount<=0)return null;var E=O.getRangeAt(0);if(E==null)return null;var k=this.normalizeNative(E);return c.info("getNativeRange",k),k}},{key:"getRange",value:function(){var O=this.getNativeRange();if(O==null)return[null,null];var E=this.normalizedToRange(O);return[E,O]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(O){var E=this,k=[[O.start.node,O.start.offset]];O.native.collapsed||k.push([O.end.node,O.end.offset]);var x=k.map(function(M){var j=o(M,2),Q=j[0],$=j[1],B=h.default.find(Q,!0),P=B.offset(E.scroll);return $===0?P:B instanceof h.default.Container?P+B.length():P+B.index(Q,$)}),N=Math.min(Math.max.apply(Math,f(x)),this.scroll.length()-1),C=Math.min.apply(Math,[N].concat(f(x)));return new T(C,N-C)}},{key:"normalizeNative",value:function(O){if(!_(this.root,O.startContainer)||!O.collapsed&&!_(this.root,O.endContainer))return null;var E={start:{node:O.startContainer,offset:O.startOffset},end:{node:O.endContainer,offset:O.endOffset},native:O};return[E.start,E.end].forEach(function(k){for(var x=k.node,N=k.offset;!(x instanceof Text)&&x.childNodes.length>0;)if(x.childNodes.length>N)x=x.childNodes[N],N=0;else if(x.childNodes.length===N)x=x.lastChild,N=x instanceof Text?x.data.length:x.childNodes.length+1;else break;k.node=x,k.offset=N}),E}},{key:"rangeToNative",value:function(O){var E=this,k=O.collapsed?[O.index]:[O.index,O.index+O.length],x=[],N=this.scroll.length();return k.forEach(function(C,M){C=Math.min(N-1,C);var j=void 0,Q=E.scroll.leaf(C),$=o(Q,2),B=$[0],P=$[1],L=B.position(P,M!==0),D=o(L,2);j=D[0],P=D[1],x.push(j,P)}),x.length<2&&(x=x.concat(x)),x}},{key:"scrollIntoView",value:function(O){var E=this.lastRange;if(E!=null){var k=this.getBounds(E.index,E.length);if(k!=null){var x=this.scroll.length()-1,N=this.scroll.line(Math.min(E.index,x)),C=o(N,1),M=C[0],j=M;if(E.length>0){var Q=this.scroll.line(Math.min(E.index+E.length,x)),$=o(Q,1);j=$[0]}if(!(M==null||j==null)){var B=O.getBoundingClientRect();k.top<B.top?O.scrollTop-=B.top-k.top:k.bottom>B.bottom&&(O.scrollTop+=k.bottom-B.bottom)}}}}},{key:"setNativeRange",value:function(O,E){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:O,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:E,N=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(c.info("setNativeRange",O,E,k,x),!(O!=null&&(this.root.parentNode==null||O.parentNode==null||k.parentNode==null))){var C=document.getSelection();if(C!=null)if(O!=null){this.hasFocus()||this.root.focus();var M=(this.getNativeRange()||{}).native;if(M==null||N||O!==M.startContainer||E!==M.startOffset||k!==M.endContainer||x!==M.endOffset){O.tagName=="BR"&&(E=[].indexOf.call(O.parentNode.childNodes,O),O=O.parentNode),k.tagName=="BR"&&(x=[].indexOf.call(k.parentNode.childNodes,k),k=k.parentNode);var j=document.createRange();j.setStart(O,E),j.setEnd(k,x),C.removeAllRanges(),C.addRange(j)}}else C.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(O){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;if(typeof E=="string"&&(k=E,E=!1),c.info("setRange",O),O!=null){var x=this.rangeToNative(O);this.setNativeRange.apply(this,f(x).concat([E]))}else this.setNativeRange(null);this.update(k)}},{key:"update",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,E=this.lastRange,k=this.getRange(),x=o(k,2),N=x[0],C=x[1];if(this.lastRange=N,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,l.default)(E,this.lastRange)){var M;!this.composing&&C!=null&&C.native.collapsed&&C.start.node!==this.cursor.textNode&&this.cursor.restore();var j=[p.default.events.SELECTION_CHANGE,(0,v.default)(this.lastRange),(0,v.default)(E),O];if((M=this.emitter).emit.apply(M,[p.default.events.EDITOR_CHANGE].concat(j)),O!==p.default.sources.SILENT){var Q;(Q=this.emitter).emit.apply(Q,j)}}}}]),S}();function _(S,I){try{I.parentNode}catch{return!1}return I instanceof Text&&(I=I.parentNode),S.contains(I)}n.Range=T,n.default=A},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function p(b,w){for(var m=0;m<w.length;m++){var f=w[m];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}}return function(b,w,m){return w&&p(b.prototype,w),m&&p(b,m),b}}(),s=function p(b,w,m){b===null&&(b=Function.prototype);var f=Object.getOwnPropertyDescriptor(b,w);if(f===void 0){var g=Object.getPrototypeOf(b);return g===null?void 0:p(g,w,m)}else{if("value"in f)return f.value;var c=f.get;return c===void 0?void 0:c.call(m)}},u=r(0),h=y(u);function y(p){return p&&p.__esModule?p:{default:p}}function v(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function d(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function l(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var a=function(p){l(b,p);function b(){return v(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,[{key:"insertInto",value:function(m,f){m.children.length===0?s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"insertInto",this).call(this,m,f):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),b}(h.default.Embed);a.blotName="break",a.tagName="BR",n.default=a},function(t,n,r){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var p in a)a.hasOwnProperty(p)&&(l[p]=a[p])};return function(l,a){d(l,a);function p(){this.constructor=l}l.prototype=a===null?Object.create(a):(p.prototype=a.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(44),u=r(30),h=r(1),y=function(d){o(l,d);function l(a){var p=d.call(this,a)||this;return p.build(),p}return l.prototype.appendChild=function(a){this.insertBefore(a)},l.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(a){a.attach()})},l.prototype.build=function(){var a=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(p){try{var b=v(p);a.insertBefore(b,a.children.head||void 0)}catch(w){if(w instanceof h.ParchmentError)return;throw w}})},l.prototype.deleteAt=function(a,p){if(a===0&&p===this.length())return this.remove();this.children.forEachAt(a,p,function(b,w,m){b.deleteAt(w,m)})},l.prototype.descendant=function(a,p){var b=this.children.find(p),w=b[0],m=b[1];return a.blotName==null&&a(w)||a.blotName!=null&&w instanceof a?[w,m]:w instanceof l?w.descendant(a,m):[null,-1]},l.prototype.descendants=function(a,p,b){p===void 0&&(p=0),b===void 0&&(b=Number.MAX_VALUE);var w=[],m=b;return this.children.forEachAt(p,b,function(f,g,c){(a.blotName==null&&a(f)||a.blotName!=null&&f instanceof a)&&w.push(f),f instanceof l&&(w=w.concat(f.descendants(a,g,m))),m-=c}),w},l.prototype.detach=function(){this.children.forEach(function(a){a.detach()}),d.prototype.detach.call(this)},l.prototype.formatAt=function(a,p,b,w){this.children.forEachAt(a,p,function(m,f,g){m.formatAt(f,g,b,w)})},l.prototype.insertAt=function(a,p,b){var w=this.children.find(a),m=w[0],f=w[1];if(m)m.insertAt(f,p,b);else{var g=b==null?h.create("text",p):h.create(p,b);this.appendChild(g)}},l.prototype.insertBefore=function(a,p){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(b){return a instanceof b}))throw new h.ParchmentError("Cannot insert "+a.statics.blotName+" into "+this.statics.blotName);a.insertInto(this,p)},l.prototype.length=function(){return this.children.reduce(function(a,p){return a+p.length()},0)},l.prototype.moveChildren=function(a,p){this.children.forEach(function(b){a.insertBefore(b,p)})},l.prototype.optimize=function(a){if(d.prototype.optimize.call(this,a),this.children.length===0)if(this.statics.defaultChild!=null){var p=h.create(this.statics.defaultChild);this.appendChild(p),p.optimize(a)}else this.remove()},l.prototype.path=function(a,p){p===void 0&&(p=!1);var b=this.children.find(a,p),w=b[0],m=b[1],f=[[this,a]];return w instanceof l?f.concat(w.path(m,p)):(w!=null&&f.push([w,m]),f)},l.prototype.removeChild=function(a){this.children.remove(a)},l.prototype.replace=function(a){a instanceof l&&a.moveChildren(this),d.prototype.replace.call(this,a)},l.prototype.split=function(a,p){if(p===void 0&&(p=!1),!p){if(a===0)return this;if(a===this.length())return this.next}var b=this.clone();return this.parent.insertBefore(b,this.next),this.children.forEachAt(a,this.length(),function(w,m,f){w=w.split(m,p),b.appendChild(w)}),b},l.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},l.prototype.update=function(a,p){var b=this,w=[],m=[];a.forEach(function(f){f.target===b.domNode&&f.type==="childList"&&(w.push.apply(w,f.addedNodes),m.push.apply(m,f.removedNodes))}),m.forEach(function(f){if(!(f.parentNode!=null&&f.tagName!=="IFRAME"&&document.body.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var g=h.find(f);g!=null&&(g.domNode.parentNode==null||g.domNode.parentNode===b.domNode)&&g.detach()}}),w.filter(function(f){return f.parentNode==b.domNode}).sort(function(f,g){return f===g?0:f.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(f){var g=null;f.nextSibling!=null&&(g=h.find(f.nextSibling));var c=v(f);(c.next!=g||c.next==null)&&(c.parent!=null&&c.parent.removeChild(b),b.insertBefore(c,g||void 0))})},l}(u.default);function v(d){var l=h.find(d);if(l==null)try{l=h.create(d)}catch{l=h.create(h.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(p){l.domNode.appendChild(p)}),d.parentNode&&d.parentNode.replaceChild(l.domNode,d),l.attach()}return l}n.default=y},function(t,n,r){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var p in a)a.hasOwnProperty(p)&&(l[p]=a[p])};return function(l,a){d(l,a);function p(){this.constructor=l}l.prototype=a===null?Object.create(a):(p.prototype=a.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(12),u=r(31),h=r(17),y=r(1),v=function(d){o(l,d);function l(a){var p=d.call(this,a)||this;return p.attributes=new u.default(p.domNode),p}return l.formats=function(a){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return a.tagName.toLowerCase()},l.prototype.format=function(a,p){var b=y.query(a);b instanceof s.default?this.attributes.attribute(b,p):p&&b!=null&&(a!==this.statics.blotName||this.formats()[a]!==p)&&this.replaceWith(a,p)},l.prototype.formats=function(){var a=this.attributes.values(),p=this.statics.formats(this.domNode);return p!=null&&(a[this.statics.blotName]=p),a},l.prototype.replaceWith=function(a,p){var b=d.prototype.replaceWith.call(this,a,p);return this.attributes.copy(b),b},l.prototype.update=function(a,p){var b=this;d.prototype.update.call(this,a,p),a.some(function(w){return w.target===b.domNode&&w.type==="attributes"})&&this.attributes.build()},l.prototype.wrap=function(a,p){var b=d.prototype.wrap.call(this,a,p);return b instanceof l&&b.statics.scope===this.statics.scope&&this.attributes.move(b),b},l}(h.default);n.default=v},function(t,n,r){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,d){v.__proto__=d}||function(v,d){for(var l in d)d.hasOwnProperty(l)&&(v[l]=d[l])};return function(v,d){y(v,d);function l(){this.constructor=v}v.prototype=d===null?Object.create(d):(l.prototype=d.prototype,new l)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(30),u=r(1),h=function(y){o(v,y);function v(){return y!==null&&y.apply(this,arguments)||this}return v.value=function(d){return!0},v.prototype.index=function(d,l){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(l,1):-1},v.prototype.position=function(d,l){var a=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(a+=1),[this.parent.domNode,a]},v.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},v.scope=u.Scope.INLINE_BLOT,v}(s.default);n.default=h},function(t,n,r){var o=r(11),s=r(3),u={attributes:{compose:function(y,v,d){typeof y!="object"&&(y={}),typeof v!="object"&&(v={});var l=s(!0,{},v);d||(l=Object.keys(l).reduce(function(p,b){return l[b]!=null&&(p[b]=l[b]),p},{}));for(var a in y)y[a]!==void 0&&v[a]===void 0&&(l[a]=y[a]);return Object.keys(l).length>0?l:void 0},diff:function(y,v){typeof y!="object"&&(y={}),typeof v!="object"&&(v={});var d=Object.keys(y).concat(Object.keys(v)).reduce(function(l,a){return o(y[a],v[a])||(l[a]=v[a]===void 0?null:v[a]),l},{});return Object.keys(d).length>0?d:void 0},transform:function(y,v,d){if(typeof y!="object")return v;if(typeof v=="object"){if(!d)return v;var l=Object.keys(v).reduce(function(a,p){return y[p]===void 0&&(a[p]=v[p]),a},{});return Object.keys(l).length>0?l:void 0}}},iterator:function(y){return new h(y)},length:function(y){return typeof y.delete=="number"?y.delete:typeof y.retain=="number"?y.retain:typeof y.insert=="string"?y.insert.length:1}};function h(y){this.ops=y,this.index=0,this.offset=0}h.prototype.hasNext=function(){return this.peekLength()<1/0},h.prototype.next=function(y){y||(y=1/0);var v=this.ops[this.index];if(v){var d=this.offset,l=u.length(v);if(y>=l-d?(y=l-d,this.index+=1,this.offset=0):this.offset+=y,typeof v.delete=="number")return{delete:y};var a={};return v.attributes&&(a.attributes=v.attributes),typeof v.retain=="number"?a.retain=y:typeof v.insert=="string"?a.insert=v.insert.substr(d,y):a.insert=v.insert,a}else return{retain:1/0}},h.prototype.peek=function(){return this.ops[this.index]},h.prototype.peekLength=function(){return this.ops[this.index]?u.length(this.ops[this.index])-this.offset:1/0},h.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},h.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var y=this.offset,v=this.index,d=this.next(),l=this.ops.slice(this.index);return this.offset=y,this.index=v,[d].concat(l)}else return[]},t.exports=u},function(t,n){var r=function(){function o(b,w){return w!=null&&b instanceof w}var s;try{s=Map}catch{s=function(){}}var u;try{u=Set}catch{u=function(){}}var h;try{h=Promise}catch{h=function(){}}function y(b,w,m,f,g){typeof w=="object"&&(m=w.depth,f=w.prototype,g=w.includeNonEnumerable,w=w.circular);var c=[],T=[],A=typeof Buffer<"u";typeof w>"u"&&(w=!0),typeof m>"u"&&(m=1/0);function _(S,I){if(S===null)return null;if(I===0)return S;var O,E;if(typeof S!="object")return S;if(o(S,s))O=new s;else if(o(S,u))O=new u;else if(o(S,h))O=new h(function(B,P){S.then(function(L){B(_(L,I-1))},function(L){P(_(L,I-1))})});else if(y.__isArray(S))O=[];else if(y.__isRegExp(S))O=new RegExp(S.source,p(S)),S.lastIndex&&(O.lastIndex=S.lastIndex);else if(y.__isDate(S))O=new Date(S.getTime());else{if(A&&Buffer.isBuffer(S))return Buffer.allocUnsafe?O=Buffer.allocUnsafe(S.length):O=new Buffer(S.length),S.copy(O),O;o(S,Error)?O=Object.create(S):typeof f>"u"?(E=Object.getPrototypeOf(S),O=Object.create(E)):(O=Object.create(f),E=f)}if(w){var k=c.indexOf(S);if(k!=-1)return T[k];c.push(S),T.push(O)}o(S,s)&&S.forEach(function(B,P){var L=_(P,I-1),D=_(B,I-1);O.set(L,D)}),o(S,u)&&S.forEach(function(B){var P=_(B,I-1);O.add(P)});for(var x in S){var N;E&&(N=Object.getOwnPropertyDescriptor(E,x)),!(N&&N.set==null)&&(O[x]=_(S[x],I-1))}if(Object.getOwnPropertySymbols)for(var C=Object.getOwnPropertySymbols(S),x=0;x<C.length;x++){var M=C[x],j=Object.getOwnPropertyDescriptor(S,M);j&&!j.enumerable&&!g||(O[M]=_(S[M],I-1),j.enumerable||Object.defineProperty(O,M,{enumerable:!1}))}if(g)for(var Q=Object.getOwnPropertyNames(S),x=0;x<Q.length;x++){var $=Q[x],j=Object.getOwnPropertyDescriptor(S,$);j&&j.enumerable||(O[$]=_(S[$],I-1),Object.defineProperty(O,$,{enumerable:!1}))}return O}return _(b,m)}y.clonePrototype=function(w){if(w===null)return null;var m=function(){};return m.prototype=w,new m};function v(b){return Object.prototype.toString.call(b)}y.__objToStr=v;function d(b){return typeof b=="object"&&v(b)==="[object Date]"}y.__isDate=d;function l(b){return typeof b=="object"&&v(b)==="[object Array]"}y.__isArray=l;function a(b){return typeof b=="object"&&v(b)==="[object RegExp]"}y.__isRegExp=a;function p(b){var w="";return b.global&&(w+="g"),b.ignoreCase&&(w+="i"),b.multiline&&(w+="m"),w}return y.__getRegExpFlags=p,y}();typeof t=="object"&&t.exports&&(t.exports=r)},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function O(E,k){var x=[],N=!0,C=!1,M=void 0;try{for(var j=E[Symbol.iterator](),Q;!(N=(Q=j.next()).done)&&(x.push(Q.value),!(k&&x.length===k));N=!0);}catch($){C=!0,M=$}finally{try{!N&&j.return&&j.return()}finally{if(C)throw M}}return x}return function(E,k){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return O(E,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function O(E,k){for(var x=0;x<k.length;x++){var N=k[x];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(E,N.key,N)}}return function(E,k,x){return k&&O(E.prototype,k),x&&O(E,x),E}}(),u=function O(E,k,x){E===null&&(E=Function.prototype);var N=Object.getOwnPropertyDescriptor(E,k);if(N===void 0){var C=Object.getPrototypeOf(E);return C===null?void 0:O(C,k,x)}else{if("value"in N)return N.value;var M=N.get;return M===void 0?void 0:M.call(x)}},h=r(0),y=c(h),v=r(8),d=c(v),l=r(4),a=c(l),p=r(16),b=c(p),w=r(13),m=c(w),f=r(25),g=c(f);function c(O){return O&&O.__esModule?O:{default:O}}function T(O,E){if(!(O instanceof E))throw new TypeError("Cannot call a class as a function")}function A(O,E){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:O}function _(O,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);O.prototype=Object.create(E&&E.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(O,E):O.__proto__=E)}function S(O){return O instanceof a.default||O instanceof l.BlockEmbed}var I=function(O){_(E,O);function E(k,x){T(this,E);var N=A(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,k));return N.emitter=x.emitter,Array.isArray(x.whitelist)&&(N.whitelist=x.whitelist.reduce(function(C,M){return C[M]=!0,C},{})),N.domNode.addEventListener("DOMNodeInserted",function(){}),N.optimize(),N.enable(),N}return s(E,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(x,N){var C=this.line(x),M=o(C,2),j=M[0],Q=M[1],$=this.line(x+N),B=o($,1),P=B[0];if(u(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,x,N),P!=null&&j!==P&&Q>0){if(j instanceof l.BlockEmbed||P instanceof l.BlockEmbed){this.optimize();return}if(j instanceof m.default){var L=j.newlineIndex(j.length(),!0);if(L>-1&&(j=j.split(L+1),j===P)){this.optimize();return}}else if(P instanceof m.default){var D=P.newlineIndex(0);D>-1&&P.split(D+1)}var K=P.children.head instanceof b.default?null:P.children.head;j.moveChildren(P,K),j.remove()}this.optimize()}},{key:"enable",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",x)}},{key:"formatAt",value:function(x,N,C,M){this.whitelist!=null&&!this.whitelist[C]||(u(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,x,N,C,M),this.optimize())}},{key:"insertAt",value:function(x,N,C){if(!(C!=null&&this.whitelist!=null&&!this.whitelist[N])){if(x>=this.length())if(C==null||y.default.query(N,y.default.Scope.BLOCK)==null){var M=y.default.create(this.statics.defaultChild);this.appendChild(M),C==null&&N.endsWith(`
`)&&(N=N.slice(0,-1)),M.insertAt(0,N,C)}else{var j=y.default.create(N,C);this.appendChild(j)}else u(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,x,N,C);this.optimize()}}},{key:"insertBefore",value:function(x,N){if(x.statics.scope===y.default.Scope.INLINE_BLOT){var C=y.default.create(this.statics.defaultChild);C.appendChild(x),x=C}u(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,x,N)}},{key:"leaf",value:function(x){return this.path(x).pop()||[null,-1]}},{key:"line",value:function(x){return x===this.length()?this.line(x-1):this.descendant(S,x)}},{key:"lines",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,C=function M(j,Q,$){var B=[],P=$;return j.children.forEachAt(Q,$,function(L,D,K){S(L)?B.push(L):L instanceof y.default.Container&&(B=B.concat(M(L,D,P))),P-=K}),B};return C(this,x,N)}},{key:"optimize",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(u(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,x,N),x.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,x,N))}},{key:"path",value:function(x){return u(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,x).slice(1)}},{key:"update",value:function(x){if(this.batch!==!0){var N=d.default.sources.USER;typeof x=="string"&&(N=x),Array.isArray(x)||(x=this.observer.takeRecords()),x.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,N,x),u(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"update",this).call(this,x.concat([])),x.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,N,x)}}}]),E}(y.default.Scroll);I.blotName="scroll",I.className="ql-editor",I.tagName="DIV",I.defaultChild="block",I.allowedChildren=[a.default,l.BlockEmbed,g.default],n.default=I},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},s=function(){function R(U,H){var Z=[],ie=!0,fe=!1,be=void 0;try{for(var me=U[Symbol.iterator](),ve;!(ie=(ve=me.next()).done)&&(Z.push(ve.value),!(H&&Z.length===H));ie=!0);}catch(F){fe=!0,be=F}finally{try{!ie&&me.return&&me.return()}finally{if(fe)throw be}}return Z}return function(U,H){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return R(U,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function R(U,H){for(var Z=0;Z<H.length;Z++){var ie=H[Z];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(U,ie.key,ie)}}return function(U,H,Z){return H&&R(U.prototype,H),Z&&R(U,Z),U}}(),h=r(21),y=O(h),v=r(11),d=O(v),l=r(3),a=O(l),p=r(2),b=O(p),w=r(20),m=O(w),f=r(0),g=O(f),c=r(5),T=O(c),A=r(10),_=O(A),S=r(9),I=O(S);function O(R){return R&&R.__esModule?R:{default:R}}function E(R,U,H){return U in R?Object.defineProperty(R,U,{value:H,enumerable:!0,configurable:!0,writable:!0}):R[U]=H,R}function k(R,U){if(!(R instanceof U))throw new TypeError("Cannot call a class as a function")}function x(R,U){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:R}function N(R,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);R.prototype=Object.create(U&&U.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(R,U):R.__proto__=U)}var C=(0,_.default)("quill:keyboard"),M=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",j=function(R){N(U,R),u(U,null,[{key:"match",value:function(Z,ie){return ie=z(ie),["altKey","ctrlKey","metaKey","shiftKey"].some(function(fe){return!!ie[fe]!==Z[fe]&&ie[fe]!==null})?!1:ie.key===(Z.which||Z.keyCode)}}]);function U(H,Z){k(this,U);var ie=x(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,H,Z));return ie.bindings={},Object.keys(ie.options.bindings).forEach(function(fe){fe==="list autofill"&&H.scroll.whitelist!=null&&!H.scroll.whitelist.list||ie.options.bindings[fe]&&ie.addBinding(ie.options.bindings[fe])}),ie.addBinding({key:U.keys.ENTER,shiftKey:null},L),ie.addBinding({key:U.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ie.addBinding({key:U.keys.BACKSPACE},{collapsed:!0},$),ie.addBinding({key:U.keys.DELETE},{collapsed:!0},B)):(ie.addBinding({key:U.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},$),ie.addBinding({key:U.keys.DELETE},{collapsed:!0,suffix:/^.?$/},B)),ie.addBinding({key:U.keys.BACKSPACE},{collapsed:!1},P),ie.addBinding({key:U.keys.DELETE},{collapsed:!1},P),ie.addBinding({key:U.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},$),ie.listen(),ie}return u(U,[{key:"addBinding",value:function(Z){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},be=z(Z);if(be==null||be.key==null)return C.warn("Attempted to add invalid keyboard binding",be);typeof ie=="function"&&(ie={handler:ie}),typeof fe=="function"&&(fe={handler:fe}),be=(0,a.default)(be,ie,fe),this.bindings[be.key]=this.bindings[be.key]||[],this.bindings[be.key].push(be)}},{key:"listen",value:function(){var Z=this;this.quill.root.addEventListener("keydown",function(ie){if(!ie.defaultPrevented){var fe=ie.which||ie.keyCode,be=(Z.bindings[fe]||[]).filter(function(ce){return U.match(ie,ce)});if(be.length!==0){var me=Z.quill.getSelection();if(!(me==null||!Z.quill.hasFocus())){var ve=Z.quill.getLine(me.index),F=s(ve,2),X=F[0],G=F[1],q=Z.quill.getLeaf(me.index),W=s(q,2),se=W[0],ue=W[1],re=me.length===0?[se,ue]:Z.quill.getLeaf(me.index+me.length),ge=s(re,2),ye=ge[0],Oe=ge[1],Fe=se instanceof g.default.Text?se.value().slice(0,ue):"",Ue=ye instanceof g.default.Text?ye.value().slice(Oe):"",xe={collapsed:me.length===0,empty:me.length===0&&X.length()<=1,format:Z.quill.getFormat(me),offset:G,prefix:Fe,suffix:Ue},Pe=be.some(function(ce){if(ce.collapsed!=null&&ce.collapsed!==xe.collapsed||ce.empty!=null&&ce.empty!==xe.empty||ce.offset!=null&&ce.offset!==xe.offset)return!1;if(Array.isArray(ce.format)){if(ce.format.every(function(De){return xe.format[De]==null}))return!1}else if(o(ce.format)==="object"&&!Object.keys(ce.format).every(function(De){return ce.format[De]===!0?xe.format[De]!=null:ce.format[De]===!1?xe.format[De]==null:(0,d.default)(ce.format[De],xe.format[De])}))return!1;return ce.prefix!=null&&!ce.prefix.test(xe.prefix)||ce.suffix!=null&&!ce.suffix.test(xe.suffix)?!1:ce.handler.call(Z,me,xe)!==!0});Pe&&ie.preventDefault()}}}})}}]),U}(I.default);j.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},j.DEFAULTS={bindings:{bold:K("bold"),italic:K("italic"),underline:K("underline"),indent:{key:j.keys.TAB,format:["blockquote","indent","list"],handler:function(U,H){if(H.collapsed&&H.offset!==0)return!0;this.quill.format("indent","+1",T.default.sources.USER)}},outdent:{key:j.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(U,H){if(H.collapsed&&H.offset!==0)return!0;this.quill.format("indent","-1",T.default.sources.USER)}},"outdent backspace":{key:j.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(U,H){H.format.indent!=null?this.quill.format("indent","-1",T.default.sources.USER):H.format.list!=null&&this.quill.format("list",!1,T.default.sources.USER)}},"indent code-block":D(!0),"outdent code-block":D(!1),"remove tab":{key:j.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(U){this.quill.deleteText(U.index-1,1,T.default.sources.USER)}},tab:{key:j.keys.TAB,handler:function(U){this.quill.history.cutoff();var H=new b.default().retain(U.index).delete(U.length).insert("	");this.quill.updateContents(H,T.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(U.index+1,T.default.sources.SILENT)}},"list empty enter":{key:j.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(U,H){this.quill.format("list",!1,T.default.sources.USER),H.format.indent&&this.quill.format("indent",!1,T.default.sources.USER)}},"checklist enter":{key:j.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(U){var H=this.quill.getLine(U.index),Z=s(H,2),ie=Z[0],fe=Z[1],be=(0,a.default)({},ie.formats(),{list:"checked"}),me=new b.default().retain(U.index).insert(`
`,be).retain(ie.length()-fe-1).retain(1,{list:"unchecked"});this.quill.updateContents(me,T.default.sources.USER),this.quill.setSelection(U.index+1,T.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:j.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(U,H){var Z=this.quill.getLine(U.index),ie=s(Z,2),fe=ie[0],be=ie[1],me=new b.default().retain(U.index).insert(`
`,H.format).retain(fe.length()-be-1).retain(1,{header:null});this.quill.updateContents(me,T.default.sources.USER),this.quill.setSelection(U.index+1,T.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(U,H){var Z=H.prefix.length,ie=this.quill.getLine(U.index),fe=s(ie,2),be=fe[0],me=fe[1];if(me>Z)return!0;var ve=void 0;switch(H.prefix.trim()){case"[]":case"[ ]":ve="unchecked";break;case"[x]":ve="checked";break;case"-":case"*":ve="bullet";break;default:ve="ordered"}this.quill.insertText(U.index," ",T.default.sources.USER),this.quill.history.cutoff();var F=new b.default().retain(U.index-me).delete(Z+1).retain(be.length()-2-me).retain(1,{list:ve});this.quill.updateContents(F,T.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(U.index-Z,T.default.sources.SILENT)}},"code exit":{key:j.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(U){var H=this.quill.getLine(U.index),Z=s(H,2),ie=Z[0],fe=Z[1],be=new b.default().retain(U.index+ie.length()-fe-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(be,T.default.sources.USER)}},"embed left":Q(j.keys.LEFT,!1),"embed left shift":Q(j.keys.LEFT,!0),"embed right":Q(j.keys.RIGHT,!1),"embed right shift":Q(j.keys.RIGHT,!0)}};function Q(R,U){var H,Z=R===j.keys.LEFT?"prefix":"suffix";return H={key:R,shiftKey:U,altKey:null},E(H,Z,/^$/),E(H,"handler",function(fe){var be=fe.index;R===j.keys.RIGHT&&(be+=fe.length+1);var me=this.quill.getLeaf(be),ve=s(me,1),F=ve[0];return F instanceof g.default.Embed?(R===j.keys.LEFT?U?this.quill.setSelection(fe.index-1,fe.length+1,T.default.sources.USER):this.quill.setSelection(fe.index-1,T.default.sources.USER):U?this.quill.setSelection(fe.index,fe.length+1,T.default.sources.USER):this.quill.setSelection(fe.index+fe.length+1,T.default.sources.USER),!1):!0}),H}function $(R,U){if(!(R.index===0||this.quill.getLength()<=1)){var H=this.quill.getLine(R.index),Z=s(H,1),ie=Z[0],fe={};if(U.offset===0){var be=this.quill.getLine(R.index-1),me=s(be,1),ve=me[0];if(ve!=null&&ve.length()>1){var F=ie.formats(),X=this.quill.getFormat(R.index-1,1);fe=m.default.attributes.diff(F,X)||{}}}var G=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(U.prefix)?2:1;this.quill.deleteText(R.index-G,G,T.default.sources.USER),Object.keys(fe).length>0&&this.quill.formatLine(R.index-G,G,fe,T.default.sources.USER),this.quill.focus()}}function B(R,U){var H=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(U.suffix)?2:1;if(!(R.index>=this.quill.getLength()-H)){var Z={},ie=0,fe=this.quill.getLine(R.index),be=s(fe,1),me=be[0];if(U.offset>=me.length()-1){var ve=this.quill.getLine(R.index+1),F=s(ve,1),X=F[0];if(X){var G=me.formats(),q=this.quill.getFormat(R.index,1);Z=m.default.attributes.diff(G,q)||{},ie=X.length()}}this.quill.deleteText(R.index,H,T.default.sources.USER),Object.keys(Z).length>0&&this.quill.formatLine(R.index+ie-1,H,Z,T.default.sources.USER)}}function P(R){var U=this.quill.getLines(R),H={};if(U.length>1){var Z=U[0].formats(),ie=U[U.length-1].formats();H=m.default.attributes.diff(ie,Z)||{}}this.quill.deleteText(R,T.default.sources.USER),Object.keys(H).length>0&&this.quill.formatLine(R.index,1,H,T.default.sources.USER),this.quill.setSelection(R.index,T.default.sources.SILENT),this.quill.focus()}function L(R,U){var H=this;R.length>0&&this.quill.scroll.deleteAt(R.index,R.length);var Z=Object.keys(U.format).reduce(function(ie,fe){return g.default.query(fe,g.default.Scope.BLOCK)&&!Array.isArray(U.format[fe])&&(ie[fe]=U.format[fe]),ie},{});this.quill.insertText(R.index,`
`,Z,T.default.sources.USER),this.quill.setSelection(R.index+1,T.default.sources.SILENT),this.quill.focus(),Object.keys(U.format).forEach(function(ie){Z[ie]==null&&(Array.isArray(U.format[ie])||ie!=="link"&&H.quill.format(ie,U.format[ie],T.default.sources.USER))})}function D(R){return{key:j.keys.TAB,shiftKey:!R,format:{"code-block":!0},handler:function(H){var Z=g.default.query("code-block"),ie=H.index,fe=H.length,be=this.quill.scroll.descendant(Z,ie),me=s(be,2),ve=me[0],F=me[1];if(ve!=null){var X=this.quill.getIndex(ve),G=ve.newlineIndex(F,!0)+1,q=ve.newlineIndex(X+F+fe),W=ve.domNode.textContent.slice(G,q).split(`
`);F=0,W.forEach(function(se,ue){R?(ve.insertAt(G+F,Z.TAB),F+=Z.TAB.length,ue===0?ie+=Z.TAB.length:fe+=Z.TAB.length):se.startsWith(Z.TAB)&&(ve.deleteAt(G+F,Z.TAB.length),F-=Z.TAB.length,ue===0?ie-=Z.TAB.length:fe-=Z.TAB.length),F+=se.length+1}),this.quill.update(T.default.sources.USER),this.quill.setSelection(ie,fe,T.default.sources.SILENT)}}}}function K(R){return{key:R[0].toUpperCase(),shortKey:!0,handler:function(H,Z){this.quill.format(R,!Z.format[R],T.default.sources.USER)}}}function z(R){if(typeof R=="string"||typeof R=="number")return z({key:R});if((typeof R>"u"?"undefined":o(R))==="object"&&(R=(0,y.default)(R,!1)),typeof R.key=="string")if(j.keys[R.key.toUpperCase()]!=null)R.key=j.keys[R.key.toUpperCase()];else if(R.key.length===1)R.key=R.key.toUpperCase().charCodeAt(0);else return null;return R.shortKey&&(R[M]=R.shortKey,delete R.shortKey),R}n.default=j,n.SHORTKEY=M},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function m(f,g){var c=[],T=!0,A=!1,_=void 0;try{for(var S=f[Symbol.iterator](),I;!(T=(I=S.next()).done)&&(c.push(I.value),!(g&&c.length===g));T=!0);}catch(O){A=!0,_=O}finally{try{!T&&S.return&&S.return()}finally{if(A)throw _}}return c}return function(f,g){if(Array.isArray(f))return f;if(Symbol.iterator in Object(f))return m(f,g);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function m(f,g,c){f===null&&(f=Function.prototype);var T=Object.getOwnPropertyDescriptor(f,g);if(T===void 0){var A=Object.getPrototypeOf(f);return A===null?void 0:m(A,g,c)}else{if("value"in T)return T.value;var _=T.get;return _===void 0?void 0:_.call(c)}},u=function(){function m(f,g){for(var c=0;c<g.length;c++){var T=g[c];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(f,T.key,T)}}return function(f,g,c){return g&&m(f.prototype,g),c&&m(f,c),f}}(),h=r(0),y=l(h),v=r(7),d=l(v);function l(m){return m&&m.__esModule?m:{default:m}}function a(m,f){if(!(m instanceof f))throw new TypeError("Cannot call a class as a function")}function p(m,f){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:m}function b(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);m.prototype=Object.create(f&&f.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(m,f):m.__proto__=f)}var w=function(m){b(f,m),u(f,null,[{key:"value",value:function(){}}]);function f(g,c){a(this,f);var T=p(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,g));return T.selection=c,T.textNode=document.createTextNode(f.CONTENTS),T.domNode.appendChild(T.textNode),T._length=0,T}return u(f,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(c,T){if(this._length!==0)return s(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"format",this).call(this,c,T);for(var A=this,_=0;A!=null&&A.statics.scope!==y.default.Scope.BLOCK_BLOT;)_+=A.offset(A.parent),A=A.parent;A!=null&&(this._length=f.CONTENTS.length,A.optimize(),A.formatAt(_,f.CONTENTS.length,c,T),this._length=0)}},{key:"index",value:function(c,T){return c===this.textNode?0:s(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"index",this).call(this,c,T)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var c=this.textNode,T=this.selection.getNativeRange(),A=void 0,_=void 0,S=void 0;if(T!=null&&T.start.node===c&&T.end.node===c){var I=[c,T.start.offset,T.end.offset];A=I[0],_=I[1],S=I[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==f.CONTENTS){var O=this.textNode.data.split(f.CONTENTS).join("");this.next instanceof d.default?(A=this.next.domNode,this.next.insertAt(0,O),this.textNode.data=f.CONTENTS):(this.textNode.data=O,this.parent.insertBefore(y.default.create(this.textNode),this),this.textNode=document.createTextNode(f.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),_!=null){var E=[_,S].map(function(x){return Math.max(0,Math.min(A.data.length,x-1))}),k=o(E,2);return _=k[0],S=k[1],{startNode:A,startOffset:_,endNode:A,endOffset:S}}}}},{key:"update",value:function(c,T){var A=this;if(c.some(function(S){return S.type==="characterData"&&S.target===A.textNode})){var _=this.restore();_&&(T.range=_)}}},{key:"value",value:function(){return""}}]),f}(y.default.Embed);w.blotName="cursor",w.className="ql-cursor",w.tagName="span",w.CONTENTS="\uFEFF",n.default=w},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(0),s=y(o),u=r(4),h=y(u);function y(p){return p&&p.__esModule?p:{default:p}}function v(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function d(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function l(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var a=function(p){l(b,p);function b(){return v(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return b}(s.default.Container);a.allowedChildren=[h.default,u.BlockEmbed,a],n.default=a},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var o=function(){function w(m,f){for(var g=0;g<f.length;g++){var c=f[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(m,c.key,c)}}return function(m,f,g){return f&&w(m.prototype,f),g&&w(m,g),m}}(),s=function w(m,f,g){m===null&&(m=Function.prototype);var c=Object.getOwnPropertyDescriptor(m,f);if(c===void 0){var T=Object.getPrototypeOf(m);return T===null?void 0:w(T,f,g)}else{if("value"in c)return c.value;var A=c.get;return A===void 0?void 0:A.call(g)}},u=r(0),h=y(u);function y(w){return w&&w.__esModule?w:{default:w}}function v(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}function d(w,m){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:w}function l(w,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);w.prototype=Object.create(m&&m.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(w,m):w.__proto__=m)}var a=function(w){l(m,w);function m(){return v(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"value",value:function(g){var c=s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,g);return c.startsWith("rgb(")?(c=c.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+c.split(",").map(function(T){return("00"+parseInt(T).toString(16)).slice(-2)}).join("")):c}}]),m}(h.default.Attributor.Style),p=new h.default.Attributor.Class("color","ql-color",{scope:h.default.Scope.INLINE}),b=new a("color","color",{scope:h.default.Scope.INLINE});n.ColorAttributor=a,n.ColorClass=p,n.ColorStyle=b},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var o=function(){function b(w,m){for(var f=0;f<m.length;f++){var g=m[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(w,g.key,g)}}return function(w,m,f){return m&&b(w.prototype,m),f&&b(w,f),w}}(),s=function b(w,m,f){w===null&&(w=Function.prototype);var g=Object.getOwnPropertyDescriptor(w,m);if(g===void 0){var c=Object.getPrototypeOf(w);return c===null?void 0:b(c,m,f)}else{if("value"in g)return g.value;var T=g.get;return T===void 0?void 0:T.call(f)}},u=r(6),h=y(u);function y(b){return b&&b.__esModule?b:{default:b}}function v(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function d(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function l(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var a=function(b){l(w,b);function w(){return v(this,w),d(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return o(w,[{key:"format",value:function(f,g){if(f!==this.statics.blotName||!g)return s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,f,g);g=this.constructor.sanitize(g),this.domNode.setAttribute("href",g)}}],[{key:"create",value:function(f){var g=s(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,f);return f=this.sanitize(f),g.setAttribute("href",f),g.setAttribute("rel","noopener noreferrer"),g.setAttribute("target","_blank"),g}},{key:"formats",value:function(f){return f.getAttribute("href")}},{key:"sanitize",value:function(f){return p(f,this.PROTOCOL_WHITELIST)?f:this.SANITIZED_URL}}]),w}(h.default);a.blotName="link",a.tagName="A",a.SANITIZED_URL="about:blank",a.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function p(b,w){var m=document.createElement("a");m.href=b;var f=m.href.slice(0,m.href.indexOf(":"));return w.indexOf(f)>-1}n.default=a,n.sanitize=p},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},s=function(){function w(m,f){for(var g=0;g<f.length;g++){var c=f[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(m,c.key,c)}}return function(m,f,g){return f&&w(m.prototype,f),g&&w(m,g),m}}(),u=r(23),h=d(u),y=r(107),v=d(y);function d(w){return w&&w.__esModule?w:{default:w}}function l(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}var a=0;function p(w,m){w.setAttribute(m,w.getAttribute(m)!=="true")}var b=function(){function w(m){var f=this;l(this,w),this.select=m,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){f.togglePicker()}),this.label.addEventListener("keydown",function(g){switch(g.keyCode){case h.default.keys.ENTER:f.togglePicker();break;case h.default.keys.ESCAPE:f.escape(),g.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return s(w,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),p(this.label,"aria-expanded"),p(this.options,"aria-hidden")}},{key:"buildItem",value:function(f){var g=this,c=document.createElement("span");return c.tabIndex="0",c.setAttribute("role","button"),c.classList.add("ql-picker-item"),f.hasAttribute("value")&&c.setAttribute("data-value",f.getAttribute("value")),f.textContent&&c.setAttribute("data-label",f.textContent),c.addEventListener("click",function(){g.selectItem(c,!0)}),c.addEventListener("keydown",function(T){switch(T.keyCode){case h.default.keys.ENTER:g.selectItem(c,!0),T.preventDefault();break;case h.default.keys.ESCAPE:g.escape(),T.preventDefault();break}}),c}},{key:"buildLabel",value:function(){var f=document.createElement("span");return f.classList.add("ql-picker-label"),f.innerHTML=v.default,f.tabIndex="0",f.setAttribute("role","button"),f.setAttribute("aria-expanded","false"),this.container.appendChild(f),f}},{key:"buildOptions",value:function(){var f=this,g=document.createElement("span");g.classList.add("ql-picker-options"),g.setAttribute("aria-hidden","true"),g.tabIndex="-1",g.id="ql-picker-options-"+a,a+=1,this.label.setAttribute("aria-controls",g.id),this.options=g,[].slice.call(this.select.options).forEach(function(c){var T=f.buildItem(c);g.appendChild(T),c.selected===!0&&f.selectItem(T)}),this.container.appendChild(g)}},{key:"buildPicker",value:function(){var f=this;[].slice.call(this.select.attributes).forEach(function(g){f.container.setAttribute(g.name,g.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var f=this;this.close(),setTimeout(function(){return f.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(f){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=this.container.querySelector(".ql-selected");if(f!==c&&(c!=null&&c.classList.remove("ql-selected"),f!=null&&(f.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(f.parentNode.children,f),f.hasAttribute("data-value")?this.label.setAttribute("data-value",f.getAttribute("data-value")):this.label.removeAttribute("data-value"),f.hasAttribute("data-label")?this.label.setAttribute("data-label",f.getAttribute("data-label")):this.label.removeAttribute("data-label"),g))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":o(Event))==="object"){var T=document.createEvent("Event");T.initEvent("change",!0,!0),this.select.dispatchEvent(T)}this.close()}}},{key:"update",value:function(){var f=void 0;if(this.select.selectedIndex>-1){var g=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];f=this.select.options[this.select.selectedIndex],this.selectItem(g)}else this.selectItem(null);var c=f!=null&&f!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",c)}}]),w}();n.default=b},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(0),s=C(o),u=r(5),h=C(u),y=r(4),v=C(y),d=r(16),l=C(d),a=r(25),p=C(a),b=r(24),w=C(b),m=r(35),f=C(m),g=r(6),c=C(g),T=r(22),A=C(T),_=r(7),S=C(_),I=r(55),O=C(I),E=r(42),k=C(E),x=r(23),N=C(x);function C(M){return M&&M.__esModule?M:{default:M}}h.default.register({"blots/block":v.default,"blots/block/embed":y.BlockEmbed,"blots/break":l.default,"blots/container":p.default,"blots/cursor":w.default,"blots/embed":f.default,"blots/inline":c.default,"blots/scroll":A.default,"blots/text":S.default,"modules/clipboard":O.default,"modules/history":k.default,"modules/keyboard":N.default}),s.default.register(v.default,l.default,w.default,c.default,A.default,S.default),n.default=h.default},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(1),s=function(){function u(h){this.domNode=h,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(u.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),u.create=function(h){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var y;return Array.isArray(this.tagName)?(typeof h=="string"&&(h=h.toUpperCase(),parseInt(h).toString()===h&&(h=parseInt(h))),typeof h=="number"?y=document.createElement(this.tagName[h-1]):this.tagName.indexOf(h)>-1?y=document.createElement(h):y=document.createElement(this.tagName[0])):y=document.createElement(this.tagName),this.className&&y.classList.add(this.className),y},u.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},u.prototype.clone=function(){var h=this.domNode.cloneNode(!1);return o.create(h)},u.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},u.prototype.deleteAt=function(h,y){var v=this.isolate(h,y);v.remove()},u.prototype.formatAt=function(h,y,v,d){var l=this.isolate(h,y);if(o.query(v,o.Scope.BLOT)!=null&&d)l.wrap(v,d);else if(o.query(v,o.Scope.ATTRIBUTE)!=null){var a=o.create(this.statics.scope);l.wrap(a),a.format(v,d)}},u.prototype.insertAt=function(h,y,v){var d=v==null?o.create("text",y):o.create(y,v),l=this.split(h);this.parent.insertBefore(d,l)},u.prototype.insertInto=function(h,y){y===void 0&&(y=null),this.parent!=null&&this.parent.children.remove(this);var v=null;h.children.insertBefore(this,y),y!=null&&(v=y.domNode),(this.domNode.parentNode!=h.domNode||this.domNode.nextSibling!=v)&&h.domNode.insertBefore(this.domNode,v),this.parent=h,this.attach()},u.prototype.isolate=function(h,y){var v=this.split(h);return v.split(y),v},u.prototype.length=function(){return 1},u.prototype.offset=function(h){return h===void 0&&(h=this.parent),this.parent==null||this==h?0:this.parent.children.offset(this)+this.parent.offset(h)},u.prototype.optimize=function(h){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},u.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},u.prototype.replace=function(h){h.parent!=null&&(h.parent.insertBefore(this,h.next),h.remove())},u.prototype.replaceWith=function(h,y){var v=typeof h=="string"?o.create(h,y):h;return v.replace(this),v},u.prototype.split=function(h,y){return h===0?this:this.next},u.prototype.update=function(h,y){},u.prototype.wrap=function(h,y){var v=typeof h=="string"?o.create(h,y):h;return this.parent!=null&&this.parent.insertBefore(v,this.next),v.appendChild(this),v},u.blotName="abstract",u}();n.default=s},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(12),s=r(32),u=r(33),h=r(1),y=function(){function v(d){this.attributes={},this.domNode=d,this.build()}return v.prototype.attribute=function(d,l){l?d.add(this.domNode,l)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},v.prototype.build=function(){var d=this;this.attributes={};var l=o.default.keys(this.domNode),a=s.default.keys(this.domNode),p=u.default.keys(this.domNode);l.concat(a).concat(p).forEach(function(b){var w=h.query(b,h.Scope.ATTRIBUTE);w instanceof o.default&&(d.attributes[w.attrName]=w)})},v.prototype.copy=function(d){var l=this;Object.keys(this.attributes).forEach(function(a){var p=l.attributes[a].value(l.domNode);d.format(a,p)})},v.prototype.move=function(d){var l=this;this.copy(d),Object.keys(this.attributes).forEach(function(a){l.attributes[a].remove(l.domNode)}),this.attributes={}},v.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(l,a){return l[a]=d.attributes[a].value(d.domNode),l},{})},v}();n.default=y},function(t,n,r){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,d){v.__proto__=d}||function(v,d){for(var l in d)d.hasOwnProperty(l)&&(v[l]=d[l])};return function(v,d){y(v,d);function l(){this.constructor=v}v.prototype=d===null?Object.create(d):(l.prototype=d.prototype,new l)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(12);function u(y,v){var d=y.getAttribute("class")||"";return d.split(/\s+/).filter(function(l){return l.indexOf(v+"-")===0})}var h=function(y){o(v,y);function v(){return y!==null&&y.apply(this,arguments)||this}return v.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(l){return l.split("-").slice(0,-1).join("-")})},v.prototype.add=function(d,l){return this.canAdd(d,l)?(this.remove(d),d.classList.add(this.keyName+"-"+l),!0):!1},v.prototype.remove=function(d){var l=u(d,this.keyName);l.forEach(function(a){d.classList.remove(a)}),d.classList.length===0&&d.removeAttribute("class")},v.prototype.value=function(d){var l=u(d,this.keyName)[0]||"",a=l.slice(this.keyName.length+1);return this.canAdd(d,a)?a:""},v}(s.default);n.default=h},function(t,n,r){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,d){v.__proto__=d}||function(v,d){for(var l in d)d.hasOwnProperty(l)&&(v[l]=d[l])};return function(v,d){y(v,d);function l(){this.constructor=v}v.prototype=d===null?Object.create(d):(l.prototype=d.prototype,new l)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(12);function u(y){var v=y.split("-"),d=v.slice(1).map(function(l){return l[0].toUpperCase()+l.slice(1)}).join("");return v[0]+d}var h=function(y){o(v,y);function v(){return y!==null&&y.apply(this,arguments)||this}return v.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(l){var a=l.split(":");return a[0].trim()})},v.prototype.add=function(d,l){return this.canAdd(d,l)?(d.style[u(this.keyName)]=l,!0):!1},v.prototype.remove=function(d){d.style[u(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},v.prototype.value=function(d){var l=d.style[u(this.keyName)];return this.canAdd(d,l)?l:""},v}(s.default);n.default=h},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function h(y,v){for(var d=0;d<v.length;d++){var l=v[d];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(y,l.key,l)}}return function(y,v,d){return v&&h(y.prototype,v),d&&h(y,d),y}}();function s(h,y){if(!(h instanceof y))throw new TypeError("Cannot call a class as a function")}var u=function(){function h(y,v){s(this,h),this.quill=y,this.options=v,this.modules={}}return o(h,[{key:"init",value:function(){var v=this;Object.keys(this.options.modules).forEach(function(d){v.modules[d]==null&&v.addModule(d)})}},{key:"addModule",value:function(v){var d=this.quill.constructor.import("modules/"+v);return this.modules[v]=new d(this.quill,this.options.modules[v]||{}),this.modules[v]}}]),h}();u.DEFAULTS={modules:{}},u.themes={default:u},n.default=u},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function m(f,g){for(var c=0;c<g.length;c++){var T=g[c];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(f,T.key,T)}}return function(f,g,c){return g&&m(f.prototype,g),c&&m(f,c),f}}(),s=function m(f,g,c){f===null&&(f=Function.prototype);var T=Object.getOwnPropertyDescriptor(f,g);if(T===void 0){var A=Object.getPrototypeOf(f);return A===null?void 0:m(A,g,c)}else{if("value"in T)return T.value;var _=T.get;return _===void 0?void 0:_.call(c)}},u=r(0),h=d(u),y=r(7),v=d(y);function d(m){return m&&m.__esModule?m:{default:m}}function l(m,f){if(!(m instanceof f))throw new TypeError("Cannot call a class as a function")}function a(m,f){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:m}function p(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);m.prototype=Object.create(f&&f.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(m,f):m.__proto__=f)}var b="\uFEFF",w=function(m){p(f,m);function f(g){l(this,f);var c=a(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,g));return c.contentNode=document.createElement("span"),c.contentNode.setAttribute("contenteditable",!1),[].slice.call(c.domNode.childNodes).forEach(function(T){c.contentNode.appendChild(T)}),c.leftGuard=document.createTextNode(b),c.rightGuard=document.createTextNode(b),c.domNode.appendChild(c.leftGuard),c.domNode.appendChild(c.contentNode),c.domNode.appendChild(c.rightGuard),c}return o(f,[{key:"index",value:function(c,T){return c===this.leftGuard?0:c===this.rightGuard?1:s(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"index",this).call(this,c,T)}},{key:"restore",value:function(c){var T=void 0,A=void 0,_=c.data.split(b).join("");if(c===this.leftGuard)if(this.prev instanceof v.default){var S=this.prev.length();this.prev.insertAt(S,_),T={startNode:this.prev.domNode,startOffset:S+_.length}}else A=document.createTextNode(_),this.parent.insertBefore(h.default.create(A),this),T={startNode:A,startOffset:_.length};else c===this.rightGuard&&(this.next instanceof v.default?(this.next.insertAt(0,_),T={startNode:this.next.domNode,startOffset:_.length}):(A=document.createTextNode(_),this.parent.insertBefore(h.default.create(A),this.next),T={startNode:A,startOffset:_.length}));return c.data=b,T}},{key:"update",value:function(c,T){var A=this;c.forEach(function(_){if(_.type==="characterData"&&(_.target===A.leftGuard||_.target===A.rightGuard)){var S=A.restore(_.target);S&&(T.range=S)}})}}]),f}(h.default.Embed);n.default=w},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var o=r(0),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}var h={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},y=new s.default.Attributor.Attribute("align","align",h),v=new s.default.Attributor.Class("align","ql-align",h),d=new s.default.Attributor.Style("align","text-align",h);n.AlignAttribute=y,n.AlignClass=v,n.AlignStyle=d},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var o=r(0),s=h(o),u=r(26);function h(d){return d&&d.__esModule?d:{default:d}}var y=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),v=new u.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});n.BackgroundClass=y,n.BackgroundStyle=v},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var o=r(0),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}var h={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},y=new s.default.Attributor.Attribute("direction","dir",h),v=new s.default.Attributor.Class("direction","ql-direction",h),d=new s.default.Attributor.Style("direction","direction",h);n.DirectionAttribute=y,n.DirectionClass=v,n.DirectionStyle=d},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var o=function(){function m(f,g){for(var c=0;c<g.length;c++){var T=g[c];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(f,T.key,T)}}return function(f,g,c){return g&&m(f.prototype,g),c&&m(f,c),f}}(),s=function m(f,g,c){f===null&&(f=Function.prototype);var T=Object.getOwnPropertyDescriptor(f,g);if(T===void 0){var A=Object.getPrototypeOf(f);return A===null?void 0:m(A,g,c)}else{if("value"in T)return T.value;var _=T.get;return _===void 0?void 0:_.call(c)}},u=r(0),h=y(u);function y(m){return m&&m.__esModule?m:{default:m}}function v(m,f){if(!(m instanceof f))throw new TypeError("Cannot call a class as a function")}function d(m,f){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:m}function l(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);m.prototype=Object.create(f&&f.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(m,f):m.__proto__=f)}var a={scope:h.default.Scope.INLINE,whitelist:["serif","monospace"]},p=new h.default.Attributor.Class("font","ql-font",a),b=function(m){l(f,m);function f(){return v(this,f),d(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return o(f,[{key:"value",value:function(c){return s(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"value",this).call(this,c).replace(/["']/g,"")}}]),f}(h.default.Attributor.Style),w=new b("font","font-family",a);n.FontStyle=w,n.FontClass=p},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var o=r(0),s=u(o);function u(v){return v&&v.__esModule?v:{default:v}}var h=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),y=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=h,n.SizeStyle=y},function(t,n,r){t.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var o=function(){function g(c,T){for(var A=0;A<T.length;A++){var _=T[A];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(c,_.key,_)}}return function(c,T,A){return T&&g(c.prototype,T),A&&g(c,A),c}}(),s=r(0),u=l(s),h=r(5),y=l(h),v=r(9),d=l(v);function l(g){return g&&g.__esModule?g:{default:g}}function a(g,c){if(!(g instanceof c))throw new TypeError("Cannot call a class as a function")}function p(g,c){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:g}function b(g,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);g.prototype=Object.create(c&&c.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(g,c):g.__proto__=c)}var w=function(g){b(c,g);function c(T,A){a(this,c);var _=p(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,T,A));return _.lastRecorded=0,_.ignoreChange=!1,_.clear(),_.quill.on(y.default.events.EDITOR_CHANGE,function(S,I,O,E){S!==y.default.events.TEXT_CHANGE||_.ignoreChange||(!_.options.userOnly||E===y.default.sources.USER?_.record(I,O):_.transform(I))}),_.quill.keyboard.addBinding({key:"Z",shortKey:!0},_.undo.bind(_)),_.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},_.redo.bind(_)),/Win/i.test(navigator.platform)&&_.quill.keyboard.addBinding({key:"Y",shortKey:!0},_.redo.bind(_)),_}return o(c,[{key:"change",value:function(A,_){if(this.stack[A].length!==0){var S=this.stack[A].pop();this.stack[_].push(S),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(S[A],y.default.sources.USER),this.ignoreChange=!1;var I=f(S[A]);this.quill.setSelection(I)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(A,_){if(A.ops.length!==0){this.stack.redo=[];var S=this.quill.getContents().diff(_),I=Date.now();if(this.lastRecorded+this.options.delay>I&&this.stack.undo.length>0){var O=this.stack.undo.pop();S=S.compose(O.undo),A=O.redo.compose(A)}else this.lastRecorded=I;this.stack.undo.push({redo:A,undo:S}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(A){this.stack.undo.forEach(function(_){_.undo=A.transform(_.undo,!0),_.redo=A.transform(_.redo,!0)}),this.stack.redo.forEach(function(_){_.undo=A.transform(_.undo,!0),_.redo=A.transform(_.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),c}(d.default);w.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function m(g){var c=g.ops[g.ops.length-1];return c==null?!1:c.insert!=null?typeof c.insert=="string"&&c.insert.endsWith(`
`):c.attributes!=null?Object.keys(c.attributes).some(function(T){return u.default.query(T,u.default.Scope.BLOCK)!=null}):!1}function f(g){var c=g.reduce(function(A,_){return A+=_.delete||0,A},0),T=g.length()-c;return m(g)&&(T-=1),T}n.default=w,n.getLastChangeIndex=f},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var o=function(){function L(D,K){for(var z=0;z<K.length;z++){var R=K[z];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(D,R.key,R)}}return function(D,K,z){return K&&L(D.prototype,K),z&&L(D,z),D}}(),s=function L(D,K,z){D===null&&(D=Function.prototype);var R=Object.getOwnPropertyDescriptor(D,K);if(R===void 0){var U=Object.getPrototypeOf(D);return U===null?void 0:L(U,K,z)}else{if("value"in R)return R.value;var H=R.get;return H===void 0?void 0:H.call(z)}},u=r(3),h=I(u),y=r(2),v=I(y),d=r(8),l=I(d),a=r(23),p=I(a),b=r(34),w=I(b),m=r(59),f=I(m),g=r(60),c=I(g),T=r(28),A=I(T),_=r(61),S=I(_);function I(L){return L&&L.__esModule?L:{default:L}}function O(L,D){if(!(L instanceof D))throw new TypeError("Cannot call a class as a function")}function E(L,D){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:L}function k(L,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);L.prototype=Object.create(D&&D.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(L,D):L.__proto__=D)}var x=[!1,"center","right","justify"],N=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],C=[!1,"serif","monospace"],M=["1","2","3",!1],j=["small",!1,"large","huge"],Q=function(L){k(D,L);function D(K,z){O(this,D);var R=E(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,K,z)),U=function H(Z){if(!document.body.contains(K.root))return document.body.removeEventListener("click",H);R.tooltip!=null&&!R.tooltip.root.contains(Z.target)&&document.activeElement!==R.tooltip.textbox&&!R.quill.hasFocus()&&R.tooltip.hide(),R.pickers!=null&&R.pickers.forEach(function(ie){ie.container.contains(Z.target)||ie.close()})};return K.emitter.listenDOM("click",document.body,U),R}return o(D,[{key:"addModule",value:function(z){var R=s(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"addModule",this).call(this,z);return z==="toolbar"&&this.extendToolbar(R),R}},{key:"buildButtons",value:function(z,R){z.forEach(function(U){var H=U.getAttribute("class")||"";H.split(/\s+/).forEach(function(Z){if(Z.startsWith("ql-")&&(Z=Z.slice(3),R[Z]!=null))if(Z==="direction")U.innerHTML=R[Z][""]+R[Z].rtl;else if(typeof R[Z]=="string")U.innerHTML=R[Z];else{var ie=U.value||"";ie!=null&&R[Z][ie]&&(U.innerHTML=R[Z][ie])}})})}},{key:"buildPickers",value:function(z,R){var U=this;this.pickers=z.map(function(Z){if(Z.classList.contains("ql-align"))return Z.querySelector("option")==null&&P(Z,x),new c.default(Z,R.align);if(Z.classList.contains("ql-background")||Z.classList.contains("ql-color")){var ie=Z.classList.contains("ql-background")?"background":"color";return Z.querySelector("option")==null&&P(Z,N,ie==="background"?"#ffffff":"#000000"),new f.default(Z,R[ie])}else return Z.querySelector("option")==null&&(Z.classList.contains("ql-font")?P(Z,C):Z.classList.contains("ql-header")?P(Z,M):Z.classList.contains("ql-size")&&P(Z,j)),new A.default(Z)});var H=function(){U.pickers.forEach(function(ie){ie.update()})};this.quill.on(l.default.events.EDITOR_CHANGE,H)}}]),D}(w.default);Q.DEFAULTS=(0,h.default)(!0,{},w.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var D=this,K=this.container.querySelector("input.ql-image[type=file]");K==null&&(K=document.createElement("input"),K.setAttribute("type","file"),K.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),K.classList.add("ql-image"),K.addEventListener("change",function(){if(K.files!=null&&K.files[0]!=null){var z=new FileReader;z.onload=function(R){var U=D.quill.getSelection(!0);D.quill.updateContents(new v.default().retain(U.index).delete(U.length).insert({image:R.target.result}),l.default.sources.USER),D.quill.setSelection(U.index+1,l.default.sources.SILENT),K.value=""},z.readAsDataURL(K.files[0])}}),this.container.appendChild(K)),K.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var $=function(L){k(D,L);function D(K,z){O(this,D);var R=E(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,K,z));return R.textbox=R.root.querySelector('input[type="text"]'),R.listen(),R}return o(D,[{key:"listen",value:function(){var z=this;this.textbox.addEventListener("keydown",function(R){p.default.match(R,"enter")?(z.save(),R.preventDefault()):p.default.match(R,"escape")&&(z.cancel(),R.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),R!=null?this.textbox.value=R:z!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+z)||""),this.root.setAttribute("data-mode",z)}},{key:"restoreFocus",value:function(){var z=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=z}},{key:"save",value:function(){var z=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var R=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",z,l.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",z,l.default.sources.USER)),this.quill.root.scrollTop=R;break}case"video":z=B(z);case"formula":{if(!z)break;var U=this.quill.getSelection(!0);if(U!=null){var H=U.index+U.length;this.quill.insertEmbed(H,this.root.getAttribute("data-mode"),z,l.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(H+1," ",l.default.sources.USER),this.quill.setSelection(H+2,l.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),D}(S.default);function B(L){var D=L.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||L.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return D?(D[1]||"https")+"://www.youtube.com/embed/"+D[2]+"?showinfo=0":(D=L.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(D[1]||"https")+"://player.vimeo.com/video/"+D[2]+"/":L}function P(L,D){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;D.forEach(function(z){var R=document.createElement("option");z===K?R.setAttribute("selected","selected"):R.setAttribute("value",z),L.appendChild(R)})}n.BaseTooltip=$,n.default=Q},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function s(){this.head=this.tail=null,this.length=0}return s.prototype.append=function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];this.insertBefore(u[0],null),u.length>1&&this.append.apply(this,u.slice(1))},s.prototype.contains=function(u){for(var h,y=this.iterator();h=y();)if(h===u)return!0;return!1},s.prototype.insertBefore=function(u,h){u&&(u.next=h,h!=null?(u.prev=h.prev,h.prev!=null&&(h.prev.next=u),h.prev=u,h===this.head&&(this.head=u)):this.tail!=null?(this.tail.next=u,u.prev=this.tail,this.tail=u):(u.prev=null,this.head=this.tail=u),this.length+=1)},s.prototype.offset=function(u){for(var h=0,y=this.head;y!=null;){if(y===u)return h;h+=y.length(),y=y.next}return-1},s.prototype.remove=function(u){this.contains(u)&&(u.prev!=null&&(u.prev.next=u.next),u.next!=null&&(u.next.prev=u.prev),u===this.head&&(this.head=u.next),u===this.tail&&(this.tail=u.prev),this.length-=1)},s.prototype.iterator=function(u){return u===void 0&&(u=this.head),function(){var h=u;return u!=null&&(u=u.next),h}},s.prototype.find=function(u,h){h===void 0&&(h=!1);for(var y,v=this.iterator();y=v();){var d=y.length();if(u<d||h&&u===d&&(y.next==null||y.next.length()!==0))return[y,u];u-=d}return[null,0]},s.prototype.forEach=function(u){for(var h,y=this.iterator();h=y();)u(h)},s.prototype.forEachAt=function(u,h,y){if(!(h<=0))for(var v=this.find(u),d=v[0],l=v[1],a,p=u-l,b=this.iterator(d);(a=b())&&p<u+h;){var w=a.length();u>p?y(a,u-p,Math.min(h,p+w-u)):y(a,0,Math.min(w,u+h-p)),p+=w}},s.prototype.map=function(u){return this.reduce(function(h,y){return h.push(u(y)),h},[])},s.prototype.reduce=function(u,h){for(var y,v=this.iterator();y=v();)h=u(h,y);return h},s}();n.default=o},function(t,n,r){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var p in a)a.hasOwnProperty(p)&&(l[p]=a[p])};return function(l,a){d(l,a);function p(){this.constructor=l}l.prototype=a===null?Object.create(a):(p.prototype=a.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(17),u=r(1),h={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},y=100,v=function(d){o(l,d);function l(a){var p=d.call(this,a)||this;return p.scroll=p,p.observer=new MutationObserver(function(b){p.update(b)}),p.observer.observe(p.domNode,h),p.attach(),p}return l.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},l.prototype.deleteAt=function(a,p){this.update(),a===0&&p===this.length()?this.children.forEach(function(b){b.remove()}):d.prototype.deleteAt.call(this,a,p)},l.prototype.formatAt=function(a,p,b,w){this.update(),d.prototype.formatAt.call(this,a,p,b,w)},l.prototype.insertAt=function(a,p,b){this.update(),d.prototype.insertAt.call(this,a,p,b)},l.prototype.optimize=function(a,p){var b=this;a===void 0&&(a=[]),p===void 0&&(p={}),d.prototype.optimize.call(this,p);for(var w=[].slice.call(this.observer.takeRecords());w.length>0;)a.push(w.pop());for(var m=function(T,A){A===void 0&&(A=!0),!(T==null||T===b)&&T.domNode.parentNode!=null&&(T.domNode[u.DATA_KEY].mutations==null&&(T.domNode[u.DATA_KEY].mutations=[]),A&&m(T.parent))},f=function(T){T.domNode[u.DATA_KEY]==null||T.domNode[u.DATA_KEY].mutations==null||(T instanceof s.default&&T.children.forEach(f),T.optimize(p))},g=a,c=0;g.length>0;c+=1){if(c>=y)throw new Error("[Parchment] Maximum optimize iterations reached");for(g.forEach(function(T){var A=u.find(T.target,!0);A!=null&&(A.domNode===T.target&&(T.type==="childList"?(m(u.find(T.previousSibling,!1)),[].forEach.call(T.addedNodes,function(_){var S=u.find(_,!1);m(S,!1),S instanceof s.default&&S.children.forEach(function(I){m(I,!1)})})):T.type==="attributes"&&m(A.prev)),m(A))}),this.children.forEach(f),g=[].slice.call(this.observer.takeRecords()),w=g.slice();w.length>0;)a.push(w.pop())}},l.prototype.update=function(a,p){var b=this;p===void 0&&(p={}),a=a||this.observer.takeRecords(),a.map(function(w){var m=u.find(w.target,!0);return m==null?null:m.domNode[u.DATA_KEY].mutations==null?(m.domNode[u.DATA_KEY].mutations=[w],m):(m.domNode[u.DATA_KEY].mutations.push(w),null)}).forEach(function(w){w==null||w===b||w.domNode[u.DATA_KEY]==null||w.update(w.domNode[u.DATA_KEY].mutations||[],p)}),this.domNode[u.DATA_KEY].mutations!=null&&d.prototype.update.call(this,this.domNode[u.DATA_KEY].mutations,p),this.optimize(a,p)},l.blotName="scroll",l.defaultChild="block",l.scope=u.Scope.BLOCK_BLOT,l.tagName="DIV",l}(s.default);n.default=v},function(t,n,r){var o=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,l){d.__proto__=l}||function(d,l){for(var a in l)l.hasOwnProperty(a)&&(d[a]=l[a])};return function(d,l){v(d,l);function a(){this.constructor=d}d.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(18),u=r(1);function h(v,d){if(Object.keys(v).length!==Object.keys(d).length)return!1;for(var l in v)if(v[l]!==d[l])return!1;return!0}var y=function(v){o(d,v);function d(){return v!==null&&v.apply(this,arguments)||this}return d.formats=function(l){if(l.tagName!==d.tagName)return v.formats.call(this,l)},d.prototype.format=function(l,a){var p=this;l===this.statics.blotName&&!a?(this.children.forEach(function(b){b instanceof s.default||(b=b.wrap(d.blotName,!0)),p.attributes.copy(b)}),this.unwrap()):v.prototype.format.call(this,l,a)},d.prototype.formatAt=function(l,a,p,b){if(this.formats()[p]!=null||u.query(p,u.Scope.ATTRIBUTE)){var w=this.isolate(l,a);w.format(p,b)}else v.prototype.formatAt.call(this,l,a,p,b)},d.prototype.optimize=function(l){v.prototype.optimize.call(this,l);var a=this.formats();if(Object.keys(a).length===0)return this.unwrap();var p=this.next;p instanceof d&&p.prev===this&&h(a,p.formats())&&(p.moveChildren(this),p.remove())},d.blotName="inline",d.scope=u.Scope.INLINE_BLOT,d.tagName="SPAN",d}(s.default);n.default=y},function(t,n,r){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,d){v.__proto__=d}||function(v,d){for(var l in d)d.hasOwnProperty(l)&&(v[l]=d[l])};return function(v,d){y(v,d);function l(){this.constructor=v}v.prototype=d===null?Object.create(d):(l.prototype=d.prototype,new l)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(18),u=r(1),h=function(y){o(v,y);function v(){return y!==null&&y.apply(this,arguments)||this}return v.formats=function(d){var l=u.query(v.blotName).tagName;if(d.tagName!==l)return y.formats.call(this,d)},v.prototype.format=function(d,l){u.query(d,u.Scope.BLOCK)!=null&&(d===this.statics.blotName&&!l?this.replaceWith(v.blotName):y.prototype.format.call(this,d,l))},v.prototype.formatAt=function(d,l,a,p){u.query(a,u.Scope.BLOCK)!=null?this.format(a,p):y.prototype.formatAt.call(this,d,l,a,p)},v.prototype.insertAt=function(d,l,a){if(a==null||u.query(l,u.Scope.INLINE)!=null)y.prototype.insertAt.call(this,d,l,a);else{var p=this.split(d),b=u.create(l,a);p.parent.insertBefore(b,p)}},v.prototype.update=function(d,l){navigator.userAgent.match(/Trident/)?this.build():y.prototype.update.call(this,d,l)},v.blotName="block",v.scope=u.Scope.BLOCK_BLOT,v.tagName="P",v}(s.default);n.default=h},function(t,n,r){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var d in v)v.hasOwnProperty(d)&&(y[d]=v[d])};return function(y,v){h(y,v);function d(){this.constructor=y}y.prototype=v===null?Object.create(v):(d.prototype=v.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(19),u=function(h){o(y,h);function y(){return h!==null&&h.apply(this,arguments)||this}return y.formats=function(v){},y.prototype.format=function(v,d){h.prototype.formatAt.call(this,0,this.length(),v,d)},y.prototype.formatAt=function(v,d,l,a){v===0&&d===this.length()?this.format(l,a):h.prototype.formatAt.call(this,v,d,l,a)},y.prototype.formats=function(){return this.statics.formats(this.domNode)},y}(s.default);n.default=u},function(t,n,r){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,d){v.__proto__=d}||function(v,d){for(var l in d)d.hasOwnProperty(l)&&(v[l]=d[l])};return function(v,d){y(v,d);function l(){this.constructor=v}v.prototype=d===null?Object.create(d):(l.prototype=d.prototype,new l)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(19),u=r(1),h=function(y){o(v,y);function v(d){var l=y.call(this,d)||this;return l.text=l.statics.value(l.domNode),l}return v.create=function(d){return document.createTextNode(d)},v.value=function(d){var l=d.data;return l.normalize&&(l=l.normalize()),l},v.prototype.deleteAt=function(d,l){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+l)},v.prototype.index=function(d,l){return this.domNode===d?l:-1},v.prototype.insertAt=function(d,l,a){a==null?(this.text=this.text.slice(0,d)+l+this.text.slice(d),this.domNode.data=this.text):y.prototype.insertAt.call(this,d,l,a)},v.prototype.length=function(){return this.text.length},v.prototype.optimize=function(d){y.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof v&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},v.prototype.position=function(d,l){return[this.domNode,d]},v.prototype.split=function(d,l){if(l===void 0&&(l=!1),!l){if(d===0)return this;if(d===this.length())return this.next}var a=u.create(this.domNode.splitText(d));return this.parent.insertBefore(a,this.next),this.text=this.statics.value(this.domNode),a},v.prototype.update=function(d,l){var a=this;d.some(function(p){return p.type==="characterData"&&p.target===a.domNode})&&(this.text=this.statics.value(this.domNode))},v.prototype.value=function(){return this.text},v.blotName="text",v.scope=u.Scope.INLINE_BLOT,v}(s.default);n.default=h},function(t,n,r){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(u,h){return arguments.length>1&&!this.contains(u)==!h?h:s.call(this,u)}}String.prototype.startsWith||(String.prototype.startsWith=function(u,h){return h=h||0,this.substr(h,u.length)===u}),String.prototype.endsWith||(String.prototype.endsWith=function(u,h){var y=this.toString();(typeof h!="number"||!isFinite(h)||Math.floor(h)!==h||h>y.length)&&(h=y.length),h-=u.length;var v=y.indexOf(u,h);return v!==-1&&v===h}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("predicate must be a function");for(var y=Object(this),v=y.length>>>0,d=arguments[1],l,a=0;a<v;a++)if(l=y[a],h.call(d,l,a,y))return l}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,n){var r=-1,o=1,s=0;function u(c,T,A){if(c==T)return c?[[s,c]]:[];(A<0||c.length<A)&&(A=null);var _=d(c,T),S=c.substring(0,_);c=c.substring(_),T=T.substring(_),_=l(c,T);var I=c.substring(c.length-_);c=c.substring(0,c.length-_),T=T.substring(0,T.length-_);var O=h(c,T);return S&&O.unshift([s,S]),I&&O.push([s,I]),p(O),A!=null&&(O=m(O,A)),O=f(O),O}function h(c,T){var A;if(!c)return[[o,T]];if(!T)return[[r,c]];var _=c.length>T.length?c:T,S=c.length>T.length?T:c,I=_.indexOf(S);if(I!=-1)return A=[[o,_.substring(0,I)],[s,S],[o,_.substring(I+S.length)]],c.length>T.length&&(A[0][0]=A[2][0]=r),A;if(S.length==1)return[[r,c],[o,T]];var O=a(c,T);if(O){var E=O[0],k=O[1],x=O[2],N=O[3],C=O[4],M=u(E,x),j=u(k,N);return M.concat([[s,C]],j)}return y(c,T)}function y(c,T){for(var A=c.length,_=T.length,S=Math.ceil((A+_)/2),I=S,O=2*S,E=new Array(O),k=new Array(O),x=0;x<O;x++)E[x]=-1,k[x]=-1;E[I+1]=0,k[I+1]=0;for(var N=A-_,C=N%2!=0,M=0,j=0,Q=0,$=0,B=0;B<S;B++){for(var P=-B+M;P<=B-j;P+=2){var L=I+P,D;P==-B||P!=B&&E[L-1]<E[L+1]?D=E[L+1]:D=E[L-1]+1;for(var K=D-P;D<A&&K<_&&c.charAt(D)==T.charAt(K);)D++,K++;if(E[L]=D,D>A)j+=2;else if(K>_)M+=2;else if(C){var z=I+N-P;if(z>=0&&z<O&&k[z]!=-1){var R=A-k[z];if(D>=R)return v(c,T,D,K)}}}for(var U=-B+Q;U<=B-$;U+=2){var z=I+U,R;U==-B||U!=B&&k[z-1]<k[z+1]?R=k[z+1]:R=k[z-1]+1;for(var H=R-U;R<A&&H<_&&c.charAt(A-R-1)==T.charAt(_-H-1);)R++,H++;if(k[z]=R,R>A)$+=2;else if(H>_)Q+=2;else if(!C){var L=I+N-U;if(L>=0&&L<O&&E[L]!=-1){var D=E[L],K=I+D-L;if(R=A-R,D>=R)return v(c,T,D,K)}}}}return[[r,c],[o,T]]}function v(c,T,A,_){var S=c.substring(0,A),I=T.substring(0,_),O=c.substring(A),E=T.substring(_),k=u(S,I),x=u(O,E);return k.concat(x)}function d(c,T){if(!c||!T||c.charAt(0)!=T.charAt(0))return 0;for(var A=0,_=Math.min(c.length,T.length),S=_,I=0;A<S;)c.substring(I,S)==T.substring(I,S)?(A=S,I=A):_=S,S=Math.floor((_-A)/2+A);return S}function l(c,T){if(!c||!T||c.charAt(c.length-1)!=T.charAt(T.length-1))return 0;for(var A=0,_=Math.min(c.length,T.length),S=_,I=0;A<S;)c.substring(c.length-S,c.length-I)==T.substring(T.length-S,T.length-I)?(A=S,I=A):_=S,S=Math.floor((_-A)/2+A);return S}function a(c,T){var A=c.length>T.length?c:T,_=c.length>T.length?T:c;if(A.length<4||_.length*2<A.length)return null;function S(j,Q,$){for(var B=j.substring($,$+Math.floor(j.length/4)),P=-1,L="",D,K,z,R;(P=Q.indexOf(B,P+1))!=-1;){var U=d(j.substring($),Q.substring(P)),H=l(j.substring(0,$),Q.substring(0,P));L.length<H+U&&(L=Q.substring(P-H,P)+Q.substring(P,P+U),D=j.substring(0,$-H),K=j.substring($+U),z=Q.substring(0,P-H),R=Q.substring(P+U))}return L.length*2>=j.length?[D,K,z,R,L]:null}var I=S(A,_,Math.ceil(A.length/4)),O=S(A,_,Math.ceil(A.length/2)),E;if(!I&&!O)return null;O?I?E=I[4].length>O[4].length?I:O:E=O:E=I;var k,x,N,C;c.length>T.length?(k=E[0],x=E[1],N=E[2],C=E[3]):(N=E[0],C=E[1],k=E[2],x=E[3]);var M=E[4];return[k,x,N,C,M]}function p(c){c.push([s,""]);for(var T=0,A=0,_=0,S="",I="",O;T<c.length;)switch(c[T][0]){case o:_++,I+=c[T][1],T++;break;case r:A++,S+=c[T][1],T++;break;case s:A+_>1?(A!==0&&_!==0&&(O=d(I,S),O!==0&&(T-A-_>0&&c[T-A-_-1][0]==s?c[T-A-_-1][1]+=I.substring(0,O):(c.splice(0,0,[s,I.substring(0,O)]),T++),I=I.substring(O),S=S.substring(O)),O=l(I,S),O!==0&&(c[T][1]=I.substring(I.length-O)+c[T][1],I=I.substring(0,I.length-O),S=S.substring(0,S.length-O))),A===0?c.splice(T-_,A+_,[o,I]):_===0?c.splice(T-A,A+_,[r,S]):c.splice(T-A-_,A+_,[r,S],[o,I]),T=T-A-_+(A?1:0)+(_?1:0)+1):T!==0&&c[T-1][0]==s?(c[T-1][1]+=c[T][1],c.splice(T,1)):T++,_=0,A=0,S="",I="";break}c[c.length-1][1]===""&&c.pop();var E=!1;for(T=1;T<c.length-1;)c[T-1][0]==s&&c[T+1][0]==s&&(c[T][1].substring(c[T][1].length-c[T-1][1].length)==c[T-1][1]?(c[T][1]=c[T-1][1]+c[T][1].substring(0,c[T][1].length-c[T-1][1].length),c[T+1][1]=c[T-1][1]+c[T+1][1],c.splice(T-1,1),E=!0):c[T][1].substring(0,c[T+1][1].length)==c[T+1][1]&&(c[T-1][1]+=c[T+1][1],c[T][1]=c[T][1].substring(c[T+1][1].length)+c[T+1][1],c.splice(T+1,1),E=!0)),T++;E&&p(c)}var b=u;b.INSERT=o,b.DELETE=r,b.EQUAL=s,t.exports=b;function w(c,T){if(T===0)return[s,c];for(var A=0,_=0;_<c.length;_++){var S=c[_];if(S[0]===r||S[0]===s){var I=A+S[1].length;if(T===I)return[_+1,c];if(T<I){c=c.slice();var O=T-A,E=[S[0],S[1].slice(0,O)],k=[S[0],S[1].slice(O)];return c.splice(_,1,E,k),[_+1,c]}else A=I}}throw new Error("cursor_pos is out of bounds!")}function m(c,T){var A=w(c,T),_=A[1],S=A[0],I=_[S],O=_[S+1];if(I==null)return c;if(I[0]!==s)return c;if(O!=null&&I[1]+O[1]===O[1]+I[1])return _.splice(S,2,O,I),g(_,S,2);if(O!=null&&O[1].indexOf(I[1])===0){_.splice(S,2,[O[0],I[1]],[0,I[1]]);var E=O[1].slice(I[1].length);return E.length>0&&_.splice(S+2,0,[O[0],E]),g(_,S,3)}else return c}function f(c){for(var T=!1,A=function(O){return O.charCodeAt(0)>=56320&&O.charCodeAt(0)<=57343},_=function(O){return O.charCodeAt(O.length-1)>=55296&&O.charCodeAt(O.length-1)<=56319},S=2;S<c.length;S+=1)c[S-2][0]===s&&_(c[S-2][1])&&c[S-1][0]===r&&A(c[S-1][1])&&c[S][0]===o&&A(c[S][1])&&(T=!0,c[S-1][1]=c[S-2][1].slice(-1)+c[S-1][1],c[S][1]=c[S-2][1].slice(-1)+c[S][1],c[S-2][1]=c[S-2][1].slice(0,-1));if(!T)return c;for(var I=[],S=0;S<c.length;S+=1)c[S][1].length>0&&I.push(c[S]);return I}function g(c,T,A){for(var _=T+A-1;_>=0&&_>=T-1;_--)if(_+1<c.length){var S=c[_],I=c[_+1];S[0]===I[1]&&c.splice(_,2,[S[0],S[1]+I[1]])}return c}},function(t,n){n=t.exports=typeof Object.keys=="function"?Object.keys:r,n.shim=r;function r(o){var s=[];for(var u in o)s.push(u);return s}},function(t,n){var r=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=t.exports=r?o:s,n.supported=o;function o(u){return Object.prototype.toString.call(u)=="[object Arguments]"}n.unsupported=s;function s(u){return u&&typeof u=="object"&&typeof u.length=="number"&&Object.prototype.hasOwnProperty.call(u,"callee")&&!Object.prototype.propertyIsEnumerable.call(u,"callee")||!1}},function(t,n){var r=Object.prototype.hasOwnProperty,o="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1));function u(y,v,d){this.fn=y,this.context=v,this.once=d||!1}function h(){this._events=new s,this._eventsCount=0}h.prototype.eventNames=function(){var v=[],d,l;if(this._eventsCount===0)return v;for(l in d=this._events)r.call(d,l)&&v.push(o?l.slice(1):l);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(d)):v},h.prototype.listeners=function(v,d){var l=o?o+v:v,a=this._events[l];if(d)return!!a;if(!a)return[];if(a.fn)return[a.fn];for(var p=0,b=a.length,w=new Array(b);p<b;p++)w[p]=a[p].fn;return w},h.prototype.emit=function(v,d,l,a,p,b){var w=o?o+v:v;if(!this._events[w])return!1;var m=this._events[w],f=arguments.length,g,c;if(m.fn){switch(m.once&&this.removeListener(v,m.fn,void 0,!0),f){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,d),!0;case 3:return m.fn.call(m.context,d,l),!0;case 4:return m.fn.call(m.context,d,l,a),!0;case 5:return m.fn.call(m.context,d,l,a,p),!0;case 6:return m.fn.call(m.context,d,l,a,p,b),!0}for(c=1,g=new Array(f-1);c<f;c++)g[c-1]=arguments[c];m.fn.apply(m.context,g)}else{var T=m.length,A;for(c=0;c<T;c++)switch(m[c].once&&this.removeListener(v,m[c].fn,void 0,!0),f){case 1:m[c].fn.call(m[c].context);break;case 2:m[c].fn.call(m[c].context,d);break;case 3:m[c].fn.call(m[c].context,d,l);break;case 4:m[c].fn.call(m[c].context,d,l,a);break;default:if(!g)for(A=1,g=new Array(f-1);A<f;A++)g[A-1]=arguments[A];m[c].fn.apply(m[c].context,g)}}return!0},h.prototype.on=function(v,d,l){var a=new u(d,l||this),p=o?o+v:v;return this._events[p]?this._events[p].fn?this._events[p]=[this._events[p],a]:this._events[p].push(a):(this._events[p]=a,this._eventsCount++),this},h.prototype.once=function(v,d,l){var a=new u(d,l||this,!0),p=o?o+v:v;return this._events[p]?this._events[p].fn?this._events[p]=[this._events[p],a]:this._events[p].push(a):(this._events[p]=a,this._eventsCount++),this},h.prototype.removeListener=function(v,d,l,a){var p=o?o+v:v;if(!this._events[p])return this;if(!d)return--this._eventsCount===0?this._events=new s:delete this._events[p],this;var b=this._events[p];if(b.fn)b.fn===d&&(!a||b.once)&&(!l||b.context===l)&&(--this._eventsCount===0?this._events=new s:delete this._events[p]);else{for(var w=0,m=[],f=b.length;w<f;w++)(b[w].fn!==d||a&&!b[w].once||l&&b[w].context!==l)&&m.push(b[w]);m.length?this._events[p]=m.length===1?m[0]:m:--this._eventsCount===0?this._events=new s:delete this._events[p]}return this},h.prototype.removeAllListeners=function(v){var d;return v?(d=o?o+v:v,this._events[d]&&(--this._eventsCount===0?this._events=new s:delete this._events[d])):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prototype.setMaxListeners=function(){return this},h.prefixed=o,h.EventEmitter=h,typeof t<"u"&&(t.exports=h)},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},s=function(){function q(W,se){var ue=[],re=!0,ge=!1,ye=void 0;try{for(var Oe=W[Symbol.iterator](),Fe;!(re=(Fe=Oe.next()).done)&&(ue.push(Fe.value),!(se&&ue.length===se));re=!0);}catch(Ue){ge=!0,ye=Ue}finally{try{!re&&Oe.return&&Oe.return()}finally{if(ge)throw ye}}return ue}return function(W,se){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return q(W,se);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function q(W,se){for(var ue=0;ue<se.length;ue++){var re=se[ue];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(W,re.key,re)}}return function(W,se,ue){return se&&q(W.prototype,se),ue&&q(W,ue),W}}(),h=r(3),y=k(h),v=r(2),d=k(v),l=r(0),a=k(l),p=r(5),b=k(p),w=r(10),m=k(w),f=r(9),g=k(f),c=r(36),T=r(37),A=r(13),_=k(A),S=r(26),I=r(38),O=r(39),E=r(40);function k(q){return q&&q.__esModule?q:{default:q}}function x(q,W,se){return W in q?Object.defineProperty(q,W,{value:se,enumerable:!0,configurable:!0,writable:!0}):q[W]=se,q}function N(q,W){if(!(q instanceof W))throw new TypeError("Cannot call a class as a function")}function C(q,W){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:q}function M(q,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);q.prototype=Object.create(W&&W.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(q,W):q.__proto__=W)}var j=(0,m.default)("quill:clipboard"),Q="__ql-matcher",$=[[Node.TEXT_NODE,G],[Node.TEXT_NODE,ve],["br",fe],[Node.ELEMENT_NODE,ve],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,F],[Node.ELEMENT_NODE,Z],[Node.ELEMENT_NODE,X],["li",me],["b",H.bind(H,"bold")],["i",H.bind(H,"italic")],["style",be]],B=[c.AlignAttribute,I.DirectionAttribute].reduce(function(q,W){return q[W.keyName]=W,q},{}),P=[c.AlignStyle,T.BackgroundStyle,S.ColorStyle,I.DirectionStyle,O.FontStyle,E.SizeStyle].reduce(function(q,W){return q[W.keyName]=W,q},{}),L=function(q){M(W,q);function W(se,ue){N(this,W);var re=C(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,se,ue));return re.quill.root.addEventListener("paste",re.onPaste.bind(re)),re.container=re.quill.addContainer("ql-clipboard"),re.container.setAttribute("contenteditable",!0),re.container.setAttribute("tabindex",-1),re.matchers=[],$.concat(re.options.matchers).forEach(function(ge){var ye=s(ge,2),Oe=ye[0],Fe=ye[1];!ue.matchVisual&&Fe===F||re.addMatcher(Oe,Fe)}),re}return u(W,[{key:"addMatcher",value:function(ue,re){this.matchers.push([ue,re])}},{key:"convert",value:function(ue){if(typeof ue=="string")return this.container.innerHTML=ue.replace(/\>\r?\n +\</g,"><"),this.convert();var re=this.quill.getFormat(this.quill.selection.savedRange.index);if(re[_.default.blotName]){var ge=this.container.innerText;return this.container.innerHTML="",new d.default().insert(ge,x({},_.default.blotName,re[_.default.blotName]))}var ye=this.prepareMatching(),Oe=s(ye,2),Fe=Oe[0],Ue=Oe[1],xe=U(this.container,Fe,Ue);return z(xe,`
`)&&xe.ops[xe.ops.length-1].attributes==null&&(xe=xe.compose(new d.default().retain(xe.length()-1).delete(1))),j.log("convert",this.container.innerHTML,xe),this.container.innerHTML="",xe}},{key:"dangerouslyPasteHTML",value:function(ue,re){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof ue=="string")this.quill.setContents(this.convert(ue),re),this.quill.setSelection(0,b.default.sources.SILENT);else{var ye=this.convert(re);this.quill.updateContents(new d.default().retain(ue).concat(ye),ge),this.quill.setSelection(ue+ye.length(),b.default.sources.SILENT)}}},{key:"onPaste",value:function(ue){var re=this;if(!(ue.defaultPrevented||!this.quill.isEnabled())){var ge=this.quill.getSelection(),ye=new d.default().retain(ge.index),Oe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(b.default.sources.SILENT),setTimeout(function(){ye=ye.concat(re.convert()).delete(ge.length),re.quill.updateContents(ye,b.default.sources.USER),re.quill.setSelection(ye.length()-ge.length,b.default.sources.SILENT),re.quill.scrollingContainer.scrollTop=Oe,re.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ue=this,re=[],ge=[];return this.matchers.forEach(function(ye){var Oe=s(ye,2),Fe=Oe[0],Ue=Oe[1];switch(Fe){case Node.TEXT_NODE:ge.push(Ue);break;case Node.ELEMENT_NODE:re.push(Ue);break;default:[].forEach.call(ue.container.querySelectorAll(Fe),function(xe){xe[Q]=xe[Q]||[],xe[Q].push(Ue)});break}}),[re,ge]}}]),W}(g.default);L.DEFAULTS={matchers:[],matchVisual:!0};function D(q,W,se){return(typeof W>"u"?"undefined":o(W))==="object"?Object.keys(W).reduce(function(ue,re){return D(ue,re,W[re])},q):q.reduce(function(ue,re){return re.attributes&&re.attributes[W]?ue.push(re):ue.insert(re.insert,(0,y.default)({},x({},W,se),re.attributes))},new d.default)}function K(q){if(q.nodeType!==Node.ELEMENT_NODE)return{};var W="__ql-computed-style";return q[W]||(q[W]=window.getComputedStyle(q))}function z(q,W){for(var se="",ue=q.ops.length-1;ue>=0&&se.length<W.length;--ue){var re=q.ops[ue];if(typeof re.insert!="string")break;se=re.insert+se}return se.slice(-1*W.length)===W}function R(q){if(q.childNodes.length===0)return!1;var W=K(q);return["block","list-item"].indexOf(W.display)>-1}function U(q,W,se){return q.nodeType===q.TEXT_NODE?se.reduce(function(ue,re){return re(q,ue)},new d.default):q.nodeType===q.ELEMENT_NODE?[].reduce.call(q.childNodes||[],function(ue,re){var ge=U(re,W,se);return re.nodeType===q.ELEMENT_NODE&&(ge=W.reduce(function(ye,Oe){return Oe(re,ye)},ge),ge=(re[Q]||[]).reduce(function(ye,Oe){return Oe(re,ye)},ge)),ue.concat(ge)},new d.default):new d.default}function H(q,W,se){return D(se,q,!0)}function Z(q,W){var se=a.default.Attributor.Attribute.keys(q),ue=a.default.Attributor.Class.keys(q),re=a.default.Attributor.Style.keys(q),ge={};return se.concat(ue).concat(re).forEach(function(ye){var Oe=a.default.query(ye,a.default.Scope.ATTRIBUTE);Oe!=null&&(ge[Oe.attrName]=Oe.value(q),ge[Oe.attrName])||(Oe=B[ye],Oe!=null&&(Oe.attrName===ye||Oe.keyName===ye)&&(ge[Oe.attrName]=Oe.value(q)||void 0),Oe=P[ye],Oe!=null&&(Oe.attrName===ye||Oe.keyName===ye)&&(Oe=P[ye],ge[Oe.attrName]=Oe.value(q)||void 0))}),Object.keys(ge).length>0&&(W=D(W,ge)),W}function ie(q,W){var se=a.default.query(q);if(se==null)return W;if(se.prototype instanceof a.default.Embed){var ue={},re=se.value(q);re!=null&&(ue[se.blotName]=re,W=new d.default().insert(ue,se.formats(q)))}else typeof se.formats=="function"&&(W=D(W,se.blotName,se.formats(q)));return W}function fe(q,W){return z(W,`
`)||W.insert(`
`),W}function be(){return new d.default}function me(q,W){var se=a.default.query(q);if(se==null||se.blotName!=="list-item"||!z(W,`
`))return W;for(var ue=-1,re=q.parentNode;!re.classList.contains("ql-clipboard");)(a.default.query(re)||{}).blotName==="list"&&(ue+=1),re=re.parentNode;return ue<=0?W:W.compose(new d.default().retain(W.length()-1).retain(1,{indent:ue}))}function ve(q,W){return z(W,`
`)||(R(q)||W.length()>0&&q.nextSibling&&R(q.nextSibling))&&W.insert(`
`),W}function F(q,W){if(R(q)&&q.nextElementSibling!=null&&!z(W,`

`)){var se=q.offsetHeight+parseFloat(K(q).marginTop)+parseFloat(K(q).marginBottom);q.nextElementSibling.offsetTop>q.offsetTop+se*1.5&&W.insert(`
`)}return W}function X(q,W){var se={},ue=q.style||{};return ue.fontStyle&&K(q).fontStyle==="italic"&&(se.italic=!0),ue.fontWeight&&(K(q).fontWeight.startsWith("bold")||parseInt(K(q).fontWeight)>=700)&&(se.bold=!0),Object.keys(se).length>0&&(W=D(W,se)),parseFloat(ue.textIndent||0)>0&&(W=new d.default().insert("	").concat(W)),W}function G(q,W){var se=q.data;if(q.parentNode.tagName==="O:P")return W.insert(se.trim());if(se.trim().length===0&&q.parentNode.classList.contains("ql-clipboard"))return W;if(!K(q.parentNode).whiteSpace.startsWith("pre")){var ue=function(ge,ye){return ye=ye.replace(/[^\u00a0]/g,""),ye.length<1&&ge?" ":ye};se=se.replace(/\r\n/g," ").replace(/\n/g," "),se=se.replace(/\s\s+/g,ue.bind(ue,!0)),(q.previousSibling==null&&R(q.parentNode)||q.previousSibling!=null&&R(q.previousSibling))&&(se=se.replace(/^\s+/,ue.bind(ue,!1))),(q.nextSibling==null&&R(q.parentNode)||q.nextSibling!=null&&R(q.nextSibling))&&(se=se.replace(/\s+$/,ue.bind(ue,!1)))}return W.insert(se)}n.default=L,n.matchAttributor=Z,n.matchBlot=ie,n.matchNewline=ve,n.matchSpacing=F,n.matchText=G},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function p(b,w){for(var m=0;m<w.length;m++){var f=w[m];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}}return function(b,w,m){return w&&p(b.prototype,w),m&&p(b,m),b}}(),s=function p(b,w,m){b===null&&(b=Function.prototype);var f=Object.getOwnPropertyDescriptor(b,w);if(f===void 0){var g=Object.getPrototypeOf(b);return g===null?void 0:p(g,w,m)}else{if("value"in f)return f.value;var c=f.get;return c===void 0?void 0:c.call(m)}},u=r(6),h=y(u);function y(p){return p&&p.__esModule?p:{default:p}}function v(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function d(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function l(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var a=function(p){l(b,p);function b(){return v(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,[{key:"optimize",value:function(m){s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,m),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return s(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),b}(h.default);a.blotName="bold",a.tagName=["STRONG","B"],n.default=a},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var o=function(){function E(k,x){var N=[],C=!0,M=!1,j=void 0;try{for(var Q=k[Symbol.iterator](),$;!(C=($=Q.next()).done)&&(N.push($.value),!(x&&N.length===x));C=!0);}catch(B){M=!0,j=B}finally{try{!C&&Q.return&&Q.return()}finally{if(M)throw j}}return N}return function(k,x){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return E(k,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function E(k,x){for(var N=0;N<x.length;N++){var C=x[N];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(k,C.key,C)}}return function(k,x,N){return x&&E(k.prototype,x),N&&E(k,N),k}}(),u=r(2),h=m(u),y=r(0),v=m(y),d=r(5),l=m(d),a=r(10),p=m(a),b=r(9),w=m(b);function m(E){return E&&E.__esModule?E:{default:E}}function f(E,k,x){return k in E?Object.defineProperty(E,k,{value:x,enumerable:!0,configurable:!0,writable:!0}):E[k]=x,E}function g(E,k){if(!(E instanceof k))throw new TypeError("Cannot call a class as a function")}function c(E,k){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:E}function T(E,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);E.prototype=Object.create(k&&k.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(E,k):E.__proto__=k)}var A=(0,p.default)("quill:toolbar"),_=function(E){T(k,E);function k(x,N){g(this,k);var C=c(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,x,N));if(Array.isArray(C.options.container)){var M=document.createElement("div");I(M,C.options.container),x.container.parentNode.insertBefore(M,x.container),C.container=M}else typeof C.options.container=="string"?C.container=document.querySelector(C.options.container):C.container=C.options.container;if(!(C.container instanceof HTMLElement)){var j;return j=A.error("Container required for toolbar",C.options),c(C,j)}return C.container.classList.add("ql-toolbar"),C.controls=[],C.handlers={},Object.keys(C.options.handlers).forEach(function(Q){C.addHandler(Q,C.options.handlers[Q])}),[].forEach.call(C.container.querySelectorAll("button, select"),function(Q){C.attach(Q)}),C.quill.on(l.default.events.EDITOR_CHANGE,function(Q,$){Q===l.default.events.SELECTION_CHANGE&&C.update($)}),C.quill.on(l.default.events.SCROLL_OPTIMIZE,function(){var Q=C.quill.selection.getRange(),$=o(Q,1),B=$[0];C.update(B)}),C}return s(k,[{key:"addHandler",value:function(N,C){this.handlers[N]=C}},{key:"attach",value:function(N){var C=this,M=[].find.call(N.classList,function(Q){return Q.indexOf("ql-")===0});if(M){if(M=M.slice(3),N.tagName==="BUTTON"&&N.setAttribute("type","button"),this.handlers[M]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[M]==null){A.warn("ignoring attaching to disabled format",M,N);return}if(v.default.query(M)==null){A.warn("ignoring attaching to nonexistent format",M,N);return}}var j=N.tagName==="SELECT"?"change":"click";N.addEventListener(j,function(Q){var $=void 0;if(N.tagName==="SELECT"){if(N.selectedIndex<0)return;var B=N.options[N.selectedIndex];B.hasAttribute("selected")?$=!1:$=B.value||!1}else N.classList.contains("ql-active")?$=!1:$=N.value||!N.hasAttribute("value"),Q.preventDefault();C.quill.focus();var P=C.quill.selection.getRange(),L=o(P,1),D=L[0];if(C.handlers[M]!=null)C.handlers[M].call(C,$);else if(v.default.query(M).prototype instanceof v.default.Embed){if($=prompt("Enter "+M),!$)return;C.quill.updateContents(new h.default().retain(D.index).delete(D.length).insert(f({},M,$)),l.default.sources.USER)}else C.quill.format(M,$,l.default.sources.USER);C.update(D)}),this.controls.push([M,N])}}},{key:"update",value:function(N){var C=N==null?{}:this.quill.getFormat(N);this.controls.forEach(function(M){var j=o(M,2),Q=j[0],$=j[1];if($.tagName==="SELECT"){var B=void 0;if(N==null)B=null;else if(C[Q]==null)B=$.querySelector("option[selected]");else if(!Array.isArray(C[Q])){var P=C[Q];typeof P=="string"&&(P=P.replace(/\"/g,'\\"')),B=$.querySelector('option[value="'+P+'"]')}B==null?($.value="",$.selectedIndex=-1):B.selected=!0}else if(N==null)$.classList.remove("ql-active");else if($.hasAttribute("value")){var L=C[Q]===$.getAttribute("value")||C[Q]!=null&&C[Q].toString()===$.getAttribute("value")||C[Q]==null&&!$.getAttribute("value");$.classList.toggle("ql-active",L)}else $.classList.toggle("ql-active",C[Q]!=null)})}}]),k}(w.default);_.DEFAULTS={};function S(E,k,x){var N=document.createElement("button");N.setAttribute("type","button"),N.classList.add("ql-"+k),x!=null&&(N.value=x),E.appendChild(N)}function I(E,k){Array.isArray(k[0])||(k=[k]),k.forEach(function(x){var N=document.createElement("span");N.classList.add("ql-formats"),x.forEach(function(C){if(typeof C=="string")S(N,C);else{var M=Object.keys(C)[0],j=C[M];Array.isArray(j)?O(N,M,j):S(N,M,j)}}),E.appendChild(N)})}function O(E,k,x){var N=document.createElement("select");N.classList.add("ql-"+k),x.forEach(function(C){var M=document.createElement("option");C!==!1?M.setAttribute("value",C):M.setAttribute("selected","selected"),N.appendChild(M)}),E.appendChild(N)}_.DEFAULTS={container:null,handlers:{clean:function(){var k=this,x=this.quill.getSelection();if(x!=null)if(x.length==0){var N=this.quill.getFormat();Object.keys(N).forEach(function(C){v.default.query(C,v.default.Scope.INLINE)!=null&&k.quill.format(C,!1)})}else this.quill.removeFormat(x,l.default.sources.USER)},direction:function(k){var x=this.quill.getFormat().align;k==="rtl"&&x==null?this.quill.format("align","right",l.default.sources.USER):!k&&x==="right"&&this.quill.format("align",!1,l.default.sources.USER),this.quill.format("direction",k,l.default.sources.USER)},indent:function(k){var x=this.quill.getSelection(),N=this.quill.getFormat(x),C=parseInt(N.indent||0);if(k==="+1"||k==="-1"){var M=k==="+1"?1:-1;N.direction==="rtl"&&(M*=-1),this.quill.format("indent",C+M,l.default.sources.USER)}},link:function(k){k===!0&&(k=prompt("Enter link URL:")),this.quill.format("link",k,l.default.sources.USER)},list:function(k){var x=this.quill.getSelection(),N=this.quill.getFormat(x);k==="check"?N.list==="checked"||N.list==="unchecked"?this.quill.format("list",!1,l.default.sources.USER):this.quill.format("list","unchecked",l.default.sources.USER):this.quill.format("list",k,l.default.sources.USER)}}},n.default=_,n.addControls=I},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function p(b,w){for(var m=0;m<w.length;m++){var f=w[m];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}}return function(b,w,m){return w&&p(b.prototype,w),m&&p(b,m),b}}(),s=function p(b,w,m){b===null&&(b=Function.prototype);var f=Object.getOwnPropertyDescriptor(b,w);if(f===void 0){var g=Object.getPrototypeOf(b);return g===null?void 0:p(g,w,m)}else{if("value"in f)return f.value;var c=f.get;return c===void 0?void 0:c.call(m)}},u=r(28),h=y(u);function y(p){return p&&p.__esModule?p:{default:p}}function v(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function d(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function l(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var a=function(p){l(b,p);function b(w,m){v(this,b);var f=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,w));return f.label.innerHTML=m,f.container.classList.add("ql-color-picker"),[].slice.call(f.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(g){g.classList.add("ql-primary")}),f}return o(b,[{key:"buildItem",value:function(m){var f=s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"buildItem",this).call(this,m);return f.style.backgroundColor=m.getAttribute("value")||"",f}},{key:"selectItem",value:function(m,f){s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,m,f);var g=this.label.querySelector(".ql-color-label"),c=m&&m.getAttribute("data-value")||"";g&&(g.tagName==="line"?g.style.stroke=c:g.style.fill=c)}}]),b}(h.default);n.default=a},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function p(b,w){for(var m=0;m<w.length;m++){var f=w[m];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}}return function(b,w,m){return w&&p(b.prototype,w),m&&p(b,m),b}}(),s=function p(b,w,m){b===null&&(b=Function.prototype);var f=Object.getOwnPropertyDescriptor(b,w);if(f===void 0){var g=Object.getPrototypeOf(b);return g===null?void 0:p(g,w,m)}else{if("value"in f)return f.value;var c=f.get;return c===void 0?void 0:c.call(m)}},u=r(28),h=y(u);function y(p){return p&&p.__esModule?p:{default:p}}function v(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function d(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function l(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var a=function(p){l(b,p);function b(w,m){v(this,b);var f=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,w));return f.container.classList.add("ql-icon-picker"),[].forEach.call(f.container.querySelectorAll(".ql-picker-item"),function(g){g.innerHTML=m[g.getAttribute("data-value")||""]}),f.defaultItem=f.container.querySelector(".ql-selected"),f.selectItem(f.defaultItem),f}return o(b,[{key:"selectItem",value:function(m,f){s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,m,f),m=m||this.defaultItem,this.label.innerHTML=m.innerHTML}}]),b}(h.default);n.default=a},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function h(y,v){for(var d=0;d<v.length;d++){var l=v[d];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(y,l.key,l)}}return function(y,v,d){return v&&h(y.prototype,v),d&&h(y,d),y}}();function s(h,y){if(!(h instanceof y))throw new TypeError("Cannot call a class as a function")}var u=function(){function h(y,v){var d=this;s(this,h),this.quill=y,this.boundsContainer=v||document.body,this.root=y.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return o(h,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(v){var d=v.left+v.width/2-this.root.offsetWidth/2,l=v.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=l+"px",this.root.classList.remove("ql-flip");var a=this.boundsContainer.getBoundingClientRect(),p=this.root.getBoundingClientRect(),b=0;if(p.right>a.right&&(b=a.right-p.right,this.root.style.left=d+b+"px"),p.left<a.left&&(b=a.left-p.left,this.root.style.left=d+b+"px"),p.bottom>a.bottom){var w=p.bottom-p.top,m=v.bottom-v.top+w;this.root.style.top=l-m+"px",this.root.classList.add("ql-flip")}return b}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),h}();n.default=u},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function O(E,k){var x=[],N=!0,C=!1,M=void 0;try{for(var j=E[Symbol.iterator](),Q;!(N=(Q=j.next()).done)&&(x.push(Q.value),!(k&&x.length===k));N=!0);}catch($){C=!0,M=$}finally{try{!N&&j.return&&j.return()}finally{if(C)throw M}}return x}return function(E,k){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return O(E,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function O(E,k,x){E===null&&(E=Function.prototype);var N=Object.getOwnPropertyDescriptor(E,k);if(N===void 0){var C=Object.getPrototypeOf(E);return C===null?void 0:O(C,k,x)}else{if("value"in N)return N.value;var M=N.get;return M===void 0?void 0:M.call(x)}},u=function(){function O(E,k){for(var x=0;x<k.length;x++){var N=k[x];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(E,N.key,N)}}return function(E,k,x){return k&&O(E.prototype,k),x&&O(E,x),E}}(),h=r(3),y=g(h),v=r(8),d=g(v),l=r(43),a=g(l),p=r(27),b=g(p),w=r(15),m=r(41),f=g(m);function g(O){return O&&O.__esModule?O:{default:O}}function c(O,E){if(!(O instanceof E))throw new TypeError("Cannot call a class as a function")}function T(O,E){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:O}function A(O,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);O.prototype=Object.create(E&&E.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(O,E):O.__proto__=E)}var _=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],S=function(O){A(E,O);function E(k,x){c(this,E),x.modules.toolbar!=null&&x.modules.toolbar.container==null&&(x.modules.toolbar.container=_);var N=T(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,k,x));return N.quill.container.classList.add("ql-snow"),N}return u(E,[{key:"extendToolbar",value:function(x){x.container.classList.add("ql-snow"),this.buildButtons([].slice.call(x.container.querySelectorAll("button")),f.default),this.buildPickers([].slice.call(x.container.querySelectorAll("select")),f.default),this.tooltip=new I(this.quill,this.options.bounds),x.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(N,C){x.handlers.link.call(x,!C.format.link)})}}]),E}(a.default);S.DEFAULTS=(0,y.default)(!0,{},a.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){if(E){var k=this.quill.getSelection();if(k==null||k.length==0)return;var x=this.quill.getText(k);/^\S+@\S+\.\S+$/.test(x)&&x.indexOf("mailto:")!==0&&(x="mailto:"+x);var N=this.quill.theme.tooltip;N.edit("link",x)}else this.quill.format("link",!1)}}}}});var I=function(O){A(E,O);function E(k,x){c(this,E);var N=T(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,k,x));return N.preview=N.root.querySelector("a.ql-preview"),N}return u(E,[{key:"listen",value:function(){var x=this;s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(N){x.root.classList.contains("ql-editing")?x.save():x.edit("link",x.preview.textContent),N.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(N){if(x.linkRange!=null){var C=x.linkRange;x.restoreFocus(),x.quill.formatText(C,"link",!1,d.default.sources.USER),delete x.linkRange}N.preventDefault(),x.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function(N,C,M){if(N!=null){if(N.length===0&&M===d.default.sources.USER){var j=x.quill.scroll.descendant(b.default,N.index),Q=o(j,2),$=Q[0],B=Q[1];if($!=null){x.linkRange=new w.Range(N.index-B,$.length());var P=b.default.formats($.domNode);x.preview.textContent=P,x.preview.setAttribute("href",P),x.show(),x.position(x.quill.getBounds(x.linkRange));return}}else delete x.linkRange;x.hide()}})}},{key:"show",value:function(){s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),E}(l.BaseTooltip);I.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=S},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(29),s=re(o),u=r(36),h=r(38),y=r(64),v=r(65),d=re(v),l=r(66),a=re(l),p=r(67),b=re(p),w=r(37),m=r(26),f=r(39),g=r(40),c=r(56),T=re(c),A=r(68),_=re(A),S=r(27),I=re(S),O=r(69),E=re(O),k=r(70),x=re(k),N=r(71),C=re(N),M=r(72),j=re(M),Q=r(73),$=re(Q),B=r(13),P=re(B),L=r(74),D=re(L),K=r(75),z=re(K),R=r(57),U=re(R),H=r(41),Z=re(H),ie=r(28),fe=re(ie),be=r(59),me=re(be),ve=r(60),F=re(ve),X=r(61),G=re(X),q=r(108),W=re(q),se=r(62),ue=re(se);function re(ge){return ge&&ge.__esModule?ge:{default:ge}}s.default.register({"attributors/attribute/direction":h.DirectionAttribute,"attributors/class/align":u.AlignClass,"attributors/class/background":w.BackgroundClass,"attributors/class/color":m.ColorClass,"attributors/class/direction":h.DirectionClass,"attributors/class/font":f.FontClass,"attributors/class/size":g.SizeClass,"attributors/style/align":u.AlignStyle,"attributors/style/background":w.BackgroundStyle,"attributors/style/color":m.ColorStyle,"attributors/style/direction":h.DirectionStyle,"attributors/style/font":f.FontStyle,"attributors/style/size":g.SizeStyle},!0),s.default.register({"formats/align":u.AlignClass,"formats/direction":h.DirectionClass,"formats/indent":y.IndentClass,"formats/background":w.BackgroundStyle,"formats/color":m.ColorStyle,"formats/font":f.FontClass,"formats/size":g.SizeClass,"formats/blockquote":d.default,"formats/code-block":P.default,"formats/header":a.default,"formats/list":b.default,"formats/bold":T.default,"formats/code":B.Code,"formats/italic":_.default,"formats/link":I.default,"formats/script":E.default,"formats/strike":x.default,"formats/underline":C.default,"formats/image":j.default,"formats/video":$.default,"formats/list/item":p.ListItem,"modules/formula":D.default,"modules/syntax":z.default,"modules/toolbar":U.default,"themes/bubble":W.default,"themes/snow":ue.default,"ui/icons":Z.default,"ui/picker":fe.default,"ui/icon-picker":F.default,"ui/color-picker":me.default,"ui/tooltip":G.default},!0),n.default=s.default},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var o=function(){function b(w,m){for(var f=0;f<m.length;f++){var g=m[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(w,g.key,g)}}return function(w,m,f){return m&&b(w.prototype,m),f&&b(w,f),w}}(),s=function b(w,m,f){w===null&&(w=Function.prototype);var g=Object.getOwnPropertyDescriptor(w,m);if(g===void 0){var c=Object.getPrototypeOf(w);return c===null?void 0:b(c,m,f)}else{if("value"in g)return g.value;var T=g.get;return T===void 0?void 0:T.call(f)}},u=r(0),h=y(u);function y(b){return b&&b.__esModule?b:{default:b}}function v(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function d(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function l(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var a=function(b){l(w,b);function w(){return v(this,w),d(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return o(w,[{key:"add",value:function(f,g){if(g==="+1"||g==="-1"){var c=this.value(f)||0;g=g==="+1"?c+1:c-1}return g===0?(this.remove(f),!0):s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"add",this).call(this,f,g)}},{key:"canAdd",value:function(f,g){return s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,f,g)||s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,f,parseInt(g))}},{key:"value",value:function(f){return parseInt(s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,f))||void 0}}]),w}(h.default.Attributor.Class),p=new a("indent","ql-indent",{scope:h.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=p},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(4),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}function h(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function y(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function v(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var d=function(l){v(a,l);function a(){return h(this,a),y(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(s.default);d.blotName="blockquote",d.tagName="blockquote",n.default=d},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function a(p,b){for(var w=0;w<b.length;w++){var m=b[w];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(p,m.key,m)}}return function(p,b,w){return b&&a(p.prototype,b),w&&a(p,w),p}}(),s=r(4),u=h(s);function h(a){return a&&a.__esModule?a:{default:a}}function y(a,p){if(!(a instanceof p))throw new TypeError("Cannot call a class as a function")}function v(a,p){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:a}function d(a,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);a.prototype=Object.create(p&&p.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(a,p):a.__proto__=p)}var l=function(a){d(p,a);function p(){return y(this,p),v(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return o(p,null,[{key:"formats",value:function(w){return this.tagName.indexOf(w.tagName)+1}}]),p}(u.default);l.blotName="header",l.tagName=["H1","H2","H3","H4","H5","H6"],n.default=l},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var o=function(){function c(T,A){for(var _=0;_<A.length;_++){var S=A[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(T,S.key,S)}}return function(T,A,_){return A&&c(T.prototype,A),_&&c(T,_),T}}(),s=function c(T,A,_){T===null&&(T=Function.prototype);var S=Object.getOwnPropertyDescriptor(T,A);if(S===void 0){var I=Object.getPrototypeOf(T);return I===null?void 0:c(I,A,_)}else{if("value"in S)return S.value;var O=S.get;return O===void 0?void 0:O.call(_)}},u=r(0),h=a(u),y=r(4),v=a(y),d=r(25),l=a(d);function a(c){return c&&c.__esModule?c:{default:c}}function p(c,T,A){return T in c?Object.defineProperty(c,T,{value:A,enumerable:!0,configurable:!0,writable:!0}):c[T]=A,c}function b(c,T){if(!(c instanceof T))throw new TypeError("Cannot call a class as a function")}function w(c,T){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:c}function m(c,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);c.prototype=Object.create(T&&T.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(c,T):c.__proto__=T)}var f=function(c){m(T,c);function T(){return b(this,T),w(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return o(T,[{key:"format",value:function(_,S){_===g.blotName&&!S?this.replaceWith(h.default.create(this.statics.scope)):s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"format",this).call(this,_,S)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(_,S){return this.parent.isolate(this.offset(this.parent),this.length()),_===this.parent.statics.blotName?(this.parent.replaceWith(_,S),this):(this.parent.unwrap(),s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replaceWith",this).call(this,_,S))}}],[{key:"formats",value:function(_){return _.tagName===this.tagName?void 0:s(T.__proto__||Object.getPrototypeOf(T),"formats",this).call(this,_)}}]),T}(v.default);f.blotName="list-item",f.tagName="LI";var g=function(c){m(T,c),o(T,null,[{key:"create",value:function(_){var S=_==="ordered"?"OL":"UL",I=s(T.__proto__||Object.getPrototypeOf(T),"create",this).call(this,S);return(_==="checked"||_==="unchecked")&&I.setAttribute("data-checked",_==="checked"),I}},{key:"formats",value:function(_){if(_.tagName==="OL")return"ordered";if(_.tagName==="UL")return _.hasAttribute("data-checked")?_.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function T(A){b(this,T);var _=w(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,A)),S=function(O){if(O.target.parentNode===A){var E=_.statics.formats(A),k=h.default.find(O.target);E==="checked"?k.format("list","unchecked"):E==="unchecked"&&k.format("list","checked")}};return A.addEventListener("touchstart",S),A.addEventListener("mousedown",S),_}return o(T,[{key:"format",value:function(_,S){this.children.length>0&&this.children.tail.format(_,S)}},{key:"formats",value:function(){return p({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(_,S){if(_ instanceof f)s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertBefore",this).call(this,_,S);else{var I=S==null?this.length():S.offset(this),O=this.split(I);O.parent.insertBefore(_,O)}}},{key:"optimize",value:function(_){s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,_);var S=this.next;S!=null&&S.prev===this&&S.statics.blotName===this.statics.blotName&&S.domNode.tagName===this.domNode.tagName&&S.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(S.moveChildren(this),S.remove())}},{key:"replace",value:function(_){if(_.statics.blotName!==this.statics.blotName){var S=h.default.create(this.statics.defaultChild);_.moveChildren(S),this.appendChild(S)}s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replace",this).call(this,_)}}]),T}(l.default);g.blotName="list",g.scope=h.default.Scope.BLOCK_BLOT,g.tagName=["OL","UL"],g.defaultChild="list-item",g.allowedChildren=[f],n.ListItem=f,n.default=g},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(56),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}function h(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function y(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function v(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var d=function(l){v(a,l);function a(){return h(this,a),y(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(s.default);d.blotName="italic",d.tagName=["EM","I"],n.default=d},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function p(b,w){for(var m=0;m<w.length;m++){var f=w[m];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}}return function(b,w,m){return w&&p(b.prototype,w),m&&p(b,m),b}}(),s=function p(b,w,m){b===null&&(b=Function.prototype);var f=Object.getOwnPropertyDescriptor(b,w);if(f===void 0){var g=Object.getPrototypeOf(b);return g===null?void 0:p(g,w,m)}else{if("value"in f)return f.value;var c=f.get;return c===void 0?void 0:c.call(m)}},u=r(6),h=y(u);function y(p){return p&&p.__esModule?p:{default:p}}function v(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function d(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function l(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var a=function(p){l(b,p);function b(){return v(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,null,[{key:"create",value:function(m){return m==="super"?document.createElement("sup"):m==="sub"?document.createElement("sub"):s(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,m)}},{key:"formats",value:function(m){if(m.tagName==="SUB")return"sub";if(m.tagName==="SUP")return"super"}}]),b}(h.default);a.blotName="script",a.tagName=["SUB","SUP"],n.default=a},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(6),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}function h(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function y(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function v(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var d=function(l){v(a,l);function a(){return h(this,a),y(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(s.default);d.blotName="strike",d.tagName="S",n.default=d},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(6),s=u(o);function u(l){return l&&l.__esModule?l:{default:l}}function h(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function y(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function v(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var d=function(l){v(a,l);function a(){return h(this,a),y(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(s.default);d.blotName="underline",d.tagName="U",n.default=d},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function w(m,f){for(var g=0;g<f.length;g++){var c=f[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(m,c.key,c)}}return function(m,f,g){return f&&w(m.prototype,f),g&&w(m,g),m}}(),s=function w(m,f,g){m===null&&(m=Function.prototype);var c=Object.getOwnPropertyDescriptor(m,f);if(c===void 0){var T=Object.getPrototypeOf(m);return T===null?void 0:w(T,f,g)}else{if("value"in c)return c.value;var A=c.get;return A===void 0?void 0:A.call(g)}},u=r(0),h=v(u),y=r(27);function v(w){return w&&w.__esModule?w:{default:w}}function d(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}function l(w,m){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:w}function a(w,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);w.prototype=Object.create(m&&m.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(w,m):w.__proto__=m)}var p=["alt","height","width"],b=function(w){a(m,w);function m(){return d(this,m),l(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"format",value:function(g,c){p.indexOf(g)>-1?c?this.domNode.setAttribute(g,c):this.domNode.removeAttribute(g):s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,g,c)}}],[{key:"create",value:function(g){var c=s(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,g);return typeof g=="string"&&c.setAttribute("src",this.sanitize(g)),c}},{key:"formats",value:function(g){return p.reduce(function(c,T){return g.hasAttribute(T)&&(c[T]=g.getAttribute(T)),c},{})}},{key:"match",value:function(g){return/\.(jpe?g|gif|png)$/.test(g)||/^data:image\/.+;base64/.test(g)}},{key:"sanitize",value:function(g){return(0,y.sanitize)(g,["http","https","data"])?g:"//:0"}},{key:"value",value:function(g){return g.getAttribute("src")}}]),m}(h.default.Embed);b.blotName="image",b.tagName="IMG",n.default=b},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function w(m,f){for(var g=0;g<f.length;g++){var c=f[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(m,c.key,c)}}return function(m,f,g){return f&&w(m.prototype,f),g&&w(m,g),m}}(),s=function w(m,f,g){m===null&&(m=Function.prototype);var c=Object.getOwnPropertyDescriptor(m,f);if(c===void 0){var T=Object.getPrototypeOf(m);return T===null?void 0:w(T,f,g)}else{if("value"in c)return c.value;var A=c.get;return A===void 0?void 0:A.call(g)}},u=r(4),h=r(27),y=v(h);function v(w){return w&&w.__esModule?w:{default:w}}function d(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}function l(w,m){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:w}function a(w,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);w.prototype=Object.create(m&&m.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(w,m):w.__proto__=m)}var p=["height","width"],b=function(w){a(m,w);function m(){return d(this,m),l(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"format",value:function(g,c){p.indexOf(g)>-1?c?this.domNode.setAttribute(g,c):this.domNode.removeAttribute(g):s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,g,c)}}],[{key:"create",value:function(g){var c=s(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,g);return c.setAttribute("frameborder","0"),c.setAttribute("allowfullscreen",!0),c.setAttribute("src",this.sanitize(g)),c}},{key:"formats",value:function(g){return p.reduce(function(c,T){return g.hasAttribute(T)&&(c[T]=g.getAttribute(T)),c},{})}},{key:"sanitize",value:function(g){return y.default.sanitize(g)}},{key:"value",value:function(g){return g.getAttribute("src")}}]),m}(u.BlockEmbed);b.blotName="video",b.className="ql-video",b.tagName="IFRAME",n.default=b},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var o=function(){function g(c,T){for(var A=0;A<T.length;A++){var _=T[A];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(c,_.key,_)}}return function(c,T,A){return T&&g(c.prototype,T),A&&g(c,A),c}}(),s=function g(c,T,A){c===null&&(c=Function.prototype);var _=Object.getOwnPropertyDescriptor(c,T);if(_===void 0){var S=Object.getPrototypeOf(c);return S===null?void 0:g(S,T,A)}else{if("value"in _)return _.value;var I=_.get;return I===void 0?void 0:I.call(A)}},u=r(35),h=a(u),y=r(5),v=a(y),d=r(9),l=a(d);function a(g){return g&&g.__esModule?g:{default:g}}function p(g,c){if(!(g instanceof c))throw new TypeError("Cannot call a class as a function")}function b(g,c){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:g}function w(g,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);g.prototype=Object.create(c&&c.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(g,c):g.__proto__=c)}var m=function(g){w(c,g);function c(){return p(this,c),b(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return o(c,null,[{key:"create",value:function(A){var _=s(c.__proto__||Object.getPrototypeOf(c),"create",this).call(this,A);return typeof A=="string"&&(window.katex.render(A,_,{throwOnError:!1,errorColor:"#f00"}),_.setAttribute("data-value",A)),_}},{key:"value",value:function(A){return A.getAttribute("data-value")}}]),c}(h.default);m.blotName="formula",m.className="ql-formula",m.tagName="SPAN";var f=function(g){w(c,g),o(c,null,[{key:"register",value:function(){v.default.register(m,!0)}}]);function c(){p(this,c);var T=b(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return T}return c}(l.default);n.FormulaBlot=m,n.default=f},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var o=function(){function A(_,S){for(var I=0;I<S.length;I++){var O=S[I];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(_,O.key,O)}}return function(_,S,I){return S&&A(_.prototype,S),I&&A(_,I),_}}(),s=function A(_,S,I){_===null&&(_=Function.prototype);var O=Object.getOwnPropertyDescriptor(_,S);if(O===void 0){var E=Object.getPrototypeOf(_);return E===null?void 0:A(E,S,I)}else{if("value"in O)return O.value;var k=O.get;return k===void 0?void 0:k.call(I)}},u=r(0),h=b(u),y=r(5),v=b(y),d=r(9),l=b(d),a=r(13),p=b(a);function b(A){return A&&A.__esModule?A:{default:A}}function w(A,_){if(!(A instanceof _))throw new TypeError("Cannot call a class as a function")}function m(A,_){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:A}function f(A,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);A.prototype=Object.create(_&&_.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(A,_):A.__proto__=_)}var g=function(A){f(_,A);function _(){return w(this,_),m(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,[{key:"replaceWith",value:function(I){this.domNode.textContent=this.domNode.textContent,this.attach(),s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"replaceWith",this).call(this,I)}},{key:"highlight",value:function(I){var O=this.domNode.textContent;this.cachedText!==O&&((O.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=I(O),this.domNode.normalize(),this.attach()),this.cachedText=O)}}]),_}(p.default);g.className="ql-syntax";var c=new h.default.Attributor.Class("token","hljs",{scope:h.default.Scope.INLINE}),T=function(A){f(_,A),o(_,null,[{key:"register",value:function(){v.default.register(c,!0),v.default.register(g,!0)}}]);function _(S,I){w(this,_);var O=m(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,S,I));if(typeof O.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var E=null;return O.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(E),E=setTimeout(function(){O.highlight(),E=null},O.options.interval)}),O.highlight(),O}return o(_,[{key:"highlight",value:function(){var I=this;if(!this.quill.selection.composing){this.quill.update(v.default.sources.USER);var O=this.quill.getSelection();this.quill.scroll.descendants(g).forEach(function(E){E.highlight(I.options.highlight)}),this.quill.update(v.default.sources.SILENT),O!=null&&this.quill.setSelection(O,v.default.sources.SILENT)}}}]),_}(l.default);T.DEFAULTS={highlight:function(){return window.hljs==null?null:function(A){var _=window.hljs.highlightAuto(A);return _.value}}(),interval:1e3},n.CodeBlock=g,n.CodeToken=c,n.default=T},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,n){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,n){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,n){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,n){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var o=function _(S,I,O){S===null&&(S=Function.prototype);var E=Object.getOwnPropertyDescriptor(S,I);if(E===void 0){var k=Object.getPrototypeOf(S);return k===null?void 0:_(k,I,O)}else{if("value"in E)return E.value;var x=E.get;return x===void 0?void 0:x.call(O)}},s=function(){function _(S,I){for(var O=0;O<I.length;O++){var E=I[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(S,E.key,E)}}return function(S,I,O){return I&&_(S.prototype,I),O&&_(S,O),S}}(),u=r(3),h=w(u),y=r(8),v=w(y),d=r(43),l=w(d),a=r(15),p=r(41),b=w(p);function w(_){return _&&_.__esModule?_:{default:_}}function m(_,S){if(!(_ instanceof S))throw new TypeError("Cannot call a class as a function")}function f(_,S){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:_}function g(_,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);_.prototype=Object.create(S&&S.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(_,S):_.__proto__=S)}var c=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],T=function(_){g(S,_);function S(I,O){m(this,S),O.modules.toolbar!=null&&O.modules.toolbar.container==null&&(O.modules.toolbar.container=c);var E=f(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,I,O));return E.quill.container.classList.add("ql-bubble"),E}return s(S,[{key:"extendToolbar",value:function(O){this.tooltip=new A(this.quill,this.options.bounds),this.tooltip.root.appendChild(O.container),this.buildButtons([].slice.call(O.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(O.container.querySelectorAll("select")),b.default)}}]),S}(l.default);T.DEFAULTS=(0,h.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(S){S?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var A=function(_){g(S,_);function S(I,O){m(this,S);var E=f(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,I,O));return E.quill.on(v.default.events.EDITOR_CHANGE,function(k,x,N,C){if(k===v.default.events.SELECTION_CHANGE)if(x!=null&&x.length>0&&C===v.default.sources.USER){E.show(),E.root.style.left="0px",E.root.style.width="",E.root.style.width=E.root.offsetWidth+"px";var M=E.quill.getLines(x.index,x.length);if(M.length===1)E.position(E.quill.getBounds(x));else{var j=M[M.length-1],Q=E.quill.getIndex(j),$=Math.min(j.length()-1,x.index+x.length-Q),B=E.quill.getBounds(new a.Range(Q,$));E.position(B)}}else document.activeElement!==E.textbox&&E.quill.hasFocus()&&E.hide()}),E}return s(S,[{key:"listen",value:function(){var O=this;o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){O.root.classList.remove("ql-editing")}),this.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!O.root.classList.contains("ql-hidden")){var E=O.quill.getSelection();E!=null&&O.position(O.quill.getBounds(E))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(O){var E=o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"position",this).call(this,O),k=this.root.querySelector(".ql-tooltip-arrow");if(k.style.marginLeft="",E===0)return E;k.style.marginLeft=-1*E-k.offsetWidth/2+"px"}}]),S}(d.BaseTooltip);A.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=A,n.default=T},function(t,n,r){t.exports=r(63)}]).default})})(nl);var If=nl.exports;const Es=tl(If);var rl={exports:{}};/*! For license information please see quill-cursors.js.LICENSE.txt */(function(i,e){(function(t,n){i.exports=n()})(self,()=>(()=>{var t={582:(s,u,h)=>{h.d(u,{Z:()=>a});var y=h(81),v=h.n(y),d=h(645),l=h.n(d)()(v());l.push([s.id,".ql-container{position:relative;overflow:hidden}@media(pointer: coarse){.ql-cursor-caret-container{z-index:-1}}.ql-cursor.hidden{display:none}.ql-cursor .ql-cursor-caret-container,.ql-cursor .ql-cursor-flag{position:absolute}.ql-cursor .ql-cursor-flag{z-index:1;transform:translate3d(-1px, -100%, 0);opacity:0;visibility:hidden;color:#fff;padding-bottom:2px;border-radius:0 3px 3px 0}.ql-cursor .ql-cursor-flag.flag-flipped{border-radius:3px 0 0 3px;transform:translate3d(calc(-100% + 1px ), -100%, 0)}@media screen{.ql-cursor .ql-cursor-flag{transition:opacity 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms,visibility 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms}}.ql-cursor .ql-cursor-flag .ql-cursor-name{margin-left:5px;margin-right:5px;display:inline-block;margin-top:-2px;white-space:nowrap}.ql-cursor .ql-cursor-flag.no-delay[style]{transition-delay:unset !important}.ql-cursor .ql-cursor-caret-container{cursor:text;margin-left:-9px;padding:0 9px}.ql-cursor .ql-cursor-caret-container.hover+.ql-cursor-flag{opacity:1;visibility:visible;transition:none}.ql-cursor .ql-cursor-caret-container.no-pointer{pointer-events:none}.ql-cursor .ql-cursor-caret-container .ql-cursor-caret{position:absolute;top:0;bottom:0;width:2px;margin-left:-1px;background-color:attr(data-color)}.ql-cursor .ql-cursor-selection-block{position:absolute;pointer-events:none}",""]);const a=l},645:s=>{s.exports=function(u){var h=[];return h.toString=function(){return this.map(function(y){var v="",d=y[5]!==void 0;return y[4]&&(v+="@supports (".concat(y[4],") {")),y[2]&&(v+="@media ".concat(y[2]," {")),d&&(v+="@layer".concat(y[5].length>0?" ".concat(y[5]):""," {")),v+=u(y),d&&(v+="}"),y[2]&&(v+="}"),y[4]&&(v+="}"),v}).join("")},h.i=function(y,v,d,l,a){typeof y=="string"&&(y=[[null,y,void 0]]);var p={};if(d)for(var b=0;b<this.length;b++){var w=this[b][0];w!=null&&(p[w]=!0)}for(var m=0;m<y.length;m++){var f=[].concat(y[m]);d&&p[f[0]]||(a!==void 0&&(f[5]===void 0||(f[1]="@layer".concat(f[5].length>0?" ".concat(f[5]):""," {").concat(f[1],"}")),f[5]=a),v&&(f[2]&&(f[1]="@media ".concat(f[2]," {").concat(f[1],"}")),f[2]=v),l&&(f[4]?(f[1]="@supports (".concat(f[4],") {").concat(f[1],"}"),f[4]=l):f[4]="".concat(l)),h.push(f))}},h}},81:s=>{s.exports=function(u){return u[1]}},465:(s,u,h)=>{s=h.nmd(s);var y="__lodash_hash_undefined__",v=9007199254740991,d="[object Arguments]",l="[object Boolean]",a="[object Date]",p="[object Function]",b="[object GeneratorFunction]",w="[object Map]",m="[object Number]",f="[object Object]",g="[object Promise]",c="[object RegExp]",T="[object Set]",A="[object String]",_="[object Symbol]",S="[object WeakMap]",I="[object ArrayBuffer]",O="[object DataView]",E="[object Float32Array]",k="[object Float64Array]",x="[object Int8Array]",N="[object Int16Array]",C="[object Int32Array]",M="[object Uint8Array]",j="[object Uint8ClampedArray]",Q="[object Uint16Array]",$="[object Uint32Array]",B=/\w*$/,P=/^\[object .+?Constructor\]$/,L=/^(?:0|[1-9]\d*)$/,D={};D[d]=D["[object Array]"]=D[I]=D[O]=D[l]=D[a]=D[E]=D[k]=D[x]=D[N]=D[C]=D[w]=D[m]=D[f]=D[c]=D[T]=D[A]=D[_]=D[M]=D[j]=D[Q]=D[$]=!0,D["[object Error]"]=D[p]=D[S]=!1;var K=typeof h.g=="object"&&h.g&&h.g.Object===Object&&h.g,z=typeof self=="object"&&self&&self.Object===Object&&self,R=K||z||Function("return this")(),U=u&&!u.nodeType&&u,H=U&&s&&!s.nodeType&&s,Z=H&&H.exports===U;function ie(V,oe){return V.set(oe[0],oe[1]),V}function fe(V,oe){return V.add(oe),V}function be(V,oe,pe,we){var Be=-1,He=V?V.length:0;for(we;++Be<He;)pe=oe(pe,V[Be],Be,V);return pe}function me(V){var oe=!1;if(V!=null&&typeof V.toString!="function")try{oe=!!(V+"")}catch{}return oe}function ve(V){var oe=-1,pe=Array(V.size);return V.forEach(function(we,Be){pe[++oe]=[Be,we]}),pe}function F(V,oe){return function(pe){return V(oe(pe))}}function X(V){var oe=-1,pe=Array(V.size);return V.forEach(function(we){pe[++oe]=we}),pe}var G,q=Array.prototype,W=Function.prototype,se=Object.prototype,ue=R["__core-js_shared__"],re=(G=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",ge=W.toString,ye=se.hasOwnProperty,Oe=se.toString,Fe=RegExp("^"+ge.call(ye).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=Z?R.Buffer:void 0,xe=R.Symbol,Pe=R.Uint8Array,ce=F(Object.getPrototypeOf,Object),De=Object.create,Tt=se.propertyIsEnumerable,nn=q.splice,yt=Object.getOwnPropertySymbols,Ut=Ue?Ue.isBuffer:void 0,Lt=F(Object.keys,Object),kt=sn(R,"DataView"),At=sn(R,"Map"),$t=sn(R,"Promise"),nt=sn(R,"Set"),xt=sn(R,"WeakMap"),Nt=sn(Object,"create"),br=ln(kt),rn=ln(At),wr=ln($t),sr=ln(nt),di=ln(xt),jr=xe?xe.prototype:void 0,Ur=jr?jr.valueOf:void 0;function on(V){var oe=-1,pe=V?V.length:0;for(this.clear();++oe<pe;){var we=V[oe];this.set(we[0],we[1])}}function _t(V){var oe=-1,pe=V?V.length:0;for(this.clear();++oe<pe;){var we=V[oe];this.set(we[0],we[1])}}function It(V){var oe=-1,pe=V?V.length:0;for(this.clear();++oe<pe;){var we=V[oe];this.set(we[0],we[1])}}function zn(V){this.__data__=new _t(V)}function zt(V,oe,pe){var we=V[oe];ye.call(V,oe)&&mi(we,pe)&&(pe!==void 0||oe in V)||(V[oe]=pe)}function Tr(V,oe){for(var pe=V.length;pe--;)if(mi(V[pe][0],oe))return pe;return-1}function Jt(V,oe,pe,we,Be,He,Ye){var je;if(we&&(je=He?we(V,Be,He,Ye):we(V)),je!==void 0)return je;if(!Je(V))return V;var rt=Y(V);if(rt){if(je=function(Ie){var Ke=Ie.length,it=Ie.constructor(Ke);return Ke&&typeof Ie[0]=="string"&&ye.call(Ie,"index")&&(it.index=Ie.index,it.input=Ie.input),it}(V),!oe)return function(Ie,Ke){var it=-1,qe=Ie.length;for(Ke||(Ke=Array(qe));++it<qe;)Ke[it]=Ie[it];return Ke}(V,je)}else{var Ze=an(V),un=Ze==p||Ze==b;if(de(V))return function(Ie,Ke){if(Ke)return Ie.slice();var it=new Ie.constructor(Ie.length);return Ie.copy(it),it}(V,oe);if(Ze==f||Ze==d||un&&!He){if(me(V))return He?V:{};if(je=function(Ie){return typeof Ie.constructor!="function"||Jn(Ie)?{}:Je(Ke=ce(Ie))?De(Ke):{};var Ke}(un?{}:V),!oe)return function(Ie,Ke){return gi(Ie,$r(Ie),Ke)}(V,function(Ie,Ke){return Ie&&gi(Ke,Me(Ke),Ie)}(je,V))}else{if(!D[Ze])return He?V:{};je=function(Ie,Ke,it,qe){var ze,Vt=Ie.constructor;switch(Ke){case I:return Ar(Ie);case l:case a:return new Vt(+Ie);case O:return function($e,ft){var Qe=ft?Ar($e.buffer):$e.buffer;return new $e.constructor(Qe,$e.byteOffset,$e.byteLength)}(Ie,qe);case E:case k:case x:case N:case C:case M:case j:case Q:case $:return function($e,ft){var Qe=ft?Ar($e.buffer):$e.buffer;return new $e.constructor(Qe,$e.byteOffset,$e.length)}(Ie,qe);case w:return function($e,ft,Qe){return be(ft?Qe(ve($e),!0):ve($e),ie,new $e.constructor)}(Ie,qe,it);case m:case A:return new Vt(Ie);case c:return function($e){var ft=new $e.constructor($e.source,B.exec($e));return ft.lastIndex=$e.lastIndex,ft}(Ie);case T:return function($e,ft,Qe){return be(ft?Qe(X($e),!0):X($e),fe,new $e.constructor)}(Ie,qe,it);case _:return ze=Ie,Ur?Object(Ur.call(ze)):{}}}(V,Ze,Jt,oe)}}Ye||(Ye=new zn);var Cn=Ye.get(V);if(Cn)return Cn;if(Ye.set(V,je),!rt)var Vn=pe?function(Ie){return function(Ke,it,qe){var ze=it(Ke);return Y(Ke)?ze:function(Vt,$e){for(var ft=-1,Qe=$e.length,Kt=Vt.length;++ft<Qe;)Vt[Kt+ft]=$e[ft];return Vt}(ze,qe(Ke))}(Ie,Me,$r)}(V):Me(V);return function(Ie,Ke){for(var it=-1,qe=Ie?Ie.length:0;++it<qe&&Ke(Ie[it],it)!==!1;);}(Vn||V,function(Ie,Ke){Vn&&(Ie=V[Ke=Ie]),zt(je,Ke,Jt(Ie,oe,pe,we,Ke,V,Ye))}),je}function Ar(V){var oe=new V.constructor(V.byteLength);return new Pe(oe).set(new Pe(V)),oe}function gi(V,oe,pe,we){pe||(pe={});for(var Be=-1,He=oe.length;++Be<He;){var Ye=oe[Be],je=void 0;zt(pe,Ye,je===void 0?V[Ye]:je)}return pe}function Pn(V,oe){var pe,we,Be=V.__data__;return((we=typeof(pe=oe))=="string"||we=="number"||we=="symbol"||we=="boolean"?pe!=="__proto__":pe===null)?Be[typeof oe=="string"?"string":"hash"]:Be.map}function sn(V,oe){var pe=function(we,Be){return we==null?void 0:we[Be]}(V,oe);return function(we){return!(!Je(we)||(Be=we,re&&re in Be))&&(_e(we)||me(we)?Fe:P).test(ln(we));var Be}(pe)?pe:void 0}on.prototype.clear=function(){this.__data__=Nt?Nt(null):{}},on.prototype.delete=function(V){return this.has(V)&&delete this.__data__[V]},on.prototype.get=function(V){var oe=this.__data__;if(Nt){var pe=oe[V];return pe===y?void 0:pe}return ye.call(oe,V)?oe[V]:void 0},on.prototype.has=function(V){var oe=this.__data__;return Nt?oe[V]!==void 0:ye.call(oe,V)},on.prototype.set=function(V,oe){return this.__data__[V]=Nt&&oe===void 0?y:oe,this},_t.prototype.clear=function(){this.__data__=[]},_t.prototype.delete=function(V){var oe=this.__data__,pe=Tr(oe,V);return!(pe<0||(pe==oe.length-1?oe.pop():nn.call(oe,pe,1),0))},_t.prototype.get=function(V){var oe=this.__data__,pe=Tr(oe,V);return pe<0?void 0:oe[pe][1]},_t.prototype.has=function(V){return Tr(this.__data__,V)>-1},_t.prototype.set=function(V,oe){var pe=this.__data__,we=Tr(pe,V);return we<0?pe.push([V,oe]):pe[we][1]=oe,this},It.prototype.clear=function(){this.__data__={hash:new on,map:new(At||_t),string:new on}},It.prototype.delete=function(V){return Pn(this,V).delete(V)},It.prototype.get=function(V){return Pn(this,V).get(V)},It.prototype.has=function(V){return Pn(this,V).has(V)},It.prototype.set=function(V,oe){return Pn(this,V).set(V,oe),this},zn.prototype.clear=function(){this.__data__=new _t},zn.prototype.delete=function(V){return this.__data__.delete(V)},zn.prototype.get=function(V){return this.__data__.get(V)},zn.prototype.has=function(V){return this.__data__.has(V)},zn.prototype.set=function(V,oe){var pe=this.__data__;if(pe instanceof _t){var we=pe.__data__;if(!At||we.length<199)return we.push([V,oe]),this;pe=this.__data__=new It(we)}return pe.set(V,oe),this};var $r=yt?F(yt,Object):function(){return[]},an=function(V){return Oe.call(V)};function pi(V,oe){return!!(oe=oe??v)&&(typeof V=="number"||L.test(V))&&V>-1&&V%1==0&&V<oe}function Jn(V){var oe=V&&V.constructor;return V===(typeof oe=="function"&&oe.prototype||se)}function ln(V){if(V!=null){try{return ge.call(V)}catch{}try{return V+""}catch{}}return""}function mi(V,oe){return V===oe||V!=V&&oe!=oe}(kt&&an(new kt(new ArrayBuffer(1)))!=O||At&&an(new At)!=w||$t&&an($t.resolve())!=g||nt&&an(new nt)!=T||xt&&an(new xt)!=S)&&(an=function(V){var oe=Oe.call(V),pe=oe==f?V.constructor:void 0,we=pe?ln(pe):void 0;if(we)switch(we){case br:return O;case rn:return w;case wr:return g;case sr:return T;case di:return S}return oe});var Y=Array.isArray;function ae(V){return V!=null&&function(oe){return typeof oe=="number"&&oe>-1&&oe%1==0&&oe<=v}(V.length)&&!_e(V)}var de=Ut||function(){return!1};function _e(V){var oe=Je(V)?Oe.call(V):"";return oe==p||oe==b}function Je(V){var oe=typeof V;return!!V&&(oe=="object"||oe=="function")}function Me(V){return ae(V)?function(oe,pe){var we=Y(oe)||function(je){return function(rt){return function(Ze){return!!Ze&&typeof Ze=="object"}(rt)&&ae(rt)}(je)&&ye.call(je,"callee")&&(!Tt.call(je,"callee")||Oe.call(je)==d)}(oe)?function(je,rt){for(var Ze=-1,un=Array(je);++Ze<je;)un[Ze]=rt(Ze);return un}(oe.length,String):[],Be=we.length,He=!!Be;for(var Ye in oe)!ye.call(oe,Ye)||He&&(Ye=="length"||pi(Ye,Be))||we.push(Ye);return we}(V):function(oe){if(!Jn(oe))return Lt(oe);var pe=[];for(var we in Object(oe))ye.call(oe,we)&&we!="constructor"&&pe.push(we);return pe}(V)}s.exports=function(V){return Jt(V,!0,!0)}},307:(s,u,h)=>{s=h.nmd(s);var y="__lodash_hash_undefined__",v=9007199254740991,d="[object Arguments]",l="[object Array]",a="[object Boolean]",p="[object Date]",b="[object Error]",w="[object Function]",m="[object Map]",f="[object Number]",g="[object Object]",c="[object Promise]",T="[object RegExp]",A="[object Set]",_="[object String]",S="[object WeakMap]",I="[object ArrayBuffer]",O="[object DataView]",E=/^\[object .+?Constructor\]$/,k=/^(?:0|[1-9]\d*)$/,x={};x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x[d]=x[l]=x[I]=x[a]=x[O]=x[p]=x[b]=x[w]=x[m]=x[f]=x[g]=x[T]=x[A]=x[_]=x[S]=!1;var N=typeof h.g=="object"&&h.g&&h.g.Object===Object&&h.g,C=typeof self=="object"&&self&&self.Object===Object&&self,M=N||C||Function("return this")(),j=u&&!u.nodeType&&u,Q=j&&s&&!s.nodeType&&s,$=Q&&Q.exports===j,B=$&&N.process,P=function(){try{return B&&B.binding&&B.binding("util")}catch{}}(),L=P&&P.isTypedArray;function D(Y,ae){for(var de=-1,_e=Y==null?0:Y.length;++de<_e;)if(ae(Y[de],de,Y))return!0;return!1}function K(Y){var ae=-1,de=Array(Y.size);return Y.forEach(function(_e,Je){de[++ae]=[Je,_e]}),de}function z(Y){var ae=-1,de=Array(Y.size);return Y.forEach(function(_e){de[++ae]=_e}),de}var R,U,H,Z=Array.prototype,ie=Function.prototype,fe=Object.prototype,be=M["__core-js_shared__"],me=ie.toString,ve=fe.hasOwnProperty,F=(R=/[^.]+$/.exec(be&&be.keys&&be.keys.IE_PROTO||""))?"Symbol(src)_1."+R:"",X=fe.toString,G=RegExp("^"+me.call(ve).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),q=$?M.Buffer:void 0,W=M.Symbol,se=M.Uint8Array,ue=fe.propertyIsEnumerable,re=Z.splice,ge=W?W.toStringTag:void 0,ye=Object.getOwnPropertySymbols,Oe=q?q.isBuffer:void 0,Fe=(U=Object.keys,H=Object,function(Y){return U(H(Y))}),Ue=It(M,"DataView"),xe=It(M,"Map"),Pe=It(M,"Promise"),ce=It(M,"Set"),De=It(M,"WeakMap"),Tt=It(Object,"create"),nn=Jt(Ue),yt=Jt(xe),Ut=Jt(Pe),Lt=Jt(ce),kt=Jt(De),At=W?W.prototype:void 0,$t=At?At.valueOf:void 0;function nt(Y){var ae=-1,de=Y==null?0:Y.length;for(this.clear();++ae<de;){var _e=Y[ae];this.set(_e[0],_e[1])}}function xt(Y){var ae=-1,de=Y==null?0:Y.length;for(this.clear();++ae<de;){var _e=Y[ae];this.set(_e[0],_e[1])}}function Nt(Y){var ae=-1,de=Y==null?0:Y.length;for(this.clear();++ae<de;){var _e=Y[ae];this.set(_e[0],_e[1])}}function br(Y){var ae=-1,de=Y==null?0:Y.length;for(this.__data__=new Nt;++ae<de;)this.add(Y[ae])}function rn(Y){var ae=this.__data__=new xt(Y);this.size=ae.size}function wr(Y,ae){for(var de=Y.length;de--;)if(Ar(Y[de][0],ae))return de;return-1}function sr(Y){return Y==null?Y===void 0?"[object Undefined]":"[object Null]":ge&&ge in Object(Y)?function(ae){var de=ve.call(ae,ge),_e=ae[ge];try{ae[ge]=void 0;var Je=!0}catch{}var Me=X.call(ae);return Je&&(de?ae[ge]=_e:delete ae[ge]),Me}(Y):function(ae){return X.call(ae)}(Y)}function di(Y){return Jn(Y)&&sr(Y)==d}function jr(Y,ae,de,_e,Je){return Y===ae||(Y==null||ae==null||!Jn(Y)&&!Jn(ae)?Y!=Y&&ae!=ae:function(Me,V,oe,pe,we,Be){var He=Pn(Me),Ye=Pn(V),je=He?l:zt(Me),rt=Ye?l:zt(V),Ze=(je=je==d?g:je)==g,un=(rt=rt==d?g:rt)==g,Cn=je==rt;if(Cn&&sn(Me)){if(!sn(V))return!1;He=!0,Ze=!1}if(Cn&&!Ze)return Be||(Be=new rn),He||ln(Me)?Ur(Me,V,oe,pe,we,Be):function(qe,ze,Vt,$e,ft,Qe,Kt){switch(Vt){case O:if(qe.byteLength!=ze.byteLength||qe.byteOffset!=ze.byteOffset)return!1;qe=qe.buffer,ze=ze.buffer;case I:return!(qe.byteLength!=ze.byteLength||!Qe(new se(qe),new se(ze)));case a:case p:case f:return Ar(+qe,+ze);case b:return qe.name==ze.name&&qe.message==ze.message;case T:case _:return qe==ze+"";case m:var Kn=K;case A:var zr=1&$e;if(Kn||(Kn=z),qe.size!=ze.size&&!zr)return!1;var ar=Kt.get(qe);if(ar)return ar==ze;$e|=2,Kt.set(qe,ze);var Rn=Ur(Kn(qe),Kn(ze),$e,ft,Qe,Kt);return Kt.delete(qe),Rn;case"[object Symbol]":if($t)return $t.call(qe)==$t.call(ze)}return!1}(Me,V,je,oe,pe,we,Be);if(!(1&oe)){var Vn=Ze&&ve.call(Me,"__wrapped__"),Ie=un&&ve.call(V,"__wrapped__");if(Vn||Ie){var Ke=Vn?Me.value():Me,it=Ie?V.value():V;return Be||(Be=new rn),we(Ke,it,oe,pe,Be)}}return!!Cn&&(Be||(Be=new rn),function(qe,ze,Vt,$e,ft,Qe){var Kt=1&Vt,Kn=on(qe),zr=Kn.length;if(zr!=on(ze).length&&!Kt)return!1;for(var ar=zr;ar--;){var Rn=Kn[ar];if(!(Kt?Rn in ze:ve.call(ze,Rn)))return!1}var Mo=Qe.get(qe);if(Mo&&Qe.get(ze))return Mo==ze;var yi=!0;Qe.set(qe,ze),Qe.set(ze,qe);for(var Qi=Kt;++ar<zr;){var vi=qe[Rn=Kn[ar]],bi=ze[Rn];if($e)var Bo=Kt?$e(bi,vi,Rn,ze,qe,Qe):$e(vi,bi,Rn,qe,ze,Qe);if(!(Bo===void 0?vi===bi||ft(vi,bi,Vt,$e,Qe):Bo)){yi=!1;break}Qi||(Qi=Rn=="constructor")}if(yi&&!Qi){var wi=qe.constructor,Ti=ze.constructor;wi==Ti||!("constructor"in qe)||!("constructor"in ze)||typeof wi=="function"&&wi instanceof wi&&typeof Ti=="function"&&Ti instanceof Ti||(yi=!1)}return Qe.delete(qe),Qe.delete(ze),yi}(Me,V,oe,pe,we,Be))}(Y,ae,de,_e,jr,Je))}function Ur(Y,ae,de,_e,Je,Me){var V=1&de,oe=Y.length,pe=ae.length;if(oe!=pe&&!(V&&pe>oe))return!1;var we=Me.get(Y);if(we&&Me.get(ae))return we==ae;var Be=-1,He=!0,Ye=2&de?new br:void 0;for(Me.set(Y,ae),Me.set(ae,Y);++Be<oe;){var je=Y[Be],rt=ae[Be];if(_e)var Ze=V?_e(rt,je,Be,ae,Y,Me):_e(je,rt,Be,Y,ae,Me);if(Ze!==void 0){if(Ze)continue;He=!1;break}if(Ye){if(!D(ae,function(un,Cn){if(Vn=Cn,!Ye.has(Vn)&&(je===un||Je(je,un,de,_e,Me)))return Ye.push(Cn);var Vn})){He=!1;break}}else if(je!==rt&&!Je(je,rt,de,_e,Me)){He=!1;break}}return Me.delete(Y),Me.delete(ae),He}function on(Y){return function(ae,de,_e){var Je=de(ae);return Pn(ae)?Je:function(Me,V){for(var oe=-1,pe=V.length,we=Me.length;++oe<pe;)Me[we+oe]=V[oe];return Me}(Je,_e(ae))}(Y,mi,zn)}function _t(Y,ae){var de,_e,Je=Y.__data__;return((_e=typeof(de=ae))=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?de!=="__proto__":de===null)?Je[typeof ae=="string"?"string":"hash"]:Je.map}function It(Y,ae){var de=function(_e,Je){return _e==null?void 0:_e[Je]}(Y,ae);return function(_e){return!(!pi(_e)||function(Je){return!!F&&F in Je}(_e))&&($r(_e)?G:E).test(Jt(_e))}(de)?de:void 0}nt.prototype.clear=function(){this.__data__=Tt?Tt(null):{},this.size=0},nt.prototype.delete=function(Y){var ae=this.has(Y)&&delete this.__data__[Y];return this.size-=ae?1:0,ae},nt.prototype.get=function(Y){var ae=this.__data__;if(Tt){var de=ae[Y];return de===y?void 0:de}return ve.call(ae,Y)?ae[Y]:void 0},nt.prototype.has=function(Y){var ae=this.__data__;return Tt?ae[Y]!==void 0:ve.call(ae,Y)},nt.prototype.set=function(Y,ae){var de=this.__data__;return this.size+=this.has(Y)?0:1,de[Y]=Tt&&ae===void 0?y:ae,this},xt.prototype.clear=function(){this.__data__=[],this.size=0},xt.prototype.delete=function(Y){var ae=this.__data__,de=wr(ae,Y);return!(de<0||(de==ae.length-1?ae.pop():re.call(ae,de,1),--this.size,0))},xt.prototype.get=function(Y){var ae=this.__data__,de=wr(ae,Y);return de<0?void 0:ae[de][1]},xt.prototype.has=function(Y){return wr(this.__data__,Y)>-1},xt.prototype.set=function(Y,ae){var de=this.__data__,_e=wr(de,Y);return _e<0?(++this.size,de.push([Y,ae])):de[_e][1]=ae,this},Nt.prototype.clear=function(){this.size=0,this.__data__={hash:new nt,map:new(xe||xt),string:new nt}},Nt.prototype.delete=function(Y){var ae=_t(this,Y).delete(Y);return this.size-=ae?1:0,ae},Nt.prototype.get=function(Y){return _t(this,Y).get(Y)},Nt.prototype.has=function(Y){return _t(this,Y).has(Y)},Nt.prototype.set=function(Y,ae){var de=_t(this,Y),_e=de.size;return de.set(Y,ae),this.size+=de.size==_e?0:1,this},br.prototype.add=br.prototype.push=function(Y){return this.__data__.set(Y,y),this},br.prototype.has=function(Y){return this.__data__.has(Y)},rn.prototype.clear=function(){this.__data__=new xt,this.size=0},rn.prototype.delete=function(Y){var ae=this.__data__,de=ae.delete(Y);return this.size=ae.size,de},rn.prototype.get=function(Y){return this.__data__.get(Y)},rn.prototype.has=function(Y){return this.__data__.has(Y)},rn.prototype.set=function(Y,ae){var de=this.__data__;if(de instanceof xt){var _e=de.__data__;if(!xe||_e.length<199)return _e.push([Y,ae]),this.size=++de.size,this;de=this.__data__=new Nt(_e)}return de.set(Y,ae),this.size=de.size,this};var zn=ye?function(Y){return Y==null?[]:(Y=Object(Y),function(ae,de){for(var _e=-1,Je=ae==null?0:ae.length,Me=0,V=[];++_e<Je;){var oe=ae[_e];pe=oe,ue.call(Y,pe)&&(V[Me++]=oe)}var pe;return V}(ye(Y)))}:function(){return[]},zt=sr;function Tr(Y,ae){return!!(ae=ae??v)&&(typeof Y=="number"||k.test(Y))&&Y>-1&&Y%1==0&&Y<ae}function Jt(Y){if(Y!=null){try{return me.call(Y)}catch{}try{return Y+""}catch{}}return""}function Ar(Y,ae){return Y===ae||Y!=Y&&ae!=ae}(Ue&&zt(new Ue(new ArrayBuffer(1)))!=O||xe&&zt(new xe)!=m||Pe&&zt(Pe.resolve())!=c||ce&&zt(new ce)!=A||De&&zt(new De)!=S)&&(zt=function(Y){var ae=sr(Y),de=ae==g?Y.constructor:void 0,_e=de?Jt(de):"";if(_e)switch(_e){case nn:return O;case yt:return m;case Ut:return c;case Lt:return A;case kt:return S}return ae});var gi=di(function(){return arguments}())?di:function(Y){return Jn(Y)&&ve.call(Y,"callee")&&!ue.call(Y,"callee")},Pn=Array.isArray,sn=Oe||function(){return!1};function $r(Y){if(!pi(Y))return!1;var ae=sr(Y);return ae==w||ae=="[object GeneratorFunction]"||ae=="[object AsyncFunction]"||ae=="[object Proxy]"}function an(Y){return typeof Y=="number"&&Y>-1&&Y%1==0&&Y<=v}function pi(Y){var ae=typeof Y;return Y!=null&&(ae=="object"||ae=="function")}function Jn(Y){return Y!=null&&typeof Y=="object"}var ln=L?function(Y){return function(ae){return Y(ae)}}(L):function(Y){return Jn(Y)&&an(Y.length)&&!!x[sr(Y)]};function mi(Y){return(ae=Y)!=null&&an(ae.length)&&!$r(ae)?function(de,_e){var Je=Pn(de),Me=!Je&&gi(de),V=!Je&&!Me&&sn(de),oe=!Je&&!Me&&!V&&ln(de),pe=Je||Me||V||oe,we=pe?function(Ye,je){for(var rt=-1,Ze=Array(Ye);++rt<Ye;)Ze[rt]=je(rt);return Ze}(de.length,String):[],Be=we.length;for(var He in de)!ve.call(de,He)||pe&&(He=="length"||V&&(He=="offset"||He=="parent")||oe&&(He=="buffer"||He=="byteLength"||He=="byteOffset")||Tr(He,Be))||we.push(He);return we}(Y):function(de){if(Je=(_e=de)&&_e.constructor,_e!==(typeof Je=="function"&&Je.prototype||fe))return Fe(de);var _e,Je,Me=[];for(var V in Object(de))ve.call(de,V)&&V!="constructor"&&Me.push(V);return Me}(Y);var ae}s.exports=function(Y,ae){return jr(Y,ae)}},210:function(s,u,h){var y=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(u,"__esModule",{value:!0});var v,d=y(h(465)),l=y(h(307));(function(a){a.compose=function(p,b,w){p===void 0&&(p={}),b===void 0&&(b={}),typeof p!="object"&&(p={}),typeof b!="object"&&(b={});var m=d.default(b);for(var f in w||(m=Object.keys(m).reduce(function(g,c){return m[c]!=null&&(g[c]=m[c]),g},{})),p)p[f]!==void 0&&b[f]===void 0&&(m[f]=p[f]);return Object.keys(m).length>0?m:void 0},a.diff=function(p,b){p===void 0&&(p={}),b===void 0&&(b={}),typeof p!="object"&&(p={}),typeof b!="object"&&(b={});var w=Object.keys(p).concat(Object.keys(b)).reduce(function(m,f){return l.default(p[f],b[f])||(m[f]=b[f]===void 0?null:b[f]),m},{});return Object.keys(w).length>0?w:void 0},a.invert=function(p,b){p===void 0&&(p={}),b===void 0&&(b={}),p=p||{};var w=Object.keys(b).reduce(function(m,f){return b[f]!==p[f]&&p[f]!==void 0&&(m[f]=b[f]),m},{});return Object.keys(p).reduce(function(m,f){return p[f]!==b[f]&&b[f]===void 0&&(m[f]=null),m},w)},a.transform=function(p,b,w){if(w===void 0&&(w=!1),typeof p!="object")return b;if(typeof b=="object"){if(!w)return b;var m=Object.keys(b).reduce(function(f,g){return p[g]===void 0&&(f[g]=b[g]),f},{});return Object.keys(m).length>0?m:void 0}}})(v||(v={})),u.default=v},895:function(s,u,h){var y=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}},v=y(h(103)),d=y(h(465)),l=y(h(307)),a=y(h(210)),p=y(h(430)),b="\0",w=function(){function m(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]}return m.prototype.insert=function(f,g){var c={};return typeof f=="string"&&f.length===0?this:(c.insert=f,g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(c.attributes=g),this.push(c))},m.prototype.delete=function(f){return f<=0?this:this.push({delete:f})},m.prototype.retain=function(f,g){if(f<=0)return this;var c={retain:f};return g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(c.attributes=g),this.push(c)},m.prototype.push=function(f){var g=this.ops.length,c=this.ops[g-1];if(f=d.default(f),typeof c=="object"){if(typeof f.delete=="number"&&typeof c.delete=="number")return this.ops[g-1]={delete:c.delete+f.delete},this;if(typeof c.delete=="number"&&f.insert!=null&&(g-=1,typeof(c=this.ops[g-1])!="object"))return this.ops.unshift(f),this;if(l.default(f.attributes,c.attributes)){if(typeof f.insert=="string"&&typeof c.insert=="string")return this.ops[g-1]={insert:c.insert+f.insert},typeof f.attributes=="object"&&(this.ops[g-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof c.retain=="number")return this.ops[g-1]={retain:c.retain+f.retain},typeof f.attributes=="object"&&(this.ops[g-1].attributes=f.attributes),this}}return g===this.ops.length?this.ops.push(f):this.ops.splice(g,0,f),this},m.prototype.chop=function(){var f=this.ops[this.ops.length-1];return f&&f.retain&&!f.attributes&&this.ops.pop(),this},m.prototype.filter=function(f){return this.ops.filter(f)},m.prototype.forEach=function(f){this.ops.forEach(f)},m.prototype.map=function(f){return this.ops.map(f)},m.prototype.partition=function(f){var g=[],c=[];return this.forEach(function(T){(f(T)?g:c).push(T)}),[g,c]},m.prototype.reduce=function(f,g){return this.ops.reduce(f,g)},m.prototype.changeLength=function(){return this.reduce(function(f,g){return g.insert?f+p.default.length(g):g.delete?f-g.delete:f},0)},m.prototype.length=function(){return this.reduce(function(f,g){return f+p.default.length(g)},0)},m.prototype.slice=function(f,g){f===void 0&&(f=0),g===void 0&&(g=1/0);for(var c=[],T=p.default.iterator(this.ops),A=0;A<g&&T.hasNext();){var _=void 0;A<f?_=T.next(f-A):(_=T.next(g-A),c.push(_)),A+=p.default.length(_)}return new m(c)},m.prototype.compose=function(f){var g=p.default.iterator(this.ops),c=p.default.iterator(f.ops),T=[],A=c.peek();if(A!=null&&typeof A.retain=="number"&&A.attributes==null){for(var _=A.retain;g.peekType()==="insert"&&g.peekLength()<=_;)_-=g.peekLength(),T.push(g.next());A.retain-_>0&&c.next(A.retain-_)}for(var S=new m(T);g.hasNext()||c.hasNext();)if(c.peekType()==="insert")S.push(c.next());else if(g.peekType()==="delete")S.push(g.next());else{var I=Math.min(g.peekLength(),c.peekLength()),O=g.next(I),E=c.next(I);if(typeof E.retain=="number"){var k={};typeof O.retain=="number"?k.retain=I:k.insert=O.insert;var x=a.default.compose(O.attributes,E.attributes,typeof O.retain=="number");if(x&&(k.attributes=x),S.push(k),!c.hasNext()&&l.default(S.ops[S.ops.length-1],k)){var N=new m(g.rest());return S.concat(N).chop()}}else typeof E.delete=="number"&&typeof O.retain=="number"&&S.push(E)}return S.chop()},m.prototype.concat=function(f){var g=new m(this.ops.slice());return f.ops.length>0&&(g.push(f.ops[0]),g.ops=g.ops.concat(f.ops.slice(1))),g},m.prototype.diff=function(f,g){if(this.ops===f.ops)return new m;var c=[this,f].map(function(I){return I.map(function(O){if(O.insert!=null)return typeof O.insert=="string"?O.insert:b;throw new Error("diff() called "+(I===f?"on":"with")+" non-document")}).join("")}),T=new m,A=v.default(c[0],c[1],g),_=p.default.iterator(this.ops),S=p.default.iterator(f.ops);return A.forEach(function(I){for(var O=I[1].length;O>0;){var E=0;switch(I[0]){case v.default.INSERT:E=Math.min(S.peekLength(),O),T.push(S.next(E));break;case v.default.DELETE:E=Math.min(O,_.peekLength()),_.next(E),T.delete(E);break;case v.default.EQUAL:E=Math.min(_.peekLength(),S.peekLength(),O);var k=_.next(E),x=S.next(E);l.default(k.insert,x.insert)?T.retain(E,a.default.diff(k.attributes,x.attributes)):T.push(x).delete(E)}O-=E}}),T.chop()},m.prototype.eachLine=function(f,g){g===void 0&&(g=`
`);for(var c=p.default.iterator(this.ops),T=new m,A=0;c.hasNext();){if(c.peekType()!=="insert")return;var _=c.peek(),S=p.default.length(_)-c.peekLength(),I=typeof _.insert=="string"?_.insert.indexOf(g,S)-S:-1;if(I<0)T.push(c.next());else if(I>0)T.push(c.next(I));else{if(f(T,c.next(1).attributes||{},A)===!1)return;A+=1,T=new m}}T.length()>0&&f(T,{},A)},m.prototype.invert=function(f){var g=new m;return this.reduce(function(c,T){if(T.insert)g.delete(p.default.length(T));else{if(T.retain&&T.attributes==null)return g.retain(T.retain),c+T.retain;if(T.delete||T.retain&&T.attributes){var A=T.delete||T.retain;return f.slice(c,c+A).forEach(function(_){T.delete?g.push(_):T.retain&&T.attributes&&g.retain(p.default.length(_),a.default.invert(T.attributes,_.attributes))}),c+A}}return c},0),g.chop()},m.prototype.transform=function(f,g){if(g===void 0&&(g=!1),g=!!g,typeof f=="number")return this.transformPosition(f,g);for(var c=f,T=p.default.iterator(this.ops),A=p.default.iterator(c.ops),_=new m;T.hasNext()||A.hasNext();)if(T.peekType()!=="insert"||!g&&A.peekType()==="insert")if(A.peekType()==="insert")_.push(A.next());else{var S=Math.min(T.peekLength(),A.peekLength()),I=T.next(S),O=A.next(S);if(I.delete)continue;O.delete?_.push(O):_.retain(S,a.default.transform(I.attributes,O.attributes,g))}else _.retain(p.default.length(T.next()));return _.chop()},m.prototype.transformPosition=function(f,g){g===void 0&&(g=!1),g=!!g;for(var c=p.default.iterator(this.ops),T=0;c.hasNext()&&T<=f;){var A=c.peekLength(),_=c.peekType();c.next(),_!=="delete"?(_==="insert"&&(T<f||!g)&&(f+=A),T+=A):f-=Math.min(A,f-T)}return f},m.Op=p.default,m.AttributeMap=a.default,m}();s.exports=w},977:function(s,u,h){var y=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(u,"__esModule",{value:!0});var v=y(h(430)),d=function(){function l(a){this.ops=a,this.index=0,this.offset=0}return l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(a){a||(a=1/0);var p=this.ops[this.index];if(p){var b=this.offset,w=v.default.length(p);if(a>=w-b?(a=w-b,this.index+=1,this.offset=0):this.offset+=a,typeof p.delete=="number")return{delete:a};var m={};return p.attributes&&(m.attributes=p.attributes),typeof p.retain=="number"?m.retain=a:typeof p.insert=="string"?m.insert=p.insert.substr(b,a):m.insert=p.insert,m}return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?v.default.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var a=this.offset,p=this.index,b=this.next(),w=this.ops.slice(this.index);return this.offset=a,this.index=p,[b].concat(w)}return[]},l}();u.default=d},430:function(s,u,h){var y=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(u,"__esModule",{value:!0});var v,d=y(h(977));(function(l){l.iterator=function(a){return new d.default(a)},l.length=function(a){return typeof a.delete=="number"?a.delete:typeof a.retain=="number"?a.retain:typeof a.insert=="string"?a.insert.length:1}})(v||(v={})),u.default=v},103:s=>{var u=-1;function h(g,c,T,A){if(g===c)return g?[[0,g]]:[];if(T!=null){var _=function(k,x,N){var C=typeof N=="number"?{index:N,length:0}:N.oldRange,M=typeof N=="number"?null:N.newRange,j=k.length,Q=x.length;if(C.length===0&&(M===null||M.length===0)){var $=C.index,B=k.slice(0,$),P=k.slice($),L=M?M.index:null,D=$+Q-j;if((L===null||L===D)&&!(D<0||D>Q)){var K=x.slice(0,D);if((U=x.slice(D))===P){var z=Math.min($,D);if((Z=B.slice(0,z))===(fe=K.slice(0,z)))return m(Z,B.slice(z),K.slice(z),P)}}if(L===null||L===$){var R=$,U=(K=x.slice(0,R),x.slice(R));if(K===B){var H=Math.min(j-R,Q-R);if((ie=P.slice(P.length-H))===(be=U.slice(U.length-H)))return m(B,P.slice(0,P.length-H),U.slice(0,U.length-H),ie)}}}if(C.length>0&&M&&M.length===0){var Z=k.slice(0,C.index),ie=k.slice(C.index+C.length);if(!(Q<(z=Z.length)+(H=ie.length))){var fe=x.slice(0,z),be=x.slice(Q-H);if(Z===fe&&ie===be)return m(Z,k.slice(z,j-H),x.slice(z,Q-H),ie)}}return null}(g,c,T);if(_)return _}var S=v(g,c),I=g.substring(0,S);S=d(g=g.substring(S),c=c.substring(S));var O=g.substring(g.length-S),E=function(k,x){var N;if(!k)return[[1,x]];if(!x)return[[u,k]];var C=k.length>x.length?k:x,M=k.length>x.length?x:k,j=C.indexOf(M);if(j!==-1)return N=[[1,C.substring(0,j)],[0,M],[1,C.substring(j+M.length)]],k.length>x.length&&(N[0][0]=N[2][0]=u),N;if(M.length===1)return[[u,k],[1,x]];var Q=function(R,U){var H=R.length>U.length?R:U,Z=R.length>U.length?U:R;if(H.length<4||2*Z.length<H.length)return null;function ie(q,W,se){for(var ue,re,ge,ye,Oe=q.substring(se,se+Math.floor(q.length/4)),Fe=-1,Ue="";(Fe=W.indexOf(Oe,Fe+1))!==-1;){var xe=v(q.substring(se),W.substring(Fe)),Pe=d(q.substring(0,se),W.substring(0,Fe));Ue.length<Pe+xe&&(Ue=W.substring(Fe-Pe,Fe)+W.substring(Fe,Fe+xe),ue=q.substring(0,se-Pe),re=q.substring(se+xe),ge=W.substring(0,Fe-Pe),ye=W.substring(Fe+xe))}return 2*Ue.length>=q.length?[ue,re,ge,ye,Ue]:null}var fe,be,me,ve,F,X=ie(H,Z,Math.ceil(H.length/4)),G=ie(H,Z,Math.ceil(H.length/2));return X||G?(fe=G?X&&X[4].length>G[4].length?X:G:X,R.length>U.length?(be=fe[0],me=fe[1],ve=fe[2],F=fe[3]):(ve=fe[0],F=fe[1],be=fe[2],me=fe[3]),[be,me,ve,F,fe[4]]):null}(k,x);if(Q){var $=Q[0],B=Q[1],P=Q[2],L=Q[3],D=Q[4],K=h($,P),z=h(B,L);return K.concat([[0,D]],z)}return function(R,U){for(var H=R.length,Z=U.length,ie=Math.ceil((H+Z)/2),fe=ie,be=2*ie,me=new Array(be),ve=new Array(be),F=0;F<be;F++)me[F]=-1,ve[F]=-1;me[fe+1]=0,ve[fe+1]=0;for(var X=H-Z,G=X%2!=0,q=0,W=0,se=0,ue=0,re=0;re<ie;re++){for(var ge=-re+q;ge<=re-W;ge+=2){for(var ye=fe+ge,Oe=(ce=ge===-re||ge!==re&&me[ye-1]<me[ye+1]?me[ye+1]:me[ye-1]+1)-ge;ce<H&&Oe<Z&&R.charAt(ce)===U.charAt(Oe);)ce++,Oe++;if(me[ye]=ce,ce>H)W+=2;else if(Oe>Z)q+=2;else if(G&&(xe=fe+X-ge)>=0&&xe<be&&ve[xe]!==-1&&ce>=(Ue=H-ve[xe]))return y(R,U,ce,Oe)}for(var Fe=-re+se;Fe<=re-ue;Fe+=2){for(var Ue,xe=fe+Fe,Pe=(Ue=Fe===-re||Fe!==re&&ve[xe-1]<ve[xe+1]?ve[xe+1]:ve[xe-1]+1)-Fe;Ue<H&&Pe<Z&&R.charAt(H-Ue-1)===U.charAt(Z-Pe-1);)Ue++,Pe++;if(ve[xe]=Ue,Ue>H)ue+=2;else if(Pe>Z)se+=2;else if(!G){var ce;if((ye=fe+X-Fe)>=0&&ye<be&&me[ye]!==-1&&(Oe=fe+(ce=me[ye])-ye,ce>=(Ue=H-Ue)))return y(R,U,ce,Oe)}}}return[[u,R],[1,U]]}(k,x)}(g=g.substring(0,g.length-S),c=c.substring(0,c.length-S));return I&&E.unshift([0,I]),O&&E.push([0,O]),l(E,A),E}function y(g,c,T,A){var _=g.substring(0,T),S=c.substring(0,A),I=g.substring(T),O=c.substring(A),E=h(_,S),k=h(I,O);return E.concat(k)}function v(g,c){if(!g||!c||g.charAt(0)!==c.charAt(0))return 0;for(var T=0,A=Math.min(g.length,c.length),_=A,S=0;T<_;)g.substring(S,_)==c.substring(S,_)?S=T=_:A=_,_=Math.floor((A-T)/2+T);return a(g.charCodeAt(_-1))&&_--,_}function d(g,c){if(!g||!c||g.slice(-1)!==c.slice(-1))return 0;for(var T=0,A=Math.min(g.length,c.length),_=A,S=0;T<_;)g.substring(g.length-_,g.length-S)==c.substring(c.length-_,c.length-S)?S=T=_:A=_,_=Math.floor((A-T)/2+T);return p(g.charCodeAt(g.length-_))&&_--,_}function l(g,c){g.push([0,""]);for(var T,A=0,_=0,S=0,I="",O="";A<g.length;)if(A<g.length-1&&!g[A][1])g.splice(A,1);else switch(g[A][0]){case 1:S++,O+=g[A][1],A++;break;case u:_++,I+=g[A][1],A++;break;case 0:var E=A-S-_-1;if(c){if(E>=0&&w(g[E][1])){var k=g[E][1].slice(-1);if(g[E][1]=g[E][1].slice(0,-1),I=k+I,O=k+O,!g[E][1]){g.splice(E,1),A--;var x=E-1;g[x]&&g[x][0]===1&&(S++,O=g[x][1]+O,x--),g[x]&&g[x][0]===u&&(_++,I=g[x][1]+I,x--),E=x}}b(g[A][1])&&(k=g[A][1].charAt(0),g[A][1]=g[A][1].slice(1),I+=k,O+=k)}if(A<g.length-1&&!g[A][1]){g.splice(A,1);break}if(I.length>0||O.length>0){I.length>0&&O.length>0&&((T=v(O,I))!==0&&(E>=0?g[E][1]+=O.substring(0,T):(g.splice(0,0,[0,O.substring(0,T)]),A++),O=O.substring(T),I=I.substring(T)),(T=d(O,I))!==0&&(g[A][1]=O.substring(O.length-T)+g[A][1],O=O.substring(0,O.length-T),I=I.substring(0,I.length-T)));var N=S+_;I.length===0&&O.length===0?(g.splice(A-N,N),A-=N):I.length===0?(g.splice(A-N,N,[1,O]),A=A-N+1):O.length===0?(g.splice(A-N,N,[u,I]),A=A-N+1):(g.splice(A-N,N,[u,I],[1,O]),A=A-N+2)}A!==0&&g[A-1][0]===0?(g[A-1][1]+=g[A][1],g.splice(A,1)):A++,S=0,_=0,I="",O=""}g[g.length-1][1]===""&&g.pop();var C=!1;for(A=1;A<g.length-1;)g[A-1][0]===0&&g[A+1][0]===0&&(g[A][1].substring(g[A][1].length-g[A-1][1].length)===g[A-1][1]?(g[A][1]=g[A-1][1]+g[A][1].substring(0,g[A][1].length-g[A-1][1].length),g[A+1][1]=g[A-1][1]+g[A+1][1],g.splice(A-1,1),C=!0):g[A][1].substring(0,g[A+1][1].length)==g[A+1][1]&&(g[A-1][1]+=g[A+1][1],g[A][1]=g[A][1].substring(g[A+1][1].length)+g[A+1][1],g.splice(A+1,1),C=!0)),A++;C&&l(g,c)}function a(g){return g>=55296&&g<=56319}function p(g){return g>=56320&&g<=57343}function b(g){return p(g.charCodeAt(0))}function w(g){return a(g.charCodeAt(g.length-1))}function m(g,c,T,A){return w(g)||b(A)?null:function(_){for(var S=[],I=0;I<_.length;I++)_[I][1].length>0&&S.push(_[I]);return S}([[0,g],[u,c],[1,T],[0,A]])}function f(g,c,T){return h(g,c,T,!0)}f.INSERT=1,f.DELETE=u,f.EQUAL=0,s.exports=f},165:function(s,u,h){var y,v;(v=typeof(y=function(){var d,l={};function a(w,m,f){var g=w.getClientRects();if(g.length===2){var c=w.getBoundingClientRect();return g[m][f]<c[f]}return!1}function p(w){if(!w||screen.deviceXDPI===screen.logicalXDPI)return w;if("length"in w)return Array.prototype.map.call(w,p);var m=screen.deviceXDPI/screen.logicalXDPI;return{top:w.top/m,bottom:w.bottom/m,left:w.left/m,right:w.right/m,width:w.width/m,height:w.height/m}}function b(w,m){var f,g=0,c=1024;if(c>=m.length)return Array.prototype.push.apply(w,m);for(;g<m.length;)f=Array.prototype.push.apply(w,Array.prototype.slice.call(m,g,g+c)),g+=c;return f}return l.isBroken=function(){if(d===void 0){var w=document.createElement("p"),m=document.createElement("span"),f=document.createTextNode("aa"),g=document.createTextNode("aa"),c=document.createElement("img");c.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");var T=document.createRange();if(d={},w.appendChild(f),w.appendChild(m),m.appendChild(c),m.appendChild(g),document.body.appendChild(w),T.setStart(f,1),T.setEnd(m,0),d.getClientRects=d.getBoundingClientRect=T.getClientRects().length>1,d.getClientRects||(T.setEnd(g,1),d.getClientRects=d.getBoundingClientRect=T.getClientRects().length===2),!d.getBoundingClientRect){T.setEnd(T.startContainer,T.startOffset);var A=T.getBoundingClientRect();d.getBoundingClientRect=A.top===0&&A.left===0}if(document.body.removeChild(w),!d.getBoundingClientRect){var _=document.createElement("p");_.style.width="0px",_.style.fontSize="20px",_.style.whiteSpace="normal",_.style.wordBreak="normal";var S=document.createTextNode("m mm");_.appendChild(S),document.body.appendChild(_),T.setStart(S,1),T.setEnd(S,2),a(T,1,"left")?d.getBoundingClientRect=!0:(T.setStart(S,1),T.setEnd(S,3),a(T,0,"top")&&(d.getBoundingClientRect=!0)),document.body.removeChild(_)}var I=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")();d.ieZoom=!!I&&I<=10}return d},l.getClientRects=function(w){var m=this.isBroken();if(m.ieZoom)return p(w.getClientRects());if(!m.getClientRects)return w.getClientRects();var f=[],g=[],c=w.endContainer,T=w.endOffset,A=document.createRange();function _(S){for(var I=0;S=S.previousSibling;)I++;return I}for(;c!==w.commonAncestorContainer;)A.setStart(c,0),A.setEnd(c,T),b(g,A.getClientRects()),T=_(c),c=c.parentNode;return(A=w.cloneRange()).setEnd(c,T),b(f,A.getClientRects()),b(f,g),f},l.getBoundingClientRect=function(w){var m=this.getClientRects(w);if(m.length===0)return null;var f,g=w.getBoundingClientRect(),c=this.isBroken();if(c.ieZoom)return p(g);if(!c.getBoundingClientRect)return g;if(g.width===0&&g.height===0)return m[0];for(var T=0,A=m.length;T<A;T++){var _=m[T];f?(f.left=Math.min(f.left,_.left),f.top=Math.min(f.top,_.top),f.right=Math.max(f.right,_.right),f.bottom=Math.max(f.bottom,_.bottom)):f={left:_.left,top:_.top,right:_.right,bottom:_.bottom}}return f&&(f.width=f.right-f.left,f.height=f.bottom-f.top),f},l})=="function"?y.call(u,h,u,s):y)===void 0||(s.exports=v)},33:(s,u,h)=>{h.r(u),h.d(u,{default:()=>x});var y=function(){if(typeof Map<"u")return Map;function N(C,M){var j=-1;return C.some(function(Q,$){return Q[0]===M&&(j=$,!0)}),j}return function(){function C(){this.__entries__=[]}return Object.defineProperty(C.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),C.prototype.get=function(M){var j=N(this.__entries__,M),Q=this.__entries__[j];return Q&&Q[1]},C.prototype.set=function(M,j){var Q=N(this.__entries__,M);~Q?this.__entries__[Q][1]=j:this.__entries__.push([M,j])},C.prototype.delete=function(M){var j=this.__entries__,Q=N(j,M);~Q&&j.splice(Q,1)},C.prototype.has=function(M){return!!~N(this.__entries__,M)},C.prototype.clear=function(){this.__entries__.splice(0)},C.prototype.forEach=function(M,j){j===void 0&&(j=null);for(var Q=0,$=this.__entries__;Q<$.length;Q++){var B=$[Q];M.call(j,B[1],B[0])}},C}()}(),v=typeof window<"u"&&typeof document<"u"&&window.document===document,d=h.g!==void 0&&h.g.Math===Math?h.g:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")(),l=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(d):function(N){return setTimeout(function(){return N(Date.now())},1e3/60)},a=["top","right","bottom","left","width","height","size","weight"],p=typeof MutationObserver<"u",b=function(){function N(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(C,M){var j=!1,Q=!1,$=0;function B(){j&&(j=!1,C()),Q&&L()}function P(){l(B)}function L(){var D=Date.now();if(j){if(D-$<2)return;Q=!0}else j=!0,Q=!1,setTimeout(P,20);$=D}return L}(this.refresh.bind(this))}return N.prototype.addObserver=function(C){~this.observers_.indexOf(C)||this.observers_.push(C),this.connected_||this.connect_()},N.prototype.removeObserver=function(C){var M=this.observers_,j=M.indexOf(C);~j&&M.splice(j,1),!M.length&&this.connected_&&this.disconnect_()},N.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},N.prototype.updateObservers_=function(){var C=this.observers_.filter(function(M){return M.gatherActive(),M.hasActive()});return C.forEach(function(M){return M.broadcastActive()}),C.length>0},N.prototype.connect_=function(){v&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),p?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},N.prototype.disconnect_=function(){v&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},N.prototype.onTransitionEnd_=function(C){var M=C.propertyName,j=M===void 0?"":M;a.some(function(Q){return!!~j.indexOf(Q)})&&this.refresh()},N.getInstance=function(){return this.instance_||(this.instance_=new N),this.instance_},N.instance_=null,N}(),w=function(N,C){for(var M=0,j=Object.keys(C);M<j.length;M++){var Q=j[M];Object.defineProperty(N,Q,{value:C[Q],enumerable:!1,writable:!1,configurable:!0})}return N},m=function(N){return N&&N.ownerDocument&&N.ownerDocument.defaultView||d},f=_(0,0,0,0);function g(N){return parseFloat(N)||0}function c(N){for(var C=[],M=1;M<arguments.length;M++)C[M-1]=arguments[M];return C.reduce(function(j,Q){return j+g(N["border-"+Q+"-width"])},0)}var T=typeof SVGGraphicsElement<"u"?function(N){return N instanceof m(N).SVGGraphicsElement}:function(N){return N instanceof m(N).SVGElement&&typeof N.getBBox=="function"};function A(N){return v?T(N)?function(C){var M=C.getBBox();return _(0,0,M.width,M.height)}(N):function(C){var M=C.clientWidth,j=C.clientHeight;if(!M&&!j)return f;var Q=m(C).getComputedStyle(C),$=function(R){for(var U={},H=0,Z=["top","right","bottom","left"];H<Z.length;H++){var ie=Z[H],fe=R["padding-"+ie];U[ie]=g(fe)}return U}(Q),B=$.left+$.right,P=$.top+$.bottom,L=g(Q.width),D=g(Q.height);if(Q.boxSizing==="border-box"&&(Math.round(L+B)!==M&&(L-=c(Q,"left","right")+B),Math.round(D+P)!==j&&(D-=c(Q,"top","bottom")+P)),!function(R){return R===m(R).document.documentElement}(C)){var K=Math.round(L+B)-M,z=Math.round(D+P)-j;Math.abs(K)!==1&&(L-=K),Math.abs(z)!==1&&(D-=z)}return _($.left,$.top,L,D)}(N):f}function _(N,C,M,j){return{x:N,y:C,width:M,height:j}}var S=function(){function N(C){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=_(0,0,0,0),this.target=C}return N.prototype.isActive=function(){var C=A(this.target);return this.contentRect_=C,C.width!==this.broadcastWidth||C.height!==this.broadcastHeight},N.prototype.broadcastRect=function(){var C=this.contentRect_;return this.broadcastWidth=C.width,this.broadcastHeight=C.height,C},N}(),I=function(N,C){var M,j,Q,$,B,P,L,D=(j=(M=C).x,Q=M.y,$=M.width,B=M.height,P=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,L=Object.create(P.prototype),w(L,{x:j,y:Q,width:$,height:B,top:Q,right:j+$,bottom:B+Q,left:j}),L);w(this,{target:N,contentRect:D})},O=function(){function N(C,M,j){if(this.activeObservations_=[],this.observations_=new y,typeof C!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=C,this.controller_=M,this.callbackCtx_=j}return N.prototype.observe=function(C){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(C instanceof m(C).Element))throw new TypeError('parameter 1 is not of type "Element".');var M=this.observations_;M.has(C)||(M.set(C,new S(C)),this.controller_.addObserver(this),this.controller_.refresh())}},N.prototype.unobserve=function(C){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(C instanceof m(C).Element))throw new TypeError('parameter 1 is not of type "Element".');var M=this.observations_;M.has(C)&&(M.delete(C),M.size||this.controller_.removeObserver(this))}},N.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},N.prototype.gatherActive=function(){var C=this;this.clearActive(),this.observations_.forEach(function(M){M.isActive()&&C.activeObservations_.push(M)})},N.prototype.broadcastActive=function(){if(this.hasActive()){var C=this.callbackCtx_,M=this.activeObservations_.map(function(j){return new I(j.target,j.broadcastRect())});this.callback_.call(C,M,C),this.clearActive()}},N.prototype.clearActive=function(){this.activeObservations_.splice(0)},N.prototype.hasActive=function(){return this.activeObservations_.length>0},N}(),E=typeof WeakMap<"u"?new WeakMap:new y,k=function N(C){if(!(this instanceof N))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var M=b.getInstance(),j=new O(C,M,this);E.set(this,j)};["observe","unobserve","disconnect"].forEach(function(N){k.prototype[N]=function(){var C;return(C=E.get(this))[N].apply(C,arguments)}});const x=d.ResizeObserver!==void 0?d.ResizeObserver:k},413:(s,u,h)=>{h.r(u),h.d(u,{default:()=>_});var y=h(379),v=h.n(y),d=h(795),l=h.n(d),a=h(569),p=h.n(a),b=h(565),w=h.n(b),m=h(216),f=h.n(m),g=h(589),c=h.n(g),T=h(582),A={};A.styleTagTransform=c(),A.setAttributes=w(),A.insert=p().bind(null,"head"),A.domAPI=l(),A.insertStyleElement=f(),v()(T.Z,A);const _=T.Z&&T.Z.locals?T.Z.locals:void 0},379:s=>{var u=[];function h(d){for(var l=-1,a=0;a<u.length;a++)if(u[a].identifier===d){l=a;break}return l}function y(d,l){for(var a={},p=[],b=0;b<d.length;b++){var w=d[b],m=l.base?w[0]+l.base:w[0],f=a[m]||0,g="".concat(m," ").concat(f);a[m]=f+1;var c=h(g),T={css:w[1],media:w[2],sourceMap:w[3],supports:w[4],layer:w[5]};if(c!==-1)u[c].references++,u[c].updater(T);else{var A=v(T,l);l.byIndex=b,u.splice(b,0,{identifier:g,updater:A,references:1})}p.push(g)}return p}function v(d,l){var a=l.domAPI(l);return a.update(d),function(p){if(p){if(p.css===d.css&&p.media===d.media&&p.sourceMap===d.sourceMap&&p.supports===d.supports&&p.layer===d.layer)return;a.update(d=p)}else a.remove()}}s.exports=function(d,l){var a=y(d=d||[],l=l||{});return function(p){p=p||[];for(var b=0;b<a.length;b++){var w=h(a[b]);u[w].references--}for(var m=y(p,l),f=0;f<a.length;f++){var g=h(a[f]);u[g].references===0&&(u[g].updater(),u.splice(g,1))}a=m}}},569:s=>{var u={};s.exports=function(h,y){var v=function(d){if(u[d]===void 0){var l=document.querySelector(d);if(window.HTMLIFrameElement&&l instanceof window.HTMLIFrameElement)try{l=l.contentDocument.head}catch{l=null}u[d]=l}return u[d]}(h);if(!v)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");v.appendChild(y)}},216:s=>{s.exports=function(u){var h=document.createElement("style");return u.setAttributes(h,u.attributes),u.insert(h,u.options),h}},565:(s,u,h)=>{s.exports=function(y){var v=h.nc;v&&y.setAttribute("nonce",v)}},795:s=>{s.exports=function(u){var h=u.insertStyleElement(u);return{update:function(y){(function(v,d,l){var a="";l.supports&&(a+="@supports (".concat(l.supports,") {")),l.media&&(a+="@media ".concat(l.media," {"));var p=l.layer!==void 0;p&&(a+="@layer".concat(l.layer.length>0?" ".concat(l.layer):""," {")),a+=l.css,p&&(a+="}"),l.media&&(a+="}"),l.supports&&(a+="}");var b=l.sourceMap;b&&typeof btoa<"u"&&(a+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(b))))," */")),d.styleTagTransform(a,v,d.options)})(h,u,y)},remove:function(){(function(y){if(y.parentNode===null)return!1;y.parentNode.removeChild(y)})(h)}}}},589:s=>{s.exports=function(u,h){if(h.styleSheet)h.styleSheet.cssText=u;else{for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(document.createTextNode(u))}}},621:(s,u,h)=>{var y;(function(v){var d=/^\s+/,l=/\s+$/,a=0,p=v.round,b=v.min,w=v.max,m=v.random;function f(F,X){if(X=X||{},(F=F||"")instanceof f)return F;if(!(this instanceof f))return new f(F,X);var G=function(q){var W,se,ue,re={r:0,g:0,b:0},ge=1,ye=null,Oe=null,Fe=null,Ue=!1,xe=!1;return typeof q=="string"&&(q=function(Pe){Pe=Pe.replace(d,"").replace(l,"").toLowerCase();var ce,De=!1;if(B[Pe])Pe=B[Pe],De=!0;else if(Pe=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(ce=me.rgb.exec(Pe))?{r:ce[1],g:ce[2],b:ce[3]}:(ce=me.rgba.exec(Pe))?{r:ce[1],g:ce[2],b:ce[3],a:ce[4]}:(ce=me.hsl.exec(Pe))?{h:ce[1],s:ce[2],l:ce[3]}:(ce=me.hsla.exec(Pe))?{h:ce[1],s:ce[2],l:ce[3],a:ce[4]}:(ce=me.hsv.exec(Pe))?{h:ce[1],s:ce[2],v:ce[3]}:(ce=me.hsva.exec(Pe))?{h:ce[1],s:ce[2],v:ce[3],a:ce[4]}:(ce=me.hex8.exec(Pe))?{r:z(ce[1]),g:z(ce[2]),b:z(ce[3]),a:Z(ce[4]),format:De?"name":"hex8"}:(ce=me.hex6.exec(Pe))?{r:z(ce[1]),g:z(ce[2]),b:z(ce[3]),format:De?"name":"hex"}:(ce=me.hex4.exec(Pe))?{r:z(ce[1]+""+ce[1]),g:z(ce[2]+""+ce[2]),b:z(ce[3]+""+ce[3]),a:Z(ce[4]+""+ce[4]),format:De?"name":"hex8"}:!!(ce=me.hex3.exec(Pe))&&{r:z(ce[1]+""+ce[1]),g:z(ce[2]+""+ce[2]),b:z(ce[3]+""+ce[3]),format:De?"name":"hex"}}(q)),typeof q=="object"&&(ve(q.r)&&ve(q.g)&&ve(q.b)?(W=q.r,se=q.g,ue=q.b,re={r:255*D(W,255),g:255*D(se,255),b:255*D(ue,255)},Ue=!0,xe=String(q.r).substr(-1)==="%"?"prgb":"rgb"):ve(q.h)&&ve(q.s)&&ve(q.v)?(ye=U(q.s),Oe=U(q.v),re=function(Pe,ce,De){Pe=6*D(Pe,360),ce=D(ce,100),De=D(De,100);var Tt=v.floor(Pe),nn=Pe-Tt,yt=De*(1-ce),Ut=De*(1-nn*ce),Lt=De*(1-(1-nn)*ce),kt=Tt%6;return{r:255*[De,Ut,yt,yt,Lt,De][kt],g:255*[Lt,De,De,Ut,yt,yt][kt],b:255*[yt,yt,Lt,De,De,Ut][kt]}}(q.h,ye,Oe),Ue=!0,xe="hsv"):ve(q.h)&&ve(q.s)&&ve(q.l)&&(ye=U(q.s),Fe=U(q.l),re=function(Pe,ce,De){var Tt,nn,yt;function Ut(At,$t,nt){return nt<0&&(nt+=1),nt>1&&(nt-=1),nt<1/6?At+6*($t-At)*nt:nt<.5?$t:nt<2/3?At+($t-At)*(2/3-nt)*6:At}if(Pe=D(Pe,360),ce=D(ce,100),De=D(De,100),ce===0)Tt=nn=yt=De;else{var Lt=De<.5?De*(1+ce):De+ce-De*ce,kt=2*De-Lt;Tt=Ut(kt,Lt,Pe+1/3),nn=Ut(kt,Lt,Pe),yt=Ut(kt,Lt,Pe-1/3)}return{r:255*Tt,g:255*nn,b:255*yt}}(q.h,ye,Fe),Ue=!0,xe="hsl"),q.hasOwnProperty("a")&&(ge=q.a)),ge=L(ge),{ok:Ue,format:q.format||xe,r:b(255,w(re.r,0)),g:b(255,w(re.g,0)),b:b(255,w(re.b,0)),a:ge}}(F);this._originalInput=F,this._r=G.r,this._g=G.g,this._b=G.b,this._a=G.a,this._roundA=p(100*this._a)/100,this._format=X.format||G.format,this._gradientType=X.gradientType,this._r<1&&(this._r=p(this._r)),this._g<1&&(this._g=p(this._g)),this._b<1&&(this._b=p(this._b)),this._ok=G.ok,this._tc_id=a++}function g(F,X,G){F=D(F,255),X=D(X,255),G=D(G,255);var q,W,se=w(F,X,G),ue=b(F,X,G),re=(se+ue)/2;if(se==ue)q=W=0;else{var ge=se-ue;switch(W=re>.5?ge/(2-se-ue):ge/(se+ue),se){case F:q=(X-G)/ge+(X<G?6:0);break;case X:q=(G-F)/ge+2;break;case G:q=(F-X)/ge+4}q/=6}return{h:q,s:W,l:re}}function c(F,X,G){F=D(F,255),X=D(X,255),G=D(G,255);var q,W,se=w(F,X,G),ue=b(F,X,G),re=se,ge=se-ue;if(W=se===0?0:ge/se,se==ue)q=0;else{switch(se){case F:q=(X-G)/ge+(X<G?6:0);break;case X:q=(G-F)/ge+2;break;case G:q=(F-X)/ge+4}q/=6}return{h:q,s:W,v:re}}function T(F,X,G,q){var W=[R(p(F).toString(16)),R(p(X).toString(16)),R(p(G).toString(16))];return q&&W[0].charAt(0)==W[0].charAt(1)&&W[1].charAt(0)==W[1].charAt(1)&&W[2].charAt(0)==W[2].charAt(1)?W[0].charAt(0)+W[1].charAt(0)+W[2].charAt(0):W.join("")}function A(F,X,G,q){return[R(H(q)),R(p(F).toString(16)),R(p(X).toString(16)),R(p(G).toString(16))].join("")}function _(F,X){X=X===0?0:X||10;var G=f(F).toHsl();return G.s-=X/100,G.s=K(G.s),f(G)}function S(F,X){X=X===0?0:X||10;var G=f(F).toHsl();return G.s+=X/100,G.s=K(G.s),f(G)}function I(F){return f(F).desaturate(100)}function O(F,X){X=X===0?0:X||10;var G=f(F).toHsl();return G.l+=X/100,G.l=K(G.l),f(G)}function E(F,X){X=X===0?0:X||10;var G=f(F).toRgb();return G.r=w(0,b(255,G.r-p(-X/100*255))),G.g=w(0,b(255,G.g-p(-X/100*255))),G.b=w(0,b(255,G.b-p(-X/100*255))),f(G)}function k(F,X){X=X===0?0:X||10;var G=f(F).toHsl();return G.l-=X/100,G.l=K(G.l),f(G)}function x(F,X){var G=f(F).toHsl(),q=(G.h+X)%360;return G.h=q<0?360+q:q,f(G)}function N(F){var X=f(F).toHsl();return X.h=(X.h+180)%360,f(X)}function C(F){var X=f(F).toHsl(),G=X.h;return[f(F),f({h:(G+120)%360,s:X.s,l:X.l}),f({h:(G+240)%360,s:X.s,l:X.l})]}function M(F){var X=f(F).toHsl(),G=X.h;return[f(F),f({h:(G+90)%360,s:X.s,l:X.l}),f({h:(G+180)%360,s:X.s,l:X.l}),f({h:(G+270)%360,s:X.s,l:X.l})]}function j(F){var X=f(F).toHsl(),G=X.h;return[f(F),f({h:(G+72)%360,s:X.s,l:X.l}),f({h:(G+216)%360,s:X.s,l:X.l})]}function Q(F,X,G){X=X||6,G=G||30;var q=f(F).toHsl(),W=360/G,se=[f(F)];for(q.h=(q.h-(W*X>>1)+720)%360;--X;)q.h=(q.h+W)%360,se.push(f(q));return se}function $(F,X){X=X||6;for(var G=f(F).toHsv(),q=G.h,W=G.s,se=G.v,ue=[],re=1/X;X--;)ue.push(f({h:q,s:W,v:se})),se=(se+re)%1;return ue}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var F=this.toRgb();return(299*F.r+587*F.g+114*F.b)/1e3},getLuminance:function(){var F,X,G,q=this.toRgb();return F=q.r/255,X=q.g/255,G=q.b/255,.2126*(F<=.03928?F/12.92:v.pow((F+.055)/1.055,2.4))+.7152*(X<=.03928?X/12.92:v.pow((X+.055)/1.055,2.4))+.0722*(G<=.03928?G/12.92:v.pow((G+.055)/1.055,2.4))},setAlpha:function(F){return this._a=L(F),this._roundA=p(100*this._a)/100,this},toHsv:function(){var F=c(this._r,this._g,this._b);return{h:360*F.h,s:F.s,v:F.v,a:this._a}},toHsvString:function(){var F=c(this._r,this._g,this._b),X=p(360*F.h),G=p(100*F.s),q=p(100*F.v);return this._a==1?"hsv("+X+", "+G+"%, "+q+"%)":"hsva("+X+", "+G+"%, "+q+"%, "+this._roundA+")"},toHsl:function(){var F=g(this._r,this._g,this._b);return{h:360*F.h,s:F.s,l:F.l,a:this._a}},toHslString:function(){var F=g(this._r,this._g,this._b),X=p(360*F.h),G=p(100*F.s),q=p(100*F.l);return this._a==1?"hsl("+X+", "+G+"%, "+q+"%)":"hsla("+X+", "+G+"%, "+q+"%, "+this._roundA+")"},toHex:function(F){return T(this._r,this._g,this._b,F)},toHexString:function(F){return"#"+this.toHex(F)},toHex8:function(F){return function(X,G,q,W,se){var ue=[R(p(X).toString(16)),R(p(G).toString(16)),R(p(q).toString(16)),R(H(W))];return se&&ue[0].charAt(0)==ue[0].charAt(1)&&ue[1].charAt(0)==ue[1].charAt(1)&&ue[2].charAt(0)==ue[2].charAt(1)&&ue[3].charAt(0)==ue[3].charAt(1)?ue[0].charAt(0)+ue[1].charAt(0)+ue[2].charAt(0)+ue[3].charAt(0):ue.join("")}(this._r,this._g,this._b,this._a,F)},toHex8String:function(F){return"#"+this.toHex8(F)},toRgb:function(){return{r:p(this._r),g:p(this._g),b:p(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+p(this._r)+", "+p(this._g)+", "+p(this._b)+")":"rgba("+p(this._r)+", "+p(this._g)+", "+p(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:p(100*D(this._r,255))+"%",g:p(100*D(this._g,255))+"%",b:p(100*D(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+p(100*D(this._r,255))+"%, "+p(100*D(this._g,255))+"%, "+p(100*D(this._b,255))+"%)":"rgba("+p(100*D(this._r,255))+"%, "+p(100*D(this._g,255))+"%, "+p(100*D(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(P[T(this._r,this._g,this._b,!0)]||!1)},toFilter:function(F){var X="#"+A(this._r,this._g,this._b,this._a),G=X,q=this._gradientType?"GradientType = 1, ":"";if(F){var W=f(F);G="#"+A(W._r,W._g,W._b,W._a)}return"progid:DXImageTransform.Microsoft.gradient("+q+"startColorstr="+X+",endColorstr="+G+")"},toString:function(F){var X=!!F;F=F||this._format;var G=!1,q=this._a<1&&this._a>=0;return X||!q||F!=="hex"&&F!=="hex6"&&F!=="hex3"&&F!=="hex4"&&F!=="hex8"&&F!=="name"?(F==="rgb"&&(G=this.toRgbString()),F==="prgb"&&(G=this.toPercentageRgbString()),F!=="hex"&&F!=="hex6"||(G=this.toHexString()),F==="hex3"&&(G=this.toHexString(!0)),F==="hex4"&&(G=this.toHex8String(!0)),F==="hex8"&&(G=this.toHex8String()),F==="name"&&(G=this.toName()),F==="hsl"&&(G=this.toHslString()),F==="hsv"&&(G=this.toHsvString()),G||this.toHexString()):F==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return f(this.toString())},_applyModification:function(F,X){var G=F.apply(null,[this].concat([].slice.call(X)));return this._r=G._r,this._g=G._g,this._b=G._b,this.setAlpha(G._a),this},lighten:function(){return this._applyModification(O,arguments)},brighten:function(){return this._applyModification(E,arguments)},darken:function(){return this._applyModification(k,arguments)},desaturate:function(){return this._applyModification(_,arguments)},saturate:function(){return this._applyModification(S,arguments)},greyscale:function(){return this._applyModification(I,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(F,X){return F.apply(null,[this].concat([].slice.call(X)))},analogous:function(){return this._applyCombination(Q,arguments)},complement:function(){return this._applyCombination(N,arguments)},monochromatic:function(){return this._applyCombination($,arguments)},splitcomplement:function(){return this._applyCombination(j,arguments)},triad:function(){return this._applyCombination(C,arguments)},tetrad:function(){return this._applyCombination(M,arguments)}},f.fromRatio=function(F,X){if(typeof F=="object"){var G={};for(var q in F)F.hasOwnProperty(q)&&(G[q]=q==="a"?F[q]:U(F[q]));F=G}return f(F,X)},f.equals=function(F,X){return!(!F||!X)&&f(F).toRgbString()==f(X).toRgbString()},f.random=function(){return f.fromRatio({r:m(),g:m(),b:m()})},f.mix=function(F,X,G){G=G===0?0:G||50;var q=f(F).toRgb(),W=f(X).toRgb(),se=G/100;return f({r:(W.r-q.r)*se+q.r,g:(W.g-q.g)*se+q.g,b:(W.b-q.b)*se+q.b,a:(W.a-q.a)*se+q.a})},f.readability=function(F,X){var G=f(F),q=f(X);return(v.max(G.getLuminance(),q.getLuminance())+.05)/(v.min(G.getLuminance(),q.getLuminance())+.05)},f.isReadable=function(F,X,G){var q,W,se,ue,re,ge=f.readability(F,X);switch(W=!1,(se=G,(ue=((se=se||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&ue!=="AAA"&&(ue="AA"),(re=(se.size||"small").toLowerCase())!=="small"&&re!=="large"&&(re="small"),q={level:ue,size:re}).level+q.size){case"AAsmall":case"AAAlarge":W=ge>=4.5;break;case"AAlarge":W=ge>=3;break;case"AAAsmall":W=ge>=7}return W},f.mostReadable=function(F,X,G){var q,W,se,ue,re=null,ge=0;W=(G=G||{}).includeFallbackColors,se=G.level,ue=G.size;for(var ye=0;ye<X.length;ye++)(q=f.readability(F,X[ye]))>ge&&(ge=q,re=f(X[ye]));return f.isReadable(F,re,{level:se,size:ue})||!W?re:(G.includeFallbackColors=!1,f.mostReadable(F,["#fff","#000"],G))};var B=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},P=f.hexNames=function(F){var X={};for(var G in F)F.hasOwnProperty(G)&&(X[F[G]]=G);return X}(B);function L(F){return F=parseFloat(F),(isNaN(F)||F<0||F>1)&&(F=1),F}function D(F,X){(function(q){return typeof q=="string"&&q.indexOf(".")!=-1&&parseFloat(q)===1})(F)&&(F="100%");var G=function(q){return typeof q=="string"&&q.indexOf("%")!=-1}(F);return F=b(X,w(0,parseFloat(F))),G&&(F=parseInt(F*X,10)/100),v.abs(F-X)<1e-6?1:F%X/parseFloat(X)}function K(F){return b(1,w(0,F))}function z(F){return parseInt(F,16)}function R(F){return F.length==1?"0"+F:""+F}function U(F){return F<=1&&(F=100*F+"%"),F}function H(F){return v.round(255*parseFloat(F)).toString(16)}function Z(F){return z(F)/255}var ie,fe,be,me=(fe="[\\s|\\(]+("+(ie="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")\\s*\\)?",be="[\\s|\\(]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")\\s*\\)?",{CSS_UNIT:new RegExp(ie),rgb:new RegExp("rgb"+fe),rgba:new RegExp("rgba"+be),hsl:new RegExp("hsl"+fe),hsla:new RegExp("hsla"+be),hsv:new RegExp("hsv"+fe),hsva:new RegExp("hsva"+be),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function ve(F){return!!me.CSS_UNIT.exec(F)}s.exports?s.exports=f:(y=(function(){return f}).call(u,h,u,s))===void 0||(s.exports=y)})(Math)},607:function(s,u,h){var y=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(u,"__esModule",{value:!0}),u.Cursor=u.default=void 0;var v=y(h(678));u.default=v.default;var d=y(h(353));u.Cursor=d.default,h(413)},353:(s,u,h)=>{Object.defineProperty(u,"__esModule",{value:!0});var y=h(621),v=function(){function d(l,a,p){this.id=l,this.name=a,this.color=p,this.toggleNearCursor=this.toggleNearCursor.bind(this),this._toggleOpenedCursor=this._toggleOpenedCursor.bind(this),this._setHoverState=this._setHoverState.bind(this)}return d.prototype.build=function(l){var a=document.createElement(d.CONTAINER_ELEMENT_TAG);a.classList.add(d.CURSOR_CLASS),a.id="ql-cursor-".concat(this.id),a.innerHTML=l.template;var p=a.getElementsByClassName(d.SELECTION_CLASS)[0],b=a.getElementsByClassName(d.CARET_CONTAINER_CLASS)[0],w=b.getElementsByClassName(d.CARET_CLASS)[0],m=a.getElementsByClassName(d.FLAG_CLASS)[0];return m.style.backgroundColor=this.color,w.style.backgroundColor=this.color,a.getElementsByClassName(d.NAME_CLASS)[0].textContent=this.name,this._hideDelay="".concat(l.hideDelayMs,"ms"),this._hideSpeedMs=l.hideSpeedMs,this._positionFlag=l.positionFlag,m.style.transitionDelay=this._hideDelay,m.style.transitionDuration="".concat(this._hideSpeedMs,"ms"),this._el=a,this._selectionEl=p,this._caretEl=b,this._flagEl=m,b.addEventListener("mouseover",this._setHoverState),this._el},d.prototype.show=function(){this._el.classList.remove(d.HIDDEN_CLASS)},d.prototype.hide=function(){this._el.classList.add(d.HIDDEN_CLASS)},d.prototype.remove=function(){this._el.parentNode.removeChild(this._el)},d.prototype.toggleNearCursor=function(l,a){var p=this._getCoordinates(),b=p.left,w=p.right,m=p.top,f=p.bottom,g=l>=b&&l<=w&&a>=m&&a<=f;return this._caretEl.classList.toggle(d.CONTAINER_HOVER_CLASS,g),g},d.prototype.toggleFlag=function(l){var a=this;this._caretEl.classList.toggle(d.CONTAINER_HOVER_CLASS,l)||(this._flagEl.classList.add(d.NO_DELAY_CLASS),setTimeout(function(){return a._flagEl.classList.remove(d.NO_DELAY_CLASS)},this._hideSpeedMs))},d.prototype.updateCaret=function(l,a){this._caretEl.style.top="".concat(l.top,"px"),this._caretEl.style.left="".concat(l.left,"px"),this._caretEl.style.height="".concat(l.height,"px"),this._positionFlag?this._positionFlag(this._flagEl,l,a):this._updateCaretFlag(l,a)},d.prototype.updateSelection=function(l,a){var p=this;this._clearSelection(),l=l||[],l=Array.from(l),l=this._sanitize(l),(l=this._sortByDomPosition(l)).forEach(function(b){return p._addSelection(b,a)})},d.prototype._setHoverState=function(){document.addEventListener("mousemove",this._toggleOpenedCursor)},d.prototype._toggleOpenedCursor=function(l){var a=this.toggleNearCursor(l.clientX,l.clientY);this._caretEl.classList.toggle(d.CONTAINER_NO_POINTER_CLASS,a),a||document.removeEventListener("mousemove",this._toggleOpenedCursor)},d.prototype._getCoordinates=function(){return this._caretEl.getBoundingClientRect()},d.prototype._updateCaretFlag=function(l,a){this._flagEl.style.width="";var p=this._flagEl.getBoundingClientRect();this._flagEl.classList.remove(d.FLAG_FLIPPED_CLASS),l.left>a.width-p.width&&this._flagEl.classList.add(d.FLAG_FLIPPED_CLASS),this._flagEl.style.left="".concat(l.left,"px"),this._flagEl.style.top="".concat(l.top,"px"),this._flagEl.style.width="".concat(Math.ceil(p.width),"px")},d.prototype._clearSelection=function(){this._selectionEl.innerHTML=""},d.prototype._addSelection=function(l,a){var p=this._selectionBlock(l,a);this._selectionEl.appendChild(p)},d.prototype._selectionBlock=function(l,a){var p=document.createElement(d.SELECTION_ELEMENT_TAG);return p.classList.add(d.SELECTION_BLOCK_CLASS),p.style.top="".concat(l.top-a.top,"px"),p.style.left="".concat(l.left-a.left,"px"),p.style.width="".concat(l.width,"px"),p.style.height="".concat(l.height,"px"),p.style.backgroundColor=y(this.color).setAlpha(.3).toString(),p},d.prototype._sortByDomPosition=function(l){return l.sort(function(a,p){return a.top===p.top?a.left-p.left:a.top-p.top})},d.prototype._sanitize=function(l){var a=this,p=new Set;return l.filter(function(b){if(!b.width||!b.height)return!1;var w=a._serialize(b);return!p.has(w)&&(p.add(w),!0)})},d.prototype._serialize=function(l){return["top:".concat(l.top),"right:".concat(l.right),"bottom:".concat(l.bottom),"left:".concat(l.left)].join(";")},d.CONTAINER_ELEMENT_TAG="SPAN",d.SELECTION_ELEMENT_TAG="SPAN",d.CURSOR_CLASS="ql-cursor",d.SELECTION_CLASS="ql-cursor-selections",d.SELECTION_BLOCK_CLASS="ql-cursor-selection-block",d.CARET_CLASS="ql-cursor-caret",d.CARET_CONTAINER_CLASS="ql-cursor-caret-container",d.CONTAINER_HOVER_CLASS="hover",d.CONTAINER_NO_POINTER_CLASS="no-pointer",d.FLAG_CLASS="ql-cursor-flag",d.FLAG_FLIPPED_CLASS="flag-flipped",d.NAME_CLASS="ql-cursor-name",d.HIDDEN_CLASS="hidden",d.NO_DELAY_CLASS="no-delay",d}();u.default=v},678:function(s,u,h){var y=this&&this.__createBinding||(Object.create?function(g,c,T,A){A===void 0&&(A=T),Object.defineProperty(g,A,{enumerable:!0,get:function(){return c[T]}})}:function(g,c,T,A){A===void 0&&(A=T),g[A]=c[T]}),v=this&&this.__setModuleDefault||(Object.create?function(g,c){Object.defineProperty(g,"default",{enumerable:!0,value:c})}:function(g,c){g.default=c}),d=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var c={};if(g!=null)for(var T in g)T!=="default"&&Object.prototype.hasOwnProperty.call(g,T)&&y(c,g,T);return v(c,g),c},l=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(u,"__esModule",{value:!0});var a=l(h(353)),p=d(h(165)),b=l(h(338)),w=l(h(33)),m=h(895),f=function(){function g(c,T){T===void 0&&(T={}),this._cursors={},this._isObserving=!1,this._handleCursorTouch=this._handleCursorTouch.bind(this),this.quill=c,this.options=this._setDefaults(T),this._container=this.quill.addContainer(this.options.containerClass),this._boundsContainer=this.options.boundsContainer||this.quill.container,this._currentSelection=this.quill.getSelection(),this._registerSelectionChangeListeners(),this._registerTextChangeListener(),this._registerDomListeners()}return g.prototype.createCursor=function(c,T,A){var _=this._cursors[c];if(!_){_=new a.default(c,T,A),this._cursors[c]=_;var S=_.build(this.options);this._container.appendChild(S)}return _},g.prototype.moveCursor=function(c,T){var A=this._cursors[c];A&&(A.range=T,this._updateCursor(A))},g.prototype.removeCursor=function(c){var T=this._cursors[c];T&&(T.remove(),delete this._cursors[c])},g.prototype.update=function(){var c=this;this.cursors().forEach(function(T){return c._updateCursor(T)})},g.prototype.clearCursors=function(){var c=this;this.cursors().forEach(function(T){return c.removeCursor(T.id)})},g.prototype.toggleFlag=function(c,T){var A=this._cursors[c];A&&A.toggleFlag(T)},g.prototype.cursors=function(){var c=this;return Object.keys(this._cursors).map(function(T){return c._cursors[T]})},g.prototype._registerSelectionChangeListeners=function(){var c=this;this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(T){c._currentSelection=T})},g.prototype._registerTextChangeListener=function(){var c=this;this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(T){return c._handleTextChange(T)})},g.prototype._registerDomListeners=function(){var c=this,T=this.quill.container.getElementsByClassName("ql-editor")[0];T.addEventListener("scroll",function(){return c.update()}),T.addEventListener("touchstart",this._handleCursorTouch)},g.prototype._handleCursorTouch=function(c){var T=this;this.cursors().forEach(function(A){A.toggleNearCursor(c.pageX,c.pageY),setTimeout(function(){return A.toggleFlag(!1)},T.options.hideDelayMs)})},g.prototype._registerResizeObserver=function(){var c=this;if(!this._isObserving){var T=this.quill.container.getElementsByClassName("ql-editor")[0],A=new w.default(function(_){_[0].target.isConnected||(A.disconnect(),c._isObserving=!1),c.update()});A.observe(T),this._isObserving=!0}},g.prototype._updateCursor=function(c){if(this._registerResizeObserver(),!c.range)return c.hide();var T=this._indexWithinQuillBounds(c.range.index),A=this._indexWithinQuillBounds(c.range.index+c.range.length),_=this.quill.getLeaf(T),S=this.quill.getLeaf(A);if(!this._leafIsValid(_)||!this._leafIsValid(S))return c.hide();c.show();var I=this._boundsContainer.getBoundingClientRect(),O=this.quill.getBounds(A);c.updateCaret(O,I);var E=this._lineRanges(c,_,S).reduce(function(k,x){return k.concat(Array.from(p.getClientRects(x)))},[]);c.updateSelection(E,I)},g.prototype._indexWithinQuillBounds=function(c){var T=this.quill.getLength(),A=T?T-1:0;return c=Math.max(c,0),Math.min(c,A)},g.prototype._leafIsValid=function(c){return c&&c[0]&&c[0].domNode&&c[1]>=0},g.prototype._handleTextChange=function(c){var T=this;window.setTimeout(function(){T.options.transformOnTextChange&&T._transformCursors(c),T.options.selectionChangeSource&&(T._emitSelection(),T.update())})},g.prototype._emitSelection=function(){this.quill.emitter.emit(this.quill.constructor.events.SELECTION_CHANGE,this.quill.getSelection(),this._currentSelection,this.options.selectionChangeSource)},g.prototype._setDefaults=function(c){return(c=Object.assign({},c)).template||(c.template=g.DEFAULTS.template),c.containerClass||(c.containerClass=g.DEFAULTS.containerClass),c.selectionChangeSource!==null&&(c.selectionChangeSource||(c.selectionChangeSource=g.DEFAULTS.selectionChangeSource)),c.hideDelayMs=Number.isInteger(c.hideDelayMs)?c.hideDelayMs:g.DEFAULTS.hideDelayMs,c.hideSpeedMs=Number.isInteger(c.hideSpeedMs)?c.hideSpeedMs:g.DEFAULTS.hideSpeedMs,c.transformOnTextChange=!!c.transformOnTextChange,c},g.prototype._lineRanges=function(c,T,A){var _=this.quill.getLines(c.range);return _.reduce(function(S,I,O){if(!I.children){var E=document.createRange();return E.selectNode(I.domNode),S.concat(E)}var k=O===0?T:I.path(0).pop(),x=k[0],N=k[1],C=O===_.length-1?A:I.path(I.length()-1).pop(),M=C[0],j=C[1],Q=document.createRange();return x.domNode.nodeType===Node.TEXT_NODE?Q.setStart(x.domNode,N):Q.setStartBefore(x.domNode),M.domNode.nodeType===Node.TEXT_NODE?Q.setEnd(M.domNode,j):Q.setEndAfter(M.domNode),S.concat(Q)},[])},g.prototype._transformCursors=function(c){var T=this;c=new m(c),this.cursors().filter(function(A){return A.range}).forEach(function(A){A.range.index=c.transformPosition(A.range.index),T._updateCursor(A)})},g.DEFAULTS={template:b.default,containerClass:"ql-cursors",selectionChangeSource:"api",hideDelayMs:3e3,hideSpeedMs:400},g}();u.default=f},338:function(s,u,h){var y=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(u,"__esModule",{value:!0});var v=y(h(353)),d=`
  <span class="`.concat(v.default.SELECTION_CLASS,`"></span>
  <span class="`).concat(v.default.CARET_CONTAINER_CLASS,`">
    <span class="`).concat(v.default.CARET_CLASS,`"></span>
  </span>
  <div class="`).concat(v.default.FLAG_CLASS,`">
    <small class="`).concat(v.default.NAME_CLASS,`"></small>
  </div>
`);u.default=d}},n={};function r(s){var u=n[s];if(u!==void 0)return u.exports;var h=n[s]={id:s,loaded:!1,exports:{}};return t[s].call(h.exports,h,h.exports,r),h.loaded=!0,h.exports}r.n=s=>{var u=s&&s.__esModule?()=>s.default:()=>s;return r.d(u,{a:u}),u},r.d=(s,u)=>{for(var h in u)r.o(u,h)&&!r.o(s,h)&&Object.defineProperty(s,h,{enumerable:!0,get:u[h]})},r.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),r.o=(s,u)=>Object.prototype.hasOwnProperty.call(s,u),r.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.nmd=s=>(s.paths=[],s.children||(s.children=[]),s),r.nc=void 0;var o=r(607);return o.default})())})(rl);var Pf=rl.exports;const Cf=tl(Pf);var Ce=function(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t},Te=function(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)},Yn,cr,Wt,Sr,Kr,cn,fn,hn,dn,gn,pn,mn,yn,fr,kr,Zn,Mi,Xn;const Rf=function(i){var e=131,t=137,n=0;i+="x";var r=Math.floor(9007199254740991/t);for(let o=0;o<i.length;o++)n>r&&(n=Math.floor(n/t)),n=n*e+i.charCodeAt(o);return n},Ae="0123456789abcdef".split(""),Df=[-2147483648,8388608,32768,128],Ht=[24,16,8,0],xi=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ht=[];class Lf{constructor(e=!1,t=!1){Yn.set(this,void 0),cr.set(this,void 0),Wt.set(this,void 0),Sr.set(this,void 0),Kr.set(this,void 0),cn.set(this,void 0),fn.set(this,void 0),hn.set(this,void 0),dn.set(this,void 0),gn.set(this,void 0),pn.set(this,void 0),mn.set(this,void 0),yn.set(this,void 0),fr.set(this,void 0),kr.set(this,void 0),Zn.set(this,void 0),Mi.set(this,0),Xn.set(this,void 0),this.init(e,t)}init(e,t){t?(ht[0]=ht[16]=ht[1]=ht[2]=ht[3]=ht[4]=ht[5]=ht[6]=ht[7]=ht[8]=ht[9]=ht[10]=ht[11]=ht[12]=ht[13]=ht[14]=ht[15]=0,Ce(this,cr,ht)):Ce(this,cr,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),e?(Ce(this,cn,3238371032),Ce(this,fn,914150663),Ce(this,hn,812702999),Ce(this,dn,4144912697),Ce(this,gn,4290775857),Ce(this,pn,1750603025),Ce(this,mn,1694076839),Ce(this,yn,3204075428)):(Ce(this,cn,1779033703),Ce(this,fn,3144134277),Ce(this,hn,1013904242),Ce(this,dn,2773480762),Ce(this,gn,1359893119),Ce(this,pn,2600822924),Ce(this,mn,528734635),Ce(this,yn,1541459225)),Ce(this,Yn,Ce(this,Xn,Ce(this,Wt,Ce(this,kr,0)))),Ce(this,Sr,Ce(this,fr,!1)),Ce(this,Kr,!0),Ce(this,Zn,e)}update(e){if(Te(this,Sr))return this;let t;e instanceof ArrayBuffer?t=new Uint8Array(e):t=e;let n=0;const r=t.length,o=Te(this,cr);for(;n<r;){let s;if(Te(this,fr)&&(Ce(this,fr,!1),o[0]=Te(this,Yn),o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),typeof t!="string")for(s=Te(this,Xn);n<r&&s<64;++n)o[s>>2]|=t[n]<<Ht[s++&3];else for(s=Te(this,Xn);n<r&&s<64;++n){let u=t.charCodeAt(n);u<128?o[s>>2]|=u<<Ht[s++&3]:u<2048?(o[s>>2]|=(192|u>>6)<<Ht[s++&3],o[s>>2]|=(128|u&63)<<Ht[s++&3]):u<55296||u>=57344?(o[s>>2]|=(224|u>>12)<<Ht[s++&3],o[s>>2]|=(128|u>>6&63)<<Ht[s++&3],o[s>>2]|=(128|u&63)<<Ht[s++&3]):(u=65536+((u&1023)<<10|t.charCodeAt(++n)&1023),o[s>>2]|=(240|u>>18)<<Ht[s++&3],o[s>>2]|=(128|u>>12&63)<<Ht[s++&3],o[s>>2]|=(128|u>>6&63)<<Ht[s++&3],o[s>>2]|=(128|u&63)<<Ht[s++&3])}Ce(this,Mi,s),Ce(this,Wt,Te(this,Wt)+(s-Te(this,Xn))),s>=64?(Ce(this,Yn,o[16]),Ce(this,Xn,s-64),this.hash(),Ce(this,fr,!0)):Ce(this,Xn,s)}return Te(this,Wt)>4294967295&&(Ce(this,kr,Te(this,kr)+(Te(this,Wt)/4294967296<<0)),Ce(this,Wt,Te(this,Wt)%4294967296)),this}finalize(){if(Te(this,Sr))return;Ce(this,Sr,!0);const e=Te(this,cr),t=Te(this,Mi);e[16]=Te(this,Yn),e[t>>2]|=Df[t&3],Ce(this,Yn,e[16]),t>=56&&(Te(this,fr)||this.hash(),e[0]=Te(this,Yn),e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=Te(this,kr)<<3|Te(this,Wt)>>>29,e[15]=Te(this,Wt)<<3,this.hash()}hash(){let e=Te(this,cn),t=Te(this,fn),n=Te(this,hn),r=Te(this,dn),o=Te(this,gn),s=Te(this,pn),u=Te(this,mn),h=Te(this,yn);const y=Te(this,cr);let v,d,l,a,p,b,w,m,f,g;for(let c=16;c<64;++c)a=y[c-15],v=(a>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,a=y[c-2],d=(a>>>17|a<<15)^(a>>>19|a<<13)^a>>>10,y[c]=y[c-16]+v+y[c-7]+d<<0;g=t&n;for(let c=0;c<64;c+=4)Te(this,Kr)?(Te(this,Zn)?(w=300032,a=y[0]-1413257819,h=a-150054599<<0,r=a+24177077<<0):(w=704751109,a=y[0]-210244248,h=a-1521486534<<0,r=a+143694565<<0),Ce(this,Kr,!1)):(v=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),d=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),w=e&t,l=w^e&n^g,b=o&s^~o&u,a=h+d+b+xi[c]+y[c],p=v+l,h=r+a<<0,r=a+p<<0),v=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),d=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7),m=r&e,l=m^r&t^w,b=h&o^~h&s,a=u+d+b+xi[c+1]+y[c+1],p=v+l,u=n+a<<0,n=a+p<<0,v=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),d=(u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7),f=n&r,l=f^n&e^m,b=u&h^~u&o,a=s+d+b+xi[c+2]+y[c+2],p=v+l,s=t+a<<0,t=a+p<<0,v=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),d=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),g=t&n,l=g^t&r^f,b=s&u^~s&h,a=o+d+b+xi[c+3]+y[c+3],p=v+l,o=e+a<<0,e=a+p<<0;Ce(this,cn,Te(this,cn)+e<<0),Ce(this,fn,Te(this,fn)+t<<0),Ce(this,hn,Te(this,hn)+n<<0),Ce(this,dn,Te(this,dn)+r<<0),Ce(this,gn,Te(this,gn)+o<<0),Ce(this,pn,Te(this,pn)+s<<0),Ce(this,mn,Te(this,mn)+u<<0),Ce(this,yn,Te(this,yn)+h<<0)}hex(){this.finalize();const e=Te(this,cn),t=Te(this,fn),n=Te(this,hn),r=Te(this,dn),o=Te(this,gn),s=Te(this,pn),u=Te(this,mn),h=Te(this,yn);let y=Ae[e>>28&15]+Ae[e>>24&15]+Ae[e>>20&15]+Ae[e>>16&15]+Ae[e>>12&15]+Ae[e>>8&15]+Ae[e>>4&15]+Ae[e&15]+Ae[t>>28&15]+Ae[t>>24&15]+Ae[t>>20&15]+Ae[t>>16&15]+Ae[t>>12&15]+Ae[t>>8&15]+Ae[t>>4&15]+Ae[t&15]+Ae[n>>28&15]+Ae[n>>24&15]+Ae[n>>20&15]+Ae[n>>16&15]+Ae[n>>12&15]+Ae[n>>8&15]+Ae[n>>4&15]+Ae[n&15]+Ae[r>>28&15]+Ae[r>>24&15]+Ae[r>>20&15]+Ae[r>>16&15]+Ae[r>>12&15]+Ae[r>>8&15]+Ae[r>>4&15]+Ae[r&15]+Ae[o>>28&15]+Ae[o>>24&15]+Ae[o>>20&15]+Ae[o>>16&15]+Ae[o>>12&15]+Ae[o>>8&15]+Ae[o>>4&15]+Ae[o&15]+Ae[s>>28&15]+Ae[s>>24&15]+Ae[s>>20&15]+Ae[s>>16&15]+Ae[s>>12&15]+Ae[s>>8&15]+Ae[s>>4&15]+Ae[s&15]+Ae[u>>28&15]+Ae[u>>24&15]+Ae[u>>20&15]+Ae[u>>16&15]+Ae[u>>12&15]+Ae[u>>8&15]+Ae[u>>4&15]+Ae[u&15];return Te(this,Zn)||(y+=Ae[h>>28&15]+Ae[h>>24&15]+Ae[h>>20&15]+Ae[h>>16&15]+Ae[h>>12&15]+Ae[h>>8&15]+Ae[h>>4&15]+Ae[h&15]),y}toString(){return this.hex()}digest(){this.finalize();const e=Te(this,cn),t=Te(this,fn),n=Te(this,hn),r=Te(this,dn),o=Te(this,gn),s=Te(this,pn),u=Te(this,mn),h=Te(this,yn),y=[e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24&255,n>>16&255,n>>8&255,n&255,r>>24&255,r>>16&255,r>>8&255,r&255,o>>24&255,o>>16&255,o>>8&255,o&255,s>>24&255,s>>16&255,s>>8&255,s&255,u>>24&255,u>>16&255,u>>8&255,u&255];return Te(this,Zn)||y.push(h>>24&255,h>>16&255,h>>8&255,h&255),y}array(){return this.digest()}arrayBuffer(){this.finalize();const e=new ArrayBuffer(Te(this,Zn)?28:32),t=new DataView(e);return t.setUint32(0,Te(this,cn)),t.setUint32(4,Te(this,fn)),t.setUint32(8,Te(this,hn)),t.setUint32(12,Te(this,dn)),t.setUint32(16,Te(this,gn)),t.setUint32(20,Te(this,pn)),t.setUint32(24,Te(this,mn)),Te(this,Zn)||t.setUint32(28,Te(this,yn)),e}}Yn=new WeakMap,cr=new WeakMap,Wt=new WeakMap,Sr=new WeakMap,Kr=new WeakMap,cn=new WeakMap,fn=new WeakMap,hn=new WeakMap,dn=new WeakMap,gn=new WeakMap,pn=new WeakMap,mn=new WeakMap,yn=new WeakMap,fr=new WeakMap,kr=new WeakMap,Zn=new WeakMap,Mi=new WeakMap,Xn=new WeakMap;function Mf(i){const e=new Lf;return e.update(i),parseInt(e.hex().substring(0,8),16)}const Bf=function(i){var e="#";return i.forEach(function(t){t<16&&(e+=0),e+=t.toString(16)}),e},qf=function(i,e,t){i/=360;var n=t<.5?t*(1+e):t+e-t*e,r=2*t-n;return[i+1/3,i,i-1/3].map(function(o){return o<0&&o++,o>1&&o--,o<1/6?o=r+(n-r)*6*o:o<.5?o=n:o<2/3?o=r+(n-r)*6*(2/3-o):o=r,Math.round(o*255)})};class Ff{constructor(e={}){const[t,n]=[e.lightness,e.saturation].map(function(r){return r=r!==void 0?r:[.35,.5,.65],Array.isArray(r)?r.concat():[r]});this.L=t,this.S=n,typeof e.hue=="number"&&(e.hue={min:e.hue,max:e.hue}),typeof e.hue=="object"&&!Array.isArray(e.hue)&&(e.hue=[e.hue]),typeof e.hue>"u"&&(e.hue=[]),this.hueRanges=e.hue.map(function(r){return{min:typeof r.min>"u"?0:r.min,max:typeof r.max>"u"?360:r.max}}),this.hash=Mf,typeof e.hash=="function"&&(this.hash=e.hash),e.hash==="bkdr"&&(this.hash=Rf)}hsl(e){var t,n,r,o=this.hash(e),s=727;if(this.hueRanges.length){const u=this.hueRanges[o%this.hueRanges.length];t=o/this.hueRanges.length%s*(u.max-u.min)/s+u.min}else t=o%359;return o=Math.ceil(o/360),n=this.S[o%this.S.length],o=Math.ceil(o/this.S.length),r=this.L[o%this.L.length],[t,n,r]}rgb(e){var t=this.hsl(e);return qf.apply(this,t)}hex(e){var t=this.rgb(e);return Bf(t)}}const hr={isOnline:!1,showOffline:i=>{hr.isOnline=!1,i.innerHTML='<span class="red"> </span>'},showOnline:i=>{hr.isOnline=!0,i.innerHTML='<span class="green"> </span>'},statusListener:i=>e=>{hr.isOnline&&e.value==ai.Disconnected?hr.showOffline(i):!hr.isOnline&&e.value==ai.Connected&&hr.showOnline(i)}};function jf(i,e,t){const n=[];for(const{clientID:r,presence:o}of e)n.push(t===r?`<b>${o.username}</b>`:o.username);i.innerHTML=JSON.stringify(n)}function Os(i,e,t){i.innerText=t.toJSON(),e.innerText=t.getRoot().content.toTestString()}const Uf=document.getElementById("peers"),Ss=document.getElementById("document"),ks=document.getElementById("document-text"),$f=document.getElementById("network-status"),zf=new Ff,Jf=`vanilla-quill-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`;function uo(i){const{embed:e,...t}=i.attributes??{};return e?{insert:JSON.parse(e),attributes:t}:{insert:i.content||"",attributes:i.attributes}}async function Vf(){const i=new lo.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"});await i.activate();const e=new lo.Document(Jf,{enableDevtools:!0});e.subscribe("connection",h=>{hr.statusListener($f)(h)}),e.subscribe("presence",h=>{h.type!==dt.PresenceChanged&&jf(Uf,e.getPresences(),i.getID())}),await i.attach(e,{initialPresence:{username:i.getID().slice(-2),color:zf.hex(i.getID().slice(-2)),selection:void 0}}),e.update(h=>{h.content||(h.content=new lo.Text,h.content.edit(0,0,`
`))},"create content if not exists"),e.subscribe(h=>{h.type==="snapshot"&&u(),Os(Ss,ks,e)}),e.subscribe("$.content",h=>{h.type==="remote-change"&&s(h.value.operations),n()}),e.subscribe("others",h=>{h.type===dt.Unwatched?o.removeCursor(h.value.clientID):h.type===dt.PresenceChanged&&t(h.value)});function t(h){const{clientID:y,presence:v}=h;if(y===i.getID()||!v)return;const{username:d,color:l,selection:a}=v;if(!a)return;const p=e.getRoot().content.posRangeToIndexRange(a);o.createCursor(y,d,l),o.moveCursor(y,{index:p[0],length:p[1]-p[0]})}function n(){for(const h of e.getPresences())t(h)}await i.sync(),Es.register("modules/cursors",Cf);const r=new Es("#editor",{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["image","video"],["clean"]],cursors:!0},theme:"snow"}),o=r.getModule("cursors");r.on("text-change",(h,y,v)=>{if(v==="api"||!h.ops)return;let d=0,l=0;console.log(`%c quill: ${JSON.stringify(h.ops)}`,"color: green");for(const a of h.ops)a.attributes!==void 0||a.insert!==void 0?(a.retain!==void 0&&(l=d+a.retain),console.log(`%c local: ${d}-${l}: ${a.insert} ${a.attributes?JSON.stringify(a.attributes):"{}"}`,"color: green"),e.update((p,b)=>{let w;a.attributes!==void 0&&a.insert===void 0?p.content.setStyle(d,l,a.attributes):a.insert!==void 0&&(l<d&&(l=d),typeof a.insert=="object"?w=p.content.edit(d,l," ",{embed:JSON.stringify(a.insert),...a.attributes}):w=p.content.edit(d,l,a.insert,a.attributes),d=l+a.insert.length),w&&b.set({selection:p.content.indexRangeToPosRange(w)})},`update style by ${i.getID()}`)):a.delete!==void 0?(l=d+a.delete,console.log(`%c local: ${d}-${l}: ''`,"color: green"),e.update((p,b)=>{const w=p.content.edit(d,l,"");w&&b.set({selection:p.content.indexRangeToPosRange(w)})},`update content by ${i.getID()}`)):a.retain!==void 0&&(d=l+a.retain,l=d)}).on("selection-change",(h,y,v)=>{if(h){if(v==="api"){const{selection:d}=e.getMyPresence();if(d){const[l,a]=e.getRoot().content.posRangeToIndexRange(d),{index:p,length:b}=h;if(l===p&&a===p+b)return}}e.update((d,l)=>{l.set({selection:d.content.indexRangeToPosRange([h.index,h.index+h.length])})},`update selection by ${i.getID()}`)}});function s(h){const y=[];let v=0;for(const d of h)if(d.type==="edit"){const l=d.from,a=d.to,p=l-v,b=a-l,{insert:w,attributes:m}=uo(d.value);if(console.log(`%c remote: ${l}-${a}: ${w}`,"color: skyblue"),p&&y.push({retain:p}),b&&y.push({delete:b}),w){const f={insert:w};m&&(f.attributes=m),y.push(f)}v=a}else if(d.type==="style"){const l=d.from,a=d.to,p=l-v,b=a-l,{attributes:w}=uo(d.value);if(console.log(`%c remote: ${l}-${a}: ${JSON.stringify(w)}`,"color: skyblue"),p&&y.push({retain:p}),w){const m={attributes:w};b&&(m.retain=b),y.push(m)}v=a}if(y.length){console.log(`%c to quill: ${JSON.stringify(y)}`,"color: green");const d={ops:y};r.updateContents(d,"api")}}function u(){const y={ops:e.getRoot().content.values().map(v=>uo(v))};r.setContents(y,"api")}u(),n(),Os(Ss,ks,e)}Vf();
